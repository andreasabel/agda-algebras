---
layout: default
title : "Demos/HSP" (The Agda Universal Algebra Library)"
date : "2022-05-26"
author: "the agda-algebras development team"
output: html_document
bibliography: ualib_refs.bib
---


Introduction
============

The Agda Universal Algebra Library ([agda-algebras][]) formalizes the foundations of universal 
algebra in intensional Martin-L√∂f type theory ([MLTT][]) using [Agda][] () ¬†[@Norell:2007; @agdaref].
The library includes a collection of definitions and verified theorems originated in classical 
(set-theory based) universal algebra and equational logic, but adapted to [MLTT][].

The first major milestone of the project is a complete formalization of *Birkhoff's variety
theorem* (also known as the *HSP theorem*)¬†[@Birkhoff:1935]. To the best of our knowledge, this
is the first time Birkhoff's celebrated 1935 result has been formalized in [MLTT][].[^1]

Our first attempt to formalize Birkhoff's theorem suffered from two flaws.[^2] First, we 
assumed function extensionality in [MLTT][]; consequently, it was unclear whether the
formalization was fully constructive. Second, an inconsistency could be contrived by taking the
type `X`, representing an arbitrary collection of variable symbols, to be the two element type
(see ¬ß[7](#sec:discuss){reference-type="ref" reference="sec:discuss"} for details). To resolve
these issues, we developed a new formalization of the HSP theorem based on *setoids* and
rewrote much of the [agda-algebras][] library to support this approach. This enabled us to
avoid function extensionality altogether. Moreover, the type `X` of variable symbols was
treated with more care using the *context* and *environment* types that Andreas Abel uses
in¬†[@Abel:2021] to formalize Birkhoff's completeness theorem. These design choices are
discussed further in ¬ß[2.2](#setoids){reference-type="ref"
reference="setoids"}--[2.3](#setoid-functions){reference-type="ref"
reference="setoid-functions"}.

What follows is a self-contained formal proof of the HSP theorem in [Agda][]. This is achieved
by extracting a subset of the library, including only the pieces needed for the proof, into a
single literate file.[^3] For spaces reasons, we elide some inessential parts, but strive to
preserve the essential content and character of the development. Specifically, routine or
overly technical components, as well as anything that does not seem to offer insight into the
central ideas of the proof are omitted. (The file [[src/Demos/HSP.lagda]{.sans-serif}](https://github.com/ualib/agda-algebras/blob/master/src/Demos/HSP.lagda) mentioned above includes the full proof.)


In this paper, we highlight some of the more challenging aspects of formalizing universal algebra in type theory. To some extent, this is a sobering glimpse of the significant technical hurdles that must be overcome to do mathematics in dependent type theory. Nonetheless, we hope to demonstrate that [MLTT][] is a relatively natural language for formalizing universal algebra. Indeed, we believe that researchers with sufficient patience and resolve can reap the substantial rewards of deeper insight and greater confidence in their results by using type
theory and a proof assistant like [Agda][]. On the other hand, this paper is probably not the best place to learn about the latter, since we assume the reader is already familiar with [MLTT][] and [Agda][]. In summary, our main contribution is to show that a straightforward but very general representation of algebraic structures in dependent type theory is quite practical, as we demonstrate by formalizing a major seminal result of universal algebra.

Preliminaries
=============

Logical foundations
-------------------

To best emulate [MLTT][], we use
<pre class="Agda">
<a id="3756" class="Symbol">{-#</a> <a id="3760" class="Keyword">OPTIONS</a> <a id="3768" class="Pragma">--without-K</a> <a id="3780" class="Pragma">--exact-split</a> <a id="3794" class="Pragma">--safe</a> <a id="3801" class="Symbol">#-}</a>
</pre>
 disables [Streicher's K axiom](https://ncatlab.org/nlab/show/axiom+K+%28type+theory%29); 
directs [Agda][] to accept only definitions behaving like *judgmental* equalities;
**safe** ensures that nothing is postulated outright.
(See¬†[@agdaref-axiomk; @agdaref-safeagda; @agdatools-patternmatching].)

Here are brief descriptions of these options, accompanied by links to
related documentation.

*  **without-K** disables [Streicher's K axiom](https://ncatlab.org/nlab/show/axiom+K+%28type+theory%29). See
   the [section on axiom K](https://agda.readthedocs.io/en/v2.6.1/language/without-k.html) in the [Agda Language Reference Manual](https://agda.readthedocs.io/en/v2.6.1.3/language)¬†[@agdaref-axiomk].

*  **exact-split** directs [Agda][] to accept only definitions behaving like *judgmental* equalities. See the [Pattern matching and equality](https://agda.readthedocs.io/en/v2.6.1/tools/command-line-options.html#pattern-matching-and-equality) section of the [Agda Tools](https://agda.readthedocs.io/en/v2.6.1.3/tools/) documentation¬†[@agdatools-patternmatching].

*  **safe** ensures that nothing is postulated outright---every non-axiom has to be an explicit assumption (e.g., an argument to a function or module). See the [cmdoption-safe](https://agda.readthedocs.io/en/v2.6.1/tools/command-line-options.html#cmdoption-safe) section of¬†[@agdaref-safeagda].

We also make use of the following definitions from [Agda][]'s standard library (ver.¬†1.7).

<pre class="Agda">
<a id="5287" class="Comment">-- Import universe levels and Signature type (described below) from the agda-algebras library.</a>
<a id="5382" class="Keyword">open</a> <a id="5387" class="Keyword">import</a> <a id="5394" href="Base.Algebras.Basic.html" class="Module">Base.Algebras.Basic</a> <a id="5414" class="Keyword">using</a> <a id="5420" class="Symbol">(</a> <a id="5422" href="Base.Algebras.Basic.html#1162" class="Generalizable">ùìû</a> <a id="5424" class="Symbol">;</a> <a id="5426" href="Base.Algebras.Basic.html#1164" class="Generalizable">ùì•</a> <a id="5428" class="Symbol">;</a> <a id="5430" href="Base.Algebras.Basic.html#3890" class="Function">Signature</a> <a id="5440" class="Symbol">)</a>
<a id="5442" class="Keyword">module</a> <a id="5449" href="Demos.HSP.html" class="Module">Demos.HSP</a> <a id="5459" class="Symbol">{</a><a id="5460" href="Demos.HSP.html#5460" class="Bound">ùëÜ</a> <a id="5462" class="Symbol">:</a> <a id="5464" href="Base.Algebras.Basic.html#3890" class="Function">Signature</a> <a id="5474" href="Base.Algebras.Basic.html#1162" class="Generalizable">ùìû</a> <a id="5476" href="Base.Algebras.Basic.html#1164" class="Generalizable">ùì•</a><a id="5477" class="Symbol">}</a> <a id="5479" class="Keyword">where</a>

<a id="5486" class="Comment">-- Import 16 definitions from the Agda Standard Library.</a>
<a id="5543" class="Keyword">open</a> <a id="5548" class="Keyword">import</a>  <a id="5556" href="Data.Unit.Polymorphic.html" class="Module">Data.Unit.Polymorphic</a>        <a id="5585" class="Keyword">using</a> <a id="5591" class="Symbol">(</a> <a id="5593" href="Data.Unit.Polymorphic.Base.html#480" class="Function">‚ä§</a> <a id="5595" class="Symbol">;</a> <a id="5597" href="Data.Unit.Polymorphic.Base.html#524" class="Function">tt</a>                                            <a id="5643" class="Symbol">)</a>
<a id="5645" class="Keyword">open</a> <a id="5650" class="Keyword">import</a>  <a id="5658" href="Function.html" class="Module">Function</a>                     <a id="5687" class="Keyword">using</a> <a id="5693" class="Symbol">(</a> <a id="5695" href="Function.Base.html#615" class="Function">id</a> <a id="5698" class="Symbol">;</a> <a id="5700" href="Function.Base.html#1031" class="Function Operator">_‚àò_</a> <a id="5704" class="Symbol">;</a> <a id="5706" href="Function.Base.html#1554" class="Function">flip</a>                                   <a id="5745" class="Symbol">)</a>
<a id="5747" class="Keyword">open</a> <a id="5752" class="Keyword">import</a>  <a id="5760" href="Level.html" class="Module">Level</a>                        <a id="5789" class="Keyword">using</a> <a id="5795" class="Symbol">(</a> <a id="5797" href="Agda.Primitive.html#597" class="Postulate">Level</a>                                             <a id="5847" class="Symbol">)</a>
<a id="5849" class="Keyword">open</a> <a id="5854" class="Keyword">import</a>  <a id="5862" href="Relation.Binary.html" class="Module">Relation.Binary</a>              <a id="5891" class="Keyword">using</a> <a id="5897" class="Symbol">(</a> <a id="5899" href="Relation.Binary.Core.html#882" class="Function">Rel</a> <a id="5903" class="Symbol">;</a> <a id="5905" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="5912" class="Symbol">;</a> <a id="5914" href="Relation.Binary.Structures.html#1522" class="Record">IsEquivalence</a>                      <a id="5949" class="Symbol">)</a>
<a id="5951" class="Keyword">open</a> <a id="5956" class="Keyword">import</a>  <a id="5964" href="Relation.Binary.Definitions.html" class="Module">Relation.Binary.Definitions</a>  <a id="5993" class="Keyword">using</a> <a id="5999" class="Symbol">(</a> <a id="6001" href="Relation.Binary.Definitions.html#1339" class="Function">Reflexive</a> <a id="6011" class="Symbol">;</a> <a id="6013" href="Relation.Binary.Definitions.html#1498" class="Function">Symmetric</a> <a id="6023" class="Symbol">;</a> <a id="6025" href="Relation.Binary.Definitions.html#1978" class="Function">Transitive</a> <a id="6036" class="Symbol">;</a> <a id="6038" href="Relation.Binary.Definitions.html#1424" class="Function">Sym</a> <a id="6042" class="Symbol">;</a> <a id="6044" href="Relation.Binary.Definitions.html#1585" class="Function">Trans</a>  <a id="6051" class="Symbol">)</a>
<a id="6053" class="Keyword">open</a> <a id="6058" class="Keyword">import</a>  <a id="6066" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a>  <a id="6105" class="Keyword">using</a> <a id="6111" class="Symbol">(</a> <a id="6113" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">_‚â°_</a>                                     <a id="6153" class="Symbol">)</a>
<a id="6155" class="Keyword">open</a> <a id="6160" class="Keyword">import</a>  <a id="6168" href="Relation.Unary.html" class="Module">Relation.Unary</a>               <a id="6197" class="Keyword">using</a> <a id="6203" class="Symbol">(</a> <a id="6205" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="6210" class="Symbol">;</a> <a id="6212" href="Relation.Unary.html#1742" class="Function Operator">_‚äÜ_</a> <a id="6216" class="Symbol">;</a> <a id="6218" href="Relation.Unary.html#1523" class="Function Operator">_‚àà_</a>                                  <a id="6255" class="Symbol">)</a>

<a id="6258" class="Comment">-- -- Import 23 definitions from the Agda Standard Library and rename 12 of them.</a>
<a id="6340" class="Keyword">open</a> <a id="6345" class="Keyword">import</a>  <a id="6353" href="Agda.Primitive.html" class="Module">Agda.Primitive</a>  <a id="6369" class="Keyword">renaming</a>  <a id="6379" class="Symbol">(</a> <a id="6381" href="Agda.Primitive.html#326" class="Primitive">Set</a>    <a id="6388" class="Symbol">to</a> <a id="6391" class="Primitive">Type</a>    <a id="6399" class="Symbol">)</a>  <a id="6402" class="Keyword">using</a>  <a id="6409" class="Symbol">(</a> <a id="6411" href="Agda.Primitive.html#810" class="Primitive Operator">_‚äî_</a> <a id="6415" class="Symbol">;</a> <a id="6417" href="Agda.Primitive.html#780" class="Primitive">lsuc</a>                   <a id="6440" class="Symbol">)</a>
<a id="6442" class="Keyword">open</a> <a id="6447" class="Keyword">import</a>  <a id="6455" href="Data.Product.html" class="Module">Data.Product</a>    <a id="6471" class="Keyword">renaming</a>  <a id="6481" class="Symbol">(</a> <a id="6483" href="Agda.Builtin.Sigma.html#252" class="Field">proj‚ÇÅ</a>  <a id="6490" class="Symbol">to</a> <a id="6493" class="Field">fst</a>     <a id="6501" class="Symbol">)</a>  <a id="6504" class="Keyword">using</a>  <a id="6511" class="Symbol">(</a> <a id="6513" href="Data.Product.html#1167" class="Function Operator">_√ó_</a> <a id="6517" class="Symbol">;</a> <a id="6519" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">_,_</a> <a id="6523" class="Symbol">;</a> <a id="6525" href="Agda.Builtin.Sigma.html#166" class="Record">Œ£</a> <a id="6527" class="Symbol">;</a> <a id="6529" href="Data.Product.html#916" class="Function">Œ£-syntax</a>     <a id="6542" class="Symbol">)</a>
                             <a id="6573" class="Keyword">renaming</a>  <a id="6583" class="Symbol">(</a> <a id="6585" href="Agda.Builtin.Sigma.html#264" class="Field">proj‚ÇÇ</a>  <a id="6592" class="Symbol">to</a> <a id="6595" class="Field">snd</a>     <a id="6603" class="Symbol">)</a>
<a id="6605" class="Keyword">open</a> <a id="6610" class="Keyword">import</a>  <a id="6618" href="Function.html" class="Module">Function</a>        <a id="6634" class="Keyword">renaming</a>  <a id="6644" class="Symbol">(</a> <a id="6646" href="Function.Bundles.html#1868" class="Record">Func</a>   <a id="6653" class="Symbol">to</a> <a id="6656" class="Record">_‚ü∂_</a>     <a id="6664" class="Symbol">)</a>  <a id="6667" class="Keyword">using</a>  <a id="6674" class="Symbol">(</a>                              <a id="6705" class="Symbol">)</a>
<a id="6707" class="Keyword">open</a>         <a id="6720" href="Demos.HSP.html#6656" class="Module">_‚ü∂_</a>             <a id="6736" class="Keyword">renaming</a>  <a id="6746" class="Symbol">(</a> <a id="6748" href="Function.Bundles.html#1919" class="Field">f</a>      <a id="6755" class="Symbol">to</a> <a id="6758" class="Field">_‚ü®$‚ü©_</a>   <a id="6766" class="Symbol">)</a>  <a id="6769" class="Keyword">using</a>  <a id="6776" class="Symbol">(</a> <a id="6778" href="Function.Bundles.html#1938" class="Field">cong</a>                         <a id="6807" class="Symbol">)</a>
<a id="6809" class="Keyword">open</a>         <a id="6822" href="Relation.Binary.Structures.html#1522" class="Module">IsEquivalence</a>   <a id="6838" class="Keyword">renaming</a>  <a id="6848" class="Symbol">(</a> <a id="6850" href="Relation.Binary.Structures.html#1568" class="Field">refl</a>   <a id="6857" class="Symbol">to</a> <a id="6860" class="Field">refl·µâ</a>   <a id="6868" class="Symbol">)</a>
                             <a id="6899" class="Keyword">renaming</a>  <a id="6909" class="Symbol">(</a> <a id="6911" href="Relation.Binary.Structures.html#1594" class="Field">sym</a>    <a id="6918" class="Symbol">to</a> <a id="6921" class="Field">sym·µâ</a>    <a id="6929" class="Symbol">)</a>
                             <a id="6960" class="Keyword">renaming</a>  <a id="6970" class="Symbol">(</a> <a id="6972" href="Relation.Binary.Structures.html#1620" class="Field">trans</a>  <a id="6979" class="Symbol">to</a> <a id="6982" class="Field">trans·µâ</a>  <a id="6990" class="Symbol">)</a>  <a id="6993" class="Keyword">using</a>  <a id="7000" class="Symbol">(</a>                              <a id="7031" class="Symbol">)</a>
<a id="7033" class="Keyword">open</a>         <a id="7046" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a>          <a id="7062" class="Keyword">renaming</a>  <a id="7072" class="Symbol">(</a> <a id="7074" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>   <a id="7081" class="Symbol">to</a> <a id="7084" class="Function">reflÀ¢</a>   <a id="7092" class="Symbol">)</a>
                             <a id="7123" class="Keyword">renaming</a>  <a id="7133" class="Symbol">(</a> <a id="7135" href="Relation.Binary.Structures.html#1594" class="Function">sym</a>    <a id="7142" class="Symbol">to</a> <a id="7145" class="Function">symÀ¢</a>    <a id="7153" class="Symbol">)</a>
                             <a id="7184" class="Keyword">renaming</a>  <a id="7194" class="Symbol">(</a> <a id="7196" href="Relation.Binary.Structures.html#1620" class="Function">trans</a>  <a id="7203" class="Symbol">to</a> <a id="7206" class="Function">transÀ¢</a>  <a id="7214" class="Symbol">)</a>
                             <a id="7245" class="Keyword">renaming</a>  <a id="7255" class="Symbol">(</a> <a id="7257" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="7261" class="Symbol">to</a> <a id="7264" class="Field Operator">_‚âàÀ¢_</a>       <a id="7275" class="Symbol">)</a>  <a id="7278" class="Keyword">using</a>  <a id="7285" class="Symbol">(</a> <a id="7287" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a>  <a id="7296" class="Symbol">;</a> <a id="7298" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a>     <a id="7316" class="Symbol">)</a>

<a id="7319" class="Comment">-- Assign handles to 3 modules of the Agda Standard Library.</a>
<a id="7380" class="Keyword">import</a>       <a id="7393" href="Function.Definitions.html" class="Module">Function.Definitions</a>                   <a id="7432" class="Symbol">as</a>   <a id="7437" class="Module">FD</a>
<a id="7440" class="Keyword">import</a>       <a id="7453" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a>  <a id="7492" class="Symbol">as</a>   <a id="7497" class="Module">‚â°</a>
<a id="7499" class="Keyword">import</a>       <a id="7512" href="Relation.Binary.Reasoning.Setoid.html" class="Module">Relation.Binary.Reasoning.Setoid</a>       <a id="7551" class="Symbol">as</a>   <a id="7556" class="Module">SetoidReasoning</a>

<a id="7573" class="Keyword">private</a> <a id="7581" class="Keyword">variable</a> <a id="7590" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="7592" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a> <a id="7595" href="Demos.HSP.html#7595" class="Generalizable">Œ≤</a> <a id="7597" href="Demos.HSP.html#7597" class="Generalizable">œÅ·µá</a> <a id="7600" href="Demos.HSP.html#7600" class="Generalizable">Œ≥</a> <a id="7602" href="Demos.HSP.html#7602" class="Generalizable">œÅ·∂ú</a> <a id="7605" href="Demos.HSP.html#7605" class="Generalizable">Œ¥</a> <a id="7607" href="Demos.HSP.html#7607" class="Generalizable">œÅ·µà</a> <a id="7610" href="Demos.HSP.html#7610" class="Generalizable">œÅ</a> <a id="7612" href="Demos.HSP.html#7612" class="Generalizable">œá</a> <a id="7614" href="Demos.HSP.html#7614" class="Generalizable">‚Ñì</a> <a id="7616" class="Symbol">:</a> <a id="7618" href="Agda.Primitive.html#597" class="Postulate">Level</a> <a id="7624" class="Symbol">;</a>       <a id="7632" href="Demos.HSP.html#7632" class="Generalizable">Œì</a> <a id="7634" href="Demos.HSP.html#7634" class="Generalizable">Œî</a> <a id="7636" class="Symbol">:</a> <a id="7638" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="7643" href="Demos.HSP.html#7612" class="Generalizable">œá</a>

</pre>

The above imports include some adjustments to "standard" [Agda][] syntax; in particular, we use `Type` in place of `Set`, the infix long arrow symbol, `_‚ü∂_`, in place of `Func` (the type of "setoid functions," discussed in
¬ß[2.3](#setoid-functions){reference-type="ref"
reference="setoid-functions"} below), and the symbol `_‚ü®$‚ü©_` in place of `f` (application of the map of a setoid function); we use `fst` and `snd`, and sometimes `‚à£_‚à£` and `‚à•_‚à•`, to denote the first and second projections out of the product type `_√ó_`.

<pre class="Agda">
<a id="8195" class="Keyword">module</a> <a id="8202" href="Demos.HSP.html#8202" class="Module">_</a> <a id="8204" class="Symbol">{</a><a id="8205" href="Demos.HSP.html#8205" class="Bound">A</a> <a id="8207" class="Symbol">:</a> <a id="8209" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="8214" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="8216" class="Symbol">}{</a><a id="8218" href="Demos.HSP.html#8218" class="Bound">B</a> <a id="8220" class="Symbol">:</a> <a id="8222" href="Demos.HSP.html#8205" class="Bound">A</a> <a id="8224" class="Symbol">‚Üí</a> <a id="8226" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="8231" href="Demos.HSP.html#7595" class="Generalizable">Œ≤</a><a id="8232" class="Symbol">}</a> <a id="8234" class="Keyword">where</a>
 <a id="8241" href="Demos.HSP.html#8241" class="Function Operator">‚à£_‚à£</a> <a id="8245" class="Symbol">:</a> <a id="8247" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="8250" href="Demos.HSP.html#8250" class="Bound">x</a> <a id="8252" href="Data.Product.html#916" class="Function">‚àà</a> <a id="8254" href="Demos.HSP.html#8205" class="Bound">A</a> <a id="8256" href="Data.Product.html#916" class="Function">]</a> <a id="8258" href="Demos.HSP.html#8218" class="Bound">B</a> <a id="8260" href="Demos.HSP.html#8250" class="Bound">x</a> <a id="8262" class="Symbol">‚Üí</a> <a id="8264" href="Demos.HSP.html#8205" class="Bound">A</a>
 <a id="8267" href="Demos.HSP.html#8241" class="Function Operator">‚à£_‚à£</a> <a id="8271" class="Symbol">=</a> <a id="8273" href="Demos.HSP.html#6493" class="Field">fst</a>
 <a id="8278" href="Demos.HSP.html#8278" class="Function Operator">‚à•_‚à•</a> <a id="8282" class="Symbol">:</a> <a id="8284" class="Symbol">(</a><a id="8285" href="Demos.HSP.html#8285" class="Bound">z</a> <a id="8287" class="Symbol">:</a> <a id="8289" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="8292" href="Demos.HSP.html#8292" class="Bound">a</a> <a id="8294" href="Data.Product.html#916" class="Function">‚àà</a> <a id="8296" href="Demos.HSP.html#8205" class="Bound">A</a> <a id="8298" href="Data.Product.html#916" class="Function">]</a> <a id="8300" href="Demos.HSP.html#8218" class="Bound">B</a> <a id="8302" href="Demos.HSP.html#8292" class="Bound">a</a><a id="8303" class="Symbol">)</a> <a id="8305" class="Symbol">‚Üí</a> <a id="8307" href="Demos.HSP.html#8218" class="Bound">B</a> <a id="8309" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="8311" href="Demos.HSP.html#8285" class="Bound">z</a> <a id="8313" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a>
 <a id="8316" href="Demos.HSP.html#8278" class="Function Operator">‚à•_‚à•</a> <a id="8320" class="Symbol">=</a> <a id="8322" href="Demos.HSP.html#6595" class="Field">snd</a>
</pre>


Setoids
-------

A *setoid* is a pair consisting of a type and an equivalence relation on that type. Setoids are useful for representing a set with an explicit, "local" notion of equivalence, instead of relying on an implicit, "global" one as is more common in set theory. In reality, informal mathematical practice relies on equivalence relations quite pervasively, taking great care to define only functions that preserve equivalences, while eliding the details. To be properly formal, such details must be made explicit. While there are many different workable approaches, the one that requires no additional meta-theory is based on setoids, which is why we adopt it here. While in some settings setoids are found by others to be burdensome, we have not found them to be so for universal algebra.

The [agda-algebras][] library was first developed without setoids, relying on propositional equality instead, along with some experimental, domain-specific types for equivalence classes, quotients, etc. This
required postulating function extensionality,[^4] which is known to be independent from [MLTT][]¬†[@MHE; @MHE:2019]; this was unsatisfactory as we aimed to show that the theorems hold directly in [MLTT][] without extra axioms. The present work makes no appeal to functional extensionality or classical axioms like Choice or Excluded Middle.[^5]

Setoid functions
----------------

A *setoid function* is a function from one setoid to another that respects the underlying equivalences. If [ùë®]{.ab} and [ùë©]{.ab} are setoids, we use [ùë®]{.ab}_[‚ü∂]{.aor}_[ùë©]{.ab} to denote the type of setoid functions from [ùë®]{.ab} to [ùë©]{.ab}.

An example of a setoid function is the identity function from a setoid to itself. We define it, along with a binary composition operation for setoid functions, `_‚ü®‚àò‚ü©_`, as follows.

<pre class="Agda">

<a id="ùëñùëë"></a><a id="10168" href="Demos.HSP.html#10168" class="Function">ùëñùëë</a> <a id="10171" class="Symbol">:</a> <a id="10173" class="Symbol">{</a><a id="10174" href="Demos.HSP.html#10174" class="Bound">A</a> <a id="10176" class="Symbol">:</a> <a id="10178" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="10185" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="10187" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a><a id="10189" class="Symbol">}</a> <a id="10191" class="Symbol">‚Üí</a> <a id="10193" href="Demos.HSP.html#10174" class="Bound">A</a> <a id="10195" href="Demos.HSP.html#6656" class="Record Operator">‚ü∂</a> <a id="10197" href="Demos.HSP.html#10174" class="Bound">A</a>
<a id="10199" href="Demos.HSP.html#10168" class="Function">ùëñùëë</a> <a id="10202" class="Symbol">{</a><a id="10203" href="Demos.HSP.html#10203" class="Bound">A</a><a id="10204" class="Symbol">}</a> <a id="10206" class="Symbol">=</a> <a id="10208" class="Keyword">record</a> <a id="10215" class="Symbol">{</a> <a id="10217" href="Function.Bundles.html#1919" class="Field">f</a> <a id="10219" class="Symbol">=</a> <a id="10221" href="Function.Base.html#615" class="Function">id</a> <a id="10224" class="Symbol">;</a> <a id="10226" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="10231" class="Symbol">=</a> <a id="10233" href="Function.Base.html#615" class="Function">id</a> <a id="10236" class="Symbol">}</a>

<a id="_‚ü®‚àò‚ü©_"></a><a id="10239" href="Demos.HSP.html#10239" class="Function Operator">_‚ü®‚àò‚ü©_</a> <a id="10245" class="Symbol">:</a>  <a id="10248" class="Symbol">{</a><a id="10249" href="Demos.HSP.html#10249" class="Bound">A</a> <a id="10251" class="Symbol">:</a> <a id="10253" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="10260" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="10262" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a><a id="10264" class="Symbol">}</a> <a id="10266" class="Symbol">{</a><a id="10267" href="Demos.HSP.html#10267" class="Bound">B</a> <a id="10269" class="Symbol">:</a> <a id="10271" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="10278" href="Demos.HSP.html#7595" class="Generalizable">Œ≤</a> <a id="10280" href="Demos.HSP.html#7597" class="Generalizable">œÅ·µá</a><a id="10282" class="Symbol">}</a> <a id="10284" class="Symbol">{</a><a id="10285" href="Demos.HSP.html#10285" class="Bound">C</a> <a id="10287" class="Symbol">:</a> <a id="10289" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="10296" href="Demos.HSP.html#7600" class="Generalizable">Œ≥</a> <a id="10298" href="Demos.HSP.html#7602" class="Generalizable">œÅ·∂ú</a><a id="10300" class="Symbol">}</a>
 <a id="10303" class="Symbol">‚Üí</a>       <a id="10311" href="Demos.HSP.html#10267" class="Bound">B</a> <a id="10313" href="Demos.HSP.html#6656" class="Record Operator">‚ü∂</a> <a id="10315" href="Demos.HSP.html#10285" class="Bound">C</a>  <a id="10318" class="Symbol">‚Üí</a>  <a id="10321" href="Demos.HSP.html#10249" class="Bound">A</a> <a id="10323" href="Demos.HSP.html#6656" class="Record Operator">‚ü∂</a> <a id="10325" href="Demos.HSP.html#10267" class="Bound">B</a>  <a id="10328" class="Symbol">‚Üí</a>  <a id="10331" href="Demos.HSP.html#10249" class="Bound">A</a> <a id="10333" href="Demos.HSP.html#6656" class="Record Operator">‚ü∂</a> <a id="10335" href="Demos.HSP.html#10285" class="Bound">C</a>

<a id="10338" href="Demos.HSP.html#10338" class="Bound">f</a> <a id="10340" href="Demos.HSP.html#10239" class="Function Operator">‚ü®‚àò‚ü©</a> <a id="10344" href="Demos.HSP.html#10344" class="Bound">g</a> <a id="10346" class="Symbol">=</a> <a id="10348" class="Keyword">record</a>  <a id="10356" class="Symbol">{</a> <a id="10358" href="Function.Bundles.html#1919" class="Field">f</a> <a id="10360" class="Symbol">=</a> <a id="10362" class="Symbol">(</a><a id="10363" href="Demos.HSP.html#6758" class="Field Operator">_‚ü®$‚ü©_</a> <a id="10369" href="Demos.HSP.html#10338" class="Bound">f</a><a id="10370" class="Symbol">)</a> <a id="10372" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="10374" class="Symbol">(</a><a id="10375" href="Demos.HSP.html#6758" class="Field Operator">_‚ü®$‚ü©_</a> <a id="10381" href="Demos.HSP.html#10344" class="Bound">g</a><a id="10382" class="Symbol">)</a>
                  <a id="10402" class="Symbol">;</a> <a id="10404" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="10409" class="Symbol">=</a> <a id="10411" class="Symbol">(</a><a id="10412" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="10417" href="Demos.HSP.html#10338" class="Bound">f</a><a id="10418" class="Symbol">)</a> <a id="10420" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="10422" class="Symbol">(</a><a id="10423" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="10428" href="Demos.HSP.html#10344" class="Bound">g</a><a id="10429" class="Symbol">)</a> <a id="10431" class="Symbol">}</a>
</pre>


#### <a id="inverses">Inverses</a>

We define the *inverse* of a setoid function in terms of the image of the function's domain, as follows.

<pre class="Agda">

<a id="10602" class="Keyword">module</a> <a id="10609" href="Demos.HSP.html#10609" class="Module">_</a> <a id="10611" class="Symbol">{</a><a id="10612" href="Demos.HSP.html#10612" class="Bound">ùë®</a> <a id="10614" class="Symbol">:</a> <a id="10616" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="10623" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="10625" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a><a id="10627" class="Symbol">}{</a><a id="10629" href="Demos.HSP.html#10629" class="Bound">ùë©</a> <a id="10631" class="Symbol">:</a> <a id="10633" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="10640" href="Demos.HSP.html#7595" class="Generalizable">Œ≤</a> <a id="10642" href="Demos.HSP.html#7597" class="Generalizable">œÅ·µá</a><a id="10644" class="Symbol">}</a> <a id="10646" class="Keyword">where</a>
 <a id="10653" class="Keyword">open</a> <a id="10658" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="10665" href="Demos.HSP.html#10629" class="Bound">ùë©</a> <a id="10667" class="Keyword">using</a> <a id="10673" class="Symbol">(</a> <a id="10675" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="10679" class="Symbol">;</a> <a id="10681" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="10685" class="Symbol">)</a> <a id="10687" class="Keyword">renaming</a> <a id="10696" class="Symbol">(</a> <a id="10698" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="10706" class="Symbol">to</a> <a id="10709" class="Field">B</a> <a id="10711" class="Symbol">)</a>

 <a id="10715" class="Keyword">data</a> <a id="10720" href="Demos.HSP.html#10720" class="Datatype Operator">Image_‚àã_</a> <a id="10729" class="Symbol">(</a><a id="10730" href="Demos.HSP.html#10730" class="Bound">f</a> <a id="10732" class="Symbol">:</a> <a id="10734" href="Demos.HSP.html#10612" class="Bound">ùë®</a> <a id="10736" href="Demos.HSP.html#6656" class="Record Operator">‚ü∂</a> <a id="10738" href="Demos.HSP.html#10629" class="Bound">ùë©</a><a id="10739" class="Symbol">)</a> <a id="10741" class="Symbol">:</a> <a id="10743" href="Demos.HSP.html#10709" class="Field">B</a> <a id="10745" class="Symbol">‚Üí</a> <a id="10747" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="10752" class="Symbol">(</a><a id="10753" href="Demos.HSP.html#10623" class="Bound">Œ±</a> <a id="10755" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="10757" href="Demos.HSP.html#10640" class="Bound">Œ≤</a> <a id="10759" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="10761" href="Demos.HSP.html#10642" class="Bound">œÅ·µá</a><a id="10763" class="Symbol">)</a> <a id="10765" class="Keyword">where</a>
  <a id="10773" href="Demos.HSP.html#10773" class="InductiveConstructor">eq</a> <a id="10776" class="Symbol">:</a> <a id="10778" class="Symbol">{</a><a id="10779" href="Demos.HSP.html#10779" class="Bound">b</a> <a id="10781" class="Symbol">:</a> <a id="10783" href="Demos.HSP.html#10709" class="Field">B</a><a id="10784" class="Symbol">}</a> <a id="10786" class="Symbol">‚Üí</a> <a id="10788" class="Symbol">‚àÄ</a> <a id="10790" href="Demos.HSP.html#10790" class="Bound">a</a> <a id="10792" class="Symbol">‚Üí</a> <a id="10794" href="Demos.HSP.html#10779" class="Bound">b</a> <a id="10796" href="Relation.Binary.Bundles.html#1098" class="Field Operator">‚âà</a> <a id="10798" href="Demos.HSP.html#10730" class="Bound">f</a> <a id="10800" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="10804" href="Demos.HSP.html#10790" class="Bound">a</a> <a id="10806" class="Symbol">‚Üí</a> <a id="10808" href="Demos.HSP.html#10720" class="Datatype Operator">Image</a> <a id="10814" href="Demos.HSP.html#10730" class="Bound">f</a> <a id="10816" href="Demos.HSP.html#10720" class="Datatype Operator">‚àã</a> <a id="10818" href="Demos.HSP.html#10779" class="Bound">b</a>

</pre>

An inhabitant of the `Image f ‚àã b` type is a point `a : Carrier ùë®`, along with a proof `p : b ‚âà f a`, that `f` maps `a` to `b`. Since a proof of `Image f ‚àã b` must include a concrete witness `a : Carrier ùë®`, we can actually *compute* a range-restricted right-inverse of `f`. Here is the definition of `Inv` which, for extra
certainty, is accompanied by a proof that it gives such a right-inverse.

<pre class="Agda">

 <a id="11246" href="Demos.HSP.html#11246" class="Function">Inv</a> <a id="11250" class="Symbol">:</a> <a id="11252" class="Symbol">(</a><a id="11253" href="Demos.HSP.html#11253" class="Bound">f</a> <a id="11255" class="Symbol">:</a> <a id="11257" href="Demos.HSP.html#10612" class="Bound">ùë®</a> <a id="11259" href="Demos.HSP.html#6656" class="Record Operator">‚ü∂</a> <a id="11261" href="Demos.HSP.html#10629" class="Bound">ùë©</a><a id="11262" class="Symbol">){</a><a id="11264" href="Demos.HSP.html#11264" class="Bound">b</a> <a id="11266" class="Symbol">:</a> <a id="11268" href="Demos.HSP.html#10709" class="Field">B</a><a id="11269" class="Symbol">}</a> <a id="11271" class="Symbol">‚Üí</a> <a id="11273" href="Demos.HSP.html#10720" class="Datatype Operator">Image</a> <a id="11279" href="Demos.HSP.html#11253" class="Bound">f</a> <a id="11281" href="Demos.HSP.html#10720" class="Datatype Operator">‚àã</a> <a id="11283" href="Demos.HSP.html#11264" class="Bound">b</a> <a id="11285" class="Symbol">‚Üí</a> <a id="11287" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="11295" href="Demos.HSP.html#10612" class="Bound">ùë®</a>
 <a id="11298" href="Demos.HSP.html#11246" class="Function">Inv</a> <a id="11302" class="Symbol">_</a> <a id="11304" class="Symbol">(</a><a id="11305" href="Demos.HSP.html#10773" class="InductiveConstructor">eq</a> <a id="11308" href="Demos.HSP.html#11308" class="Bound">a</a> <a id="11310" class="Symbol">_)</a> <a id="11313" class="Symbol">=</a> <a id="11315" href="Demos.HSP.html#11308" class="Bound">a</a>

 <a id="11319" href="Demos.HSP.html#11319" class="Function">InvIsInverse ≥</a> <a id="11333" class="Symbol">:</a> <a id="11335" class="Symbol">{</a><a id="11336" href="Demos.HSP.html#11336" class="Bound">f</a> <a id="11338" class="Symbol">:</a> <a id="11340" href="Demos.HSP.html#10612" class="Bound">ùë®</a> <a id="11342" href="Demos.HSP.html#6656" class="Record Operator">‚ü∂</a> <a id="11344" href="Demos.HSP.html#10629" class="Bound">ùë©</a><a id="11345" class="Symbol">}{</a><a id="11347" href="Demos.HSP.html#11347" class="Bound">b</a> <a id="11349" class="Symbol">:</a> <a id="11351" href="Demos.HSP.html#10709" class="Field">B</a><a id="11352" class="Symbol">}(</a><a id="11354" href="Demos.HSP.html#11354" class="Bound">q</a> <a id="11356" class="Symbol">:</a> <a id="11358" href="Demos.HSP.html#10720" class="Datatype Operator">Image</a> <a id="11364" href="Demos.HSP.html#11336" class="Bound">f</a> <a id="11366" href="Demos.HSP.html#10720" class="Datatype Operator">‚àã</a> <a id="11368" href="Demos.HSP.html#11347" class="Bound">b</a><a id="11369" class="Symbol">)</a> <a id="11371" class="Symbol">‚Üí</a> <a id="11373" href="Demos.HSP.html#11336" class="Bound">f</a> <a id="11375" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="11379" class="Symbol">(</a><a id="11380" href="Demos.HSP.html#11246" class="Function">Inv</a> <a id="11384" href="Demos.HSP.html#11336" class="Bound">f</a> <a id="11386" href="Demos.HSP.html#11354" class="Bound">q</a><a id="11387" class="Symbol">)</a> <a id="11389" href="Relation.Binary.Bundles.html#1098" class="Field Operator">‚âà</a> <a id="11391" href="Demos.HSP.html#11347" class="Bound">b</a>
 <a id="11394" href="Demos.HSP.html#11319" class="Function">InvIsInverse ≥</a> <a id="11408" class="Symbol">(</a><a id="11409" href="Demos.HSP.html#10773" class="InductiveConstructor">eq</a> <a id="11412" class="Symbol">_</a> <a id="11414" href="Demos.HSP.html#11414" class="Bound">p</a><a id="11415" class="Symbol">)</a> <a id="11417" class="Symbol">=</a> <a id="11419" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="11423" href="Demos.HSP.html#11414" class="Bound">p</a>
</pre>


#### <a id="injective-and-surjective-setoid-functions">Injective and surjective setoid functions</a>

If `f : ùë® ‚ü∂ ùë©` then we call `f` *injective* provided `‚àÄ(a‚ÇÄ a‚ÇÅ : A)`, `f ‚ü®$‚ü© a‚ÇÄ ‚âà·¥Æ f ‚ü®$‚ü© a‚ÇÅ` implies `a‚ÇÄ ‚âà·¥¨ a‚ÇÅ`; we call `f` *surjective* provided `‚àÄ(b : B) ‚àÉ(a : A)` such that `f ‚ü®$‚ü© a ‚âà·¥Æ b`.

We represent injective functions on bare types by the type `Injective`, and use this to define the `IsInjective` type representing the property of being an injective setoid function. Similarly, the type `IsSurjective`
represents the property of being a surjective setoid function and `SurjInv` represents the *right-inverse* of a surjective function.

We reproduce the definitions and prove some of their properties inside the next submodule where we first set the stage by declaring two setoids `ùë®` and `ùë©` and naming their equality relations.

<pre class="Agda">

<a id="12293" class="Keyword">module</a> <a id="12300" href="Demos.HSP.html#12300" class="Module">_</a> <a id="12302" class="Symbol">{</a><a id="12303" href="Demos.HSP.html#12303" class="Bound">ùë®</a> <a id="12305" class="Symbol">:</a> <a id="12307" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="12314" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="12316" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a><a id="12318" class="Symbol">}{</a><a id="12320" href="Demos.HSP.html#12320" class="Bound">ùë©</a> <a id="12322" class="Symbol">:</a> <a id="12324" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="12331" href="Demos.HSP.html#7595" class="Generalizable">Œ≤</a> <a id="12333" href="Demos.HSP.html#7597" class="Generalizable">œÅ·µá</a><a id="12335" class="Symbol">}</a> <a id="12337" class="Keyword">where</a>
 <a id="12344" class="Keyword">open</a> <a id="12349" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="12356" href="Demos.HSP.html#12303" class="Bound">ùë®</a> <a id="12358" class="Keyword">using</a> <a id="12364" class="Symbol">()</a> <a id="12367" class="Keyword">renaming</a> <a id="12376" class="Symbol">(</a> <a id="12378" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="12382" class="Symbol">to</a> <a id="12385" class="Field Operator">_‚âà·¥¨_</a> <a id="12390" class="Symbol">)</a>
 <a id="12393" class="Keyword">open</a> <a id="12398" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="12405" href="Demos.HSP.html#12320" class="Bound">ùë©</a> <a id="12407" class="Keyword">using</a> <a id="12413" class="Symbol">()</a> <a id="12416" class="Keyword">renaming</a> <a id="12425" class="Symbol">(</a> <a id="12427" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="12431" class="Symbol">to</a> <a id="12434" class="Field Operator">_‚âà·¥Æ_</a> <a id="12439" class="Symbol">)</a>
 <a id="12442" class="Keyword">open</a> <a id="12447" href="Function.Definitions.html" class="Module">FD</a> <a id="12450" href="Demos.HSP.html#12385" class="Function Operator">_‚âà·¥¨_</a> <a id="12455" href="Demos.HSP.html#12434" class="Field Operator">_‚âà·¥Æ_</a>

 <a id="12462" href="Demos.HSP.html#12462" class="Function">IsInjective</a> <a id="12474" class="Symbol">:</a> <a id="12476" class="Symbol">(</a><a id="12477" href="Demos.HSP.html#12303" class="Bound">ùë®</a> <a id="12479" href="Demos.HSP.html#6656" class="Record Operator">‚ü∂</a> <a id="12481" href="Demos.HSP.html#12320" class="Bound">ùë©</a><a id="12482" class="Symbol">)</a> <a id="12484" class="Symbol">‚Üí</a>  <a id="12487" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="12492" class="Symbol">(</a><a id="12493" href="Demos.HSP.html#12314" class="Bound">Œ±</a> <a id="12495" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="12497" href="Demos.HSP.html#12316" class="Bound">œÅ·µÉ</a> <a id="12500" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="12502" href="Demos.HSP.html#12333" class="Bound">œÅ·µá</a><a id="12504" class="Symbol">)</a>
 <a id="12507" href="Demos.HSP.html#12462" class="Function">IsInjective</a> <a id="12519" href="Demos.HSP.html#12519" class="Bound">f</a> <a id="12521" class="Symbol">=</a> <a id="12523" href="Function.Definitions.html#889" class="Function">Injective</a> <a id="12533" class="Symbol">(</a><a id="12534" href="Demos.HSP.html#6758" class="Field Operator">_‚ü®$‚ü©_</a> <a id="12540" href="Demos.HSP.html#12519" class="Bound">f</a><a id="12541" class="Symbol">)</a>

 <a id="12545" href="Demos.HSP.html#12545" class="Function">IsSurjective</a> <a id="12558" class="Symbol">:</a> <a id="12560" class="Symbol">(</a><a id="12561" href="Demos.HSP.html#12303" class="Bound">ùë®</a> <a id="12563" href="Demos.HSP.html#6656" class="Record Operator">‚ü∂</a> <a id="12565" href="Demos.HSP.html#12320" class="Bound">ùë©</a><a id="12566" class="Symbol">)</a> <a id="12568" class="Symbol">‚Üí</a>  <a id="12571" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="12576" class="Symbol">(</a><a id="12577" href="Demos.HSP.html#12314" class="Bound">Œ±</a> <a id="12579" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="12581" href="Demos.HSP.html#12331" class="Bound">Œ≤</a> <a id="12583" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="12585" href="Demos.HSP.html#12333" class="Bound">œÅ·µá</a><a id="12587" class="Symbol">)</a>
 <a id="12590" href="Demos.HSP.html#12545" class="Function">IsSurjective</a> <a id="12603" href="Demos.HSP.html#12603" class="Bound">F</a> <a id="12605" class="Symbol">=</a> <a id="12607" class="Symbol">‚àÄ</a> <a id="12609" class="Symbol">{</a><a id="12610" href="Demos.HSP.html#12610" class="Bound">y</a><a id="12611" class="Symbol">}</a> <a id="12613" class="Symbol">‚Üí</a> <a id="12615" href="Demos.HSP.html#10720" class="Datatype Operator">Image</a> <a id="12621" href="Demos.HSP.html#12603" class="Bound">F</a> <a id="12623" href="Demos.HSP.html#10720" class="Datatype Operator">‚àã</a> <a id="12625" href="Demos.HSP.html#12610" class="Bound">y</a>

 <a id="12629" href="Demos.HSP.html#12629" class="Function">SurjInv</a> <a id="12637" class="Symbol">:</a> <a id="12639" class="Symbol">(</a><a id="12640" href="Demos.HSP.html#12640" class="Bound">f</a> <a id="12642" class="Symbol">:</a> <a id="12644" href="Demos.HSP.html#12303" class="Bound">ùë®</a> <a id="12646" href="Demos.HSP.html#6656" class="Record Operator">‚ü∂</a> <a id="12648" href="Demos.HSP.html#12320" class="Bound">ùë©</a><a id="12649" class="Symbol">)</a> <a id="12651" class="Symbol">‚Üí</a> <a id="12653" href="Demos.HSP.html#12545" class="Function">IsSurjective</a> <a id="12666" href="Demos.HSP.html#12640" class="Bound">f</a> <a id="12668" class="Symbol">‚Üí</a> <a id="12670" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="12678" href="Demos.HSP.html#12320" class="Bound">ùë©</a> <a id="12680" class="Symbol">‚Üí</a> <a id="12682" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="12690" href="Demos.HSP.html#12303" class="Bound">ùë®</a>
 <a id="12693" href="Demos.HSP.html#12629" class="Function">SurjInv</a> <a id="12701" href="Demos.HSP.html#12701" class="Bound">f</a> <a id="12703" href="Demos.HSP.html#12703" class="Bound">fonto</a> <a id="12709" href="Demos.HSP.html#12709" class="Bound">b</a> <a id="12711" class="Symbol">=</a> <a id="12713" href="Demos.HSP.html#11246" class="Function">Inv</a> <a id="12717" href="Demos.HSP.html#12701" class="Bound">f</a> <a id="12719" class="Symbol">(</a><a id="12720" href="Demos.HSP.html#12703" class="Bound">fonto</a> <a id="12726" class="Symbol">{</a><a id="12727" href="Demos.HSP.html#12709" class="Bound">b</a><a id="12728" class="Symbol">})</a>

</pre>

Proving that the composition of injective setoid functions is again injective is simply a matter of composing the two assumed witnesses to injectivity. Proving that surjectivity is preserved under composition is only slightly more involved.

<pre class="Agda">

<a id="13000" class="Keyword">module</a> <a id="13007" href="Demos.HSP.html#13007" class="Module">_</a>  <a id="13010" class="Symbol">{</a><a id="13011" href="Demos.HSP.html#13011" class="Bound">ùë®</a> <a id="13013" class="Symbol">:</a> <a id="13015" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="13022" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="13024" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a><a id="13026" class="Symbol">}{</a><a id="13028" href="Demos.HSP.html#13028" class="Bound">ùë©</a> <a id="13030" class="Symbol">:</a> <a id="13032" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="13039" href="Demos.HSP.html#7595" class="Generalizable">Œ≤</a> <a id="13041" href="Demos.HSP.html#7597" class="Generalizable">œÅ·µá</a><a id="13043" class="Symbol">}{</a><a id="13045" href="Demos.HSP.html#13045" class="Bound">ùë™</a> <a id="13047" class="Symbol">:</a> <a id="13049" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="13056" href="Demos.HSP.html#7600" class="Generalizable">Œ≥</a> <a id="13058" href="Demos.HSP.html#7602" class="Generalizable">œÅ·∂ú</a><a id="13060" class="Symbol">}</a>
          <a id="13072" class="Symbol">(</a><a id="13073" href="Demos.HSP.html#13073" class="Bound">f</a> <a id="13075" class="Symbol">:</a> <a id="13077" href="Demos.HSP.html#13011" class="Bound">ùë®</a> <a id="13079" href="Demos.HSP.html#6656" class="Record Operator">‚ü∂</a> <a id="13081" href="Demos.HSP.html#13028" class="Bound">ùë©</a><a id="13082" class="Symbol">)(</a><a id="13084" href="Demos.HSP.html#13084" class="Bound">g</a> <a id="13086" class="Symbol">:</a> <a id="13088" href="Demos.HSP.html#13028" class="Bound">ùë©</a> <a id="13090" href="Demos.HSP.html#6656" class="Record Operator">‚ü∂</a> <a id="13092" href="Demos.HSP.html#13045" class="Bound">ùë™</a><a id="13093" class="Symbol">)</a> <a id="13095" class="Keyword">where</a>

 <a id="13103" href="Demos.HSP.html#13103" class="Function">‚àò-IsInjective</a> <a id="13117" class="Symbol">:</a> <a id="13119" href="Demos.HSP.html#12462" class="Function">IsInjective</a> <a id="13131" href="Demos.HSP.html#13073" class="Bound">f</a> <a id="13133" class="Symbol">‚Üí</a> <a id="13135" href="Demos.HSP.html#12462" class="Function">IsInjective</a> <a id="13147" href="Demos.HSP.html#13084" class="Bound">g</a> <a id="13149" class="Symbol">‚Üí</a> <a id="13151" href="Demos.HSP.html#12462" class="Function">IsInjective</a> <a id="13163" class="Symbol">(</a><a id="13164" href="Demos.HSP.html#13084" class="Bound">g</a> <a id="13166" href="Demos.HSP.html#10239" class="Function Operator">‚ü®‚àò‚ü©</a> <a id="13170" href="Demos.HSP.html#13073" class="Bound">f</a><a id="13171" class="Symbol">)</a>
 <a id="13174" href="Demos.HSP.html#13103" class="Function">‚àò-IsInjective</a> <a id="13188" href="Demos.HSP.html#13188" class="Bound">finj</a> <a id="13193" href="Demos.HSP.html#13193" class="Bound">ginj</a> <a id="13198" class="Symbol">=</a> <a id="13200" href="Demos.HSP.html#13188" class="Bound">finj</a> <a id="13205" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="13207" href="Demos.HSP.html#13193" class="Bound">ginj</a>

 <a id="13214" href="Demos.HSP.html#13214" class="Function">‚àò-IsSurjective</a> <a id="13229" class="Symbol">:</a> <a id="13231" href="Demos.HSP.html#12545" class="Function">IsSurjective</a> <a id="13244" href="Demos.HSP.html#13073" class="Bound">f</a> <a id="13246" class="Symbol">‚Üí</a> <a id="13248" href="Demos.HSP.html#12545" class="Function">IsSurjective</a> <a id="13261" href="Demos.HSP.html#13084" class="Bound">g</a> <a id="13263" class="Symbol">‚Üí</a> <a id="13265" href="Demos.HSP.html#12545" class="Function">IsSurjective</a> <a id="13278" class="Symbol">(</a><a id="13279" href="Demos.HSP.html#13084" class="Bound">g</a> <a id="13281" href="Demos.HSP.html#10239" class="Function Operator">‚ü®‚àò‚ü©</a> <a id="13285" href="Demos.HSP.html#13073" class="Bound">f</a><a id="13286" class="Symbol">)</a>
 <a id="13289" href="Demos.HSP.html#13214" class="Function">‚àò-IsSurjective</a> <a id="13304" href="Demos.HSP.html#13304" class="Bound">fonto</a> <a id="13310" href="Demos.HSP.html#13310" class="Bound">gonto</a> <a id="13316" class="Symbol">{</a><a id="13317" href="Demos.HSP.html#13317" class="Bound">y</a><a id="13318" class="Symbol">}</a> <a id="13320" class="Symbol">=</a> <a id="13322" href="Demos.HSP.html#13519" class="Function">Goal</a> <a id="13327" class="Keyword">where</a>
  <a id="13335" href="Demos.HSP.html#13335" class="Function">mp</a> <a id="13338" class="Symbol">:</a> <a id="13340" href="Demos.HSP.html#10720" class="Datatype Operator">Image</a> <a id="13346" href="Demos.HSP.html#13084" class="Bound">g</a> <a id="13348" href="Demos.HSP.html#10720" class="Datatype Operator">‚àã</a> <a id="13350" href="Demos.HSP.html#13317" class="Bound">y</a> <a id="13352" class="Symbol">‚Üí</a> <a id="13354" href="Demos.HSP.html#10720" class="Datatype Operator">Image</a> <a id="13360" href="Demos.HSP.html#13084" class="Bound">g</a> <a id="13362" href="Demos.HSP.html#10239" class="Function Operator">‚ü®‚àò‚ü©</a> <a id="13366" href="Demos.HSP.html#13073" class="Bound">f</a> <a id="13368" href="Demos.HSP.html#10720" class="Datatype Operator">‚àã</a> <a id="13370" href="Demos.HSP.html#13317" class="Bound">y</a>
  <a id="13374" href="Demos.HSP.html#13335" class="Function">mp</a> <a id="13377" class="Symbol">(</a><a id="13378" href="Demos.HSP.html#10773" class="InductiveConstructor">eq</a> <a id="13381" href="Demos.HSP.html#13381" class="Bound">c</a> <a id="13383" href="Demos.HSP.html#13383" class="Bound">p</a><a id="13384" class="Symbol">)</a> <a id="13386" class="Symbol">=</a> <a id="13388" href="Demos.HSP.html#13438" class="Function">Œ∑</a> <a id="13390" href="Demos.HSP.html#13304" class="Bound">fonto</a> <a id="13396" class="Keyword">where</a>
   <a id="13405" class="Keyword">open</a> <a id="13410" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="13417" href="Demos.HSP.html#13045" class="Bound">ùë™</a> <a id="13419" class="Keyword">using</a> <a id="13425" class="Symbol">(</a> <a id="13427" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="13433" class="Symbol">)</a>
   <a id="13438" href="Demos.HSP.html#13438" class="Function">Œ∑</a> <a id="13440" class="Symbol">:</a> <a id="13442" href="Demos.HSP.html#10720" class="Datatype Operator">Image</a> <a id="13448" href="Demos.HSP.html#13073" class="Bound">f</a> <a id="13450" href="Demos.HSP.html#10720" class="Datatype Operator">‚àã</a> <a id="13452" href="Demos.HSP.html#13381" class="Bound">c</a> <a id="13454" class="Symbol">‚Üí</a> <a id="13456" href="Demos.HSP.html#10720" class="Datatype Operator">Image</a> <a id="13462" href="Demos.HSP.html#13084" class="Bound">g</a> <a id="13464" href="Demos.HSP.html#10239" class="Function Operator">‚ü®‚àò‚ü©</a> <a id="13468" href="Demos.HSP.html#13073" class="Bound">f</a> <a id="13470" href="Demos.HSP.html#10720" class="Datatype Operator">‚àã</a> <a id="13472" href="Demos.HSP.html#13317" class="Bound">y</a>
   <a id="13477" href="Demos.HSP.html#13438" class="Function">Œ∑</a> <a id="13479" class="Symbol">(</a><a id="13480" href="Demos.HSP.html#10773" class="InductiveConstructor">eq</a> <a id="13483" href="Demos.HSP.html#13483" class="Bound">a</a> <a id="13485" href="Demos.HSP.html#13485" class="Bound">q</a><a id="13486" class="Symbol">)</a> <a id="13488" class="Symbol">=</a> <a id="13490" href="Demos.HSP.html#10773" class="InductiveConstructor">eq</a> <a id="13493" href="Demos.HSP.html#13483" class="Bound">a</a> <a id="13495" class="Symbol">(</a><a id="13496" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="13502" href="Demos.HSP.html#13383" class="Bound">p</a> <a id="13504" class="Symbol">(</a><a id="13505" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="13510" href="Demos.HSP.html#13084" class="Bound">g</a> <a id="13512" href="Demos.HSP.html#13485" class="Bound">q</a><a id="13513" class="Symbol">))</a>

  <a id="13519" href="Demos.HSP.html#13519" class="Function">Goal</a> <a id="13524" class="Symbol">:</a> <a id="13526" href="Demos.HSP.html#10720" class="Datatype Operator">Image</a> <a id="13532" href="Demos.HSP.html#13084" class="Bound">g</a> <a id="13534" href="Demos.HSP.html#10239" class="Function Operator">‚ü®‚àò‚ü©</a> <a id="13538" href="Demos.HSP.html#13073" class="Bound">f</a> <a id="13540" href="Demos.HSP.html#10720" class="Datatype Operator">‚àã</a> <a id="13542" href="Demos.HSP.html#13317" class="Bound">y</a>
  <a id="13546" href="Demos.HSP.html#13519" class="Function">Goal</a> <a id="13551" class="Symbol">=</a> <a id="13553" href="Demos.HSP.html#13335" class="Function">mp</a> <a id="13556" href="Demos.HSP.html#13310" class="Bound">gonto</a>
</pre>



#### <a id="factorization-of-setoid-functions"></a> Factorization of setoid functions[^6]

Every (setoid) function `f : A ‚ü∂ B` factors as a surjective map `toIm : A ‚ü∂ Im f` followed
by an injective map `fromIm : Im f ‚ü∂ B`.

<pre class="Agda">

<a id="13814" class="Keyword">module</a> <a id="13821" href="Demos.HSP.html#13821" class="Module">_</a> <a id="13823" class="Symbol">{</a><a id="13824" href="Demos.HSP.html#13824" class="Bound">ùë®</a> <a id="13826" class="Symbol">:</a> <a id="13828" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="13835" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="13837" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a><a id="13839" class="Symbol">}{</a><a id="13841" href="Demos.HSP.html#13841" class="Bound">ùë©</a> <a id="13843" class="Symbol">:</a> <a id="13845" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="13852" href="Demos.HSP.html#7595" class="Generalizable">Œ≤</a> <a id="13854" href="Demos.HSP.html#7597" class="Generalizable">œÅ·µá</a><a id="13856" class="Symbol">}</a> <a id="13858" class="Keyword">where</a>

 <a id="13866" href="Demos.HSP.html#13866" class="Function">Im</a> <a id="13869" class="Symbol">:</a> <a id="13871" class="Symbol">(</a><a id="13872" href="Demos.HSP.html#13872" class="Bound">f</a> <a id="13874" class="Symbol">:</a> <a id="13876" href="Demos.HSP.html#13824" class="Bound">ùë®</a> <a id="13878" href="Demos.HSP.html#6656" class="Record Operator">‚ü∂</a> <a id="13880" href="Demos.HSP.html#13841" class="Bound">ùë©</a><a id="13881" class="Symbol">)</a> <a id="13883" class="Symbol">‚Üí</a> <a id="13885" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="13892" class="Symbol">_</a> <a id="13894" class="Symbol">_</a>
 <a id="13897" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="13905" class="Symbol">(</a><a id="13906" href="Demos.HSP.html#13866" class="Function">Im</a> <a id="13909" href="Demos.HSP.html#13909" class="Bound">f</a><a id="13910" class="Symbol">)</a> <a id="13912" class="Symbol">=</a> <a id="13914" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="13922" href="Demos.HSP.html#13824" class="Bound">ùë®</a>
 <a id="13925" href="Demos.HSP.html#7264" class="Field Operator">_‚âàÀ¢_</a> <a id="13930" class="Symbol">(</a><a id="13931" href="Demos.HSP.html#13866" class="Function">Im</a> <a id="13934" href="Demos.HSP.html#13934" class="Bound">f</a><a id="13935" class="Symbol">)</a> <a id="13937" href="Demos.HSP.html#13937" class="Bound">b1</a> <a id="13940" href="Demos.HSP.html#13940" class="Bound">b2</a> <a id="13943" class="Symbol">=</a> <a id="13945" href="Demos.HSP.html#13934" class="Bound">f</a> <a id="13947" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="13951" href="Demos.HSP.html#13937" class="Bound">b1</a> <a id="13954" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a> <a id="13956" href="Demos.HSP.html#13934" class="Bound">f</a> <a id="13958" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="13962" href="Demos.HSP.html#13940" class="Bound">b2</a> <a id="13965" class="Keyword">where</a> <a id="13971" class="Keyword">open</a> <a id="13976" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="13983" href="Demos.HSP.html#13841" class="Bound">ùë©</a>

 <a id="13987" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="14001" class="Symbol">(</a><a id="14002" href="Demos.HSP.html#13866" class="Function">Im</a> <a id="14005" href="Demos.HSP.html#14005" class="Bound">f</a><a id="14006" class="Symbol">)</a> <a id="14008" class="Symbol">=</a> <a id="14010" class="Keyword">record</a> <a id="14017" class="Symbol">{</a> <a id="14019" href="Relation.Binary.Structures.html#1568" class="Field">refl</a> <a id="14024" class="Symbol">=</a> <a id="14026" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="14031" class="Symbol">;</a> <a id="14033" href="Relation.Binary.Structures.html#1594" class="Field">sym</a> <a id="14037" class="Symbol">=</a> <a id="14039" href="Relation.Binary.Structures.html#1594" class="Function">sym</a><a id="14042" class="Symbol">;</a> <a id="14044" href="Relation.Binary.Structures.html#1620" class="Field">trans</a> <a id="14050" class="Symbol">=</a> <a id="14052" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="14058" class="Symbol">}</a>
  <a id="14062" class="Keyword">where</a> <a id="14068" class="Keyword">open</a> <a id="14073" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="14080" href="Demos.HSP.html#13841" class="Bound">ùë©</a>

 <a id="14084" href="Demos.HSP.html#14084" class="Function">toIm</a> <a id="14089" class="Symbol">:</a> <a id="14091" class="Symbol">(</a><a id="14092" href="Demos.HSP.html#14092" class="Bound">f</a> <a id="14094" class="Symbol">:</a> <a id="14096" href="Demos.HSP.html#13824" class="Bound">ùë®</a> <a id="14098" href="Demos.HSP.html#6656" class="Record Operator">‚ü∂</a> <a id="14100" href="Demos.HSP.html#13841" class="Bound">ùë©</a><a id="14101" class="Symbol">)</a> <a id="14103" class="Symbol">‚Üí</a> <a id="14105" href="Demos.HSP.html#13824" class="Bound">ùë®</a> <a id="14107" href="Demos.HSP.html#6656" class="Record Operator">‚ü∂</a> <a id="14109" href="Demos.HSP.html#13866" class="Function">Im</a> <a id="14112" href="Demos.HSP.html#14092" class="Bound">f</a>
 <a id="14115" href="Demos.HSP.html#14084" class="Function">toIm</a> <a id="14120" href="Demos.HSP.html#14120" class="Bound">f</a> <a id="14122" class="Symbol">=</a> <a id="14124" class="Keyword">record</a> <a id="14131" class="Symbol">{</a> <a id="14133" href="Function.Bundles.html#1919" class="Field">f</a> <a id="14135" class="Symbol">=</a> <a id="14137" href="Function.Base.html#615" class="Function">id</a> <a id="14140" class="Symbol">;</a> <a id="14142" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="14147" class="Symbol">=</a> <a id="14149" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="14154" href="Demos.HSP.html#14120" class="Bound">f</a> <a id="14156" class="Symbol">}</a>

 <a id="14160" href="Demos.HSP.html#14160" class="Function">fromIm</a> <a id="14167" class="Symbol">:</a> <a id="14169" class="Symbol">(</a><a id="14170" href="Demos.HSP.html#14170" class="Bound">f</a> <a id="14172" class="Symbol">:</a> <a id="14174" href="Demos.HSP.html#13824" class="Bound">ùë®</a> <a id="14176" href="Demos.HSP.html#6656" class="Record Operator">‚ü∂</a> <a id="14178" href="Demos.HSP.html#13841" class="Bound">ùë©</a><a id="14179" class="Symbol">)</a> <a id="14181" class="Symbol">‚Üí</a> <a id="14183" href="Demos.HSP.html#13866" class="Function">Im</a> <a id="14186" href="Demos.HSP.html#14170" class="Bound">f</a> <a id="14188" href="Demos.HSP.html#6656" class="Record Operator">‚ü∂</a> <a id="14190" href="Demos.HSP.html#13841" class="Bound">ùë©</a>
 <a id="14193" href="Demos.HSP.html#14160" class="Function">fromIm</a> <a id="14200" href="Demos.HSP.html#14200" class="Bound">f</a> <a id="14202" class="Symbol">=</a> <a id="14204" class="Keyword">record</a> <a id="14211" class="Symbol">{</a> <a id="14213" href="Function.Bundles.html#1919" class="Field">f</a> <a id="14215" class="Symbol">=</a> <a id="14217" class="Symbol">Œª</a> <a id="14219" href="Demos.HSP.html#14219" class="Bound">x</a> <a id="14221" class="Symbol">‚Üí</a> <a id="14223" href="Demos.HSP.html#14200" class="Bound">f</a> <a id="14225" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="14229" href="Demos.HSP.html#14219" class="Bound">x</a> <a id="14231" class="Symbol">;</a> <a id="14233" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="14238" class="Symbol">=</a> <a id="14240" href="Function.Base.html#615" class="Function">id</a> <a id="14243" class="Symbol">}</a>

 <a id="14247" href="Demos.HSP.html#14247" class="Function">fromIm-inj</a> <a id="14258" class="Symbol">:</a> <a id="14260" class="Symbol">(</a><a id="14261" href="Demos.HSP.html#14261" class="Bound">f</a> <a id="14263" class="Symbol">:</a> <a id="14265" href="Demos.HSP.html#13824" class="Bound">ùë®</a> <a id="14267" href="Demos.HSP.html#6656" class="Record Operator">‚ü∂</a> <a id="14269" href="Demos.HSP.html#13841" class="Bound">ùë©</a><a id="14270" class="Symbol">)</a> <a id="14272" class="Symbol">‚Üí</a> <a id="14274" href="Demos.HSP.html#12462" class="Function">IsInjective</a> <a id="14286" class="Symbol">(</a><a id="14287" href="Demos.HSP.html#14160" class="Function">fromIm</a> <a id="14294" href="Demos.HSP.html#14261" class="Bound">f</a><a id="14295" class="Symbol">)</a>
 <a id="14298" href="Demos.HSP.html#14247" class="Function">fromIm-inj</a> <a id="14309" class="Symbol">_</a> <a id="14311" class="Symbol">=</a> <a id="14313" href="Function.Base.html#615" class="Function">id</a>

 <a id="14318" href="Demos.HSP.html#14318" class="Function">toIm-surj</a> <a id="14328" class="Symbol">:</a> <a id="14330" class="Symbol">(</a><a id="14331" href="Demos.HSP.html#14331" class="Bound">f</a> <a id="14333" class="Symbol">:</a> <a id="14335" href="Demos.HSP.html#13824" class="Bound">ùë®</a> <a id="14337" href="Demos.HSP.html#6656" class="Record Operator">‚ü∂</a> <a id="14339" href="Demos.HSP.html#13841" class="Bound">ùë©</a><a id="14340" class="Symbol">)</a> <a id="14342" class="Symbol">‚Üí</a> <a id="14344" href="Demos.HSP.html#12545" class="Function">IsSurjective</a> <a id="14357" class="Symbol">(</a><a id="14358" href="Demos.HSP.html#14084" class="Function">toIm</a> <a id="14363" href="Demos.HSP.html#14331" class="Bound">f</a><a id="14364" class="Symbol">)</a>
 <a id="14367" href="Demos.HSP.html#14318" class="Function">toIm-surj</a> <a id="14377" class="Symbol">_</a> <a id="14379" class="Symbol">=</a> <a id="14381" href="Demos.HSP.html#10773" class="InductiveConstructor">eq</a> <a id="14384" class="Symbol">_</a> <a id="14386" class="Symbol">(</a><a id="14387" href="Demos.HSP.html#7084" class="Function">reflÀ¢</a> <a id="14393" href="Demos.HSP.html#13841" class="Bound">ùë©</a><a id="14394" class="Symbol">)</a>
</pre>

Basic Universal Algebra
=======================

We now develop a working vocabulary in [MLTT][] corresponding to classical, single-sorted, set-based universal algebra. We cover a number of important concepts, but limit ourselves to those required to prove Birkhoff's HSP theorem. In each case, we give a type-theoretic version of the informal definition, followed by its implementation in [Agda][].

This section is organized into the following subsections:
¬ß[3.1](#signatures){reference-type="ref" reference="signatures"} defines
a general type of *signatures* of algebraic structures;
¬ß[3.2](#algebras){reference-type="ref" reference="algebras"} does the
same for structures and their products;
¬ß[3.3](#homomorphisms){reference-type="ref" reference="homomorphisms"}
defines *homomorphisms*, *monomorphisms*, and *epimorphisms*, presents
types that codify these concepts, and formally verifies some of their
basic properties; ¬ß[3.5](#subalgebras){reference-type="ref"
reference="subalgebras"}--[3.6](#terms){reference-type="ref"
reference="terms"} do the same for *subalgebras* and *terms*,
respectively.

Signatures
----------

An (algebraic) *signature* is a pair `ùëÜ = (F, œÅ)` where `F` is a collection of *operation symbols* and `œÅ : F ‚Üí N` is an *arity function* which maps each operation symbol to its arity. Here, `N` denotes the *arity type*. Heuristically, the arity of an operation symbol may be thought of as the number of arguments that takes as
"input."  We represent signatures as inhabitants of the following dependent pair type.

```agda
Signature : (ùí™ ùí± : Level) ‚Üí Type (lsuc (ùí™ ‚äî ùí±))
Signature ùí™ ùí± = Œ£[ F ‚àà Type ùí™ ] (F ‚Üí Type ùí±)
```

Recalling our syntax for the first and second projections, if `ùëÜ` is a signature, then `‚à£ ùëÜ ‚à£` denotes the set of operation symbols and `‚à• ùëÜ ‚à•` denotes the arity function. Thus, if `f : ‚à£ ùëÜ ‚à£` is an operation symbol in the signature `ùëÜ`, then `‚à• ùëÜ ‚à• f` is the arity of `f`.

We need to augment our `Signature` type so that it supports algebras over setoid domains. To do so, following Abel¬†[@Abel:2021], we define an operator that translates an ordinary signature into a *setoid signature*, that is, a signature over a setoid domain. This raises a minor technical issue: given operations `f` and `g`, with arguments `u : ‚à• ùëÜ ‚à• f ‚Üí A` and `v : ‚à• ùëÜ ‚à• g ‚Üí A`, respectively, and a proof of `f ‚â° g` (*intensional* equality), we ought to be able to check whether `u` and `v` are *pointwise* equal. Technically, `u` and `v` appear to inhabit different types; of course, this is reconciled by the hypothesis `f ‚â° g`, as we see in the next definition (borrowed from¬†[@Abel:2021]).

<pre class="Agda">

<a id="EqArgs"></a><a id="17048" href="Demos.HSP.html#17048" class="Function">EqArgs</a> <a id="17055" class="Symbol">:</a>  <a id="17058" class="Symbol">{</a><a id="17059" href="Demos.HSP.html#17059" class="Bound">ùëÜ</a> <a id="17061" class="Symbol">:</a> <a id="17063" href="Base.Algebras.Basic.html#3890" class="Function">Signature</a> <a id="17073" href="Demos.HSP.html#5474" class="Bound">ùìû</a> <a id="17075" href="Demos.HSP.html#5476" class="Bound">ùì•</a><a id="17076" class="Symbol">}{</a><a id="17078" href="Demos.HSP.html#17078" class="Bound">Œæ</a> <a id="17080" class="Symbol">:</a> <a id="17082" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="17089" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="17091" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a><a id="17093" class="Symbol">}</a>
 <a id="17096" class="Symbol">‚Üí</a>        <a id="17105" class="Symbol">‚àÄ</a> <a id="17107" class="Symbol">{</a><a id="17108" href="Demos.HSP.html#17108" class="Bound">f</a> <a id="17110" href="Demos.HSP.html#17110" class="Bound">g</a><a id="17111" class="Symbol">}</a> <a id="17113" class="Symbol">‚Üí</a> <a id="17115" href="Demos.HSP.html#17108" class="Bound">f</a> <a id="17117" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">‚â°</a> <a id="17119" href="Demos.HSP.html#17110" class="Bound">g</a> <a id="17121" class="Symbol">‚Üí</a> <a id="17123" class="Symbol">(</a><a id="17124" href="Demos.HSP.html#8278" class="Function Operator">‚à•</a> <a id="17126" href="Demos.HSP.html#17059" class="Bound">ùëÜ</a> <a id="17128" href="Demos.HSP.html#8278" class="Function Operator">‚à•</a> <a id="17130" href="Demos.HSP.html#17108" class="Bound">f</a> <a id="17132" class="Symbol">‚Üí</a> <a id="17134" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="17142" href="Demos.HSP.html#17078" class="Bound">Œæ</a><a id="17143" class="Symbol">)</a> <a id="17145" class="Symbol">‚Üí</a> <a id="17147" class="Symbol">(</a><a id="17148" href="Demos.HSP.html#8278" class="Function Operator">‚à•</a> <a id="17150" href="Demos.HSP.html#17059" class="Bound">ùëÜ</a> <a id="17152" href="Demos.HSP.html#8278" class="Function Operator">‚à•</a> <a id="17154" href="Demos.HSP.html#17110" class="Bound">g</a> <a id="17156" class="Symbol">‚Üí</a> <a id="17158" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="17166" href="Demos.HSP.html#17078" class="Bound">Œæ</a><a id="17167" class="Symbol">)</a> <a id="17169" class="Symbol">‚Üí</a> <a id="17171" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="17176" class="Symbol">(</a><a id="17177" href="Demos.HSP.html#5476" class="Bound">ùì•</a> <a id="17179" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="17181" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a><a id="17183" class="Symbol">)</a>
<a id="17185" href="Demos.HSP.html#17048" class="Function">EqArgs</a> <a id="17192" class="Symbol">{</a><a id="17193" class="Argument">Œæ</a> <a id="17195" class="Symbol">=</a> <a id="17197" href="Demos.HSP.html#17197" class="Bound">Œæ</a><a id="17198" class="Symbol">}</a> <a id="17200" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="17207" href="Demos.HSP.html#17207" class="Bound">u</a> <a id="17209" href="Demos.HSP.html#17209" class="Bound">v</a> <a id="17211" class="Symbol">=</a> <a id="17213" class="Symbol">‚àÄ</a> <a id="17215" href="Demos.HSP.html#17215" class="Bound">i</a> <a id="17217" class="Symbol">‚Üí</a> <a id="17219" href="Demos.HSP.html#17207" class="Bound">u</a> <a id="17221" href="Demos.HSP.html#17215" class="Bound">i</a> <a id="17223" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a> <a id="17225" href="Demos.HSP.html#17209" class="Bound">v</a> <a id="17227" href="Demos.HSP.html#17215" class="Bound">i</a> <a id="17229" class="Keyword">where</a> <a id="17235" class="Keyword">open</a> <a id="17240" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="17247" href="Demos.HSP.html#17197" class="Bound">Œæ</a> <a id="17249" class="Keyword">using</a> <a id="17255" class="Symbol">(</a> <a id="17257" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="17261" class="Symbol">)</a>

</pre>

This makes it possible to define an operator which translates a signature for algebras over bare types into a signature for algebras over setoids. We denote this operator by `‚ü®_‚ü©` and define it as follows.

<pre class="Agda">

<a id="‚ü®_‚ü©"></a><a id="17497" href="Demos.HSP.html#17497" class="Function Operator">‚ü®_‚ü©</a> <a id="17501" class="Symbol">:</a> <a id="17503" href="Base.Algebras.Basic.html#3890" class="Function">Signature</a> <a id="17513" href="Demos.HSP.html#5474" class="Bound">ùìû</a> <a id="17515" href="Demos.HSP.html#5476" class="Bound">ùì•</a> <a id="17517" class="Symbol">‚Üí</a> <a id="17519" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="17526" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="17528" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a> <a id="17531" class="Symbol">‚Üí</a> <a id="17533" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="17540" class="Symbol">_</a> <a id="17542" class="Symbol">_</a>

<a id="17545" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a>  <a id="17554" class="Symbol">(</a><a id="17555" href="Demos.HSP.html#17497" class="Function Operator">‚ü®</a> <a id="17557" href="Demos.HSP.html#17557" class="Bound">ùëÜ</a> <a id="17559" href="Demos.HSP.html#17497" class="Function Operator">‚ü©</a> <a id="17561" href="Demos.HSP.html#17561" class="Bound">Œæ</a><a id="17562" class="Symbol">)</a>                <a id="17579" class="Symbol">=</a> <a id="17581" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="17584" href="Demos.HSP.html#17584" class="Bound">f</a> <a id="17586" href="Data.Product.html#916" class="Function">‚àà</a> <a id="17588" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="17590" href="Demos.HSP.html#17557" class="Bound">ùëÜ</a> <a id="17592" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="17594" href="Data.Product.html#916" class="Function">]</a> <a id="17596" class="Symbol">(</a><a id="17597" href="Demos.HSP.html#8278" class="Function Operator">‚à•</a> <a id="17599" href="Demos.HSP.html#17557" class="Bound">ùëÜ</a> <a id="17601" href="Demos.HSP.html#8278" class="Function Operator">‚à•</a> <a id="17603" href="Demos.HSP.html#17584" class="Bound">f</a> <a id="17605" class="Symbol">‚Üí</a> <a id="17607" href="Demos.HSP.html#17561" class="Bound">Œæ</a> <a id="17609" class="Symbol">.</a><a id="17610" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a><a id="17617" class="Symbol">)</a>
<a id="17619" href="Demos.HSP.html#7264" class="Field Operator">_‚âàÀ¢_</a>     <a id="17628" class="Symbol">(</a><a id="17629" href="Demos.HSP.html#17497" class="Function Operator">‚ü®</a> <a id="17631" href="Demos.HSP.html#17631" class="Bound">ùëÜ</a> <a id="17633" href="Demos.HSP.html#17497" class="Function Operator">‚ü©</a> <a id="17635" href="Demos.HSP.html#17635" class="Bound">Œæ</a><a id="17636" class="Symbol">)(</a><a id="17638" href="Demos.HSP.html#17638" class="Bound">f</a> <a id="17640" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="17642" href="Demos.HSP.html#17642" class="Bound">u</a><a id="17643" class="Symbol">)(</a><a id="17645" href="Demos.HSP.html#17645" class="Bound">g</a> <a id="17647" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="17649" href="Demos.HSP.html#17649" class="Bound">v</a><a id="17650" class="Symbol">)</a>  <a id="17653" class="Symbol">=</a> <a id="17655" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="17658" href="Demos.HSP.html#17658" class="Bound">eqv</a> <a id="17662" href="Data.Product.html#916" class="Function">‚àà</a> <a id="17664" href="Demos.HSP.html#17638" class="Bound">f</a> <a id="17666" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">‚â°</a> <a id="17668" href="Demos.HSP.html#17645" class="Bound">g</a> <a id="17670" href="Data.Product.html#916" class="Function">]</a> <a id="17672" href="Demos.HSP.html#17048" class="Function">EqArgs</a><a id="17678" class="Symbol">{</a><a id="17679" class="Argument">Œæ</a> <a id="17681" class="Symbol">=</a> <a id="17683" href="Demos.HSP.html#17635" class="Bound">Œæ</a><a id="17684" class="Symbol">}</a> <a id="17686" href="Demos.HSP.html#17658" class="Bound">eqv</a> <a id="17690" href="Demos.HSP.html#17642" class="Bound">u</a> <a id="17692" href="Demos.HSP.html#17649" class="Bound">v</a>

<a id="17695" href="Demos.HSP.html#6860" class="Field">refl·µâ</a>   <a id="17703" class="Symbol">(</a><a id="17704" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="17718" class="Symbol">(</a><a id="17719" href="Demos.HSP.html#17497" class="Function Operator">‚ü®</a> <a id="17721" href="Demos.HSP.html#17721" class="Bound">ùëÜ</a> <a id="17723" href="Demos.HSP.html#17497" class="Function Operator">‚ü©</a> <a id="17725" href="Demos.HSP.html#17725" class="Bound">Œæ</a><a id="17726" class="Symbol">))</a>                           <a id="17755" class="Symbol">=</a> <a id="17757" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="17764" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="17766" class="Symbol">Œª</a> <a id="17768" href="Demos.HSP.html#17768" class="Bound">i</a> <a id="17770" class="Symbol">‚Üí</a> <a id="17772" href="Demos.HSP.html#7084" class="Function">reflÀ¢</a>   <a id="17780" href="Demos.HSP.html#17725" class="Bound">Œæ</a>
<a id="17782" href="Demos.HSP.html#6921" class="Field">sym·µâ</a>    <a id="17790" class="Symbol">(</a><a id="17791" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="17805" class="Symbol">(</a><a id="17806" href="Demos.HSP.html#17497" class="Function Operator">‚ü®</a> <a id="17808" href="Demos.HSP.html#17808" class="Bound">ùëÜ</a> <a id="17810" href="Demos.HSP.html#17497" class="Function Operator">‚ü©</a> <a id="17812" href="Demos.HSP.html#17812" class="Bound">Œæ</a><a id="17813" class="Symbol">))</a> <a id="17816" class="Symbol">(</a><a id="17817" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="17824" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="17826" href="Demos.HSP.html#17826" class="Bound">g</a><a id="17827" class="Symbol">)</a>              <a id="17842" class="Symbol">=</a> <a id="17844" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="17851" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="17853" class="Symbol">Œª</a> <a id="17855" href="Demos.HSP.html#17855" class="Bound">i</a> <a id="17857" class="Symbol">‚Üí</a> <a id="17859" href="Demos.HSP.html#7145" class="Function">symÀ¢</a>    <a id="17867" href="Demos.HSP.html#17812" class="Bound">Œæ</a> <a id="17869" class="Symbol">(</a><a id="17870" href="Demos.HSP.html#17826" class="Bound">g</a> <a id="17872" href="Demos.HSP.html#17855" class="Bound">i</a><a id="17873" class="Symbol">)</a>
<a id="17875" href="Demos.HSP.html#6982" class="Field">trans·µâ</a>  <a id="17883" class="Symbol">(</a><a id="17884" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="17898" class="Symbol">(</a><a id="17899" href="Demos.HSP.html#17497" class="Function Operator">‚ü®</a> <a id="17901" href="Demos.HSP.html#17901" class="Bound">ùëÜ</a> <a id="17903" href="Demos.HSP.html#17497" class="Function Operator">‚ü©</a> <a id="17905" href="Demos.HSP.html#17905" class="Bound">Œæ</a><a id="17906" class="Symbol">))</a> <a id="17909" class="Symbol">(</a><a id="17910" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="17917" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="17919" href="Demos.HSP.html#17919" class="Bound">g</a><a id="17920" class="Symbol">)(</a><a id="17922" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="17929" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="17931" href="Demos.HSP.html#17931" class="Bound">h</a><a id="17932" class="Symbol">)</a>  <a id="17935" class="Symbol">=</a> <a id="17937" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="17944" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="17946" class="Symbol">Œª</a> <a id="17948" href="Demos.HSP.html#17948" class="Bound">i</a> <a id="17950" class="Symbol">‚Üí</a> <a id="17952" href="Demos.HSP.html#7206" class="Function">transÀ¢</a>  <a id="17960" href="Demos.HSP.html#17905" class="Bound">Œæ</a> <a id="17962" class="Symbol">(</a><a id="17963" href="Demos.HSP.html#17919" class="Bound">g</a> <a id="17965" href="Demos.HSP.html#17948" class="Bound">i</a><a id="17966" class="Symbol">)</a> <a id="17968" class="Symbol">(</a><a id="17969" href="Demos.HSP.html#17931" class="Bound">h</a> <a id="17971" href="Demos.HSP.html#17948" class="Bound">i</a><a id="17972" class="Symbol">)</a>
</pre>


Algebras
--------

An *algebraic structure* `ùë® = (A, F·¥¨)` *in the signature* `ùëÜ = (F, œÅ)`, or `ùëÜ`-*algebra*, consists of
*  a type `A`, called the *domain* of the algebra;
*  a collection `F·¥¨ := {f·¥¨ ‚à£ f ‚àà F, f·¥¨ : (œÅ f ‚Üí A) ‚Üí A}` of *operations* on `A`;
*  a (potentially empty) collection of *identities* satisfied by elements and operations of `ùë®`.
Our [Agda][] implementation represents algebras as inhabitants of a record type with two fields---a `Domain` setoid denoting the domain of the algebra, and an `Interp` function denoting the interpretation in the algebra of each operation symbol in `ùëÜ`. We postpone introducing identities until¬†¬ß[4](#equational-logic){reference-type="ref" reference="equational-logic"}.

<pre class="Agda">

<a id="18722" class="Keyword">record</a> <a id="Algebra"></a><a id="18729" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="18737" href="Demos.HSP.html#18737" class="Bound">Œ±</a> <a id="18739" href="Demos.HSP.html#18739" class="Bound">œÅ</a> <a id="18741" class="Symbol">:</a> <a id="18743" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="18748" class="Symbol">(</a><a id="18749" href="Demos.HSP.html#5474" class="Bound">ùìû</a> <a id="18751" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="18753" href="Demos.HSP.html#5476" class="Bound">ùì•</a> <a id="18755" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="18757" href="Agda.Primitive.html#780" class="Primitive">lsuc</a> <a id="18762" class="Symbol">(</a><a id="18763" href="Demos.HSP.html#18737" class="Bound">Œ±</a> <a id="18765" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="18767" href="Demos.HSP.html#18739" class="Bound">œÅ</a><a id="18768" class="Symbol">))</a> <a id="18771" class="Keyword">where</a>
 <a id="18778" class="Keyword">field</a>  <a id="Algebra.Domain"></a><a id="18785" href="Demos.HSP.html#18785" class="Field">Domain</a>  <a id="18793" class="Symbol">:</a> <a id="18795" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="18802" href="Demos.HSP.html#18737" class="Bound">Œ±</a> <a id="18804" href="Demos.HSP.html#18739" class="Bound">œÅ</a>
        <a id="Algebra.Interp"></a><a id="18814" href="Demos.HSP.html#18814" class="Field">Interp</a>  <a id="18822" class="Symbol">:</a> <a id="18824" href="Demos.HSP.html#17497" class="Function Operator">‚ü®</a> <a id="18826" href="Demos.HSP.html#5460" class="Bound">ùëÜ</a> <a id="18828" href="Demos.HSP.html#17497" class="Function Operator">‚ü©</a> <a id="18830" href="Demos.HSP.html#18785" class="Field">Domain</a> <a id="18837" href="Demos.HSP.html#6656" class="Record Operator">‚ü∂</a> <a id="18839" href="Demos.HSP.html#18785" class="Field">Domain</a>

</pre>

Thus, for each operation symbol in `ùëÜ` we have a setoid function `f` whose domain is a power of `Domain` and whose codomain is `Domain`. Further, we define some syntactic sugar to make our formalizations easier to read and reason about. Specifically, if `ùë®` is an algebra, then
*  `ùîª[ ùë® ]` denotes the `Domain` setoid of `ùë®`,
*  `ùïå[ ùë® ]` is the underlying carrier of (the `Domain` setoid of) `ùë®`, and
*  `f ÃÇ ùë®` denotes the interpretation of the operation symbol `f` in the algebra `ùë®`.

<pre class="Agda">

<a id="19361" class="Keyword">open</a> <a id="19366" href="Demos.HSP.html#18729" class="Module">Algebra</a>
<a id="ùîª[_]"></a><a id="19374" href="Demos.HSP.html#19374" class="Function Operator">ùîª[_]</a> <a id="19379" class="Symbol">:</a> <a id="19381" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="19389" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="19391" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a> <a id="19394" class="Symbol">‚Üí</a>  <a id="19397" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="19404" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="19406" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a>
<a id="19409" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="19412" href="Demos.HSP.html#19412" class="Bound">ùë®</a> <a id="19414" href="Demos.HSP.html#19374" class="Function Operator">]</a> <a id="19416" class="Symbol">=</a> <a id="19418" href="Demos.HSP.html#18785" class="Field">Domain</a> <a id="19425" href="Demos.HSP.html#19412" class="Bound">ùë®</a>

<a id="ùïå[_]"></a><a id="19428" href="Demos.HSP.html#19428" class="Function Operator">ùïå[_]</a> <a id="19433" class="Symbol">:</a> <a id="19435" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="19443" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="19445" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a> <a id="19448" class="Symbol">‚Üí</a>  <a id="19451" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="19456" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a>
<a id="19458" href="Demos.HSP.html#19428" class="Function Operator">ùïå[</a> <a id="19461" href="Demos.HSP.html#19461" class="Bound">ùë®</a> <a id="19463" href="Demos.HSP.html#19428" class="Function Operator">]</a> <a id="19465" class="Symbol">=</a> <a id="19467" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="19475" class="Symbol">(</a><a id="19476" href="Demos.HSP.html#18785" class="Field">Domain</a> <a id="19483" href="Demos.HSP.html#19461" class="Bound">ùë®</a><a id="19484" class="Symbol">)</a>

<a id="_ÃÇ_"></a><a id="19487" href="Demos.HSP.html#19487" class="Function Operator">_ÃÇ_</a> <a id="19491" class="Symbol">:</a> <a id="19493" class="Symbol">(</a><a id="19494" href="Demos.HSP.html#19494" class="Bound">f</a> <a id="19496" class="Symbol">:</a> <a id="19498" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="19500" href="Demos.HSP.html#5460" class="Bound">ùëÜ</a> <a id="19502" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a><a id="19503" class="Symbol">)(</a><a id="19505" href="Demos.HSP.html#19505" class="Bound">ùë®</a> <a id="19507" class="Symbol">:</a> <a id="19509" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="19517" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="19519" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a><a id="19521" class="Symbol">)</a> <a id="19523" class="Symbol">‚Üí</a> <a id="19525" class="Symbol">(</a><a id="19526" href="Demos.HSP.html#8278" class="Function Operator">‚à•</a> <a id="19528" href="Demos.HSP.html#5460" class="Bound">ùëÜ</a> <a id="19530" href="Demos.HSP.html#8278" class="Function Operator">‚à•</a> <a id="19532" href="Demos.HSP.html#19494" class="Bound">f</a>  <a id="19535" class="Symbol">‚Üí</a>  <a id="19538" href="Demos.HSP.html#19428" class="Function Operator">ùïå[</a> <a id="19541" href="Demos.HSP.html#19505" class="Bound">ùë®</a> <a id="19543" href="Demos.HSP.html#19428" class="Function Operator">]</a><a id="19544" class="Symbol">)</a> <a id="19546" class="Symbol">‚Üí</a> <a id="19548" href="Demos.HSP.html#19428" class="Function Operator">ùïå[</a> <a id="19551" href="Demos.HSP.html#19505" class="Bound">ùë®</a> <a id="19553" href="Demos.HSP.html#19428" class="Function Operator">]</a>
<a id="19555" href="Demos.HSP.html#19555" class="Bound">f</a> <a id="19557" href="Demos.HSP.html#19487" class="Function Operator">ÃÇ</a> <a id="19559" href="Demos.HSP.html#19559" class="Bound">ùë®</a> <a id="19561" class="Symbol">=</a> <a id="19563" class="Symbol">Œª</a> <a id="19565" href="Demos.HSP.html#19565" class="Bound">a</a> <a id="19567" class="Symbol">‚Üí</a> <a id="19569" class="Symbol">(</a><a id="19570" href="Demos.HSP.html#18814" class="Field">Interp</a> <a id="19577" href="Demos.HSP.html#19559" class="Bound">ùë®</a><a id="19578" class="Symbol">)</a> <a id="19580" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="19584" class="Symbol">(</a><a id="19585" href="Demos.HSP.html#19555" class="Bound">f</a> <a id="19587" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="19589" href="Demos.HSP.html#19565" class="Bound">a</a><a id="19590" class="Symbol">)</a>
</pre>

#### <a id="universe-levels-of-algebra-types">Universe levels of algebra types</a>

Types belong to *universes*, which are structured in [Agda][] as follows: 
`Type ‚Ñì : Type (suc ‚Ñì)`, `Type (suc ‚Ñì) : Type (suc (suc ‚Ñì))`.[^7] 
While this means that `Type ‚Ñì` has type `Type (suc ‚Ñì)`, it does *not* imply that `Type ‚Ñì` 
has type `Type (suc (suc ‚Ñì))`. In other words, [Agda][]'s universes are *non-cumulative*. 
This can be advantageous as it becomes possible to treat size issues more generally and precisely. 
However, dealing with explicit universe levels can be daunting, and the standard literature
(in which uniform smallness is typically assumed) offers little guidance. While in some settings, 
such as category theory, formalizing in [Agda][] works smoothly with respect to universe levels 
(see¬†[@agda-categories]), in universal algebra the terrain is bumpier. Thus, it seems worthwhile to 
explain how we make use of universe lifting and lowering functions, available in the 
[Agda Standard Library][], to develop domain-specific tools for dealing with [Agda][]'s non-cumulative 
universe hierarchy.

<!-- Let us be more concrete about what is at issue by considering a typical example. frequently encounters problems during the type-checking process and responds by printing a message like the following. Here informs us that it encountered universe level on line 498 of the HSP module, where it was expecting level ¬†¬†¬†¬†( ). In this case, we tried to use an algebra inhabiting the type whereas expected an inhabitant of the type ( ( )) . The operation of the standard library embeds a type into a higher universe. Specializing to our situation, we define a function ¬†with the following interface. -2mm . -->

The `Lift` operation of the standard library embeds a type into a higher universe. Specializing `Lift` to our situation, we define a function `Lift-Alg`.

<pre class="Agda">

<a id="21490" class="Keyword">module</a> <a id="21497" href="Demos.HSP.html#21497" class="Module">_</a> <a id="21499" class="Symbol">(</a><a id="21500" href="Demos.HSP.html#21500" class="Bound">ùë®</a> <a id="21502" class="Symbol">:</a> <a id="21504" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="21512" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="21514" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a><a id="21516" class="Symbol">)</a> <a id="21518" class="Keyword">where</a>
 <a id="21525" class="Keyword">open</a> <a id="21530" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="21537" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="21540" href="Demos.HSP.html#21500" class="Bound">ùë®</a> <a id="21542" href="Demos.HSP.html#19374" class="Function Operator">]</a> <a id="21544" class="Keyword">using</a> <a id="21550" class="Symbol">(</a> <a id="21552" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="21556" class="Symbol">;</a> <a id="21558" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="21563" class="Symbol">;</a> <a id="21565" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="21569" class="Symbol">;</a> <a id="21571" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="21577" class="Symbol">)</a> <a id="21579" class="Symbol">;</a> <a id="21581" class="Keyword">open</a> <a id="21586" href="Level.html" class="Module">Level</a>
 <a id="21593" href="Demos.HSP.html#21593" class="Function">Lift-AlgÀ°</a> <a id="21603" class="Symbol">:</a> <a id="21605" class="Symbol">(</a><a id="21606" href="Demos.HSP.html#21606" class="Bound">‚Ñì</a> <a id="21608" class="Symbol">:</a> <a id="21610" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="21615" class="Symbol">)</a> <a id="21617" class="Symbol">‚Üí</a> <a id="21619" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="21627" class="Symbol">(</a><a id="21628" href="Demos.HSP.html#21512" class="Bound">Œ±</a> <a id="21630" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="21632" href="Demos.HSP.html#21606" class="Bound">‚Ñì</a><a id="21633" class="Symbol">)</a> <a id="21635" href="Demos.HSP.html#21514" class="Bound">œÅ·µÉ</a>
 <a id="21639" href="Demos.HSP.html#18785" class="Field">Domain</a> <a id="21646" class="Symbol">(</a><a id="21647" href="Demos.HSP.html#21593" class="Function">Lift-AlgÀ°</a> <a id="21657" href="Demos.HSP.html#21657" class="Bound">‚Ñì</a><a id="21658" class="Symbol">)</a> <a id="21660" class="Symbol">=</a>
  <a id="21664" class="Keyword">record</a>  <a id="21672" class="Symbol">{</a> <a id="21674" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a>        <a id="21689" class="Symbol">=</a> <a id="21691" href="Level.html#400" class="Record">Lift</a> <a id="21696" href="Demos.HSP.html#21657" class="Bound">‚Ñì</a> <a id="21698" href="Demos.HSP.html#19428" class="Function Operator">ùïå[</a> <a id="21701" href="Demos.HSP.html#21500" class="Bound">ùë®</a> <a id="21703" href="Demos.HSP.html#19428" class="Function Operator">]</a>
          <a id="21715" class="Symbol">;</a> <a id="21717" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a>            <a id="21732" class="Symbol">=</a> <a id="21734" class="Symbol">Œª</a> <a id="21736" href="Demos.HSP.html#21736" class="Bound">x</a> <a id="21738" href="Demos.HSP.html#21738" class="Bound">y</a> <a id="21740" class="Symbol">‚Üí</a> <a id="21742" href="Level.html#470" class="Field">lower</a> <a id="21748" href="Demos.HSP.html#21736" class="Bound">x</a> <a id="21750" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a> <a id="21752" href="Level.html#470" class="Field">lower</a> <a id="21758" href="Demos.HSP.html#21738" class="Bound">y</a>
          <a id="21770" class="Symbol">;</a> <a id="21772" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a>  <a id="21787" class="Symbol">=</a> <a id="21789" class="Keyword">record</a> <a id="21796" class="Symbol">{</a> <a id="21798" href="Relation.Binary.Structures.html#1568" class="Field">refl</a> <a id="21803" class="Symbol">=</a> <a id="21805" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="21810" class="Symbol">;</a> <a id="21812" href="Relation.Binary.Structures.html#1594" class="Field">sym</a> <a id="21816" class="Symbol">=</a> <a id="21818" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="21822" class="Symbol">;</a> <a id="21824" href="Relation.Binary.Structures.html#1620" class="Field">trans</a> <a id="21830" class="Symbol">=</a> <a id="21832" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="21838" class="Symbol">}}</a>

 <a id="21843" href="Demos.HSP.html#18814" class="Field">Interp</a> <a id="21850" class="Symbol">(</a><a id="21851" href="Demos.HSP.html#21593" class="Function">Lift-AlgÀ°</a> <a id="21861" href="Demos.HSP.html#21861" class="Bound">‚Ñì</a><a id="21862" class="Symbol">)</a> <a id="21864" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="21868" class="Symbol">(</a><a id="21869" href="Demos.HSP.html#21869" class="Bound">f</a> <a id="21871" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="21873" href="Demos.HSP.html#21873" class="Bound">la</a><a id="21875" class="Symbol">)</a> <a id="21877" class="Symbol">=</a> <a id="21879" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="21884" class="Symbol">((</a><a id="21886" href="Demos.HSP.html#21869" class="Bound">f</a> <a id="21888" href="Demos.HSP.html#19487" class="Function Operator">ÃÇ</a> <a id="21890" href="Demos.HSP.html#21500" class="Bound">ùë®</a><a id="21891" class="Symbol">)</a> <a id="21893" class="Symbol">(</a><a id="21894" href="Level.html#470" class="Field">lower</a> <a id="21900" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="21902" href="Demos.HSP.html#21873" class="Bound">la</a><a id="21904" class="Symbol">))</a>
 <a id="21908" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="21913" class="Symbol">(</a><a id="21914" href="Demos.HSP.html#18814" class="Field">Interp</a> <a id="21921" class="Symbol">(</a><a id="21922" href="Demos.HSP.html#21593" class="Function">Lift-AlgÀ°</a> <a id="21932" href="Demos.HSP.html#21932" class="Bound">‚Ñì</a><a id="21933" class="Symbol">))</a> <a id="21936" class="Symbol">(</a><a id="21937" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="21944" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="21946" href="Demos.HSP.html#21946" class="Bound">lab</a><a id="21949" class="Symbol">)</a> <a id="21951" class="Symbol">=</a> <a id="21953" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="21958" class="Symbol">(</a><a id="21959" href="Demos.HSP.html#18814" class="Field">Interp</a> <a id="21966" href="Demos.HSP.html#21500" class="Bound">ùë®</a><a id="21967" class="Symbol">)</a> <a id="21969" class="Symbol">((</a><a id="21971" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="21978" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="21980" href="Demos.HSP.html#21946" class="Bound">lab</a><a id="21983" class="Symbol">))</a>

 <a id="21988" href="Demos.HSP.html#21988" class="Function">Lift-Alg ≥</a> <a id="21998" class="Symbol">:</a> <a id="22000" class="Symbol">(</a><a id="22001" href="Demos.HSP.html#22001" class="Bound">‚Ñì</a> <a id="22003" class="Symbol">:</a> <a id="22005" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="22010" class="Symbol">)</a> <a id="22012" class="Symbol">‚Üí</a> <a id="22014" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="22022" href="Demos.HSP.html#21512" class="Bound">Œ±</a> <a id="22024" class="Symbol">(</a><a id="22025" href="Demos.HSP.html#21514" class="Bound">œÅ·µÉ</a> <a id="22028" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="22030" href="Demos.HSP.html#22001" class="Bound">‚Ñì</a><a id="22031" class="Symbol">)</a>
 <a id="22034" href="Demos.HSP.html#18785" class="Field">Domain</a> <a id="22041" class="Symbol">(</a><a id="22042" href="Demos.HSP.html#21988" class="Function">Lift-Alg ≥</a> <a id="22052" href="Demos.HSP.html#22052" class="Bound">‚Ñì</a><a id="22053" class="Symbol">)</a> <a id="22055" class="Symbol">=</a>
  <a id="22059" class="Keyword">record</a>  <a id="22067" class="Symbol">{</a> <a id="22069" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a>        <a id="22084" class="Symbol">=</a> <a id="22086" href="Demos.HSP.html#19428" class="Function Operator">ùïå[</a> <a id="22089" href="Demos.HSP.html#21500" class="Bound">ùë®</a> <a id="22091" href="Demos.HSP.html#19428" class="Function Operator">]</a>
          <a id="22103" class="Symbol">;</a> <a id="22105" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a>            <a id="22120" class="Symbol">=</a> <a id="22122" class="Symbol">Œª</a> <a id="22124" href="Demos.HSP.html#22124" class="Bound">x</a> <a id="22126" href="Demos.HSP.html#22126" class="Bound">y</a> <a id="22128" class="Symbol">‚Üí</a> <a id="22130" href="Level.html#400" class="Record">Lift</a> <a id="22135" href="Demos.HSP.html#22052" class="Bound">‚Ñì</a> <a id="22137" class="Symbol">(</a><a id="22138" href="Demos.HSP.html#22124" class="Bound">x</a> <a id="22140" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a> <a id="22142" href="Demos.HSP.html#22126" class="Bound">y</a><a id="22143" class="Symbol">)</a>
          <a id="22155" class="Symbol">;</a> <a id="22157" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a>  <a id="22172" class="Symbol">=</a> <a id="22174" class="Keyword">record</a>  <a id="22182" class="Symbol">{</a> <a id="22184" href="Relation.Binary.Structures.html#1568" class="Field">refl</a>  <a id="22190" class="Symbol">=</a> <a id="22192" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="22197" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>
                                     <a id="22239" class="Symbol">;</a> <a id="22241" href="Relation.Binary.Structures.html#1594" class="Field">sym</a>   <a id="22247" class="Symbol">=</a> <a id="22249" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="22254" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="22256" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="22260" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="22262" href="Level.html#470" class="Field">lower</a>
                                     <a id="22305" class="Symbol">;</a> <a id="22307" href="Relation.Binary.Structures.html#1620" class="Field">trans</a> <a id="22313" class="Symbol">=</a> <a id="22315" class="Symbol">Œª</a> <a id="22317" href="Demos.HSP.html#22317" class="Bound">x</a> <a id="22319" href="Demos.HSP.html#22319" class="Bound">y</a> <a id="22321" class="Symbol">‚Üí</a> <a id="22323" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="22328" class="Symbol">(</a><a id="22329" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="22335" class="Symbol">(</a><a id="22336" href="Level.html#470" class="Field">lower</a> <a id="22342" href="Demos.HSP.html#22317" class="Bound">x</a><a id="22343" class="Symbol">)(</a><a id="22345" href="Level.html#470" class="Field">lower</a> <a id="22351" href="Demos.HSP.html#22319" class="Bound">y</a><a id="22352" class="Symbol">))</a> <a id="22355" class="Symbol">}}</a>

 <a id="22360" href="Demos.HSP.html#18814" class="Field">Interp</a> <a id="22367" class="Symbol">(</a><a id="22368" href="Demos.HSP.html#21988" class="Function">Lift-Alg ≥</a> <a id="22378" href="Demos.HSP.html#22378" class="Bound">‚Ñì</a> <a id="22380" class="Symbol">)</a> <a id="22382" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="22386" class="Symbol">(</a><a id="22387" href="Demos.HSP.html#22387" class="Bound">f</a> <a id="22389" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="22391" href="Demos.HSP.html#22391" class="Bound">la</a><a id="22393" class="Symbol">)</a> <a id="22395" class="Symbol">=</a> <a id="22397" class="Symbol">(</a><a id="22398" href="Demos.HSP.html#22387" class="Bound">f</a> <a id="22400" href="Demos.HSP.html#19487" class="Function Operator">ÃÇ</a> <a id="22402" href="Demos.HSP.html#21500" class="Bound">ùë®</a><a id="22403" class="Symbol">)</a> <a id="22405" href="Demos.HSP.html#22391" class="Bound">la</a>
 <a id="22409" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="22414" class="Symbol">(</a><a id="22415" href="Demos.HSP.html#18814" class="Field">Interp</a> <a id="22422" class="Symbol">(</a><a id="22423" href="Demos.HSP.html#21988" class="Function">Lift-Alg ≥</a> <a id="22433" href="Demos.HSP.html#22433" class="Bound">‚Ñì</a><a id="22434" class="Symbol">))(</a><a id="22437" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="22444" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="22446" href="Demos.HSP.html#22446" class="Bound">lab</a><a id="22449" class="Symbol">)</a> <a id="22451" class="Symbol">=</a> <a id="22453" href="Level.html#457" class="InductiveConstructor">lift</a><a id="22457" class="Symbol">(</a><a id="22458" href="Function.Bundles.html#1938" class="Field">cong</a><a id="22462" class="Symbol">(</a><a id="22463" href="Demos.HSP.html#18814" class="Field">Interp</a> <a id="22470" href="Demos.HSP.html#21500" class="Bound">ùë®</a><a id="22471" class="Symbol">)(</a><a id="22473" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="22480" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="22482" class="Symbol">Œª</a> <a id="22484" href="Demos.HSP.html#22484" class="Bound">i</a> <a id="22486" class="Symbol">‚Üí</a> <a id="22488" href="Level.html#470" class="Field">lower</a> <a id="22494" class="Symbol">(</a><a id="22495" href="Demos.HSP.html#22446" class="Bound">lab</a> <a id="22499" href="Demos.HSP.html#22484" class="Bound">i</a><a id="22500" class="Symbol">)))</a>

<a id="Lift-Alg"></a><a id="22505" href="Demos.HSP.html#22505" class="Function">Lift-Alg</a> <a id="22514" class="Symbol">:</a> <a id="22516" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="22524" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="22526" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a> <a id="22529" class="Symbol">‚Üí</a> <a id="22531" class="Symbol">(</a><a id="22532" href="Demos.HSP.html#22532" class="Bound">‚Ñì‚ÇÄ</a> <a id="22535" href="Demos.HSP.html#22535" class="Bound">‚Ñì‚ÇÅ</a> <a id="22538" class="Symbol">:</a> <a id="22540" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="22545" class="Symbol">)</a> <a id="22547" class="Symbol">‚Üí</a> <a id="22549" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="22557" class="Symbol">(</a><a id="22558" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="22560" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="22562" href="Demos.HSP.html#22532" class="Bound">‚Ñì‚ÇÄ</a><a id="22564" class="Symbol">)</a> <a id="22566" class="Symbol">(</a><a id="22567" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a> <a id="22570" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="22572" href="Demos.HSP.html#22535" class="Bound">‚Ñì‚ÇÅ</a><a id="22574" class="Symbol">)</a>
<a id="22576" href="Demos.HSP.html#22505" class="Function">Lift-Alg</a> <a id="22585" href="Demos.HSP.html#22585" class="Bound">ùë®</a> <a id="22587" href="Demos.HSP.html#22587" class="Bound">‚Ñì‚ÇÄ</a> <a id="22590" href="Demos.HSP.html#22590" class="Bound">‚Ñì‚ÇÅ</a> <a id="22593" class="Symbol">=</a> <a id="22595" href="Demos.HSP.html#21988" class="Function">Lift-Alg ≥</a> <a id="22605" class="Symbol">(</a><a id="22606" href="Demos.HSP.html#21593" class="Function">Lift-AlgÀ°</a> <a id="22616" href="Demos.HSP.html#22585" class="Bound">ùë®</a> <a id="22618" href="Demos.HSP.html#22587" class="Bound">‚Ñì‚ÇÄ</a><a id="22620" class="Symbol">)</a> <a id="22622" href="Demos.HSP.html#22590" class="Bound">‚Ñì‚ÇÅ</a>

</pre>

Recall that our `Algebra` type has two universe level parameters corresponding to those of the domain setoid.
Concretely, an algebra of type `Algebra Œ± œÅ·µÉ` has a `Domain` of type `Setoid Œ± œÅ·µÉ`. This packages a 
"carrier set" (`Carrier`), inhabiting `Type Œ±`, with an equality on `Carrier` of type `Rel Carrier œÅ·µÉ`.
`Lift-Alg` takes an algebra parametrized by levels `Œ±` and `œÅ·µÉ` and constructs a new algebra whose carrier 
inhabits `Type (Œ± ‚äî ‚Ñì‚ÇÄ)` and whose equivalence inhabits `Rel Carrier (œÅ·µÉ ‚äî ‚Ñì‚ÇÅ)`.
To be useful, this lifting operation should result in an algebra with the same semantic properties
as the one we started with. We will see in ¬ß[3.4](#sec:lift-alg){reference-type="ref"
reference="sec:lift-alg"} that this is indeed the case.


#### <a id="product-algebras">Product Algebras</a>

We define the *product* of a family of algebras as follows. Let `Œπ` be a universe and
`I : Type Œπ` a type (the "indexing type"). Then `ùíú : I ‚Üí Algebra Œ± œÅ·µÉ` represents an *indexed family of algebras*. Denote by `‚®Ö ùíú` the *product of algebras* in `ùíú` (or *product algebra*), by which we mean the algebra 
whose domain is the Cartesian product `‚àè[i ‚àà I] ùîª[ ùíú i ]` of the domains of the algebras in `ùíú`, and
whose operations are those arising from the point-wise interpretation of the operation symbols in the obvious way: if `f` is a `J`-ary operation symbol and if `a : Œ†[ i ‚àà I ] J ‚Üí ùîª[ ùíú i ]` is, for each
`i : I`, a `J`-tuple of elements of the domain `ùîª[ ùíú i ]`, then we define the interpretation of `f` 
in `‚®Ö ùíú` by

`(f ÃÇ ‚®Ö ùíú) a := Œª (i : I) ‚Üí (f ÃÇ ùíú i)(a i)`.

Here is the formal definition of the product algebra type in [Agda][].

<pre class="Agda">

<a id="24290" class="Keyword">module</a> <a id="24297" href="Demos.HSP.html#24297" class="Module">_</a> <a id="24299" class="Symbol">{</a><a id="24300" href="Demos.HSP.html#24300" class="Bound">Œπ</a> <a id="24302" class="Symbol">:</a> <a id="24304" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="24309" class="Symbol">}{</a><a id="24311" href="Demos.HSP.html#24311" class="Bound">I</a> <a id="24313" class="Symbol">:</a> <a id="24315" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="24320" href="Demos.HSP.html#24300" class="Bound">Œπ</a> <a id="24322" class="Symbol">}</a> <a id="24324" class="Keyword">where</a>

 <a id="24332" href="Demos.HSP.html#24332" class="Function">‚®Ö</a> <a id="24334" class="Symbol">:</a> <a id="24336" class="Symbol">(</a><a id="24337" href="Demos.HSP.html#24337" class="Bound">ùíú</a> <a id="24339" class="Symbol">:</a> <a id="24341" href="Demos.HSP.html#24311" class="Bound">I</a> <a id="24343" class="Symbol">‚Üí</a> <a id="24345" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="24353" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="24355" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a><a id="24357" class="Symbol">)</a> <a id="24359" class="Symbol">‚Üí</a> <a id="24361" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="24369" class="Symbol">(</a><a id="24370" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="24372" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="24374" href="Demos.HSP.html#24300" class="Bound">Œπ</a><a id="24375" class="Symbol">)</a> <a id="24377" class="Symbol">(</a><a id="24378" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a> <a id="24381" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="24383" href="Demos.HSP.html#24300" class="Bound">Œπ</a><a id="24384" class="Symbol">)</a>

 <a id="24388" href="Demos.HSP.html#18785" class="Field">Domain</a> <a id="24395" class="Symbol">(</a><a id="24396" href="Demos.HSP.html#24332" class="Function">‚®Ö</a> <a id="24398" href="Demos.HSP.html#24398" class="Bound">ùíú</a><a id="24399" class="Symbol">)</a> <a id="24401" class="Symbol">=</a> <a id="24403" class="Keyword">record</a>  <a id="24411" class="Symbol">{</a> <a id="24413" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="24421" class="Symbol">=</a> <a id="24423" class="Symbol">‚àÄ</a> <a id="24425" href="Demos.HSP.html#24425" class="Bound">i</a> <a id="24427" class="Symbol">‚Üí</a> <a id="24429" href="Demos.HSP.html#19428" class="Function Operator">ùïå[</a> <a id="24432" href="Demos.HSP.html#24398" class="Bound">ùíú</a> <a id="24434" href="Demos.HSP.html#24425" class="Bound">i</a> <a id="24436" href="Demos.HSP.html#19428" class="Function Operator">]</a>
                        <a id="24462" class="Symbol">;</a> <a id="24464" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="24468" class="Symbol">=</a> <a id="24470" class="Symbol">Œª</a> <a id="24472" href="Demos.HSP.html#24472" class="Bound">a</a> <a id="24474" href="Demos.HSP.html#24474" class="Bound">b</a> <a id="24476" class="Symbol">‚Üí</a> <a id="24478" class="Symbol">‚àÄ</a> <a id="24480" href="Demos.HSP.html#24480" class="Bound">i</a> <a id="24482" class="Symbol">‚Üí</a> <a id="24484" class="Symbol">(</a><a id="24485" href="Demos.HSP.html#7264" class="Field Operator">_‚âàÀ¢_</a> <a id="24490" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="24493" href="Demos.HSP.html#24398" class="Bound">ùíú</a> <a id="24495" href="Demos.HSP.html#24480" class="Bound">i</a> <a id="24497" href="Demos.HSP.html#19374" class="Function Operator">]</a><a id="24498" class="Symbol">)</a> <a id="24500" class="Symbol">(</a><a id="24501" href="Demos.HSP.html#24472" class="Bound">a</a> <a id="24503" href="Demos.HSP.html#24480" class="Bound">i</a><a id="24504" class="Symbol">)(</a><a id="24506" href="Demos.HSP.html#24474" class="Bound">b</a> <a id="24508" href="Demos.HSP.html#24480" class="Bound">i</a><a id="24509" class="Symbol">)</a>
                        <a id="24535" class="Symbol">;</a> <a id="24537" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="24551" class="Symbol">=</a>
                           <a id="24580" class="Keyword">record</a>  <a id="24588" class="Symbol">{</a> <a id="24590" href="Relation.Binary.Structures.html#1568" class="Field">refl</a> <a id="24595" class="Symbol">=</a> <a id="24597" class="Symbol">Œª</a> <a id="24599" href="Demos.HSP.html#24599" class="Bound">i</a> <a id="24601" class="Symbol">‚Üí</a> <a id="24603" href="Demos.HSP.html#6860" class="Field">refl·µâ</a> <a id="24609" class="Symbol">(</a><a id="24610" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="24624" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="24627" href="Demos.HSP.html#24398" class="Bound">ùíú</a> <a id="24629" href="Demos.HSP.html#24599" class="Bound">i</a> <a id="24631" href="Demos.HSP.html#19374" class="Function Operator">]</a><a id="24632" class="Symbol">)</a>
                                   <a id="24669" class="Symbol">;</a> <a id="24671" href="Relation.Binary.Structures.html#1594" class="Field">sym</a> <a id="24675" class="Symbol">=</a> <a id="24677" class="Symbol">Œª</a> <a id="24679" href="Demos.HSP.html#24679" class="Bound">x</a> <a id="24681" href="Demos.HSP.html#24681" class="Bound">i</a> <a id="24683" class="Symbol">‚Üí</a> <a id="24685" href="Demos.HSP.html#6921" class="Field">sym·µâ</a> <a id="24690" class="Symbol">(</a><a id="24691" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="24705" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="24708" href="Demos.HSP.html#24398" class="Bound">ùíú</a> <a id="24710" href="Demos.HSP.html#24681" class="Bound">i</a> <a id="24712" href="Demos.HSP.html#19374" class="Function Operator">]</a><a id="24713" class="Symbol">)(</a><a id="24715" href="Demos.HSP.html#24679" class="Bound">x</a> <a id="24717" href="Demos.HSP.html#24681" class="Bound">i</a><a id="24718" class="Symbol">)</a>
                                   <a id="24755" class="Symbol">;</a> <a id="24757" href="Relation.Binary.Structures.html#1620" class="Field">trans</a> <a id="24763" class="Symbol">=</a> <a id="24765" class="Symbol">Œª</a> <a id="24767" href="Demos.HSP.html#24767" class="Bound">x</a> <a id="24769" href="Demos.HSP.html#24769" class="Bound">y</a> <a id="24771" href="Demos.HSP.html#24771" class="Bound">i</a> <a id="24773" class="Symbol">‚Üí</a> <a id="24775" href="Demos.HSP.html#6982" class="Field">trans·µâ</a> <a id="24782" class="Symbol">(</a><a id="24783" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="24797" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="24800" href="Demos.HSP.html#24398" class="Bound">ùíú</a> <a id="24802" href="Demos.HSP.html#24771" class="Bound">i</a> <a id="24804" href="Demos.HSP.html#19374" class="Function Operator">]</a><a id="24805" class="Symbol">)(</a><a id="24807" href="Demos.HSP.html#24767" class="Bound">x</a> <a id="24809" href="Demos.HSP.html#24771" class="Bound">i</a><a id="24810" class="Symbol">)(</a><a id="24812" href="Demos.HSP.html#24769" class="Bound">y</a> <a id="24814" href="Demos.HSP.html#24771" class="Bound">i</a><a id="24815" class="Symbol">)</a> <a id="24817" class="Symbol">}}</a>

 <a id="24822" href="Demos.HSP.html#18814" class="Field">Interp</a> <a id="24829" class="Symbol">(</a><a id="24830" href="Demos.HSP.html#24332" class="Function">‚®Ö</a> <a id="24832" href="Demos.HSP.html#24832" class="Bound">ùíú</a><a id="24833" class="Symbol">)</a> <a id="24835" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="24839" class="Symbol">(</a><a id="24840" href="Demos.HSP.html#24840" class="Bound">f</a> <a id="24842" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="24844" href="Demos.HSP.html#24844" class="Bound">a</a><a id="24845" class="Symbol">)</a> <a id="24847" class="Symbol">=</a> <a id="24849" class="Symbol">Œª</a> <a id="24851" href="Demos.HSP.html#24851" class="Bound">i</a> <a id="24853" class="Symbol">‚Üí</a> <a id="24855" class="Symbol">(</a><a id="24856" href="Demos.HSP.html#24840" class="Bound">f</a> <a id="24858" href="Demos.HSP.html#19487" class="Function Operator">ÃÇ</a> <a id="24860" class="Symbol">(</a><a id="24861" href="Demos.HSP.html#24832" class="Bound">ùíú</a> <a id="24863" href="Demos.HSP.html#24851" class="Bound">i</a><a id="24864" class="Symbol">))</a> <a id="24867" class="Symbol">(</a><a id="24868" href="Function.Base.html#1554" class="Function">flip</a> <a id="24873" href="Demos.HSP.html#24844" class="Bound">a</a> <a id="24875" href="Demos.HSP.html#24851" class="Bound">i</a><a id="24876" class="Symbol">)</a>
 <a id="24879" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="24884" class="Symbol">(</a><a id="24885" href="Demos.HSP.html#18814" class="Field">Interp</a> <a id="24892" class="Symbol">(</a><a id="24893" href="Demos.HSP.html#24332" class="Function">‚®Ö</a> <a id="24895" href="Demos.HSP.html#24895" class="Bound">ùíú</a><a id="24896" class="Symbol">))</a> <a id="24899" class="Symbol">(</a><a id="24900" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="24907" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="24909" href="Demos.HSP.html#24909" class="Bound">f=g</a> <a id="24913" class="Symbol">)</a> <a id="24915" class="Symbol">=</a> <a id="24917" class="Symbol">Œª</a> <a id="24919" href="Demos.HSP.html#24919" class="Bound">i</a> <a id="24921" class="Symbol">‚Üí</a> <a id="24923" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="24928" class="Symbol">(</a><a id="24929" href="Demos.HSP.html#18814" class="Field">Interp</a> <a id="24936" class="Symbol">(</a><a id="24937" href="Demos.HSP.html#24895" class="Bound">ùíú</a> <a id="24939" href="Demos.HSP.html#24919" class="Bound">i</a><a id="24940" class="Symbol">))</a> <a id="24943" class="Symbol">(</a><a id="24944" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="24951" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="24953" href="Function.Base.html#1554" class="Function">flip</a> <a id="24958" href="Demos.HSP.html#24909" class="Bound">f=g</a> <a id="24962" href="Demos.HSP.html#24919" class="Bound">i</a> <a id="24964" class="Symbol">)</a>

</pre>

Evidently, the carrier of the product algebra type is indeed the (dependent) product of the carriers in the indexed family. The rest of the definitions are the point-wise versions of the underlying ones.

Structure preserving maps and isomorphism {#homomorphisms}
-----------------------------------------

Throughout the rest of the paper, unless stated otherwise, `ùë®` and `ùë©` will denote `ùëÜ`-algebras inhabiting the types `Algebra Œ± œÅ·µÉ` and `Algebra Œ≤ œÅ·µá`, respectively.

A *homomorphism* (or "hom") from `ùë®` to `ùë©` is a setoid function `h : ùîª[ ùë® ] ‚ü∂ ùîª[ ùë© ]`
that is *compatible* with all basic operations; that is, for
every operation symbol `f : ‚à£ ùëÜ ‚à£` and all tuples `a : ‚à• ùëÜ ‚à• f ‚Üí ùïå[ ùë® ]`, we have 
`h ‚ü®$‚ü© (f ÃÇ ùë®) a ‚âà (f ÃÇ ùë©) Œª x ‚Üí h ‚ü®$‚ü© (a x)`.

It is convenient to first formalize "compatible" (`compatible-map-op`),
representing the assertion that a given setoid function
`h : ùîª[ ùë® ] ‚ü∂ ùîª[ ùë© ]` commutes with a given operation symbol `f`, and then generalize over 
operation symbols to yield the type (`compatible-map`) of compatible maps from (the domain of)
`ùë®` to (the domain of) `ùë©`.

<pre class="Agda">

<a id="26090" class="Keyword">module</a> <a id="26097" href="Demos.HSP.html#26097" class="Module">_</a> <a id="26099" class="Symbol">(</a><a id="26100" href="Demos.HSP.html#26100" class="Bound">ùë®</a> <a id="26102" class="Symbol">:</a> <a id="26104" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="26112" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="26114" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a><a id="26116" class="Symbol">)(</a><a id="26118" href="Demos.HSP.html#26118" class="Bound">ùë©</a> <a id="26120" class="Symbol">:</a> <a id="26122" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="26130" href="Demos.HSP.html#7595" class="Generalizable">Œ≤</a> <a id="26132" href="Demos.HSP.html#7597" class="Generalizable">œÅ·µá</a><a id="26134" class="Symbol">)</a> <a id="26136" class="Keyword">where</a>

 <a id="26144" href="Demos.HSP.html#26144" class="Function">compatible-map-op</a> <a id="26162" class="Symbol">:</a> <a id="26164" class="Symbol">(</a><a id="26165" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="26168" href="Demos.HSP.html#26100" class="Bound">ùë®</a> <a id="26170" href="Demos.HSP.html#19374" class="Function Operator">]</a> <a id="26172" href="Demos.HSP.html#6656" class="Record Operator">‚ü∂</a> <a id="26174" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="26177" href="Demos.HSP.html#26118" class="Bound">ùë©</a> <a id="26179" href="Demos.HSP.html#19374" class="Function Operator">]</a><a id="26180" class="Symbol">)</a> <a id="26182" class="Symbol">‚Üí</a> <a id="26184" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="26186" href="Demos.HSP.html#5460" class="Bound">ùëÜ</a> <a id="26188" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="26190" class="Symbol">‚Üí</a> <a id="26192" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="26197" class="Symbol">_</a>
 <a id="26200" href="Demos.HSP.html#26144" class="Function">compatible-map-op</a> <a id="26218" href="Demos.HSP.html#26218" class="Bound">h</a> <a id="26220" href="Demos.HSP.html#26220" class="Bound">f</a> <a id="26222" class="Symbol">=</a> <a id="26224" class="Symbol">‚àÄ</a> <a id="26226" class="Symbol">{</a><a id="26227" href="Demos.HSP.html#26227" class="Bound">a</a><a id="26228" class="Symbol">}</a> <a id="26230" class="Symbol">‚Üí</a> <a id="26232" href="Demos.HSP.html#26218" class="Bound">h</a> <a id="26234" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="26238" class="Symbol">(</a><a id="26239" href="Demos.HSP.html#26220" class="Bound">f</a> <a id="26241" href="Demos.HSP.html#19487" class="Function Operator">ÃÇ</a> <a id="26243" href="Demos.HSP.html#26100" class="Bound">ùë®</a><a id="26244" class="Symbol">)</a> <a id="26246" href="Demos.HSP.html#26227" class="Bound">a</a> <a id="26248" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a> <a id="26250" class="Symbol">(</a><a id="26251" href="Demos.HSP.html#26220" class="Bound">f</a> <a id="26253" href="Demos.HSP.html#19487" class="Function Operator">ÃÇ</a> <a id="26255" href="Demos.HSP.html#26118" class="Bound">ùë©</a><a id="26256" class="Symbol">)</a> <a id="26258" class="Symbol">Œª</a> <a id="26260" href="Demos.HSP.html#26260" class="Bound">x</a> <a id="26262" class="Symbol">‚Üí</a> <a id="26264" href="Demos.HSP.html#26218" class="Bound">h</a> <a id="26266" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="26270" class="Symbol">(</a><a id="26271" href="Demos.HSP.html#26227" class="Bound">a</a> <a id="26273" href="Demos.HSP.html#26260" class="Bound">x</a><a id="26274" class="Symbol">)</a>
  <a id="26278" class="Keyword">where</a> <a id="26284" class="Keyword">open</a> <a id="26289" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="26296" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="26299" href="Demos.HSP.html#26118" class="Bound">ùë©</a> <a id="26301" href="Demos.HSP.html#19374" class="Function Operator">]</a> <a id="26303" class="Keyword">using</a> <a id="26309" class="Symbol">(</a> <a id="26311" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="26315" class="Symbol">)</a>

 <a id="26319" href="Demos.HSP.html#26319" class="Function">compatible-map</a> <a id="26334" class="Symbol">:</a> <a id="26336" class="Symbol">(</a><a id="26337" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="26340" href="Demos.HSP.html#26100" class="Bound">ùë®</a> <a id="26342" href="Demos.HSP.html#19374" class="Function Operator">]</a> <a id="26344" href="Demos.HSP.html#6656" class="Record Operator">‚ü∂</a> <a id="26346" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="26349" href="Demos.HSP.html#26118" class="Bound">ùë©</a> <a id="26351" href="Demos.HSP.html#19374" class="Function Operator">]</a><a id="26352" class="Symbol">)</a> <a id="26354" class="Symbol">‚Üí</a> <a id="26356" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="26361" class="Symbol">_</a>
 <a id="26364" href="Demos.HSP.html#26319" class="Function">compatible-map</a> <a id="26379" href="Demos.HSP.html#26379" class="Bound">h</a> <a id="26381" class="Symbol">=</a> <a id="26383" class="Symbol">‚àÄ</a> <a id="26385" class="Symbol">{</a><a id="26386" href="Demos.HSP.html#26386" class="Bound">f</a><a id="26387" class="Symbol">}</a> <a id="26389" class="Symbol">‚Üí</a> <a id="26391" href="Demos.HSP.html#26144" class="Function">compatible-map-op</a> <a id="26409" href="Demos.HSP.html#26379" class="Bound">h</a> <a id="26411" href="Demos.HSP.html#26386" class="Bound">f</a>

</pre>

Using these we define the property (`IsHom`) of being a homomorphism, and
finally the type (`hom`) of homomorphisms from `ùë®` to `ùë©`.

<pre class="Agda">

 <a id="26575" class="Keyword">record</a> <a id="26582" href="Demos.HSP.html#26582" class="Record">IsHom</a> <a id="26588" class="Symbol">(</a><a id="26589" href="Demos.HSP.html#26589" class="Bound">h</a> <a id="26591" class="Symbol">:</a> <a id="26593" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="26596" href="Demos.HSP.html#26100" class="Bound">ùë®</a> <a id="26598" href="Demos.HSP.html#19374" class="Function Operator">]</a> <a id="26600" href="Demos.HSP.html#6656" class="Record Operator">‚ü∂</a> <a id="26602" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="26605" href="Demos.HSP.html#26118" class="Bound">ùë©</a> <a id="26607" href="Demos.HSP.html#19374" class="Function Operator">]</a><a id="26608" class="Symbol">)</a> <a id="26610" class="Symbol">:</a> <a id="26612" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="26617" class="Symbol">(</a><a id="26618" href="Demos.HSP.html#5474" class="Bound">ùìû</a> <a id="26620" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="26622" href="Demos.HSP.html#5476" class="Bound">ùì•</a> <a id="26624" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="26626" href="Demos.HSP.html#26112" class="Bound">Œ±</a> <a id="26628" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="26630" href="Demos.HSP.html#26132" class="Bound">œÅ·µá</a><a id="26632" class="Symbol">)</a> <a id="26634" class="Keyword">where</a>
  <a id="26642" class="Keyword">constructor</a>  <a id="26655" href="Demos.HSP.html#26655" class="InductiveConstructor">mkhom</a>
  <a id="26663" class="Keyword">field</a>        <a id="26676" href="Demos.HSP.html#26676" class="Field">compatible</a> <a id="26687" class="Symbol">:</a> <a id="26689" href="Demos.HSP.html#26319" class="Function">compatible-map</a> <a id="26704" href="Demos.HSP.html#26589" class="Bound">h</a>

 <a id="26708" href="Demos.HSP.html#26708" class="Function">hom</a> <a id="26712" class="Symbol">:</a> <a id="26714" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="26719" class="Symbol">_</a>
 <a id="26722" href="Demos.HSP.html#26708" class="Function">hom</a> <a id="26726" class="Symbol">=</a> <a id="26728" href="Agda.Builtin.Sigma.html#166" class="Record">Œ£</a> <a id="26730" class="Symbol">(</a><a id="26731" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a>¬†<a id="26734" href="Demos.HSP.html#26100" class="Bound">ùë®</a> <a id="26736" href="Demos.HSP.html#19374" class="Function Operator">]</a> <a id="26738" href="Demos.HSP.html#6656" class="Record Operator">‚ü∂</a> <a id="26740" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="26743" href="Demos.HSP.html#26118" class="Bound">ùë©</a> <a id="26745" href="Demos.HSP.html#19374" class="Function Operator">]</a><a id="26746" class="Symbol">)</a> <a id="26748" href="Demos.HSP.html#26582" class="Record">IsHom</a>

</pre>

Thus, an inhabitant of `hom ùë® ùë©` is a pair `(h , p)` consisting of a setoid function
`h`, from the domain of `ùë®` to that of `ùë©`, along with a proof `p` that `h` is a homomorphism.

A *monomorphism* (resp. *epimorphism*) is an injective (resp. surjective) homomorphism. The [agda-algebras][] 
library defines predicates and for these, as well as and for the corresponding types.

<pre class="Agda">

 <a id="27161" class="Keyword">record</a> <a id="27168" href="Demos.HSP.html#27168" class="Record">IsMon</a> <a id="27174" class="Symbol">(</a><a id="27175" href="Demos.HSP.html#27175" class="Bound">h</a> <a id="27177" class="Symbol">:</a> <a id="27179" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="27182" href="Demos.HSP.html#26100" class="Bound">ùë®</a> <a id="27184" href="Demos.HSP.html#19374" class="Function Operator">]</a> <a id="27186" href="Demos.HSP.html#6656" class="Record Operator">‚ü∂</a> <a id="27188" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="27191" href="Demos.HSP.html#26118" class="Bound">ùë©</a> <a id="27193" href="Demos.HSP.html#19374" class="Function Operator">]</a><a id="27194" class="Symbol">)</a> <a id="27196" class="Symbol">:</a> <a id="27198" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="27203" class="Symbol">(</a><a id="27204" href="Demos.HSP.html#5474" class="Bound">ùìû</a> <a id="27206" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="27208" href="Demos.HSP.html#5476" class="Bound">ùì•</a> <a id="27210" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="27212" href="Demos.HSP.html#26112" class="Bound">Œ±</a> <a id="27214" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="27216" href="Demos.HSP.html#26114" class="Bound">œÅ·µÉ</a> <a id="27219" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="27221" href="Demos.HSP.html#26132" class="Bound">œÅ·µá</a><a id="27223" class="Symbol">)</a> <a id="27225" class="Keyword">where</a>
  <a id="27233" class="Keyword">field</a>  <a id="27240" href="Demos.HSP.html#27240" class="Field">isHom</a> <a id="27246" class="Symbol">:</a> <a id="27248" href="Demos.HSP.html#26582" class="Record">IsHom</a> <a id="27254" href="Demos.HSP.html#27175" class="Bound">h</a>
         <a id="27265" href="Demos.HSP.html#27265" class="Field">isInjective</a> <a id="27277" class="Symbol">:</a> <a id="27279" href="Demos.HSP.html#12462" class="Function">IsInjective</a> <a id="27291" href="Demos.HSP.html#27175" class="Bound">h</a>
  <a id="27295" href="Demos.HSP.html#27295" class="Function">HomReduct</a> <a id="27305" class="Symbol">:</a> <a id="27307" href="Demos.HSP.html#26708" class="Function">hom</a>
  <a id="27313" href="Demos.HSP.html#27295" class="Function">HomReduct</a> <a id="27323" class="Symbol">=</a> <a id="27325" href="Demos.HSP.html#27175" class="Bound">h</a> <a id="27327" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="27329" href="Demos.HSP.html#27240" class="Field">isHom</a>

 <a id="27337" href="Demos.HSP.html#27337" class="Function">mon</a> <a id="27341" class="Symbol">:</a> <a id="27343" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="27348" class="Symbol">_</a>
 <a id="27351" href="Demos.HSP.html#27337" class="Function">mon</a> <a id="27355" class="Symbol">=</a> <a id="27357" href="Agda.Builtin.Sigma.html#166" class="Record">Œ£</a> <a id="27359" class="Symbol">(</a><a id="27360" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="27363" href="Demos.HSP.html#26100" class="Bound">ùë®</a> <a id="27365" href="Demos.HSP.html#19374" class="Function Operator">]</a> <a id="27367" href="Demos.HSP.html#6656" class="Record Operator">‚ü∂</a> <a id="27369" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="27372" href="Demos.HSP.html#26118" class="Bound">ùë©</a> <a id="27374" href="Demos.HSP.html#19374" class="Function Operator">]</a><a id="27375" class="Symbol">)</a> <a id="27377" href="Demos.HSP.html#27168" class="Record">IsMon</a>

</pre>

As with `hom`, the type `mon` is a dependent product type; each inhabitant is a pair
consisting of a setoid function, say, `h`, along with a proof that `h` is a monomorphism.

<pre class="Agda">

 <a id="27587" class="Keyword">record</a> <a id="27594" href="Demos.HSP.html#27594" class="Record">IsEpi</a> <a id="27600" class="Symbol">(</a><a id="27601" href="Demos.HSP.html#27601" class="Bound">h</a> <a id="27603" class="Symbol">:</a> <a id="27605" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="27608" href="Demos.HSP.html#26100" class="Bound">ùë®</a> <a id="27610" href="Demos.HSP.html#19374" class="Function Operator">]</a> <a id="27612" href="Demos.HSP.html#6656" class="Record Operator">‚ü∂</a> <a id="27614" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="27617" href="Demos.HSP.html#26118" class="Bound">ùë©</a> <a id="27619" href="Demos.HSP.html#19374" class="Function Operator">]</a><a id="27620" class="Symbol">)</a> <a id="27622" class="Symbol">:</a> <a id="27624" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="27629" class="Symbol">(</a><a id="27630" href="Demos.HSP.html#5474" class="Bound">ùìû</a> <a id="27632" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="27634" href="Demos.HSP.html#5476" class="Bound">ùì•</a> <a id="27636" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="27638" href="Demos.HSP.html#26112" class="Bound">Œ±</a> <a id="27640" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="27642" href="Demos.HSP.html#26130" class="Bound">Œ≤</a> <a id="27644" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="27646" href="Demos.HSP.html#26132" class="Bound">œÅ·µá</a><a id="27648" class="Symbol">)</a> <a id="27650" class="Keyword">where</a>
  <a id="27658" class="Keyword">field</a>  <a id="27665" href="Demos.HSP.html#27665" class="Field">isHom</a> <a id="27671" class="Symbol">:</a> <a id="27673" href="Demos.HSP.html#26582" class="Record">IsHom</a> <a id="27679" href="Demos.HSP.html#27601" class="Bound">h</a>
         <a id="27690" href="Demos.HSP.html#27690" class="Field">isSurjective</a> <a id="27703" class="Symbol">:</a> <a id="27705" href="Demos.HSP.html#12545" class="Function">IsSurjective</a> <a id="27718" href="Demos.HSP.html#27601" class="Bound">h</a>
  <a id="27722" href="Demos.HSP.html#27722" class="Function">HomReduct</a> <a id="27732" class="Symbol">:</a> <a id="27734" href="Demos.HSP.html#26708" class="Function">hom</a>
  <a id="27740" href="Demos.HSP.html#27722" class="Function">HomReduct</a> <a id="27750" class="Symbol">=</a> <a id="27752" href="Demos.HSP.html#27601" class="Bound">h</a> <a id="27754" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="27756" href="Demos.HSP.html#27665" class="Field">isHom</a>

 <a id="27764" href="Demos.HSP.html#27764" class="Function">epi</a> <a id="27768" class="Symbol">:</a> <a id="27770" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="27775" class="Symbol">_</a>
 <a id="27778" href="Demos.HSP.html#27764" class="Function">epi</a> <a id="27782" class="Symbol">=</a> <a id="27784" href="Agda.Builtin.Sigma.html#166" class="Record">Œ£</a> <a id="27786" class="Symbol">(</a><a id="27787" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="27790" href="Demos.HSP.html#26100" class="Bound">ùë®</a> <a id="27792" href="Demos.HSP.html#19374" class="Function Operator">]</a> <a id="27794" href="Demos.HSP.html#6656" class="Record Operator">‚ü∂</a> <a id="27796" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="27799" href="Demos.HSP.html#26118" class="Bound">ùë©</a> <a id="27801" href="Demos.HSP.html#19374" class="Function Operator">]</a><a id="27802" class="Symbol">)</a> <a id="27804" href="Demos.HSP.html#27594" class="Record">IsEpi</a>

</pre>

Here are two utilities that are useful for translating between types.

<pre class="Agda">

<a id="27908" class="Keyword">open</a> <a id="27913" href="Demos.HSP.html#26582" class="Module">IsHom</a> <a id="27919" class="Symbol">;</a> <a id="27921" class="Keyword">open</a> <a id="27926" href="Demos.HSP.html#27168" class="Module">IsMon</a> <a id="27932" class="Symbol">;</a> <a id="27934" class="Keyword">open</a> <a id="27939" href="Demos.HSP.html#27594" class="Module">IsEpi</a>
<a id="27945" class="Keyword">module</a> <a id="27952" href="Demos.HSP.html#27952" class="Module">_</a> <a id="27954" class="Symbol">(</a><a id="27955" href="Demos.HSP.html#27955" class="Bound">ùë®</a> <a id="27957" class="Symbol">:</a> <a id="27959" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="27967" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="27969" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a><a id="27971" class="Symbol">)(</a><a id="27973" href="Demos.HSP.html#27973" class="Bound">ùë©</a> <a id="27975" class="Symbol">:</a> <a id="27977" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="27985" href="Demos.HSP.html#7595" class="Generalizable">Œ≤</a> <a id="27987" href="Demos.HSP.html#7597" class="Generalizable">œÅ·µá</a><a id="27989" class="Symbol">)</a> <a id="27991" class="Keyword">where</a>
 <a id="27998" href="Demos.HSP.html#27998" class="Function">mon‚Üíintohom</a> <a id="28010" class="Symbol">:</a> <a id="28012" href="Demos.HSP.html#27337" class="Function">mon</a> <a id="28016" href="Demos.HSP.html#27955" class="Bound">ùë®</a> <a id="28018" href="Demos.HSP.html#27973" class="Bound">ùë©</a> <a id="28020" class="Symbol">‚Üí</a> <a id="28022" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="28025" href="Demos.HSP.html#28025" class="Bound">h</a> <a id="28027" href="Data.Product.html#916" class="Function">‚àà</a> <a id="28029" href="Demos.HSP.html#26708" class="Function">hom</a> <a id="28033" href="Demos.HSP.html#27955" class="Bound">ùë®</a> <a id="28035" href="Demos.HSP.html#27973" class="Bound">ùë©</a> <a id="28037" href="Data.Product.html#916" class="Function">]</a> <a id="28039" href="Demos.HSP.html#12462" class="Function">IsInjective</a> <a id="28051" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="28053" href="Demos.HSP.html#28025" class="Bound">h</a> <a id="28055" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a>
 <a id="28058" href="Demos.HSP.html#27998" class="Function">mon‚Üíintohom</a> <a id="28070" class="Symbol">(</a><a id="28071" href="Demos.HSP.html#28071" class="Bound">hh</a> <a id="28074" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="28076" href="Demos.HSP.html#28076" class="Bound">hhM</a><a id="28079" class="Symbol">)</a> <a id="28081" class="Symbol">=</a> <a id="28083" class="Symbol">(</a><a id="28084" href="Demos.HSP.html#28071" class="Bound">hh</a> <a id="28087" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="28089" href="Demos.HSP.html#27240" class="Field">isHom</a> <a id="28095" href="Demos.HSP.html#28076" class="Bound">hhM</a><a id="28098" class="Symbol">)</a> <a id="28100" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="28102" href="Demos.HSP.html#27265" class="Field">isInjective</a> <a id="28114" href="Demos.HSP.html#28076" class="Bound">hhM</a>

 <a id="28120" href="Demos.HSP.html#28120" class="Function">epi‚Üíontohom</a> <a id="28132" class="Symbol">:</a> <a id="28134" href="Demos.HSP.html#27764" class="Function">epi</a> <a id="28138" href="Demos.HSP.html#27955" class="Bound">ùë®</a> <a id="28140" href="Demos.HSP.html#27973" class="Bound">ùë©</a> <a id="28142" class="Symbol">‚Üí</a> <a id="28144" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="28147" href="Demos.HSP.html#28147" class="Bound">h</a> <a id="28149" href="Data.Product.html#916" class="Function">‚àà</a> <a id="28151" href="Demos.HSP.html#26708" class="Function">hom</a> <a id="28155" href="Demos.HSP.html#27955" class="Bound">ùë®</a> <a id="28157" href="Demos.HSP.html#27973" class="Bound">ùë©</a> <a id="28159" href="Data.Product.html#916" class="Function">]</a> <a id="28161" href="Demos.HSP.html#12545" class="Function">IsSurjective</a> <a id="28174" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="28176" href="Demos.HSP.html#28147" class="Bound">h</a> <a id="28178" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a>
 <a id="28181" href="Demos.HSP.html#28120" class="Function">epi‚Üíontohom</a> <a id="28193" class="Symbol">(</a><a id="28194" href="Demos.HSP.html#28194" class="Bound">hh</a> <a id="28197" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="28199" href="Demos.HSP.html#28199" class="Bound">hhE</a><a id="28202" class="Symbol">)</a> <a id="28204" class="Symbol">=</a> <a id="28206" class="Symbol">(</a><a id="28207" href="Demos.HSP.html#28194" class="Bound">hh</a> <a id="28210" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="28212" href="Demos.HSP.html#27665" class="Field">isHom</a> <a id="28218" href="Demos.HSP.html#28199" class="Bound">hhE</a><a id="28221" class="Symbol">)</a> <a id="28223" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="28225" href="Demos.HSP.html#27690" class="Field">isSurjective</a> <a id="28238" href="Demos.HSP.html#28199" class="Bound">hhE</a>
</pre>

#### <a id="composition-of-homomorphisms">Composition of homomorphisms</a>

The composition of homomorphisms is again a homomorphism, and similarly
for epimorphisms and monomorphisms. The proofs of these facts are
straightforward.

<pre class="Agda">

<a id="28500" class="Keyword">module</a> <a id="28507" href="Demos.HSP.html#28507" class="Module">_</a>  <a id="28510" class="Symbol">{</a><a id="28511" href="Demos.HSP.html#28511" class="Bound">ùë®</a> <a id="28513" class="Symbol">:</a> <a id="28515" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="28523" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="28525" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a><a id="28527" class="Symbol">}</a> <a id="28529" class="Symbol">{</a><a id="28530" href="Demos.HSP.html#28530" class="Bound">ùë©</a> <a id="28532" class="Symbol">:</a> <a id="28534" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="28542" href="Demos.HSP.html#7595" class="Generalizable">Œ≤</a> <a id="28544" href="Demos.HSP.html#7597" class="Generalizable">œÅ·µá</a><a id="28546" class="Symbol">}</a> <a id="28548" class="Symbol">{</a><a id="28549" href="Demos.HSP.html#28549" class="Bound">ùë™</a> <a id="28551" class="Symbol">:</a> <a id="28553" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="28561" href="Demos.HSP.html#7600" class="Generalizable">Œ≥</a> <a id="28563" href="Demos.HSP.html#7602" class="Generalizable">œÅ·∂ú</a><a id="28565" class="Symbol">}</a>
          <a id="28577" class="Symbol">{</a><a id="28578" href="Demos.HSP.html#28578" class="Bound">g</a> <a id="28580" class="Symbol">:</a> <a id="28582" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="28585" href="Demos.HSP.html#28511" class="Bound">ùë®</a> <a id="28587" href="Demos.HSP.html#19374" class="Function Operator">]</a> <a id="28589" href="Demos.HSP.html#6656" class="Record Operator">‚ü∂</a> <a id="28591" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="28594" href="Demos.HSP.html#28530" class="Bound">ùë©</a> <a id="28596" href="Demos.HSP.html#19374" class="Function Operator">]</a><a id="28597" class="Symbol">}{</a><a id="28599" href="Demos.HSP.html#28599" class="Bound">h</a> <a id="28601" class="Symbol">:</a> <a id="28603" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="28606" href="Demos.HSP.html#28530" class="Bound">ùë©</a> <a id="28608" href="Demos.HSP.html#19374" class="Function Operator">]</a> <a id="28610" href="Demos.HSP.html#6656" class="Record Operator">‚ü∂</a> <a id="28612" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="28615" href="Demos.HSP.html#28549" class="Bound">ùë™</a> <a id="28617" href="Demos.HSP.html#19374" class="Function Operator">]</a><a id="28618" class="Symbol">}</a> <a id="28620" class="Keyword">where</a>
  <a id="28628" class="Keyword">open</a> <a id="28633" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="28640" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="28643" href="Demos.HSP.html#28549" class="Bound">ùë™</a> <a id="28645" href="Demos.HSP.html#19374" class="Function Operator">]</a> <a id="28647" class="Keyword">using</a> <a id="28653" class="Symbol">(</a> <a id="28655" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="28661" class="Symbol">)</a>
  <a id="28665" href="Demos.HSP.html#28665" class="Function">‚àò-is-hom</a> <a id="28674" class="Symbol">:</a> <a id="28676" href="Demos.HSP.html#26582" class="Record">IsHom</a> <a id="28682" href="Demos.HSP.html#28511" class="Bound">ùë®</a> <a id="28684" href="Demos.HSP.html#28530" class="Bound">ùë©</a> <a id="28686" href="Demos.HSP.html#28578" class="Bound">g</a> <a id="28688" class="Symbol">‚Üí</a> <a id="28690" href="Demos.HSP.html#26582" class="Record">IsHom</a> <a id="28696" href="Demos.HSP.html#28530" class="Bound">ùë©</a> <a id="28698" href="Demos.HSP.html#28549" class="Bound">ùë™</a> <a id="28700" href="Demos.HSP.html#28599" class="Bound">h</a> <a id="28702" class="Symbol">‚Üí</a> <a id="28704" href="Demos.HSP.html#26582" class="Record">IsHom</a> <a id="28710" href="Demos.HSP.html#28511" class="Bound">ùë®</a> <a id="28712" href="Demos.HSP.html#28549" class="Bound">ùë™</a> <a id="28714" class="Symbol">(</a><a id="28715" href="Demos.HSP.html#28599" class="Bound">h</a> <a id="28717" href="Demos.HSP.html#10239" class="Function Operator">‚ü®‚àò‚ü©</a> <a id="28721" href="Demos.HSP.html#28578" class="Bound">g</a><a id="28722" class="Symbol">)</a>
  <a id="28726" href="Demos.HSP.html#28665" class="Function">‚àò-is-hom</a> <a id="28735" href="Demos.HSP.html#28735" class="Bound">ghom</a> <a id="28740" href="Demos.HSP.html#28740" class="Bound">hhom</a> <a id="28745" class="Symbol">=</a> <a id="28747" href="Demos.HSP.html#26655" class="InductiveConstructor">mkhom</a> <a id="28753" href="Demos.HSP.html#28764" class="Function">c</a> <a id="28755" class="Keyword">where</a>
   <a id="28764" href="Demos.HSP.html#28764" class="Function">c</a> <a id="28766" class="Symbol">:</a> <a id="28768" href="Demos.HSP.html#26319" class="Function">compatible-map</a> <a id="28783" href="Demos.HSP.html#28511" class="Bound">ùë®</a> <a id="28785" href="Demos.HSP.html#28549" class="Bound">ùë™</a> <a id="28787" class="Symbol">(</a><a id="28788" href="Demos.HSP.html#28599" class="Bound">h</a> <a id="28790" href="Demos.HSP.html#10239" class="Function Operator">‚ü®‚àò‚ü©</a> <a id="28794" href="Demos.HSP.html#28578" class="Bound">g</a><a id="28795" class="Symbol">)</a>
   <a id="28800" href="Demos.HSP.html#28764" class="Function">c</a> <a id="28802" class="Symbol">=</a> <a id="28804" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="28810" class="Symbol">(</a><a id="28811" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="28816" href="Demos.HSP.html#28599" class="Bound">h</a> <a id="28818" class="Symbol">(</a><a id="28819" href="Demos.HSP.html#26676" class="Field">compatible</a> <a id="28830" href="Demos.HSP.html#28735" class="Bound">ghom</a><a id="28834" class="Symbol">))</a> <a id="28837" class="Symbol">(</a><a id="28838" href="Demos.HSP.html#26676" class="Field">compatible</a> <a id="28849" href="Demos.HSP.html#28740" class="Bound">hhom</a><a id="28853" class="Symbol">)</a>

  <a id="28858" href="Demos.HSP.html#28858" class="Function">‚àò-is-epi</a> <a id="28867" class="Symbol">:</a> <a id="28869" href="Demos.HSP.html#27594" class="Record">IsEpi</a> <a id="28875" href="Demos.HSP.html#28511" class="Bound">ùë®</a> <a id="28877" href="Demos.HSP.html#28530" class="Bound">ùë©</a> <a id="28879" href="Demos.HSP.html#28578" class="Bound">g</a> <a id="28881" class="Symbol">‚Üí</a> <a id="28883" href="Demos.HSP.html#27594" class="Record">IsEpi</a> <a id="28889" href="Demos.HSP.html#28530" class="Bound">ùë©</a> <a id="28891" href="Demos.HSP.html#28549" class="Bound">ùë™</a> <a id="28893" href="Demos.HSP.html#28599" class="Bound">h</a> <a id="28895" class="Symbol">‚Üí</a> <a id="28897" href="Demos.HSP.html#27594" class="Record">IsEpi</a> <a id="28903" href="Demos.HSP.html#28511" class="Bound">ùë®</a> <a id="28905" href="Demos.HSP.html#28549" class="Bound">ùë™</a> <a id="28907" class="Symbol">(</a><a id="28908" href="Demos.HSP.html#28599" class="Bound">h</a> <a id="28910" href="Demos.HSP.html#10239" class="Function Operator">‚ü®‚àò‚ü©</a> <a id="28914" href="Demos.HSP.html#28578" class="Bound">g</a><a id="28915" class="Symbol">)</a>
  <a id="28919" href="Demos.HSP.html#28858" class="Function">‚àò-is-epi</a> <a id="28928" href="Demos.HSP.html#28928" class="Bound">gE</a> <a id="28931" href="Demos.HSP.html#28931" class="Bound">hE</a> <a id="28934" class="Symbol">=</a> <a id="28936" class="Keyword">record</a>  <a id="28944" class="Symbol">{</a> <a id="28946" href="Demos.HSP.html#27665" class="Field">isHom</a> <a id="28952" class="Symbol">=</a> <a id="28954" href="Demos.HSP.html#28665" class="Function">‚àò-is-hom</a> <a id="28963" class="Symbol">(</a><a id="28964" href="Demos.HSP.html#27665" class="Field">isHom</a> <a id="28970" href="Demos.HSP.html#28928" class="Bound">gE</a><a id="28972" class="Symbol">)</a> <a id="28974" class="Symbol">(</a><a id="28975" href="Demos.HSP.html#27665" class="Field">isHom</a> <a id="28981" href="Demos.HSP.html#28931" class="Bound">hE</a><a id="28983" class="Symbol">)</a>
                           <a id="29012" class="Symbol">;</a> <a id="29014" href="Demos.HSP.html#27690" class="Field">isSurjective</a> <a id="29027" class="Symbol">=</a> <a id="29029" href="Demos.HSP.html#13214" class="Function">‚àò-IsSurjective</a> <a id="29044" href="Demos.HSP.html#28578" class="Bound">g</a> <a id="29046" href="Demos.HSP.html#28599" class="Bound">h</a> <a id="29048" class="Symbol">(</a><a id="29049" href="Demos.HSP.html#27690" class="Field">isSurjective</a> <a id="29062" href="Demos.HSP.html#28928" class="Bound">gE</a><a id="29064" class="Symbol">)</a> <a id="29066" class="Symbol">(</a><a id="29067" href="Demos.HSP.html#27690" class="Field">isSurjective</a> <a id="29080" href="Demos.HSP.html#28931" class="Bound">hE</a><a id="29082" class="Symbol">)</a> <a id="29084" class="Symbol">}</a>

<a id="29087" class="Keyword">module</a> <a id="29094" href="Demos.HSP.html#29094" class="Module">_</a> <a id="29096" class="Symbol">{</a><a id="29097" href="Demos.HSP.html#29097" class="Bound">ùë®</a> <a id="29099" class="Symbol">:</a> <a id="29101" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="29109" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="29111" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a><a id="29113" class="Symbol">}</a> <a id="29115" class="Symbol">{</a><a id="29116" href="Demos.HSP.html#29116" class="Bound">ùë©</a> <a id="29118" class="Symbol">:</a> <a id="29120" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="29128" href="Demos.HSP.html#7595" class="Generalizable">Œ≤</a> <a id="29130" href="Demos.HSP.html#7597" class="Generalizable">œÅ·µá</a><a id="29132" class="Symbol">}</a> <a id="29134" class="Symbol">{</a><a id="29135" href="Demos.HSP.html#29135" class="Bound">ùë™</a> <a id="29137" class="Symbol">:</a> <a id="29139" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="29147" href="Demos.HSP.html#7600" class="Generalizable">Œ≥</a> <a id="29149" href="Demos.HSP.html#7602" class="Generalizable">œÅ·∂ú</a><a id="29151" class="Symbol">}</a> <a id="29153" class="Keyword">where</a>
  <a id="29161" href="Demos.HSP.html#29161" class="Function">‚àò-hom</a> <a id="29167" class="Symbol">:</a> <a id="29169" href="Demos.HSP.html#26708" class="Function">hom</a> <a id="29173" href="Demos.HSP.html#29097" class="Bound">ùë®</a> <a id="29175" href="Demos.HSP.html#29116" class="Bound">ùë©</a> <a id="29177" class="Symbol">‚Üí</a> <a id="29179" href="Demos.HSP.html#26708" class="Function">hom</a> <a id="29183" href="Demos.HSP.html#29116" class="Bound">ùë©</a> <a id="29185" href="Demos.HSP.html#29135" class="Bound">ùë™</a>  <a id="29188" class="Symbol">‚Üí</a> <a id="29190" href="Demos.HSP.html#26708" class="Function">hom</a> <a id="29194" href="Demos.HSP.html#29097" class="Bound">ùë®</a> <a id="29196" href="Demos.HSP.html#29135" class="Bound">ùë™</a>
  <a id="29200" href="Demos.HSP.html#29161" class="Function">‚àò-hom</a> <a id="29206" class="Symbol">(</a><a id="29207" href="Demos.HSP.html#29207" class="Bound">h</a> <a id="29209" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="29211" href="Demos.HSP.html#29211" class="Bound">hhom</a><a id="29215" class="Symbol">)</a> <a id="29217" class="Symbol">(</a><a id="29218" href="Demos.HSP.html#29218" class="Bound">g</a> <a id="29220" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="29222" href="Demos.HSP.html#29222" class="Bound">ghom</a><a id="29226" class="Symbol">)</a> <a id="29228" class="Symbol">=</a> <a id="29230" class="Symbol">(</a><a id="29231" href="Demos.HSP.html#29218" class="Bound">g</a> <a id="29233" href="Demos.HSP.html#10239" class="Function Operator">‚ü®‚àò‚ü©</a> <a id="29237" href="Demos.HSP.html#29207" class="Bound">h</a><a id="29238" class="Symbol">)</a> <a id="29240" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="29242" href="Demos.HSP.html#28665" class="Function">‚àò-is-hom</a> <a id="29251" href="Demos.HSP.html#29211" class="Bound">hhom</a> <a id="29256" href="Demos.HSP.html#29222" class="Bound">ghom</a>

  <a id="29264" href="Demos.HSP.html#29264" class="Function">‚àò-epi</a> <a id="29270" class="Symbol">:</a> <a id="29272" href="Demos.HSP.html#27764" class="Function">epi</a> <a id="29276" href="Demos.HSP.html#29097" class="Bound">ùë®</a> <a id="29278" href="Demos.HSP.html#29116" class="Bound">ùë©</a> <a id="29280" class="Symbol">‚Üí</a> <a id="29282" href="Demos.HSP.html#27764" class="Function">epi</a> <a id="29286" href="Demos.HSP.html#29116" class="Bound">ùë©</a> <a id="29288" href="Demos.HSP.html#29135" class="Bound">ùë™</a>  <a id="29291" class="Symbol">‚Üí</a> <a id="29293" href="Demos.HSP.html#27764" class="Function">epi</a> <a id="29297" href="Demos.HSP.html#29097" class="Bound">ùë®</a> <a id="29299" href="Demos.HSP.html#29135" class="Bound">ùë™</a>
  <a id="29303" href="Demos.HSP.html#29264" class="Function">‚àò-epi</a> <a id="29309" class="Symbol">(</a><a id="29310" href="Demos.HSP.html#29310" class="Bound">h</a> <a id="29312" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="29314" href="Demos.HSP.html#29314" class="Bound">hepi</a><a id="29318" class="Symbol">)</a> <a id="29320" class="Symbol">(</a><a id="29321" href="Demos.HSP.html#29321" class="Bound">g</a> <a id="29323" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="29325" href="Demos.HSP.html#29325" class="Bound">gepi</a><a id="29329" class="Symbol">)</a> <a id="29331" class="Symbol">=</a> <a id="29333" class="Symbol">(</a><a id="29334" href="Demos.HSP.html#29321" class="Bound">g</a> <a id="29336" href="Demos.HSP.html#10239" class="Function Operator">‚ü®‚àò‚ü©</a> <a id="29340" href="Demos.HSP.html#29310" class="Bound">h</a><a id="29341" class="Symbol">)</a> <a id="29343" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="29345" href="Demos.HSP.html#28858" class="Function">‚àò-is-epi</a> <a id="29354" href="Demos.HSP.html#29314" class="Bound">hepi</a> <a id="29359" href="Demos.HSP.html#29325" class="Bound">gepi</a>
</pre>

#### <a id="universe-lifting-of-homomorphisms">Universe lifting of homomorphisms</a>

Here we define the identity homomorphism for setoid algebras. Then we prove that the operations of lifting and lowering of a setoid algebra are homomorphisms.

<pre class="Agda">

<a id="ùíæùíπ"></a><a id="29636" href="Demos.HSP.html#29636" class="Function">ùíæùíπ</a> <a id="29639" class="Symbol">:</a> <a id="29641" class="Symbol">{</a><a id="29642" href="Demos.HSP.html#29642" class="Bound">ùë®</a> <a id="29644" class="Symbol">:</a> <a id="29646" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="29654" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="29656" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a><a id="29658" class="Symbol">}</a> <a id="29660" class="Symbol">‚Üí</a> <a id="29662" href="Demos.HSP.html#26708" class="Function">hom</a> <a id="29666" href="Demos.HSP.html#29642" class="Bound">ùë®</a> <a id="29668" href="Demos.HSP.html#29642" class="Bound">ùë®</a>
<a id="29670" href="Demos.HSP.html#29636" class="Function">ùíæùíπ</a> <a id="29673" class="Symbol">{</a><a id="29674" class="Argument">ùë®</a> <a id="29676" class="Symbol">=</a> <a id="29678" href="Demos.HSP.html#29678" class="Bound">ùë®</a><a id="29679" class="Symbol">}</a> <a id="29681" class="Symbol">=</a> <a id="29683" href="Demos.HSP.html#10168" class="Function">ùëñùëë</a> <a id="29686" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="29688" href="Demos.HSP.html#26655" class="InductiveConstructor">mkhom</a> <a id="29694" class="Symbol">(</a><a id="29695" href="Relation.Binary.Structures.html#1646" class="Function">reflexive</a> <a id="29705" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a><a id="29711" class="Symbol">)</a> <a id="29713" class="Keyword">where</a> <a id="29719" class="Keyword">open</a> <a id="29724" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="29731" class="Symbol">(</a> <a id="29733" href="Demos.HSP.html#18785" class="Field">Domain</a> <a id="29740" href="Demos.HSP.html#29678" class="Bound">ùë®</a> <a id="29742" class="Symbol">)</a> <a id="29744" class="Keyword">using</a> <a id="29750" class="Symbol">(</a> <a id="29752" href="Relation.Binary.Structures.html#1646" class="Function">reflexive</a> <a id="29762" class="Symbol">)</a>

<a id="29765" class="Keyword">module</a> <a id="29772" href="Demos.HSP.html#29772" class="Module">_</a> <a id="29774" class="Symbol">{</a><a id="29775" href="Demos.HSP.html#29775" class="Bound">ùë®</a> <a id="29777" class="Symbol">:</a> <a id="29779" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="29787" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="29789" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a><a id="29791" class="Symbol">}{</a><a id="29793" href="Demos.HSP.html#29793" class="Bound">‚Ñì</a> <a id="29795" class="Symbol">:</a> <a id="29797" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="29802" class="Symbol">}</a> <a id="29804" class="Keyword">where</a>
 <a id="29811" class="Keyword">open</a> <a id="29816" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="29823" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="29826" href="Demos.HSP.html#29775" class="Bound">ùë®</a> <a id="29828" href="Demos.HSP.html#19374" class="Function Operator">]</a>              <a id="29843" class="Keyword">using</a> <a id="29849" class="Symbol">(</a> <a id="29851" href="Relation.Binary.Structures.html#1646" class="Function">reflexive</a> <a id="29861" class="Symbol">)</a>  <a id="29864" class="Keyword">renaming</a> <a id="29873" class="Symbol">(</a> <a id="29875" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="29879" class="Symbol">to</a> <a id="29882" class="Field Operator">_‚âà‚ÇÅ_</a> <a id="29887" class="Symbol">;</a> <a id="29889" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="29894" class="Symbol">to</a> <a id="29897" class="Function">refl‚ÇÅ</a> <a id="29903" class="Symbol">)</a>
 <a id="29906" class="Keyword">open</a> <a id="29911" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="29918" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="29921" href="Demos.HSP.html#21593" class="Function">Lift-AlgÀ°</a> <a id="29931" href="Demos.HSP.html#29775" class="Bound">ùë®</a> <a id="29933" href="Demos.HSP.html#29793" class="Bound">‚Ñì</a> <a id="29935" href="Demos.HSP.html#19374" class="Function Operator">]</a>  <a id="29938" class="Keyword">using</a> <a id="29944" class="Symbol">()</a>             <a id="29959" class="Keyword">renaming</a> <a id="29968" class="Symbol">(</a> <a id="29970" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="29974" class="Symbol">to</a> <a id="29977" class="Field Operator">_‚âàÀ°_</a> <a id="29982" class="Symbol">;</a> <a id="29984" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="29989" class="Symbol">to</a> <a id="29992" class="Function">reflÀ°</a><a id="29997" class="Symbol">)</a>
 <a id="30000" class="Keyword">open</a> <a id="30005" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="30012" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="30015" href="Demos.HSP.html#21988" class="Function">Lift-Alg ≥</a> <a id="30025" href="Demos.HSP.html#29775" class="Bound">ùë®</a> <a id="30027" href="Demos.HSP.html#29793" class="Bound">‚Ñì</a> <a id="30029" href="Demos.HSP.html#19374" class="Function Operator">]</a>  <a id="30032" class="Keyword">using</a> <a id="30038" class="Symbol">()</a>             <a id="30053" class="Keyword">renaming</a> <a id="30062" class="Symbol">(</a> <a id="30064" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="30068" class="Symbol">to</a> <a id="30071" class="Field Operator">_‚âà ≥_</a> <a id="30076" class="Symbol">;</a> <a id="30078" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="30083" class="Symbol">to</a> <a id="30086" class="Function">refl ≥</a><a id="30091" class="Symbol">)</a>
 <a id="30094" class="Keyword">open</a> <a id="30099" href="Level.html" class="Module">Level</a>

 <a id="30107" href="Demos.HSP.html#30107" class="Function">ToLiftÀ°</a> <a id="30115" class="Symbol">:</a> <a id="30117" href="Demos.HSP.html#26708" class="Function">hom</a> <a id="30121" href="Demos.HSP.html#29775" class="Bound">ùë®</a> <a id="30123" class="Symbol">(</a><a id="30124" href="Demos.HSP.html#21593" class="Function">Lift-AlgÀ°</a> <a id="30134" href="Demos.HSP.html#29775" class="Bound">ùë®</a> <a id="30136" href="Demos.HSP.html#29793" class="Bound">‚Ñì</a><a id="30137" class="Symbol">)</a>
 <a id="30140" href="Demos.HSP.html#30107" class="Function">ToLiftÀ°</a> <a id="30148" class="Symbol">=</a> <a id="30150" class="Keyword">record</a> <a id="30157" class="Symbol">{</a> <a id="30159" href="Function.Bundles.html#1919" class="Field">f</a> <a id="30161" class="Symbol">=</a> <a id="30163" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="30168" class="Symbol">;</a> <a id="30170" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="30175" class="Symbol">=</a> <a id="30177" href="Function.Base.html#615" class="Function">id</a> <a id="30180" class="Symbol">}</a> <a id="30182" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="30184" href="Demos.HSP.html#26655" class="InductiveConstructor">mkhom</a> <a id="30190" class="Symbol">(</a><a id="30191" href="Relation.Binary.Structures.html#1646" class="Function">reflexive</a> <a id="30201" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a><a id="30207" class="Symbol">)</a>

 <a id="30211" href="Demos.HSP.html#30211" class="Function">FromLiftÀ°</a> <a id="30221" class="Symbol">:</a> <a id="30223" href="Demos.HSP.html#26708" class="Function">hom</a> <a id="30227" class="Symbol">(</a><a id="30228" href="Demos.HSP.html#21593" class="Function">Lift-AlgÀ°</a> <a id="30238" href="Demos.HSP.html#29775" class="Bound">ùë®</a> <a id="30240" href="Demos.HSP.html#29793" class="Bound">‚Ñì</a><a id="30241" class="Symbol">)</a> <a id="30243" href="Demos.HSP.html#29775" class="Bound">ùë®</a>
 <a id="30246" href="Demos.HSP.html#30211" class="Function">FromLiftÀ°</a> <a id="30256" class="Symbol">=</a> <a id="30258" class="Keyword">record</a> <a id="30265" class="Symbol">{</a> <a id="30267" href="Function.Bundles.html#1919" class="Field">f</a> <a id="30269" class="Symbol">=</a> <a id="30271" href="Level.html#470" class="Field">lower</a> <a id="30277" class="Symbol">;</a> <a id="30279" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="30284" class="Symbol">=</a> <a id="30286" href="Function.Base.html#615" class="Function">id</a> <a id="30289" class="Symbol">}</a> <a id="30291" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="30293" href="Demos.HSP.html#26655" class="InductiveConstructor">mkhom</a> <a id="30299" href="Demos.HSP.html#29992" class="Function">reflÀ°</a>

 <a id="30307" href="Demos.HSP.html#30307" class="Function">ToFromLiftÀ°</a> <a id="30319" class="Symbol">:</a> <a id="30321" class="Symbol">‚àÄ</a> <a id="30323" href="Demos.HSP.html#30323" class="Bound">b</a> <a id="30325" class="Symbol">‚Üí</a>  <a id="30328" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="30330" href="Demos.HSP.html#30107" class="Function">ToLiftÀ°</a> <a id="30338" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="30340" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="30344" class="Symbol">(</a><a id="30345" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="30347" href="Demos.HSP.html#30211" class="Function">FromLiftÀ°</a> <a id="30357" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="30359" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="30363" href="Demos.HSP.html#30323" class="Bound">b</a><a id="30364" class="Symbol">)</a> <a id="30366" href="Demos.HSP.html#29977" class="Function Operator">‚âàÀ°</a> <a id="30369" href="Demos.HSP.html#30323" class="Bound">b</a>
 <a id="30372" href="Demos.HSP.html#30307" class="Function">ToFromLiftÀ°</a> <a id="30384" href="Demos.HSP.html#30384" class="Bound">b</a> <a id="30386" class="Symbol">=</a> <a id="30388" href="Demos.HSP.html#29897" class="Function">refl‚ÇÅ</a>

 <a id="30396" href="Demos.HSP.html#30396" class="Function">FromToLiftÀ°</a> <a id="30408" class="Symbol">:</a> <a id="30410" class="Symbol">‚àÄ</a> <a id="30412" href="Demos.HSP.html#30412" class="Bound">a</a> <a id="30414" class="Symbol">‚Üí</a> <a id="30416" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="30418" href="Demos.HSP.html#30211" class="Function">FromLiftÀ°</a> <a id="30428" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="30430" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="30434" class="Symbol">(</a><a id="30435" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="30437" href="Demos.HSP.html#30107" class="Function">ToLiftÀ°</a> <a id="30445" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="30447" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="30451" href="Demos.HSP.html#30412" class="Bound">a</a><a id="30452" class="Symbol">)</a> <a id="30454" href="Demos.HSP.html#29882" class="Function Operator">‚âà‚ÇÅ</a> <a id="30457" href="Demos.HSP.html#30412" class="Bound">a</a>
 <a id="30460" href="Demos.HSP.html#30396" class="Function">FromToLiftÀ°</a> <a id="30472" href="Demos.HSP.html#30472" class="Bound">a</a> <a id="30474" class="Symbol">=</a> <a id="30476" href="Demos.HSP.html#29897" class="Function">refl‚ÇÅ</a>

 <a id="30484" href="Demos.HSP.html#30484" class="Function">ToLift ≥</a> <a id="30492" class="Symbol">:</a> <a id="30494" href="Demos.HSP.html#26708" class="Function">hom</a> <a id="30498" href="Demos.HSP.html#29775" class="Bound">ùë®</a> <a id="30500" class="Symbol">(</a><a id="30501" href="Demos.HSP.html#21988" class="Function">Lift-Alg ≥</a> <a id="30511" href="Demos.HSP.html#29775" class="Bound">ùë®</a> <a id="30513" href="Demos.HSP.html#29793" class="Bound">‚Ñì</a><a id="30514" class="Symbol">)</a>
 <a id="30517" href="Demos.HSP.html#30484" class="Function">ToLift ≥</a> <a id="30525" class="Symbol">=</a> <a id="30527" class="Keyword">record</a> <a id="30534" class="Symbol">{</a> <a id="30536" href="Function.Bundles.html#1919" class="Field">f</a> <a id="30538" class="Symbol">=</a> <a id="30540" href="Function.Base.html#615" class="Function">id</a> <a id="30543" class="Symbol">;</a> <a id="30545" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="30550" class="Symbol">=</a> <a id="30552" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="30557" class="Symbol">}</a> <a id="30559" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="30561" href="Demos.HSP.html#26655" class="InductiveConstructor">mkhom</a> <a id="30567" class="Symbol">(</a><a id="30568" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="30573" class="Symbol">(</a><a id="30574" href="Relation.Binary.Structures.html#1646" class="Function">reflexive</a> <a id="30584" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a><a id="30590" class="Symbol">))</a>

 <a id="30595" href="Demos.HSP.html#30595" class="Function">FromLift ≥</a> <a id="30605" class="Symbol">:</a> <a id="30607" href="Demos.HSP.html#26708" class="Function">hom</a> <a id="30611" class="Symbol">(</a><a id="30612" href="Demos.HSP.html#21988" class="Function">Lift-Alg ≥</a> <a id="30622" href="Demos.HSP.html#29775" class="Bound">ùë®</a> <a id="30624" href="Demos.HSP.html#29793" class="Bound">‚Ñì</a><a id="30625" class="Symbol">)</a> <a id="30627" href="Demos.HSP.html#29775" class="Bound">ùë®</a>
 <a id="30630" href="Demos.HSP.html#30595" class="Function">FromLift ≥</a> <a id="30640" class="Symbol">=</a> <a id="30642" class="Keyword">record</a> <a id="30649" class="Symbol">{</a> <a id="30651" href="Function.Bundles.html#1919" class="Field">f</a> <a id="30653" class="Symbol">=</a> <a id="30655" href="Function.Base.html#615" class="Function">id</a> <a id="30658" class="Symbol">;</a> <a id="30660" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="30665" class="Symbol">=</a> <a id="30667" href="Level.html#470" class="Field">lower</a> <a id="30673" class="Symbol">}</a> <a id="30675" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="30677" href="Demos.HSP.html#26655" class="InductiveConstructor">mkhom</a> <a id="30683" href="Demos.HSP.html#29992" class="Function">reflÀ°</a>

 <a id="30691" href="Demos.HSP.html#30691" class="Function">ToFromLift ≥</a> <a id="30703" class="Symbol">:</a> <a id="30705" class="Symbol">‚àÄ</a> <a id="30707" href="Demos.HSP.html#30707" class="Bound">b</a> <a id="30709" class="Symbol">‚Üí</a> <a id="30711" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="30713" href="Demos.HSP.html#30484" class="Function">ToLift ≥</a> <a id="30721" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="30723" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="30727" class="Symbol">(</a><a id="30728" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="30730" href="Demos.HSP.html#30595" class="Function">FromLift ≥</a> <a id="30740" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="30742" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="30746" href="Demos.HSP.html#30707" class="Bound">b</a><a id="30747" class="Symbol">)</a> <a id="30749" href="Demos.HSP.html#30071" class="Function Operator">‚âà ≥</a> <a id="30752" href="Demos.HSP.html#30707" class="Bound">b</a>
 <a id="30755" href="Demos.HSP.html#30691" class="Function">ToFromLift ≥</a> <a id="30767" href="Demos.HSP.html#30767" class="Bound">b</a> <a id="30769" class="Symbol">=</a> <a id="30771" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="30776" href="Demos.HSP.html#29897" class="Function">refl‚ÇÅ</a>

 <a id="30784" href="Demos.HSP.html#30784" class="Function">FromToLift ≥</a> <a id="30796" class="Symbol">:</a> <a id="30798" class="Symbol">‚àÄ</a> <a id="30800" href="Demos.HSP.html#30800" class="Bound">a</a> <a id="30802" class="Symbol">‚Üí</a> <a id="30804" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="30806" href="Demos.HSP.html#30595" class="Function">FromLift ≥</a> <a id="30816" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="30818" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="30822" class="Symbol">(</a><a id="30823" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="30825" href="Demos.HSP.html#30484" class="Function">ToLift ≥</a> <a id="30833" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="30835" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="30839" href="Demos.HSP.html#30800" class="Bound">a</a><a id="30840" class="Symbol">)</a> <a id="30842" href="Demos.HSP.html#29882" class="Function Operator">‚âà‚ÇÅ</a> <a id="30845" href="Demos.HSP.html#30800" class="Bound">a</a>
 <a id="30848" href="Demos.HSP.html#30784" class="Function">FromToLift ≥</a> <a id="30860" href="Demos.HSP.html#30860" class="Bound">a</a> <a id="30862" class="Symbol">=</a> <a id="30864" href="Demos.HSP.html#29897" class="Function">refl‚ÇÅ</a>


<a id="30872" class="Keyword">module</a> <a id="30879" href="Demos.HSP.html#30879" class="Module">_</a> <a id="30881" class="Symbol">{</a><a id="30882" href="Demos.HSP.html#30882" class="Bound">ùë®</a> <a id="30884" class="Symbol">:</a> <a id="30886" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="30894" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="30896" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a><a id="30898" class="Symbol">}{</a><a id="30900" href="Demos.HSP.html#30900" class="Bound">‚Ñì</a> <a id="30902" href="Demos.HSP.html#30902" class="Bound">r</a> <a id="30904" class="Symbol">:</a> <a id="30906" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="30911" class="Symbol">}</a> <a id="30913" class="Keyword">where</a>
 <a id="30920" class="Keyword">open</a>  <a id="30926" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="30933" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="30936" href="Demos.HSP.html#30882" class="Bound">ùë®</a> <a id="30938" href="Demos.HSP.html#19374" class="Function Operator">]</a>               <a id="30954" class="Keyword">using</a> <a id="30960" class="Symbol">(</a> <a id="30962" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="30967" class="Symbol">)</a>
 <a id="30970" class="Keyword">open</a>  <a id="30976" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="30983" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="30986" href="Demos.HSP.html#22505" class="Function">Lift-Alg</a> <a id="30995" href="Demos.HSP.html#30882" class="Bound">ùë®</a> <a id="30997" href="Demos.HSP.html#30900" class="Bound">‚Ñì</a> <a id="30999" href="Demos.HSP.html#30902" class="Bound">r</a> <a id="31001" href="Demos.HSP.html#19374" class="Function Operator">]</a>  <a id="31004" class="Keyword">using</a> <a id="31010" class="Symbol">(</a> <a id="31012" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="31016" class="Symbol">)</a>
 <a id="31019" class="Keyword">open</a>  <a id="31025" href="Level.html" class="Module">Level</a>
 <a id="31032" href="Demos.HSP.html#31032" class="Function">ToLift</a> <a id="31039" class="Symbol">:</a> <a id="31041" href="Demos.HSP.html#26708" class="Function">hom</a> <a id="31045" href="Demos.HSP.html#30882" class="Bound">ùë®</a> <a id="31047" class="Symbol">(</a><a id="31048" href="Demos.HSP.html#22505" class="Function">Lift-Alg</a> <a id="31057" href="Demos.HSP.html#30882" class="Bound">ùë®</a> <a id="31059" href="Demos.HSP.html#30900" class="Bound">‚Ñì</a> <a id="31061" href="Demos.HSP.html#30902" class="Bound">r</a><a id="31062" class="Symbol">)</a>
 <a id="31065" href="Demos.HSP.html#31032" class="Function">ToLift</a> <a id="31072" class="Symbol">=</a> <a id="31074" href="Demos.HSP.html#29161" class="Function">‚àò-hom</a> <a id="31080" href="Demos.HSP.html#30107" class="Function">ToLiftÀ°</a> <a id="31088" href="Demos.HSP.html#30484" class="Function">ToLift ≥</a>

 <a id="31098" href="Demos.HSP.html#31098" class="Function">FromLift</a> <a id="31107" class="Symbol">:</a> <a id="31109" href="Demos.HSP.html#26708" class="Function">hom</a> <a id="31113" class="Symbol">(</a><a id="31114" href="Demos.HSP.html#22505" class="Function">Lift-Alg</a> <a id="31123" href="Demos.HSP.html#30882" class="Bound">ùë®</a> <a id="31125" href="Demos.HSP.html#30900" class="Bound">‚Ñì</a> <a id="31127" href="Demos.HSP.html#30902" class="Bound">r</a><a id="31128" class="Symbol">)</a> <a id="31130" href="Demos.HSP.html#30882" class="Bound">ùë®</a>
 <a id="31133" href="Demos.HSP.html#31098" class="Function">FromLift</a> <a id="31142" class="Symbol">=</a> <a id="31144" href="Demos.HSP.html#29161" class="Function">‚àò-hom</a> <a id="31150" href="Demos.HSP.html#30595" class="Function">FromLift ≥</a> <a id="31160" href="Demos.HSP.html#30211" class="Function">FromLiftÀ°</a>

 <a id="31172" href="Demos.HSP.html#31172" class="Function">ToFromLift</a> <a id="31183" class="Symbol">:</a> <a id="31185" class="Symbol">‚àÄ</a> <a id="31187" href="Demos.HSP.html#31187" class="Bound">b</a> <a id="31189" class="Symbol">‚Üí</a> <a id="31191" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="31193" href="Demos.HSP.html#31032" class="Function">ToLift</a> <a id="31200" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="31202" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="31206" class="Symbol">(</a><a id="31207" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="31209" href="Demos.HSP.html#31098" class="Function">FromLift</a> <a id="31218" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="31220" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="31224" href="Demos.HSP.html#31187" class="Bound">b</a><a id="31225" class="Symbol">)</a> <a id="31227" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a> <a id="31229" href="Demos.HSP.html#31187" class="Bound">b</a>
 <a id="31232" href="Demos.HSP.html#31172" class="Function">ToFromLift</a> <a id="31243" href="Demos.HSP.html#31243" class="Bound">b</a> <a id="31245" class="Symbol">=</a> <a id="31247" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="31252" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>

 <a id="31259" href="Demos.HSP.html#31259" class="Function">ToLift-epi</a> <a id="31270" class="Symbol">:</a> <a id="31272" href="Demos.HSP.html#27764" class="Function">epi</a> <a id="31276" href="Demos.HSP.html#30882" class="Bound">ùë®</a> <a id="31278" class="Symbol">(</a><a id="31279" href="Demos.HSP.html#22505" class="Function">Lift-Alg</a> <a id="31288" href="Demos.HSP.html#30882" class="Bound">ùë®</a> <a id="31290" href="Demos.HSP.html#30900" class="Bound">‚Ñì</a> <a id="31292" href="Demos.HSP.html#30902" class="Bound">r</a><a id="31293" class="Symbol">)</a>
 <a id="31296" href="Demos.HSP.html#31259" class="Function">ToLift-epi</a> <a id="31307" class="Symbol">=</a> <a id="31309" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="31311" href="Demos.HSP.html#31032" class="Function">ToLift</a> <a id="31318" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="31320" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a>  <a id="31323" class="Keyword">record</a> <a id="31330" class="Symbol">{</a> <a id="31332" href="Demos.HSP.html#27665" class="Field">isHom</a> <a id="31338" class="Symbol">=</a> <a id="31340" href="Demos.HSP.html#8278" class="Function Operator">‚à•</a> <a id="31342" href="Demos.HSP.html#31032" class="Function">ToLift</a> <a id="31349" href="Demos.HSP.html#8278" class="Function Operator">‚à•</a>
                            <a id="31379" class="Symbol">;</a> <a id="31381" href="Demos.HSP.html#27690" class="Field">isSurjective</a> <a id="31394" class="Symbol">=</a> <a id="31396" class="Symbol">Œª</a> <a id="31398" class="Symbol">{</a><a id="31399" href="Demos.HSP.html#31399" class="Bound">y</a><a id="31400" class="Symbol">}</a> <a id="31402" class="Symbol">‚Üí</a> <a id="31404" href="Demos.HSP.html#10773" class="InductiveConstructor">eq</a> <a id="31407" class="Symbol">(</a><a id="31408" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="31410" href="Demos.HSP.html#31098" class="Function">FromLift</a> <a id="31419" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="31421" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="31425" href="Demos.HSP.html#31399" class="Bound">y</a><a id="31426" class="Symbol">)</a> <a id="31428" class="Symbol">(</a><a id="31429" href="Demos.HSP.html#31172" class="Function">ToFromLift</a> <a id="31440" href="Demos.HSP.html#31399" class="Bound">y</a><a id="31441" class="Symbol">)</a> <a id="31443" class="Symbol">}</a>
</pre>


#### <a id="homomorphisms-of-product-algebras">Homomorphisms of product algebras</a>

Suppose we have an algebra `ùë®`, a type `I : Type ùìò`, and a family `‚Ñ¨ : I ‚Üí Algebra Œ≤ œÅ·µá` of algebras.
We sometimes refer to the inhabitants of `I` as *indices*, and call `‚Ñ¨` an
*indexed family of algebras*. If in addition we have a family `ùíΩ : (i : I) ‚Üí hom ùë® (‚Ñ¨ i)` of homomorphisms, 
then we can construct a homomorphism from `ùë®` to the product `‚®Ö ‚Ñ¨` in the natural way.  We codify the 
latter in dependent type theory as follows.

<pre class="Agda">

<a id="31992" class="Keyword">module</a> <a id="31999" href="Demos.HSP.html#31999" class="Module">_</a> <a id="32001" class="Symbol">{</a><a id="32002" href="Demos.HSP.html#32002" class="Bound">Œπ</a> <a id="32004" class="Symbol">:</a> <a id="32006" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="32011" class="Symbol">}{</a><a id="32013" href="Demos.HSP.html#32013" class="Bound">I</a> <a id="32015" class="Symbol">:</a> <a id="32017" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="32022" href="Demos.HSP.html#32002" class="Bound">Œπ</a><a id="32023" class="Symbol">}{</a><a id="32025" href="Demos.HSP.html#32025" class="Bound">ùë®</a> <a id="32027" class="Symbol">:</a> <a id="32029" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="32037" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="32039" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a><a id="32041" class="Symbol">}(</a><a id="32043" href="Demos.HSP.html#32043" class="Bound">‚Ñ¨</a> <a id="32045" class="Symbol">:</a> <a id="32047" href="Demos.HSP.html#32013" class="Bound">I</a> <a id="32049" class="Symbol">‚Üí</a> <a id="32051" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="32059" href="Demos.HSP.html#7595" class="Generalizable">Œ≤</a> <a id="32061" href="Demos.HSP.html#7597" class="Generalizable">œÅ·µá</a><a id="32063" class="Symbol">)</a> <a id="32065" class="Keyword">where</a>
 <a id="32072" href="Demos.HSP.html#32072" class="Function">‚®Ö-hom-co</a> <a id="32081" class="Symbol">:</a> <a id="32083" class="Symbol">(‚àÄ(</a><a id="32086" href="Demos.HSP.html#32086" class="Bound">i</a> <a id="32088" class="Symbol">:</a> <a id="32090" href="Demos.HSP.html#32013" class="Bound">I</a><a id="32091" class="Symbol">)</a> <a id="32093" class="Symbol">‚Üí</a> <a id="32095" href="Demos.HSP.html#26708" class="Function">hom</a> <a id="32099" href="Demos.HSP.html#32025" class="Bound">ùë®</a> <a id="32101" class="Symbol">(</a><a id="32102" href="Demos.HSP.html#32043" class="Bound">‚Ñ¨</a> <a id="32104" href="Demos.HSP.html#32086" class="Bound">i</a><a id="32105" class="Symbol">))</a> <a id="32108" class="Symbol">‚Üí</a> <a id="32110" href="Demos.HSP.html#26708" class="Function">hom</a> <a id="32114" href="Demos.HSP.html#32025" class="Bound">ùë®</a> <a id="32116" class="Symbol">(</a><a id="32117" href="Demos.HSP.html#24332" class="Function">‚®Ö</a> <a id="32119" href="Demos.HSP.html#32043" class="Bound">‚Ñ¨</a><a id="32120" class="Symbol">)</a>
 <a id="32123" href="Demos.HSP.html#32072" class="Function">‚®Ö-hom-co</a> <a id="32132" href="Demos.HSP.html#32132" class="Bound">ùíΩ</a> <a id="32134" class="Symbol">=</a> <a id="32136" href="Demos.HSP.html#32152" class="Function">h</a> <a id="32138" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="32140" href="Demos.HSP.html#32324" class="Function">hhom</a> <a id="32145" class="Keyword">where</a>  <a id="32152" href="Demos.HSP.html#32152" class="Function">h</a> <a id="32154" class="Symbol">:</a> <a id="32156" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="32159" href="Demos.HSP.html#32025" class="Bound">ùë®</a> <a id="32161" href="Demos.HSP.html#19374" class="Function Operator">]</a> <a id="32163" href="Demos.HSP.html#6656" class="Record Operator">‚ü∂</a> <a id="32165" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="32168" href="Demos.HSP.html#24332" class="Function">‚®Ö</a> <a id="32170" href="Demos.HSP.html#32043" class="Bound">‚Ñ¨</a> <a id="32172" href="Demos.HSP.html#19374" class="Function Operator">]</a>
                              <a id="32204" href="Demos.HSP.html#32152" class="Function">h</a> <a id="32206" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="32210" href="Demos.HSP.html#32210" class="Bound">a</a> <a id="32212" class="Symbol">=</a> <a id="32214" class="Symbol">Œª</a> <a id="32216" href="Demos.HSP.html#32216" class="Bound">i</a> <a id="32218" class="Symbol">‚Üí</a> <a id="32220" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="32222" href="Demos.HSP.html#32132" class="Bound">ùíΩ</a> <a id="32224" href="Demos.HSP.html#32216" class="Bound">i</a> <a id="32226" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="32228" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="32232" href="Demos.HSP.html#32210" class="Bound">a</a>
                              <a id="32264" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="32269" href="Demos.HSP.html#32152" class="Function">h</a> <a id="32271" href="Demos.HSP.html#32271" class="Bound">xy</a> <a id="32274" href="Demos.HSP.html#32274" class="Bound">i</a> <a id="32276" class="Symbol">=</a> <a id="32278" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="32283" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="32285" href="Demos.HSP.html#32132" class="Bound">ùíΩ</a> <a id="32287" href="Demos.HSP.html#32274" class="Bound">i</a> <a id="32289" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="32291" href="Demos.HSP.html#32271" class="Bound">xy</a>
                              <a id="32324" href="Demos.HSP.html#32324" class="Function">hhom</a> <a id="32329" class="Symbol">:</a> <a id="32331" href="Demos.HSP.html#26582" class="Record">IsHom</a> <a id="32337" href="Demos.HSP.html#32025" class="Bound">ùë®</a> <a id="32339" class="Symbol">(</a><a id="32340" href="Demos.HSP.html#24332" class="Function">‚®Ö</a> <a id="32342" href="Demos.HSP.html#32043" class="Bound">‚Ñ¨</a><a id="32343" class="Symbol">)</a> <a id="32345" href="Demos.HSP.html#32152" class="Function">h</a>
                              <a id="32377" href="Demos.HSP.html#26676" class="Field">compatible</a> <a id="32388" href="Demos.HSP.html#32324" class="Function">hhom</a> <a id="32393" class="Symbol">=</a> <a id="32395" class="Symbol">Œª</a> <a id="32397" href="Demos.HSP.html#32397" class="Bound">i</a> <a id="32399" class="Symbol">‚Üí</a> <a id="32401" href="Demos.HSP.html#26676" class="Field">compatible</a> <a id="32412" href="Demos.HSP.html#8278" class="Function Operator">‚à•</a> <a id="32414" href="Demos.HSP.html#32132" class="Bound">ùíΩ</a> <a id="32416" href="Demos.HSP.html#32397" class="Bound">i</a> <a id="32418" href="Demos.HSP.html#8278" class="Function Operator">‚à•</a>
</pre>

Two structures are *isomorphic* provided there are homomorphisms from each to the other that compose to the identity. We define the following record type to represent this concept. Note that the definition, shown below,
includes a proof of the fact that the maps `to` and `from` are bijective, which makes this fact more accessible.

<pre class="Agda">

<a id="32780" class="Keyword">module</a> <a id="32787" href="Demos.HSP.html#32787" class="Module">_</a> <a id="32789" class="Symbol">(</a><a id="32790" href="Demos.HSP.html#32790" class="Bound">ùë®</a> <a id="32792" class="Symbol">:</a> <a id="32794" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="32802" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="32804" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a><a id="32806" class="Symbol">)</a> <a id="32808" class="Symbol">(</a><a id="32809" href="Demos.HSP.html#32809" class="Bound">ùë©</a> <a id="32811" class="Symbol">:</a> <a id="32813" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="32821" href="Demos.HSP.html#7595" class="Generalizable">Œ≤</a> <a id="32823" href="Demos.HSP.html#7597" class="Generalizable">œÅ·µá</a><a id="32825" class="Symbol">)</a> <a id="32827" class="Keyword">where</a>
 <a id="32834" class="Keyword">open</a> <a id="32839" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="32846" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="32849" href="Demos.HSP.html#32790" class="Bound">ùë®</a> <a id="32851" href="Demos.HSP.html#19374" class="Function Operator">]</a>  <a id="32854" class="Keyword">using</a> <a id="32860" class="Symbol">()</a>  <a id="32864" class="Keyword">renaming</a> <a id="32873" class="Symbol">(</a> <a id="32875" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="32879" class="Symbol">to</a> <a id="32882" class="Field Operator">_‚âà·¥¨_</a> <a id="32887" class="Symbol">)</a>
 <a id="32890" class="Keyword">open</a> <a id="32895" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="32902" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="32905" href="Demos.HSP.html#32809" class="Bound">ùë©</a> <a id="32907" href="Demos.HSP.html#19374" class="Function Operator">]</a>  <a id="32910" class="Keyword">using</a> <a id="32916" class="Symbol">()</a>  <a id="32920" class="Keyword">renaming</a> <a id="32929" class="Symbol">(</a> <a id="32931" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="32935" class="Symbol">to</a> <a id="32938" class="Field Operator">_‚âà·¥Æ_</a> <a id="32943" class="Symbol">)</a>

 <a id="32947" class="Keyword">record</a> <a id="32954" href="Demos.HSP.html#32954" class="Record Operator">_‚âÖ_</a> <a id="32958" class="Symbol">:</a> <a id="32960" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="32965" class="Symbol">(</a><a id="32966" href="Demos.HSP.html#5474" class="Bound">ùìû</a> <a id="32968" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="32970" href="Demos.HSP.html#5476" class="Bound">ùì•</a> <a id="32972" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="32974" href="Demos.HSP.html#32802" class="Bound">Œ±</a> <a id="32976" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="32978" href="Demos.HSP.html#32804" class="Bound">œÅ·µÉ</a> <a id="32981" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="32983" href="Demos.HSP.html#32821" class="Bound">Œ≤</a> <a id="32985" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="32987" href="Demos.HSP.html#32823" class="Bound">œÅ·µá</a> <a id="32990" class="Symbol">)</a> <a id="32992" class="Keyword">where</a>
  <a id="33000" class="Keyword">constructor</a>  <a id="33013" href="Demos.HSP.html#33013" class="InductiveConstructor">mkiso</a>
  <a id="33021" class="Keyword">field</a>        <a id="33034" href="Demos.HSP.html#33034" class="Field">to</a>    <a id="33040" class="Symbol">:</a> <a id="33042" href="Demos.HSP.html#26708" class="Function">hom</a> <a id="33046" href="Demos.HSP.html#32790" class="Bound">ùë®</a> <a id="33048" href="Demos.HSP.html#32809" class="Bound">ùë©</a>
               <a id="33065" href="Demos.HSP.html#33065" class="Field">from</a>  <a id="33071" class="Symbol">:</a> <a id="33073" href="Demos.HSP.html#26708" class="Function">hom</a> <a id="33077" href="Demos.HSP.html#32809" class="Bound">ùë©</a> <a id="33079" href="Demos.HSP.html#32790" class="Bound">ùë®</a>
               <a id="33096" href="Demos.HSP.html#33096" class="Field">to‚àºfrom</a> <a id="33104" class="Symbol">:</a> <a id="33106" class="Symbol">‚àÄ</a> <a id="33108" href="Demos.HSP.html#33108" class="Bound">b</a> <a id="33110" class="Symbol">‚Üí</a> <a id="33112" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="33114" href="Demos.HSP.html#33034" class="Field">to</a> <a id="33117" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a>    <a id="33122" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="33126" class="Symbol">(</a><a id="33127" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="33129" href="Demos.HSP.html#33065" class="Field">from</a> <a id="33134" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a>  <a id="33137" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="33141" href="Demos.HSP.html#33108" class="Bound">b</a><a id="33142" class="Symbol">)</a>  <a id="33145" href="Demos.HSP.html#32938" class="Function Operator">‚âà·¥Æ</a> <a id="33148" href="Demos.HSP.html#33108" class="Bound">b</a>
               <a id="33165" href="Demos.HSP.html#33165" class="Field">from‚àºto</a> <a id="33173" class="Symbol">:</a> <a id="33175" class="Symbol">‚àÄ</a> <a id="33177" href="Demos.HSP.html#33177" class="Bound">a</a> <a id="33179" class="Symbol">‚Üí</a> <a id="33181" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="33183" href="Demos.HSP.html#33065" class="Field">from</a> <a id="33188" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a>  <a id="33191" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="33195" class="Symbol">(</a><a id="33196" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="33198" href="Demos.HSP.html#33034" class="Field">to</a> <a id="33201" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a>    <a id="33206" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="33210" href="Demos.HSP.html#33177" class="Bound">a</a><a id="33211" class="Symbol">)</a>  <a id="33214" href="Demos.HSP.html#32882" class="Function Operator">‚âà·¥¨</a> <a id="33217" href="Demos.HSP.html#33177" class="Bound">a</a>

  <a id="33222" href="Demos.HSP.html#33222" class="Function">toIsInjective</a> <a id="33236" class="Symbol">:</a> <a id="33238" href="Demos.HSP.html#12462" class="Function">IsInjective</a> <a id="33250" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="33252" href="Demos.HSP.html#33034" class="Field">to</a> <a id="33255" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a>
  <a id="33259" href="Demos.HSP.html#33222" class="Function">toIsInjective</a> <a id="33273" class="Symbol">{</a><a id="33274" href="Demos.HSP.html#33274" class="Bound">x</a><a id="33275" class="Symbol">}{</a><a id="33277" href="Demos.HSP.html#33277" class="Bound">y</a><a id="33278" class="Symbol">}</a> <a id="33280" href="Demos.HSP.html#33280" class="Bound">xy</a> <a id="33283" class="Symbol">=</a> <a id="33285" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="33291" class="Symbol">(</a><a id="33292" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="33296" class="Symbol">(</a><a id="33297" href="Demos.HSP.html#33165" class="Field">from‚àºto</a> <a id="33305" href="Demos.HSP.html#33274" class="Bound">x</a><a id="33306" class="Symbol">))</a> <a id="33309" class="Symbol">(</a><a id="33310" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="33316" href="Demos.HSP.html#33392" class="Function">Œæ</a> <a id="33318" class="Symbol">(</a><a id="33319" href="Demos.HSP.html#33165" class="Field">from‚àºto</a> <a id="33327" href="Demos.HSP.html#33277" class="Bound">y</a><a id="33328" class="Symbol">))</a>
   <a id="33334" class="Keyword">where</a>  <a id="33341" class="Keyword">open</a> <a id="33346" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="33353" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="33356" href="Demos.HSP.html#32790" class="Bound">ùë®</a> <a id="33358" href="Demos.HSP.html#19374" class="Function Operator">]</a> <a id="33360" class="Keyword">using</a> <a id="33366" class="Symbol">(</a> <a id="33368" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="33372" class="Symbol">;</a> <a id="33374" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="33380" class="Symbol">)</a>
          <a id="33392" href="Demos.HSP.html#33392" class="Function">Œæ</a> <a id="33394" class="Symbol">:</a> <a id="33396" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="33398" href="Demos.HSP.html#33065" class="Field">from</a> <a id="33403" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="33405" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="33409" class="Symbol">(</a><a id="33410" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="33412" href="Demos.HSP.html#33034" class="Field">to</a> <a id="33415" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="33417" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="33421" href="Demos.HSP.html#33274" class="Bound">x</a><a id="33422" class="Symbol">)</a> <a id="33424" href="Demos.HSP.html#32882" class="Function Operator">‚âà·¥¨</a> <a id="33427" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="33429" href="Demos.HSP.html#33065" class="Field">from</a> <a id="33434" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="33436" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="33440" class="Symbol">(</a><a id="33441" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="33443" href="Demos.HSP.html#33034" class="Field">to</a> <a id="33446" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="33448" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="33452" href="Demos.HSP.html#33277" class="Bound">y</a><a id="33453" class="Symbol">)</a>
          <a id="33465" href="Demos.HSP.html#33392" class="Function">Œæ</a> <a id="33467" class="Symbol">=</a> <a id="33469" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="33474" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="33476" href="Demos.HSP.html#33065" class="Field">from</a> <a id="33481" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="33483" href="Demos.HSP.html#33280" class="Bound">xy</a>

  <a id="33489" href="Demos.HSP.html#33489" class="Function">fromIsSurjective</a> <a id="33506" class="Symbol">:</a> <a id="33508" href="Demos.HSP.html#12545" class="Function">IsSurjective</a> <a id="33521" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="33523" href="Demos.HSP.html#33065" class="Field">from</a> <a id="33528" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a>
  <a id="33532" href="Demos.HSP.html#33489" class="Function">fromIsSurjective</a> <a id="33549" class="Symbol">{</a><a id="33550" href="Demos.HSP.html#33550" class="Bound">x</a><a id="33551" class="Symbol">}</a> <a id="33553" class="Symbol">=</a> <a id="33555" href="Demos.HSP.html#10773" class="InductiveConstructor">eq</a> <a id="33558" class="Symbol">(</a><a id="33559" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="33561" href="Demos.HSP.html#33034" class="Field">to</a> <a id="33564" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="33566" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="33570" href="Demos.HSP.html#33550" class="Bound">x</a><a id="33571" class="Symbol">)</a> <a id="33573" class="Symbol">(</a><a id="33574" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="33578" class="Symbol">(</a><a id="33579" href="Demos.HSP.html#33165" class="Field">from‚àºto</a> <a id="33587" href="Demos.HSP.html#33550" class="Bound">x</a><a id="33588" class="Symbol">))</a>
   <a id="33594" class="Keyword">where</a> <a id="33600" class="Keyword">open</a> <a id="33605" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="33612" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="33615" href="Demos.HSP.html#32790" class="Bound">ùë®</a> <a id="33617" href="Demos.HSP.html#19374" class="Function Operator">]</a> <a id="33619" class="Keyword">using</a> <a id="33625" class="Symbol">(</a> <a id="33627" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="33631" class="Symbol">)</a>

<a id="33634" class="Keyword">open</a> <a id="33639" href="Demos.HSP.html#32954" class="Module Operator">_‚âÖ_</a>

</pre>

It is easy to prove that \ar{\au{}‚âÖ\au{}} is an equivalence relation, as follows.

<pre class="Agda">

<a id="‚âÖ-refl"></a><a id="33753" href="Demos.HSP.html#33753" class="Function">‚âÖ-refl</a> <a id="33760" class="Symbol">:</a> <a id="33762" href="Relation.Binary.Definitions.html#1339" class="Function">Reflexive</a> <a id="33772" class="Symbol">(</a><a id="33773" href="Demos.HSP.html#32954" class="Record Operator">_‚âÖ_</a> <a id="33777" class="Symbol">{</a><a id="33778" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a><a id="33779" class="Symbol">}{</a><a id="33781" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a><a id="33783" class="Symbol">})</a>
<a id="33786" href="Demos.HSP.html#33753" class="Function">‚âÖ-refl</a> <a id="33793" class="Symbol">{</a><a id="33794" href="Demos.HSP.html#33794" class="Bound">Œ±</a><a id="33795" class="Symbol">}{</a><a id="33797" href="Demos.HSP.html#33797" class="Bound">œÅ·µÉ</a><a id="33799" class="Symbol">}{</a><a id="33801" href="Demos.HSP.html#33801" class="Bound">ùë®</a><a id="33802" class="Symbol">}</a> <a id="33804" class="Symbol">=</a> <a id="33806" href="Demos.HSP.html#33013" class="InductiveConstructor">mkiso</a> <a id="33812" href="Demos.HSP.html#29636" class="Function">ùíæùíπ</a> <a id="33815" href="Demos.HSP.html#29636" class="Function">ùíæùíπ</a> <a id="33818" class="Symbol">(Œª</a> <a id="33821" href="Demos.HSP.html#33821" class="Bound">b</a> <a id="33823" class="Symbol">‚Üí</a> <a id="33825" href="Relation.Binary.Structures.html#1568" class="Function">refl</a><a id="33829" class="Symbol">)</a> <a id="33831" class="Symbol">Œª</a> <a id="33833" href="Demos.HSP.html#33833" class="Bound">a</a> <a id="33835" class="Symbol">‚Üí</a> <a id="33837" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="33842" class="Keyword">where</a> <a id="33848" class="Keyword">open</a> <a id="33853" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="33860" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="33863" href="Demos.HSP.html#33801" class="Bound">ùë®</a> <a id="33865" href="Demos.HSP.html#19374" class="Function Operator">]</a> <a id="33867" class="Keyword">using</a> <a id="33873" class="Symbol">(</a> <a id="33875" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="33880" class="Symbol">)</a>
<a id="‚âÖ-sym"></a><a id="33882" href="Demos.HSP.html#33882" class="Function">‚âÖ-sym</a> <a id="33888" class="Symbol">:</a> <a id="33890" href="Relation.Binary.Definitions.html#1424" class="Function">Sym</a> <a id="33894" class="Symbol">(</a><a id="33895" href="Demos.HSP.html#32954" class="Record Operator">_‚âÖ_</a><a id="33898" class="Symbol">{</a><a id="33899" href="Demos.HSP.html#7595" class="Generalizable">Œ≤</a><a id="33900" class="Symbol">}{</a><a id="33902" href="Demos.HSP.html#7597" class="Generalizable">œÅ·µá</a><a id="33904" class="Symbol">})</a> <a id="33907" class="Symbol">(</a><a id="33908" href="Demos.HSP.html#32954" class="Record Operator">_‚âÖ_</a><a id="33911" class="Symbol">{</a><a id="33912" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a><a id="33913" class="Symbol">}{</a><a id="33915" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a><a id="33917" class="Symbol">})</a>
<a id="33920" href="Demos.HSP.html#33882" class="Function">‚âÖ-sym</a> <a id="33926" href="Demos.HSP.html#33926" class="Bound">œÜ</a> <a id="33928" class="Symbol">=</a> <a id="33930" href="Demos.HSP.html#33013" class="InductiveConstructor">mkiso</a> <a id="33936" class="Symbol">(</a><a id="33937" href="Demos.HSP.html#33065" class="Field">from</a> <a id="33942" href="Demos.HSP.html#33926" class="Bound">œÜ</a><a id="33943" class="Symbol">)</a> <a id="33945" class="Symbol">(</a><a id="33946" href="Demos.HSP.html#33034" class="Field">to</a> <a id="33949" href="Demos.HSP.html#33926" class="Bound">œÜ</a><a id="33950" class="Symbol">)</a> <a id="33952" class="Symbol">(</a><a id="33953" href="Demos.HSP.html#33165" class="Field">from‚àºto</a> <a id="33961" href="Demos.HSP.html#33926" class="Bound">œÜ</a><a id="33962" class="Symbol">)</a> <a id="33964" class="Symbol">(</a><a id="33965" href="Demos.HSP.html#33096" class="Field">to‚àºfrom</a> <a id="33973" href="Demos.HSP.html#33926" class="Bound">œÜ</a><a id="33974" class="Symbol">)</a>

<a id="‚âÖ-trans"></a><a id="33977" href="Demos.HSP.html#33977" class="Function">‚âÖ-trans</a> <a id="33985" class="Symbol">:</a> <a id="33987" href="Relation.Binary.Definitions.html#1585" class="Function">Trans</a> <a id="33993" class="Symbol">(</a><a id="33994" href="Demos.HSP.html#32954" class="Record Operator">_‚âÖ_</a> <a id="33998" class="Symbol">{</a><a id="33999" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a><a id="34000" class="Symbol">}{</a><a id="34002" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a><a id="34004" class="Symbol">})</a> <a id="34007" class="Symbol">(</a><a id="34008" href="Demos.HSP.html#32954" class="Record Operator">_‚âÖ_</a><a id="34011" class="Symbol">{</a><a id="34012" href="Demos.HSP.html#7595" class="Generalizable">Œ≤</a><a id="34013" class="Symbol">}{</a><a id="34015" href="Demos.HSP.html#7597" class="Generalizable">œÅ·µá</a><a id="34017" class="Symbol">})</a> <a id="34020" class="Symbol">(</a><a id="34021" href="Demos.HSP.html#32954" class="Record Operator">_‚âÖ_</a><a id="34024" class="Symbol">{</a><a id="34025" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a><a id="34026" class="Symbol">}{</a><a id="34028" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a><a id="34030" class="Symbol">}{</a><a id="34032" href="Demos.HSP.html#7600" class="Generalizable">Œ≥</a><a id="34033" class="Symbol">}{</a><a id="34035" href="Demos.HSP.html#7602" class="Generalizable">œÅ·∂ú</a><a id="34037" class="Symbol">})</a>
<a id="34040" href="Demos.HSP.html#33977" class="Function">‚âÖ-trans</a> <a id="34048" class="Symbol">{</a><a id="34049" class="Argument">œÅ·∂ú</a> <a id="34052" class="Symbol">=</a> <a id="34054" href="Demos.HSP.html#34054" class="Bound">œÅ·∂ú</a><a id="34056" class="Symbol">}{</a><a id="34058" href="Demos.HSP.html#34058" class="Bound">ùë®</a><a id="34059" class="Symbol">}{</a><a id="34061" href="Demos.HSP.html#34061" class="Bound">ùë©</a><a id="34062" class="Symbol">}{</a><a id="34064" href="Demos.HSP.html#34064" class="Bound">ùë™</a><a id="34065" class="Symbol">}</a> <a id="34067" href="Demos.HSP.html#34067" class="Bound">ab</a> <a id="34070" href="Demos.HSP.html#34070" class="Bound">bc</a> <a id="34073" class="Symbol">=</a> <a id="34075" href="Demos.HSP.html#33013" class="InductiveConstructor">mkiso</a> <a id="34081" href="Demos.HSP.html#34097" class="Function">f</a> <a id="34083" href="Demos.HSP.html#34127" class="Function">g</a> <a id="34085" href="Demos.HSP.html#34320" class="Function">œÑ</a> <a id="34087" href="Demos.HSP.html#34442" class="Function">ŒΩ</a> <a id="34089" class="Keyword">where</a>
  <a id="34097" href="Demos.HSP.html#34097" class="Function">f</a> <a id="34099" class="Symbol">:</a> <a id="34101" href="Demos.HSP.html#26708" class="Function">hom</a> <a id="34105" href="Demos.HSP.html#34058" class="Bound">ùë®</a> <a id="34107" href="Demos.HSP.html#34064" class="Bound">ùë™</a>                <a id="34124" class="Symbol">;</a>  <a id="34127" href="Demos.HSP.html#34127" class="Function">g</a> <a id="34129" class="Symbol">:</a> <a id="34131" href="Demos.HSP.html#26708" class="Function">hom</a> <a id="34135" href="Demos.HSP.html#34064" class="Bound">ùë™</a> <a id="34137" href="Demos.HSP.html#34058" class="Bound">ùë®</a>
  <a id="34141" href="Demos.HSP.html#34097" class="Function">f</a> <a id="34143" class="Symbol">=</a> <a id="34145" href="Demos.HSP.html#29161" class="Function">‚àò-hom</a> <a id="34151" class="Symbol">(</a><a id="34152" href="Demos.HSP.html#33034" class="Field">to</a> <a id="34155" href="Demos.HSP.html#34067" class="Bound">ab</a><a id="34157" class="Symbol">)</a> <a id="34159" class="Symbol">(</a><a id="34160" href="Demos.HSP.html#33034" class="Field">to</a> <a id="34163" href="Demos.HSP.html#34070" class="Bound">bc</a><a id="34165" class="Symbol">)</a>  <a id="34168" class="Symbol">;</a>  <a id="34171" href="Demos.HSP.html#34127" class="Function">g</a> <a id="34173" class="Symbol">=</a> <a id="34175" href="Demos.HSP.html#29161" class="Function">‚àò-hom</a> <a id="34181" class="Symbol">(</a><a id="34182" href="Demos.HSP.html#33065" class="Field">from</a> <a id="34187" href="Demos.HSP.html#34070" class="Bound">bc</a><a id="34189" class="Symbol">)</a> <a id="34191" class="Symbol">(</a><a id="34192" href="Demos.HSP.html#33065" class="Field">from</a> <a id="34197" href="Demos.HSP.html#34067" class="Bound">ab</a><a id="34199" class="Symbol">)</a>

  <a id="34204" class="Keyword">open</a> <a id="34209" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="34216" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="34219" href="Demos.HSP.html#34058" class="Bound">ùë®</a> <a id="34221" href="Demos.HSP.html#19374" class="Function Operator">]</a> <a id="34223" class="Keyword">using</a> <a id="34229" class="Symbol">(</a> <a id="34231" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="34235" class="Symbol">;</a> <a id="34237" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="34243" class="Symbol">)</a>
  <a id="34247" class="Keyword">open</a> <a id="34252" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="34259" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="34262" href="Demos.HSP.html#34064" class="Bound">ùë™</a> <a id="34264" href="Demos.HSP.html#19374" class="Function Operator">]</a> <a id="34266" class="Keyword">using</a> <a id="34272" class="Symbol">()</a> <a id="34275" class="Keyword">renaming</a> <a id="34284" class="Symbol">(</a> <a id="34286" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="34290" class="Symbol">to</a> <a id="34293" class="Field Operator">_‚âà·∂ú_</a> <a id="34298" class="Symbol">;</a> <a id="34300" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="34306" class="Symbol">to</a> <a id="34309" class="Function">trans·∂ú</a> <a id="34316" class="Symbol">)</a>
  <a id="34320" href="Demos.HSP.html#34320" class="Function">œÑ</a> <a id="34322" class="Symbol">:</a> <a id="34324" class="Symbol">‚àÄ</a> <a id="34326" href="Demos.HSP.html#34326" class="Bound">b</a> <a id="34328" class="Symbol">‚Üí</a> <a id="34330" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="34332" href="Demos.HSP.html#34097" class="Function">f</a> <a id="34334" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="34336" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="34340" class="Symbol">(</a><a id="34341" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="34343" href="Demos.HSP.html#34127" class="Function">g</a> <a id="34345" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="34347" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="34351" href="Demos.HSP.html#34326" class="Bound">b</a><a id="34352" class="Symbol">)</a> <a id="34354" href="Demos.HSP.html#34293" class="Function Operator">‚âà·∂ú</a> <a id="34357" href="Demos.HSP.html#34326" class="Bound">b</a>
  <a id="34361" href="Demos.HSP.html#34320" class="Function">œÑ</a> <a id="34363" href="Demos.HSP.html#34363" class="Bound">b</a> <a id="34365" class="Symbol">=</a> <a id="34367" href="Demos.HSP.html#34309" class="Function">trans·∂ú</a> <a id="34374" class="Symbol">(</a><a id="34375" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="34380" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="34382" href="Demos.HSP.html#33034" class="Field">to</a> <a id="34385" href="Demos.HSP.html#34070" class="Bound">bc</a> <a id="34388" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="34390" class="Symbol">(</a><a id="34391" href="Demos.HSP.html#33096" class="Field">to‚àºfrom</a> <a id="34399" href="Demos.HSP.html#34067" class="Bound">ab</a> <a id="34402" class="Symbol">(</a><a id="34403" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="34405" href="Demos.HSP.html#33065" class="Field">from</a> <a id="34410" href="Demos.HSP.html#34070" class="Bound">bc</a> <a id="34413" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="34415" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="34419" href="Demos.HSP.html#34363" class="Bound">b</a><a id="34420" class="Symbol">)))</a> <a id="34424" class="Symbol">(</a><a id="34425" href="Demos.HSP.html#33096" class="Field">to‚àºfrom</a> <a id="34433" href="Demos.HSP.html#34070" class="Bound">bc</a> <a id="34436" href="Demos.HSP.html#34363" class="Bound">b</a><a id="34437" class="Symbol">)</a>

  <a id="34442" href="Demos.HSP.html#34442" class="Function">ŒΩ</a> <a id="34444" class="Symbol">:</a> <a id="34446" class="Symbol">‚àÄ</a> <a id="34448" href="Demos.HSP.html#34448" class="Bound">a</a> <a id="34450" class="Symbol">‚Üí</a> <a id="34452" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="34454" href="Demos.HSP.html#34127" class="Function">g</a> <a id="34456" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="34458" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="34462" class="Symbol">(</a><a id="34463" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="34465" href="Demos.HSP.html#34097" class="Function">f</a> <a id="34467" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="34469" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="34473" href="Demos.HSP.html#34448" class="Bound">a</a><a id="34474" class="Symbol">)</a> <a id="34476" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a> <a id="34478" href="Demos.HSP.html#34448" class="Bound">a</a>
  <a id="34482" href="Demos.HSP.html#34442" class="Function">ŒΩ</a> <a id="34484" href="Demos.HSP.html#34484" class="Bound">a</a> <a id="34486" class="Symbol">=</a> <a id="34488" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="34494" class="Symbol">(</a><a id="34495" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="34500" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="34502" href="Demos.HSP.html#33065" class="Field">from</a> <a id="34507" href="Demos.HSP.html#34067" class="Bound">ab</a> <a id="34510" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="34512" class="Symbol">(</a><a id="34513" href="Demos.HSP.html#33165" class="Field">from‚àºto</a> <a id="34521" href="Demos.HSP.html#34070" class="Bound">bc</a> <a id="34524" class="Symbol">(</a><a id="34525" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="34527" href="Demos.HSP.html#33034" class="Field">to</a> <a id="34530" href="Demos.HSP.html#34067" class="Bound">ab</a> <a id="34533" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="34535" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="34539" href="Demos.HSP.html#34484" class="Bound">a</a><a id="34540" class="Symbol">)))</a> <a id="34544" class="Symbol">(</a><a id="34545" href="Demos.HSP.html#33165" class="Field">from‚àºto</a> <a id="34553" href="Demos.HSP.html#34067" class="Bound">ab</a> <a id="34556" href="Demos.HSP.html#34484" class="Bound">a</a><a id="34557" class="Symbol">)</a>
</pre>

#### <a id="homomorphic-images">Homomorphic images</a>

We have found that a useful way to encode the concept of *homomorphic image* is to produce a witness, that is, a surjective hom. Thus we define the type of surjective homs and also record the fact that an algebra is its own homomorphic image via the identity hom.

<pre class="Agda">

<a id="ov"></a><a id="34906" href="Demos.HSP.html#34906" class="Function">ov</a> <a id="34909" class="Symbol">:</a> <a id="34911" href="Agda.Primitive.html#597" class="Postulate">Level</a> <a id="34917" class="Symbol">‚Üí</a> <a id="34919" href="Agda.Primitive.html#597" class="Postulate">Level</a>         <a id="34933" class="Comment">-- shorthand for a common level transformation</a>
<a id="34980" href="Demos.HSP.html#34906" class="Function">ov</a> <a id="34983" href="Demos.HSP.html#34983" class="Bound">Œ±</a> <a id="34985" class="Symbol">=</a> <a id="34987" href="Demos.HSP.html#5474" class="Bound">ùìû</a> <a id="34989" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="34991" href="Demos.HSP.html#5476" class="Bound">ùì•</a> <a id="34993" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="34995" href="Agda.Primitive.html#780" class="Primitive">lsuc</a> <a id="35000" href="Demos.HSP.html#34983" class="Bound">Œ±</a>

<a id="_IsHomImageOf_"></a><a id="35003" href="Demos.HSP.html#35003" class="Function Operator">_IsHomImageOf_</a> <a id="35018" class="Symbol">:</a> <a id="35020" class="Symbol">(</a><a id="35021" href="Demos.HSP.html#35021" class="Bound">ùë©</a> <a id="35023" class="Symbol">:</a> <a id="35025" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="35033" href="Demos.HSP.html#7595" class="Generalizable">Œ≤</a> <a id="35035" href="Demos.HSP.html#7597" class="Generalizable">œÅ·µá</a><a id="35037" class="Symbol">)(</a><a id="35039" href="Demos.HSP.html#35039" class="Bound">ùë®</a> <a id="35041" class="Symbol">:</a> <a id="35043" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="35051" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="35053" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a><a id="35055" class="Symbol">)</a> <a id="35057" class="Symbol">‚Üí</a> <a id="35059" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="35064" class="Symbol">_</a>
<a id="35066" href="Demos.HSP.html#35066" class="Bound">ùë©</a> <a id="35068" href="Demos.HSP.html#35003" class="Function Operator">IsHomImageOf</a> <a id="35081" href="Demos.HSP.html#35081" class="Bound">ùë®</a> <a id="35083" class="Symbol">=</a> <a id="35085" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="35088" href="Demos.HSP.html#35088" class="Bound">œÜ</a> <a id="35090" href="Data.Product.html#916" class="Function">‚àà</a> <a id="35092" href="Demos.HSP.html#26708" class="Function">hom</a> <a id="35096" href="Demos.HSP.html#35081" class="Bound">ùë®</a> <a id="35098" href="Demos.HSP.html#35066" class="Bound">ùë©</a> <a id="35100" href="Data.Product.html#916" class="Function">]</a> <a id="35102" href="Demos.HSP.html#12545" class="Function">IsSurjective</a> <a id="35115" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="35117" href="Demos.HSP.html#35088" class="Bound">œÜ</a> <a id="35119" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a>

<a id="IdHomImage"></a><a id="35122" href="Demos.HSP.html#35122" class="Function">IdHomImage</a> <a id="35133" class="Symbol">:</a> <a id="35135" class="Symbol">{</a><a id="35136" href="Demos.HSP.html#35136" class="Bound">ùë®</a> <a id="35138" class="Symbol">:</a> <a id="35140" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="35148" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="35150" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a><a id="35152" class="Symbol">}</a> <a id="35154" class="Symbol">‚Üí</a> <a id="35156" href="Demos.HSP.html#35136" class="Bound">ùë®</a> <a id="35158" href="Demos.HSP.html#35003" class="Function Operator">IsHomImageOf</a> <a id="35171" href="Demos.HSP.html#35136" class="Bound">ùë®</a>
<a id="35173" href="Demos.HSP.html#35122" class="Function">IdHomImage</a> <a id="35184" class="Symbol">{</a><a id="35185" class="Argument">Œ±</a> <a id="35187" class="Symbol">=</a> <a id="35189" href="Demos.HSP.html#35189" class="Bound">Œ±</a><a id="35190" class="Symbol">}{</a><a id="35192" class="Argument">ùë®</a> <a id="35194" class="Symbol">=</a> <a id="35196" href="Demos.HSP.html#35196" class="Bound">ùë®</a><a id="35197" class="Symbol">}</a> <a id="35199" class="Symbol">=</a> <a id="35201" href="Demos.HSP.html#29636" class="Function">ùíæùíπ</a> <a id="35204" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="35206" class="Symbol">Œª</a> <a id="35208" class="Symbol">{</a><a id="35209" href="Demos.HSP.html#35209" class="Bound">y</a><a id="35210" class="Symbol">}</a> <a id="35212" class="Symbol">‚Üí</a> <a id="35214" href="Demos.HSP.html#10773" class="InductiveConstructor">Image_‚àã_.eq</a> <a id="35226" href="Demos.HSP.html#35209" class="Bound">y</a> <a id="35228" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>
 <a id="35234" class="Keyword">where</a> <a id="35240" class="Keyword">open</a> <a id="35245" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="35252" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="35255" href="Demos.HSP.html#35196" class="Bound">ùë®</a> <a id="35257" href="Demos.HSP.html#19374" class="Function Operator">]</a> <a id="35259" class="Keyword">using</a> <a id="35265" class="Symbol">(</a> <a id="35267" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="35272" class="Symbol">)</a>
</pre>


#### <a id="factorization-of-homomorphisms">Factorization of homomorphisms</a>

Another theorem in the [agda-algebras][] library, called `HomFactor`, formalizes the following
factorization result: if `g : hom ùë® ùë©`, `h : hom ùë® ùë™`, `h` is surjective, and `ker h ‚äÜ ker g`, then
there exists `œÜ : hom ùë™ ùë©` such that `g = œÜ ‚àò h`. A special case of this result that we
use below is the fact that the setoid function factorization we saw
above lifts to factorization of homomorphisms. Moreover, we associate a
homomorphism `h` with its image---which is (the domain of) a subalgebra of
the codomain of `h`---using the function `HomIm` defined below.[^8]

<pre class="Agda">

<a id="35948" class="Keyword">module</a> <a id="35955" href="Demos.HSP.html#35955" class="Module">_</a> <a id="35957" class="Symbol">{</a><a id="35958" href="Demos.HSP.html#35958" class="Bound">ùë®</a> <a id="35960" class="Symbol">:</a> <a id="35962" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="35970" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="35972" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a><a id="35974" class="Symbol">}{</a><a id="35976" href="Demos.HSP.html#35976" class="Bound">ùë©</a> <a id="35978" class="Symbol">:</a> <a id="35980" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="35988" href="Demos.HSP.html#7595" class="Generalizable">Œ≤</a> <a id="35990" href="Demos.HSP.html#7597" class="Generalizable">œÅ·µá</a><a id="35992" class="Symbol">}</a> <a id="35994" class="Keyword">where</a>

 <a id="36002" href="Demos.HSP.html#36002" class="Function">HomIm</a> <a id="36008" class="Symbol">:</a> <a id="36010" class="Symbol">(</a><a id="36011" href="Demos.HSP.html#36011" class="Bound">h</a> <a id="36013" class="Symbol">:</a> <a id="36015" href="Demos.HSP.html#26708" class="Function">hom</a> <a id="36019" href="Demos.HSP.html#35958" class="Bound">ùë®</a> <a id="36021" href="Demos.HSP.html#35976" class="Bound">ùë©</a><a id="36022" class="Symbol">)</a> <a id="36024" class="Symbol">‚Üí</a> <a id="36026" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="36034" class="Symbol">_</a> <a id="36036" class="Symbol">_</a>
 <a id="36039" href="Demos.HSP.html#18785" class="Field">Domain</a> <a id="36046" class="Symbol">(</a><a id="36047" href="Demos.HSP.html#36002" class="Function">HomIm</a> <a id="36053" href="Demos.HSP.html#36053" class="Bound">h</a><a id="36054" class="Symbol">)</a> <a id="36056" class="Symbol">=</a> <a id="36058" href="Demos.HSP.html#13866" class="Function">Im</a> <a id="36061" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="36063" href="Demos.HSP.html#36053" class="Bound">h</a> <a id="36065" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a>
 <a id="36068" href="Demos.HSP.html#18814" class="Field">Interp</a> <a id="36075" class="Symbol">(</a><a id="36076" href="Demos.HSP.html#36002" class="Function">HomIm</a> <a id="36082" href="Demos.HSP.html#36082" class="Bound">h</a><a id="36083" class="Symbol">)</a> <a id="36085" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="36089" class="Symbol">(</a><a id="36090" href="Demos.HSP.html#36090" class="Bound">f</a> <a id="36092" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="36094" href="Demos.HSP.html#36094" class="Bound">la</a><a id="36096" class="Symbol">)</a> <a id="36098" class="Symbol">=</a> <a id="36100" class="Symbol">(</a><a id="36101" href="Demos.HSP.html#36090" class="Bound">f</a> <a id="36103" href="Demos.HSP.html#19487" class="Function Operator">ÃÇ</a> <a id="36105" href="Demos.HSP.html#35958" class="Bound">ùë®</a><a id="36106" class="Symbol">)</a> <a id="36108" href="Demos.HSP.html#36094" class="Bound">la</a>
 <a id="36112" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="36117" class="Symbol">(</a><a id="36118" href="Demos.HSP.html#18814" class="Field">Interp</a> <a id="36125" class="Symbol">(</a><a id="36126" href="Demos.HSP.html#36002" class="Function">HomIm</a> <a id="36132" href="Demos.HSP.html#36132" class="Bound">h</a><a id="36133" class="Symbol">))</a> <a id="36136" class="Symbol">{</a><a id="36137" href="Demos.HSP.html#36137" class="Bound">x1</a> <a id="36140" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="36142" href="Demos.HSP.html#36142" class="Bound">x2</a><a id="36144" class="Symbol">}</a> <a id="36146" class="Symbol">{</a><a id="36147" class="DottedPattern Symbol">.</a><a id="36148" href="Demos.HSP.html#36137" class="DottedPattern Bound">x1</a> <a id="36151" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="36153" href="Demos.HSP.html#36153" class="Bound">y2</a><a id="36155" class="Symbol">}</a> <a id="36157" class="Symbol">(</a><a id="36158" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="36165" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="36167" href="Demos.HSP.html#36167" class="Bound">e</a><a id="36168" class="Symbol">)</a> <a id="36170" class="Symbol">=</a>
  <a id="36174" href="Relation.Binary.Reasoning.Base.Single.html#1916" class="Function Operator">begin</a>
      <a id="36186" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="36188" href="Demos.HSP.html#36132" class="Bound">h</a> <a id="36190" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a>  <a id="36193" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a>         <a id="36205" class="Symbol">(</a><a id="36206" href="Demos.HSP.html#18814" class="Field">Interp</a> <a id="36213" href="Demos.HSP.html#35958" class="Bound">ùë®</a>  <a id="36216" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="36220" class="Symbol">(</a><a id="36221" href="Demos.HSP.html#36137" class="Bound">x1</a> <a id="36224" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="36226" href="Demos.HSP.html#36142" class="Bound">x2</a><a id="36228" class="Symbol">))</a>  <a id="36232" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a> <a id="36235" href="Demos.HSP.html#36605" class="Function">h-compatible</a>                  <a id="36265" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
   <a id="36270" href="Demos.HSP.html#18814" class="Field">Interp</a> <a id="36277" href="Demos.HSP.html#35976" class="Bound">ùë©</a>  <a id="36280" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="36284" class="Symbol">(</a><a id="36285" href="Demos.HSP.html#36137" class="Bound">x1</a> <a id="36288" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="36290" class="Symbol">Œª</a> <a id="36292" href="Demos.HSP.html#36292" class="Bound">x</a> <a id="36294" class="Symbol">‚Üí</a> <a id="36296" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="36298" href="Demos.HSP.html#36132" class="Bound">h</a> <a id="36300" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a>  <a id="36303" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="36307" href="Demos.HSP.html#36142" class="Bound">x2</a> <a id="36310" href="Demos.HSP.html#36292" class="Bound">x</a><a id="36311" class="Symbol">)</a>       <a id="36319" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a> <a id="36322" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="36327" class="Symbol">(</a><a id="36328" href="Demos.HSP.html#18814" class="Field">Interp</a> <a id="36335" href="Demos.HSP.html#35976" class="Bound">ùë©</a><a id="36336" class="Symbol">)</a> <a id="36338" class="Symbol">(</a><a id="36339" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="36346" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="36348" href="Demos.HSP.html#36167" class="Bound">e</a><a id="36349" class="Symbol">)</a>  <a id="36352" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
   <a id="36357" href="Demos.HSP.html#18814" class="Field">Interp</a> <a id="36364" href="Demos.HSP.html#35976" class="Bound">ùë©</a>  <a id="36367" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="36371" class="Symbol">(</a><a id="36372" href="Demos.HSP.html#36137" class="Bound">x1</a> <a id="36375" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="36377" class="Symbol">Œª</a> <a id="36379" href="Demos.HSP.html#36379" class="Bound">x</a> <a id="36381" class="Symbol">‚Üí</a> <a id="36383" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="36385" href="Demos.HSP.html#36132" class="Bound">h</a> <a id="36387" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a>  <a id="36390" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="36394" href="Demos.HSP.html#36153" class="Bound">y2</a> <a id="36397" href="Demos.HSP.html#36379" class="Bound">x</a><a id="36398" class="Symbol">)</a>       <a id="36406" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚âàÀò‚ü®</a> <a id="36410" href="Demos.HSP.html#36605" class="Function">h-compatible</a>                 <a id="36439" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚ü©</a>
      <a id="36447" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="36449" href="Demos.HSP.html#36132" class="Bound">h</a> <a id="36451" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a>  <a id="36454" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a>         <a id="36466" class="Symbol">(</a><a id="36467" href="Demos.HSP.html#18814" class="Field">Interp</a> <a id="36474" href="Demos.HSP.html#35958" class="Bound">ùë®</a>  <a id="36477" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="36481" class="Symbol">(</a><a id="36482" href="Demos.HSP.html#36137" class="Bound">x1</a> <a id="36485" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="36487" href="Demos.HSP.html#36153" class="Bound">y2</a><a id="36489" class="Symbol">))</a>  <a id="36493" href="Relation.Binary.Reasoning.Base.Single.html#2555" class="Function Operator">‚àé</a>
   <a id="36498" class="Keyword">where</a>  <a id="36505" class="Keyword">open</a> <a id="36510" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="36517" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="36520" href="Demos.HSP.html#35976" class="Bound">ùë©</a> <a id="36522" href="Demos.HSP.html#19374" class="Function Operator">]</a> <a id="36524" class="Symbol">;</a> <a id="36526" class="Keyword">open</a> <a id="36531" href="Relation.Binary.Reasoning.Setoid.html" class="Module">SetoidReasoning</a> <a id="36547" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="36550" href="Demos.HSP.html#35976" class="Bound">ùë©</a> <a id="36552" href="Demos.HSP.html#19374" class="Function Operator">]</a>
          <a id="36564" class="Keyword">open</a> <a id="36569" href="Demos.HSP.html#26582" class="Module">IsHom</a> <a id="36575" href="Demos.HSP.html#8278" class="Function Operator">‚à•</a> <a id="36577" href="Demos.HSP.html#36132" class="Bound">h</a> <a id="36579" href="Demos.HSP.html#8278" class="Function Operator">‚à•</a> <a id="36581" class="Keyword">renaming</a> <a id="36590" class="Symbol">(</a><a id="36591" href="Demos.HSP.html#26676" class="Field">compatible</a> <a id="36602" class="Symbol">to</a> <a id="36605" class="Field">h-compatible</a><a id="36617" class="Symbol">)</a>

 <a id="36621" href="Demos.HSP.html#36621" class="Function">toHomIm</a> <a id="36629" class="Symbol">:</a> <a id="36631" class="Symbol">(</a><a id="36632" href="Demos.HSP.html#36632" class="Bound">h</a> <a id="36634" class="Symbol">:</a> <a id="36636" href="Demos.HSP.html#26708" class="Function">hom</a> <a id="36640" href="Demos.HSP.html#35958" class="Bound">ùë®</a> <a id="36642" href="Demos.HSP.html#35976" class="Bound">ùë©</a><a id="36643" class="Symbol">)</a> <a id="36645" class="Symbol">‚Üí</a> <a id="36647" href="Demos.HSP.html#26708" class="Function">hom</a> <a id="36651" href="Demos.HSP.html#35958" class="Bound">ùë®</a> <a id="36653" class="Symbol">(</a><a id="36654" href="Demos.HSP.html#36002" class="Function">HomIm</a> <a id="36660" href="Demos.HSP.html#36632" class="Bound">h</a><a id="36661" class="Symbol">)</a>
 <a id="36664" href="Demos.HSP.html#36621" class="Function">toHomIm</a> <a id="36672" href="Demos.HSP.html#36672" class="Bound">h</a> <a id="36674" class="Symbol">=</a> <a id="36676" href="Demos.HSP.html#14084" class="Function">toIm</a> <a id="36681" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="36683" href="Demos.HSP.html#36672" class="Bound">h</a> <a id="36685" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="36687" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="36689" href="Demos.HSP.html#26655" class="InductiveConstructor">mkhom</a> <a id="36695" class="Symbol">(</a><a id="36696" href="Demos.HSP.html#7084" class="Function">reflÀ¢</a> <a id="36702" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="36705" href="Demos.HSP.html#35976" class="Bound">ùë©</a> <a id="36707" href="Demos.HSP.html#19374" class="Function Operator">]</a><a id="36708" class="Symbol">)</a>

 <a id="36712" href="Demos.HSP.html#36712" class="Function">fromHomIm</a> <a id="36722" class="Symbol">:</a> <a id="36724" class="Symbol">(</a><a id="36725" href="Demos.HSP.html#36725" class="Bound">h</a> <a id="36727" class="Symbol">:</a> <a id="36729" href="Demos.HSP.html#26708" class="Function">hom</a> <a id="36733" href="Demos.HSP.html#35958" class="Bound">ùë®</a> <a id="36735" href="Demos.HSP.html#35976" class="Bound">ùë©</a><a id="36736" class="Symbol">)</a> <a id="36738" class="Symbol">‚Üí</a> <a id="36740" href="Demos.HSP.html#26708" class="Function">hom</a> <a id="36744" class="Symbol">(</a><a id="36745" href="Demos.HSP.html#36002" class="Function">HomIm</a> <a id="36751" href="Demos.HSP.html#36725" class="Bound">h</a><a id="36752" class="Symbol">)</a> <a id="36754" href="Demos.HSP.html#35976" class="Bound">ùë©</a>
 <a id="36757" href="Demos.HSP.html#36712" class="Function">fromHomIm</a> <a id="36767" href="Demos.HSP.html#36767" class="Bound">h</a> <a id="36769" class="Symbol">=</a> <a id="36771" href="Demos.HSP.html#14160" class="Function">fromIm</a> <a id="36778" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="36780" href="Demos.HSP.html#36767" class="Bound">h</a> <a id="36782" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="36784" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="36786" href="Demos.HSP.html#26655" class="InductiveConstructor">mkhom</a> <a id="36792" class="Symbol">(</a><a id="36793" href="Demos.HSP.html#26676" class="Field">IsHom.compatible</a> <a id="36810" href="Demos.HSP.html#8278" class="Function Operator">‚à•</a> <a id="36812" href="Demos.HSP.html#36767" class="Bound">h</a> <a id="36814" href="Demos.HSP.html#8278" class="Function Operator">‚à•</a><a id="36815" class="Symbol">)</a>
</pre>


Lift-Alg is an algebraic invariant {#sec:lift-alg}
----------------------------------

The `Lift-Alg` operation neatly resolves the technical problem of universe non-cumulativity because isomorphism classes of algebras are closed under `Lift-Alg`.

<pre class="Agda">

<a id="37093" class="Keyword">module</a> <a id="37100" href="Demos.HSP.html#37100" class="Module">_</a> <a id="37102" class="Symbol">{</a><a id="37103" href="Demos.HSP.html#37103" class="Bound">ùë®</a> <a id="37105" class="Symbol">:</a> <a id="37107" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="37115" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="37117" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a><a id="37119" class="Symbol">}{</a><a id="37121" href="Demos.HSP.html#37121" class="Bound">‚Ñì</a> <a id="37123" class="Symbol">:</a> <a id="37125" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="37130" class="Symbol">}</a> <a id="37132" class="Keyword">where</a>
 <a id="37139" href="Demos.HSP.html#37139" class="Function">Lift-‚âÖÀ°</a> <a id="37147" class="Symbol">:</a> <a id="37149" href="Demos.HSP.html#37103" class="Bound">ùë®</a> <a id="37151" href="Demos.HSP.html#32954" class="Record Operator">‚âÖ</a> <a id="37153" class="Symbol">(</a><a id="37154" href="Demos.HSP.html#21593" class="Function">Lift-AlgÀ°</a> <a id="37164" href="Demos.HSP.html#37103" class="Bound">ùë®</a> <a id="37166" href="Demos.HSP.html#37121" class="Bound">‚Ñì</a><a id="37167" class="Symbol">)</a>
 <a id="37170" href="Demos.HSP.html#37139" class="Function">Lift-‚âÖÀ°</a> <a id="37178" class="Symbol">=</a> <a id="37180" href="Demos.HSP.html#33013" class="InductiveConstructor">mkiso</a> <a id="37186" href="Demos.HSP.html#30107" class="Function">ToLiftÀ°</a> <a id="37194" href="Demos.HSP.html#30211" class="Function">FromLiftÀ°</a> <a id="37204" class="Symbol">(</a><a id="37205" href="Demos.HSP.html#30307" class="Function">ToFromLiftÀ°</a><a id="37216" class="Symbol">{</a><a id="37217" class="Argument">ùë®</a> <a id="37219" class="Symbol">=</a> <a id="37221" href="Demos.HSP.html#37103" class="Bound">ùë®</a><a id="37222" class="Symbol">})</a> <a id="37225" class="Symbol">(</a><a id="37226" href="Demos.HSP.html#30396" class="Function">FromToLiftÀ°</a><a id="37237" class="Symbol">{</a><a id="37238" class="Argument">ùë®</a> <a id="37240" class="Symbol">=</a> <a id="37242" href="Demos.HSP.html#37103" class="Bound">ùë®</a><a id="37243" class="Symbol">}{</a><a id="37245" href="Demos.HSP.html#37121" class="Bound">‚Ñì</a><a id="37246" class="Symbol">})</a>
 <a id="37250" href="Demos.HSP.html#37250" class="Function">Lift-‚âÖ ≥</a> <a id="37258" class="Symbol">:</a> <a id="37260" href="Demos.HSP.html#37103" class="Bound">ùë®</a> <a id="37262" href="Demos.HSP.html#32954" class="Record Operator">‚âÖ</a> <a id="37264" class="Symbol">(</a><a id="37265" href="Demos.HSP.html#21988" class="Function">Lift-Alg ≥</a> <a id="37275" href="Demos.HSP.html#37103" class="Bound">ùë®</a> <a id="37277" href="Demos.HSP.html#37121" class="Bound">‚Ñì</a><a id="37278" class="Symbol">)</a>
 <a id="37281" href="Demos.HSP.html#37250" class="Function">Lift-‚âÖ ≥</a> <a id="37289" class="Symbol">=</a> <a id="37291" href="Demos.HSP.html#33013" class="InductiveConstructor">mkiso</a> <a id="37297" href="Demos.HSP.html#30484" class="Function">ToLift ≥</a> <a id="37305" href="Demos.HSP.html#30595" class="Function">FromLift ≥</a> <a id="37315" class="Symbol">(</a><a id="37316" href="Demos.HSP.html#30691" class="Function">ToFromLift ≥</a><a id="37327" class="Symbol">{</a><a id="37328" class="Argument">ùë®</a> <a id="37330" class="Symbol">=</a> <a id="37332" href="Demos.HSP.html#37103" class="Bound">ùë®</a><a id="37333" class="Symbol">})</a> <a id="37336" class="Symbol">(</a><a id="37337" href="Demos.HSP.html#30784" class="Function">FromToLift ≥</a><a id="37348" class="Symbol">{</a><a id="37349" class="Argument">ùë®</a> <a id="37351" class="Symbol">=</a> <a id="37353" href="Demos.HSP.html#37103" class="Bound">ùë®</a><a id="37354" class="Symbol">}{</a><a id="37356" href="Demos.HSP.html#37121" class="Bound">‚Ñì</a><a id="37357" class="Symbol">})</a>

<a id="Lift-‚âÖ"></a><a id="37361" href="Demos.HSP.html#37361" class="Function">Lift-‚âÖ</a> <a id="37368" class="Symbol">:</a> <a id="37370" class="Symbol">{</a><a id="37371" href="Demos.HSP.html#37371" class="Bound">ùë®</a> <a id="37373" class="Symbol">:</a> <a id="37375" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="37383" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="37385" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a><a id="37387" class="Symbol">}{</a><a id="37389" href="Demos.HSP.html#37389" class="Bound">‚Ñì</a> <a id="37391" href="Demos.HSP.html#37391" class="Bound">œÅ</a> <a id="37393" class="Symbol">:</a> <a id="37395" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="37400" class="Symbol">}</a> <a id="37402" class="Symbol">‚Üí</a> <a id="37404" href="Demos.HSP.html#37371" class="Bound">ùë®</a> <a id="37406" href="Demos.HSP.html#32954" class="Record Operator">‚âÖ</a> <a id="37408" class="Symbol">(</a><a id="37409" href="Demos.HSP.html#22505" class="Function">Lift-Alg</a> <a id="37418" href="Demos.HSP.html#37371" class="Bound">ùë®</a> <a id="37420" href="Demos.HSP.html#37389" class="Bound">‚Ñì</a> <a id="37422" href="Demos.HSP.html#37391" class="Bound">œÅ</a><a id="37423" class="Symbol">)</a>
<a id="37425" href="Demos.HSP.html#37361" class="Function">Lift-‚âÖ</a> <a id="37432" class="Symbol">=</a> <a id="37434" href="Demos.HSP.html#33977" class="Function">‚âÖ-trans</a> <a id="37442" href="Demos.HSP.html#37139" class="Function">Lift-‚âÖÀ°</a> <a id="37450" href="Demos.HSP.html#37250" class="Function">Lift-‚âÖ ≥</a>
</pre>

Subalgebras
-----------

We say that `ùë®` is a *subalgebra* of `ùë©` and write `ùë® ‚â§ ùë©` just in case `ùë®` can be *homomorphically
embedded* in `ùë©`; in other terms, `ùë® ‚â§ ùë©` iff there exists an injective hom from `ùë®` to `ùë©`.

<pre class="Agda">

<a id="_‚â§_"></a><a id="37703" href="Demos.HSP.html#37703" class="Function Operator">_‚â§_</a> <a id="37707" class="Symbol">:</a> <a id="37709" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="37717" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="37719" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a> <a id="37722" class="Symbol">‚Üí</a> <a id="37724" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="37732" href="Demos.HSP.html#7595" class="Generalizable">Œ≤</a> <a id="37734" href="Demos.HSP.html#7597" class="Generalizable">œÅ·µá</a> <a id="37737" class="Symbol">‚Üí</a> <a id="37739" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="37744" class="Symbol">_</a>
<a id="37746" href="Demos.HSP.html#37746" class="Bound">ùë®</a> <a id="37748" href="Demos.HSP.html#37703" class="Function Operator">‚â§</a> <a id="37750" href="Demos.HSP.html#37750" class="Bound">ùë©</a> <a id="37752" class="Symbol">=</a> <a id="37754" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="37757" href="Demos.HSP.html#37757" class="Bound">h</a> <a id="37759" href="Data.Product.html#916" class="Function">‚àà</a> <a id="37761" href="Demos.HSP.html#26708" class="Function">hom</a> <a id="37765" href="Demos.HSP.html#37746" class="Bound">ùë®</a> <a id="37767" href="Demos.HSP.html#37750" class="Bound">ùë©</a> <a id="37769" href="Data.Product.html#916" class="Function">]</a> <a id="37771" href="Demos.HSP.html#12462" class="Function">IsInjective</a> <a id="37783" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="37785" href="Demos.HSP.html#37757" class="Bound">h</a> <a id="37787" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a>

</pre>
The subalgebra relation is reflexive, by the identity monomorphism (and transitive by composition of monomorphisms, hence, a *preorder*, though we won't need this fact here).

<pre class="Agda">

<a id="‚â§-reflexive"></a><a id="37991" href="Demos.HSP.html#37991" class="Function">‚â§-reflexive</a>   <a id="38005" class="Symbol">:</a>  <a id="38008" class="Symbol">{</a><a id="38009" href="Demos.HSP.html#38009" class="Bound">ùë®</a> <a id="38011" class="Symbol">:</a> <a id="38013" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="38021" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="38023" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a><a id="38025" class="Symbol">}</a> <a id="38027" class="Symbol">‚Üí</a> <a id="38029" href="Demos.HSP.html#38009" class="Bound">ùë®</a> <a id="38031" href="Demos.HSP.html#37703" class="Function Operator">‚â§</a> <a id="38033" href="Demos.HSP.html#38009" class="Bound">ùë®</a>
<a id="38035" href="Demos.HSP.html#37991" class="Function">‚â§-reflexive</a> <a id="38047" class="Symbol">=</a> <a id="38049" href="Demos.HSP.html#29636" class="Function">ùíæùíπ</a> <a id="38052" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="38054" href="Function.Base.html#615" class="Function">id</a>

</pre>

<!-- If `ùíú : I ‚Üí Algebra Œ± œÅ·µÉ`, `‚Ñ¨ : I ‚Üí Algebra Œ≤ œÅ·µá` (families of -algebras) and if `‚Ñ¨ i ‚â§ ùíú i` for all `i : I`, then `‚®Ö ‚Ñ¨` is a subalgebra of `‚®Ö ùíú`. Below we will use to denote this fact. -->

We conclude this section with an easy fact that will be useful later; it simply converts a monomorphism into a proof of a subalgebra relationship.

<pre class="Agda">

<a id="mon‚Üí‚â§"></a><a id="38428" href="Demos.HSP.html#38428" class="Function">mon‚Üí‚â§</a> <a id="38434" class="Symbol">:</a> <a id="38436" class="Symbol">{</a><a id="38437" href="Demos.HSP.html#38437" class="Bound">ùë®</a> <a id="38439" class="Symbol">:</a> <a id="38441" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="38449" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="38451" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a><a id="38453" class="Symbol">}{</a><a id="38455" href="Demos.HSP.html#38455" class="Bound">ùë©</a> <a id="38457" class="Symbol">:</a> <a id="38459" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="38467" href="Demos.HSP.html#7595" class="Generalizable">Œ≤</a> <a id="38469" href="Demos.HSP.html#7597" class="Generalizable">œÅ·µá</a><a id="38471" class="Symbol">}</a> <a id="38473" class="Symbol">‚Üí</a> <a id="38475" href="Demos.HSP.html#27337" class="Function">mon</a> <a id="38479" href="Demos.HSP.html#38437" class="Bound">ùë®</a> <a id="38481" href="Demos.HSP.html#38455" class="Bound">ùë©</a> <a id="38483" class="Symbol">‚Üí</a> <a id="38485" href="Demos.HSP.html#38437" class="Bound">ùë®</a> <a id="38487" href="Demos.HSP.html#37703" class="Function Operator">‚â§</a> <a id="38489" href="Demos.HSP.html#38455" class="Bound">ùë©</a>
<a id="38491" href="Demos.HSP.html#38428" class="Function">mon‚Üí‚â§</a> <a id="38497" class="Symbol">{</a><a id="38498" class="Argument">ùë®</a> <a id="38500" class="Symbol">=</a> <a id="38502" href="Demos.HSP.html#38502" class="Bound">ùë®</a><a id="38503" class="Symbol">}{</a><a id="38505" href="Demos.HSP.html#38505" class="Bound">ùë©</a><a id="38506" class="Symbol">}</a> <a id="38508" href="Demos.HSP.html#38508" class="Bound">x</a> <a id="38510" class="Symbol">=</a> <a id="38512" href="Demos.HSP.html#27998" class="Function">mon‚Üíintohom</a> <a id="38524" href="Demos.HSP.html#38502" class="Bound">ùë®</a> <a id="38526" href="Demos.HSP.html#38505" class="Bound">ùë©</a> <a id="38528" href="Demos.HSP.html#38508" class="Bound">x</a>
</pre>

Terms
-----

Fix a signature `ùëÜ` and let `X` denote an arbitrary nonempty collection of variable symbols. Such a collection is called a *context*. Assume the symbols in `X` are distinct from the operation symbols of `ùëÜ`, that is `X ‚à© ‚à£ ùëÜ ‚à£ = ‚àÖ`. A *word* in the language of `ùëÜ` is a finite sequence of members of `X ‚à™ ‚à£ ùëÜ ‚à£`. We denote the
concatenation of such sequences by simple juxtaposition. Let `S‚ÇÄ` denote the set of nullary operation symbols of `ùëÜ`. We define by induction on `n` the sets `T‚Çô` of *words* over `X ‚à™ ‚à£ ùëÜ ‚à£` as follows: `T‚ÇÄ := X ‚à™ S‚ÇÄ` and 
`T‚Çô‚Çä‚ÇÅ := T‚Çô ‚à™ ùíØ‚Çô`, where `ùíØ‚Çô` is the collection of all `f t` such that `f : ‚à£ ùëÜ ‚à£` and `t : ‚à• ùëÜ ‚à• f ‚Üí ùëá‚Çô`.
(Recall, `‚à• ùëÜ ‚à• f` is the arity of the operation symbol `f`.)
An `ùëÜ`-*term* is a term in the language of `ùëÜ` and the collection of all `ùëÜ`-terms in the context `X` is `Term X := ‚ãÉ‚Çô T‚Çô`.

In type theory, this translates to two cases: variable injection and applying an operation symbol to a tuple of terms. This represents each term as a tree with an operation symbol at each `node` and a variable symbol at
each leaf `‚Ñä`; hence the constructor names (`‚Ñä` for "generator" and `node` for "node") in the following inductively defined type.

<pre class="Agda">

<a id="39763" class="Keyword">data</a> <a id="Term"></a><a id="39768" href="Demos.HSP.html#39768" class="Datatype">Term</a> <a id="39773" class="Symbol">(</a><a id="39774" href="Demos.HSP.html#39774" class="Bound">X</a> <a id="39776" class="Symbol">:</a> <a id="39778" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="39783" href="Demos.HSP.html#7612" class="Generalizable">œá</a><a id="39784" class="Symbol">)</a> <a id="39786" class="Symbol">:</a> <a id="39788" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="39793" class="Symbol">(</a><a id="39794" href="Demos.HSP.html#34906" class="Function">ov</a> <a id="39797" href="Demos.HSP.html#39783" class="Bound">œá</a><a id="39798" class="Symbol">)</a>  <a id="39801" class="Keyword">where</a>
 <a id="Term.‚Ñä"></a><a id="39808" href="Demos.HSP.html#39808" class="InductiveConstructor">‚Ñä</a> <a id="39810" class="Symbol">:</a> <a id="39812" href="Demos.HSP.html#39774" class="Bound">X</a> <a id="39814" class="Symbol">‚Üí</a> <a id="39816" href="Demos.HSP.html#39768" class="Datatype">Term</a> <a id="39821" href="Demos.HSP.html#39774" class="Bound">X</a>
 <a id="Term.node"></a><a id="39824" href="Demos.HSP.html#39824" class="InductiveConstructor">node</a> <a id="39829" class="Symbol">:</a> <a id="39831" class="Symbol">(</a><a id="39832" href="Demos.HSP.html#39832" class="Bound">f</a> <a id="39834" class="Symbol">:</a> <a id="39836" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="39838" href="Demos.HSP.html#5460" class="Bound">ùëÜ</a> <a id="39840" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a><a id="39841" class="Symbol">)(</a><a id="39843" href="Demos.HSP.html#39843" class="Bound">t</a> <a id="39845" class="Symbol">:</a> <a id="39847" href="Demos.HSP.html#8278" class="Function Operator">‚à•</a> <a id="39849" href="Demos.HSP.html#5460" class="Bound">ùëÜ</a> <a id="39851" href="Demos.HSP.html#8278" class="Function Operator">‚à•</a> <a id="39853" href="Demos.HSP.html#39832" class="Bound">f</a> <a id="39855" class="Symbol">‚Üí</a> <a id="39857" href="Demos.HSP.html#39768" class="Datatype">Term</a> <a id="39862" href="Demos.HSP.html#39774" class="Bound">X</a><a id="39863" class="Symbol">)</a> <a id="39865" class="Symbol">‚Üí</a> <a id="39867" href="Demos.HSP.html#39768" class="Datatype">Term</a> <a id="39872" href="Demos.HSP.html#39774" class="Bound">X</a>
</pre>

#### <a id="the-term-algebra">The term algebra</a>

We enrich the `Term` type to a setoid of `ùëÜ`-terms, which will ultimately be the domain of an algebra, called the *term algebra in the signature* `ùëÜ`. For this we need an equivalence relation on terms.

<pre class="Agda">

<a id="40155" class="Keyword">module</a> <a id="40162" href="Demos.HSP.html#40162" class="Module">_</a> <a id="40164" class="Symbol">{</a><a id="40165" href="Demos.HSP.html#40165" class="Bound">X</a> <a id="40167" class="Symbol">:</a> <a id="40169" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="40174" href="Demos.HSP.html#7612" class="Generalizable">œá</a> <a id="40176" class="Symbol">}</a> <a id="40178" class="Keyword">where</a>

 <a id="40186" class="Keyword">data</a> <a id="40191" href="Demos.HSP.html#40191" class="Datatype Operator">_‚âÉ_</a> <a id="40195" class="Symbol">:</a> <a id="40197" href="Demos.HSP.html#39768" class="Datatype">Term</a> <a id="40202" href="Demos.HSP.html#40165" class="Bound">X</a> <a id="40204" class="Symbol">‚Üí</a> <a id="40206" href="Demos.HSP.html#39768" class="Datatype">Term</a> <a id="40211" href="Demos.HSP.html#40165" class="Bound">X</a> <a id="40213" class="Symbol">‚Üí</a> <a id="40215" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="40220" class="Symbol">(</a><a id="40221" href="Demos.HSP.html#34906" class="Function">ov</a> <a id="40224" href="Demos.HSP.html#40174" class="Bound">œá</a><a id="40225" class="Symbol">)</a> <a id="40227" class="Keyword">where</a>
  <a id="40235" href="Demos.HSP.html#40235" class="InductiveConstructor">rfl</a> <a id="40239" class="Symbol">:</a> <a id="40241" class="Symbol">{</a><a id="40242" href="Demos.HSP.html#40242" class="Bound">x</a> <a id="40244" href="Demos.HSP.html#40244" class="Bound">y</a> <a id="40246" class="Symbol">:</a> <a id="40248" href="Demos.HSP.html#40165" class="Bound">X</a><a id="40249" class="Symbol">}</a> <a id="40251" class="Symbol">‚Üí</a> <a id="40253" href="Demos.HSP.html#40242" class="Bound">x</a> <a id="40255" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">‚â°</a> <a id="40257" href="Demos.HSP.html#40244" class="Bound">y</a> <a id="40259" class="Symbol">‚Üí</a> <a id="40261" class="Symbol">(</a><a id="40262" href="Demos.HSP.html#39808" class="InductiveConstructor">‚Ñä</a> <a id="40264" href="Demos.HSP.html#40242" class="Bound">x</a><a id="40265" class="Symbol">)</a> <a id="40267" href="Demos.HSP.html#40191" class="Datatype Operator">‚âÉ</a> <a id="40269" class="Symbol">(</a><a id="40270" href="Demos.HSP.html#39808" class="InductiveConstructor">‚Ñä</a> <a id="40272" href="Demos.HSP.html#40244" class="Bound">y</a><a id="40273" class="Symbol">)</a>
  <a id="40277" href="Demos.HSP.html#40277" class="InductiveConstructor">gnl</a> <a id="40281" class="Symbol">:</a> <a id="40283" class="Symbol">‚àÄ</a> <a id="40285" class="Symbol">{</a><a id="40286" href="Demos.HSP.html#40286" class="Bound">f</a><a id="40287" class="Symbol">}{</a><a id="40289" href="Demos.HSP.html#40289" class="Bound">s</a> <a id="40291" href="Demos.HSP.html#40291" class="Bound">t</a> <a id="40293" class="Symbol">:</a> <a id="40295" href="Demos.HSP.html#8278" class="Function Operator">‚à•</a> <a id="40297" href="Demos.HSP.html#5460" class="Bound">ùëÜ</a> <a id="40299" href="Demos.HSP.html#8278" class="Function Operator">‚à•</a> <a id="40301" href="Demos.HSP.html#40286" class="Bound">f</a> <a id="40303" class="Symbol">‚Üí</a> <a id="40305" href="Demos.HSP.html#39768" class="Datatype">Term</a> <a id="40310" href="Demos.HSP.html#40165" class="Bound">X</a><a id="40311" class="Symbol">}</a> <a id="40313" class="Symbol">‚Üí</a> <a id="40315" class="Symbol">(‚àÄ</a> <a id="40318" href="Demos.HSP.html#40318" class="Bound">i</a> <a id="40320" class="Symbol">‚Üí</a> <a id="40322" class="Symbol">(</a><a id="40323" href="Demos.HSP.html#40289" class="Bound">s</a> <a id="40325" href="Demos.HSP.html#40318" class="Bound">i</a><a id="40326" class="Symbol">)</a> <a id="40328" href="Demos.HSP.html#40191" class="Datatype Operator">‚âÉ</a> <a id="40330" class="Symbol">(</a><a id="40331" href="Demos.HSP.html#40291" class="Bound">t</a> <a id="40333" href="Demos.HSP.html#40318" class="Bound">i</a><a id="40334" class="Symbol">))</a> <a id="40337" class="Symbol">‚Üí</a> <a id="40339" class="Symbol">(</a><a id="40340" href="Demos.HSP.html#39824" class="InductiveConstructor">node</a> <a id="40345" href="Demos.HSP.html#40286" class="Bound">f</a> <a id="40347" href="Demos.HSP.html#40289" class="Bound">s</a><a id="40348" class="Symbol">)</a> <a id="40350" href="Demos.HSP.html#40191" class="Datatype Operator">‚âÉ</a> <a id="40352" class="Symbol">(</a><a id="40353" href="Demos.HSP.html#39824" class="InductiveConstructor">node</a> <a id="40358" href="Demos.HSP.html#40286" class="Bound">f</a> <a id="40360" href="Demos.HSP.html#40291" class="Bound">t</a><a id="40361" class="Symbol">)</a>

</pre>

It is easy to show that `_‚âÉ_` is an equivalence relation as follows.

<pre class="Agda">

 <a id="40461" href="Demos.HSP.html#40461" class="Function">‚âÉ-isRefl</a>   <a id="40472" class="Symbol">:</a> <a id="40474" href="Relation.Binary.Definitions.html#1339" class="Function">Reflexive</a>      <a id="40489" href="Demos.HSP.html#40191" class="Datatype Operator">_‚âÉ_</a>
 <a id="40494" href="Demos.HSP.html#40461" class="Function">‚âÉ-isRefl</a> <a id="40503" class="Symbol">{</a><a id="40504" href="Demos.HSP.html#39808" class="InductiveConstructor">‚Ñä</a> <a id="40506" class="Symbol">_}</a> <a id="40509" class="Symbol">=</a> <a id="40511" href="Demos.HSP.html#40235" class="InductiveConstructor">rfl</a> <a id="40515" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a>
 <a id="40523" href="Demos.HSP.html#40461" class="Function">‚âÉ-isRefl</a> <a id="40532" class="Symbol">{</a><a id="40533" href="Demos.HSP.html#39824" class="InductiveConstructor">node</a> <a id="40538" class="Symbol">_</a> <a id="40540" class="Symbol">_}</a> <a id="40543" class="Symbol">=</a> <a id="40545" href="Demos.HSP.html#40277" class="InductiveConstructor">gnl</a> <a id="40549" class="Symbol">Œª</a> <a id="40551" href="Demos.HSP.html#40551" class="Bound">_</a> <a id="40553" class="Symbol">‚Üí</a> <a id="40555" href="Demos.HSP.html#40461" class="Function">‚âÉ-isRefl</a>

 <a id="40566" href="Demos.HSP.html#40566" class="Function">‚âÉ-isSym</a>    <a id="40577" class="Symbol">:</a> <a id="40579" href="Relation.Binary.Definitions.html#1498" class="Function">Symmetric</a>      <a id="40594" href="Demos.HSP.html#40191" class="Datatype Operator">_‚âÉ_</a>
 <a id="40599" href="Demos.HSP.html#40566" class="Function">‚âÉ-isSym</a> <a id="40607" class="Symbol">(</a><a id="40608" href="Demos.HSP.html#40235" class="InductiveConstructor">rfl</a> <a id="40612" href="Demos.HSP.html#40612" class="Bound">x</a><a id="40613" class="Symbol">)</a> <a id="40615" class="Symbol">=</a> <a id="40617" href="Demos.HSP.html#40235" class="InductiveConstructor">rfl</a> <a id="40621" class="Symbol">(</a><a id="40622" href="Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">‚â°.sym</a> <a id="40628" href="Demos.HSP.html#40612" class="Bound">x</a><a id="40629" class="Symbol">)</a>
 <a id="40632" href="Demos.HSP.html#40566" class="Function">‚âÉ-isSym</a> <a id="40640" class="Symbol">(</a><a id="40641" href="Demos.HSP.html#40277" class="InductiveConstructor">gnl</a> <a id="40645" href="Demos.HSP.html#40645" class="Bound">x</a><a id="40646" class="Symbol">)</a> <a id="40648" class="Symbol">=</a> <a id="40650" href="Demos.HSP.html#40277" class="InductiveConstructor">gnl</a> <a id="40654" class="Symbol">Œª</a> <a id="40656" href="Demos.HSP.html#40656" class="Bound">i</a> <a id="40658" class="Symbol">‚Üí</a> <a id="40660" href="Demos.HSP.html#40566" class="Function">‚âÉ-isSym</a> <a id="40668" class="Symbol">(</a><a id="40669" href="Demos.HSP.html#40645" class="Bound">x</a> <a id="40671" href="Demos.HSP.html#40656" class="Bound">i</a><a id="40672" class="Symbol">)</a>

 <a id="40676" href="Demos.HSP.html#40676" class="Function">‚âÉ-isTrans</a>  <a id="40687" class="Symbol">:</a> <a id="40689" href="Relation.Binary.Definitions.html#1978" class="Function">Transitive</a>     <a id="40704" href="Demos.HSP.html#40191" class="Datatype Operator">_‚âÉ_</a>
 <a id="40709" href="Demos.HSP.html#40676" class="Function">‚âÉ-isTrans</a> <a id="40719" class="Symbol">(</a><a id="40720" href="Demos.HSP.html#40235" class="InductiveConstructor">rfl</a> <a id="40724" href="Demos.HSP.html#40724" class="Bound">x</a><a id="40725" class="Symbol">)</a> <a id="40727" class="Symbol">(</a><a id="40728" href="Demos.HSP.html#40235" class="InductiveConstructor">rfl</a> <a id="40732" href="Demos.HSP.html#40732" class="Bound">y</a><a id="40733" class="Symbol">)</a> <a id="40735" class="Symbol">=</a> <a id="40737" href="Demos.HSP.html#40235" class="InductiveConstructor">rfl</a> <a id="40741" class="Symbol">(</a><a id="40742" href="Relation.Binary.PropositionalEquality.Core.html#1729" class="Function">‚â°.trans</a> <a id="40750" href="Demos.HSP.html#40724" class="Bound">x</a> <a id="40752" href="Demos.HSP.html#40732" class="Bound">y</a><a id="40753" class="Symbol">)</a>
 <a id="40756" href="Demos.HSP.html#40676" class="Function">‚âÉ-isTrans</a> <a id="40766" class="Symbol">(</a><a id="40767" href="Demos.HSP.html#40277" class="InductiveConstructor">gnl</a> <a id="40771" href="Demos.HSP.html#40771" class="Bound">x</a><a id="40772" class="Symbol">)</a> <a id="40774" class="Symbol">(</a><a id="40775" href="Demos.HSP.html#40277" class="InductiveConstructor">gnl</a> <a id="40779" href="Demos.HSP.html#40779" class="Bound">y</a><a id="40780" class="Symbol">)</a> <a id="40782" class="Symbol">=</a> <a id="40784" href="Demos.HSP.html#40277" class="InductiveConstructor">gnl</a> <a id="40788" class="Symbol">Œª</a> <a id="40790" href="Demos.HSP.html#40790" class="Bound">i</a> <a id="40792" class="Symbol">‚Üí</a> <a id="40794" href="Demos.HSP.html#40676" class="Function">‚âÉ-isTrans</a> <a id="40804" class="Symbol">(</a><a id="40805" href="Demos.HSP.html#40771" class="Bound">x</a> <a id="40807" href="Demos.HSP.html#40790" class="Bound">i</a><a id="40808" class="Symbol">)</a> <a id="40810" class="Symbol">(</a><a id="40811" href="Demos.HSP.html#40779" class="Bound">y</a> <a id="40813" href="Demos.HSP.html#40790" class="Bound">i</a><a id="40814" class="Symbol">)</a>

 <a id="40818" href="Demos.HSP.html#40818" class="Function">‚âÉ-isEquiv</a>  <a id="40829" class="Symbol">:</a> <a id="40831" href="Relation.Binary.Structures.html#1522" class="Record">IsEquivalence</a>  <a id="40846" href="Demos.HSP.html#40191" class="Datatype Operator">_‚âÉ_</a>
 <a id="40851" href="Demos.HSP.html#40818" class="Function">‚âÉ-isEquiv</a> <a id="40861" class="Symbol">=</a> <a id="40863" class="Keyword">record</a> <a id="40870" class="Symbol">{</a> <a id="40872" href="Relation.Binary.Structures.html#1568" class="Field">refl</a> <a id="40877" class="Symbol">=</a> <a id="40879" href="Demos.HSP.html#40461" class="Function">‚âÉ-isRefl</a> <a id="40888" class="Symbol">;</a> <a id="40890" href="Relation.Binary.Structures.html#1594" class="Field">sym</a> <a id="40894" class="Symbol">=</a> <a id="40896" href="Demos.HSP.html#40566" class="Function">‚âÉ-isSym</a> <a id="40904" class="Symbol">;</a> <a id="40906" href="Relation.Binary.Structures.html#1620" class="Field">trans</a> <a id="40912" class="Symbol">=</a> <a id="40914" href="Demos.HSP.html#40676" class="Function">‚âÉ-isTrans</a> <a id="40924" class="Symbol">}</a>
</pre>

For a given signature `ùëÜ` and context `X`, we define the algebra `ùëª X`, known as the *term algebra in* 
`ùëÜ` *over* `X`. The domain of `ùëª X` is `Term X` and, for each operation symbol `f : ‚à£ ùëÜ ‚à£`, we define 
`f ÃÇ ùëª X` to be the operation which maps each tuple `t : ‚à• ùëÜ ‚à• f ‚Üí Term X` of terms to the formal
term `f t`.

<pre class="Agda">

<a id="TermSetoid"></a><a id="41270" href="Demos.HSP.html#41270" class="Function">TermSetoid</a> <a id="41281" class="Symbol">:</a> <a id="41283" class="Symbol">(</a><a id="41284" href="Demos.HSP.html#41284" class="Bound">X</a> <a id="41286" class="Symbol">:</a> <a id="41288" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="41293" href="Demos.HSP.html#7612" class="Generalizable">œá</a><a id="41294" class="Symbol">)</a> <a id="41296" class="Symbol">‚Üí</a> <a id="41298" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="41305" class="Symbol">_</a> <a id="41307" class="Symbol">_</a>
<a id="41309" href="Demos.HSP.html#41270" class="Function">TermSetoid</a> <a id="41320" href="Demos.HSP.html#41320" class="Bound">X</a> <a id="41322" class="Symbol">=</a> <a id="41324" class="Keyword">record</a> <a id="41331" class="Symbol">{</a> <a id="41333" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="41341" class="Symbol">=</a> <a id="41343" href="Demos.HSP.html#39768" class="Datatype">Term</a> <a id="41348" href="Demos.HSP.html#41320" class="Bound">X</a> <a id="41350" class="Symbol">;</a> <a id="41352" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="41356" class="Symbol">=</a> <a id="41358" href="Demos.HSP.html#40191" class="Datatype Operator">_‚âÉ_</a> <a id="41362" class="Symbol">;</a> <a id="41364" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="41378" class="Symbol">=</a> <a id="41380" href="Demos.HSP.html#40818" class="Function">‚âÉ-isEquiv</a> <a id="41390" class="Symbol">}</a>

<a id="ùëª"></a><a id="41393" href="Demos.HSP.html#41393" class="Function">ùëª</a> <a id="41395" class="Symbol">:</a> <a id="41397" class="Symbol">(</a><a id="41398" href="Demos.HSP.html#41398" class="Bound">X</a> <a id="41400" class="Symbol">:</a> <a id="41402" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="41407" href="Demos.HSP.html#7612" class="Generalizable">œá</a><a id="41408" class="Symbol">)</a> <a id="41410" class="Symbol">‚Üí</a> <a id="41412" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="41420" class="Symbol">(</a><a id="41421" href="Demos.HSP.html#34906" class="Function">ov</a> <a id="41424" href="Demos.HSP.html#7612" class="Generalizable">œá</a><a id="41425" class="Symbol">)</a> <a id="41427" class="Symbol">(</a><a id="41428" href="Demos.HSP.html#34906" class="Function">ov</a> <a id="41431" href="Demos.HSP.html#7612" class="Generalizable">œá</a><a id="41432" class="Symbol">)</a>
<a id="41434" href="Demos.HSP.html#18785" class="Field">Algebra.Domain</a> <a id="41449" class="Symbol">(</a><a id="41450" href="Demos.HSP.html#41393" class="Function">ùëª</a> <a id="41452" href="Demos.HSP.html#41452" class="Bound">X</a><a id="41453" class="Symbol">)</a> <a id="41455" class="Symbol">=</a> <a id="41457" href="Demos.HSP.html#41270" class="Function">TermSetoid</a> <a id="41468" href="Demos.HSP.html#41452" class="Bound">X</a>
<a id="41470" href="Demos.HSP.html#18814" class="Field">Algebra.Interp</a> <a id="41485" class="Symbol">(</a><a id="41486" href="Demos.HSP.html#41393" class="Function">ùëª</a> <a id="41488" href="Demos.HSP.html#41488" class="Bound">X</a><a id="41489" class="Symbol">)</a> <a id="41491" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="41495" class="Symbol">(</a><a id="41496" href="Demos.HSP.html#41496" class="Bound">f</a> <a id="41498" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="41500" href="Demos.HSP.html#41500" class="Bound">ts</a><a id="41502" class="Symbol">)</a> <a id="41504" class="Symbol">=</a> <a id="41506" href="Demos.HSP.html#39824" class="InductiveConstructor">node</a> <a id="41511" href="Demos.HSP.html#41496" class="Bound">f</a> <a id="41513" href="Demos.HSP.html#41500" class="Bound">ts</a>
<a id="41516" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="41521" class="Symbol">(</a><a id="41522" href="Demos.HSP.html#18814" class="Field">Algebra.Interp</a> <a id="41537" class="Symbol">(</a><a id="41538" href="Demos.HSP.html#41393" class="Function">ùëª</a> <a id="41540" href="Demos.HSP.html#41540" class="Bound">X</a><a id="41541" class="Symbol">))</a> <a id="41544" class="Symbol">(</a><a id="41545" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="41552" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="41554" href="Demos.HSP.html#41554" class="Bound">ss‚âÉts</a><a id="41559" class="Symbol">)</a> <a id="41561" class="Symbol">=</a> <a id="41563" href="Demos.HSP.html#40277" class="InductiveConstructor">gnl</a> <a id="41567" href="Demos.HSP.html#41554" class="Bound">ss‚âÉts</a>
</pre>



#### <a id="environments-and-interpretation-of-terms">Environments and interpretation of terms</a>

Fix a signature `ùëÜ` and a context `X`. An *environment* for `ùë®` and `X` is a setoid whose carrier
is a mapping from the variable symbols `X` to the domain `ùïå[ ùê¥ ]` and whose equivalence relation is 
point-wise equality. Our formalization of this concept is the same as that of¬†[@Abel:2021], which 
Abel uses to formalize Birkhoff's completeness theorem.

<pre class="Agda">

<a id="42056" class="Keyword">module</a> <a id="Environment"></a><a id="42063" href="Demos.HSP.html#42063" class="Module">Environment</a> <a id="42075" class="Symbol">(</a><a id="42076" href="Demos.HSP.html#42076" class="Bound">ùë®</a> <a id="42078" class="Symbol">:</a> <a id="42080" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="42088" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="42090" href="Demos.HSP.html#7614" class="Generalizable">‚Ñì</a><a id="42091" class="Symbol">)</a> <a id="42093" class="Keyword">where</a>
 <a id="42100" class="Keyword">open</a> <a id="42105" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="42112" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="42115" href="Demos.HSP.html#42076" class="Bound">ùë®</a> <a id="42117" href="Demos.HSP.html#19374" class="Function Operator">]</a> <a id="42119" class="Keyword">using</a> <a id="42125" class="Symbol">(</a> <a id="42127" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="42131" class="Symbol">;</a> <a id="42133" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="42138" class="Symbol">;</a> <a id="42140" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="42144" class="Symbol">;</a> <a id="42146" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="42152" class="Symbol">)</a>

 <a id="Environment.Env"></a><a id="42156" href="Demos.HSP.html#42156" class="Function">Env</a> <a id="42160" class="Symbol">:</a> <a id="42162" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="42167" href="Demos.HSP.html#7612" class="Generalizable">œá</a> <a id="42169" class="Symbol">‚Üí</a> <a id="42171" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="42178" class="Symbol">_</a> <a id="42180" class="Symbol">_</a>
 <a id="42183" href="Demos.HSP.html#42156" class="Function">Env</a> <a id="42187" href="Demos.HSP.html#42187" class="Bound">X</a> <a id="42189" class="Symbol">=</a> <a id="42191" class="Keyword">record</a>  <a id="42199" class="Symbol">{</a> <a id="42201" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="42209" class="Symbol">=</a> <a id="42211" href="Demos.HSP.html#42187" class="Bound">X</a> <a id="42213" class="Symbol">‚Üí</a> <a id="42215" href="Demos.HSP.html#19428" class="Function Operator">ùïå[</a> <a id="42218" href="Demos.HSP.html#42076" class="Bound">ùë®</a> <a id="42220" href="Demos.HSP.html#19428" class="Function Operator">]</a>
                 <a id="42239" class="Symbol">;</a> <a id="42241" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="42245" class="Symbol">=</a> <a id="42247" class="Symbol">Œª</a> <a id="42249" href="Demos.HSP.html#42249" class="Bound">œÅ</a> <a id="42251" href="Demos.HSP.html#42251" class="Bound">œÑ</a> <a id="42253" class="Symbol">‚Üí</a> <a id="42255" class="Symbol">(</a><a id="42256" href="Demos.HSP.html#42256" class="Bound">x</a> <a id="42258" class="Symbol">:</a> <a id="42260" href="Demos.HSP.html#42187" class="Bound">X</a><a id="42261" class="Symbol">)</a> <a id="42263" class="Symbol">‚Üí</a> <a id="42265" href="Demos.HSP.html#42249" class="Bound">œÅ</a> <a id="42267" href="Demos.HSP.html#42256" class="Bound">x</a> <a id="42269" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a> <a id="42271" href="Demos.HSP.html#42251" class="Bound">œÑ</a> <a id="42273" href="Demos.HSP.html#42256" class="Bound">x</a>
                 <a id="42292" class="Symbol">;</a> <a id="42294" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="42308" class="Symbol">=</a> <a id="42310" class="Keyword">record</a>  <a id="42318" class="Symbol">{</a> <a id="42320" href="Relation.Binary.Structures.html#1568" class="Field">refl</a>   <a id="42327" class="Symbol">=</a> <a id="42329" class="Symbol">Œª</a> <a id="42331" href="Demos.HSP.html#42331" class="Bound">_</a>      <a id="42338" class="Symbol">‚Üí</a> <a id="42340" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>
                                           <a id="42388" class="Symbol">;</a> <a id="42390" href="Relation.Binary.Structures.html#1594" class="Field">sym</a>    <a id="42397" class="Symbol">=</a> <a id="42399" class="Symbol">Œª</a> <a id="42401" href="Demos.HSP.html#42401" class="Bound">h</a> <a id="42403" href="Demos.HSP.html#42403" class="Bound">x</a>    <a id="42408" class="Symbol">‚Üí</a> <a id="42410" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="42414" class="Symbol">(</a><a id="42415" href="Demos.HSP.html#42401" class="Bound">h</a> <a id="42417" href="Demos.HSP.html#42403" class="Bound">x</a><a id="42418" class="Symbol">)</a>
                                           <a id="42463" class="Symbol">;</a> <a id="42465" href="Relation.Binary.Structures.html#1620" class="Field">trans</a>  <a id="42472" class="Symbol">=</a> <a id="42474" class="Symbol">Œª</a> <a id="42476" href="Demos.HSP.html#42476" class="Bound">g</a> <a id="42478" href="Demos.HSP.html#42478" class="Bound">h</a> <a id="42480" href="Demos.HSP.html#42480" class="Bound">x</a>  <a id="42483" class="Symbol">‚Üí</a> <a id="42485" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="42491" class="Symbol">(</a><a id="42492" href="Demos.HSP.html#42476" class="Bound">g</a> <a id="42494" href="Demos.HSP.html#42480" class="Bound">x</a><a id="42495" class="Symbol">)(</a><a id="42497" href="Demos.HSP.html#42478" class="Bound">h</a> <a id="42499" href="Demos.HSP.html#42480" class="Bound">x</a><a id="42500" class="Symbol">)</a> <a id="42502" class="Symbol">}}</a>

</pre>
The *interpretation* of a term *evaluated* in a particular environment is defined as follows.

<pre class="Agda">

 <a id="Environment.‚ü¶_‚üß"></a><a id="42627" href="Demos.HSP.html#42627" class="Function Operator">‚ü¶_‚üß</a> <a id="42631" class="Symbol">:</a> <a id="42633" class="Symbol">{</a><a id="42634" href="Demos.HSP.html#42634" class="Bound">X</a> <a id="42636" class="Symbol">:</a> <a id="42638" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="42643" href="Demos.HSP.html#7612" class="Generalizable">œá</a><a id="42644" class="Symbol">}(</a><a id="42646" href="Demos.HSP.html#42646" class="Bound">t</a> <a id="42648" class="Symbol">:</a> <a id="42650" href="Demos.HSP.html#39768" class="Datatype">Term</a> <a id="42655" href="Demos.HSP.html#42634" class="Bound">X</a><a id="42656" class="Symbol">)</a> <a id="42658" class="Symbol">‚Üí</a> <a id="42660" class="Symbol">(</a><a id="42661" href="Demos.HSP.html#42156" class="Function">Env</a> <a id="42665" href="Demos.HSP.html#42634" class="Bound">X</a><a id="42666" class="Symbol">)</a> <a id="42668" href="Demos.HSP.html#6656" class="Record Operator">‚ü∂</a> <a id="42670" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="42673" href="Demos.HSP.html#42076" class="Bound">ùë®</a> <a id="42675" href="Demos.HSP.html#19374" class="Function Operator">]</a>
 <a id="42678" href="Demos.HSP.html#42627" class="Function Operator">‚ü¶</a> <a id="42680" href="Demos.HSP.html#39808" class="InductiveConstructor">‚Ñä</a> <a id="42682" href="Demos.HSP.html#42682" class="Bound">x</a> <a id="42684" href="Demos.HSP.html#42627" class="Function Operator">‚üß</a>          <a id="42695" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="42699" href="Demos.HSP.html#42699" class="Bound">œÅ</a>    <a id="42704" class="Symbol">=</a> <a id="42706" href="Demos.HSP.html#42699" class="Bound">œÅ</a> <a id="42708" href="Demos.HSP.html#42682" class="Bound">x</a>
 <a id="42711" href="Demos.HSP.html#42627" class="Function Operator">‚ü¶</a> <a id="42713" href="Demos.HSP.html#39824" class="InductiveConstructor">node</a> <a id="42718" href="Demos.HSP.html#42718" class="Bound">f</a> <a id="42720" href="Demos.HSP.html#42720" class="Bound">args</a> <a id="42725" href="Demos.HSP.html#42627" class="Function Operator">‚üß</a>  <a id="42728" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="42732" href="Demos.HSP.html#42732" class="Bound">œÅ</a>    <a id="42737" class="Symbol">=</a> <a id="42739" class="Symbol">(</a><a id="42740" href="Demos.HSP.html#18814" class="Field">Interp</a> <a id="42747" href="Demos.HSP.html#42076" class="Bound">ùë®</a><a id="42748" class="Symbol">)</a> <a id="42750" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="42754" class="Symbol">(</a><a id="42755" href="Demos.HSP.html#42718" class="Bound">f</a> <a id="42757" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="42759" class="Symbol">Œª</a> <a id="42761" href="Demos.HSP.html#42761" class="Bound">i</a> <a id="42763" class="Symbol">‚Üí</a> <a id="42765" href="Demos.HSP.html#42627" class="Function Operator">‚ü¶</a> <a id="42767" href="Demos.HSP.html#42720" class="Bound">args</a> <a id="42772" href="Demos.HSP.html#42761" class="Bound">i</a> <a id="42774" href="Demos.HSP.html#42627" class="Function Operator">‚üß</a> <a id="42776" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="42780" href="Demos.HSP.html#42732" class="Bound">œÅ</a><a id="42781" class="Symbol">)</a>
 <a id="42784" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="42789" href="Demos.HSP.html#42627" class="Function Operator">‚ü¶</a> <a id="42791" href="Demos.HSP.html#39808" class="InductiveConstructor">‚Ñä</a> <a id="42793" href="Demos.HSP.html#42793" class="Bound">x</a> <a id="42795" href="Demos.HSP.html#42627" class="Function Operator">‚üß</a> <a id="42797" href="Demos.HSP.html#42797" class="Bound">u‚âàv</a>          <a id="42810" class="Symbol">=</a> <a id="42812" href="Demos.HSP.html#42797" class="Bound">u‚âàv</a> <a id="42816" href="Demos.HSP.html#42793" class="Bound">x</a>
 <a id="42819" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="42824" href="Demos.HSP.html#42627" class="Function Operator">‚ü¶</a> <a id="42826" href="Demos.HSP.html#39824" class="InductiveConstructor">node</a> <a id="42831" href="Demos.HSP.html#42831" class="Bound">f</a> <a id="42833" href="Demos.HSP.html#42833" class="Bound">args</a> <a id="42838" href="Demos.HSP.html#42627" class="Function Operator">‚üß</a> <a id="42840" href="Demos.HSP.html#42840" class="Bound">x‚âày</a>  <a id="42845" class="Symbol">=</a> <a id="42847" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="42852" class="Symbol">(</a><a id="42853" href="Demos.HSP.html#18814" class="Field">Interp</a> <a id="42860" href="Demos.HSP.html#42076" class="Bound">ùë®</a><a id="42861" class="Symbol">)(</a><a id="42863" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="42870" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="42872" class="Symbol">Œª</a> <a id="42874" href="Demos.HSP.html#42874" class="Bound">i</a> <a id="42876" class="Symbol">‚Üí</a> <a id="42878" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="42883" href="Demos.HSP.html#42627" class="Function Operator">‚ü¶</a> <a id="42885" href="Demos.HSP.html#42833" class="Bound">args</a> <a id="42890" href="Demos.HSP.html#42874" class="Bound">i</a> <a id="42892" href="Demos.HSP.html#42627" class="Function Operator">‚üß</a> <a id="42894" href="Demos.HSP.html#42840" class="Bound">x‚âày</a> <a id="42898" class="Symbol">)</a>

</pre>
Two terms are proclaimed *equal* if they are equal for all environments.

<pre class="Agda">

 <a id="Environment.Equal"></a><a id="43001" href="Demos.HSP.html#43001" class="Function">Equal</a> <a id="43007" class="Symbol">:</a> <a id="43009" class="Symbol">{</a><a id="43010" href="Demos.HSP.html#43010" class="Bound">X</a> <a id="43012" class="Symbol">:</a> <a id="43014" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="43019" href="Demos.HSP.html#7612" class="Generalizable">œá</a><a id="43020" class="Symbol">}(</a><a id="43022" href="Demos.HSP.html#43022" class="Bound">s</a> <a id="43024" href="Demos.HSP.html#43024" class="Bound">t</a> <a id="43026" class="Symbol">:</a> <a id="43028" href="Demos.HSP.html#39768" class="Datatype">Term</a> <a id="43033" href="Demos.HSP.html#43010" class="Bound">X</a><a id="43034" class="Symbol">)</a> <a id="43036" class="Symbol">‚Üí</a> <a id="43038" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="43043" class="Symbol">_</a>
 <a id="43046" href="Demos.HSP.html#43001" class="Function">Equal</a> <a id="43052" class="Symbol">{</a><a id="43053" class="Argument">X</a> <a id="43055" class="Symbol">=</a> <a id="43057" href="Demos.HSP.html#43057" class="Bound">X</a><a id="43058" class="Symbol">}</a> <a id="43060" href="Demos.HSP.html#43060" class="Bound">s</a> <a id="43062" href="Demos.HSP.html#43062" class="Bound">t</a> <a id="43064" class="Symbol">=</a> <a id="43066" class="Symbol">‚àÄ</a> <a id="43068" class="Symbol">(</a><a id="43069" href="Demos.HSP.html#43069" class="Bound">œÅ</a> <a id="43071" class="Symbol">:</a> <a id="43073" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="43081" class="Symbol">(</a><a id="43082" href="Demos.HSP.html#42156" class="Function">Env</a> <a id="43086" href="Demos.HSP.html#43057" class="Bound">X</a><a id="43087" class="Symbol">))</a> <a id="43090" class="Symbol">‚Üí</a> <a id="43092" href="Demos.HSP.html#42627" class="Function Operator">‚ü¶</a> <a id="43094" href="Demos.HSP.html#43060" class="Bound">s</a> <a id="43096" href="Demos.HSP.html#42627" class="Function Operator">‚üß</a> <a id="43098" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="43102" href="Demos.HSP.html#43069" class="Bound">œÅ</a> <a id="43104" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a> <a id="43106" href="Demos.HSP.html#42627" class="Function Operator">‚ü¶</a> <a id="43108" href="Demos.HSP.html#43062" class="Bound">t</a> <a id="43110" href="Demos.HSP.html#42627" class="Function Operator">‚üß</a> <a id="43112" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="43116" href="Demos.HSP.html#43069" class="Bound">œÅ</a>

</pre>
Proof that `Equal` is an equivalence relation, and that the implication `s ‚âÉ t ‚Üí Equal s t` holds for all terms `s` and `t`, are also found in¬†[@Abel:2021]. We reproduce them here to keep the presentation self-contained.

<pre class="Agda">

 <a id="Environment.‚âÉ‚ÜíEqual"></a><a id="43367" href="Demos.HSP.html#43367" class="Function">‚âÉ‚ÜíEqual</a> <a id="43375" class="Symbol">:</a> <a id="43377" class="Symbol">{</a><a id="43378" href="Demos.HSP.html#43378" class="Bound">X</a> <a id="43380" class="Symbol">:</a> <a id="43382" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="43387" href="Demos.HSP.html#7612" class="Generalizable">œá</a><a id="43388" class="Symbol">}(</a><a id="43390" href="Demos.HSP.html#43390" class="Bound">s</a> <a id="43392" href="Demos.HSP.html#43392" class="Bound">t</a> <a id="43394" class="Symbol">:</a> <a id="43396" href="Demos.HSP.html#39768" class="Datatype">Term</a> <a id="43401" href="Demos.HSP.html#43378" class="Bound">X</a><a id="43402" class="Symbol">)</a> <a id="43404" class="Symbol">‚Üí</a> <a id="43406" href="Demos.HSP.html#43390" class="Bound">s</a> <a id="43408" href="Demos.HSP.html#40191" class="Datatype Operator">‚âÉ</a> <a id="43410" href="Demos.HSP.html#43392" class="Bound">t</a> <a id="43412" class="Symbol">‚Üí</a> <a id="43414" href="Demos.HSP.html#43001" class="Function">Equal</a> <a id="43420" href="Demos.HSP.html#43390" class="Bound">s</a> <a id="43422" href="Demos.HSP.html#43392" class="Bound">t</a>
 <a id="43425" href="Demos.HSP.html#43367" class="Function">‚âÉ‚ÜíEqual</a> <a id="43433" class="DottedPattern Symbol">.(</a><a id="43435" href="Demos.HSP.html#39808" class="DottedPattern InductiveConstructor">‚Ñä</a> <a id="43437" class="DottedPattern Symbol">_)</a> <a id="43440" class="DottedPattern Symbol">.(</a><a id="43442" href="Demos.HSP.html#39808" class="DottedPattern InductiveConstructor">‚Ñä</a> <a id="43444" class="DottedPattern Symbol">_)</a> <a id="43447" class="Symbol">(</a><a id="43448" href="Demos.HSP.html#40235" class="InductiveConstructor">rfl</a> <a id="43452" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a><a id="43458" class="Symbol">)</a> <a id="43460" class="Symbol">=</a> <a id="43462" class="Symbol">Œª</a> <a id="43464" href="Demos.HSP.html#43464" class="Bound">_</a> <a id="43466" class="Symbol">‚Üí</a> <a id="43468" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>
 <a id="43474" href="Demos.HSP.html#43367" class="Function">‚âÉ‚ÜíEqual</a> <a id="43482" class="Symbol">(</a><a id="43483" href="Demos.HSP.html#39824" class="InductiveConstructor">node</a> <a id="43488" class="Symbol">_</a> <a id="43490" href="Demos.HSP.html#43490" class="Bound">s</a><a id="43491" class="Symbol">)(</a><a id="43493" href="Demos.HSP.html#39824" class="InductiveConstructor">node</a> <a id="43498" class="Symbol">_</a> <a id="43500" href="Demos.HSP.html#43500" class="Bound">t</a><a id="43501" class="Symbol">)(</a><a id="43503" href="Demos.HSP.html#40277" class="InductiveConstructor">gnl</a> <a id="43507" href="Demos.HSP.html#43507" class="Bound">x</a><a id="43508" class="Symbol">)</a> <a id="43510" class="Symbol">=</a>
  <a id="43514" class="Symbol">Œª</a> <a id="43516" href="Demos.HSP.html#43516" class="Bound">œÅ</a> <a id="43518" class="Symbol">‚Üí</a> <a id="43520" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="43525" class="Symbol">(</a><a id="43526" href="Demos.HSP.html#18814" class="Field">Interp</a> <a id="43533" href="Demos.HSP.html#42076" class="Bound">ùë®</a><a id="43534" class="Symbol">)(</a><a id="43536" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="43543" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="43545" class="Symbol">Œª</a> <a id="43547" href="Demos.HSP.html#43547" class="Bound">i</a> <a id="43549" class="Symbol">‚Üí</a> <a id="43551" href="Demos.HSP.html#43367" class="Function">‚âÉ‚ÜíEqual</a><a id="43558" class="Symbol">(</a><a id="43559" href="Demos.HSP.html#43490" class="Bound">s</a> <a id="43561" href="Demos.HSP.html#43547" class="Bound">i</a><a id="43562" class="Symbol">)(</a><a id="43564" href="Demos.HSP.html#43500" class="Bound">t</a> <a id="43566" href="Demos.HSP.html#43547" class="Bound">i</a><a id="43567" class="Symbol">)(</a><a id="43569" href="Demos.HSP.html#43507" class="Bound">x</a> <a id="43571" href="Demos.HSP.html#43547" class="Bound">i</a><a id="43572" class="Symbol">)</a><a id="43573" href="Demos.HSP.html#43516" class="Bound">œÅ</a> <a id="43575" class="Symbol">)</a>

 <a id="Environment.EqualIsEquiv"></a><a id="43579" href="Demos.HSP.html#43579" class="Function">EqualIsEquiv</a> <a id="43592" class="Symbol">:</a> <a id="43594" class="Symbol">{</a><a id="43595" href="Demos.HSP.html#43595" class="Bound">Œì</a> <a id="43597" class="Symbol">:</a> <a id="43599" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="43604" href="Demos.HSP.html#7612" class="Generalizable">œá</a><a id="43605" class="Symbol">}</a> <a id="43607" class="Symbol">‚Üí</a> <a id="43609" href="Relation.Binary.Structures.html#1522" class="Record">IsEquivalence</a> <a id="43623" class="Symbol">(</a><a id="43624" href="Demos.HSP.html#43001" class="Function">Equal</a> <a id="43630" class="Symbol">{</a><a id="43631" class="Argument">X</a> <a id="43633" class="Symbol">=</a> <a id="43635" href="Demos.HSP.html#43595" class="Bound">Œì</a><a id="43636" class="Symbol">})</a>
 <a id="43640" href="Demos.HSP.html#6860" class="Field">refl·µâ</a>   <a id="43648" href="Demos.HSP.html#43579" class="Function">EqualIsEquiv</a> <a id="43661" class="Symbol">=</a> <a id="43663" class="Symbol">Œª</a> <a id="43665" href="Demos.HSP.html#43665" class="Bound">_</a>        <a id="43674" class="Symbol">‚Üí</a> <a id="43676" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>
 <a id="43682" href="Demos.HSP.html#6921" class="Field">sym·µâ</a>    <a id="43690" href="Demos.HSP.html#43579" class="Function">EqualIsEquiv</a> <a id="43703" class="Symbol">=</a> <a id="43705" class="Symbol">Œª</a> <a id="43707" href="Demos.HSP.html#43707" class="Bound">x=y</a> <a id="43711" href="Demos.HSP.html#43711" class="Bound">œÅ</a>    <a id="43716" class="Symbol">‚Üí</a> <a id="43718" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="43722" class="Symbol">(</a><a id="43723" href="Demos.HSP.html#43707" class="Bound">x=y</a> <a id="43727" href="Demos.HSP.html#43711" class="Bound">œÅ</a><a id="43728" class="Symbol">)</a>
 <a id="43731" href="Demos.HSP.html#6982" class="Field">trans·µâ</a>  <a id="43739" href="Demos.HSP.html#43579" class="Function">EqualIsEquiv</a> <a id="43752" class="Symbol">=</a> <a id="43754" class="Symbol">Œª</a> <a id="43756" href="Demos.HSP.html#43756" class="Bound">ij</a> <a id="43759" href="Demos.HSP.html#43759" class="Bound">jk</a> <a id="43762" href="Demos.HSP.html#43762" class="Bound">œÅ</a>  <a id="43765" class="Symbol">‚Üí</a> <a id="43767" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="43773" class="Symbol">(</a><a id="43774" href="Demos.HSP.html#43756" class="Bound">ij</a> <a id="43777" href="Demos.HSP.html#43762" class="Bound">œÅ</a><a id="43778" class="Symbol">)</a> <a id="43780" class="Symbol">(</a><a id="43781" href="Demos.HSP.html#43759" class="Bound">jk</a> <a id="43784" href="Demos.HSP.html#43762" class="Bound">œÅ</a><a id="43785" class="Symbol">)</a>
</pre>



#### <a id="compatibility-of-terms">Compatibility of terms</a>

We need to formalize two more concepts involving terms.
The first (`comm-hom-term`) is the assertion that every term commutes with every homomorphism, and
the second (`interp-prod`) is the interpretation of a term in a product algebra.

<pre class="Agda">

<a id="44116" class="Keyword">module</a> <a id="44123" href="Demos.HSP.html#44123" class="Module">_</a> <a id="44125" class="Symbol">{</a><a id="44126" href="Demos.HSP.html#44126" class="Bound">X</a> <a id="44128" class="Symbol">:</a> <a id="44130" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="44135" href="Demos.HSP.html#7612" class="Generalizable">œá</a><a id="44136" class="Symbol">}{</a><a id="44138" href="Demos.HSP.html#44138" class="Bound">ùë®</a> <a id="44140" class="Symbol">:</a> <a id="44142" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="44150" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="44152" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a><a id="44154" class="Symbol">}{</a><a id="44156" href="Demos.HSP.html#44156" class="Bound">ùë©</a> <a id="44158" class="Symbol">:</a> <a id="44160" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="44168" href="Demos.HSP.html#7595" class="Generalizable">Œ≤</a> <a id="44170" href="Demos.HSP.html#7597" class="Generalizable">œÅ·µá</a><a id="44172" class="Symbol">}(</a><a id="44174" href="Demos.HSP.html#44174" class="Bound">hh</a> <a id="44177" class="Symbol">:</a> <a id="44179" href="Demos.HSP.html#26708" class="Function">hom</a> <a id="44183" href="Demos.HSP.html#44138" class="Bound">ùë®</a> <a id="44185" href="Demos.HSP.html#44156" class="Bound">ùë©</a><a id="44186" class="Symbol">)</a> <a id="44188" class="Keyword">where</a>
 <a id="44195" class="Keyword">open</a> <a id="44200" href="Demos.HSP.html#42063" class="Module">Environment</a> <a id="44212" href="Demos.HSP.html#44138" class="Bound">ùë®</a>  <a id="44215" class="Keyword">using</a> <a id="44221" class="Symbol">(</a> <a id="44223" href="Demos.HSP.html#42627" class="Function Operator">‚ü¶_‚üß</a> <a id="44227" class="Symbol">)</a>
 <a id="44230" class="Keyword">open</a> <a id="44235" href="Demos.HSP.html#42063" class="Module">Environment</a> <a id="44247" href="Demos.HSP.html#44156" class="Bound">ùë©</a>  <a id="44250" class="Keyword">using</a> <a id="44256" class="Symbol">()</a> <a id="44259" class="Keyword">renaming</a> <a id="44268" class="Symbol">(</a> <a id="44270" href="Demos.HSP.html#42627" class="Function Operator">‚ü¶_‚üß</a> <a id="44274" class="Symbol">to</a> <a id="44277" class="Function Operator">‚ü¶_‚üß·¥Æ</a> <a id="44282" class="Symbol">)</a>
 <a id="44285" class="Keyword">open</a> <a id="44290" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="44297" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="44300" href="Demos.HSP.html#44156" class="Bound">ùë©</a> <a id="44302" href="Demos.HSP.html#19374" class="Function Operator">]</a>  <a id="44305" class="Keyword">using</a> <a id="44311" class="Symbol">(</a> <a id="44313" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="44317" class="Symbol">;</a> <a id="44319" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>  <a id="44325" class="Symbol">)</a>
 <a id="44328" class="Keyword">private</a> <a id="44336" href="Demos.HSP.html#44336" class="Function">hfunc</a> <a id="44342" class="Symbol">=</a> <a id="44344" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="44346" href="Demos.HSP.html#44174" class="Bound">hh</a> <a id="44349" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="44351" class="Symbol">;</a> <a id="44353" href="Demos.HSP.html#44353" class="Function">h</a> <a id="44355" class="Symbol">=</a> <a id="44357" href="Demos.HSP.html#6758" class="Field Operator">_‚ü®$‚ü©_</a> <a id="44363" href="Demos.HSP.html#44336" class="Function">hfunc</a>

 <a id="44371" href="Demos.HSP.html#44371" class="Function">comm-hom-term</a> <a id="44385" class="Symbol">:</a> <a id="44387" class="Symbol">(</a><a id="44388" href="Demos.HSP.html#44388" class="Bound">t</a> <a id="44390" class="Symbol">:</a> <a id="44392" href="Demos.HSP.html#39768" class="Datatype">Term</a> <a id="44397" href="Demos.HSP.html#44126" class="Bound">X</a><a id="44398" class="Symbol">)</a> <a id="44400" class="Symbol">(</a><a id="44401" href="Demos.HSP.html#44401" class="Bound">a</a> <a id="44403" class="Symbol">:</a> <a id="44405" href="Demos.HSP.html#44126" class="Bound">X</a> <a id="44407" class="Symbol">‚Üí</a> <a id="44409" href="Demos.HSP.html#19428" class="Function Operator">ùïå[</a> <a id="44412" href="Demos.HSP.html#44138" class="Bound">ùë®</a> <a id="44414" href="Demos.HSP.html#19428" class="Function Operator">]</a><a id="44415" class="Symbol">)</a> <a id="44417" class="Symbol">‚Üí</a> <a id="44419" href="Demos.HSP.html#44353" class="Function">h</a> <a id="44421" class="Symbol">(</a><a id="44422" href="Demos.HSP.html#42627" class="Function Operator">‚ü¶</a> <a id="44424" href="Demos.HSP.html#44388" class="Bound">t</a> <a id="44426" href="Demos.HSP.html#42627" class="Function Operator">‚üß</a> <a id="44428" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="44432" href="Demos.HSP.html#44401" class="Bound">a</a><a id="44433" class="Symbol">)</a> <a id="44435" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a> <a id="44437" href="Demos.HSP.html#44277" class="Function Operator">‚ü¶</a> <a id="44439" href="Demos.HSP.html#44388" class="Bound">t</a> <a id="44441" href="Demos.HSP.html#44277" class="Function Operator">‚üß·¥Æ</a> <a id="44444" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="44448" class="Symbol">(</a><a id="44449" href="Demos.HSP.html#44353" class="Function">h</a> <a id="44451" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="44453" href="Demos.HSP.html#44401" class="Bound">a</a><a id="44454" class="Symbol">)</a>
 <a id="44457" href="Demos.HSP.html#44371" class="Function">comm-hom-term</a> <a id="44471" class="Symbol">(</a><a id="44472" href="Demos.HSP.html#39808" class="InductiveConstructor">‚Ñä</a> <a id="44474" href="Demos.HSP.html#44474" class="Bound">x</a><a id="44475" class="Symbol">)</a> <a id="44477" href="Demos.HSP.html#44477" class="Bound">a</a> <a id="44479" class="Symbol">=</a> <a id="44481" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>
 <a id="44487" href="Demos.HSP.html#44371" class="Function">comm-hom-term</a> <a id="44501" class="Symbol">(</a><a id="44502" href="Demos.HSP.html#39824" class="InductiveConstructor">node</a> <a id="44507" href="Demos.HSP.html#44507" class="Bound">f</a> <a id="44509" href="Demos.HSP.html#44509" class="Bound">t</a><a id="44510" class="Symbol">)</a> <a id="44512" href="Demos.HSP.html#44512" class="Bound">a</a> <a id="44514" class="Symbol">=</a>  <a id="44517" href="Relation.Binary.Reasoning.Base.Single.html#1916" class="Function Operator">begin</a>
   <a id="44526" href="Demos.HSP.html#44353" class="Function">h</a><a id="44527" class="Symbol">(</a><a id="44528" href="Demos.HSP.html#42627" class="Function Operator">‚ü¶</a> <a id="44530" href="Demos.HSP.html#39824" class="InductiveConstructor">node</a> <a id="44535" href="Demos.HSP.html#44507" class="Bound">f</a> <a id="44537" href="Demos.HSP.html#44509" class="Bound">t</a> <a id="44539" href="Demos.HSP.html#42627" class="Function Operator">‚üß</a> <a id="44541" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="44545" href="Demos.HSP.html#44512" class="Bound">a</a><a id="44546" class="Symbol">)</a>            <a id="44559" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a> <a id="44562" href="Demos.HSP.html#26676" class="Field">compatible</a> <a id="44573" href="Demos.HSP.html#8278" class="Function Operator">‚à•</a> <a id="44575" href="Demos.HSP.html#44174" class="Bound">hh</a> <a id="44578" href="Demos.HSP.html#8278" class="Function Operator">‚à•</a> <a id="44580" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
   <a id="44585" class="Symbol">(</a><a id="44586" href="Demos.HSP.html#44507" class="Bound">f</a> <a id="44588" href="Demos.HSP.html#19487" class="Function Operator">ÃÇ</a> <a id="44590" href="Demos.HSP.html#44156" class="Bound">ùë©</a><a id="44591" class="Symbol">)(Œª</a> <a id="44595" href="Demos.HSP.html#44595" class="Bound">i</a> <a id="44597" class="Symbol">‚Üí</a> <a id="44599" href="Demos.HSP.html#44353" class="Function">h</a><a id="44600" class="Symbol">(</a><a id="44601" href="Demos.HSP.html#42627" class="Function Operator">‚ü¶</a> <a id="44603" href="Demos.HSP.html#44509" class="Bound">t</a> <a id="44605" href="Demos.HSP.html#44595" class="Bound">i</a> <a id="44607" href="Demos.HSP.html#42627" class="Function Operator">‚üß</a> <a id="44609" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="44613" href="Demos.HSP.html#44512" class="Bound">a</a><a id="44614" class="Symbol">))</a>  <a id="44618" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a> <a id="44621" href="Function.Bundles.html#1938" class="Field">cong</a><a id="44625" class="Symbol">(</a><a id="44626" href="Demos.HSP.html#18814" class="Field">Interp</a> <a id="44633" href="Demos.HSP.html#44156" class="Bound">ùë©</a><a id="44634" class="Symbol">)(</a><a id="44636" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="44643" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="44645" class="Symbol">Œª</a> <a id="44647" href="Demos.HSP.html#44647" class="Bound">i</a> <a id="44649" class="Symbol">‚Üí</a> <a id="44651" href="Demos.HSP.html#44371" class="Function">comm-hom-term</a><a id="44664" class="Symbol">(</a><a id="44665" href="Demos.HSP.html#44509" class="Bound">t</a> <a id="44667" href="Demos.HSP.html#44647" class="Bound">i</a><a id="44668" class="Symbol">)</a> <a id="44670" href="Demos.HSP.html#44512" class="Bound">a</a><a id="44671" class="Symbol">)</a> <a id="44673" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
   <a id="44678" href="Demos.HSP.html#44277" class="Function Operator">‚ü¶</a> <a id="44680" href="Demos.HSP.html#39824" class="InductiveConstructor">node</a> <a id="44685" href="Demos.HSP.html#44507" class="Bound">f</a> <a id="44687" href="Demos.HSP.html#44509" class="Bound">t</a> <a id="44689" href="Demos.HSP.html#44277" class="Function Operator">‚üß·¥Æ</a> <a id="44692" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="44696" class="Symbol">(</a><a id="44697" href="Demos.HSP.html#44353" class="Function">h</a> <a id="44699" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="44701" href="Demos.HSP.html#44512" class="Bound">a</a><a id="44702" class="Symbol">)</a>   <a id="44706" href="Relation.Binary.Reasoning.Base.Single.html#2555" class="Function Operator">‚àé</a> <a id="44708" class="Keyword">where</a> <a id="44714" class="Keyword">open</a> <a id="44719" href="Relation.Binary.Reasoning.Setoid.html" class="Module">SetoidReasoning</a> <a id="44735" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="44738" href="Demos.HSP.html#44156" class="Bound">ùë©</a> <a id="44740" href="Demos.HSP.html#19374" class="Function Operator">]</a>

<a id="44743" class="Keyword">module</a> <a id="44750" href="Demos.HSP.html#44750" class="Module">_</a> <a id="44752" class="Symbol">{</a><a id="44753" href="Demos.HSP.html#44753" class="Bound">X</a> <a id="44755" class="Symbol">:</a> <a id="44757" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="44762" href="Demos.HSP.html#7612" class="Generalizable">œá</a><a id="44763" class="Symbol">}{</a><a id="44765" href="Demos.HSP.html#44765" class="Bound">Œπ</a> <a id="44767" class="Symbol">:</a> <a id="44769" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="44774" class="Symbol">}</a> <a id="44776" class="Symbol">{</a><a id="44777" href="Demos.HSP.html#44777" class="Bound">I</a> <a id="44779" class="Symbol">:</a> <a id="44781" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="44786" href="Demos.HSP.html#44765" class="Bound">Œπ</a><a id="44787" class="Symbol">}</a> <a id="44789" class="Symbol">(</a><a id="44790" href="Demos.HSP.html#44790" class="Bound">ùíú</a> <a id="44792" class="Symbol">:</a> <a id="44794" href="Demos.HSP.html#44777" class="Bound">I</a> <a id="44796" class="Symbol">‚Üí</a> <a id="44798" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="44806" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="44808" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a><a id="44810" class="Symbol">)</a> <a id="44812" class="Keyword">where</a>
 <a id="44819" class="Keyword">open</a> <a id="44824" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="44831" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="44834" href="Demos.HSP.html#24332" class="Function">‚®Ö</a> <a id="44836" href="Demos.HSP.html#44790" class="Bound">ùíú</a> <a id="44838" href="Demos.HSP.html#19374" class="Function Operator">]</a>  <a id="44841" class="Keyword">using</a> <a id="44847" class="Symbol">(</a> <a id="44849" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="44853" class="Symbol">)</a>
 <a id="44856" class="Keyword">open</a> <a id="44861" href="Demos.HSP.html#42063" class="Module">Environment</a>      <a id="44878" class="Keyword">using</a> <a id="44884" class="Symbol">(</a> <a id="44886" href="Demos.HSP.html#42627" class="Function Operator">‚ü¶_‚üß</a> <a id="44890" class="Symbol">;</a> <a id="44892" href="Demos.HSP.html#43367" class="Function">‚âÉ‚ÜíEqual</a> <a id="44900" class="Symbol">)</a>

 <a id="44904" href="Demos.HSP.html#44904" class="Function">interp-prod</a> <a id="44916" class="Symbol">:</a> <a id="44918" class="Symbol">(</a><a id="44919" href="Demos.HSP.html#44919" class="Bound">p</a> <a id="44921" class="Symbol">:</a> <a id="44923" href="Demos.HSP.html#39768" class="Datatype">Term</a> <a id="44928" href="Demos.HSP.html#44753" class="Bound">X</a><a id="44929" class="Symbol">)</a> <a id="44931" class="Symbol">‚Üí</a> <a id="44933" class="Symbol">‚àÄ</a> <a id="44935" href="Demos.HSP.html#44935" class="Bound">œÅ</a> <a id="44937" class="Symbol">‚Üí</a>  <a id="44940" class="Symbol">(</a><a id="44941" href="Demos.HSP.html#42627" class="Function Operator">‚ü¶</a> <a id="44943" href="Demos.HSP.html#24332" class="Function">‚®Ö</a> <a id="44945" href="Demos.HSP.html#44790" class="Bound">ùíú</a> <a id="44947" href="Demos.HSP.html#42627" class="Function Operator">‚üß</a> <a id="44949" href="Demos.HSP.html#44919" class="Bound">p</a><a id="44950" class="Symbol">)</a> <a id="44952" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="44956" href="Demos.HSP.html#44935" class="Bound">œÅ</a>   <a id="44960" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a>   <a id="44964" class="Symbol">Œª</a> <a id="44966" href="Demos.HSP.html#44966" class="Bound">i</a> <a id="44968" class="Symbol">‚Üí</a> <a id="44970" class="Symbol">(</a><a id="44971" href="Demos.HSP.html#42627" class="Function Operator">‚ü¶</a> <a id="44973" href="Demos.HSP.html#44790" class="Bound">ùíú</a> <a id="44975" href="Demos.HSP.html#44966" class="Bound">i</a> <a id="44977" href="Demos.HSP.html#42627" class="Function Operator">‚üß</a> <a id="44979" href="Demos.HSP.html#44919" class="Bound">p</a><a id="44980" class="Symbol">)</a> <a id="44982" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="44986" class="Symbol">Œª</a> <a id="44988" href="Demos.HSP.html#44988" class="Bound">x</a> <a id="44990" class="Symbol">‚Üí</a> <a id="44992" class="Symbol">(</a><a id="44993" href="Demos.HSP.html#44935" class="Bound">œÅ</a> <a id="44995" href="Demos.HSP.html#44988" class="Bound">x</a><a id="44996" class="Symbol">)</a> <a id="44998" href="Demos.HSP.html#44966" class="Bound">i</a>
 <a id="45001" href="Demos.HSP.html#44904" class="Function">interp-prod</a> <a id="45013" class="Symbol">(</a><a id="45014" href="Demos.HSP.html#39808" class="InductiveConstructor">‚Ñä</a> <a id="45016" href="Demos.HSP.html#45016" class="Bound">x</a><a id="45017" class="Symbol">)</a>       <a id="45025" class="Symbol">=</a> <a id="45027" class="Symbol">Œª</a> <a id="45029" href="Demos.HSP.html#45029" class="Bound">œÅ</a> <a id="45031" href="Demos.HSP.html#45031" class="Bound">i</a>  <a id="45034" class="Symbol">‚Üí</a> <a id="45036" href="Demos.HSP.html#43367" class="Function">‚âÉ‚ÜíEqual</a> <a id="45044" class="Symbol">(</a><a id="45045" href="Demos.HSP.html#44790" class="Bound">ùíú</a> <a id="45047" href="Demos.HSP.html#45031" class="Bound">i</a><a id="45048" class="Symbol">)</a> <a id="45050" class="Symbol">(</a><a id="45051" href="Demos.HSP.html#39808" class="InductiveConstructor">‚Ñä</a> <a id="45053" href="Demos.HSP.html#45016" class="Bound">x</a><a id="45054" class="Symbol">)</a> <a id="45056" class="Symbol">(</a><a id="45057" href="Demos.HSP.html#39808" class="InductiveConstructor">‚Ñä</a> <a id="45059" href="Demos.HSP.html#45016" class="Bound">x</a><a id="45060" class="Symbol">)</a> <a id="45062" href="Demos.HSP.html#40461" class="Function">‚âÉ-isRefl</a> <a id="45071" class="Symbol">Œª</a> <a id="45073" href="Demos.HSP.html#45073" class="Bound">_</a> <a id="45075" class="Symbol">‚Üí</a> <a id="45077" class="Symbol">(</a><a id="45078" href="Demos.HSP.html#45029" class="Bound">œÅ</a> <a id="45080" href="Demos.HSP.html#45016" class="Bound">x</a><a id="45081" class="Symbol">)</a> <a id="45083" href="Demos.HSP.html#45031" class="Bound">i</a>
 <a id="45086" href="Demos.HSP.html#44904" class="Function">interp-prod</a> <a id="45098" class="Symbol">(</a><a id="45099" href="Demos.HSP.html#39824" class="InductiveConstructor">node</a> <a id="45104" href="Demos.HSP.html#45104" class="Bound">f</a> <a id="45106" href="Demos.HSP.html#45106" class="Bound">t</a><a id="45107" class="Symbol">)</a>  <a id="45110" class="Symbol">=</a> <a id="45112" class="Symbol">Œª</a> <a id="45114" href="Demos.HSP.html#45114" class="Bound">œÅ</a>    <a id="45119" class="Symbol">‚Üí</a> <a id="45121" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="45126" class="Symbol">(</a><a id="45127" href="Demos.HSP.html#18814" class="Field">Interp</a> <a id="45134" class="Symbol">(</a><a id="45135" href="Demos.HSP.html#24332" class="Function">‚®Ö</a> <a id="45137" href="Demos.HSP.html#44790" class="Bound">ùíú</a><a id="45138" class="Symbol">))</a> <a id="45141" class="Symbol">(</a> <a id="45143" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="45150" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="45152" class="Symbol">Œª</a> <a id="45154" href="Demos.HSP.html#45154" class="Bound">j</a> <a id="45156" href="Demos.HSP.html#45156" class="Bound">k</a> <a id="45158" class="Symbol">‚Üí</a> <a id="45160" href="Demos.HSP.html#44904" class="Function">interp-prod</a> <a id="45172" class="Symbol">(</a><a id="45173" href="Demos.HSP.html#45106" class="Bound">t</a> <a id="45175" href="Demos.HSP.html#45154" class="Bound">j</a><a id="45176" class="Symbol">)</a> <a id="45178" href="Demos.HSP.html#45114" class="Bound">œÅ</a> <a id="45180" href="Demos.HSP.html#45156" class="Bound">k</a> <a id="45182" class="Symbol">)</a>
</pre>

Equational Logic
================

#### <a id="term-identities-equational-theories-and-the-relation">Term identities, equational theories, and the ‚äß relation</a>

An `ùëÜ`-*term equation* (or `ùëÜ`-*term identity*) is an ordered pair `(p , q)` of `ùëÜ`-terms, also denoted by `p ‚âà q`. They are often simply called *equations* or *identities*, especially when the signature `ùëÜ` is evident.
We define an *equational theory* (or *algebraic theory*) to be a pair `T = (ùëÜ , ‚Ñ∞)` consisting of a signature `ùëÜ` and a collection `‚Ñ∞` of `ùëÜ`-term equations.[^9]

We say that the algebra `ùë®` *models* the identity `p ‚âà q` and we write `ùë® ‚äß p ‚âà q`
if for all `œÅ : X ‚Üí ùîª[ ùë® ]` we have `‚ü¶ p ‚üß ‚ü®$‚ü© œÅ ‚âà ‚ü¶ q ‚üß ‚ü®$‚ü© œÅ`.
In other words, when interpreted in the algebra `ùë®`, the terms `p` and `q` are equal no matter what values are assigned to variable symbols occurring in `p` and `q`.

If `ùí¶` is a class of algebras of a given signature, then we write `ùí¶ ‚ä´ p ‚âà q` and say that `ùí¶` *models* the identity `p ‚âà q` provided `ùë® ‚äß p ‚âà q` for every `ùë® ‚àà ùí¶`.

<pre class="Agda">

<a id="46237" class="Keyword">module</a> <a id="46244" href="Demos.HSP.html#46244" class="Module">_</a> <a id="46246" class="Symbol">{</a><a id="46247" href="Demos.HSP.html#46247" class="Bound">X</a> <a id="46249" class="Symbol">:</a> <a id="46251" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="46256" href="Demos.HSP.html#7612" class="Generalizable">œá</a><a id="46257" class="Symbol">}</a> <a id="46259" class="Keyword">where</a>
 <a id="46266" href="Demos.HSP.html#46266" class="Function Operator">_‚äß_‚âà_</a> <a id="46272" class="Symbol">:</a> <a id="46274" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="46282" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="46284" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a> <a id="46287" class="Symbol">‚Üí</a> <a id="46289" href="Demos.HSP.html#39768" class="Datatype">Term</a> <a id="46294" href="Demos.HSP.html#46247" class="Bound">X</a> <a id="46296" class="Symbol">‚Üí</a> <a id="46298" href="Demos.HSP.html#39768" class="Datatype">Term</a> <a id="46303" href="Demos.HSP.html#46247" class="Bound">X</a> <a id="46305" class="Symbol">‚Üí</a> <a id="46307" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="46312" class="Symbol">_</a>
 <a id="46315" href="Demos.HSP.html#46315" class="Bound">ùë®</a> <a id="46317" href="Demos.HSP.html#46266" class="Function Operator">‚äß</a> <a id="46319" href="Demos.HSP.html#46319" class="Bound">p</a> <a id="46321" href="Demos.HSP.html#46266" class="Function Operator">‚âà</a> <a id="46323" href="Demos.HSP.html#46323" class="Bound">q</a> <a id="46325" class="Symbol">=</a> <a id="46327" href="Demos.HSP.html#43001" class="Function">Equal</a> <a id="46333" href="Demos.HSP.html#46319" class="Bound">p</a> <a id="46335" href="Demos.HSP.html#46323" class="Bound">q</a> <a id="46337" class="Keyword">where</a> <a id="46343" class="Keyword">open</a> <a id="46348" href="Demos.HSP.html#42063" class="Module">Environment</a> <a id="46360" href="Demos.HSP.html#46315" class="Bound">ùë®</a>

 <a id="46364" href="Demos.HSP.html#46364" class="Function Operator">_‚ä´_‚âà_</a> <a id="46370" class="Symbol">:</a> <a id="46372" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="46377" class="Symbol">(</a><a id="46378" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="46386" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="46388" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a><a id="46390" class="Symbol">)</a> <a id="46392" href="Demos.HSP.html#7614" class="Generalizable">‚Ñì</a> <a id="46394" class="Symbol">‚Üí</a> <a id="46396" href="Demos.HSP.html#39768" class="Datatype">Term</a> <a id="46401" href="Demos.HSP.html#46247" class="Bound">X</a> <a id="46403" class="Symbol">‚Üí</a> <a id="46405" href="Demos.HSP.html#39768" class="Datatype">Term</a> <a id="46410" href="Demos.HSP.html#46247" class="Bound">X</a> <a id="46412" class="Symbol">‚Üí</a> <a id="46414" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="46419" class="Symbol">_</a>
 <a id="46422" href="Demos.HSP.html#46422" class="Bound">ùí¶</a> <a id="46424" href="Demos.HSP.html#46364" class="Function Operator">‚ä´</a> <a id="46426" href="Demos.HSP.html#46426" class="Bound">p</a> <a id="46428" href="Demos.HSP.html#46364" class="Function Operator">‚âà</a> <a id="46430" href="Demos.HSP.html#46430" class="Bound">q</a> <a id="46432" class="Symbol">=</a> <a id="46434" class="Symbol">‚àÄ</a> <a id="46436" href="Demos.HSP.html#46436" class="Bound">ùë®</a> <a id="46438" class="Symbol">‚Üí</a> <a id="46440" href="Demos.HSP.html#46422" class="Bound">ùí¶</a> <a id="46442" href="Demos.HSP.html#46436" class="Bound">ùë®</a> <a id="46444" class="Symbol">‚Üí</a> <a id="46446" href="Demos.HSP.html#46436" class="Bound">ùë®</a> <a id="46448" href="Demos.HSP.html#46266" class="Function Operator">‚äß</a> <a id="46450" href="Demos.HSP.html#46426" class="Bound">p</a> <a id="46452" href="Demos.HSP.html#46266" class="Function Operator">‚âà</a> <a id="46454" href="Demos.HSP.html#46430" class="Bound">q</a>

</pre>
We represent a set of term identities as a predicate over pairs of terms, say, `‚Ñ∞ :  Pred(Term X √ó Term X)`, and we denote by `ùë® ‚ä® ‚Ñ∞` the assertion that `ùë®` models `p ‚âà q` for all `(p, q) ‚àà ‚Ñ∞`.

<pre class="Agda">

 <a id="46678" href="Demos.HSP.html#46678" class="Function Operator">_‚ä®_</a> <a id="46682" class="Symbol">:</a> <a id="46684" class="Symbol">(</a><a id="46685" href="Demos.HSP.html#46685" class="Bound">ùë®</a> <a id="46687" class="Symbol">:</a> <a id="46689" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="46697" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="46699" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a><a id="46701" class="Symbol">)</a> <a id="46703" class="Symbol">‚Üí</a> <a id="46705" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="46709" class="Symbol">(</a><a id="46710" href="Demos.HSP.html#39768" class="Datatype">Term</a> <a id="46715" href="Demos.HSP.html#46247" class="Bound">X</a> <a id="46717" href="Data.Product.html#1167" class="Function Operator">√ó</a> <a id="46719" href="Demos.HSP.html#39768" class="Datatype">Term</a> <a id="46724" href="Demos.HSP.html#46247" class="Bound">X</a><a id="46725" class="Symbol">)(</a><a id="46727" href="Demos.HSP.html#34906" class="Function">ov</a> <a id="46730" href="Demos.HSP.html#46256" class="Bound">œá</a><a id="46731" class="Symbol">)</a> <a id="46733" class="Symbol">‚Üí</a> <a id="46735" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="46740" class="Symbol">_</a>
 <a id="46743" href="Demos.HSP.html#46743" class="Bound">ùë®</a> <a id="46745" href="Demos.HSP.html#46678" class="Function Operator">‚ä®</a> <a id="46747" href="Demos.HSP.html#46747" class="Bound">‚Ñ∞</a> <a id="46749" class="Symbol">=</a> <a id="46751" class="Symbol">‚àÄ</a> <a id="46753" class="Symbol">{</a><a id="46754" href="Demos.HSP.html#46754" class="Bound">p</a> <a id="46756" href="Demos.HSP.html#46756" class="Bound">q</a><a id="46757" class="Symbol">}</a> <a id="46759" class="Symbol">‚Üí</a> <a id="46761" class="Symbol">(</a><a id="46762" href="Demos.HSP.html#46754" class="Bound">p</a> <a id="46764" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="46766" href="Demos.HSP.html#46756" class="Bound">q</a><a id="46767" class="Symbol">)</a> <a id="46769" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="46771" href="Demos.HSP.html#46747" class="Bound">‚Ñ∞</a> <a id="46773" class="Symbol">‚Üí</a> <a id="46775" href="Demos.HSP.html#43001" class="Function">Equal</a> <a id="46781" href="Demos.HSP.html#46754" class="Bound">p</a> <a id="46783" href="Demos.HSP.html#46756" class="Bound">q</a> <a id="46785" class="Keyword">where</a> <a id="46791" class="Keyword">open</a> <a id="46796" href="Demos.HSP.html#42063" class="Module">Environment</a> <a id="46808" href="Demos.HSP.html#46743" class="Bound">ùë®</a>

</pre>
(The symbol `‚ä®` is a stretched version of the models symbol `‚äß`,
so [Agda][] can distinguish between the two and parse expressions involving the types
`_‚ä®_` and `_‚äß_‚âà_`. In Emacs `agda2-mode`, the symbol `‚ä®` is produced by typing
`\|=`, while `‚äß` is produced with `\models`.)

An important property of the binary relation `‚äß` is *algebraic invariance* (i.e.,
invariance under isomorphism).  We formalize this property as follows.

<pre class="Agda">

<a id="47267" class="Keyword">module</a> <a id="47274" href="Demos.HSP.html#47274" class="Module">_</a> <a id="47276" class="Symbol">{</a><a id="47277" href="Demos.HSP.html#47277" class="Bound">X</a> <a id="47279" class="Symbol">:</a> <a id="47281" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="47286" href="Demos.HSP.html#7612" class="Generalizable">œá</a><a id="47287" class="Symbol">}{</a><a id="47289" href="Demos.HSP.html#47289" class="Bound">ùë®</a> <a id="47291" class="Symbol">:</a> <a id="47293" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="47301" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="47303" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a><a id="47305" class="Symbol">}(</a><a id="47307" href="Demos.HSP.html#47307" class="Bound">ùë©</a> <a id="47309" class="Symbol">:</a> <a id="47311" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="47319" href="Demos.HSP.html#7595" class="Generalizable">Œ≤</a> <a id="47321" href="Demos.HSP.html#7597" class="Generalizable">œÅ·µá</a><a id="47323" class="Symbol">)(</a><a id="47325" href="Demos.HSP.html#47325" class="Bound">p</a> <a id="47327" href="Demos.HSP.html#47327" class="Bound">q</a> <a id="47329" class="Symbol">:</a> <a id="47331" href="Demos.HSP.html#39768" class="Datatype">Term</a> <a id="47336" href="Demos.HSP.html#47277" class="Bound">X</a><a id="47337" class="Symbol">)</a> <a id="47339" class="Keyword">where</a>
 <a id="47346" href="Demos.HSP.html#47346" class="Function">‚äß-I-invar</a> <a id="47356" class="Symbol">:</a> <a id="47358" href="Demos.HSP.html#47289" class="Bound">ùë®</a> <a id="47360" href="Demos.HSP.html#46266" class="Function Operator">‚äß</a> <a id="47362" href="Demos.HSP.html#47325" class="Bound">p</a> <a id="47364" href="Demos.HSP.html#46266" class="Function Operator">‚âà</a> <a id="47366" href="Demos.HSP.html#47327" class="Bound">q</a>  <a id="47369" class="Symbol">‚Üí</a>  <a id="47372" href="Demos.HSP.html#47289" class="Bound">ùë®</a> <a id="47374" href="Demos.HSP.html#32954" class="Record Operator">‚âÖ</a> <a id="47376" href="Demos.HSP.html#47307" class="Bound">ùë©</a>  <a id="47379" class="Symbol">‚Üí</a>  <a id="47382" href="Demos.HSP.html#47307" class="Bound">ùë©</a> <a id="47384" href="Demos.HSP.html#46266" class="Function Operator">‚äß</a> <a id="47386" href="Demos.HSP.html#47325" class="Bound">p</a> <a id="47388" href="Demos.HSP.html#46266" class="Function Operator">‚âà</a> <a id="47390" href="Demos.HSP.html#47327" class="Bound">q</a>
 <a id="47393" href="Demos.HSP.html#47346" class="Function">‚äß-I-invar</a> <a id="47403" href="Demos.HSP.html#47403" class="Bound">Apq</a> <a id="47407" class="Symbol">(</a><a id="47408" href="Demos.HSP.html#33013" class="InductiveConstructor">mkiso</a> <a id="47414" href="Demos.HSP.html#47414" class="Bound">fh</a> <a id="47417" href="Demos.HSP.html#47417" class="Bound">gh</a> <a id="47420" href="Demos.HSP.html#47420" class="Bound">f‚àºg</a> <a id="47424" href="Demos.HSP.html#47424" class="Bound">g‚àºf</a><a id="47427" class="Symbol">)</a> <a id="47429" href="Demos.HSP.html#47429" class="Bound">œÅ</a> <a id="47431" class="Symbol">=</a> <a id="47433" href="Relation.Binary.Reasoning.Base.Single.html#1916" class="Function Operator">begin</a>
  <a id="47441" href="Demos.HSP.html#42627" class="Function Operator">‚ü¶</a> <a id="47443" href="Demos.HSP.html#47325" class="Bound">p</a> <a id="47445" href="Demos.HSP.html#42627" class="Function Operator">‚üß</a>     <a id="47451" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a>             <a id="47467" href="Demos.HSP.html#47429" class="Bound">œÅ</a>    <a id="47472" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚âàÀò‚ü®</a>  <a id="47477" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="47482" href="Demos.HSP.html#42627" class="Function Operator">‚ü¶</a> <a id="47484" href="Demos.HSP.html#47325" class="Bound">p</a> <a id="47486" href="Demos.HSP.html#42627" class="Function Operator">‚üß</a> <a id="47488" class="Symbol">(</a><a id="47489" href="Demos.HSP.html#47420" class="Bound">f‚àºg</a> <a id="47493" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="47495" href="Demos.HSP.html#47429" class="Bound">œÅ</a><a id="47496" class="Symbol">)</a>        <a id="47505" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚ü©</a>
  <a id="47509" href="Demos.HSP.html#42627" class="Function Operator">‚ü¶</a> <a id="47511" href="Demos.HSP.html#47325" class="Bound">p</a> <a id="47513" href="Demos.HSP.html#42627" class="Function Operator">‚üß</a>     <a id="47519" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="47523" class="Symbol">(</a><a id="47524" href="Demos.HSP.html#47831" class="Function">f</a> <a id="47526" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="47529" class="Symbol">(</a><a id="47530" href="Demos.HSP.html#47850" class="Function">g</a> <a id="47532" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="47535" href="Demos.HSP.html#47429" class="Bound">œÅ</a><a id="47536" class="Symbol">))</a>  <a id="47540" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚âàÀò‚ü®</a>  <a id="47545" href="Demos.HSP.html#44371" class="Function">comm-hom-term</a> <a id="47559" href="Demos.HSP.html#47414" class="Bound">fh</a> <a id="47562" href="Demos.HSP.html#47325" class="Bound">p</a> <a id="47564" class="Symbol">(</a><a id="47565" href="Demos.HSP.html#47850" class="Function">g</a> <a id="47567" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="47569" href="Demos.HSP.html#47429" class="Bound">œÅ</a><a id="47570" class="Symbol">)</a>  <a id="47573" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚ü©</a>
  <a id="47577" href="Demos.HSP.html#47831" class="Function">f</a><a id="47578" class="Symbol">(</a><a id="47579" href="Demos.HSP.html#47923" class="Function Operator">‚ü¶</a> <a id="47581" href="Demos.HSP.html#47325" class="Bound">p</a> <a id="47583" href="Demos.HSP.html#47923" class="Function Operator">‚üß·¥¨</a>  <a id="47587" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a>       <a id="47597" class="Symbol">(</a><a id="47598" href="Demos.HSP.html#47850" class="Function">g</a> <a id="47600" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="47603" href="Demos.HSP.html#47429" class="Bound">œÅ</a><a id="47604" class="Symbol">))</a>  <a id="47608" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a>   <a id="47613" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="47618" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="47620" href="Demos.HSP.html#47414" class="Bound">fh</a> <a id="47623" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="47625" class="Symbol">(</a><a id="47626" href="Demos.HSP.html#47403" class="Bound">Apq</a> <a id="47630" class="Symbol">(</a><a id="47631" href="Demos.HSP.html#47850" class="Function">g</a> <a id="47633" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="47635" href="Demos.HSP.html#47429" class="Bound">œÅ</a><a id="47636" class="Symbol">))</a>   <a id="47641" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
  <a id="47645" href="Demos.HSP.html#47831" class="Function">f</a><a id="47646" class="Symbol">(</a><a id="47647" href="Demos.HSP.html#47923" class="Function Operator">‚ü¶</a> <a id="47649" href="Demos.HSP.html#47327" class="Bound">q</a> <a id="47651" href="Demos.HSP.html#47923" class="Function Operator">‚üß·¥¨</a>  <a id="47655" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a>       <a id="47665" class="Symbol">(</a><a id="47666" href="Demos.HSP.html#47850" class="Function">g</a> <a id="47668" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="47671" href="Demos.HSP.html#47429" class="Bound">œÅ</a><a id="47672" class="Symbol">))</a>  <a id="47676" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a>   <a id="47681" href="Demos.HSP.html#44371" class="Function">comm-hom-term</a> <a id="47695" href="Demos.HSP.html#47414" class="Bound">fh</a> <a id="47698" href="Demos.HSP.html#47327" class="Bound">q</a> <a id="47700" class="Symbol">(</a><a id="47701" href="Demos.HSP.html#47850" class="Function">g</a> <a id="47703" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="47705" href="Demos.HSP.html#47429" class="Bound">œÅ</a><a id="47706" class="Symbol">)</a>  <a id="47709" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
  <a id="47713" href="Demos.HSP.html#42627" class="Function Operator">‚ü¶</a> <a id="47715" href="Demos.HSP.html#47327" class="Bound">q</a> <a id="47717" href="Demos.HSP.html#42627" class="Function Operator">‚üß</a>     <a id="47723" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="47727" class="Symbol">(</a><a id="47728" href="Demos.HSP.html#47831" class="Function">f</a> <a id="47730" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="47733" class="Symbol">(</a><a id="47734" href="Demos.HSP.html#47850" class="Function">g</a> <a id="47736" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="47739" href="Demos.HSP.html#47429" class="Bound">œÅ</a><a id="47740" class="Symbol">))</a>  <a id="47744" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a>   <a id="47749" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="47754" href="Demos.HSP.html#42627" class="Function Operator">‚ü¶</a> <a id="47756" href="Demos.HSP.html#47327" class="Bound">q</a> <a id="47758" href="Demos.HSP.html#42627" class="Function Operator">‚üß</a> <a id="47760" class="Symbol">(</a><a id="47761" href="Demos.HSP.html#47420" class="Bound">f‚àºg</a> <a id="47765" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="47767" href="Demos.HSP.html#47429" class="Bound">œÅ</a><a id="47768" class="Symbol">)</a>        <a id="47777" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
  <a id="47781" href="Demos.HSP.html#42627" class="Function Operator">‚ü¶</a> <a id="47783" href="Demos.HSP.html#47327" class="Bound">q</a> <a id="47785" href="Demos.HSP.html#42627" class="Function Operator">‚üß</a>     <a id="47791" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a>             <a id="47807" href="Demos.HSP.html#47429" class="Bound">œÅ</a>    <a id="47812" href="Relation.Binary.Reasoning.Base.Single.html#2555" class="Function Operator">‚àé</a>
  <a id="47816" class="Keyword">where</a>  <a id="47823" class="Keyword">private</a> <a id="47831" href="Demos.HSP.html#47831" class="Function">f</a> <a id="47833" class="Symbol">=</a> <a id="47835" href="Demos.HSP.html#6758" class="Field Operator">_‚ü®$‚ü©_</a> <a id="47841" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="47843" href="Demos.HSP.html#47414" class="Bound">fh</a> <a id="47846" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="47848" class="Symbol">;</a> <a id="47850" href="Demos.HSP.html#47850" class="Function">g</a> <a id="47852" class="Symbol">=</a> <a id="47854" href="Demos.HSP.html#6758" class="Field Operator">_‚ü®$‚ü©_</a> <a id="47860" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="47862" href="Demos.HSP.html#47417" class="Bound">gh</a> <a id="47865" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a>
         <a id="47876" class="Keyword">open</a> <a id="47881" href="Demos.HSP.html#42063" class="Module">Environment</a> <a id="47893" href="Demos.HSP.html#47289" class="Bound">ùë®</a>  <a id="47896" class="Keyword">using</a> <a id="47902" class="Symbol">()</a> <a id="47905" class="Keyword">renaming</a> <a id="47914" class="Symbol">(</a> <a id="47916" href="Demos.HSP.html#42627" class="Function Operator">‚ü¶_‚üß</a> <a id="47920" class="Symbol">to</a> <a id="47923" class="Function Operator">‚ü¶_‚üß·¥¨</a> <a id="47928" class="Symbol">)</a>
         <a id="47939" class="Keyword">open</a> <a id="47944" href="Demos.HSP.html#42063" class="Module">Environment</a> <a id="47956" href="Demos.HSP.html#47307" class="Bound">ùë©</a>  <a id="47959" class="Keyword">using</a> <a id="47965" class="Symbol">(</a> <a id="47967" href="Demos.HSP.html#42627" class="Function Operator">‚ü¶_‚üß</a> <a id="47971" class="Symbol">)</a> <a id="47973" class="Symbol">;</a> <a id="47975" class="Keyword">open</a> <a id="47980" href="Relation.Binary.Reasoning.Setoid.html" class="Module">SetoidReasoning</a> <a id="47996" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="47999" href="Demos.HSP.html#47307" class="Bound">ùë©</a> <a id="48001" href="Demos.HSP.html#19374" class="Function Operator">]</a>

</pre>
If `ùí¶` is a class of `ùëÜ`-algebras, the set of identities modeled by `ùí¶`, denoted `Th ùí¶`, is called the *equational theory* of `ùí¶`. If `‚Ñ∞` is a set of `ùëÜ`-term identities,
the class of algebras modeling `‚Ñ∞`, denoted `Mod ‚Ñ∞`, is called the *equational class axiomatized* by `‚Ñ∞`. We codify these notions in the next two definitions.

<pre class="Agda">

<a id="Th"></a><a id="48360" href="Demos.HSP.html#48360" class="Function">Th</a> <a id="48363" class="Symbol">:</a> <a id="48365" class="Symbol">{</a><a id="48366" href="Demos.HSP.html#48366" class="Bound">X</a> <a id="48368" class="Symbol">:</a> <a id="48370" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="48375" href="Demos.HSP.html#7612" class="Generalizable">œá</a><a id="48376" class="Symbol">}</a> <a id="48378" class="Symbol">‚Üí</a> <a id="48380" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="48385" class="Symbol">(</a><a id="48386" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="48394" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="48396" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a><a id="48398" class="Symbol">)</a> <a id="48400" href="Demos.HSP.html#7614" class="Generalizable">‚Ñì</a> <a id="48402" class="Symbol">‚Üí</a> <a id="48404" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="48408" class="Symbol">(</a><a id="48409" href="Demos.HSP.html#39768" class="Datatype">Term</a> <a id="48414" href="Demos.HSP.html#48366" class="Bound">X</a> <a id="48416" href="Data.Product.html#1167" class="Function Operator">√ó</a> <a id="48418" href="Demos.HSP.html#39768" class="Datatype">Term</a> <a id="48423" href="Demos.HSP.html#48366" class="Bound">X</a><a id="48424" class="Symbol">)</a> <a id="48426" class="Symbol">_</a>
<a id="48428" href="Demos.HSP.html#48360" class="Function">Th</a> <a id="48431" href="Demos.HSP.html#48431" class="Bound">ùí¶</a> <a id="48433" class="Symbol">=</a> <a id="48435" class="Symbol">Œª</a> <a id="48437" class="Symbol">(</a><a id="48438" href="Demos.HSP.html#48438" class="Bound">p</a> <a id="48440" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="48442" href="Demos.HSP.html#48442" class="Bound">q</a><a id="48443" class="Symbol">)</a> <a id="48445" class="Symbol">‚Üí</a> <a id="48447" href="Demos.HSP.html#48431" class="Bound">ùí¶</a> <a id="48449" href="Demos.HSP.html#46364" class="Function Operator">‚ä´</a> <a id="48451" href="Demos.HSP.html#48438" class="Bound">p</a> <a id="48453" href="Demos.HSP.html#46364" class="Function Operator">‚âà</a> <a id="48455" href="Demos.HSP.html#48442" class="Bound">q</a>

<a id="Mod"></a><a id="48458" href="Demos.HSP.html#48458" class="Function">Mod</a> <a id="48462" class="Symbol">:</a> <a id="48464" class="Symbol">{</a><a id="48465" href="Demos.HSP.html#48465" class="Bound">X</a> <a id="48467" class="Symbol">:</a> <a id="48469" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="48474" href="Demos.HSP.html#7612" class="Generalizable">œá</a><a id="48475" class="Symbol">}</a> <a id="48477" class="Symbol">‚Üí</a> <a id="48479" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="48483" class="Symbol">(</a><a id="48484" href="Demos.HSP.html#39768" class="Datatype">Term</a> <a id="48489" href="Demos.HSP.html#48465" class="Bound">X</a> <a id="48491" href="Data.Product.html#1167" class="Function Operator">√ó</a> <a id="48493" href="Demos.HSP.html#39768" class="Datatype">Term</a> <a id="48498" href="Demos.HSP.html#48465" class="Bound">X</a><a id="48499" class="Symbol">)</a> <a id="48501" href="Demos.HSP.html#7614" class="Generalizable">‚Ñì</a> <a id="48503" class="Symbol">‚Üí</a> <a id="48505" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="48510" class="Symbol">(</a><a id="48511" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="48519" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="48521" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a><a id="48523" class="Symbol">)</a> <a id="48525" class="Symbol">_</a>
<a id="48527" href="Demos.HSP.html#48458" class="Function">Mod</a> <a id="48531" href="Demos.HSP.html#48531" class="Bound">‚Ñ∞</a> <a id="48533" href="Demos.HSP.html#48533" class="Bound">ùë®</a> <a id="48535" class="Symbol">=</a> <a id="48537" class="Symbol">‚àÄ</a> <a id="48539" class="Symbol">{</a><a id="48540" href="Demos.HSP.html#48540" class="Bound">p</a> <a id="48542" href="Demos.HSP.html#48542" class="Bound">q</a><a id="48543" class="Symbol">}</a> <a id="48545" class="Symbol">‚Üí</a> <a id="48547" class="Symbol">(</a><a id="48548" href="Demos.HSP.html#48540" class="Bound">p</a> <a id="48550" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="48552" href="Demos.HSP.html#48542" class="Bound">q</a><a id="48553" class="Symbol">)</a> <a id="48555" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="48557" href="Demos.HSP.html#48531" class="Bound">‚Ñ∞</a> <a id="48559" class="Symbol">‚Üí</a> <a id="48561" href="Demos.HSP.html#43001" class="Function">Equal</a> <a id="48567" href="Demos.HSP.html#48540" class="Bound">p</a> <a id="48569" href="Demos.HSP.html#48542" class="Bound">q</a> <a id="48571" class="Keyword">where</a> <a id="48577" class="Keyword">open</a> <a id="48582" href="Demos.HSP.html#42063" class="Module">Environment</a> <a id="48594" href="Demos.HSP.html#48533" class="Bound">ùë®</a>
</pre>

#### <a id="the-closure-operators-h-s-p-and-v">The Closure Operators H, S, P and V</a>

Fix a signature `ùëÜ`, let `ùí¶` be a class of `ùëÜ`-algebras, and define
* `H ùí¶` := the class of all homomorphic images of members of `ùí¶`;
* `S ùí¶` := the class of all subalgebras of members of `ùí¶`;
* `P ùí¶` := the class of all products of members of `ùí¶`.

`H`, `S`, and `P` are *closure operators* (expansive, monotone, and idempotent).  
A class `ùí¶` of `ùëÜ`-algebras is said to be *closed under the taking of homomorphic images* 
provided `H ùí¶ ‚äÜ ùí¶`. Similarly, `ùí¶` is *closed under the taking of subalgebras* (resp., *arbitrary products*) provided `S ùí¶ ‚äÜ ùí¶` (resp., `P ùí¶ ‚äÜ ùí¶`). The operators `H`, `S`, and `P` can be composed with one another repeatedly, forming yet more closure operators. We represent these three closure operators in type theory as follows.

<pre class="Agda">

<a id="49466" class="Keyword">module</a> <a id="49473" href="Demos.HSP.html#49473" class="Module">_</a> <a id="49475" class="Symbol">{</a><a id="49476" href="Demos.HSP.html#49476" class="Bound">Œ±</a> <a id="49478" href="Demos.HSP.html#49478" class="Bound">œÅ·µÉ</a> <a id="49481" href="Demos.HSP.html#49481" class="Bound">Œ≤</a> <a id="49483" href="Demos.HSP.html#49483" class="Bound">œÅ·µá</a> <a id="49486" class="Symbol">:</a> <a id="49488" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="49493" class="Symbol">}</a> <a id="49495" class="Keyword">where</a>
 <a id="49502" class="Keyword">private</a> <a id="49510" href="Demos.HSP.html#49510" class="Function">a</a> <a id="49512" class="Symbol">=</a> <a id="49514" href="Demos.HSP.html#49476" class="Bound">Œ±</a> <a id="49516" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="49518" href="Demos.HSP.html#49478" class="Bound">œÅ·µÉ</a>
 <a id="49522" href="Demos.HSP.html#49522" class="Function">H</a> <a id="49524" class="Symbol">:</a> <a id="49526" class="Symbol">‚àÄ</a> <a id="49528" href="Demos.HSP.html#49528" class="Bound">‚Ñì</a> <a id="49530" class="Symbol">‚Üí</a> <a id="49532" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="49536" class="Symbol">(</a><a id="49537" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="49545" href="Demos.HSP.html#49476" class="Bound">Œ±</a> <a id="49547" href="Demos.HSP.html#49478" class="Bound">œÅ·µÉ</a><a id="49549" class="Symbol">)</a> <a id="49551" class="Symbol">(</a><a id="49552" href="Demos.HSP.html#49510" class="Function">a</a> <a id="49554" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="49556" href="Demos.HSP.html#34906" class="Function">ov</a> <a id="49559" href="Demos.HSP.html#49528" class="Bound">‚Ñì</a><a id="49560" class="Symbol">)</a> <a id="49562" class="Symbol">‚Üí</a> <a id="49564" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="49568" class="Symbol">(</a><a id="49569" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="49577" href="Demos.HSP.html#49481" class="Bound">Œ≤</a> <a id="49579" href="Demos.HSP.html#49483" class="Bound">œÅ·µá</a><a id="49581" class="Symbol">)</a> <a id="49583" class="Symbol">_</a>
 <a id="49586" href="Demos.HSP.html#49522" class="Function">H</a> <a id="49588" class="Symbol">_</a> <a id="49590" href="Demos.HSP.html#49590" class="Bound">ùí¶</a> <a id="49592" href="Demos.HSP.html#49592" class="Bound">ùë©</a> <a id="49594" class="Symbol">=</a> <a id="49596" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="49599" href="Demos.HSP.html#49599" class="Bound">ùë®</a> <a id="49601" href="Data.Product.html#916" class="Function">‚àà</a> <a id="49603" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="49611" href="Demos.HSP.html#49476" class="Bound">Œ±</a> <a id="49613" href="Demos.HSP.html#49478" class="Bound">œÅ·µÉ</a> <a id="49616" href="Data.Product.html#916" class="Function">]</a> <a id="49618" href="Demos.HSP.html#49599" class="Bound">ùë®</a> <a id="49620" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="49622" href="Demos.HSP.html#49590" class="Bound">ùí¶</a> <a id="49624" href="Data.Product.html#1167" class="Function Operator">√ó</a> <a id="49626" href="Demos.HSP.html#49592" class="Bound">ùë©</a> <a id="49628" href="Demos.HSP.html#35003" class="Function Operator">IsHomImageOf</a> <a id="49641" href="Demos.HSP.html#49599" class="Bound">ùë®</a>

 <a id="49645" href="Demos.HSP.html#49645" class="Function">S</a> <a id="49647" class="Symbol">:</a> <a id="49649" class="Symbol">‚àÄ</a> <a id="49651" href="Demos.HSP.html#49651" class="Bound">‚Ñì</a> <a id="49653" class="Symbol">‚Üí</a> <a id="49655" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="49659" class="Symbol">(</a><a id="49660" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="49668" href="Demos.HSP.html#49476" class="Bound">Œ±</a> <a id="49670" href="Demos.HSP.html#49478" class="Bound">œÅ·µÉ</a><a id="49672" class="Symbol">)</a> <a id="49674" class="Symbol">(</a><a id="49675" href="Demos.HSP.html#49510" class="Function">a</a> <a id="49677" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="49679" href="Demos.HSP.html#34906" class="Function">ov</a> <a id="49682" href="Demos.HSP.html#49651" class="Bound">‚Ñì</a><a id="49683" class="Symbol">)</a> <a id="49685" class="Symbol">‚Üí</a> <a id="49687" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="49691" class="Symbol">(</a><a id="49692" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="49700" href="Demos.HSP.html#49481" class="Bound">Œ≤</a> <a id="49702" href="Demos.HSP.html#49483" class="Bound">œÅ·µá</a><a id="49704" class="Symbol">)</a> <a id="49706" class="Symbol">_</a>
 <a id="49709" href="Demos.HSP.html#49645" class="Function">S</a> <a id="49711" class="Symbol">_</a> <a id="49713" href="Demos.HSP.html#49713" class="Bound">ùí¶</a> <a id="49715" href="Demos.HSP.html#49715" class="Bound">ùë©</a> <a id="49717" class="Symbol">=</a> <a id="49719" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="49722" href="Demos.HSP.html#49722" class="Bound">ùë®</a> <a id="49724" href="Data.Product.html#916" class="Function">‚àà</a> <a id="49726" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="49734" href="Demos.HSP.html#49476" class="Bound">Œ±</a> <a id="49736" href="Demos.HSP.html#49478" class="Bound">œÅ·µÉ</a> <a id="49739" href="Data.Product.html#916" class="Function">]</a> <a id="49741" href="Demos.HSP.html#49722" class="Bound">ùë®</a> <a id="49743" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="49745" href="Demos.HSP.html#49713" class="Bound">ùí¶</a> <a id="49747" href="Data.Product.html#1167" class="Function Operator">√ó</a> <a id="49749" href="Demos.HSP.html#49715" class="Bound">ùë©</a> <a id="49751" href="Demos.HSP.html#37703" class="Function Operator">‚â§</a> <a id="49753" href="Demos.HSP.html#49722" class="Bound">ùë®</a>

 <a id="49757" href="Demos.HSP.html#49757" class="Function">P</a> <a id="49759" class="Symbol">:</a> <a id="49761" class="Symbol">‚àÄ</a> <a id="49763" href="Demos.HSP.html#49763" class="Bound">‚Ñì</a> <a id="49765" href="Demos.HSP.html#49765" class="Bound">Œπ</a> <a id="49767" class="Symbol">‚Üí</a> <a id="49769" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="49773" class="Symbol">(</a><a id="49774" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="49782" href="Demos.HSP.html#49476" class="Bound">Œ±</a> <a id="49784" href="Demos.HSP.html#49478" class="Bound">œÅ·µÉ</a><a id="49786" class="Symbol">)</a> <a id="49788" class="Symbol">(</a><a id="49789" href="Demos.HSP.html#49510" class="Function">a</a> <a id="49791" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="49793" href="Demos.HSP.html#34906" class="Function">ov</a> <a id="49796" href="Demos.HSP.html#49763" class="Bound">‚Ñì</a><a id="49797" class="Symbol">)</a> <a id="49799" class="Symbol">‚Üí</a> <a id="49801" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="49805" class="Symbol">(</a><a id="49806" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="49814" href="Demos.HSP.html#49481" class="Bound">Œ≤</a> <a id="49816" href="Demos.HSP.html#49483" class="Bound">œÅ·µá</a><a id="49818" class="Symbol">)</a> <a id="49820" class="Symbol">_</a>
 <a id="49823" href="Demos.HSP.html#49757" class="Function">P</a> <a id="49825" class="Symbol">_</a> <a id="49827" href="Demos.HSP.html#49827" class="Bound">Œπ</a> <a id="49829" href="Demos.HSP.html#49829" class="Bound">ùí¶</a> <a id="49831" href="Demos.HSP.html#49831" class="Bound">ùë©</a> <a id="49833" class="Symbol">=</a> <a id="49835" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="49838" href="Demos.HSP.html#49838" class="Bound">I</a> <a id="49840" href="Data.Product.html#916" class="Function">‚àà</a> <a id="49842" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="49847" href="Demos.HSP.html#49827" class="Bound">Œπ</a> <a id="49849" href="Data.Product.html#916" class="Function">]</a> <a id="49851" class="Symbol">(</a><a id="49852" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="49855" href="Demos.HSP.html#49855" class="Bound">ùíú</a> <a id="49857" href="Data.Product.html#916" class="Function">‚àà</a> <a id="49859" class="Symbol">(</a><a id="49860" href="Demos.HSP.html#49838" class="Bound">I</a> <a id="49862" class="Symbol">‚Üí</a> <a id="49864" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="49872" href="Demos.HSP.html#49476" class="Bound">Œ±</a> <a id="49874" href="Demos.HSP.html#49478" class="Bound">œÅ·µÉ</a><a id="49876" class="Symbol">)</a> <a id="49878" href="Data.Product.html#916" class="Function">]</a> <a id="49880" class="Symbol">(‚àÄ</a> <a id="49883" href="Demos.HSP.html#49883" class="Bound">i</a> <a id="49885" class="Symbol">‚Üí</a> <a id="49887" href="Demos.HSP.html#49855" class="Bound">ùíú</a> <a id="49889" href="Demos.HSP.html#49883" class="Bound">i</a> <a id="49891" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="49893" href="Demos.HSP.html#49829" class="Bound">ùí¶</a><a id="49894" class="Symbol">)</a> <a id="49896" href="Data.Product.html#1167" class="Function Operator">√ó</a> <a id="49898" class="Symbol">(</a><a id="49899" href="Demos.HSP.html#49831" class="Bound">ùë©</a> <a id="49901" href="Demos.HSP.html#32954" class="Record Operator">‚âÖ</a> <a id="49903" href="Demos.HSP.html#24332" class="Function">‚®Ö</a> <a id="49905" href="Demos.HSP.html#49855" class="Bound">ùíú</a><a id="49906" class="Symbol">))</a>

</pre>
Identities modeled by an algebra `ùë®` are also modeled by every homomorphic image of
`ùë®` and by every subalgebra of `ùë®`. These facts are formalized in [Agda][] as follows.

<pre class="Agda">

<a id="50107" class="Keyword">module</a> <a id="50114" href="Demos.HSP.html#50114" class="Module">_</a> <a id="50116" class="Symbol">{</a><a id="50117" href="Demos.HSP.html#50117" class="Bound">X</a> <a id="50119" class="Symbol">:</a> <a id="50121" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="50126" href="Demos.HSP.html#7612" class="Generalizable">œá</a><a id="50127" class="Symbol">}{</a><a id="50129" href="Demos.HSP.html#50129" class="Bound">ùë®</a> <a id="50131" class="Symbol">:</a> <a id="50133" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="50141" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="50143" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a><a id="50145" class="Symbol">}{</a><a id="50147" href="Demos.HSP.html#50147" class="Bound">ùë©</a> <a id="50149" class="Symbol">:</a> <a id="50151" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="50159" href="Demos.HSP.html#7595" class="Generalizable">Œ≤</a> <a id="50161" href="Demos.HSP.html#7597" class="Generalizable">œÅ·µá</a><a id="50163" class="Symbol">}{</a><a id="50165" href="Demos.HSP.html#50165" class="Bound">p</a> <a id="50167" href="Demos.HSP.html#50167" class="Bound">q</a> <a id="50169" class="Symbol">:</a> <a id="50171" href="Demos.HSP.html#39768" class="Datatype">Term</a> <a id="50176" href="Demos.HSP.html#50117" class="Bound">X</a><a id="50177" class="Symbol">}</a> <a id="50179" class="Keyword">where</a>
 <a id="50186" href="Demos.HSP.html#50186" class="Function">‚äß-H-invar</a> <a id="50196" class="Symbol">:</a> <a id="50198" href="Demos.HSP.html#50129" class="Bound">ùë®</a> <a id="50200" href="Demos.HSP.html#46266" class="Function Operator">‚äß</a> <a id="50202" href="Demos.HSP.html#50165" class="Bound">p</a> <a id="50204" href="Demos.HSP.html#46266" class="Function Operator">‚âà</a> <a id="50206" href="Demos.HSP.html#50167" class="Bound">q</a> <a id="50208" class="Symbol">‚Üí</a> <a id="50210" href="Demos.HSP.html#50147" class="Bound">ùë©</a> <a id="50212" href="Demos.HSP.html#35003" class="Function Operator">IsHomImageOf</a> <a id="50225" href="Demos.HSP.html#50129" class="Bound">ùë®</a> <a id="50227" class="Symbol">‚Üí</a> <a id="50229" href="Demos.HSP.html#50147" class="Bound">ùë©</a> <a id="50231" href="Demos.HSP.html#46266" class="Function Operator">‚äß</a> <a id="50233" href="Demos.HSP.html#50165" class="Bound">p</a> <a id="50235" href="Demos.HSP.html#46266" class="Function Operator">‚âà</a> <a id="50237" href="Demos.HSP.html#50167" class="Bound">q</a>
 <a id="50240" href="Demos.HSP.html#50186" class="Function">‚äß-H-invar</a> <a id="50250" href="Demos.HSP.html#50250" class="Bound">Apq</a> <a id="50254" class="Symbol">(</a><a id="50255" href="Demos.HSP.html#50255" class="Bound">œÜh</a> <a id="50258" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="50260" href="Demos.HSP.html#50260" class="Bound">œÜE</a><a id="50262" class="Symbol">)</a> <a id="50264" href="Demos.HSP.html#50264" class="Bound">œÅ</a> <a id="50266" class="Symbol">=</a> <a id="50268" href="Relation.Binary.Reasoning.Base.Single.html#1916" class="Function Operator">begin</a>
       <a id="50281" href="Demos.HSP.html#42627" class="Function Operator">‚ü¶</a> <a id="50283" href="Demos.HSP.html#50165" class="Bound">p</a> <a id="50285" href="Demos.HSP.html#42627" class="Function Operator">‚üß</a>   <a id="50289" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a>               <a id="50307" href="Demos.HSP.html#50264" class="Bound">œÅ</a>    <a id="50312" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚âàÀò‚ü®</a>  <a id="50317" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="50322" href="Demos.HSP.html#42627" class="Function Operator">‚ü¶</a> <a id="50324" href="Demos.HSP.html#50165" class="Bound">p</a> <a id="50326" href="Demos.HSP.html#42627" class="Function Operator">‚üß</a><a id="50327" class="Symbol">(Œª</a> <a id="50330" href="Demos.HSP.html#50330" class="Bound">_</a> <a id="50332" class="Symbol">‚Üí</a> <a id="50334" href="Demos.HSP.html#11319" class="Function">InvIsInverse ≥</a> <a id="50348" href="Demos.HSP.html#50260" class="Bound">œÜE</a><a id="50350" class="Symbol">)</a>  <a id="50353" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚ü©</a>
       <a id="50362" href="Demos.HSP.html#42627" class="Function Operator">‚ü¶</a> <a id="50364" href="Demos.HSP.html#50165" class="Bound">p</a> <a id="50366" href="Demos.HSP.html#42627" class="Function Operator">‚üß</a>   <a id="50370" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="50374" class="Symbol">(</a><a id="50375" href="Demos.HSP.html#50788" class="Function">œÜ</a> <a id="50377" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="50380" href="Demos.HSP.html#50728" class="Function">œÜ‚Åª¬π</a>  <a id="50385" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="50388" href="Demos.HSP.html#50264" class="Bound">œÅ</a><a id="50389" class="Symbol">)</a>   <a id="50393" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚âàÀò‚ü®</a>  <a id="50398" href="Demos.HSP.html#44371" class="Function">comm-hom-term</a> <a id="50412" href="Demos.HSP.html#50255" class="Bound">œÜh</a> <a id="50415" href="Demos.HSP.html#50165" class="Bound">p</a> <a id="50417" class="Symbol">(</a><a id="50418" href="Demos.HSP.html#50728" class="Function">œÜ‚Åª¬π</a> <a id="50422" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="50424" href="Demos.HSP.html#50264" class="Bound">œÅ</a><a id="50425" class="Symbol">)</a>        <a id="50434" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚ü©</a>
   <a id="50439" href="Demos.HSP.html#50788" class="Function">œÜ</a><a id="50440" class="Symbol">(</a>  <a id="50443" href="Demos.HSP.html#50857" class="Function Operator">‚ü¶</a> <a id="50445" href="Demos.HSP.html#50165" class="Bound">p</a> <a id="50447" href="Demos.HSP.html#50857" class="Function Operator">‚üß·¥¨</a>  <a id="50451" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="50455" class="Symbol">(</a>     <a id="50461" href="Demos.HSP.html#50728" class="Function">œÜ‚Åª¬π</a>  <a id="50466" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="50469" href="Demos.HSP.html#50264" class="Bound">œÅ</a><a id="50470" class="Symbol">))</a>  <a id="50474" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a>   <a id="50479" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="50484" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="50486" href="Demos.HSP.html#50255" class="Bound">œÜh</a> <a id="50489" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="50491" class="Symbol">(</a><a id="50492" href="Demos.HSP.html#50250" class="Bound">Apq</a> <a id="50496" class="Symbol">(</a><a id="50497" href="Demos.HSP.html#50728" class="Function">œÜ‚Åª¬π</a> <a id="50501" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="50503" href="Demos.HSP.html#50264" class="Bound">œÅ</a><a id="50504" class="Symbol">))</a>         <a id="50515" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
   <a id="50520" href="Demos.HSP.html#50788" class="Function">œÜ</a><a id="50521" class="Symbol">(</a>  <a id="50524" href="Demos.HSP.html#50857" class="Function Operator">‚ü¶</a> <a id="50526" href="Demos.HSP.html#50167" class="Bound">q</a> <a id="50528" href="Demos.HSP.html#50857" class="Function Operator">‚üß·¥¨</a>  <a id="50532" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="50536" class="Symbol">(</a>     <a id="50542" href="Demos.HSP.html#50728" class="Function">œÜ‚Åª¬π</a>  <a id="50547" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="50550" href="Demos.HSP.html#50264" class="Bound">œÅ</a><a id="50551" class="Symbol">))</a>  <a id="50555" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a>   <a id="50560" href="Demos.HSP.html#44371" class="Function">comm-hom-term</a> <a id="50574" href="Demos.HSP.html#50255" class="Bound">œÜh</a> <a id="50577" href="Demos.HSP.html#50167" class="Bound">q</a> <a id="50579" class="Symbol">(</a><a id="50580" href="Demos.HSP.html#50728" class="Function">œÜ‚Åª¬π</a> <a id="50584" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="50586" href="Demos.HSP.html#50264" class="Bound">œÅ</a><a id="50587" class="Symbol">)</a>        <a id="50596" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
       <a id="50605" href="Demos.HSP.html#42627" class="Function Operator">‚ü¶</a> <a id="50607" href="Demos.HSP.html#50167" class="Bound">q</a> <a id="50609" href="Demos.HSP.html#42627" class="Function Operator">‚üß</a>   <a id="50613" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="50617" class="Symbol">(</a><a id="50618" href="Demos.HSP.html#50788" class="Function">œÜ</a> <a id="50620" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="50623" href="Demos.HSP.html#50728" class="Function">œÜ‚Åª¬π</a>  <a id="50628" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="50631" href="Demos.HSP.html#50264" class="Bound">œÅ</a><a id="50632" class="Symbol">)</a>   <a id="50636" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a>   <a id="50641" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="50646" href="Demos.HSP.html#42627" class="Function Operator">‚ü¶</a> <a id="50648" href="Demos.HSP.html#50167" class="Bound">q</a> <a id="50650" href="Demos.HSP.html#42627" class="Function Operator">‚üß</a><a id="50651" class="Symbol">(Œª</a> <a id="50654" href="Demos.HSP.html#50654" class="Bound">_</a> <a id="50656" class="Symbol">‚Üí</a> <a id="50658" href="Demos.HSP.html#11319" class="Function">InvIsInverse ≥</a> <a id="50672" href="Demos.HSP.html#50260" class="Bound">œÜE</a><a id="50674" class="Symbol">)</a>  <a id="50677" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
       <a id="50686" href="Demos.HSP.html#42627" class="Function Operator">‚ü¶</a> <a id="50688" href="Demos.HSP.html#50167" class="Bound">q</a> <a id="50690" href="Demos.HSP.html#42627" class="Function Operator">‚üß</a>   <a id="50694" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a>               <a id="50712" href="Demos.HSP.html#50264" class="Bound">œÅ</a>    <a id="50717" href="Relation.Binary.Reasoning.Base.Single.html#2555" class="Function Operator">‚àé</a> <a id="50719" class="Keyword">where</a>
   <a id="50728" href="Demos.HSP.html#50728" class="Function">œÜ‚Åª¬π</a> <a id="50732" class="Symbol">:</a> <a id="50734" href="Demos.HSP.html#19428" class="Function Operator">ùïå[</a> <a id="50737" href="Demos.HSP.html#50147" class="Bound">ùë©</a> <a id="50739" href="Demos.HSP.html#19428" class="Function Operator">]</a> <a id="50741" class="Symbol">‚Üí</a> <a id="50743" href="Demos.HSP.html#19428" class="Function Operator">ùïå[</a> <a id="50746" href="Demos.HSP.html#50129" class="Bound">ùë®</a> <a id="50748" href="Demos.HSP.html#19428" class="Function Operator">]</a>
   <a id="50753" href="Demos.HSP.html#50728" class="Function">œÜ‚Åª¬π</a> <a id="50757" class="Symbol">=</a> <a id="50759" href="Demos.HSP.html#12629" class="Function">SurjInv</a> <a id="50767" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="50769" href="Demos.HSP.html#50255" class="Bound">œÜh</a> <a id="50772" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="50774" href="Demos.HSP.html#50260" class="Bound">œÜE</a>
   <a id="50780" class="Keyword">private</a> <a id="50788" href="Demos.HSP.html#50788" class="Function">œÜ</a> <a id="50790" class="Symbol">=</a> <a id="50792" class="Symbol">(</a><a id="50793" href="Demos.HSP.html#6758" class="Field Operator">_‚ü®$‚ü©_</a> <a id="50799" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="50801" href="Demos.HSP.html#50255" class="Bound">œÜh</a> <a id="50804" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a><a id="50805" class="Symbol">)</a>
   <a id="50810" class="Keyword">open</a> <a id="50815" href="Demos.HSP.html#42063" class="Module">Environment</a> <a id="50827" href="Demos.HSP.html#50129" class="Bound">ùë®</a>  <a id="50830" class="Keyword">using</a> <a id="50836" class="Symbol">()</a> <a id="50839" class="Keyword">renaming</a> <a id="50848" class="Symbol">(</a> <a id="50850" href="Demos.HSP.html#42627" class="Function Operator">‚ü¶_‚üß</a> <a id="50854" class="Symbol">to</a> <a id="50857" class="Function Operator">‚ü¶_‚üß·¥¨</a><a id="50861" class="Symbol">)</a>
   <a id="50866" class="Keyword">open</a> <a id="50871" href="Demos.HSP.html#42063" class="Module">Environment</a> <a id="50883" href="Demos.HSP.html#50147" class="Bound">ùë©</a>  <a id="50886" class="Keyword">using</a> <a id="50892" class="Symbol">(</a> <a id="50894" href="Demos.HSP.html#42627" class="Function Operator">‚ü¶_‚üß</a> <a id="50898" class="Symbol">)</a> <a id="50900" class="Symbol">;</a> <a id="50902" class="Keyword">open</a> <a id="50907" href="Relation.Binary.Reasoning.Setoid.html" class="Module">SetoidReasoning</a> <a id="50923" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="50926" href="Demos.HSP.html#50147" class="Bound">ùë©</a> <a id="50928" href="Demos.HSP.html#19374" class="Function Operator">]</a>

 <a id="50932" href="Demos.HSP.html#50932" class="Function">‚äß-S-invar</a> <a id="50942" class="Symbol">:</a> <a id="50944" href="Demos.HSP.html#50129" class="Bound">ùë®</a> <a id="50946" href="Demos.HSP.html#46266" class="Function Operator">‚äß</a> <a id="50948" href="Demos.HSP.html#50165" class="Bound">p</a> <a id="50950" href="Demos.HSP.html#46266" class="Function Operator">‚âà</a> <a id="50952" href="Demos.HSP.html#50167" class="Bound">q</a> <a id="50954" class="Symbol">‚Üí</a> <a id="50956" href="Demos.HSP.html#50147" class="Bound">ùë©</a> <a id="50958" href="Demos.HSP.html#37703" class="Function Operator">‚â§</a> <a id="50960" href="Demos.HSP.html#50129" class="Bound">ùë®</a> <a id="50962" class="Symbol">‚Üí</a> <a id="50964" href="Demos.HSP.html#50147" class="Bound">ùë©</a> <a id="50966" href="Demos.HSP.html#46266" class="Function Operator">‚äß</a> <a id="50968" href="Demos.HSP.html#50165" class="Bound">p</a> <a id="50970" href="Demos.HSP.html#46266" class="Function Operator">‚âà</a> <a id="50972" href="Demos.HSP.html#50167" class="Bound">q</a>
 <a id="50975" href="Demos.HSP.html#50932" class="Function">‚äß-S-invar</a> <a id="50985" href="Demos.HSP.html#50985" class="Bound">Apq</a> <a id="50989" href="Demos.HSP.html#50989" class="Bound">B‚â§A</a> <a id="50993" href="Demos.HSP.html#50993" class="Bound">b</a> <a id="50995" class="Symbol">=</a> <a id="50997" href="Demos.HSP.html#8278" class="Function Operator">‚à•</a> <a id="50999" href="Demos.HSP.html#50989" class="Bound">B‚â§A</a> <a id="51003" href="Demos.HSP.html#8278" class="Function Operator">‚à•</a>
  <a id="51007" class="Symbol">(</a> <a id="51009" href="Relation.Binary.Reasoning.Base.Single.html#1916" class="Function Operator">begin</a>
    <a id="51019" href="Demos.HSP.html#51421" class="Function">h</a> <a id="51021" class="Symbol">(</a>  <a id="51024" href="Demos.HSP.html#42627" class="Function Operator">‚ü¶</a> <a id="51026" href="Demos.HSP.html#50165" class="Bound">p</a> <a id="51028" href="Demos.HSP.html#42627" class="Function Operator">‚üß</a>   <a id="51032" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a>       <a id="51042" href="Demos.HSP.html#50993" class="Bound">b</a><a id="51043" class="Symbol">)</a>  <a id="51046" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a>   <a id="51051" href="Demos.HSP.html#44371" class="Function">comm-hom-term</a> <a id="51065" href="Demos.HSP.html#51406" class="Function">hh</a> <a id="51068" href="Demos.HSP.html#50165" class="Bound">p</a> <a id="51070" href="Demos.HSP.html#50993" class="Bound">b</a>  <a id="51073" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
         <a id="51084" href="Demos.HSP.html#51353" class="Function Operator">‚ü¶</a> <a id="51086" href="Demos.HSP.html#50165" class="Bound">p</a> <a id="51088" href="Demos.HSP.html#51353" class="Function Operator">‚üß·¥¨</a>  <a id="51092" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="51096" class="Symbol">(</a><a id="51097" href="Demos.HSP.html#51421" class="Function">h</a> <a id="51099" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="51102" href="Demos.HSP.html#50993" class="Bound">b</a><a id="51103" class="Symbol">)</a>  <a id="51106" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a>   <a id="51111" href="Demos.HSP.html#50985" class="Bound">Apq</a> <a id="51115" class="Symbol">(</a><a id="51116" href="Demos.HSP.html#51421" class="Function">h</a> <a id="51118" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="51120" href="Demos.HSP.html#50993" class="Bound">b</a><a id="51121" class="Symbol">)</a>           <a id="51133" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
         <a id="51144" href="Demos.HSP.html#51353" class="Function Operator">‚ü¶</a> <a id="51146" href="Demos.HSP.html#50167" class="Bound">q</a> <a id="51148" href="Demos.HSP.html#51353" class="Function Operator">‚üß·¥¨</a>  <a id="51152" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="51156" class="Symbol">(</a><a id="51157" href="Demos.HSP.html#51421" class="Function">h</a> <a id="51159" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="51162" href="Demos.HSP.html#50993" class="Bound">b</a><a id="51163" class="Symbol">)</a>  <a id="51166" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚âàÀò‚ü®</a>  <a id="51171" href="Demos.HSP.html#44371" class="Function">comm-hom-term</a> <a id="51185" href="Demos.HSP.html#51406" class="Function">hh</a> <a id="51188" href="Demos.HSP.html#50167" class="Bound">q</a> <a id="51190" href="Demos.HSP.html#50993" class="Bound">b</a>  <a id="51193" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚ü©</a>
    <a id="51199" href="Demos.HSP.html#51421" class="Function">h</a> <a id="51201" class="Symbol">(</a>  <a id="51204" href="Demos.HSP.html#42627" class="Function Operator">‚ü¶</a> <a id="51206" href="Demos.HSP.html#50167" class="Bound">q</a> <a id="51208" href="Demos.HSP.html#42627" class="Function Operator">‚üß</a>   <a id="51212" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a>       <a id="51222" href="Demos.HSP.html#50993" class="Bound">b</a><a id="51223" class="Symbol">)</a>  <a id="51226" href="Relation.Binary.Reasoning.Base.Single.html#2555" class="Function Operator">‚àé</a> <a id="51228" class="Symbol">)</a>
  <a id="51232" class="Keyword">where</a>
  <a id="51240" class="Keyword">open</a> <a id="51245" href="Relation.Binary.Reasoning.Setoid.html" class="Module">SetoidReasoning</a> <a id="51261" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="51264" href="Demos.HSP.html#50129" class="Bound">ùë®</a> <a id="51266" href="Demos.HSP.html#19374" class="Function Operator">]</a>
  <a id="51270" class="Keyword">open</a> <a id="51275" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="51282" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="51285" href="Demos.HSP.html#50129" class="Bound">ùë®</a> <a id="51287" href="Demos.HSP.html#19374" class="Function Operator">]</a>  <a id="51290" class="Keyword">using</a> <a id="51296" class="Symbol">(</a> <a id="51298" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="51302" class="Symbol">)</a>
  <a id="51306" class="Keyword">open</a> <a id="51311" href="Demos.HSP.html#42063" class="Module">Environment</a> <a id="51323" href="Demos.HSP.html#50129" class="Bound">ùë®</a>  <a id="51326" class="Keyword">using</a> <a id="51332" class="Symbol">()</a> <a id="51335" class="Keyword">renaming</a> <a id="51344" class="Symbol">(</a> <a id="51346" href="Demos.HSP.html#42627" class="Function Operator">‚ü¶_‚üß</a> <a id="51350" class="Symbol">to</a> <a id="51353" class="Function Operator">‚ü¶_‚üß·¥¨</a> <a id="51358" class="Symbol">)</a>
  <a id="51362" class="Keyword">open</a> <a id="51367" href="Demos.HSP.html#42063" class="Module">Environment</a> <a id="51379" href="Demos.HSP.html#50147" class="Bound">ùë©</a>  <a id="51382" class="Keyword">using</a> <a id="51388" class="Symbol">(</a> <a id="51390" href="Demos.HSP.html#42627" class="Function Operator">‚ü¶_‚üß</a> <a id="51394" class="Symbol">)</a>
  <a id="51398" class="Keyword">private</a> <a id="51406" href="Demos.HSP.html#51406" class="Function">hh</a> <a id="51409" class="Symbol">=</a> <a id="51411" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="51413" href="Demos.HSP.html#50989" class="Bound">B‚â§A</a> <a id="51417" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="51419" class="Symbol">;</a> <a id="51421" href="Demos.HSP.html#51421" class="Function">h</a> <a id="51423" class="Symbol">=</a> <a id="51425" href="Demos.HSP.html#6758" class="Field Operator">_‚ü®$‚ü©_</a> <a id="51431" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="51433" href="Demos.HSP.html#51406" class="Function">hh</a> <a id="51436" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a>

</pre>
An identity satisfied by all algebras in an indexed collection is also satisfied by the product of algebras in the collection.

<pre class="Agda">

<a id="51592" class="Keyword">module</a> <a id="51599" href="Demos.HSP.html#51599" class="Module">_</a> <a id="51601" class="Symbol">{</a><a id="51602" href="Demos.HSP.html#51602" class="Bound">X</a> <a id="51604" class="Symbol">:</a> <a id="51606" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="51611" href="Demos.HSP.html#7612" class="Generalizable">œá</a><a id="51612" class="Symbol">}{</a><a id="51614" href="Demos.HSP.html#51614" class="Bound">I</a> <a id="51616" class="Symbol">:</a> <a id="51618" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="51623" href="Demos.HSP.html#7614" class="Generalizable">‚Ñì</a><a id="51624" class="Symbol">}(</a><a id="51626" href="Demos.HSP.html#51626" class="Bound">ùíú</a> <a id="51628" class="Symbol">:</a> <a id="51630" href="Demos.HSP.html#51614" class="Bound">I</a> <a id="51632" class="Symbol">‚Üí</a> <a id="51634" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="51642" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="51644" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a><a id="51646" class="Symbol">){</a><a id="51648" href="Demos.HSP.html#51648" class="Bound">p</a> <a id="51650" href="Demos.HSP.html#51650" class="Bound">q</a> <a id="51652" class="Symbol">:</a> <a id="51654" href="Demos.HSP.html#39768" class="Datatype">Term</a> <a id="51659" href="Demos.HSP.html#51602" class="Bound">X</a><a id="51660" class="Symbol">}</a> <a id="51662" class="Keyword">where</a>
 <a id="51669" href="Demos.HSP.html#51669" class="Function">‚äß-P-invar</a> <a id="51679" class="Symbol">:</a> <a id="51681" class="Symbol">(‚àÄ</a> <a id="51684" href="Demos.HSP.html#51684" class="Bound">i</a> <a id="51686" class="Symbol">‚Üí</a> <a id="51688" href="Demos.HSP.html#51626" class="Bound">ùíú</a> <a id="51690" href="Demos.HSP.html#51684" class="Bound">i</a> <a id="51692" href="Demos.HSP.html#46266" class="Function Operator">‚äß</a> <a id="51694" href="Demos.HSP.html#51648" class="Bound">p</a> <a id="51696" href="Demos.HSP.html#46266" class="Function Operator">‚âà</a> <a id="51698" href="Demos.HSP.html#51650" class="Bound">q</a><a id="51699" class="Symbol">)</a> <a id="51701" class="Symbol">‚Üí</a> <a id="51703" href="Demos.HSP.html#24332" class="Function">‚®Ö</a> <a id="51705" href="Demos.HSP.html#51626" class="Bound">ùíú</a> <a id="51707" href="Demos.HSP.html#46266" class="Function Operator">‚äß</a> <a id="51709" href="Demos.HSP.html#51648" class="Bound">p</a> <a id="51711" href="Demos.HSP.html#46266" class="Function Operator">‚âà</a> <a id="51713" href="Demos.HSP.html#51650" class="Bound">q</a>
 <a id="51716" href="Demos.HSP.html#51669" class="Function">‚äß-P-invar</a> <a id="51726" href="Demos.HSP.html#51726" class="Bound">ùíúpq</a> <a id="51730" href="Demos.HSP.html#51730" class="Bound">a</a> <a id="51732" class="Symbol">=</a> <a id="51734" href="Relation.Binary.Reasoning.Base.Single.html#1916" class="Function Operator">begin</a>
   <a id="51743" href="Demos.HSP.html#52093" class="Function Operator">‚ü¶</a> <a id="51745" href="Demos.HSP.html#51648" class="Bound">p</a> <a id="51747" href="Demos.HSP.html#52093" class="Function Operator">‚üß‚ÇÅ</a>               <a id="51764" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a>  <a id="51769" href="Demos.HSP.html#51730" class="Bound">a</a>                <a id="51786" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a>   <a id="51791" href="Demos.HSP.html#44904" class="Function">interp-prod</a> <a id="51803" href="Demos.HSP.html#51626" class="Bound">ùíú</a> <a id="51805" href="Demos.HSP.html#51648" class="Bound">p</a> <a id="51807" href="Demos.HSP.html#51730" class="Bound">a</a>            <a id="51820" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
   <a id="51825" class="Symbol">(</a> <a id="51827" class="Symbol">Œª</a> <a id="51829" href="Demos.HSP.html#51829" class="Bound">i</a> <a id="51831" class="Symbol">‚Üí</a> <a id="51833" class="Symbol">(</a><a id="51834" href="Demos.HSP.html#42627" class="Function Operator">‚ü¶</a> <a id="51836" href="Demos.HSP.html#51626" class="Bound">ùíú</a> <a id="51838" href="Demos.HSP.html#51829" class="Bound">i</a> <a id="51840" href="Demos.HSP.html#42627" class="Function Operator">‚üß</a> <a id="51842" href="Demos.HSP.html#51648" class="Bound">p</a><a id="51843" class="Symbol">)</a>  <a id="51846" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a>  <a id="51851" class="Symbol">Œª</a> <a id="51853" href="Demos.HSP.html#51853" class="Bound">x</a> <a id="51855" class="Symbol">‚Üí</a> <a id="51857" class="Symbol">(</a><a id="51858" href="Demos.HSP.html#51730" class="Bound">a</a> <a id="51860" href="Demos.HSP.html#51853" class="Bound">x</a><a id="51861" class="Symbol">)</a> <a id="51863" href="Demos.HSP.html#51829" class="Bound">i</a> <a id="51865" class="Symbol">)</a>  <a id="51868" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a> <a id="51871" class="Symbol">(Œª</a> <a id="51874" href="Demos.HSP.html#51874" class="Bound">i</a> <a id="51876" class="Symbol">‚Üí</a> <a id="51878" href="Demos.HSP.html#51726" class="Bound">ùíúpq</a> <a id="51882" href="Demos.HSP.html#51874" class="Bound">i</a> <a id="51884" class="Symbol">(Œª</a> <a id="51887" href="Demos.HSP.html#51887" class="Bound">x</a> <a id="51889" class="Symbol">‚Üí</a> <a id="51891" class="Symbol">(</a><a id="51892" href="Demos.HSP.html#51730" class="Bound">a</a> <a id="51894" href="Demos.HSP.html#51887" class="Bound">x</a><a id="51895" class="Symbol">)</a> <a id="51897" href="Demos.HSP.html#51874" class="Bound">i</a><a id="51898" class="Symbol">))</a>  <a id="51902" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
   <a id="51907" class="Symbol">(</a> <a id="51909" class="Symbol">Œª</a> <a id="51911" href="Demos.HSP.html#51911" class="Bound">i</a> <a id="51913" class="Symbol">‚Üí</a> <a id="51915" class="Symbol">(</a><a id="51916" href="Demos.HSP.html#42627" class="Function Operator">‚ü¶</a> <a id="51918" href="Demos.HSP.html#51626" class="Bound">ùíú</a> <a id="51920" href="Demos.HSP.html#51911" class="Bound">i</a> <a id="51922" href="Demos.HSP.html#42627" class="Function Operator">‚üß</a> <a id="51924" href="Demos.HSP.html#51650" class="Bound">q</a><a id="51925" class="Symbol">)</a>  <a id="51928" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a>  <a id="51933" class="Symbol">Œª</a> <a id="51935" href="Demos.HSP.html#51935" class="Bound">x</a> <a id="51937" class="Symbol">‚Üí</a> <a id="51939" class="Symbol">(</a><a id="51940" href="Demos.HSP.html#51730" class="Bound">a</a> <a id="51942" href="Demos.HSP.html#51935" class="Bound">x</a><a id="51943" class="Symbol">)</a> <a id="51945" href="Demos.HSP.html#51911" class="Bound">i</a> <a id="51947" class="Symbol">)</a>  <a id="51950" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚âàÀò‚ü®</a>  <a id="51955" href="Demos.HSP.html#44904" class="Function">interp-prod</a> <a id="51967" href="Demos.HSP.html#51626" class="Bound">ùíú</a> <a id="51969" href="Demos.HSP.html#51650" class="Bound">q</a> <a id="51971" href="Demos.HSP.html#51730" class="Bound">a</a>            <a id="51984" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚ü©</a>
   <a id="51989" href="Demos.HSP.html#52093" class="Function Operator">‚ü¶</a> <a id="51991" href="Demos.HSP.html#51650" class="Bound">q</a> <a id="51993" href="Demos.HSP.html#52093" class="Function Operator">‚üß‚ÇÅ</a>               <a id="52010" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a>  <a id="52015" href="Demos.HSP.html#51730" class="Bound">a</a>                <a id="52032" href="Relation.Binary.Reasoning.Base.Single.html#2555" class="Function Operator">‚àé</a> <a id="52034" class="Keyword">where</a>
  <a id="52042" class="Keyword">open</a> <a id="52047" href="Demos.HSP.html#42063" class="Module">Environment</a> <a id="52059" class="Symbol">(</a><a id="52060" href="Demos.HSP.html#24332" class="Function">‚®Ö</a> <a id="52062" href="Demos.HSP.html#51626" class="Bound">ùíú</a><a id="52063" class="Symbol">)</a>  <a id="52066" class="Keyword">using</a> <a id="52072" class="Symbol">()</a> <a id="52075" class="Keyword">renaming</a> <a id="52084" class="Symbol">(</a> <a id="52086" href="Demos.HSP.html#42627" class="Function Operator">‚ü¶_‚üß</a> <a id="52090" class="Symbol">to</a> <a id="52093" class="Function Operator">‚ü¶_‚üß‚ÇÅ</a> <a id="52098" class="Symbol">)</a>
  <a id="52102" class="Keyword">open</a> <a id="52107" href="Demos.HSP.html#42063" class="Module">Environment</a>        <a id="52126" class="Keyword">using</a> <a id="52132" class="Symbol">(</a> <a id="52134" href="Demos.HSP.html#42627" class="Function Operator">‚ü¶_‚üß</a> <a id="52138" class="Symbol">)</a>
  <a id="52142" class="Keyword">open</a> <a id="52147" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="52154" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="52157" href="Demos.HSP.html#24332" class="Function">‚®Ö</a> <a id="52159" href="Demos.HSP.html#51626" class="Bound">ùíú</a> <a id="52161" href="Demos.HSP.html#19374" class="Function Operator">]</a>    <a id="52166" class="Keyword">using</a> <a id="52172" class="Symbol">(</a> <a id="52174" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="52178" class="Symbol">)</a>
  <a id="52182" class="Keyword">open</a> <a id="52187" href="Relation.Binary.Reasoning.Setoid.html" class="Module">SetoidReasoning</a> <a id="52203" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="52206" href="Demos.HSP.html#24332" class="Function">‚®Ö</a> <a id="52208" href="Demos.HSP.html#51626" class="Bound">ùíú</a> <a id="52210" href="Demos.HSP.html#19374" class="Function Operator">]</a>

</pre>

A *variety* is a class of `ùëÜ`-algebras that is closed under the taking of homomorphic images, subalgebras, and arbitrary products. If we define `V ùí¶ := H (S (P ùí¶))`, then `ùí¶` is a variety iff `V ùí¶  ‚äÜ ùí¶`.
(The converse inclusion holds by virtue of the fact that `V` is a composition of closure operators.)
The class `V ùí¶` is called the *varietal closure* of `ùí¶`. Here is how we define `V` in type theory.
(The explicit universe level declarations that appear in the definition are needed for disambiguation.)

<pre class="Agda">

<a id="52748" class="Keyword">module</a> <a id="52755" href="Demos.HSP.html#52755" class="Module">_</a>  <a id="52758" class="Symbol">{</a><a id="52759" href="Demos.HSP.html#52759" class="Bound">Œ±</a> <a id="52761" href="Demos.HSP.html#52761" class="Bound">œÅ·µÉ</a> <a id="52764" href="Demos.HSP.html#52764" class="Bound">Œ≤</a> <a id="52766" href="Demos.HSP.html#52766" class="Bound">œÅ·µá</a> <a id="52769" href="Demos.HSP.html#52769" class="Bound">Œ≥</a> <a id="52771" href="Demos.HSP.html#52771" class="Bound">œÅ·∂ú</a> <a id="52774" href="Demos.HSP.html#52774" class="Bound">Œ¥</a> <a id="52776" href="Demos.HSP.html#52776" class="Bound">œÅ·µà</a> <a id="52779" class="Symbol">:</a> <a id="52781" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="52786" class="Symbol">}</a> <a id="52788" class="Keyword">where</a>
 <a id="52795" class="Keyword">private</a> <a id="52803" href="Demos.HSP.html#52803" class="Function">a</a> <a id="52805" class="Symbol">=</a> <a id="52807" href="Demos.HSP.html#52759" class="Bound">Œ±</a> <a id="52809" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="52811" href="Demos.HSP.html#52761" class="Bound">œÅ·µÉ</a> <a id="52814" class="Symbol">;</a> <a id="52816" href="Demos.HSP.html#52816" class="Function">b</a> <a id="52818" class="Symbol">=</a> <a id="52820" href="Demos.HSP.html#52764" class="Bound">Œ≤</a> <a id="52822" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="52824" href="Demos.HSP.html#52766" class="Bound">œÅ·µá</a>
 <a id="52828" href="Demos.HSP.html#52828" class="Function">V</a> <a id="52830" class="Symbol">:</a> <a id="52832" class="Symbol">‚àÄ</a> <a id="52834" href="Demos.HSP.html#52834" class="Bound">‚Ñì</a> <a id="52836" href="Demos.HSP.html#52836" class="Bound">Œπ</a> <a id="52838" class="Symbol">‚Üí</a> <a id="52840" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="52844" class="Symbol">(</a><a id="52845" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="52853" href="Demos.HSP.html#52759" class="Bound">Œ±</a> <a id="52855" href="Demos.HSP.html#52761" class="Bound">œÅ·µÉ</a><a id="52857" class="Symbol">)</a> <a id="52859" class="Symbol">(</a><a id="52860" href="Demos.HSP.html#52803" class="Function">a</a> <a id="52862" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="52864" href="Demos.HSP.html#34906" class="Function">ov</a> <a id="52867" href="Demos.HSP.html#52834" class="Bound">‚Ñì</a><a id="52868" class="Symbol">)</a> <a id="52870" class="Symbol">‚Üí</a>  <a id="52873" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="52877" class="Symbol">(</a><a id="52878" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="52886" href="Demos.HSP.html#52774" class="Bound">Œ¥</a> <a id="52888" href="Demos.HSP.html#52776" class="Bound">œÅ·µà</a><a id="52890" class="Symbol">)</a> <a id="52892" class="Symbol">_</a>
 <a id="52895" href="Demos.HSP.html#52828" class="Function">V</a> <a id="52897" href="Demos.HSP.html#52897" class="Bound">‚Ñì</a> <a id="52899" href="Demos.HSP.html#52899" class="Bound">Œπ</a> <a id="52901" href="Demos.HSP.html#52901" class="Bound">ùí¶</a> <a id="52903" class="Symbol">=</a> <a id="52905" href="Demos.HSP.html#49522" class="Function">H</a><a id="52906" class="Symbol">{</a><a id="52907" href="Demos.HSP.html#52769" class="Bound">Œ≥</a><a id="52908" class="Symbol">}{</a><a id="52910" href="Demos.HSP.html#52771" class="Bound">œÅ·∂ú</a><a id="52912" class="Symbol">}{</a><a id="52914" href="Demos.HSP.html#52774" class="Bound">Œ¥</a><a id="52915" class="Symbol">}{</a><a id="52917" href="Demos.HSP.html#52776" class="Bound">œÅ·µà</a><a id="52919" class="Symbol">}</a> <a id="52921" class="Symbol">(</a><a id="52922" href="Demos.HSP.html#52803" class="Function">a</a> <a id="52924" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="52926" href="Demos.HSP.html#52816" class="Function">b</a> <a id="52928" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="52930" href="Demos.HSP.html#52897" class="Bound">‚Ñì</a> <a id="52932" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="52934" href="Demos.HSP.html#52899" class="Bound">Œπ</a><a id="52935" class="Symbol">)</a> <a id="52937" class="Symbol">(</a><a id="52938" href="Demos.HSP.html#49645" class="Function">S</a><a id="52939" class="Symbol">{</a><a id="52940" href="Demos.HSP.html#52764" class="Bound">Œ≤</a><a id="52941" class="Symbol">}{</a><a id="52943" href="Demos.HSP.html#52766" class="Bound">œÅ·µá</a><a id="52945" class="Symbol">}</a> <a id="52947" class="Symbol">(</a><a id="52948" href="Demos.HSP.html#52803" class="Function">a</a> <a id="52950" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="52952" href="Demos.HSP.html#52897" class="Bound">‚Ñì</a> <a id="52954" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="52956" href="Demos.HSP.html#52899" class="Bound">Œπ</a><a id="52957" class="Symbol">)</a> <a id="52959" class="Symbol">(</a><a id="52960" href="Demos.HSP.html#49757" class="Function">P</a> <a id="52962" href="Demos.HSP.html#52897" class="Bound">‚Ñì</a> <a id="52964" href="Demos.HSP.html#52899" class="Bound">Œπ</a> <a id="52966" href="Demos.HSP.html#52901" class="Bound">ùí¶</a><a id="52967" class="Symbol">))</a>

</pre>

The classes `H ùí¶`, `S ùí¶`, `P ùí¶`, and `V ùí¶` all satisfy the
same term identities.  We will only use a subset of the inclusions needed to prove this
assertion. (The others are included in the `Setoid.Varieties.Preservation` module of the [agda-algebras][] library.) First, the closure operator `H` preserves the identities modeled by the given class; this follows almost immediately from the invariance lemma `‚äß-H-invar`.

<pre class="Agda">

<a id="53418" class="Keyword">module</a> <a id="53425" href="Demos.HSP.html#53425" class="Module">_</a>  <a id="53428" class="Symbol">{</a><a id="53429" href="Demos.HSP.html#53429" class="Bound">X</a> <a id="53431" class="Symbol">:</a> <a id="53433" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="53438" href="Demos.HSP.html#7612" class="Generalizable">œá</a><a id="53439" class="Symbol">}{</a><a id="53441" href="Demos.HSP.html#53441" class="Bound">ùí¶</a> <a id="53443" class="Symbol">:</a> <a id="53445" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="53449" class="Symbol">(</a><a id="53450" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="53458" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="53460" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a><a id="53462" class="Symbol">)</a> <a id="53464" class="Symbol">(</a><a id="53465" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="53467" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="53469" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a> <a id="53472" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="53474" href="Demos.HSP.html#34906" class="Function">ov</a> <a id="53477" href="Demos.HSP.html#7614" class="Generalizable">‚Ñì</a><a id="53478" class="Symbol">)}{</a><a id="53481" href="Demos.HSP.html#53481" class="Bound">p</a> <a id="53483" href="Demos.HSP.html#53483" class="Bound">q</a> <a id="53485" class="Symbol">:</a> <a id="53487" href="Demos.HSP.html#39768" class="Datatype">Term</a> <a id="53492" href="Demos.HSP.html#53429" class="Bound">X</a><a id="53493" class="Symbol">}</a> <a id="53495" class="Keyword">where</a>
 <a id="53502" href="Demos.HSP.html#53502" class="Function">H-id1</a> <a id="53508" class="Symbol">:</a> <a id="53510" href="Demos.HSP.html#53441" class="Bound">ùí¶</a> <a id="53512" href="Demos.HSP.html#46364" class="Function Operator">‚ä´</a> <a id="53514" href="Demos.HSP.html#53481" class="Bound">p</a> <a id="53516" href="Demos.HSP.html#46364" class="Function Operator">‚âà</a> <a id="53518" href="Demos.HSP.html#53483" class="Bound">q</a> <a id="53520" class="Symbol">‚Üí</a> <a id="53522" href="Demos.HSP.html#49522" class="Function">H</a><a id="53523" class="Symbol">{</a><a id="53524" class="Argument">Œ≤</a> <a id="53526" class="Symbol">=</a> <a id="53528" href="Demos.HSP.html#53458" class="Bound">Œ±</a><a id="53529" class="Symbol">}{</a><a id="53531" href="Demos.HSP.html#53460" class="Bound">œÅ·µÉ</a><a id="53533" class="Symbol">}</a><a id="53534" href="Demos.HSP.html#53477" class="Bound">‚Ñì</a> <a id="53536" href="Demos.HSP.html#53441" class="Bound">ùí¶</a> <a id="53538" href="Demos.HSP.html#46364" class="Function Operator">‚ä´</a> <a id="53540" href="Demos.HSP.html#53481" class="Bound">p</a> <a id="53542" href="Demos.HSP.html#46364" class="Function Operator">‚âà</a> <a id="53544" href="Demos.HSP.html#53483" class="Bound">q</a>
 <a id="53547" href="Demos.HSP.html#53502" class="Function">H-id1</a> <a id="53553" href="Demos.HSP.html#53553" class="Bound">œÉ</a> <a id="53555" href="Demos.HSP.html#53555" class="Bound">ùë©</a> <a id="53557" class="Symbol">(</a><a id="53558" href="Demos.HSP.html#53558" class="Bound">ùë®</a> <a id="53560" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="53562" href="Demos.HSP.html#53562" class="Bound">kA</a> <a id="53565" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="53567" href="Demos.HSP.html#53567" class="Bound">BimgA</a><a id="53572" class="Symbol">)</a> <a id="53574" class="Symbol">=</a> <a id="53576" href="Demos.HSP.html#50186" class="Function">‚äß-H-invar</a><a id="53585" class="Symbol">{</a><a id="53586" class="Argument">p</a> <a id="53588" class="Symbol">=</a> <a id="53590" href="Demos.HSP.html#53481" class="Bound">p</a><a id="53591" class="Symbol">}{</a><a id="53593" href="Demos.HSP.html#53483" class="Bound">q</a><a id="53594" class="Symbol">}</a> <a id="53596" class="Symbol">(</a><a id="53597" href="Demos.HSP.html#53553" class="Bound">œÉ</a> <a id="53599" href="Demos.HSP.html#53558" class="Bound">ùë®</a> <a id="53601" href="Demos.HSP.html#53562" class="Bound">kA</a><a id="53603" class="Symbol">)</a> <a id="53605" href="Demos.HSP.html#53567" class="Bound">BimgA</a>

</pre>
The analogous preservation result for `S` is a consequence of the invariance lemma `‚äß-S-invar`; the converse, which we call `S-id2`, has an equally straightforward proof.

<pre class="Agda">

 <a id="53810" href="Demos.HSP.html#53810" class="Function">S-id1</a> <a id="53816" class="Symbol">:</a> <a id="53818" href="Demos.HSP.html#53441" class="Bound">ùí¶</a> <a id="53820" href="Demos.HSP.html#46364" class="Function Operator">‚ä´</a> <a id="53822" href="Demos.HSP.html#53481" class="Bound">p</a> <a id="53824" href="Demos.HSP.html#46364" class="Function Operator">‚âà</a> <a id="53826" href="Demos.HSP.html#53483" class="Bound">q</a> <a id="53828" class="Symbol">‚Üí</a> <a id="53830" href="Demos.HSP.html#49645" class="Function">S</a><a id="53831" class="Symbol">{</a><a id="53832" class="Argument">Œ≤</a> <a id="53834" class="Symbol">=</a> <a id="53836" href="Demos.HSP.html#53458" class="Bound">Œ±</a><a id="53837" class="Symbol">}{</a><a id="53839" href="Demos.HSP.html#53460" class="Bound">œÅ·µÉ</a><a id="53841" class="Symbol">}</a><a id="53842" href="Demos.HSP.html#53477" class="Bound">‚Ñì</a> <a id="53844" href="Demos.HSP.html#53441" class="Bound">ùí¶</a> <a id="53846" href="Demos.HSP.html#46364" class="Function Operator">‚ä´</a> <a id="53848" href="Demos.HSP.html#53481" class="Bound">p</a> <a id="53850" href="Demos.HSP.html#46364" class="Function Operator">‚âà</a> <a id="53852" href="Demos.HSP.html#53483" class="Bound">q</a>
 <a id="53855" href="Demos.HSP.html#53810" class="Function">S-id1</a> <a id="53861" href="Demos.HSP.html#53861" class="Bound">œÉ</a> <a id="53863" href="Demos.HSP.html#53863" class="Bound">ùë©</a> <a id="53865" class="Symbol">(</a><a id="53866" href="Demos.HSP.html#53866" class="Bound">ùë®</a> <a id="53868" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="53870" href="Demos.HSP.html#53870" class="Bound">kA</a> <a id="53873" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="53875" href="Demos.HSP.html#53875" class="Bound">B‚â§A</a><a id="53878" class="Symbol">)</a> <a id="53880" class="Symbol">=</a> <a id="53882" href="Demos.HSP.html#50932" class="Function">‚äß-S-invar</a><a id="53891" class="Symbol">{</a><a id="53892" class="Argument">p</a> <a id="53894" class="Symbol">=</a> <a id="53896" href="Demos.HSP.html#53481" class="Bound">p</a><a id="53897" class="Symbol">}{</a><a id="53899" href="Demos.HSP.html#53483" class="Bound">q</a><a id="53900" class="Symbol">}</a> <a id="53902" class="Symbol">(</a><a id="53903" href="Demos.HSP.html#53861" class="Bound">œÉ</a> <a id="53905" href="Demos.HSP.html#53866" class="Bound">ùë®</a> <a id="53907" href="Demos.HSP.html#53870" class="Bound">kA</a><a id="53909" class="Symbol">)</a> <a id="53911" href="Demos.HSP.html#53875" class="Bound">B‚â§A</a>

 <a id="53917" href="Demos.HSP.html#53917" class="Function">S-id2</a> <a id="53923" class="Symbol">:</a> <a id="53925" href="Demos.HSP.html#49645" class="Function">S</a> <a id="53927" href="Demos.HSP.html#53477" class="Bound">‚Ñì</a> <a id="53929" href="Demos.HSP.html#53441" class="Bound">ùí¶</a> <a id="53931" href="Demos.HSP.html#46364" class="Function Operator">‚ä´</a> <a id="53933" href="Demos.HSP.html#53481" class="Bound">p</a> <a id="53935" href="Demos.HSP.html#46364" class="Function Operator">‚âà</a> <a id="53937" href="Demos.HSP.html#53483" class="Bound">q</a> <a id="53939" class="Symbol">‚Üí</a> <a id="53941" href="Demos.HSP.html#53441" class="Bound">ùí¶</a> <a id="53943" href="Demos.HSP.html#46364" class="Function Operator">‚ä´</a> <a id="53945" href="Demos.HSP.html#53481" class="Bound">p</a> <a id="53947" href="Demos.HSP.html#46364" class="Function Operator">‚âà</a> <a id="53949" href="Demos.HSP.html#53483" class="Bound">q</a>
 <a id="53952" href="Demos.HSP.html#53917" class="Function">S-id2</a> <a id="53958" href="Demos.HSP.html#53958" class="Bound">Spq</a> <a id="53962" href="Demos.HSP.html#53962" class="Bound">ùë®</a> <a id="53964" href="Demos.HSP.html#53964" class="Bound">kA</a> <a id="53967" class="Symbol">=</a> <a id="53969" href="Demos.HSP.html#53958" class="Bound">Spq</a> <a id="53973" href="Demos.HSP.html#53962" class="Bound">ùë®</a> <a id="53975" class="Symbol">(</a><a id="53976" href="Demos.HSP.html#53962" class="Bound">ùë®</a> <a id="53978" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="53980" class="Symbol">(</a><a id="53981" href="Demos.HSP.html#53964" class="Bound">kA</a> <a id="53984" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="53986" href="Demos.HSP.html#37991" class="Function">‚â§-reflexive</a><a id="53997" class="Symbol">))</a>

</pre>
The [agda-algebras][] library includes analogous pairs of implications for `P`, `H`, and `V`, called `P-id1`, `P-id2`, `H-id1`, etc. Here we only need the first implication in each case, so we omit the others.

<pre class="Agda">

 <a id="54238" href="Demos.HSP.html#54238" class="Function">P-id1</a> <a id="54244" class="Symbol">:</a> <a id="54246" class="Symbol">‚àÄ{</a><a id="54248" href="Demos.HSP.html#54248" class="Bound">Œπ</a><a id="54249" class="Symbol">}</a> <a id="54251" class="Symbol">‚Üí</a> <a id="54253" href="Demos.HSP.html#53441" class="Bound">ùí¶</a> <a id="54255" href="Demos.HSP.html#46364" class="Function Operator">‚ä´</a> <a id="54257" href="Demos.HSP.html#53481" class="Bound">p</a> <a id="54259" href="Demos.HSP.html#46364" class="Function Operator">‚âà</a> <a id="54261" href="Demos.HSP.html#53483" class="Bound">q</a> <a id="54263" class="Symbol">‚Üí</a> <a id="54265" href="Demos.HSP.html#49757" class="Function">P</a><a id="54266" class="Symbol">{</a><a id="54267" class="Argument">Œ≤</a> <a id="54269" class="Symbol">=</a> <a id="54271" href="Demos.HSP.html#53458" class="Bound">Œ±</a><a id="54272" class="Symbol">}{</a><a id="54274" href="Demos.HSP.html#53460" class="Bound">œÅ·µÉ</a><a id="54276" class="Symbol">}</a><a id="54277" href="Demos.HSP.html#53477" class="Bound">‚Ñì</a> <a id="54279" href="Demos.HSP.html#54248" class="Bound">Œπ</a> <a id="54281" href="Demos.HSP.html#53441" class="Bound">ùí¶</a> <a id="54283" href="Demos.HSP.html#46364" class="Function Operator">‚ä´</a> <a id="54285" href="Demos.HSP.html#53481" class="Bound">p</a> <a id="54287" href="Demos.HSP.html#46364" class="Function Operator">‚âà</a> <a id="54289" href="Demos.HSP.html#53483" class="Bound">q</a>
 <a id="54292" href="Demos.HSP.html#54238" class="Function">P-id1</a> <a id="54298" href="Demos.HSP.html#54298" class="Bound">œÉ</a> <a id="54300" href="Demos.HSP.html#54300" class="Bound">ùë®</a> <a id="54302" class="Symbol">(</a><a id="54303" href="Demos.HSP.html#54303" class="Bound">I</a> <a id="54305" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="54307" href="Demos.HSP.html#54307" class="Bound">ùíú</a> <a id="54309" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="54311" href="Demos.HSP.html#54311" class="Bound">kA</a> <a id="54314" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="54316" href="Demos.HSP.html#54316" class="Bound">A‚âÖ‚®ÖA</a><a id="54320" class="Symbol">)</a> <a id="54322" class="Symbol">=</a> <a id="54324" href="Demos.HSP.html#47346" class="Function">‚äß-I-invar</a> <a id="54334" href="Demos.HSP.html#54300" class="Bound">ùë®</a> <a id="54336" href="Demos.HSP.html#53481" class="Bound">p</a> <a id="54338" href="Demos.HSP.html#53483" class="Bound">q</a> <a id="54340" href="Demos.HSP.html#54364" class="Function">IH</a> <a id="54343" class="Symbol">(</a><a id="54344" href="Demos.HSP.html#33882" class="Function">‚âÖ-sym</a> <a id="54350" href="Demos.HSP.html#54316" class="Bound">A‚âÖ‚®ÖA</a><a id="54354" class="Symbol">)</a> <a id="54356" class="Keyword">where</a>
  <a id="54364" href="Demos.HSP.html#54364" class="Function">IH</a> <a id="54367" class="Symbol">:</a> <a id="54369" href="Demos.HSP.html#24332" class="Function">‚®Ö</a> <a id="54371" href="Demos.HSP.html#54307" class="Bound">ùíú</a> <a id="54373" href="Demos.HSP.html#46266" class="Function Operator">‚äß</a> <a id="54375" href="Demos.HSP.html#53481" class="Bound">p</a> <a id="54377" href="Demos.HSP.html#46266" class="Function Operator">‚âà</a> <a id="54379" href="Demos.HSP.html#53483" class="Bound">q</a>
  <a id="54383" href="Demos.HSP.html#54364" class="Function">IH</a> <a id="54386" class="Symbol">=</a> <a id="54388" href="Demos.HSP.html#51669" class="Function">‚äß-P-invar</a> <a id="54398" href="Demos.HSP.html#54307" class="Bound">ùíú</a> <a id="54400" class="Symbol">{</a><a id="54401" href="Demos.HSP.html#53481" class="Bound">p</a><a id="54402" class="Symbol">}{</a><a id="54404" href="Demos.HSP.html#53483" class="Bound">q</a><a id="54405" class="Symbol">}</a> <a id="54407" class="Symbol">Œª</a> <a id="54409" href="Demos.HSP.html#54409" class="Bound">i</a> <a id="54411" class="Symbol">‚Üí</a> <a id="54413" href="Demos.HSP.html#54298" class="Bound">œÉ</a> <a id="54415" class="Symbol">(</a><a id="54416" href="Demos.HSP.html#54307" class="Bound">ùíú</a> <a id="54418" href="Demos.HSP.html#54409" class="Bound">i</a><a id="54419" class="Symbol">)</a> <a id="54421" class="Symbol">(</a><a id="54422" href="Demos.HSP.html#54311" class="Bound">kA</a> <a id="54425" href="Demos.HSP.html#54409" class="Bound">i</a><a id="54426" class="Symbol">)</a>

<a id="54429" class="Keyword">module</a> <a id="54436" href="Demos.HSP.html#54436" class="Module">_</a> <a id="54438" class="Symbol">{</a><a id="54439" href="Demos.HSP.html#54439" class="Bound">X</a> <a id="54441" class="Symbol">:</a> <a id="54443" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="54448" href="Demos.HSP.html#7612" class="Generalizable">œá</a><a id="54449" class="Symbol">}{</a><a id="54451" href="Demos.HSP.html#54451" class="Bound">Œπ</a> <a id="54453" class="Symbol">:</a> <a id="54455" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="54460" class="Symbol">}(</a><a id="54462" href="Demos.HSP.html#54462" class="Bound">‚Ñì</a> <a id="54464" class="Symbol">:</a> <a id="54466" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="54471" class="Symbol">){</a><a id="54473" href="Demos.HSP.html#54473" class="Bound">ùí¶</a> <a id="54475" class="Symbol">:</a> <a id="54477" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="54481" class="Symbol">(</a><a id="54482" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="54490" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="54492" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a><a id="54494" class="Symbol">)(</a><a id="54496" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="54498" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="54500" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a> <a id="54503" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="54505" href="Demos.HSP.html#34906" class="Function">ov</a> <a id="54508" href="Demos.HSP.html#54462" class="Bound">‚Ñì</a><a id="54509" class="Symbol">)}{</a><a id="54512" href="Demos.HSP.html#54512" class="Bound">p</a> <a id="54514" href="Demos.HSP.html#54514" class="Bound">q</a> <a id="54516" class="Symbol">:</a> <a id="54518" href="Demos.HSP.html#39768" class="Datatype">Term</a> <a id="54523" href="Demos.HSP.html#54439" class="Bound">X</a><a id="54524" class="Symbol">}</a> <a id="54526" class="Keyword">where</a>
 <a id="54533" class="Keyword">private</a> <a id="54541" href="Demos.HSP.html#54541" class="Function">a‚ÑìŒπ</a> <a id="54545" class="Symbol">=</a> <a id="54547" href="Demos.HSP.html#54490" class="Bound">Œ±</a> <a id="54549" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="54551" href="Demos.HSP.html#54492" class="Bound">œÅ·µÉ</a> <a id="54554" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="54556" href="Demos.HSP.html#54462" class="Bound">‚Ñì</a> <a id="54558" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="54560" href="Demos.HSP.html#54451" class="Bound">Œπ</a>
 <a id="54563" href="Demos.HSP.html#54563" class="Function">V-id1</a> <a id="54569" class="Symbol">:</a> <a id="54571" href="Demos.HSP.html#54473" class="Bound">ùí¶</a> <a id="54573" href="Demos.HSP.html#46364" class="Function Operator">‚ä´</a> <a id="54575" href="Demos.HSP.html#54512" class="Bound">p</a> <a id="54577" href="Demos.HSP.html#46364" class="Function Operator">‚âà</a> <a id="54579" href="Demos.HSP.html#54514" class="Bound">q</a> <a id="54581" class="Symbol">‚Üí</a> <a id="54583" href="Demos.HSP.html#52828" class="Function">V</a> <a id="54585" href="Demos.HSP.html#54462" class="Bound">‚Ñì</a> <a id="54587" href="Demos.HSP.html#54451" class="Bound">Œπ</a> <a id="54589" href="Demos.HSP.html#54473" class="Bound">ùí¶</a> <a id="54591" href="Demos.HSP.html#46364" class="Function Operator">‚ä´</a> <a id="54593" href="Demos.HSP.html#54512" class="Bound">p</a> <a id="54595" href="Demos.HSP.html#46364" class="Function Operator">‚âà</a> <a id="54597" href="Demos.HSP.html#54514" class="Bound">q</a>
 <a id="54600" href="Demos.HSP.html#54563" class="Function">V-id1</a> <a id="54606" href="Demos.HSP.html#54606" class="Bound">œÉ</a> <a id="54608" href="Demos.HSP.html#54608" class="Bound">ùë©</a> <a id="54610" class="Symbol">(</a><a id="54611" href="Demos.HSP.html#54611" class="Bound">ùë®</a> <a id="54613" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="54615" class="Symbol">(</a><a id="54616" href="Demos.HSP.html#54616" class="Bound">‚®ÖA</a> <a id="54619" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="54621" href="Demos.HSP.html#54621" class="Bound">p‚®ÖA</a> <a id="54625" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="54627" href="Demos.HSP.html#54627" class="Bound">A‚â§‚®ÖA</a><a id="54631" class="Symbol">)</a> <a id="54633" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="54635" href="Demos.HSP.html#54635" class="Bound">BimgA</a><a id="54640" class="Symbol">)</a> <a id="54642" class="Symbol">=</a>
  <a id="54646" href="Demos.HSP.html#53502" class="Function">H-id1</a><a id="54651" class="Symbol">{</a><a id="54652" class="Argument">‚Ñì</a> <a id="54654" class="Symbol">=</a> <a id="54656" href="Demos.HSP.html#54541" class="Function">a‚ÑìŒπ</a><a id="54659" class="Symbol">}{</a><a id="54661" class="Argument">ùí¶</a> <a id="54663" class="Symbol">=</a> <a id="54665" href="Demos.HSP.html#49645" class="Function">S</a> <a id="54667" href="Demos.HSP.html#54541" class="Function">a‚ÑìŒπ</a> <a id="54671" class="Symbol">(</a><a id="54672" href="Demos.HSP.html#49757" class="Function">P</a> <a id="54674" class="Symbol">{</a><a id="54675" class="Argument">Œ≤</a> <a id="54677" class="Symbol">=</a> <a id="54679" href="Demos.HSP.html#54490" class="Bound">Œ±</a><a id="54680" class="Symbol">}{</a><a id="54682" href="Demos.HSP.html#54492" class="Bound">œÅ·µÉ</a><a id="54684" class="Symbol">}</a><a id="54685" href="Demos.HSP.html#54462" class="Bound">‚Ñì</a> <a id="54687" href="Demos.HSP.html#54451" class="Bound">Œπ</a> <a id="54689" href="Demos.HSP.html#54473" class="Bound">ùí¶</a><a id="54690" class="Symbol">)}{</a><a id="54693" class="Argument">p</a> <a id="54695" class="Symbol">=</a> <a id="54697" href="Demos.HSP.html#54512" class="Bound">p</a><a id="54698" class="Symbol">}{</a><a id="54700" href="Demos.HSP.html#54514" class="Bound">q</a><a id="54701" class="Symbol">}</a> <a id="54703" href="Demos.HSP.html#54808" class="Function">spK‚äßpq</a> <a id="54710" href="Demos.HSP.html#54608" class="Bound">ùë©</a> <a id="54712" class="Symbol">(</a><a id="54713" href="Demos.HSP.html#54611" class="Bound">ùë®</a> <a id="54715" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="54717" class="Symbol">(</a><a id="54718" href="Demos.HSP.html#54741" class="Function">spA</a> <a id="54722" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="54724" href="Demos.HSP.html#54635" class="Bound">BimgA</a><a id="54729" class="Symbol">))</a> <a id="54732" class="Keyword">where</a>
   <a id="54741" href="Demos.HSP.html#54741" class="Function">spA</a> <a id="54745" class="Symbol">:</a> <a id="54747" href="Demos.HSP.html#54611" class="Bound">ùë®</a> <a id="54749" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="54751" href="Demos.HSP.html#49645" class="Function">S</a> <a id="54753" href="Demos.HSP.html#54541" class="Function">a‚ÑìŒπ</a> <a id="54757" class="Symbol">(</a><a id="54758" href="Demos.HSP.html#49757" class="Function">P</a> <a id="54760" class="Symbol">{</a><a id="54761" class="Argument">Œ≤</a> <a id="54763" class="Symbol">=</a> <a id="54765" href="Demos.HSP.html#54490" class="Bound">Œ±</a><a id="54766" class="Symbol">}{</a><a id="54768" href="Demos.HSP.html#54492" class="Bound">œÅ·µÉ</a><a id="54770" class="Symbol">}</a><a id="54771" href="Demos.HSP.html#54462" class="Bound">‚Ñì</a> <a id="54773" href="Demos.HSP.html#54451" class="Bound">Œπ</a> <a id="54775" href="Demos.HSP.html#54473" class="Bound">ùí¶</a><a id="54776" class="Symbol">)</a>
   <a id="54781" href="Demos.HSP.html#54741" class="Function">spA</a> <a id="54785" class="Symbol">=</a> <a id="54787" href="Demos.HSP.html#54616" class="Bound">‚®ÖA</a> <a id="54790" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="54792" class="Symbol">(</a><a id="54793" href="Demos.HSP.html#54621" class="Bound">p‚®ÖA</a> <a id="54797" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="54799" href="Demos.HSP.html#54627" class="Bound">A‚â§‚®ÖA</a><a id="54803" class="Symbol">)</a>
   <a id="54808" href="Demos.HSP.html#54808" class="Function">spK‚äßpq</a> <a id="54815" class="Symbol">:</a> <a id="54817" href="Demos.HSP.html#49645" class="Function">S</a> <a id="54819" href="Demos.HSP.html#54541" class="Function">a‚ÑìŒπ</a> <a id="54823" class="Symbol">(</a><a id="54824" href="Demos.HSP.html#49757" class="Function">P</a> <a id="54826" href="Demos.HSP.html#54462" class="Bound">‚Ñì</a> <a id="54828" href="Demos.HSP.html#54451" class="Bound">Œπ</a> <a id="54830" href="Demos.HSP.html#54473" class="Bound">ùí¶</a><a id="54831" class="Symbol">)</a> <a id="54833" href="Demos.HSP.html#46364" class="Function Operator">‚ä´</a> <a id="54835" href="Demos.HSP.html#54512" class="Bound">p</a> <a id="54837" href="Demos.HSP.html#46364" class="Function Operator">‚âà</a> <a id="54839" href="Demos.HSP.html#54514" class="Bound">q</a>
   <a id="54844" href="Demos.HSP.html#54808" class="Function">spK‚äßpq</a> <a id="54851" class="Symbol">=</a> <a id="54853" href="Demos.HSP.html#53810" class="Function">S-id1</a><a id="54858" class="Symbol">{</a><a id="54859" class="Argument">‚Ñì</a> <a id="54861" class="Symbol">=</a> <a id="54863" href="Demos.HSP.html#54541" class="Function">a‚ÑìŒπ</a><a id="54866" class="Symbol">}{</a><a id="54868" class="Argument">p</a> <a id="54870" class="Symbol">=</a> <a id="54872" href="Demos.HSP.html#54512" class="Bound">p</a><a id="54873" class="Symbol">}{</a><a id="54875" href="Demos.HSP.html#54514" class="Bound">q</a><a id="54876" class="Symbol">}</a> <a id="54878" class="Symbol">(</a><a id="54879" href="Demos.HSP.html#54238" class="Function">P-id1</a><a id="54884" class="Symbol">{</a><a id="54885" class="Argument">‚Ñì</a> <a id="54887" class="Symbol">=</a> <a id="54889" href="Demos.HSP.html#54462" class="Bound">‚Ñì</a><a id="54890" class="Symbol">}</a> <a id="54892" class="Symbol">{</a><a id="54893" class="Argument">ùí¶</a> <a id="54895" class="Symbol">=</a> <a id="54897" href="Demos.HSP.html#54473" class="Bound">ùí¶</a><a id="54898" class="Symbol">}{</a><a id="54900" class="Argument">p</a> <a id="54902" class="Symbol">=</a> <a id="54904" href="Demos.HSP.html#54512" class="Bound">p</a><a id="54905" class="Symbol">}{</a><a id="54907" href="Demos.HSP.html#54514" class="Bound">q</a><a id="54908" class="Symbol">}</a> <a id="54910" href="Demos.HSP.html#54606" class="Bound">œÉ</a><a id="54911" class="Symbol">)</a>
</pre>


Free Algebras
=============

#### <a id="the-absolutely-free-algebra">The absolutely free algebra</a>

The term algebra `ùëª X` is the *absolutely free* `ùëÜ`-algebra over `X`.
That is, for every `ùëÜ`-algebra `ùë®`, the following hold.
* Every function from `X` to `ùïå[ ùë® ]` lifts to a homomorphism from `ùëª X` to `ùë®`.
* That homomorphism is unique.
Here we formalize the first of these properties by defining the lifting function `free-lift`
and its setoid analog `free-lift-func`, and then proving the latter is a homomorphism.
(For the proof of uniqueness, see the `Setoid.Terms.Properties` module of the [agda-algebras][] library.)

<pre class="Agda">

<a id="55568" class="Keyword">module</a> <a id="55575" href="Demos.HSP.html#55575" class="Module">_</a> <a id="55577" class="Symbol">{</a><a id="55578" href="Demos.HSP.html#55578" class="Bound">X</a> <a id="55580" class="Symbol">:</a> <a id="55582" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="55587" href="Demos.HSP.html#7612" class="Generalizable">œá</a><a id="55588" class="Symbol">}{</a><a id="55590" href="Demos.HSP.html#55590" class="Bound">ùë®</a> <a id="55592" class="Symbol">:</a> <a id="55594" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="55602" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="55604" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a><a id="55606" class="Symbol">}(</a><a id="55608" href="Demos.HSP.html#55608" class="Bound">h</a> <a id="55610" class="Symbol">:</a> <a id="55612" href="Demos.HSP.html#55578" class="Bound">X</a> <a id="55614" class="Symbol">‚Üí</a> <a id="55616" href="Demos.HSP.html#19428" class="Function Operator">ùïå[</a> <a id="55619" href="Demos.HSP.html#55590" class="Bound">ùë®</a> <a id="55621" href="Demos.HSP.html#19428" class="Function Operator">]</a><a id="55622" class="Symbol">)</a> <a id="55624" class="Keyword">where</a>
 <a id="55631" href="Demos.HSP.html#55631" class="Function">free-lift</a> <a id="55641" class="Symbol">:</a> <a id="55643" href="Demos.HSP.html#19428" class="Function Operator">ùïå[</a> <a id="55646" href="Demos.HSP.html#41393" class="Function">ùëª</a> <a id="55648" href="Demos.HSP.html#55578" class="Bound">X</a> <a id="55650" href="Demos.HSP.html#19428" class="Function Operator">]</a> <a id="55652" class="Symbol">‚Üí</a> <a id="55654" href="Demos.HSP.html#19428" class="Function Operator">ùïå[</a> <a id="55657" href="Demos.HSP.html#55590" class="Bound">ùë®</a> <a id="55659" href="Demos.HSP.html#19428" class="Function Operator">]</a>
 <a id="55662" href="Demos.HSP.html#55631" class="Function">free-lift</a> <a id="55672" class="Symbol">(</a><a id="55673" href="Demos.HSP.html#39808" class="InductiveConstructor">‚Ñä</a> <a id="55675" href="Demos.HSP.html#55675" class="Bound">x</a><a id="55676" class="Symbol">)</a>       <a id="55684" class="Symbol">=</a> <a id="55686" href="Demos.HSP.html#55608" class="Bound">h</a> <a id="55688" href="Demos.HSP.html#55675" class="Bound">x</a>
 <a id="55691" href="Demos.HSP.html#55631" class="Function">free-lift</a> <a id="55701" class="Symbol">(</a><a id="55702" href="Demos.HSP.html#39824" class="InductiveConstructor">node</a> <a id="55707" href="Demos.HSP.html#55707" class="Bound">f</a> <a id="55709" href="Demos.HSP.html#55709" class="Bound">t</a><a id="55710" class="Symbol">)</a>  <a id="55713" class="Symbol">=</a> <a id="55715" class="Symbol">(</a><a id="55716" href="Demos.HSP.html#55707" class="Bound">f</a> <a id="55718" href="Demos.HSP.html#19487" class="Function Operator">ÃÇ</a> <a id="55720" href="Demos.HSP.html#55590" class="Bound">ùë®</a><a id="55721" class="Symbol">)</a> <a id="55723" class="Symbol">Œª</a> <a id="55725" href="Demos.HSP.html#55725" class="Bound">i</a> <a id="55727" class="Symbol">‚Üí</a> <a id="55729" href="Demos.HSP.html#55631" class="Function">free-lift</a> <a id="55739" class="Symbol">(</a><a id="55740" href="Demos.HSP.html#55709" class="Bound">t</a> <a id="55742" href="Demos.HSP.html#55725" class="Bound">i</a><a id="55743" class="Symbol">)</a>

 <a id="55747" href="Demos.HSP.html#55747" class="Function">free-lift-func</a> <a id="55762" class="Symbol">:</a> <a id="55764" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="55767" href="Demos.HSP.html#41393" class="Function">ùëª</a> <a id="55769" href="Demos.HSP.html#55578" class="Bound">X</a> <a id="55771" href="Demos.HSP.html#19374" class="Function Operator">]</a> <a id="55773" href="Demos.HSP.html#6656" class="Record Operator">‚ü∂</a> <a id="55775" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="55778" href="Demos.HSP.html#55590" class="Bound">ùë®</a> <a id="55780" href="Demos.HSP.html#19374" class="Function Operator">]</a>
 <a id="55783" href="Demos.HSP.html#55747" class="Function">free-lift-func</a> <a id="55798" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="55802" href="Demos.HSP.html#55802" class="Bound">x</a> <a id="55804" class="Symbol">=</a> <a id="55806" href="Demos.HSP.html#55631" class="Function">free-lift</a> <a id="55816" href="Demos.HSP.html#55802" class="Bound">x</a>
 <a id="55819" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="55824" href="Demos.HSP.html#55747" class="Function">free-lift-func</a> <a id="55839" class="Symbol">=</a> <a id="55841" href="Demos.HSP.html#55928" class="Function">flcong</a> <a id="55848" class="Keyword">where</a>
  <a id="55856" class="Keyword">open</a> <a id="55861" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="55868" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="55871" href="Demos.HSP.html#55590" class="Bound">ùë®</a> <a id="55873" href="Demos.HSP.html#19374" class="Function Operator">]</a> <a id="55875" class="Keyword">using</a> <a id="55881" class="Symbol">(</a> <a id="55883" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="55887" class="Symbol">)</a> <a id="55889" class="Keyword">renaming</a> <a id="55898" class="Symbol">(</a> <a id="55900" href="Relation.Binary.Structures.html#1646" class="Function">reflexive</a> <a id="55910" class="Symbol">to</a> <a id="55913" class="Function">reflexive·¥¨</a> <a id="55924" class="Symbol">)</a>
  <a id="55928" href="Demos.HSP.html#55928" class="Function">flcong</a> <a id="55935" class="Symbol">:</a> <a id="55937" class="Symbol">‚àÄ</a> <a id="55939" class="Symbol">{</a><a id="55940" href="Demos.HSP.html#55940" class="Bound">s</a> <a id="55942" href="Demos.HSP.html#55942" class="Bound">t</a><a id="55943" class="Symbol">}</a> <a id="55945" class="Symbol">‚Üí</a> <a id="55947" href="Demos.HSP.html#55940" class="Bound">s</a> <a id="55949" href="Demos.HSP.html#40191" class="Datatype Operator">‚âÉ</a> <a id="55951" href="Demos.HSP.html#55942" class="Bound">t</a> <a id="55953" class="Symbol">‚Üí</a> <a id="55955" href="Demos.HSP.html#55631" class="Function">free-lift</a> <a id="55965" href="Demos.HSP.html#55940" class="Bound">s</a> <a id="55967" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a> <a id="55969" href="Demos.HSP.html#55631" class="Function">free-lift</a> <a id="55979" href="Demos.HSP.html#55942" class="Bound">t</a>
  <a id="55983" href="Demos.HSP.html#55928" class="Function">flcong</a> <a id="55990" class="Symbol">(</a><a id="55991" href="Demos.HSP.html#40235" class="InductiveConstructor">_‚âÉ_.rfl</a> <a id="55999" href="Demos.HSP.html#55999" class="Bound">x</a><a id="56000" class="Symbol">)</a> <a id="56002" class="Symbol">=</a> <a id="56004" href="Demos.HSP.html#55913" class="Function">reflexive·¥¨</a> <a id="56015" class="Symbol">(</a><a id="56016" href="Relation.Binary.PropositionalEquality.Core.html#1130" class="Function">‚â°.cong</a> <a id="56023" href="Demos.HSP.html#55608" class="Bound">h</a> <a id="56025" href="Demos.HSP.html#55999" class="Bound">x</a><a id="56026" class="Symbol">)</a>
  <a id="56030" href="Demos.HSP.html#55928" class="Function">flcong</a> <a id="56037" class="Symbol">(</a><a id="56038" href="Demos.HSP.html#40277" class="InductiveConstructor">_‚âÉ_.gnl</a> <a id="56046" href="Demos.HSP.html#56046" class="Bound">x</a><a id="56047" class="Symbol">)</a> <a id="56049" class="Symbol">=</a> <a id="56051" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="56056" class="Symbol">(</a><a id="56057" href="Demos.HSP.html#18814" class="Field">Interp</a> <a id="56064" href="Demos.HSP.html#55590" class="Bound">ùë®</a><a id="56065" class="Symbol">)</a> <a id="56067" class="Symbol">(</a><a id="56068" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="56075" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="56077" class="Symbol">Œª</a> <a id="56079" href="Demos.HSP.html#56079" class="Bound">i</a> <a id="56081" class="Symbol">‚Üí</a> <a id="56083" href="Demos.HSP.html#55928" class="Function">flcong</a> <a id="56090" class="Symbol">(</a><a id="56091" href="Demos.HSP.html#56046" class="Bound">x</a> <a id="56093" href="Demos.HSP.html#56079" class="Bound">i</a><a id="56094" class="Symbol">))</a>

 <a id="56099" href="Demos.HSP.html#56099" class="Function">lift-hom</a> <a id="56108" class="Symbol">:</a> <a id="56110" href="Demos.HSP.html#26708" class="Function">hom</a> <a id="56114" class="Symbol">(</a><a id="56115" href="Demos.HSP.html#41393" class="Function">ùëª</a> <a id="56117" href="Demos.HSP.html#55578" class="Bound">X</a><a id="56118" class="Symbol">)</a> <a id="56120" href="Demos.HSP.html#55590" class="Bound">ùë®</a>
 <a id="56123" href="Demos.HSP.html#56099" class="Function">lift-hom</a> <a id="56132" class="Symbol">=</a> <a id="56134" href="Demos.HSP.html#55747" class="Function">free-lift-func</a> <a id="56149" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a>
   <a id="56154" href="Demos.HSP.html#26655" class="InductiveConstructor">mkhom</a> <a id="56160" class="Symbol">Œª{</a><a id="56162" href="Demos.HSP.html#56162" class="Bound">_</a><a id="56163" class="Symbol">}{</a><a id="56165" href="Demos.HSP.html#56165" class="Bound">a</a><a id="56166" class="Symbol">}</a> <a id="56168" class="Symbol">‚Üí</a> <a id="56170" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="56175" class="Symbol">(</a><a id="56176" href="Demos.HSP.html#18814" class="Field">Interp</a> <a id="56183" href="Demos.HSP.html#55590" class="Bound">ùë®</a><a id="56184" class="Symbol">)</a> <a id="56186" class="Symbol">(</a><a id="56187" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="56194" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="56196" class="Symbol">Œª</a> <a id="56198" href="Demos.HSP.html#56198" class="Bound">i</a> <a id="56200" class="Symbol">‚Üí</a> <a id="56202" class="Symbol">(</a><a id="56203" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="56208" href="Demos.HSP.html#55747" class="Function">free-lift-func</a><a id="56222" class="Symbol">){</a><a id="56224" href="Demos.HSP.html#56165" class="Bound">a</a> <a id="56226" href="Demos.HSP.html#56198" class="Bound">i</a><a id="56227" class="Symbol">}</a> <a id="56229" href="Demos.HSP.html#40461" class="Function">‚âÉ-isRefl</a><a id="56237" class="Symbol">)</a>

</pre>

It turns out that the interpretation of a term `p` in an environment `Œ∑` is the same
as the free lift of `Œ∑` evaluated at `p`. We apply this fact a number of times in the sequel.

<pre class="Agda">

<a id="56446" class="Keyword">module</a> <a id="56453" href="Demos.HSP.html#56453" class="Module">_</a>  <a id="56456" class="Symbol">{</a><a id="56457" href="Demos.HSP.html#56457" class="Bound">X</a> <a id="56459" class="Symbol">:</a> <a id="56461" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="56466" href="Demos.HSP.html#7612" class="Generalizable">œá</a><a id="56467" class="Symbol">}</a> <a id="56469" class="Symbol">{</a><a id="56470" href="Demos.HSP.html#56470" class="Bound">ùë®</a> <a id="56472" class="Symbol">:</a> <a id="56474" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="56482" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="56484" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a><a id="56486" class="Symbol">}</a>   <a id="56490" class="Keyword">where</a>
 <a id="56497" class="Keyword">open</a> <a id="56502" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="56509" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="56512" href="Demos.HSP.html#56470" class="Bound">ùë®</a> <a id="56514" href="Demos.HSP.html#19374" class="Function Operator">]</a>  <a id="56517" class="Keyword">using</a> <a id="56523" class="Symbol">(</a> <a id="56525" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="56529" class="Symbol">;</a> <a id="56531" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="56536" class="Symbol">)</a>
 <a id="56539" class="Keyword">open</a> <a id="56544" href="Demos.HSP.html#42063" class="Module">Environment</a> <a id="56556" href="Demos.HSP.html#56470" class="Bound">ùë®</a>  <a id="56559" class="Keyword">using</a> <a id="56565" class="Symbol">(</a> <a id="56567" href="Demos.HSP.html#42627" class="Function Operator">‚ü¶_‚üß</a> <a id="56571" class="Symbol">)</a>

 <a id="56575" href="Demos.HSP.html#56575" class="Function">free-lift-interp</a> <a id="56592" class="Symbol">:</a> <a id="56594" class="Symbol">(</a><a id="56595" href="Demos.HSP.html#56595" class="Bound">Œ∑</a> <a id="56597" class="Symbol">:</a> <a id="56599" href="Demos.HSP.html#56457" class="Bound">X</a> <a id="56601" class="Symbol">‚Üí</a> <a id="56603" href="Demos.HSP.html#19428" class="Function Operator">ùïå[</a> <a id="56606" href="Demos.HSP.html#56470" class="Bound">ùë®</a> <a id="56608" href="Demos.HSP.html#19428" class="Function Operator">]</a><a id="56609" class="Symbol">)(</a><a id="56611" href="Demos.HSP.html#56611" class="Bound">p</a> <a id="56613" class="Symbol">:</a> <a id="56615" href="Demos.HSP.html#39768" class="Datatype">Term</a> <a id="56620" href="Demos.HSP.html#56457" class="Bound">X</a><a id="56621" class="Symbol">)</a> <a id="56623" class="Symbol">‚Üí</a> <a id="56625" href="Demos.HSP.html#42627" class="Function Operator">‚ü¶</a> <a id="56627" href="Demos.HSP.html#56611" class="Bound">p</a> <a id="56629" href="Demos.HSP.html#42627" class="Function Operator">‚üß</a> <a id="56631" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="56635" href="Demos.HSP.html#56595" class="Bound">Œ∑</a> <a id="56637" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a> <a id="56639" class="Symbol">(</a><a id="56640" href="Demos.HSP.html#55631" class="Function">free-lift</a><a id="56649" class="Symbol">{</a><a id="56650" class="Argument">ùë®</a> <a id="56652" class="Symbol">=</a> <a id="56654" href="Demos.HSP.html#56470" class="Bound">ùë®</a><a id="56655" class="Symbol">}</a> <a id="56657" href="Demos.HSP.html#56595" class="Bound">Œ∑</a><a id="56658" class="Symbol">)</a> <a id="56660" href="Demos.HSP.html#56611" class="Bound">p</a>
 <a id="56663" href="Demos.HSP.html#56575" class="Function">free-lift-interp</a> <a id="56680" href="Demos.HSP.html#56680" class="Bound">Œ∑</a> <a id="56682" class="Symbol">(</a><a id="56683" href="Demos.HSP.html#39808" class="InductiveConstructor">‚Ñä</a> <a id="56685" href="Demos.HSP.html#56685" class="Bound">x</a><a id="56686" class="Symbol">)</a>       <a id="56694" class="Symbol">=</a> <a id="56696" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>
 <a id="56702" href="Demos.HSP.html#56575" class="Function">free-lift-interp</a> <a id="56719" href="Demos.HSP.html#56719" class="Bound">Œ∑</a> <a id="56721" class="Symbol">(</a><a id="56722" href="Demos.HSP.html#39824" class="InductiveConstructor">node</a> <a id="56727" href="Demos.HSP.html#56727" class="Bound">f</a> <a id="56729" href="Demos.HSP.html#56729" class="Bound">t</a><a id="56730" class="Symbol">)</a>  <a id="56733" class="Symbol">=</a> <a id="56735" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="56740" class="Symbol">(</a><a id="56741" href="Demos.HSP.html#18814" class="Field">Interp</a> <a id="56748" href="Demos.HSP.html#56470" class="Bound">ùë®</a><a id="56749" class="Symbol">)</a> <a id="56751" class="Symbol">(</a><a id="56752" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="56759" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="56761" class="Symbol">(</a><a id="56762" href="Demos.HSP.html#56575" class="Function">free-lift-interp</a> <a id="56779" href="Demos.HSP.html#56719" class="Bound">Œ∑</a><a id="56780" class="Symbol">)</a> <a id="56782" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="56784" href="Demos.HSP.html#56729" class="Bound">t</a><a id="56785" class="Symbol">)</a>
</pre>

#### <a id="the-relatively-free-algebra">The relatively free algebra</a>
Given an arbitrary class `ùí¶` of `ùëÜ`-algebras, we cannot expect that `ùëª X` belongs to `ùí¶`.
Indeed, there may be no free algebra in `ùí¶`.
Nonetheless, it is always possible to construct an algebra that is free for `ùí¶` and belongs to the class `S (P ùí¶`).
Such an algebra is called a *relatively free algebra over* `X` (relative to `ùí¶`).
There are several informal approaches to defining this algebra.
We now describe the approach on which our formal construction is based and then we present the formalization.

Let `ùîΩ[ X ]` denote the relatively free algebra over `X`.  We represent `ùîΩ[ X ]` as the quotient `ùëª X / ‚âà` where `x ‚âà y` if and only if `h x = h y` for every homomorphism `h` from `ùëª X` into a member of `ùí¶`.
More precisely, if `ùë® ‚àà ùí¶` and `h : hom (ùëª X) ùë®`, then `h` factors as `ùëª X ‚Üí HomIm h  ‚Üí ùë®` and `ùëª X / ker h ‚âÖ HomIm h ‚â§ ùë®`; that is, `ùëª X / ker h` is (isomorphic to) an algebra in `S ùí¶`. Letting

`‚âà := ‚ãÇ \{Œ∏ ‚àà Con(ùëª X) ‚à£ ùëª X / Œ∏ ‚àà S ùí¶\}`,

observe that `ùîΩ[ X ] := ùëª X / ‚âà` is a subdirect product of the algebras `ùëª X / ker h`
as `h` ranges over all homomorphisms from `ùëª X` to algebras in `ùí¶`.  Thus, `ùîΩ[ X ] ‚àà P (S ùí¶) ‚äÜ S (P ùí¶)`.
As we have seen, every map `œÅ : X ‚Üí ùïå[ ùë® ]` extends uniquely to a homomorphism `h : hom (ùëª X) ùë®` and `h`
factors through the natural projection `ùëª X ‚Üí ùîΩ[ X ]` (since `‚âà ‚äÜ ker h`) yielding a unique homomorphism from `ùîΩ[ X ]` to `ùë®` extending `œÅ`.

In [Agda][] we construct `ùîΩ[ X ]` as a homomorphic image of `ùëª X` in the following way.
First, given `X` we define `ùë™` as the product of pairs `(ùë®, œÅ)` of
algebras `ùë® ‚àà ùí¶` along with environments `œÅ : X ‚Üí ùïå[ ùë® ]`.
To do so, we contrive an index type for the product; each index is a triple `(ùë®, p, œÅ)` where `ùë®` is an algebra, `p` is proof of `ùë® ‚àà ùí¶`, and `œÅ : X ‚Üí ùïå[ ùë® ]` is an arbitrary environment.

<pre class="Agda">

<a id="58683" class="Keyword">module</a> <a id="FreeAlgebra"></a><a id="58690" href="Demos.HSP.html#58690" class="Module">FreeAlgebra</a> <a id="58702" class="Symbol">(</a><a id="58703" href="Demos.HSP.html#58703" class="Bound">ùí¶</a> <a id="58705" class="Symbol">:</a> <a id="58707" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="58712" class="Symbol">(</a><a id="58713" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="58721" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="58723" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a><a id="58725" class="Symbol">)</a> <a id="58727" href="Demos.HSP.html#7614" class="Generalizable">‚Ñì</a><a id="58728" class="Symbol">)</a> <a id="58730" class="Keyword">where</a>
 <a id="58737" class="Keyword">private</a> <a id="FreeAlgebra.c"></a><a id="58745" href="Demos.HSP.html#58745" class="Function">c</a> <a id="58747" class="Symbol">=</a> <a id="58749" href="Demos.HSP.html#58721" class="Bound">Œ±</a> <a id="58751" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="58753" href="Demos.HSP.html#58723" class="Bound">œÅ·µÉ</a> <a id="58756" class="Symbol">;</a> <a id="FreeAlgebra.Œπ"></a><a id="58758" href="Demos.HSP.html#58758" class="Function">Œπ</a> <a id="58760" class="Symbol">=</a> <a id="58762" href="Demos.HSP.html#34906" class="Function">ov</a> <a id="58765" href="Demos.HSP.html#58745" class="Function">c</a> <a id="58767" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="58769" href="Demos.HSP.html#58727" class="Bound">‚Ñì</a>
 <a id="FreeAlgebra.‚Ñë"></a><a id="58772" href="Demos.HSP.html#58772" class="Function">‚Ñë</a> <a id="58774" class="Symbol">:</a> <a id="58776" class="Symbol">{</a><a id="58777" href="Demos.HSP.html#58777" class="Bound">œá</a> <a id="58779" class="Symbol">:</a> <a id="58781" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="58786" class="Symbol">}</a> <a id="58788" class="Symbol">‚Üí</a> <a id="58790" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="58795" href="Demos.HSP.html#58777" class="Bound">œá</a> <a id="58797" class="Symbol">‚Üí</a> <a id="58799" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="58804" class="Symbol">(</a><a id="58805" href="Demos.HSP.html#58758" class="Function">Œπ</a> <a id="58807" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="58809" href="Demos.HSP.html#58777" class="Bound">œá</a><a id="58810" class="Symbol">)</a>
 <a id="58813" href="Demos.HSP.html#58772" class="Function">‚Ñë</a> <a id="58815" href="Demos.HSP.html#58815" class="Bound">X</a> <a id="58817" class="Symbol">=</a> <a id="58819" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="58822" href="Demos.HSP.html#58822" class="Bound">ùë®</a> <a id="58824" href="Data.Product.html#916" class="Function">‚àà</a> <a id="58826" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="58834" href="Demos.HSP.html#58721" class="Bound">Œ±</a> <a id="58836" href="Demos.HSP.html#58723" class="Bound">œÅ·µÉ</a> <a id="58839" href="Data.Product.html#916" class="Function">]</a> <a id="58841" href="Demos.HSP.html#58822" class="Bound">ùë®</a> <a id="58843" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="58845" href="Demos.HSP.html#58703" class="Bound">ùí¶</a> <a id="58847" href="Data.Product.html#1167" class="Function Operator">√ó</a> <a id="58849" class="Symbol">(</a><a id="58850" href="Demos.HSP.html#58815" class="Bound">X</a> <a id="58852" class="Symbol">‚Üí</a> <a id="58854" href="Demos.HSP.html#19428" class="Function Operator">ùïå[</a> <a id="58857" href="Demos.HSP.html#58822" class="Bound">ùë®</a> <a id="58859" href="Demos.HSP.html#19428" class="Function Operator">]</a><a id="58860" class="Symbol">)</a>

 <a id="FreeAlgebra.ùë™"></a><a id="58864" href="Demos.HSP.html#58864" class="Function">ùë™</a> <a id="58866" class="Symbol">:</a> <a id="58868" class="Symbol">{</a><a id="58869" href="Demos.HSP.html#58869" class="Bound">œá</a> <a id="58871" class="Symbol">:</a> <a id="58873" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="58878" class="Symbol">}</a> <a id="58880" class="Symbol">‚Üí</a> <a id="58882" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="58887" href="Demos.HSP.html#58869" class="Bound">œá</a> <a id="58889" class="Symbol">‚Üí</a> <a id="58891" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="58899" class="Symbol">(</a><a id="58900" href="Demos.HSP.html#58758" class="Function">Œπ</a> <a id="58902" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="58904" href="Demos.HSP.html#58869" class="Bound">œá</a><a id="58905" class="Symbol">)(</a><a id="58907" href="Demos.HSP.html#58758" class="Function">Œπ</a> <a id="58909" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="58911" href="Demos.HSP.html#58869" class="Bound">œá</a><a id="58912" class="Symbol">)</a>
 <a id="58915" href="Demos.HSP.html#58864" class="Function">ùë™</a> <a id="58917" href="Demos.HSP.html#58917" class="Bound">X</a> <a id="58919" class="Symbol">=</a> <a id="58921" href="Demos.HSP.html#24332" class="Function">‚®Ö</a> <a id="58923" class="Symbol">{</a><a id="58924" class="Argument">I</a> <a id="58926" class="Symbol">=</a> <a id="58928" href="Demos.HSP.html#58772" class="Function">‚Ñë</a> <a id="58930" href="Demos.HSP.html#58917" class="Bound">X</a><a id="58931" class="Symbol">}</a> <a id="58933" href="Demos.HSP.html#8241" class="Function Operator">‚à£_‚à£</a>

</pre>
We then define `ùîΩ[ X ]` to be the image of a homomorphism from `ùëª X` to `ùë™` as follows.

<pre class="Agda">

 <a id="FreeAlgebra.homC"></a><a id="59053" href="Demos.HSP.html#59053" class="Function">homC</a> <a id="59058" class="Symbol">:</a> <a id="59060" class="Symbol">(</a><a id="59061" href="Demos.HSP.html#59061" class="Bound">X</a> <a id="59063" class="Symbol">:</a> <a id="59065" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="59070" href="Demos.HSP.html#7612" class="Generalizable">œá</a><a id="59071" class="Symbol">)</a> <a id="59073" class="Symbol">‚Üí</a> <a id="59075" href="Demos.HSP.html#26708" class="Function">hom</a> <a id="59079" class="Symbol">(</a><a id="59080" href="Demos.HSP.html#41393" class="Function">ùëª</a> <a id="59082" href="Demos.HSP.html#59061" class="Bound">X</a><a id="59083" class="Symbol">)</a> <a id="59085" class="Symbol">(</a><a id="59086" href="Demos.HSP.html#58864" class="Function">ùë™</a> <a id="59088" href="Demos.HSP.html#59061" class="Bound">X</a><a id="59089" class="Symbol">)</a>
 <a id="59092" href="Demos.HSP.html#59053" class="Function">homC</a> <a id="59097" href="Demos.HSP.html#59097" class="Bound">X</a> <a id="59099" class="Symbol">=</a> <a id="59101" href="Demos.HSP.html#32072" class="Function">‚®Ö-hom-co</a> <a id="59110" class="Symbol">_</a> <a id="59112" class="Symbol">(Œª</a> <a id="59115" href="Demos.HSP.html#59115" class="Bound">i</a> <a id="59117" class="Symbol">‚Üí</a> <a id="59119" href="Demos.HSP.html#56099" class="Function">lift-hom</a> <a id="59128" class="Symbol">(</a><a id="59129" href="Demos.HSP.html#6595" class="Field">snd</a> <a id="59133" href="Demos.HSP.html#8278" class="Function Operator">‚à•</a> <a id="59135" href="Demos.HSP.html#59115" class="Bound">i</a> <a id="59137" href="Demos.HSP.html#8278" class="Function Operator">‚à•</a><a id="59138" class="Symbol">))</a>

 <a id="FreeAlgebra.ùîΩ[_]"></a><a id="59143" href="Demos.HSP.html#59143" class="Function Operator">ùîΩ[_]</a> <a id="59148" class="Symbol">:</a> <a id="59150" class="Symbol">{</a><a id="59151" href="Demos.HSP.html#59151" class="Bound">œá</a> <a id="59153" class="Symbol">:</a> <a id="59155" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="59160" class="Symbol">}</a> <a id="59162" class="Symbol">‚Üí</a> <a id="59164" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="59169" href="Demos.HSP.html#59151" class="Bound">œá</a> <a id="59171" class="Symbol">‚Üí</a> <a id="59173" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="59181" class="Symbol">(</a><a id="59182" href="Demos.HSP.html#34906" class="Function">ov</a> <a id="59185" href="Demos.HSP.html#59151" class="Bound">œá</a><a id="59186" class="Symbol">)</a> <a id="59188" class="Symbol">(</a><a id="59189" href="Demos.HSP.html#58758" class="Function">Œπ</a> <a id="59191" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="59193" href="Demos.HSP.html#59151" class="Bound">œá</a><a id="59194" class="Symbol">)</a>
 <a id="59197" href="Demos.HSP.html#59143" class="Function Operator">ùîΩ[</a> <a id="59200" href="Demos.HSP.html#59200" class="Bound">X</a> <a id="59202" href="Demos.HSP.html#59143" class="Function Operator">]</a> <a id="59204" class="Symbol">=</a> <a id="59206" href="Demos.HSP.html#36002" class="Function">HomIm</a> <a id="59212" class="Symbol">(</a><a id="59213" href="Demos.HSP.html#59053" class="Function">homC</a> <a id="59218" href="Demos.HSP.html#59200" class="Bound">X</a><a id="59219" class="Symbol">)</a>

</pre>
Observe that if the identity `p ‚âà q` holds in all `ùë® ‚àà ùí¶` (for all environments), then `p ‚âà q` holds in `ùîΩ[ X ]`; equivalently, the pair `(p , q)` belongs to the kernel of the natural homomorphism from `ùëª X` onto `ùîΩ[ X ]`. This natural epimorphism from `ùëª X` onto `ùîΩ[ X ]`
is defined as follows.

<pre class="Agda">

<a id="59544" class="Keyword">module</a> <a id="FreeHom"></a><a id="59551" href="Demos.HSP.html#59551" class="Module">FreeHom</a> <a id="59559" class="Symbol">{</a><a id="59560" href="Demos.HSP.html#59560" class="Bound">ùí¶</a> <a id="59562" class="Symbol">:</a> <a id="59564" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="59568" class="Symbol">(</a><a id="59569" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="59577" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="59579" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a><a id="59581" class="Symbol">)</a> <a id="59583" class="Symbol">(</a><a id="59584" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="59586" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="59588" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a> <a id="59591" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="59593" href="Demos.HSP.html#34906" class="Function">ov</a> <a id="59596" href="Demos.HSP.html#7614" class="Generalizable">‚Ñì</a><a id="59597" class="Symbol">)}</a> <a id="59600" class="Keyword">where</a>
 <a id="59607" class="Keyword">private</a> <a id="FreeHom.c"></a><a id="59615" href="Demos.HSP.html#59615" class="Function">c</a> <a id="59617" class="Symbol">=</a> <a id="59619" href="Demos.HSP.html#59577" class="Bound">Œ±</a> <a id="59621" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="59623" href="Demos.HSP.html#59579" class="Bound">œÅ·µÉ</a> <a id="59626" class="Symbol">;</a> <a id="FreeHom.Œπ"></a><a id="59628" href="Demos.HSP.html#59628" class="Function">Œπ</a> <a id="59630" class="Symbol">=</a> <a id="59632" href="Demos.HSP.html#34906" class="Function">ov</a> <a id="59635" href="Demos.HSP.html#59615" class="Function">c</a> <a id="59637" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="59639" href="Demos.HSP.html#59596" class="Bound">‚Ñì</a>
 <a id="59642" class="Keyword">open</a> <a id="59647" href="Demos.HSP.html#58690" class="Module">FreeAlgebra</a> <a id="59659" href="Demos.HSP.html#59560" class="Bound">ùí¶</a> <a id="59661" class="Keyword">using</a> <a id="59667" class="Symbol">(</a> <a id="59669" href="Demos.HSP.html#59143" class="Function Operator">ùîΩ[_]</a> <a id="59674" class="Symbol">;</a> <a id="59676" href="Demos.HSP.html#59053" class="Function">homC</a> <a id="59681" class="Symbol">)</a>

 <a id="FreeHom.epiF[_]"></a><a id="59685" href="Demos.HSP.html#59685" class="Function Operator">epiF[_]</a> <a id="59693" class="Symbol">:</a> <a id="59695" class="Symbol">(</a><a id="59696" href="Demos.HSP.html#59696" class="Bound">X</a> <a id="59698" class="Symbol">:</a> <a id="59700" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="59705" href="Demos.HSP.html#59615" class="Function">c</a><a id="59706" class="Symbol">)</a> <a id="59708" class="Symbol">‚Üí</a> <a id="59710" href="Demos.HSP.html#27764" class="Function">epi</a> <a id="59714" class="Symbol">(</a><a id="59715" href="Demos.HSP.html#41393" class="Function">ùëª</a> <a id="59717" href="Demos.HSP.html#59696" class="Bound">X</a><a id="59718" class="Symbol">)</a> <a id="59720" href="Demos.HSP.html#59143" class="Function Operator">ùîΩ[</a> <a id="59723" href="Demos.HSP.html#59696" class="Bound">X</a> <a id="59725" href="Demos.HSP.html#59143" class="Function Operator">]</a>
 <a id="59728" href="Demos.HSP.html#59685" class="Function Operator">epiF[</a> <a id="59734" href="Demos.HSP.html#59734" class="Bound">X</a> <a id="59736" href="Demos.HSP.html#59685" class="Function Operator">]</a> <a id="59738" class="Symbol">=</a> <a id="59740" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="59742" href="Demos.HSP.html#36621" class="Function">toHomIm</a> <a id="59750" class="Symbol">(</a><a id="59751" href="Demos.HSP.html#59053" class="Function">homC</a> <a id="59756" href="Demos.HSP.html#59734" class="Bound">X</a><a id="59757" class="Symbol">)</a> <a id="59759" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="59761" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="59763" class="Keyword">record</a>  <a id="59771" class="Symbol">{</a> <a id="59773" href="Demos.HSP.html#27665" class="Field">isHom</a> <a id="59779" class="Symbol">=</a> <a id="59781" href="Demos.HSP.html#8278" class="Function Operator">‚à•</a> <a id="59783" href="Demos.HSP.html#36621" class="Function">toHomIm</a> <a id="59791" class="Symbol">(</a><a id="59792" href="Demos.HSP.html#59053" class="Function">homC</a> <a id="59797" href="Demos.HSP.html#59734" class="Bound">X</a><a id="59798" class="Symbol">)</a> <a id="59800" href="Demos.HSP.html#8278" class="Function Operator">‚à•</a>
                                            <a id="59846" class="Symbol">;</a> <a id="59848" href="Demos.HSP.html#27690" class="Field">isSurjective</a> <a id="59861" class="Symbol">=</a> <a id="59863" href="Demos.HSP.html#14318" class="Function">toIm-surj</a> <a id="59873" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="59875" href="Demos.HSP.html#59053" class="Function">homC</a> <a id="59880" href="Demos.HSP.html#59734" class="Bound">X</a> <a id="59882" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="59884" class="Symbol">}</a>

 <a id="FreeHom.homF[_]"></a><a id="59888" href="Demos.HSP.html#59888" class="Function Operator">homF[_]</a> <a id="59896" class="Symbol">:</a> <a id="59898" class="Symbol">(</a><a id="59899" href="Demos.HSP.html#59899" class="Bound">X</a> <a id="59901" class="Symbol">:</a> <a id="59903" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="59908" href="Demos.HSP.html#59615" class="Function">c</a><a id="59909" class="Symbol">)</a> <a id="59911" class="Symbol">‚Üí</a> <a id="59913" href="Demos.HSP.html#26708" class="Function">hom</a> <a id="59917" class="Symbol">(</a><a id="59918" href="Demos.HSP.html#41393" class="Function">ùëª</a> <a id="59920" href="Demos.HSP.html#59899" class="Bound">X</a><a id="59921" class="Symbol">)</a> <a id="59923" href="Demos.HSP.html#59143" class="Function Operator">ùîΩ[</a> <a id="59926" href="Demos.HSP.html#59899" class="Bound">X</a> <a id="59928" href="Demos.HSP.html#59143" class="Function Operator">]</a>
 <a id="59931" href="Demos.HSP.html#59888" class="Function Operator">homF[</a> <a id="59937" href="Demos.HSP.html#59937" class="Bound">X</a> <a id="59939" href="Demos.HSP.html#59888" class="Function Operator">]</a> <a id="59941" class="Symbol">=</a> <a id="59943" href="Demos.HSP.html#27722" class="Function">IsEpi.HomReduct</a> <a id="59959" href="Demos.HSP.html#8278" class="Function Operator">‚à•</a> <a id="59961" href="Demos.HSP.html#59685" class="Function Operator">epiF[</a> <a id="59967" href="Demos.HSP.html#59937" class="Bound">X</a> <a id="59969" href="Demos.HSP.html#59685" class="Function Operator">]</a> <a id="59971" href="Demos.HSP.html#8278" class="Function Operator">‚à•</a>

</pre>

Before formalizing the HSP theorem in the next section, we need to prove the following important property of the relatively free algebra: For every algebra `ùë®`, if `ùë® ‚ä® Th (V ùí¶)`,
then there exists an epimorphism from `ùîΩ[ A ]` onto `ùë®`, where `A` denotes the carrier of `ùë®`.

<pre class="Agda">

<a id="60276" class="Keyword">module</a> <a id="60283" href="Demos.HSP.html#60283" class="Module">_</a> <a id="60285" class="Symbol">{</a><a id="60286" href="Demos.HSP.html#60286" class="Bound">ùë®</a> <a id="60288" class="Symbol">:</a> <a id="60290" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="60298" class="Symbol">(</a><a id="60299" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="60301" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="60303" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a> <a id="60306" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="60308" href="Demos.HSP.html#7614" class="Generalizable">‚Ñì</a><a id="60309" class="Symbol">)(</a><a id="60311" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="60313" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="60315" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a> <a id="60318" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="60320" href="Demos.HSP.html#7614" class="Generalizable">‚Ñì</a><a id="60321" class="Symbol">)}{</a><a id="60324" href="Demos.HSP.html#60324" class="Bound">ùí¶</a> <a id="60326" class="Symbol">:</a> <a id="60328" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="60332" class="Symbol">(</a><a id="60333" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="60341" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="60343" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a><a id="60345" class="Symbol">)(</a><a id="60347" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="60349" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="60351" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a> <a id="60354" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="60356" href="Demos.HSP.html#34906" class="Function">ov</a> <a id="60359" href="Demos.HSP.html#7614" class="Generalizable">‚Ñì</a><a id="60360" class="Symbol">)}</a> <a id="60363" class="Keyword">where</a>
 <a id="60370" class="Keyword">private</a> <a id="60378" href="Demos.HSP.html#60378" class="Function">c</a> <a id="60380" class="Symbol">=</a> <a id="60382" href="Demos.HSP.html#60299" class="Bound">Œ±</a> <a id="60384" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="60386" href="Demos.HSP.html#60303" class="Bound">œÅ·µÉ</a> <a id="60389" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="60391" href="Demos.HSP.html#60308" class="Bound">‚Ñì</a> <a id="60393" class="Symbol">;</a> <a id="60395" href="Demos.HSP.html#60395" class="Function">Œπ</a> <a id="60397" class="Symbol">=</a> <a id="60399" href="Demos.HSP.html#34906" class="Function">ov</a> <a id="60402" href="Demos.HSP.html#60378" class="Function">c</a>
 <a id="60405" class="Keyword">open</a> <a id="60410" href="Demos.HSP.html#58690" class="Module">FreeAlgebra</a> <a id="60422" href="Demos.HSP.html#60324" class="Bound">ùí¶</a> <a id="60424" class="Keyword">using</a> <a id="60430" class="Symbol">(</a> <a id="60432" href="Demos.HSP.html#59143" class="Function Operator">ùîΩ[_]</a> <a id="60437" class="Symbol">;</a> <a id="60439" href="Demos.HSP.html#58864" class="Function">ùë™</a> <a id="60441" class="Symbol">)</a>
 <a id="60444" class="Keyword">open</a> <a id="60449" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="60456" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="60459" href="Demos.HSP.html#60286" class="Bound">ùë®</a> <a id="60461" href="Demos.HSP.html#19374" class="Function Operator">]</a> <a id="60463" class="Keyword">using</a> <a id="60469" class="Symbol">(</a> <a id="60471" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="60476" class="Symbol">;</a> <a id="60478" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="60482" class="Symbol">;</a> <a id="60484" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="60490" class="Symbol">)</a> <a id="60492" class="Keyword">renaming</a> <a id="60501" class="Symbol">(</a> <a id="60503" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="60511" class="Symbol">to</a> <a id="60514" class="Field">A</a> <a id="60516" class="Symbol">;</a> <a id="60518" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="60522" class="Symbol">to</a> <a id="60525" class="Field Operator">_‚âà·¥¨_</a> <a id="60530" class="Symbol">)</a>

 <a id="60534" href="Demos.HSP.html#60534" class="Function">F-ModTh-epi</a> <a id="60546" class="Symbol">:</a> <a id="60548" href="Demos.HSP.html#60286" class="Bound">ùë®</a> <a id="60550" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="60552" href="Demos.HSP.html#48458" class="Function">Mod</a> <a id="60556" class="Symbol">(</a><a id="60557" href="Demos.HSP.html#48360" class="Function">Th</a> <a id="60560" href="Demos.HSP.html#60324" class="Bound">ùí¶</a><a id="60561" class="Symbol">)</a> <a id="60563" class="Symbol">‚Üí</a> <a id="60565" href="Demos.HSP.html#27764" class="Function">epi</a> <a id="60569" href="Demos.HSP.html#59143" class="Function Operator">ùîΩ[</a> <a id="60572" href="Demos.HSP.html#60514" class="Function">A</a> <a id="60574" href="Demos.HSP.html#59143" class="Function Operator">]</a>  <a id="60577" href="Demos.HSP.html#60286" class="Bound">ùë®</a>
 <a id="60580" href="Demos.HSP.html#60534" class="Function">F-ModTh-epi</a> <a id="60592" href="Demos.HSP.html#60592" class="Bound">A‚ààModThK</a> <a id="60601" class="Symbol">=</a> <a id="60603" href="Demos.HSP.html#60622" class="Function">œÜ</a> <a id="60605" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="60607" href="Demos.HSP.html#61370" class="Function">isEpi</a> <a id="60613" class="Keyword">where</a>

  <a id="60622" href="Demos.HSP.html#60622" class="Function">œÜ</a> <a id="60624" class="Symbol">:</a> <a id="60626" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="60629" href="Demos.HSP.html#59143" class="Function Operator">ùîΩ[</a> <a id="60632" href="Demos.HSP.html#60514" class="Function">A</a> <a id="60634" href="Demos.HSP.html#59143" class="Function Operator">]</a> <a id="60636" href="Demos.HSP.html#19374" class="Function Operator">]</a> <a id="60638" href="Demos.HSP.html#6656" class="Record Operator">‚ü∂</a> <a id="60640" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="60643" href="Demos.HSP.html#60286" class="Bound">ùë®</a> <a id="60645" href="Demos.HSP.html#19374" class="Function Operator">]</a>
  <a id="60649" href="Demos.HSP.html#6758" class="Field Operator">_‚ü®$‚ü©_</a> <a id="60655" href="Demos.HSP.html#60622" class="Function">œÜ</a>            <a id="60668" class="Symbol">=</a> <a id="60670" href="Demos.HSP.html#55631" class="Function">free-lift</a><a id="60679" class="Symbol">{</a><a id="60680" class="Argument">ùë®</a> <a id="60682" class="Symbol">=</a> <a id="60684" href="Demos.HSP.html#60286" class="Bound">ùë®</a><a id="60685" class="Symbol">}</a> <a id="60687" href="Function.Base.html#615" class="Function">id</a>
  <a id="60692" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="60697" href="Demos.HSP.html#60622" class="Function">œÜ</a> <a id="60699" class="Symbol">{</a><a id="60700" href="Demos.HSP.html#60700" class="Bound">p</a><a id="60701" class="Symbol">}</a> <a id="60703" class="Symbol">{</a><a id="60704" href="Demos.HSP.html#60704" class="Bound">q</a><a id="60705" class="Symbol">}</a> <a id="60707" href="Demos.HSP.html#60707" class="Bound">pq</a>  <a id="60711" class="Symbol">=</a> <a id="60713" href="Demos.HSP.html#61041" class="Function">Goal</a>
   <a id="60721" class="Keyword">where</a>
   <a id="60730" href="Demos.HSP.html#60730" class="Function">lift-pq</a> <a id="60738" class="Symbol">:</a> <a id="60740" class="Symbol">(</a><a id="60741" href="Demos.HSP.html#60700" class="Bound">p</a> <a id="60743" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="60745" href="Demos.HSP.html#60704" class="Bound">q</a><a id="60746" class="Symbol">)</a> <a id="60748" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="60750" href="Demos.HSP.html#48360" class="Function">Th</a> <a id="60753" href="Demos.HSP.html#60324" class="Bound">ùí¶</a>
   <a id="60758" href="Demos.HSP.html#60730" class="Function">lift-pq</a> <a id="60766" href="Demos.HSP.html#60766" class="Bound">ùë©</a> <a id="60768" href="Demos.HSP.html#60768" class="Bound">x</a> <a id="60770" href="Demos.HSP.html#60770" class="Bound">œÅ</a> <a id="60772" class="Symbol">=</a> <a id="60774" href="Relation.Binary.Reasoning.Base.Single.html#1916" class="Function Operator">begin</a>
    <a id="60784" href="Demos.HSP.html#42627" class="Function Operator">‚ü¶</a> <a id="60786" href="Demos.HSP.html#60700" class="Bound">p</a> <a id="60788" href="Demos.HSP.html#42627" class="Function Operator">‚üß</a> <a id="60790" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="60794" href="Demos.HSP.html#60770" class="Bound">œÅ</a>    <a id="60799" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a> <a id="60802" href="Demos.HSP.html#56575" class="Function">free-lift-interp</a> <a id="60819" class="Symbol">{</a><a id="60820" class="Argument">ùë®</a> <a id="60822" class="Symbol">=</a> <a id="60824" href="Demos.HSP.html#60766" class="Bound">ùë©</a><a id="60825" class="Symbol">}</a> <a id="60827" href="Demos.HSP.html#60770" class="Bound">œÅ</a> <a id="60829" href="Demos.HSP.html#60700" class="Bound">p</a>  <a id="60832" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
    <a id="60838" href="Demos.HSP.html#55631" class="Function">free-lift</a> <a id="60848" href="Demos.HSP.html#60770" class="Bound">œÅ</a> <a id="60850" href="Demos.HSP.html#60700" class="Bound">p</a>  <a id="60853" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a> <a id="60856" href="Demos.HSP.html#60707" class="Bound">pq</a> <a id="60859" class="Symbol">(</a><a id="60860" href="Demos.HSP.html#60766" class="Bound">ùë©</a> <a id="60862" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="60864" href="Demos.HSP.html#60768" class="Bound">x</a> <a id="60866" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="60868" href="Demos.HSP.html#60770" class="Bound">œÅ</a><a id="60869" class="Symbol">)</a>                <a id="60886" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
    <a id="60892" href="Demos.HSP.html#55631" class="Function">free-lift</a> <a id="60902" href="Demos.HSP.html#60770" class="Bound">œÅ</a> <a id="60904" href="Demos.HSP.html#60704" class="Bound">q</a>  <a id="60907" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚âàÀò‚ü®</a> <a id="60911" href="Demos.HSP.html#56575" class="Function">free-lift-interp</a><a id="60927" class="Symbol">{</a><a id="60928" class="Argument">ùë®</a> <a id="60930" class="Symbol">=</a> <a id="60932" href="Demos.HSP.html#60766" class="Bound">ùë©</a><a id="60933" class="Symbol">}</a> <a id="60935" href="Demos.HSP.html#60770" class="Bound">œÅ</a> <a id="60937" href="Demos.HSP.html#60704" class="Bound">q</a>  <a id="60940" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚ü©</a>
    <a id="60946" href="Demos.HSP.html#42627" class="Function Operator">‚ü¶</a> <a id="60948" href="Demos.HSP.html#60704" class="Bound">q</a> <a id="60950" href="Demos.HSP.html#42627" class="Function Operator">‚üß</a> <a id="60952" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="60956" href="Demos.HSP.html#60770" class="Bound">œÅ</a>    <a id="60961" href="Relation.Binary.Reasoning.Base.Single.html#2555" class="Function Operator">‚àé</a>
     <a id="60968" class="Keyword">where</a> <a id="60974" class="Keyword">open</a> <a id="60979" href="Relation.Binary.Reasoning.Setoid.html" class="Module">SetoidReasoning</a> <a id="60995" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="60998" href="Demos.HSP.html#60766" class="Bound">ùë©</a> <a id="61000" href="Demos.HSP.html#19374" class="Function Operator">]</a> <a id="61002" class="Symbol">;</a> <a id="61004" class="Keyword">open</a> <a id="61009" href="Demos.HSP.html#42063" class="Module">Environment</a> <a id="61021" href="Demos.HSP.html#60766" class="Bound">ùë©</a> <a id="61023" class="Keyword">using</a> <a id="61029" class="Symbol">(</a> <a id="61031" href="Demos.HSP.html#42627" class="Function Operator">‚ü¶_‚üß</a> <a id="61035" class="Symbol">)</a>

   <a id="61041" href="Demos.HSP.html#61041" class="Function">Goal</a> <a id="61046" class="Symbol">:</a> <a id="61048" href="Demos.HSP.html#55631" class="Function">free-lift</a> <a id="61058" href="Function.Base.html#615" class="Function">id</a> <a id="61061" href="Demos.HSP.html#60700" class="Bound">p</a> <a id="61063" href="Demos.HSP.html#60525" class="Function Operator">‚âà·¥¨</a> <a id="61066" href="Demos.HSP.html#55631" class="Function">free-lift</a> <a id="61076" href="Function.Base.html#615" class="Function">id</a> <a id="61079" href="Demos.HSP.html#60704" class="Bound">q</a>
   <a id="61084" href="Demos.HSP.html#61041" class="Function">Goal</a> <a id="61089" class="Symbol">=</a> <a id="61091" href="Relation.Binary.Reasoning.Base.Single.html#1916" class="Function Operator">begin</a>
    <a id="61101" href="Demos.HSP.html#55631" class="Function">free-lift</a> <a id="61111" href="Function.Base.html#615" class="Function">id</a> <a id="61114" href="Demos.HSP.html#60700" class="Bound">p</a>  <a id="61117" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚âàÀò‚ü®</a> <a id="61121" href="Demos.HSP.html#56575" class="Function">free-lift-interp</a> <a id="61138" class="Symbol">{</a><a id="61139" class="Argument">ùë®</a> <a id="61141" class="Symbol">=</a> <a id="61143" href="Demos.HSP.html#60286" class="Bound">ùë®</a><a id="61144" class="Symbol">}</a> <a id="61146" href="Function.Base.html#615" class="Function">id</a> <a id="61149" href="Demos.HSP.html#60700" class="Bound">p</a>   <a id="61153" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚ü©</a>
    <a id="61159" href="Demos.HSP.html#42627" class="Function Operator">‚ü¶</a> <a id="61161" href="Demos.HSP.html#60700" class="Bound">p</a> <a id="61163" href="Demos.HSP.html#42627" class="Function Operator">‚üß</a> <a id="61165" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="61169" href="Function.Base.html#615" class="Function">id</a>    <a id="61175" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a> <a id="61178" href="Demos.HSP.html#60592" class="Bound">A‚ààModThK</a> <a id="61187" class="Symbol">{</a><a id="61188" class="Argument">p</a> <a id="61190" class="Symbol">=</a> <a id="61192" href="Demos.HSP.html#60700" class="Bound">p</a><a id="61193" class="Symbol">}</a> <a id="61195" class="Symbol">{</a><a id="61196" href="Demos.HSP.html#60704" class="Bound">q</a><a id="61197" class="Symbol">}</a> <a id="61199" href="Demos.HSP.html#60730" class="Function">lift-pq</a> <a id="61207" href="Function.Base.html#615" class="Function">id</a>  <a id="61211" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
    <a id="61217" href="Demos.HSP.html#42627" class="Function Operator">‚ü¶</a> <a id="61219" href="Demos.HSP.html#60704" class="Bound">q</a> <a id="61221" href="Demos.HSP.html#42627" class="Function Operator">‚üß</a> <a id="61223" href="Demos.HSP.html#6758" class="Field Operator">‚ü®$‚ü©</a> <a id="61227" href="Function.Base.html#615" class="Function">id</a>    <a id="61233" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a> <a id="61236" href="Demos.HSP.html#56575" class="Function">free-lift-interp</a> <a id="61253" class="Symbol">{</a><a id="61254" class="Argument">ùë®</a> <a id="61256" class="Symbol">=</a> <a id="61258" href="Demos.HSP.html#60286" class="Bound">ùë®</a><a id="61259" class="Symbol">}</a> <a id="61261" href="Function.Base.html#615" class="Function">id</a> <a id="61264" href="Demos.HSP.html#60704" class="Bound">q</a>    <a id="61269" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
    <a id="61275" href="Demos.HSP.html#55631" class="Function">free-lift</a> <a id="61285" href="Function.Base.html#615" class="Function">id</a> <a id="61288" href="Demos.HSP.html#60704" class="Bound">q</a>  <a id="61291" href="Relation.Binary.Reasoning.Base.Single.html#2555" class="Function Operator">‚àé</a>
     <a id="61298" class="Keyword">where</a> <a id="61304" class="Keyword">open</a> <a id="61309" href="Relation.Binary.Reasoning.Setoid.html" class="Module">SetoidReasoning</a> <a id="61325" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="61328" href="Demos.HSP.html#60286" class="Bound">ùë®</a> <a id="61330" href="Demos.HSP.html#19374" class="Function Operator">]</a> <a id="61332" class="Symbol">;</a> <a id="61334" class="Keyword">open</a> <a id="61339" href="Demos.HSP.html#42063" class="Module">Environment</a> <a id="61351" href="Demos.HSP.html#60286" class="Bound">ùë®</a> <a id="61353" class="Keyword">using</a> <a id="61359" class="Symbol">(</a> <a id="61361" href="Demos.HSP.html#42627" class="Function Operator">‚ü¶_‚üß</a> <a id="61365" class="Symbol">)</a>

  <a id="61370" href="Demos.HSP.html#61370" class="Function">isEpi</a> <a id="61376" class="Symbol">:</a> <a id="61378" href="Demos.HSP.html#27594" class="Record">IsEpi</a> <a id="61384" href="Demos.HSP.html#59143" class="Function Operator">ùîΩ[</a> <a id="61387" href="Demos.HSP.html#60514" class="Function">A</a> <a id="61389" href="Demos.HSP.html#59143" class="Function Operator">]</a> <a id="61391" href="Demos.HSP.html#60286" class="Bound">ùë®</a> <a id="61393" href="Demos.HSP.html#60622" class="Function">œÜ</a>
  <a id="61397" href="Demos.HSP.html#61370" class="Function">isEpi</a> <a id="61403" class="Symbol">=</a> <a id="61405" class="Keyword">record</a> <a id="61412" class="Symbol">{</a> <a id="61414" href="Demos.HSP.html#27665" class="Field">isHom</a> <a id="61420" class="Symbol">=</a> <a id="61422" href="Demos.HSP.html#26655" class="InductiveConstructor">mkhom</a> <a id="61428" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="61433" class="Symbol">;</a> <a id="61435" href="Demos.HSP.html#27690" class="Field">isSurjective</a> <a id="61448" class="Symbol">=</a> <a id="61450" href="Demos.HSP.html#10773" class="InductiveConstructor">eq</a> <a id="61453" class="Symbol">(</a><a id="61454" href="Demos.HSP.html#39808" class="InductiveConstructor">‚Ñä</a> <a id="61456" class="Symbol">_)</a> <a id="61459" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="61464" class="Symbol">}</a>

 <a id="61468" href="Demos.HSP.html#61468" class="Function">F-ModThV-epi</a> <a id="61481" class="Symbol">:</a> <a id="61483" href="Demos.HSP.html#60286" class="Bound">ùë®</a> <a id="61485" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="61487" href="Demos.HSP.html#48458" class="Function">Mod</a> <a id="61491" class="Symbol">(</a><a id="61492" href="Demos.HSP.html#48360" class="Function">Th</a> <a id="61495" class="Symbol">(</a><a id="61496" href="Demos.HSP.html#52828" class="Function">V</a> <a id="61498" href="Demos.HSP.html#60308" class="Bound">‚Ñì</a> <a id="61500" href="Demos.HSP.html#60395" class="Function">Œπ</a> <a id="61502" href="Demos.HSP.html#60324" class="Bound">ùí¶</a><a id="61503" class="Symbol">))</a> <a id="61506" class="Symbol">‚Üí</a> <a id="61508" href="Demos.HSP.html#27764" class="Function">epi</a> <a id="61512" href="Demos.HSP.html#59143" class="Function Operator">ùîΩ[</a> <a id="61515" href="Demos.HSP.html#60514" class="Function">A</a> <a id="61517" href="Demos.HSP.html#59143" class="Function Operator">]</a>  <a id="61520" href="Demos.HSP.html#60286" class="Bound">ùë®</a>
 <a id="61523" href="Demos.HSP.html#61468" class="Function">F-ModThV-epi</a> <a id="61536" href="Demos.HSP.html#61536" class="Bound">A‚ààModThVK</a> <a id="61546" class="Symbol">=</a> <a id="61548" href="Demos.HSP.html#60534" class="Function">F-ModTh-epi</a> <a id="61560" class="Symbol">Œª</a> <a id="61562" class="Symbol">{</a><a id="61563" href="Demos.HSP.html#61563" class="Bound">p</a><a id="61564" class="Symbol">}{</a><a id="61566" href="Demos.HSP.html#61566" class="Bound">q</a><a id="61567" class="Symbol">}</a> <a id="61569" class="Symbol">‚Üí</a> <a id="61571" href="Demos.HSP.html#61593" class="Function">Goal</a> <a id="61576" class="Symbol">{</a><a id="61577" href="Demos.HSP.html#61563" class="Bound">p</a><a id="61578" class="Symbol">}{</a><a id="61580" href="Demos.HSP.html#61566" class="Bound">q</a><a id="61581" class="Symbol">}</a>
  <a id="61585" class="Keyword">where</a>
  <a id="61593" href="Demos.HSP.html#61593" class="Function">Goal</a> <a id="61598" class="Symbol">:</a> <a id="61600" href="Demos.HSP.html#60286" class="Bound">ùë®</a> <a id="61602" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="61604" href="Demos.HSP.html#48458" class="Function">Mod</a> <a id="61608" class="Symbol">(</a><a id="61609" href="Demos.HSP.html#48360" class="Function">Th</a> <a id="61612" href="Demos.HSP.html#60324" class="Bound">ùí¶</a><a id="61613" class="Symbol">)</a>
  <a id="61617" href="Demos.HSP.html#61593" class="Function">Goal</a> <a id="61622" class="Symbol">{</a><a id="61623" href="Demos.HSP.html#61623" class="Bound">p</a><a id="61624" class="Symbol">}{</a><a id="61626" href="Demos.HSP.html#61626" class="Bound">q</a><a id="61627" class="Symbol">}</a> <a id="61629" href="Demos.HSP.html#61629" class="Bound">x</a> <a id="61631" href="Demos.HSP.html#61631" class="Bound">œÅ</a> <a id="61633" class="Symbol">=</a> <a id="61635" href="Demos.HSP.html#61536" class="Bound">A‚ààModThVK</a><a id="61644" class="Symbol">{</a><a id="61645" href="Demos.HSP.html#61623" class="Bound">p</a><a id="61646" class="Symbol">}{</a><a id="61648" href="Demos.HSP.html#61626" class="Bound">q</a><a id="61649" class="Symbol">}</a> <a id="61651" class="Symbol">(</a><a id="61652" href="Demos.HSP.html#54563" class="Function">V-id1</a> <a id="61658" href="Demos.HSP.html#60308" class="Bound">‚Ñì</a> <a id="61660" class="Symbol">{</a><a id="61661" class="Argument">p</a> <a id="61663" class="Symbol">=</a> <a id="61665" href="Demos.HSP.html#61623" class="Bound">p</a><a id="61666" class="Symbol">}{</a><a id="61668" href="Demos.HSP.html#61626" class="Bound">q</a><a id="61669" class="Symbol">}</a> <a id="61671" href="Demos.HSP.html#61629" class="Bound">x</a><a id="61672" class="Symbol">)</a> <a id="61674" href="Demos.HSP.html#61631" class="Bound">œÅ</a>

</pre>
Actually, we will need the following lifted version of this result.

<pre class="Agda">

 <a id="61772" href="Demos.HSP.html#61772" class="Function">F-ModTh-epi-lift</a> <a id="61789" class="Symbol">:</a> <a id="61791" href="Demos.HSP.html#60286" class="Bound">ùë®</a> <a id="61793" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="61795" href="Demos.HSP.html#48458" class="Function">Mod</a> <a id="61799" class="Symbol">(</a><a id="61800" href="Demos.HSP.html#48360" class="Function">Th</a> <a id="61803" class="Symbol">(</a><a id="61804" href="Demos.HSP.html#52828" class="Function">V</a> <a id="61806" href="Demos.HSP.html#60308" class="Bound">‚Ñì</a> <a id="61808" href="Demos.HSP.html#60395" class="Function">Œπ</a> <a id="61810" href="Demos.HSP.html#60324" class="Bound">ùí¶</a><a id="61811" class="Symbol">))</a> <a id="61814" class="Symbol">‚Üí</a> <a id="61816" href="Demos.HSP.html#27764" class="Function">epi</a> <a id="61820" href="Demos.HSP.html#59143" class="Function Operator">ùîΩ[</a> <a id="61823" href="Demos.HSP.html#60514" class="Function">A</a> <a id="61825" href="Demos.HSP.html#59143" class="Function Operator">]</a> <a id="61827" class="Symbol">(</a><a id="61828" href="Demos.HSP.html#22505" class="Function">Lift-Alg</a> <a id="61837" href="Demos.HSP.html#60286" class="Bound">ùë®</a> <a id="61839" href="Demos.HSP.html#60395" class="Function">Œπ</a> <a id="61841" href="Demos.HSP.html#60395" class="Function">Œπ</a><a id="61842" class="Symbol">)</a>
 <a id="61845" href="Demos.HSP.html#61772" class="Function">F-ModTh-epi-lift</a> <a id="61862" href="Demos.HSP.html#61862" class="Bound">A‚ààModThK</a> <a id="61871" class="Symbol">=</a> <a id="61873" href="Demos.HSP.html#29264" class="Function">‚àò-epi</a> <a id="61879" class="Symbol">(</a><a id="61880" href="Demos.HSP.html#61468" class="Function">F-ModThV-epi</a> <a id="61893" class="Symbol">Œª</a> <a id="61895" class="Symbol">{</a><a id="61896" href="Demos.HSP.html#61896" class="Bound">p</a> <a id="61898" href="Demos.HSP.html#61898" class="Bound">q</a><a id="61899" class="Symbol">}</a> <a id="61901" class="Symbol">‚Üí</a> <a id="61903" href="Demos.HSP.html#61862" class="Bound">A‚ààModThK</a><a id="61911" class="Symbol">{</a><a id="61912" class="Argument">p</a> <a id="61914" class="Symbol">=</a> <a id="61916" href="Demos.HSP.html#61896" class="Bound">p</a><a id="61917" class="Symbol">}{</a><a id="61919" href="Demos.HSP.html#61898" class="Bound">q</a><a id="61920" class="Symbol">}</a> <a id="61922" class="Symbol">)</a> <a id="61924" href="Demos.HSP.html#31259" class="Function">ToLift-epi</a>
</pre>


Birkhoff's Variety Theorem
==========================

Let `ùí¶` be a class of algebras and recall that `ùí¶` is a *variety* provided
it is closed under homomorphisms, subalgebras and products; equivalently,
`V ùí¶ ‚äÜ ùí¶`.
(Observe that `ùí¶ ‚äÜ V ùí¶` holds for all `ùí¶` since `V` is a closure operator.)
We call `ùí¶` an *equational class* if it is the class of all models of some set of identities.

Birkhoff's variety theorem, also known as the HSP theorem, asserts that `ùí¶` is an equational class if and only if it is a variety.  In this section, we present the statement and proof of this theorem---first in a style similar to what one finds in textbooks (e.g.,¬†[@Bergman:2012 Theorem 4.41]), and then formally in the language of [MLTT][].


#### <a id="informal-proof">Informal proof</a>

(‚áí) *Every equational class is a variety*. Indeed, suppose `ùí¶` is an equational class axiomatized by term identities `‚Ñ∞`; that is, `ùë® ‚àà ùí¶` iff `ùë® ‚ä® ‚Ñ∞`. Since the classes `H ùí¶`, `S ùí¶`, `P ùí¶` and `ùí¶` all satisfy the same set of equations, we have `V ùí¶ ‚ä´ p ‚âà q` for all `(p , q) ‚àà ‚Ñ∞`, so `V ùí¶ ‚äÜ ùí¶`.

(‚áê) *Every variety is an equational class*.[^10] Let `ùí¶` be an arbitrary variety.  We will describe a set of equations that axiomatizes `ùí¶`.  A natural choice is to take `Th ùí¶` and try to prove that `ùí¶ = Mod (Th ùí¶)`. Clearly, `ùí¶ ‚äÜ Mod (Th ùí¶)`.  To prove the converse inclusion, let `ùë® ‚àà Mod (Th ùí¶)`. It suffices to find an algebra `ùë≠ ‚àà S (P ùí¶)` such that `ùë®` is a homomorphic image of `ùë≠`, as this will show that `ùë® ‚àà H (S (P ùí¶)) = ùí¶`.

Let `X` be such that there exists a surjective environment `œÅ : X ‚Üí ùïå[ ùë® ]`.[^11]
By the `lift-hom` lemma, there is an epimorphism `h : ùëª X ‚Üí ùïå[ ùë® ]` that extends `œÅ`. Put  `ùîΩ[ X ] := ùëª X / ‚âà` and let `g : ùëª X  ‚Üí ùîΩ[ X ]` be the natural epimorphism with kernel `‚âà`. We claim `ker g ‚äÜ ker h`. 
If the claim is true, then there is a map `f : ùîΩ[ X ] ‚Üí ùë®` such that `f ‚àò g = h`, and since `h`
is surjective so is `f`. Therefore, `ùë® ‚àà ùñß (ùîΩ[ X ]) ‚äÜ Mod (Th ùí¶)` completing the proof.

It remains to prove the claim `ker g ‚äÜ ker h`. Let `u`, `v` be terms and assume `g u = g v`. Since `ùëª X` is generated by `X`, there are terms `p`, `q` such that `u = ‚ü¶ ùëª X ‚üß p` and `v = ‚ü¶ ùëª X ‚üß q`.[^12]
Therefore, `‚ü¶ ùîΩ[ X ] ‚üß p = g (‚ü¶ ùëª X ‚üß p) = g u = g v = g (‚ü¶ ùëª X ‚üß q) = ‚ü¶ ùîΩ[ X ]‚üß q`,
so `ùí¶ ‚ä´ p ‚âà q`; thus, `(p , q) ‚àà Th ùí¶`. Since `ùë® ‚àà Mod (Th ùí¶)`, we obtain `ùë® ‚äß p ‚âà q`, which implies
that `h u = (‚ü¶ ùë® ‚üß p) ‚ü®$‚ü© œÅ = (‚ü¶ ùë® ‚üß q) ‚ü®$‚ü© œÅ = h v`, as desired.

#### <a id="formal-proof">Formal proof</a>

(‚áí) *Every equational class is a variety*.
We need an arbitrary equational class, which we obtain by starting with an arbitrary collection `‚Ñ∞` of equations and then defining `ùí¶ = Mod ‚Ñ∞`, the class axiomatized by `‚Ñ∞`. We prove that `ùí¶` is a variety by showing that `ùí¶ = V ùí¶`. The inclusion `ùí¶ ‚äÜ V ùí¶`, which holds for all classes `ùí¶`, is called the *expansive* property of `V`.

<pre class="Agda">

<a id="64829" class="Keyword">module</a> <a id="64836" href="Demos.HSP.html#64836" class="Module">_</a> <a id="64838" class="Symbol">(</a><a id="64839" href="Demos.HSP.html#64839" class="Bound">ùí¶</a> <a id="64841" class="Symbol">:</a> <a id="64843" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="64847" class="Symbol">(</a><a id="64848" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="64856" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="64858" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a><a id="64860" class="Symbol">)</a> <a id="64862" class="Symbol">(</a><a id="64863" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="64865" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="64867" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a> <a id="64870" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="64872" href="Demos.HSP.html#34906" class="Function">ov</a> <a id="64875" href="Demos.HSP.html#7614" class="Generalizable">‚Ñì</a><a id="64876" class="Symbol">))</a> <a id="64879" class="Keyword">where</a>
 <a id="64886" href="Demos.HSP.html#64886" class="Function">V-expa</a> <a id="64893" class="Symbol">:</a> <a id="64895" href="Demos.HSP.html#64839" class="Bound">ùí¶</a> <a id="64897" href="Relation.Unary.html#1742" class="Function Operator">‚äÜ</a> <a id="64899" href="Demos.HSP.html#52828" class="Function">V</a> <a id="64901" href="Demos.HSP.html#64875" class="Bound">‚Ñì</a> <a id="64903" class="Symbol">(</a><a id="64904" href="Demos.HSP.html#34906" class="Function">ov</a> <a id="64907" class="Symbol">(</a><a id="64908" href="Demos.HSP.html#64856" class="Bound">Œ±</a> <a id="64910" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="64912" href="Demos.HSP.html#64858" class="Bound">œÅ·µÉ</a> <a id="64915" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="64917" href="Demos.HSP.html#64875" class="Bound">‚Ñì</a><a id="64918" class="Symbol">))</a> <a id="64921" href="Demos.HSP.html#64839" class="Bound">ùí¶</a>
 <a id="64924" href="Demos.HSP.html#64886" class="Function">V-expa</a> <a id="64931" class="Symbol">{</a><a id="64932" class="Argument">x</a> <a id="64934" class="Symbol">=</a> <a id="64936" href="Demos.HSP.html#64936" class="Bound">ùë®</a><a id="64937" class="Symbol">}</a><a id="64938" href="Demos.HSP.html#64938" class="Bound">kA</a> <a id="64941" class="Symbol">=</a> <a id="64943" href="Demos.HSP.html#64936" class="Bound">ùë®</a> <a id="64945" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="64947" class="Symbol">(</a><a id="64948" href="Demos.HSP.html#64936" class="Bound">ùë®</a> <a id="64950" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="64952" class="Symbol">(</a><a id="64953" href="Data.Unit.Polymorphic.Base.html#480" class="Function">‚ä§</a> <a id="64955" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="64957" class="Symbol">(Œª</a> <a id="64960" href="Demos.HSP.html#64960" class="Bound">_</a> <a id="64962" class="Symbol">‚Üí</a> <a id="64964" href="Demos.HSP.html#64936" class="Bound">ùë®</a><a id="64965" class="Symbol">)</a><a id="64966" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="64968" class="Symbol">(Œª</a> <a id="64971" href="Demos.HSP.html#64971" class="Bound">_</a> <a id="64973" class="Symbol">‚Üí</a> <a id="64975" href="Demos.HSP.html#64938" class="Bound">kA</a><a id="64977" class="Symbol">)</a><a id="64978" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="64980" href="Demos.HSP.html#65342" class="Function">Goal</a><a id="64984" class="Symbol">)</a><a id="64985" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="64987" href="Demos.HSP.html#37991" class="Function">‚â§-reflexive</a><a id="64998" class="Symbol">)</a><a id="64999" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="65001" href="Demos.HSP.html#35122" class="Function">IdHomImage</a>
  <a id="65014" class="Keyword">where</a>
  <a id="65022" class="Keyword">open</a> <a id="65027" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="65034" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="65037" href="Demos.HSP.html#64936" class="Bound">ùë®</a> <a id="65039" href="Demos.HSP.html#19374" class="Function Operator">]</a>            <a id="65052" class="Keyword">using</a> <a id="65058" class="Symbol">(</a> <a id="65060" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="65065" class="Symbol">)</a>
  <a id="65069" class="Keyword">open</a> <a id="65074" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="65081" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="65084" href="Demos.HSP.html#24332" class="Function">‚®Ö</a> <a id="65086" class="Symbol">(Œª</a> <a id="65089" href="Demos.HSP.html#65089" class="Bound">_</a> <a id="65091" class="Symbol">‚Üí</a> <a id="65093" href="Demos.HSP.html#64936" class="Bound">ùë®</a><a id="65094" class="Symbol">)</a> <a id="65096" href="Demos.HSP.html#19374" class="Function Operator">]</a>  <a id="65099" class="Keyword">using</a> <a id="65105" class="Symbol">()</a> <a id="65108" class="Keyword">renaming</a> <a id="65117" class="Symbol">(</a> <a id="65119" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="65124" class="Symbol">to</a> <a id="65127" class="Function">refl‚®Ö</a> <a id="65133" class="Symbol">)</a>
  <a id="65137" href="Demos.HSP.html#65137" class="Function">to‚®Ö</a>    <a id="65144" class="Symbol">:</a> <a id="65146" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="65149" href="Demos.HSP.html#64936" class="Bound">ùë®</a> <a id="65151" href="Demos.HSP.html#19374" class="Function Operator">]</a>            <a id="65164" href="Demos.HSP.html#6656" class="Record Operator">‚ü∂</a> <a id="65166" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="65169" href="Demos.HSP.html#24332" class="Function">‚®Ö</a> <a id="65171" class="Symbol">(Œª</a> <a id="65174" href="Demos.HSP.html#65174" class="Bound">_</a> <a id="65176" class="Symbol">‚Üí</a> <a id="65178" href="Demos.HSP.html#64936" class="Bound">ùë®</a><a id="65179" class="Symbol">)</a> <a id="65181" href="Demos.HSP.html#19374" class="Function Operator">]</a>
  <a id="65185" href="Demos.HSP.html#65137" class="Function">to‚®Ö</a>    <a id="65192" class="Symbol">=</a> <a id="65194" class="Keyword">record</a> <a id="65201" class="Symbol">{</a> <a id="65203" href="Function.Bundles.html#1919" class="Field">f</a> <a id="65205" class="Symbol">=</a> <a id="65207" class="Symbol">Œª</a> <a id="65209" href="Demos.HSP.html#65209" class="Bound">x</a> <a id="65211" href="Demos.HSP.html#65211" class="Bound">_</a> <a id="65213" class="Symbol">‚Üí</a> <a id="65215" href="Demos.HSP.html#65209" class="Bound">x</a>   <a id="65219" class="Symbol">;</a> <a id="65221" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="65226" class="Symbol">=</a> <a id="65228" class="Symbol">Œª</a> <a id="65230" href="Demos.HSP.html#65230" class="Bound">xy</a> <a id="65233" href="Demos.HSP.html#65233" class="Bound">_</a> <a id="65235" class="Symbol">‚Üí</a> <a id="65237" href="Demos.HSP.html#65230" class="Bound">xy</a> <a id="65240" class="Symbol">}</a>
  <a id="65244" href="Demos.HSP.html#65244" class="Function">from‚®Ö</a>  <a id="65251" class="Symbol">:</a> <a id="65253" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="65256" href="Demos.HSP.html#24332" class="Function">‚®Ö</a> <a id="65258" class="Symbol">(Œª</a> <a id="65261" href="Demos.HSP.html#65261" class="Bound">_</a> <a id="65263" class="Symbol">‚Üí</a> <a id="65265" href="Demos.HSP.html#64936" class="Bound">ùë®</a><a id="65266" class="Symbol">)</a> <a id="65268" href="Demos.HSP.html#19374" class="Function Operator">]</a>  <a id="65271" href="Demos.HSP.html#6656" class="Record Operator">‚ü∂</a> <a id="65273" href="Demos.HSP.html#19374" class="Function Operator">ùîª[</a> <a id="65276" href="Demos.HSP.html#64936" class="Bound">ùë®</a> <a id="65278" href="Demos.HSP.html#19374" class="Function Operator">]</a>
  <a id="65282" href="Demos.HSP.html#65244" class="Function">from‚®Ö</a>  <a id="65289" class="Symbol">=</a> <a id="65291" class="Keyword">record</a> <a id="65298" class="Symbol">{</a> <a id="65300" href="Function.Bundles.html#1919" class="Field">f</a> <a id="65302" class="Symbol">=</a> <a id="65304" class="Symbol">Œª</a> <a id="65306" href="Demos.HSP.html#65306" class="Bound">x</a> <a id="65308" class="Symbol">‚Üí</a> <a id="65310" href="Demos.HSP.html#65306" class="Bound">x</a> <a id="65312" href="Data.Unit.Polymorphic.Base.html#524" class="Function">tt</a>  <a id="65316" class="Symbol">;</a> <a id="65318" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="65323" class="Symbol">=</a> <a id="65325" class="Symbol">Œª</a> <a id="65327" href="Demos.HSP.html#65327" class="Bound">xy</a> <a id="65330" class="Symbol">‚Üí</a> <a id="65332" href="Demos.HSP.html#65327" class="Bound">xy</a> <a id="65335" href="Data.Unit.Polymorphic.Base.html#524" class="Function">tt</a> <a id="65338" class="Symbol">}</a>
  <a id="65342" href="Demos.HSP.html#65342" class="Function">Goal</a>   <a id="65349" class="Symbol">:</a> <a id="65351" href="Demos.HSP.html#64936" class="Bound">ùë®</a> <a id="65353" href="Demos.HSP.html#32954" class="Record Operator">‚âÖ</a> <a id="65355" href="Demos.HSP.html#24332" class="Function">‚®Ö</a> <a id="65357" class="Symbol">(Œª</a> <a id="65360" href="Demos.HSP.html#65360" class="Bound">x</a> <a id="65362" class="Symbol">‚Üí</a> <a id="65364" href="Demos.HSP.html#64936" class="Bound">ùë®</a><a id="65365" class="Symbol">)</a>
  <a id="65369" href="Demos.HSP.html#65342" class="Function">Goal</a>   <a id="65376" class="Symbol">=</a> <a id="65378" href="Demos.HSP.html#33013" class="InductiveConstructor">mkiso</a> <a id="65384" class="Symbol">(</a><a id="65385" href="Demos.HSP.html#65137" class="Function">to‚®Ö</a> <a id="65389" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="65391" href="Demos.HSP.html#26655" class="InductiveConstructor">mkhom</a> <a id="65397" href="Demos.HSP.html#65127" class="Function">refl‚®Ö</a><a id="65402" class="Symbol">)</a> <a id="65404" class="Symbol">(</a><a id="65405" href="Demos.HSP.html#65244" class="Function">from‚®Ö</a> <a id="65411" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="65413" href="Demos.HSP.html#26655" class="InductiveConstructor">mkhom</a> <a id="65419" href="Relation.Binary.Structures.html#1568" class="Function">refl</a><a id="65423" class="Symbol">)</a> <a id="65425" class="Symbol">(Œª</a> <a id="65428" href="Demos.HSP.html#65428" class="Bound">_</a> <a id="65430" href="Demos.HSP.html#65430" class="Bound">_</a> <a id="65432" class="Symbol">‚Üí</a> <a id="65434" href="Relation.Binary.Structures.html#1568" class="Function">refl</a><a id="65438" class="Symbol">)</a> <a id="65440" class="Symbol">(Œª</a> <a id="65443" href="Demos.HSP.html#65443" class="Bound">_</a> <a id="65445" class="Symbol">‚Üí</a> <a id="65447" href="Relation.Binary.Structures.html#1568" class="Function">refl</a><a id="65451" class="Symbol">)</a>

</pre>
Observe how `ùë®` is expressed as (isomorphic to) a product with just one factor (itself), that is, the product
`‚®Ö (Œª x ‚Üí ùë®)` indexed over the one-element type `‚ä§`.

For the inclusion `V ùí¶ ‚äÜ ùí¶`, recall lemma `V-id1` which asserts that `ùí¶ ‚ä´ p ‚âà q` implies
`V ‚Ñì Œπ ùí¶ ‚ä´ p ‚âà q`; whence, if `ùí¶` is an equational class, then `V ùí¶ ‚äÜ ùí¶`, as we now confirm.

<pre class="Agda">

<a id="65826" class="Keyword">module</a> <a id="65833" href="Demos.HSP.html#65833" class="Module">_</a> <a id="65835" class="Symbol">{</a><a id="65836" href="Demos.HSP.html#65836" class="Bound">‚Ñì</a> <a id="65838" class="Symbol">:</a> <a id="65840" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="65845" class="Symbol">}{</a><a id="65847" href="Demos.HSP.html#65847" class="Bound">X</a> <a id="65849" class="Symbol">:</a> <a id="65851" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="65856" href="Demos.HSP.html#65836" class="Bound">‚Ñì</a><a id="65857" class="Symbol">}{</a><a id="65859" href="Demos.HSP.html#65859" class="Bound">‚Ñ∞</a> <a id="65861" class="Symbol">:</a> <a id="65863" class="Symbol">{</a><a id="65864" href="Demos.HSP.html#65864" class="Bound">Y</a> <a id="65866" class="Symbol">:</a> <a id="65868" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="65873" href="Demos.HSP.html#65836" class="Bound">‚Ñì</a><a id="65874" class="Symbol">}</a> <a id="65876" class="Symbol">‚Üí</a> <a id="65878" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="65883" class="Symbol">(</a><a id="65884" href="Demos.HSP.html#39768" class="Datatype">Term</a> <a id="65889" href="Demos.HSP.html#65864" class="Bound">Y</a> <a id="65891" href="Data.Product.html#1167" class="Function Operator">√ó</a> <a id="65893" href="Demos.HSP.html#39768" class="Datatype">Term</a> <a id="65898" href="Demos.HSP.html#65864" class="Bound">Y</a><a id="65899" class="Symbol">)</a> <a id="65901" class="Symbol">(</a><a id="65902" href="Demos.HSP.html#34906" class="Function">ov</a> <a id="65905" href="Demos.HSP.html#65836" class="Bound">‚Ñì</a><a id="65906" class="Symbol">)}</a> <a id="65909" class="Keyword">where</a>
 <a id="65916" class="Keyword">private</a> <a id="65924" href="Demos.HSP.html#65924" class="Function">ùí¶</a> <a id="65926" class="Symbol">=</a> <a id="65928" href="Demos.HSP.html#48458" class="Function">Mod</a><a id="65931" class="Symbol">{</a><a id="65932" class="Argument">Œ±</a> <a id="65934" class="Symbol">=</a> <a id="65936" href="Demos.HSP.html#65836" class="Bound">‚Ñì</a><a id="65937" class="Symbol">}{</a><a id="65939" href="Demos.HSP.html#65836" class="Bound">‚Ñì</a><a id="65940" class="Symbol">}{</a><a id="65942" href="Demos.HSP.html#65847" class="Bound">X</a><a id="65943" class="Symbol">}</a> <a id="65945" href="Demos.HSP.html#65859" class="Bound">‚Ñ∞</a>     <a id="65951" class="Comment">-- an arbitrary equational class</a>

 <a id="65986" href="Demos.HSP.html#65986" class="Function">EqCl‚áíVar</a> <a id="65995" class="Symbol">:</a> <a id="65997" href="Demos.HSP.html#52828" class="Function">V</a> <a id="65999" href="Demos.HSP.html#65836" class="Bound">‚Ñì</a> <a id="66001" class="Symbol">(</a><a id="66002" href="Demos.HSP.html#34906" class="Function">ov</a> <a id="66005" href="Demos.HSP.html#65836" class="Bound">‚Ñì</a><a id="66006" class="Symbol">)</a> <a id="66008" href="Demos.HSP.html#65924" class="Function">ùí¶</a> <a id="66010" href="Relation.Unary.html#1742" class="Function Operator">‚äÜ</a> <a id="66012" href="Demos.HSP.html#65924" class="Function">ùí¶</a>
 <a id="66015" href="Demos.HSP.html#65986" class="Function">EqCl‚áíVar</a> <a id="66024" class="Symbol">{</a><a id="66025" href="Demos.HSP.html#66025" class="Bound">ùë®</a><a id="66026" class="Symbol">}</a> <a id="66028" href="Demos.HSP.html#66028" class="Bound">vA</a> <a id="66031" class="Symbol">{</a><a id="66032" href="Demos.HSP.html#66032" class="Bound">p</a><a id="66033" class="Symbol">}</a> <a id="66035" class="Symbol">{</a><a id="66036" href="Demos.HSP.html#66036" class="Bound">q</a><a id="66037" class="Symbol">}</a> <a id="66039" href="Demos.HSP.html#66039" class="Bound">p‚Ñ∞q</a> <a id="66043" href="Demos.HSP.html#66043" class="Bound">œÅ</a> <a id="66045" class="Symbol">=</a> <a id="66047" href="Demos.HSP.html#54563" class="Function">V-id1</a> <a id="66053" href="Demos.HSP.html#65836" class="Bound">‚Ñì</a> <a id="66055" class="Symbol">{</a><a id="66056" href="Demos.HSP.html#65924" class="Function">ùí¶</a><a id="66057" class="Symbol">}</a> <a id="66059" class="Symbol">{</a><a id="66060" href="Demos.HSP.html#66032" class="Bound">p</a><a id="66061" class="Symbol">}</a> <a id="66063" class="Symbol">{</a><a id="66064" href="Demos.HSP.html#66036" class="Bound">q</a><a id="66065" class="Symbol">}</a> <a id="66067" class="Symbol">(Œª</a> <a id="66070" href="Demos.HSP.html#66070" class="Bound">_</a> <a id="66072" href="Demos.HSP.html#66072" class="Bound">x</a> <a id="66074" href="Demos.HSP.html#66074" class="Bound">œÑ</a> <a id="66076" class="Symbol">‚Üí</a> <a id="66078" href="Demos.HSP.html#66072" class="Bound">x</a> <a id="66080" href="Demos.HSP.html#66039" class="Bound">p‚Ñ∞q</a> <a id="66084" href="Demos.HSP.html#66074" class="Bound">œÑ</a><a id="66085" class="Symbol">)</a> <a id="66087" href="Demos.HSP.html#66025" class="Bound">ùë®</a> <a id="66089" href="Demos.HSP.html#66028" class="Bound">vA</a> <a id="66092" href="Demos.HSP.html#66043" class="Bound">œÅ</a>

</pre>
By `V-expa` and `Eqcl‚áíVar`, every equational class is a variety.

(‚áê) *Every variety is an equational class*.
To fix an arbitrary variety, start with an arbitrary class `ùí¶` of `ùëÜ`-algebras and take the *varietal closure*, `V ùí¶`. We prove that `V ùí¶` is precisely the collection of algebras that model `Th (V ùí¶)`; that is, `V ùí¶ = Mod (Th (V ùí¶))`.  The inclusion `V ùí¶ ‚äÜ Mod (Th (V ùí¶))` is a consequence of the fact that `Mod Th` is a closure operator.

<pre class="Agda">

<a id="66570" class="Keyword">module</a> <a id="66577" href="Demos.HSP.html#66577" class="Module">_</a> <a id="66579" class="Symbol">(</a><a id="66580" href="Demos.HSP.html#66580" class="Bound">ùí¶</a> <a id="66582" class="Symbol">:</a> <a id="66584" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="66588" class="Symbol">(</a><a id="66589" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="66597" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="66599" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a><a id="66601" class="Symbol">)</a> <a id="66603" class="Symbol">(</a><a id="66604" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="66606" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="66608" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a> <a id="66611" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="66613" href="Demos.HSP.html#34906" class="Function">ov</a> <a id="66616" href="Demos.HSP.html#7614" class="Generalizable">‚Ñì</a><a id="66617" class="Symbol">)){</a><a id="66620" href="Demos.HSP.html#66620" class="Bound">X</a> <a id="66622" class="Symbol">:</a> <a id="66624" href="Demos.HSP.html#6391" class="Primitive">Type</a> <a id="66629" class="Symbol">(</a><a id="66630" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="66632" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="66634" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a> <a id="66637" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="66639" href="Demos.HSP.html#7614" class="Generalizable">‚Ñì</a><a id="66640" class="Symbol">)}</a> <a id="66643" class="Keyword">where</a>
 <a id="66650" class="Keyword">private</a> <a id="66658" href="Demos.HSP.html#66658" class="Function">c</a> <a id="66660" class="Symbol">=</a> <a id="66662" href="Demos.HSP.html#66597" class="Bound">Œ±</a> <a id="66664" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="66666" href="Demos.HSP.html#66599" class="Bound">œÅ·µÉ</a> <a id="66669" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="66671" href="Demos.HSP.html#66616" class="Bound">‚Ñì</a> <a id="66673" class="Symbol">;</a> <a id="66675" href="Demos.HSP.html#66675" class="Function">Œπ</a> <a id="66677" class="Symbol">=</a> <a id="66679" href="Demos.HSP.html#34906" class="Function">ov</a> <a id="66682" href="Demos.HSP.html#66658" class="Function">c</a>

 <a id="66686" href="Demos.HSP.html#66686" class="Function">ModTh-closure</a> <a id="66700" class="Symbol">:</a> <a id="66702" href="Demos.HSP.html#52828" class="Function">V</a><a id="66703" class="Symbol">{</a><a id="66704" class="Argument">Œ≤</a> <a id="66706" class="Symbol">=</a> <a id="66708" href="Demos.HSP.html#7595" class="Generalizable">Œ≤</a><a id="66709" class="Symbol">}{</a><a id="66711" href="Demos.HSP.html#7597" class="Generalizable">œÅ·µá</a><a id="66713" class="Symbol">}{</a><a id="66715" href="Demos.HSP.html#7600" class="Generalizable">Œ≥</a><a id="66716" class="Symbol">}{</a><a id="66718" href="Demos.HSP.html#7602" class="Generalizable">œÅ·∂ú</a><a id="66720" class="Symbol">}{</a><a id="66722" href="Demos.HSP.html#7605" class="Generalizable">Œ¥</a><a id="66723" class="Symbol">}{</a><a id="66725" href="Demos.HSP.html#7607" class="Generalizable">œÅ·µà</a><a id="66727" class="Symbol">}</a> <a id="66729" href="Demos.HSP.html#66616" class="Bound">‚Ñì</a> <a id="66731" href="Demos.HSP.html#66675" class="Function">Œπ</a> <a id="66733" href="Demos.HSP.html#66580" class="Bound">ùí¶</a> <a id="66735" href="Relation.Unary.html#1742" class="Function Operator">‚äÜ</a> <a id="66737" href="Demos.HSP.html#48458" class="Function">Mod</a><a id="66740" class="Symbol">{</a><a id="66741" class="Argument">X</a> <a id="66743" class="Symbol">=</a> <a id="66745" href="Demos.HSP.html#66620" class="Bound">X</a><a id="66746" class="Symbol">}</a> <a id="66748" class="Symbol">(</a><a id="66749" href="Demos.HSP.html#48360" class="Function">Th</a> <a id="66752" class="Symbol">(</a><a id="66753" href="Demos.HSP.html#52828" class="Function">V</a> <a id="66755" href="Demos.HSP.html#66616" class="Bound">‚Ñì</a> <a id="66757" href="Demos.HSP.html#66675" class="Function">Œπ</a> <a id="66759" href="Demos.HSP.html#66580" class="Bound">ùí¶</a><a id="66760" class="Symbol">))</a>
 <a id="66764" href="Demos.HSP.html#66686" class="Function">ModTh-closure</a> <a id="66778" class="Symbol">{</a><a id="66779" class="Argument">x</a> <a id="66781" class="Symbol">=</a> <a id="66783" href="Demos.HSP.html#66783" class="Bound">ùë®</a><a id="66784" class="Symbol">}</a> <a id="66786" href="Demos.HSP.html#66786" class="Bound">vA</a> <a id="66789" class="Symbol">{</a><a id="66790" href="Demos.HSP.html#66790" class="Bound">p</a><a id="66791" class="Symbol">}</a> <a id="66793" class="Symbol">{</a><a id="66794" href="Demos.HSP.html#66794" class="Bound">q</a><a id="66795" class="Symbol">}</a> <a id="66797" href="Demos.HSP.html#66797" class="Bound">x</a> <a id="66799" href="Demos.HSP.html#66799" class="Bound">œÅ</a> <a id="66801" class="Symbol">=</a> <a id="66803" href="Demos.HSP.html#66797" class="Bound">x</a> <a id="66805" href="Demos.HSP.html#66783" class="Bound">ùë®</a> <a id="66807" href="Demos.HSP.html#66786" class="Bound">vA</a> <a id="66810" href="Demos.HSP.html#66799" class="Bound">œÅ</a>

</pre>

Our proof of the inclusion `Mod( Th( V ùí¶)) ‚äÜ V ùí¶` is carried out in two steps.

* Prove  `ùîΩ[ X ] ‚â§ ùë™ X`.
* Prove that every algebra in `Mod (Th (V ùí¶))` is a homomorphic image of `ùîΩ[ X ]`.

From the first item we have `ùîΩ[ X ] ‚àà S( P ùí¶))`, since `ùë™ X` is a product of algebras in `ùí¶`. From this and the second item will follow `Mod (Th (V ùí¶)) ‚äÜ H (S (P ùí¶))` (= `V ùí¶`), as desired.

To prove `ùîΩ[ X ] ‚â§ ùë™ X`, we construct a homomorphism from `ùîΩ[ X ]` to `ùë™ X` and then show it is injective,
so `ùîΩ[ X ]` is (isomorphic to) a subalgebra of `ùë™ X`.

<pre class="Agda">

 <a id="67382" class="Keyword">open</a> <a id="67387" href="Demos.HSP.html#59551" class="Module">FreeHom</a> <a id="67395" class="Symbol">{</a><a id="67396" class="Argument">‚Ñì</a> <a id="67398" class="Symbol">=</a> <a id="67400" href="Demos.HSP.html#66616" class="Bound">‚Ñì</a><a id="67401" class="Symbol">}{</a><a id="67403" href="Demos.HSP.html#66580" class="Bound">ùí¶</a><a id="67404" class="Symbol">}</a>
 <a id="67407" class="Keyword">open</a> <a id="67412" href="Demos.HSP.html#58690" class="Module">FreeAlgebra</a> <a id="67424" href="Demos.HSP.html#66580" class="Bound">ùí¶</a> <a id="67426" class="Keyword">using</a> <a id="67432" class="Symbol">(</a><a id="67433" href="Demos.HSP.html#59053" class="Function">homC</a> <a id="67438" class="Symbol">;</a>  <a id="67441" href="Demos.HSP.html#59143" class="Function Operator">ùîΩ[_]</a> <a id="67446" class="Symbol">;</a> <a id="67448" href="Demos.HSP.html#58864" class="Function">ùë™</a> <a id="67450" class="Symbol">)</a>
 <a id="67453" href="Demos.HSP.html#67453" class="Function">homFC</a> <a id="67459" class="Symbol">:</a> <a id="67461" href="Demos.HSP.html#26708" class="Function">hom</a> <a id="67465" href="Demos.HSP.html#59143" class="Function Operator">ùîΩ[</a> <a id="67468" href="Demos.HSP.html#66620" class="Bound">X</a> <a id="67470" href="Demos.HSP.html#59143" class="Function Operator">]</a> <a id="67472" class="Symbol">(</a><a id="67473" href="Demos.HSP.html#58864" class="Function">ùë™</a> <a id="67475" href="Demos.HSP.html#66620" class="Bound">X</a><a id="67476" class="Symbol">)</a>
 <a id="67479" href="Demos.HSP.html#67453" class="Function">homFC</a> <a id="67485" class="Symbol">=</a> <a id="67487" href="Demos.HSP.html#36712" class="Function">fromHomIm</a> <a id="67497" class="Symbol">(</a><a id="67498" href="Demos.HSP.html#59053" class="Function">homC</a> <a id="67503" href="Demos.HSP.html#66620" class="Bound">X</a><a id="67504" class="Symbol">)</a>

 <a id="67508" href="Demos.HSP.html#67508" class="Function">monFC</a> <a id="67514" class="Symbol">:</a> <a id="67516" href="Demos.HSP.html#27337" class="Function">mon</a> <a id="67520" href="Demos.HSP.html#59143" class="Function Operator">ùîΩ[</a> <a id="67523" href="Demos.HSP.html#66620" class="Bound">X</a> <a id="67525" href="Demos.HSP.html#59143" class="Function Operator">]</a> <a id="67527" class="Symbol">(</a><a id="67528" href="Demos.HSP.html#58864" class="Function">ùë™</a> <a id="67530" href="Demos.HSP.html#66620" class="Bound">X</a><a id="67531" class="Symbol">)</a>
 <a id="67534" href="Demos.HSP.html#67508" class="Function">monFC</a> <a id="67540" class="Symbol">=</a> <a id="67542" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="67544" href="Demos.HSP.html#67453" class="Function">homFC</a> <a id="67550" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="67552" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="67554" class="Keyword">record</a> <a id="67561" class="Symbol">{</a> <a id="67563" href="Demos.HSP.html#27240" class="Field">isHom</a> <a id="67569" class="Symbol">=</a> <a id="67571" href="Demos.HSP.html#8278" class="Function Operator">‚à•</a> <a id="67573" href="Demos.HSP.html#67453" class="Function">homFC</a> <a id="67579" href="Demos.HSP.html#8278" class="Function Operator">‚à•</a>
                            <a id="67609" class="Symbol">;</a> <a id="67611" href="Demos.HSP.html#27265" class="Field">isInjective</a> <a id="67623" class="Symbol">=</a>  <a id="67626" class="Symbol">Œª</a> <a id="67628" class="Symbol">{</a><a id="67629" href="Demos.HSP.html#67629" class="Bound">x</a><a id="67630" class="Symbol">}{</a><a id="67632" href="Demos.HSP.html#67632" class="Bound">y</a><a id="67633" class="Symbol">}‚Üí</a> <a id="67636" href="Demos.HSP.html#14247" class="Function">fromIm-inj</a> <a id="67647" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="67649" href="Demos.HSP.html#59053" class="Function">homC</a> <a id="67654" href="Demos.HSP.html#66620" class="Bound">X</a> <a id="67656" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="67658" class="Symbol">{</a><a id="67659" href="Demos.HSP.html#67629" class="Bound">x</a><a id="67660" class="Symbol">}{</a><a id="67662" href="Demos.HSP.html#67632" class="Bound">y</a><a id="67663" class="Symbol">}</a>   <a id="67667" class="Symbol">}</a>
 <a id="67670" href="Demos.HSP.html#67670" class="Function">F‚â§C</a> <a id="67674" class="Symbol">:</a> <a id="67676" href="Demos.HSP.html#59143" class="Function Operator">ùîΩ[</a> <a id="67679" href="Demos.HSP.html#66620" class="Bound">X</a> <a id="67681" href="Demos.HSP.html#59143" class="Function Operator">]</a> <a id="67683" href="Demos.HSP.html#37703" class="Function Operator">‚â§</a> <a id="67685" href="Demos.HSP.html#58864" class="Function">ùë™</a> <a id="67687" href="Demos.HSP.html#66620" class="Bound">X</a>
 <a id="67690" href="Demos.HSP.html#67670" class="Function">F‚â§C</a> <a id="67694" class="Symbol">=</a> <a id="67696" href="Demos.HSP.html#38428" class="Function">mon‚Üí‚â§</a> <a id="67702" href="Demos.HSP.html#67508" class="Function">monFC</a>

 <a id="67710" class="Keyword">open</a> <a id="67715" href="Demos.HSP.html#58690" class="Module">FreeAlgebra</a> <a id="67727" href="Demos.HSP.html#66580" class="Bound">ùí¶</a> <a id="67729" class="Keyword">using</a> <a id="67735" class="Symbol">(</a> <a id="67737" href="Demos.HSP.html#58772" class="Function">‚Ñë</a> <a id="67739" class="Symbol">)</a>

 <a id="67743" href="Demos.HSP.html#67743" class="Function">SPF</a> <a id="67747" class="Symbol">:</a> <a id="67749" href="Demos.HSP.html#59143" class="Function Operator">ùîΩ[</a> <a id="67752" href="Demos.HSP.html#66620" class="Bound">X</a> <a id="67754" href="Demos.HSP.html#59143" class="Function Operator">]</a> <a id="67756" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="67758" href="Demos.HSP.html#49645" class="Function">S</a> <a id="67760" href="Demos.HSP.html#66675" class="Function">Œπ</a> <a id="67762" class="Symbol">(</a><a id="67763" href="Demos.HSP.html#49757" class="Function">P</a> <a id="67765" href="Demos.HSP.html#66616" class="Bound">‚Ñì</a> <a id="67767" href="Demos.HSP.html#66675" class="Function">Œπ</a> <a id="67769" href="Demos.HSP.html#66580" class="Bound">ùí¶</a><a id="67770" class="Symbol">)</a>
 <a id="67773" href="Demos.HSP.html#67743" class="Function">SPF</a> <a id="67777" class="Symbol">=</a> <a id="67779" href="Demos.HSP.html#58864" class="Function">ùë™</a> <a id="67781" href="Demos.HSP.html#66620" class="Bound">X</a> <a id="67783" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="67785" class="Symbol">((</a><a id="67787" href="Demos.HSP.html#58772" class="Function">‚Ñë</a> <a id="67789" href="Demos.HSP.html#66620" class="Bound">X</a><a id="67790" class="Symbol">)</a> <a id="67792" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="67794" class="Symbol">(</a><a id="67795" href="Demos.HSP.html#8241" class="Function Operator">‚à£_‚à£</a> <a id="67799" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="67801" class="Symbol">((Œª</a> <a id="67805" href="Demos.HSP.html#67805" class="Bound">i</a> <a id="67807" class="Symbol">‚Üí</a> <a id="67809" href="Demos.HSP.html#6493" class="Field">fst</a> <a id="67813" href="Demos.HSP.html#8278" class="Function Operator">‚à•</a> <a id="67815" href="Demos.HSP.html#67805" class="Bound">i</a> <a id="67817" href="Demos.HSP.html#8278" class="Function Operator">‚à•</a><a id="67818" class="Symbol">)</a> <a id="67820" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="67822" href="Demos.HSP.html#33753" class="Function">‚âÖ-refl</a><a id="67828" class="Symbol">)))</a> <a id="67832" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a>  <a id="67835" href="Demos.HSP.html#67670" class="Function">F‚â§C</a>
</pre>

Next we prove that every algebra in `Mod (Th (V ùí¶))` is a homomorphic image of `ùîΩ[ X ]`. Indeed,

<pre class="Agda">

<a id="67963" class="Keyword">module</a> <a id="67970" href="Demos.HSP.html#67970" class="Module">_</a> <a id="67972" class="Symbol">{</a><a id="67973" href="Demos.HSP.html#67973" class="Bound">ùí¶</a> <a id="67975" class="Symbol">:</a> <a id="67977" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="67981" class="Symbol">(</a><a id="67982" href="Demos.HSP.html#18729" class="Record">Algebra</a> <a id="67990" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="67992" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a><a id="67994" class="Symbol">)</a> <a id="67996" class="Symbol">(</a><a id="67997" href="Demos.HSP.html#7590" class="Generalizable">Œ±</a> <a id="67999" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="68001" href="Demos.HSP.html#7592" class="Generalizable">œÅ·µÉ</a> <a id="68004" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="68006" href="Demos.HSP.html#34906" class="Function">ov</a> <a id="68009" href="Demos.HSP.html#7614" class="Generalizable">‚Ñì</a><a id="68010" class="Symbol">)}</a> <a id="68013" class="Keyword">where</a>
 <a id="68020" class="Keyword">private</a> <a id="68028" href="Demos.HSP.html#68028" class="Function">c</a> <a id="68030" class="Symbol">=</a> <a id="68032" href="Demos.HSP.html#67990" class="Bound">Œ±</a> <a id="68034" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="68036" href="Demos.HSP.html#67992" class="Bound">œÅ·µÉ</a> <a id="68039" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="68041" href="Demos.HSP.html#68009" class="Bound">‚Ñì</a> <a id="68043" class="Symbol">;</a> <a id="68045" href="Demos.HSP.html#68045" class="Function">Œπ</a> <a id="68047" class="Symbol">=</a> <a id="68049" href="Demos.HSP.html#34906" class="Function">ov</a> <a id="68052" href="Demos.HSP.html#68028" class="Function">c</a>

 <a id="68056" href="Demos.HSP.html#68056" class="Function">Var‚áíEqCl</a> <a id="68065" class="Symbol">:</a> <a id="68067" class="Symbol">‚àÄ</a> <a id="68069" href="Demos.HSP.html#68069" class="Bound">ùë®</a> <a id="68071" class="Symbol">‚Üí</a> <a id="68073" href="Demos.HSP.html#68069" class="Bound">ùë®</a> <a id="68075" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="68077" href="Demos.HSP.html#48458" class="Function">Mod</a> <a id="68081" class="Symbol">(</a><a id="68082" href="Demos.HSP.html#48360" class="Function">Th</a> <a id="68085" class="Symbol">(</a><a id="68086" href="Demos.HSP.html#52828" class="Function">V</a> <a id="68088" href="Demos.HSP.html#68009" class="Bound">‚Ñì</a> <a id="68090" href="Demos.HSP.html#68045" class="Function">Œπ</a> <a id="68092" href="Demos.HSP.html#67973" class="Bound">ùí¶</a><a id="68093" class="Symbol">))</a> <a id="68096" class="Symbol">‚Üí</a> <a id="68098" href="Demos.HSP.html#68069" class="Bound">ùë®</a> <a id="68100" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="68102" href="Demos.HSP.html#52828" class="Function">V</a> <a id="68104" href="Demos.HSP.html#68009" class="Bound">‚Ñì</a> <a id="68106" href="Demos.HSP.html#68045" class="Function">Œπ</a> <a id="68108" href="Demos.HSP.html#67973" class="Bound">ùí¶</a>
 <a id="68111" href="Demos.HSP.html#68056" class="Function">Var‚áíEqCl</a> <a id="68120" href="Demos.HSP.html#68120" class="Bound">ùë®</a> <a id="68122" href="Demos.HSP.html#68122" class="Bound">ModThA</a> <a id="68129" class="Symbol">=</a> <a id="68131" href="Demos.HSP.html#59143" class="Function Operator">ùîΩ[</a> <a id="68134" href="Demos.HSP.html#19428" class="Function Operator">ùïå[</a> <a id="68137" href="Demos.HSP.html#68120" class="Bound">ùë®</a> <a id="68139" href="Demos.HSP.html#19428" class="Function Operator">]</a> <a id="68141" href="Demos.HSP.html#59143" class="Function Operator">]</a> <a id="68143" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="68145" class="Symbol">(</a><a id="68146" href="Demos.HSP.html#67743" class="Function">SPF</a><a id="68149" class="Symbol">{</a><a id="68150" class="Argument">‚Ñì</a> <a id="68152" class="Symbol">=</a> <a id="68154" href="Demos.HSP.html#68009" class="Bound">‚Ñì</a><a id="68155" class="Symbol">}</a> <a id="68157" href="Demos.HSP.html#67973" class="Bound">ùí¶</a> <a id="68159" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="68161" href="Demos.HSP.html#68420" class="Function">Aim</a><a id="68164" class="Symbol">)</a>
  <a id="68168" class="Keyword">where</a>
  <a id="68176" class="Keyword">open</a> <a id="68181" href="Demos.HSP.html#58690" class="Module">FreeAlgebra</a> <a id="68193" href="Demos.HSP.html#67973" class="Bound">ùí¶</a> <a id="68195" class="Keyword">using</a> <a id="68201" class="Symbol">(</a> <a id="68203" href="Demos.HSP.html#59143" class="Function Operator">ùîΩ[_]</a> <a id="68208" class="Symbol">)</a>
  <a id="68212" href="Demos.HSP.html#68212" class="Function">epiFlA</a> <a id="68219" class="Symbol">:</a> <a id="68221" href="Demos.HSP.html#27764" class="Function">epi</a> <a id="68225" href="Demos.HSP.html#59143" class="Function Operator">ùîΩ[</a> <a id="68228" href="Demos.HSP.html#19428" class="Function Operator">ùïå[</a> <a id="68231" href="Demos.HSP.html#68120" class="Bound">ùë®</a> <a id="68233" href="Demos.HSP.html#19428" class="Function Operator">]</a> <a id="68235" href="Demos.HSP.html#59143" class="Function Operator">]</a> <a id="68237" class="Symbol">(</a><a id="68238" href="Demos.HSP.html#22505" class="Function">Lift-Alg</a> <a id="68247" href="Demos.HSP.html#68120" class="Bound">ùë®</a> <a id="68249" href="Demos.HSP.html#68045" class="Function">Œπ</a> <a id="68251" href="Demos.HSP.html#68045" class="Function">Œπ</a><a id="68252" class="Symbol">)</a>
  <a id="68256" href="Demos.HSP.html#68212" class="Function">epiFlA</a> <a id="68263" class="Symbol">=</a> <a id="68265" href="Demos.HSP.html#61772" class="Function">F-ModTh-epi-lift</a><a id="68281" class="Symbol">{</a><a id="68282" class="Argument">‚Ñì</a> <a id="68284" class="Symbol">=</a> <a id="68286" href="Demos.HSP.html#68009" class="Bound">‚Ñì</a><a id="68287" class="Symbol">}</a> <a id="68289" class="Symbol">Œª</a> <a id="68291" class="Symbol">{</a><a id="68292" href="Demos.HSP.html#68292" class="Bound">p</a> <a id="68294" href="Demos.HSP.html#68294" class="Bound">q</a><a id="68295" class="Symbol">}</a> <a id="68297" class="Symbol">‚Üí</a> <a id="68299" href="Demos.HSP.html#68122" class="Bound">ModThA</a><a id="68305" class="Symbol">{</a><a id="68306" class="Argument">p</a> <a id="68308" class="Symbol">=</a> <a id="68310" href="Demos.HSP.html#68292" class="Bound">p</a><a id="68311" class="Symbol">}{</a><a id="68313" href="Demos.HSP.html#68294" class="Bound">q</a><a id="68314" class="Symbol">}</a>

  <a id="68319" href="Demos.HSP.html#68319" class="Function">œÜ</a> <a id="68321" class="Symbol">:</a> <a id="68323" href="Demos.HSP.html#22505" class="Function">Lift-Alg</a> <a id="68332" href="Demos.HSP.html#68120" class="Bound">ùë®</a> <a id="68334" href="Demos.HSP.html#68045" class="Function">Œπ</a> <a id="68336" href="Demos.HSP.html#68045" class="Function">Œπ</a> <a id="68338" href="Demos.HSP.html#35003" class="Function Operator">IsHomImageOf</a> <a id="68351" href="Demos.HSP.html#59143" class="Function Operator">ùîΩ[</a> <a id="68354" href="Demos.HSP.html#19428" class="Function Operator">ùïå[</a> <a id="68357" href="Demos.HSP.html#68120" class="Bound">ùë®</a> <a id="68359" href="Demos.HSP.html#19428" class="Function Operator">]</a> <a id="68361" href="Demos.HSP.html#59143" class="Function Operator">]</a>
  <a id="68365" href="Demos.HSP.html#68319" class="Function">œÜ</a> <a id="68367" class="Symbol">=</a> <a id="68369" href="Demos.HSP.html#28120" class="Function">epi‚Üíontohom</a> <a id="68381" href="Demos.HSP.html#59143" class="Function Operator">ùîΩ[</a> <a id="68384" href="Demos.HSP.html#19428" class="Function Operator">ùïå[</a> <a id="68387" href="Demos.HSP.html#68120" class="Bound">ùë®</a> <a id="68389" href="Demos.HSP.html#19428" class="Function Operator">]</a> <a id="68391" href="Demos.HSP.html#59143" class="Function Operator">]</a> <a id="68393" class="Symbol">(</a><a id="68394" href="Demos.HSP.html#22505" class="Function">Lift-Alg</a> <a id="68403" href="Demos.HSP.html#68120" class="Bound">ùë®</a> <a id="68405" href="Demos.HSP.html#68045" class="Function">Œπ</a> <a id="68407" href="Demos.HSP.html#68045" class="Function">Œπ</a><a id="68408" class="Symbol">)</a> <a id="68410" href="Demos.HSP.html#68212" class="Function">epiFlA</a>

  <a id="68420" href="Demos.HSP.html#68420" class="Function">Aim</a> <a id="68424" class="Symbol">:</a> <a id="68426" href="Demos.HSP.html#68120" class="Bound">ùë®</a> <a id="68428" href="Demos.HSP.html#35003" class="Function Operator">IsHomImageOf</a> <a id="68441" href="Demos.HSP.html#59143" class="Function Operator">ùîΩ[</a> <a id="68444" href="Demos.HSP.html#19428" class="Function Operator">ùïå[</a> <a id="68447" href="Demos.HSP.html#68120" class="Bound">ùë®</a> <a id="68449" href="Demos.HSP.html#19428" class="Function Operator">]</a> <a id="68451" href="Demos.HSP.html#59143" class="Function Operator">]</a>
  <a id="68455" href="Demos.HSP.html#68420" class="Function">Aim</a> <a id="68459" class="Symbol">=</a> <a id="68461" href="Demos.HSP.html#29161" class="Function">‚àò-hom</a> <a id="68467" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a> <a id="68469" href="Demos.HSP.html#68319" class="Function">œÜ</a> <a id="68471" href="Demos.HSP.html#8241" class="Function Operator">‚à£</a><a id="68472" class="Symbol">(</a><a id="68473" href="Demos.HSP.html#33065" class="Field">from</a> <a id="68478" href="Demos.HSP.html#37361" class="Function">Lift-‚âÖ</a><a id="68484" class="Symbol">)</a><a id="68485" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="68487" href="Demos.HSP.html#13214" class="Function">‚àò-IsSurjective</a> <a id="68502" class="Symbol">_</a> <a id="68504" class="Symbol">_</a> <a id="68506" href="Demos.HSP.html#8278" class="Function Operator">‚à•</a> <a id="68508" href="Demos.HSP.html#68319" class="Function">œÜ</a> <a id="68510" href="Demos.HSP.html#8278" class="Function Operator">‚à•</a><a id="68511" class="Symbol">(</a><a id="68512" href="Demos.HSP.html#33489" class="Function">fromIsSurjective</a><a id="68528" class="Symbol">(</a><a id="68529" href="Demos.HSP.html#37361" class="Function">Lift-‚âÖ</a><a id="68535" class="Symbol">{</a><a id="68536" class="Argument">ùë®</a> <a id="68538" class="Symbol">=</a> <a id="68540" href="Demos.HSP.html#68120" class="Bound">ùë®</a><a id="68541" class="Symbol">}))</a>

</pre>
By `ModTh-closure` and `Var‚áíEqCl`, we have `V ùí¶ = Mod (Th (V ùí¶))` for every class `ùí¶` of `ùëÜ`-algebras.
Thus, every variety is an equational class.

This completes the formal proof of Birkhoff's variety theorem. ‚àé

Discussion {#sec:discuss}
==========

How do we differ from the classical, set-theoretic approach? Most noticeable is our avoidance of all *size* issues. By using universe levels and level polymorphism, we always make sure we are in a *large enough* universe. So we can easily talk about "all algebras such that..." because these are always taken from a bounded (but arbitrary) universe.

Our use of setoids introduces nothing new: all the equivalence relations we use were already present in the classical proofs. The only "new" material is that we have to prove that functions respect those equivalences.

Our first attempt to formalize Birkhoff's theorem was not sufficiently careful in its handling of variable symbols `X`. Specifically, this type was unconstrained; it is meant to represent the informal notion of a "sufficiently large" collection of variable symbols. Consequently, we postulated surjections from `X` onto the domains of all algebras in the class under consideration. But then, given a signature `ùë∫` and a one-element `ùëÜ`-algebra `ùë®`, by choosing `X` to be the empty type `‚ä•`, our surjectivity postulate gives a map from `‚ä•` onto the singleton domain of `ùë®`. (For details, see the [Demos.ContraX](https://github.com/ualib/agda-algebras/blob/master/src/Demos/ContraX.lagda) module which constructs the counterexample in [Agda][].)

Related work
============

There have been a number of efforts to formalize parts of universal algebra in type theory besides ours. The Coq proof assistant, based on the Calculus of Inductive Constructions, was used by Capretta, in¬†[@Capretta:1999], and Spitters and Van der Weegen, in¬†[@Spitters:2011], to formalized the basics of universal algebra and some classical algebraic structures. In¬†[@Gunther:2018] Gunther et al developed what seemed (prior to the library) the most extensive libraryof formalized universal algebra to date. Like ,¬†[@Gunther:2018] is based on dependent type theory, is programmed in , and goes beyond the basic isomorphism theorems to include some equational logic. Although their coverage is less extensive than that of , Gunther et al do treat *multi-sorted* algebras, whereas is currently limited to single-sorted structures.

As noted by Abel¬†[@Abel:2021], Amato et al, in [@Amato:2021], have formalized multi-sorted algebras with finitary operators in UniMath. The restriction to finitary operations was due to limitations of the UniMath type theory, which does not have W-types nor user-defined inductive types. Abel also notes that Lynge and Spitters, in¬†[@Lynge:2019], formalize multi-sorted algebras with finitary operators in *Homotopy type theory* ([@HoTT]) using Coq. HoTT's higher inductive types enable them to define quotients as types, without the need for setoids. Lynge and Spitters prove three isomorphism theorems concerning subalgebras and quotient algebras, but do not formalize universal algebras nor varieties. Finally, in¬†[@Abel:2021], Abel gives a new formal proof of the soundness and completeness theorem for multi-sorted algebraic structures.


Footnotes
=========

[^1]: An alternative formalization based on classical set-theory was achieved in¬†[@birkhoff-in-mizar:1999].

[^2]: See the [[Birkhoff.lagda]{.sans-serif}](https://github.com/ualib/ualib.github.io/blob/71f173858701398d56224dd79d152c380c0c2b5e/src/lagda/UALib/Birkhoff.lagda) file in the [[ualib/ualib.gitlab.io]{.sans-serif}](https://github.com/ualib/ualib.github.io) repository ([15 Jan 2021 commit 71f1738](https://github.com/ualib/ualib.github.io/commit/71f173858701398d56224dd79d152c380c0c2b5e))¬†[@ualib_v1.0.0].

[^3]: [[src/Demos/HSP.lagda]{.sans-serif}](https://github.com/ualib/agda-algebras/blob/master/src/Demos/HSP.lagda) in the [agda-algebras][] repository: [[github.com/ualib/agda-algebras]{.sans-serif}](https://github.com/ualib/agda-algebras).

[^4]: the axiom asserting that two point-wise equal functions are equal

[^5]: All submodules of the module in the library are also fully constructive in this sense.

[^6]: The code in this paragraph was suggested by an anonymous referee.

[^7]: `suc ‚Ñì` denotes the successor of `‚Ñì` in the universe hierarchy.

[^8]: The definition of was provided by an anonymous referee; it is indeed simpler than trying to apply the general `HomFactor` theorem found in the [agda-algebras][] library.

[^9]: Some authors reserve the term for a *deductively closed* set of equations, that is, a set of equations that is closed under entailment.

[^10]: The proof we present here is based on¬†[@Bergman:2012 Theorem 4.41].

[^11]: Informally, this is done by assuming `X` has cardinality at least `max(| ùïå[ ùë® ] |, œâ)`. Later we will see how to construct an `X` with the required property in type theory.

[^12]: `‚ü¶ ùë® ‚üß t` denotes the interpretation of the term `t` in the algebra `ùë®`.

--------------------------------

<span style="float:left;">[‚Üë Demos](Demos.html)</span>
<span style="float:right;">[Demos.ContraX ‚Üí](Demos.ContraX.html)</span>

{% include UALib.Links.md %}

