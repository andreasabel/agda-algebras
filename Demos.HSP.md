\section{Introduction}
The \agdaalgebras library \cite{ualib_v2.0.1} formalizes the foundations of universal algebra
in intensional Martin-L√∂f type theory (\mltt) using \agda~\cite{Norell:2007,agdaref}.
The library includes a wide collection of definitions and verified theorems that faithfully codify
classical, set-theory-based universal algebra and equational
logic.

The first major milestone of the \agdaalgebras project is a proof of \emph{Birkhoff's
variety theorem} (also known as the \emph{HSP theorem})~\cite{Birkhoff:1935}.
To the best of our knowledge, this constitutes the first machine-verified proof of Birkoff's
celebrated 1935 result.

Presented here is our second proof of the HSP theorem. The first proof\footnote{see the
 \href{https://github.com/ualib/ualib.github.io/blob/71f173858701398d56224dd79d152c380c0c2b5e/src/lagda/UALib/Birkhoff.lagda}{\textsf{Birkhoff.lagda}} file
 in the \href{https://github.com/ualib/ualib.github.io}{\textsf{ualib/ualib.gitlab.io}}
 repository (\href{https://github.com/ualib/ualib.github.io/commit/71f173858701398d56224dd79d152c380c0c2b5e}{15
 Jan 2021 commit 71f1738})~\cite{ualib_v1.0.0}}
suffered from flaws that raised two concerns. First, it was not clear whether the
proof was fully constructive (because of its use of function extensionality in \mltt). Second,
it was shown that if one were to take the type
\ab{X}---which we use to represent an arbitrary collection of
variable symbols---to be  the two element type, then one could combine this with our
proof and derive a contradiction. To resolve these issues, we have rewritten parts of the library and
developed a new proof of the HSP theorem. We are confident that the
proof presented here\footnote{based on \agdaalgebras, ver.~2.0.1~\cite{ualib_v2.0.1}, \agda ver.2.6.2 and \agdastdlib ver.1.7} is constructive and
 correct. %, a conviction we justify in the sequel (\qv).

What follows is a self-contained formal proof of the HSP theorem in \agda.  This is achieved by
extracting a subset of the \agdaalgebras library, including only the
pieces needed for the proof, into a literate \agda document.\footnote{see
\HSPlagda in the \agdaalgebras repository: \agdaalgebrasrepo}
\ifshort
For spaces reasons, we elide some inessential parts,
but strive to preserve the essential content and character of the development.
More specifically, routine or overly technical components, as well as anything that does not
seem to offer insight into the central ideas of the proof are omitted.\footnote{The full proof
appears in the unabridged version of the present paper~\cite{DeMeo:2021}.}
\else
We include here every line of code of our new proof of Birkhoff's theorem
in a single \agda module, presented as a literate \agda document,\footnote{see
\HSPlagda in the \agdaalgebras repository: \agdaalgebrasrepo}.  Apart from a few dozen
imports from the \agdastdlib, the module is self-contained.
\fi

We highlight some of the challenging aspects of formalizing universal algebra in type theory.
Nonetheless, we hope to show that the patient mathematician, with enough resolve and the will to learn
dependent type theory, can reap the rewards of the further insights that mechanization provides.

\ifshort\else
We give a sobering glimpse of the technical hurdles that must be overcome
to conduct research in mathematics using dependent type theory in \agda.
The results are rather gratifying and enlightening, and we feel are worth
the investment. Users of Coq and Lean have recently reported similar feelings
from the outcome of their formalization efforts.
\fi

Our main contribution is the representation of algebraic structures and their signatures
in dependent type theory in a way that is not only very general, but also practical, as we
demonstrate by formalizing one of the deepest results in the field.

\section{Preliminaries}

For the most part, we assume that the reader is familiar with \mltt, and can decipher its encoding in \agda.

\subsection{Logical foundations}

To best emulate \mltt, we use
<pre class="Agda">
<a id="4040" class="Symbol">{-#</a> <a id="4044" class="Keyword">OPTIONS</a> <a id="4052" class="Pragma">--without-K</a> <a id="4064" class="Pragma">--exact-split</a> <a id="4078" class="Pragma">--safe</a> <a id="4085" class="Symbol">#-}</a>
</pre>
; these options affect the logical foundations with respect to which our code is type-checked.
\ifshort
Briefly,
\AgdaPragma{without-K} disables
\href{https://ncatlab.org/nlab/show/axiom+K+%28type+theory%29}{Streicher's K axiom},
\AgdaPragma{exact-split} directs \agda to accept only definitions behaving like
{\it judgmental} equalities, and
\AgdaPragma{safe} ensures that nothing is postulated outright.
See~\cite{agdaref-axiomk,agdaref-safeagda,agdatools-patternmatching} for more details.
\else
Here are brief descriptions of these options, accompanied by links to related documentation.
\begin{itemize}
\item
\AgdaPragma{without-K} disables \href{https://ncatlab.org/nlab/show/axiom+K+%28type+theory%29}{Streicher's K axiom}.
See the \href{https://agda.readthedocs.io/en/v2.6.1/language/without-k.html}{section on axiom K} in
the \href{https://agda.readthedocs.io/en/v2.6.1.3/language}{Agda Language Reference Manual}~\cite{agdaref-axiomk}.
\item
\AgdaPragma{exact-split} makes \agda accept only those definitions that behave like so-called {\it judgmental} equalities.
See the \href{https://agda.readthedocs.io/en/v2.6.1/tools/command-line-options.html#pattern-matching-and-equality}%
{Pattern matching and equality} section of
the \href{https://agda.readthedocs.io/en/v2.6.1.3/tools/}{Agda Tools} documentation~\cite{agdatools-patternmatching}.
\item
\AgdaPragma{safe} ensures that nothing is postulated outright---every non-\mltt axiom has to be an explicit assumption (e.g., an argument to a function or module).
See the \href{https://agda.readthedocs.io/en/v2.6.1/tools/command-line-options.html#cmdoption-safe}{cmdoption-safe} section of~\cite{agdaref-safeagda}.
\end{itemize}
\fi

We also make use of a variety of definitions from Agda's standard library; these are imported as follows.
<pre class="Agda">
<a id="5918" class="Symbol">{-#</a> <a id="5922" class="Keyword">OPTIONS</a> <a id="5930" class="Pragma">--without-K</a> <a id="5942" class="Pragma">--exact-split</a> <a id="5956" class="Pragma">--safe</a> <a id="5963" class="Symbol">#-}</a>
</pre>
\ifshort\else
<pre class="Agda">

<a id="6006" class="Comment">-- Import universe levels and Signature type (described below) from the agda-algebras library.</a>
<a id="6101" class="Keyword">open</a> <a id="6106" class="Keyword">import</a> <a id="6113" href="Base.Algebras.Basic.html" class="Module">Base.Algebras.Basic</a> <a id="6133" class="Keyword">using</a> <a id="6139" class="Symbol">(</a> <a id="6141" href="Base.Algebras.Basic.html#1160" class="Generalizable">ùìû</a> <a id="6143" class="Symbol">;</a> <a id="6145" href="Base.Algebras.Basic.html#1162" class="Generalizable">ùì•</a> <a id="6147" class="Symbol">;</a> <a id="6149" href="Base.Algebras.Basic.html#3888" class="Function">Signature</a> <a id="6159" class="Symbol">)</a>

<a id="6162" class="Keyword">module</a> <a id="6169" href="Demos.HSP.html" class="Module">Demos.HSP</a> <a id="6179" class="Symbol">{</a><a id="6180" href="Demos.HSP.html#6180" class="Bound">ùëÜ</a> <a id="6182" class="Symbol">:</a> <a id="6184" href="Base.Algebras.Basic.html#3888" class="Function">Signature</a> <a id="6194" href="Base.Algebras.Basic.html#1160" class="Generalizable">ùìû</a> <a id="6196" href="Base.Algebras.Basic.html#1162" class="Generalizable">ùì•</a><a id="6197" class="Symbol">}</a> <a id="6199" class="Keyword">where</a>
</pre>
\fi
<pre class="Agda">

<a id="6234" class="Comment">-- Import 16 definitions from the Agda Standard Library.</a>
<a id="6291" class="Keyword">open</a> <a id="6296" class="Keyword">import</a>  <a id="6304" href="Data.Unit.Polymorphic.html" class="Module">Data.Unit.Polymorphic</a>                           <a id="6352" class="Keyword">using</a> <a id="6358" class="Symbol">(</a> <a id="6360" href="Data.Unit.Polymorphic.Base.html#480" class="Function">‚ä§</a> <a id="6362" class="Symbol">;</a> <a id="6364" href="Data.Unit.Polymorphic.Base.html#524" class="Function">tt</a>                        <a id="6390" class="Symbol">)</a>
<a id="6392" class="Keyword">open</a> <a id="6397" class="Keyword">import</a>  <a id="6405" href="Function.html" class="Module">Function</a>                                        <a id="6453" class="Keyword">using</a> <a id="6459" class="Symbol">(</a> <a id="6461" href="Function.Base.html#615" class="Function">id</a> <a id="6464" class="Symbol">;</a> <a id="6466" href="Function.Base.html#1554" class="Function">flip</a> <a id="6471" class="Symbol">;</a> <a id="6473" href="Function.Base.html#1031" class="Function Operator">_‚àò_</a>               <a id="6491" class="Symbol">)</a>
<a id="6493" class="Keyword">open</a> <a id="6498" class="Keyword">import</a>  <a id="6506" href="Level.html" class="Module">Level</a>                                           <a id="6554" class="Keyword">using</a> <a id="6560" class="Symbol">(</a> <a id="6562" href="Agda.Primitive.html#597" class="Postulate">Level</a>                         <a id="6592" class="Symbol">)</a>
<a id="6594" class="Keyword">open</a> <a id="6599" class="Keyword">import</a>  <a id="6607" href="Relation.Binary.html" class="Module">Relation.Binary</a>                                 <a id="6655" class="Keyword">using</a> <a id="6661" class="Symbol">(</a> <a id="6663" href="Relation.Binary.Core.html#882" class="Function">Rel</a> <a id="6667" class="Symbol">;</a> <a id="6669" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="6676" class="Symbol">;</a> <a id="6678" href="Relation.Binary.Structures.html#1522" class="Record">IsEquivalence</a>  <a id="6693" class="Symbol">)</a>
<a id="6695" class="Keyword">open</a> <a id="6700" class="Keyword">import</a>  <a id="6708" href="Relation.Binary.Definitions.html" class="Module">Relation.Binary.Definitions</a>                     <a id="6756" class="Keyword">using</a> <a id="6762" class="Symbol">(</a> <a id="6764" href="Relation.Binary.Definitions.html#1339" class="Function">Reflexive</a> <a id="6774" class="Symbol">;</a> <a id="6776" href="Relation.Binary.Definitions.html#1498" class="Function">Symmetric</a>         <a id="6794" class="Symbol">)</a>
                                                             <a id="6857" class="Keyword">using</a> <a id="6863" class="Symbol">(</a> <a id="6865" href="Relation.Binary.Definitions.html#1978" class="Function">Transitive</a> <a id="6876" class="Symbol">;</a> <a id="6878" href="Relation.Binary.Definitions.html#1424" class="Function">Sym</a> <a id="6882" class="Symbol">;</a> <a id="6884" href="Relation.Binary.Definitions.html#1585" class="Function">Trans</a>      <a id="6895" class="Symbol">)</a>
<a id="6897" class="Keyword">open</a> <a id="6902" class="Keyword">import</a>  <a id="6910" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a>           <a id="6958" class="Keyword">using</a> <a id="6964" class="Symbol">(</a> <a id="6966" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">_‚â°_</a>                           <a id="6996" class="Symbol">)</a>
<a id="6998" class="Keyword">open</a> <a id="7003" class="Keyword">import</a>  <a id="7011" href="Relation.Unary.html" class="Module">Relation.Unary</a>                                  <a id="7059" class="Keyword">using</a> <a id="7065" class="Symbol">(</a> <a id="7067" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="7072" class="Symbol">;</a> <a id="7074" href="Relation.Unary.html#1742" class="Function Operator">_‚äÜ_</a> <a id="7078" class="Symbol">;</a> <a id="7080" href="Relation.Unary.html#1523" class="Function Operator">_‚àà_</a>              <a id="7097" class="Symbol">)</a>

<a id="7100" class="Comment">-- Import 23 definitions from the Agda Standard Library and rename 12 of them.</a>
<a id="7179" class="Keyword">open</a> <a id="7184" class="Keyword">import</a>  <a id="7192" href="Agda.Primitive.html" class="Module">Agda.Primitive</a>  <a id="7208" class="Keyword">renaming</a> <a id="7217" class="Symbol">(</a> <a id="7219" href="Agda.Primitive.html#326" class="Primitive">Set</a>    <a id="7226" class="Symbol">to</a> <a id="7229" class="Primitive">Type</a>    <a id="7237" class="Symbol">)</a>  <a id="7240" class="Keyword">using</a> <a id="7246" class="Symbol">(</a> <a id="7248" href="Agda.Primitive.html#810" class="Primitive Operator">_‚äî_</a> <a id="7252" class="Symbol">;</a> <a id="7254" href="Agda.Primitive.html#780" class="Primitive">lsuc</a>                    <a id="7278" class="Symbol">)</a>
<a id="7280" class="Keyword">open</a> <a id="7285" class="Keyword">import</a>  <a id="7293" href="Data.Product.html" class="Module">Data.Product</a>    <a id="7309" class="Keyword">renaming</a> <a id="7318" class="Symbol">(</a> <a id="7320" href="Agda.Builtin.Sigma.html#252" class="Field">proj‚ÇÅ</a>  <a id="7327" class="Symbol">to</a> <a id="7330" class="Field">fst</a>     <a id="7338" class="Symbol">)</a>
                             <a id="7369" class="Keyword">renaming</a> <a id="7378" class="Symbol">(</a> <a id="7380" href="Agda.Builtin.Sigma.html#264" class="Field">proj‚ÇÇ</a>  <a id="7387" class="Symbol">to</a> <a id="7390" class="Field">snd</a>     <a id="7398" class="Symbol">)</a>  <a id="7401" class="Keyword">using</a> <a id="7407" class="Symbol">(</a> <a id="7409" href="Data.Product.html#1167" class="Function Operator">_√ó_</a> <a id="7413" class="Symbol">;</a> <a id="7415" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">_,_</a> <a id="7419" class="Symbol">;</a> <a id="7421" href="Agda.Builtin.Sigma.html#166" class="Record">Œ£</a> <a id="7423" class="Symbol">;</a> <a id="7425" href="Data.Product.html#916" class="Function">Œ£-syntax</a>      <a id="7439" class="Symbol">)</a>
<a id="7441" class="Keyword">open</a> <a id="7446" class="Keyword">import</a>  <a id="7454" href="Function.html" class="Module">Function</a>        <a id="7470" class="Keyword">renaming</a> <a id="7479" class="Symbol">(</a> <a id="7481" href="Function.Bundles.html#1868" class="Record">Func</a>   <a id="7488" class="Symbol">to</a> <a id="7491" class="Record">_‚ü∂_</a>     <a id="7499" class="Symbol">)</a>  <a id="7502" class="Keyword">using</a> <a id="7508" class="Symbol">(</a> <a id="7510" href="Function.Bundles.html#2240" class="Record">Injection</a> <a id="7520" class="Symbol">;</a> <a id="7522" href="Function.Bundles.html#2677" class="Record">Surjection</a>        <a id="7540" class="Symbol">)</a>
<a id="7542" class="Keyword">open</a>         <a id="7555" href="Demos.HSP.html#7491" class="Module">_‚ü∂_</a>             <a id="7571" class="Keyword">renaming</a> <a id="7580" class="Symbol">(</a> <a id="7582" href="Function.Bundles.html#1919" class="Field">f</a>      <a id="7589" class="Symbol">to</a> <a id="7592" class="Field">_‚ü®$‚ü©_</a>   <a id="7600" class="Symbol">)</a>  <a id="7603" class="Keyword">using</a> <a id="7609" class="Symbol">(</a> <a id="7611" href="Function.Bundles.html#1938" class="Field">cong</a>                          <a id="7641" class="Symbol">)</a>
<a id="7643" class="Keyword">open</a>         <a id="7656" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a>          <a id="7672" class="Keyword">renaming</a> <a id="7681" class="Symbol">(</a> <a id="7683" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>   <a id="7690" class="Symbol">to</a> <a id="7693" class="Function">reflÀ¢</a>   <a id="7701" class="Symbol">)</a>
                             <a id="7732" class="Keyword">renaming</a> <a id="7741" class="Symbol">(</a> <a id="7743" href="Relation.Binary.Structures.html#1594" class="Function">sym</a>    <a id="7750" class="Symbol">to</a> <a id="7753" class="Function">symÀ¢</a>    <a id="7761" class="Symbol">)</a>
                             <a id="7792" class="Keyword">renaming</a> <a id="7801" class="Symbol">(</a> <a id="7803" href="Relation.Binary.Structures.html#1620" class="Function">trans</a>  <a id="7810" class="Symbol">to</a> <a id="7813" class="Function">transÀ¢</a>  <a id="7821" class="Symbol">)</a>
                             <a id="7852" class="Keyword">renaming</a> <a id="7861" class="Symbol">(</a> <a id="7863" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a>    <a id="7870" class="Symbol">to</a> <a id="7873" class="Field Operator">_‚âàÀ¢_</a>    <a id="7881" class="Symbol">)</a>  <a id="7884" class="Keyword">using</a> <a id="7890" class="Symbol">(</a> <a id="7892" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="7900" class="Symbol">;</a> <a id="7902" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a>       <a id="7922" class="Symbol">)</a>
<a id="7924" class="Keyword">open</a>         <a id="7937" href="Relation.Binary.Structures.html#1522" class="Module">IsEquivalence</a>   <a id="7953" class="Keyword">renaming</a> <a id="7962" class="Symbol">(</a> <a id="7964" href="Relation.Binary.Structures.html#1568" class="Field">refl</a>   <a id="7971" class="Symbol">to</a> <a id="7974" class="Field">refl·µâ</a>   <a id="7982" class="Symbol">)</a>
                             <a id="8013" class="Keyword">renaming</a> <a id="8022" class="Symbol">(</a> <a id="8024" href="Relation.Binary.Structures.html#1594" class="Field">sym</a>    <a id="8031" class="Symbol">to</a> <a id="8034" class="Field">sym·µâ</a>    <a id="8042" class="Symbol">)</a>
                             <a id="8073" class="Keyword">renaming</a> <a id="8082" class="Symbol">(</a> <a id="8084" href="Relation.Binary.Structures.html#1620" class="Field">trans</a>  <a id="8091" class="Symbol">to</a> <a id="8094" class="Field">trans·µâ</a>  <a id="8102" class="Symbol">)</a>  <a id="8105" class="Keyword">using</a> <a id="8111" class="Symbol">()</a>

</pre>
\ifshort\else
<pre class="Agda">
<a id="8153" class="Comment">-- Assign handles to 3 modules of the Agda Standard Library.</a>
<a id="8214" class="Keyword">import</a>       <a id="8227" href="Function.Definitions.html" class="Module">Function.Definitions</a>                   <a id="8266" class="Symbol">as</a> <a id="8269" class="Module">FD</a>
<a id="8272" class="Keyword">import</a>       <a id="8285" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a>  <a id="8324" class="Symbol">as</a> <a id="8327" class="Module">‚â°</a>
<a id="8329" class="Keyword">import</a>       <a id="8342" href="Relation.Binary.Reasoning.Setoid.html" class="Module">Relation.Binary.Reasoning.Setoid</a>       <a id="8381" class="Symbol">as</a> <a id="8384" class="Module">SetoidReasoning</a>

<a id="8401" class="Keyword">private</a> <a id="8409" class="Keyword">variable</a>
 <a id="8419" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="8421" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a> <a id="8424" href="Demos.HSP.html#8424" class="Generalizable">Œ≤</a> <a id="8426" href="Demos.HSP.html#8426" class="Generalizable">œÅ·µá</a> <a id="8429" href="Demos.HSP.html#8429" class="Generalizable">Œ≥</a> <a id="8431" href="Demos.HSP.html#8431" class="Generalizable">œÅ·∂ú</a> <a id="8434" href="Demos.HSP.html#8434" class="Generalizable">Œ¥</a> <a id="8436" href="Demos.HSP.html#8436" class="Generalizable">œÅ·µà</a> <a id="8439" href="Demos.HSP.html#8439" class="Generalizable">œÅ</a> <a id="8441" href="Demos.HSP.html#8441" class="Generalizable">œá</a> <a id="8443" href="Demos.HSP.html#8443" class="Generalizable">‚Ñì</a> <a id="8445" class="Symbol">:</a> <a id="8447" href="Agda.Primitive.html#597" class="Postulate">Level</a>
 <a id="8454" href="Demos.HSP.html#8454" class="Generalizable">Œì</a> <a id="8456" href="Demos.HSP.html#8456" class="Generalizable">Œî</a> <a id="8458" class="Symbol">:</a> <a id="8460" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="8465" href="Demos.HSP.html#8441" class="Generalizable">œá</a>
 <a id="8468" href="Demos.HSP.html#8468" class="Generalizable">ùëì</a> <a id="8470" class="Symbol">:</a> <a id="8472" href="Demos.HSP.html#7330" class="Field">fst</a> <a id="8476" href="Demos.HSP.html#6180" class="Bound">ùëÜ</a>

</pre>
\fi
The above imports include some adjustments to ``standard \agda'' syntax; in particular,
we use \AgdaPrimitive{Type} in place of \AgdaPrimitive{Set}, the infix long arrow symbol,
\AgdaRecord{\AgdaUnderscore{}‚ü∂\AgdaUnderscore{}}, instead of \AgdaRecord{Func} (the type of ``setoid functions,'' discussed in ¬ß\ref{setoid-functions} below), and the symbol \aofld{\au{}‚ü®\$‚ü©\au{}} in place of \afld{f} (application of the map of a setoid function); we use
\AgdaField{fst} and \AgdaField{snd}, and sometimes \AgdaOperator{\AgdaFunction{‚à£\AgdaUnderscore{}‚à£}} and
\AgdaOperator{\AgdaFunction{‚à•\AgdaUnderscore{}‚à•}}, to denote the first and second
projections out of the product type
\AgdaOperator{\AgdaFunction{\AgdaUnderscore{}√ó\AgdaUnderscore{}}}.
\ifshort\else

<pre class="Agda">
<a id="9262" class="Keyword">module</a> <a id="9269" href="Demos.HSP.html#9269" class="Module">_</a> <a id="9271" class="Symbol">{</a><a id="9272" href="Demos.HSP.html#9272" class="Bound">A</a> <a id="9274" class="Symbol">:</a> <a id="9276" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="9281" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="9283" class="Symbol">}{</a><a id="9285" href="Demos.HSP.html#9285" class="Bound">B</a> <a id="9287" class="Symbol">:</a> <a id="9289" href="Demos.HSP.html#9272" class="Bound">A</a> <a id="9291" class="Symbol">‚Üí</a> <a id="9293" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="9298" href="Demos.HSP.html#8424" class="Generalizable">Œ≤</a><a id="9299" class="Symbol">}</a> <a id="9301" class="Keyword">where</a>
 <a id="9308" href="Demos.HSP.html#9308" class="Function Operator">‚à£_‚à£</a> <a id="9312" class="Symbol">:</a> <a id="9314" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="9317" href="Demos.HSP.html#9317" class="Bound">x</a> <a id="9319" href="Data.Product.html#916" class="Function">‚àà</a> <a id="9321" href="Demos.HSP.html#9272" class="Bound">A</a> <a id="9323" href="Data.Product.html#916" class="Function">]</a> <a id="9325" href="Demos.HSP.html#9285" class="Bound">B</a> <a id="9327" href="Demos.HSP.html#9317" class="Bound">x</a> <a id="9329" class="Symbol">‚Üí</a> <a id="9331" href="Demos.HSP.html#9272" class="Bound">A</a>
 <a id="9334" href="Demos.HSP.html#9308" class="Function Operator">‚à£_‚à£</a> <a id="9338" class="Symbol">=</a> <a id="9340" href="Demos.HSP.html#7330" class="Field">fst</a>
 <a id="9345" href="Demos.HSP.html#9345" class="Function Operator">‚à•_‚à•</a> <a id="9349" class="Symbol">:</a> <a id="9351" class="Symbol">(</a><a id="9352" href="Demos.HSP.html#9352" class="Bound">z</a> <a id="9354" class="Symbol">:</a> <a id="9356" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="9359" href="Demos.HSP.html#9359" class="Bound">a</a> <a id="9361" href="Data.Product.html#916" class="Function">‚àà</a> <a id="9363" href="Demos.HSP.html#9272" class="Bound">A</a> <a id="9365" href="Data.Product.html#916" class="Function">]</a> <a id="9367" href="Demos.HSP.html#9285" class="Bound">B</a> <a id="9369" href="Demos.HSP.html#9359" class="Bound">a</a><a id="9370" class="Symbol">)</a> <a id="9372" class="Symbol">‚Üí</a> <a id="9374" href="Demos.HSP.html#9285" class="Bound">B</a> <a id="9376" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="9378" href="Demos.HSP.html#9352" class="Bound">z</a> <a id="9380" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a>
 <a id="9383" href="Demos.HSP.html#9345" class="Function Operator">‚à•_‚à•</a> <a id="9387" class="Symbol">=</a> <a id="9389" href="Demos.HSP.html#7390" class="Field">snd</a>
</pre>
\fi

%% -----------------------------------------------------------------------------
\subsection{Setoids}\label{setoids}
A \defn{setoid} is a pair consisting of a type \ab A and
an equivalence relation \af{‚âà} on \ab A.  Setoids are useful for representing a
set with a ``local'' notion of equivalence, instead of always relying on
the global one as is usually done in set theory. Dealing with setoids has
somewhat of a bad reputation for being overly tedious. We have not found
this to be an issue.

The \agdaalgebras library was first developed without setoids, relying on
propositional equality \ad{\au{}‚â°\au{}} instead,
along with some experimental, domain-specific types for equivalence classes, quotients, etc.
This furthermore required postulating function extensionality,%
\footnote{An axiom that asserts that two point-wise equal functions are equal.} which is
known to be independent from \mltt~\cite{MHE, MHE:2019}. This was
an unsatisfactory state of affairs, as %we were curious to see if
our aim is to show that the theorems hold directly in \mltt without extra axioms.
In particular, the present exposition makes no appeals to classical axioms like Choice or Excluded Middle.


%% -----------------------------------------------------------------------------
\subsection{Setoid functions}
\label{setoid-functions}
We use the \ar{Func} type from the \agdastdlib for representing a function from
a setoid \ab A to another setoid \ab B that respects the underlying equivalences,
witnessed by a field called \afld{cong}.  However, we rename \ar{Func}, using
the more visually appealing infix long arrow symbol,
\AgdaRecord{\AgdaUnderscore{}‚ü∂\AgdaUnderscore{}}, instead. Throughout the
paper we refer to inhabitants of this type as ``setoid functions.''

\ifshort\else
An example of a setoid function is the identity function from a setoid to itself.
We define it, along with a binary composition operation for setoid functions,
\AgdaOperator{\AgdaFunction{‚ü®‚àò‚ü©}}, as follows.

<pre class="Agda">

<a id="ùëñùëë"></a><a id="11405" href="Demos.HSP.html#11405" class="Function">ùëñùëë</a> <a id="11408" class="Symbol">:</a> <a id="11410" class="Symbol">{</a><a id="11411" href="Demos.HSP.html#11411" class="Bound">A</a> <a id="11413" class="Symbol">:</a> <a id="11415" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="11422" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="11424" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="11426" class="Symbol">}</a> <a id="11428" class="Symbol">‚Üí</a> <a id="11430" href="Demos.HSP.html#11411" class="Bound">A</a> <a id="11432" href="Demos.HSP.html#7491" class="Record Operator">‚ü∂</a> <a id="11434" href="Demos.HSP.html#11411" class="Bound">A</a>
<a id="11436" href="Demos.HSP.html#11405" class="Function">ùëñùëë</a> <a id="11439" class="Symbol">{</a><a id="11440" href="Demos.HSP.html#11440" class="Bound">A</a><a id="11441" class="Symbol">}</a> <a id="11443" class="Symbol">=</a> <a id="11445" class="Keyword">record</a> <a id="11452" class="Symbol">{</a> <a id="11454" href="Function.Bundles.html#1919" class="Field">f</a> <a id="11456" class="Symbol">=</a> <a id="11458" href="Function.Base.html#615" class="Function">id</a> <a id="11461" class="Symbol">;</a> <a id="11463" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="11468" class="Symbol">=</a> <a id="11470" href="Function.Base.html#615" class="Function">id</a> <a id="11473" class="Symbol">}</a>

<a id="_‚ü®‚àò‚ü©_"></a><a id="11476" href="Demos.HSP.html#11476" class="Function Operator">_‚ü®‚àò‚ü©_</a> <a id="11482" class="Symbol">:</a>  <a id="11485" class="Symbol">{</a><a id="11486" href="Demos.HSP.html#11486" class="Bound">A</a> <a id="11488" class="Symbol">:</a> <a id="11490" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="11497" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="11499" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="11501" class="Symbol">}</a> <a id="11503" class="Symbol">{</a><a id="11504" href="Demos.HSP.html#11504" class="Bound">B</a> <a id="11506" class="Symbol">:</a> <a id="11508" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="11515" href="Demos.HSP.html#8424" class="Generalizable">Œ≤</a> <a id="11517" href="Demos.HSP.html#8426" class="Generalizable">œÅ·µá</a><a id="11519" class="Symbol">}</a> <a id="11521" class="Symbol">{</a><a id="11522" href="Demos.HSP.html#11522" class="Bound">C</a> <a id="11524" class="Symbol">:</a> <a id="11526" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="11533" href="Demos.HSP.html#8429" class="Generalizable">Œ≥</a> <a id="11535" href="Demos.HSP.html#8431" class="Generalizable">œÅ·∂ú</a><a id="11537" class="Symbol">}</a>
 <a id="11540" class="Symbol">‚Üí</a>       <a id="11548" href="Demos.HSP.html#11504" class="Bound">B</a> <a id="11550" href="Demos.HSP.html#7491" class="Record Operator">‚ü∂</a> <a id="11552" href="Demos.HSP.html#11522" class="Bound">C</a>  <a id="11555" class="Symbol">‚Üí</a>  <a id="11558" href="Demos.HSP.html#11486" class="Bound">A</a> <a id="11560" href="Demos.HSP.html#7491" class="Record Operator">‚ü∂</a> <a id="11562" href="Demos.HSP.html#11504" class="Bound">B</a>  <a id="11565" class="Symbol">‚Üí</a>  <a id="11568" href="Demos.HSP.html#11486" class="Bound">A</a> <a id="11570" href="Demos.HSP.html#7491" class="Record Operator">‚ü∂</a> <a id="11572" href="Demos.HSP.html#11522" class="Bound">C</a>

<a id="11575" href="Demos.HSP.html#11575" class="Bound">f</a> <a id="11577" href="Demos.HSP.html#11476" class="Function Operator">‚ü®‚àò‚ü©</a> <a id="11581" href="Demos.HSP.html#11581" class="Bound">g</a> <a id="11583" class="Symbol">=</a> <a id="11585" class="Keyword">record</a>  <a id="11593" class="Symbol">{</a> <a id="11595" href="Function.Bundles.html#1919" class="Field">f</a> <a id="11597" class="Symbol">=</a> <a id="11599" class="Symbol">(</a><a id="11600" href="Demos.HSP.html#7592" class="Field Operator">_‚ü®$‚ü©_</a> <a id="11606" href="Demos.HSP.html#11575" class="Bound">f</a><a id="11607" class="Symbol">)</a> <a id="11609" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="11611" class="Symbol">(</a><a id="11612" href="Demos.HSP.html#7592" class="Field Operator">_‚ü®$‚ü©_</a> <a id="11618" href="Demos.HSP.html#11581" class="Bound">g</a><a id="11619" class="Symbol">)</a>
                  <a id="11639" class="Symbol">;</a> <a id="11641" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="11646" class="Symbol">=</a> <a id="11648" class="Symbol">(</a><a id="11649" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="11654" href="Demos.HSP.html#11575" class="Bound">f</a><a id="11655" class="Symbol">)</a> <a id="11657" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="11659" class="Symbol">(</a><a id="11660" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="11665" href="Demos.HSP.html#11581" class="Bound">g</a><a id="11666" class="Symbol">)</a> <a id="11668" class="Symbol">}</a>
</pre>
\fi

\paragraph*{Inverses}
We frequently need to deal with the \defn{inverse} of a function. This is most easily defined in terms of the
\emph{image} of the function's domain, as follows.

<pre class="Agda">

<a id="11884" class="Keyword">module</a> <a id="11891" href="Demos.HSP.html#11891" class="Module">_</a> <a id="11893" class="Symbol">{</a><a id="11894" href="Demos.HSP.html#11894" class="Bound">ùë®</a> <a id="11896" class="Symbol">:</a> <a id="11898" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="11905" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="11907" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="11909" class="Symbol">}{</a><a id="11911" href="Demos.HSP.html#11911" class="Bound">ùë©</a> <a id="11913" class="Symbol">:</a> <a id="11915" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="11922" href="Demos.HSP.html#8424" class="Generalizable">Œ≤</a> <a id="11924" href="Demos.HSP.html#8426" class="Generalizable">œÅ·µá</a><a id="11926" class="Symbol">}</a> <a id="11928" class="Keyword">where</a>
 <a id="11935" class="Keyword">open</a> <a id="11940" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="11947" href="Demos.HSP.html#11911" class="Bound">ùë©</a> <a id="11949" class="Keyword">using</a> <a id="11955" class="Symbol">(</a> <a id="11957" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="11961" class="Symbol">;</a> <a id="11963" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="11967" class="Symbol">)</a> <a id="11969" class="Keyword">renaming</a> <a id="11978" class="Symbol">(</a> <a id="11980" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="11988" class="Symbol">to</a> <a id="11991" class="Field">B</a> <a id="11993" class="Symbol">)</a>

 <a id="11997" class="Keyword">data</a> <a id="12002" href="Demos.HSP.html#12002" class="Datatype Operator">Image_‚àã_</a> <a id="12011" class="Symbol">(</a><a id="12012" href="Demos.HSP.html#12012" class="Bound">f</a> <a id="12014" class="Symbol">:</a> <a id="12016" href="Demos.HSP.html#11894" class="Bound">ùë®</a> <a id="12018" href="Demos.HSP.html#7491" class="Record Operator">‚ü∂</a> <a id="12020" href="Demos.HSP.html#11911" class="Bound">ùë©</a><a id="12021" class="Symbol">)</a> <a id="12023" class="Symbol">:</a> <a id="12025" href="Demos.HSP.html#11991" class="Field">B</a> <a id="12027" class="Symbol">‚Üí</a> <a id="12029" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="12034" class="Symbol">(</a><a id="12035" href="Demos.HSP.html#11905" class="Bound">Œ±</a> <a id="12037" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="12039" href="Demos.HSP.html#11922" class="Bound">Œ≤</a> <a id="12041" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="12043" href="Demos.HSP.html#11924" class="Bound">œÅ·µá</a><a id="12045" class="Symbol">)</a> <a id="12047" class="Keyword">where</a>
  <a id="12055" href="Demos.HSP.html#12055" class="InductiveConstructor">eq</a> <a id="12058" class="Symbol">:</a> <a id="12060" class="Symbol">{</a><a id="12061" href="Demos.HSP.html#12061" class="Bound">b</a> <a id="12063" class="Symbol">:</a> <a id="12065" href="Demos.HSP.html#11991" class="Field">B</a><a id="12066" class="Symbol">}</a> <a id="12068" class="Symbol">‚Üí</a> <a id="12070" class="Symbol">‚àÄ</a> <a id="12072" href="Demos.HSP.html#12072" class="Bound">a</a> <a id="12074" class="Symbol">‚Üí</a> <a id="12076" href="Demos.HSP.html#12061" class="Bound">b</a> <a id="12078" href="Relation.Binary.Bundles.html#1098" class="Field Operator">‚âà</a> <a id="12080" href="Demos.HSP.html#12012" class="Bound">f</a> <a id="12082" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="12086" href="Demos.HSP.html#12072" class="Bound">a</a> <a id="12088" class="Symbol">‚Üí</a> <a id="12090" href="Demos.HSP.html#12002" class="Datatype Operator">Image</a> <a id="12096" href="Demos.HSP.html#12012" class="Bound">f</a> <a id="12098" href="Demos.HSP.html#12002" class="Datatype Operator">‚àã</a> <a id="12100" href="Demos.HSP.html#12061" class="Bound">b</a>

</pre>

An inhabitant of the \aod{Image} \ab f \aod{‚àã} \ab b type is a point \ab a of type \ab A,
along with a proof, \ab p~\as :~\ab b \af{‚âà} \ab f~\ab a, that \ab f maps \ab a to \ab b.
Since the witness that \ab b
belongs to the image of \ab f is always accompanied by a concrete witness \AgdaTyped{a}{A}, we can
\emph{compute} a range-restricted right-inverse of \ab f.  For extra certainty, we also verify
that our witness really is an inverse.

<pre class="Agda">

 <a id="12573" href="Demos.HSP.html#12573" class="Function">Inv</a> <a id="12577" class="Symbol">:</a> <a id="12579" class="Symbol">(</a><a id="12580" href="Demos.HSP.html#12580" class="Bound">f</a> <a id="12582" class="Symbol">:</a> <a id="12584" href="Demos.HSP.html#11894" class="Bound">ùë®</a> <a id="12586" href="Demos.HSP.html#7491" class="Record Operator">‚ü∂</a> <a id="12588" href="Demos.HSP.html#11911" class="Bound">ùë©</a><a id="12589" class="Symbol">){</a><a id="12591" href="Demos.HSP.html#12591" class="Bound">b</a> <a id="12593" class="Symbol">:</a> <a id="12595" href="Demos.HSP.html#11991" class="Field">B</a><a id="12596" class="Symbol">}</a> <a id="12598" class="Symbol">‚Üí</a> <a id="12600" href="Demos.HSP.html#12002" class="Datatype Operator">Image</a> <a id="12606" href="Demos.HSP.html#12580" class="Bound">f</a> <a id="12608" href="Demos.HSP.html#12002" class="Datatype Operator">‚àã</a> <a id="12610" href="Demos.HSP.html#12591" class="Bound">b</a> <a id="12612" class="Symbol">‚Üí</a> <a id="12614" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="12622" href="Demos.HSP.html#11894" class="Bound">ùë®</a>
 <a id="12625" href="Demos.HSP.html#12573" class="Function">Inv</a> <a id="12629" class="Symbol">_</a> <a id="12631" class="Symbol">(</a><a id="12632" href="Demos.HSP.html#12055" class="InductiveConstructor">eq</a> <a id="12635" href="Demos.HSP.html#12635" class="Bound">a</a> <a id="12637" class="Symbol">_)</a> <a id="12640" class="Symbol">=</a> <a id="12642" href="Demos.HSP.html#12635" class="Bound">a</a>

 <a id="12646" href="Demos.HSP.html#12646" class="Function">InvIsInverse ≥</a> <a id="12660" class="Symbol">:</a> <a id="12662" class="Symbol">{</a><a id="12663" href="Demos.HSP.html#12663" class="Bound">f</a> <a id="12665" class="Symbol">:</a> <a id="12667" href="Demos.HSP.html#11894" class="Bound">ùë®</a> <a id="12669" href="Demos.HSP.html#7491" class="Record Operator">‚ü∂</a> <a id="12671" href="Demos.HSP.html#11911" class="Bound">ùë©</a><a id="12672" class="Symbol">}{</a><a id="12674" href="Demos.HSP.html#12674" class="Bound">b</a> <a id="12676" class="Symbol">:</a> <a id="12678" href="Demos.HSP.html#11991" class="Field">B</a><a id="12679" class="Symbol">}(</a><a id="12681" href="Demos.HSP.html#12681" class="Bound">q</a> <a id="12683" class="Symbol">:</a> <a id="12685" href="Demos.HSP.html#12002" class="Datatype Operator">Image</a> <a id="12691" href="Demos.HSP.html#12663" class="Bound">f</a> <a id="12693" href="Demos.HSP.html#12002" class="Datatype Operator">‚àã</a> <a id="12695" href="Demos.HSP.html#12674" class="Bound">b</a><a id="12696" class="Symbol">)</a> <a id="12698" class="Symbol">‚Üí</a> <a id="12700" href="Demos.HSP.html#12663" class="Bound">f</a> <a id="12702" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="12706" class="Symbol">(</a><a id="12707" href="Demos.HSP.html#12573" class="Function">Inv</a> <a id="12711" href="Demos.HSP.html#12663" class="Bound">f</a> <a id="12713" href="Demos.HSP.html#12681" class="Bound">q</a><a id="12714" class="Symbol">)</a> <a id="12716" href="Relation.Binary.Bundles.html#1098" class="Field Operator">‚âà</a> <a id="12718" href="Demos.HSP.html#12674" class="Bound">b</a>
 <a id="12721" href="Demos.HSP.html#12646" class="Function">InvIsInverse ≥</a> <a id="12735" class="Symbol">(</a><a id="12736" href="Demos.HSP.html#12055" class="InductiveConstructor">eq</a> <a id="12739" class="Symbol">_</a> <a id="12741" href="Demos.HSP.html#12741" class="Bound">p</a><a id="12742" class="Symbol">)</a> <a id="12744" class="Symbol">=</a> <a id="12746" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="12750" href="Demos.HSP.html#12741" class="Bound">p</a>
</pre>

\paragraph*{Injective and surjective setoid functions}
If \ab{f} : \ab{ùë®} \aor{‚ü∂} \ab{ùë©}
then we call \ab f \defn{injective} provided
\as{‚àÄ} (\ab{a‚ÇÄ} \ab{a‚ÇÅ} \as : \ab{A}), \ab{f} \aofld{‚ü®\$‚ü©} \ab{a‚ÇÄ} \af{‚âà·¥Æ} \ab{f} \aofld{‚ü®\$‚ü©} \ab{a‚ÇÅ}
implies \ab{a‚ÇÄ} \af{‚âà·¥¨} \ab{a‚ÇÅ}; we call \ab{f} \defn{surjective} provided
\as{‚àÄ} (\AgdaTyped{b}{B}), \as{‚àÉ}~(\AgdaTyped{a}{A}) such that \ab{f} \aofld{‚ü®\$‚ü©} \ab{a} \af{‚âà·¥Æ} \ab{b}.
\ifshort
We omit the straightforward \agda definitions.
\else

We represent injective functions on bare types by the
type \af{Injective}, and uses this to define the \af{IsInjective} type to represent
the property of being an injective setoid function. Similarly, the type \af{IsSurjective}
represents the property of being a surjective setoid function. \af{SurjInv} represents the \emph{right-inverse} of a surjective function.

We reproduce the definitions and prove some of their properties
inside the next submodule where we first set the stage by declaring two
setoids \ab{ùë®} and \ab{ùë©}, naming their equality relations, and making some
definitions from the standard library available.

<pre class="Agda">

<a id="13888" class="Keyword">module</a> <a id="13895" href="Demos.HSP.html#13895" class="Module">_</a> <a id="13897" class="Symbol">{</a><a id="13898" href="Demos.HSP.html#13898" class="Bound">ùë®</a> <a id="13900" class="Symbol">:</a> <a id="13902" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="13909" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="13911" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="13913" class="Symbol">}{</a><a id="13915" href="Demos.HSP.html#13915" class="Bound">ùë©</a> <a id="13917" class="Symbol">:</a> <a id="13919" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="13926" href="Demos.HSP.html#8424" class="Generalizable">Œ≤</a> <a id="13928" href="Demos.HSP.html#8426" class="Generalizable">œÅ·µá</a><a id="13930" class="Symbol">}</a> <a id="13932" class="Keyword">where</a>
 <a id="13939" class="Keyword">open</a> <a id="13944" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="13951" href="Demos.HSP.html#13898" class="Bound">ùë®</a> <a id="13953" class="Keyword">using</a> <a id="13959" class="Symbol">()</a> <a id="13962" class="Keyword">renaming</a> <a id="13971" class="Symbol">(</a> <a id="13973" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="13977" class="Symbol">to</a> <a id="13980" class="Field Operator">_‚âà·¥¨_</a> <a id="13985" class="Symbol">)</a>
 <a id="13988" class="Keyword">open</a> <a id="13993" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="14000" href="Demos.HSP.html#13915" class="Bound">ùë©</a> <a id="14002" class="Keyword">using</a> <a id="14008" class="Symbol">()</a> <a id="14011" class="Keyword">renaming</a> <a id="14020" class="Symbol">(</a> <a id="14022" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="14026" class="Symbol">to</a> <a id="14029" class="Field Operator">_‚âà·¥Æ_</a> <a id="14034" class="Symbol">)</a>
 <a id="14037" class="Keyword">open</a> <a id="14042" href="Function.Definitions.html" class="Module">FD</a> <a id="14045" href="Demos.HSP.html#13980" class="Function Operator">_‚âà·¥¨_</a> <a id="14050" href="Demos.HSP.html#14029" class="Field Operator">_‚âà·¥Æ_</a>

 <a id="14057" href="Demos.HSP.html#14057" class="Function">IsInjective</a> <a id="14069" class="Symbol">:</a> <a id="14071" class="Symbol">(</a><a id="14072" href="Demos.HSP.html#13898" class="Bound">ùë®</a> <a id="14074" href="Demos.HSP.html#7491" class="Record Operator">‚ü∂</a> <a id="14076" href="Demos.HSP.html#13915" class="Bound">ùë©</a><a id="14077" class="Symbol">)</a> <a id="14079" class="Symbol">‚Üí</a>  <a id="14082" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="14087" class="Symbol">(</a><a id="14088" href="Demos.HSP.html#13909" class="Bound">Œ±</a> <a id="14090" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="14092" href="Demos.HSP.html#13911" class="Bound">œÅ·µÉ</a> <a id="14095" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="14097" href="Demos.HSP.html#13928" class="Bound">œÅ·µá</a><a id="14099" class="Symbol">)</a>
 <a id="14102" href="Demos.HSP.html#14057" class="Function">IsInjective</a> <a id="14114" href="Demos.HSP.html#14114" class="Bound">f</a> <a id="14116" class="Symbol">=</a> <a id="14118" href="Function.Definitions.html#889" class="Function">Injective</a> <a id="14128" class="Symbol">(</a><a id="14129" href="Demos.HSP.html#7592" class="Field Operator">_‚ü®$‚ü©_</a> <a id="14135" href="Demos.HSP.html#14114" class="Bound">f</a><a id="14136" class="Symbol">)</a>

 <a id="14140" href="Demos.HSP.html#14140" class="Function">IsSurjective</a> <a id="14153" class="Symbol">:</a> <a id="14155" class="Symbol">(</a><a id="14156" href="Demos.HSP.html#13898" class="Bound">ùë®</a> <a id="14158" href="Demos.HSP.html#7491" class="Record Operator">‚ü∂</a> <a id="14160" href="Demos.HSP.html#13915" class="Bound">ùë©</a><a id="14161" class="Symbol">)</a> <a id="14163" class="Symbol">‚Üí</a>  <a id="14166" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="14171" class="Symbol">(</a><a id="14172" href="Demos.HSP.html#13909" class="Bound">Œ±</a> <a id="14174" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="14176" href="Demos.HSP.html#13926" class="Bound">Œ≤</a> <a id="14178" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="14180" href="Demos.HSP.html#13928" class="Bound">œÅ·µá</a><a id="14182" class="Symbol">)</a>
 <a id="14185" href="Demos.HSP.html#14140" class="Function">IsSurjective</a> <a id="14198" href="Demos.HSP.html#14198" class="Bound">F</a> <a id="14200" class="Symbol">=</a> <a id="14202" class="Symbol">‚àÄ</a> <a id="14204" class="Symbol">{</a><a id="14205" href="Demos.HSP.html#14205" class="Bound">y</a><a id="14206" class="Symbol">}</a> <a id="14208" class="Symbol">‚Üí</a> <a id="14210" href="Demos.HSP.html#12002" class="Datatype Operator">Image</a> <a id="14216" href="Demos.HSP.html#14198" class="Bound">F</a> <a id="14218" href="Demos.HSP.html#12002" class="Datatype Operator">‚àã</a> <a id="14220" href="Demos.HSP.html#14205" class="Bound">y</a>

 <a id="14224" href="Demos.HSP.html#14224" class="Function">SurjInv</a> <a id="14232" class="Symbol">:</a> <a id="14234" class="Symbol">(</a><a id="14235" href="Demos.HSP.html#14235" class="Bound">f</a> <a id="14237" class="Symbol">:</a> <a id="14239" href="Demos.HSP.html#13898" class="Bound">ùë®</a> <a id="14241" href="Demos.HSP.html#7491" class="Record Operator">‚ü∂</a> <a id="14243" href="Demos.HSP.html#13915" class="Bound">ùë©</a><a id="14244" class="Symbol">)</a> <a id="14246" class="Symbol">‚Üí</a> <a id="14248" href="Demos.HSP.html#14140" class="Function">IsSurjective</a> <a id="14261" href="Demos.HSP.html#14235" class="Bound">f</a> <a id="14263" class="Symbol">‚Üí</a> <a id="14265" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="14273" href="Demos.HSP.html#13915" class="Bound">ùë©</a> <a id="14275" class="Symbol">‚Üí</a> <a id="14277" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="14285" href="Demos.HSP.html#13898" class="Bound">ùë®</a>
 <a id="14288" href="Demos.HSP.html#14224" class="Function">SurjInv</a> <a id="14296" href="Demos.HSP.html#14296" class="Bound">f</a> <a id="14298" href="Demos.HSP.html#14298" class="Bound">fonto</a> <a id="14304" href="Demos.HSP.html#14304" class="Bound">b</a> <a id="14306" class="Symbol">=</a> <a id="14308" href="Demos.HSP.html#12573" class="Function">Inv</a> <a id="14312" href="Demos.HSP.html#14296" class="Bound">f</a> <a id="14314" class="Symbol">(</a><a id="14315" href="Demos.HSP.html#14298" class="Bound">fonto</a> <a id="14321" class="Symbol">{</a><a id="14322" href="Demos.HSP.html#14304" class="Bound">b</a><a id="14323" class="Symbol">})</a>

</pre>

Proving that the composition of injective setoid functions is again injective
is simply a matter of composing the two assumed witnesses to injectivity.
Proving that surjectivity is preserved under composition is only slightly more involved.

<pre class="Agda">

<a id="14595" class="Keyword">module</a> <a id="14602" href="Demos.HSP.html#14602" class="Module">_</a>  <a id="14605" class="Symbol">{</a><a id="14606" href="Demos.HSP.html#14606" class="Bound">ùë®</a> <a id="14608" class="Symbol">:</a> <a id="14610" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="14617" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="14619" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="14621" class="Symbol">}{</a><a id="14623" href="Demos.HSP.html#14623" class="Bound">ùë©</a> <a id="14625" class="Symbol">:</a> <a id="14627" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="14634" href="Demos.HSP.html#8424" class="Generalizable">Œ≤</a> <a id="14636" href="Demos.HSP.html#8426" class="Generalizable">œÅ·µá</a><a id="14638" class="Symbol">}{</a><a id="14640" href="Demos.HSP.html#14640" class="Bound">ùë™</a> <a id="14642" class="Symbol">:</a> <a id="14644" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="14651" href="Demos.HSP.html#8429" class="Generalizable">Œ≥</a> <a id="14653" href="Demos.HSP.html#8431" class="Generalizable">œÅ·∂ú</a><a id="14655" class="Symbol">}</a>
          <a id="14667" class="Symbol">(</a><a id="14668" href="Demos.HSP.html#14668" class="Bound">f</a> <a id="14670" class="Symbol">:</a> <a id="14672" href="Demos.HSP.html#14606" class="Bound">ùë®</a> <a id="14674" href="Demos.HSP.html#7491" class="Record Operator">‚ü∂</a> <a id="14676" href="Demos.HSP.html#14623" class="Bound">ùë©</a><a id="14677" class="Symbol">)(</a><a id="14679" href="Demos.HSP.html#14679" class="Bound">g</a> <a id="14681" class="Symbol">:</a> <a id="14683" href="Demos.HSP.html#14623" class="Bound">ùë©</a> <a id="14685" href="Demos.HSP.html#7491" class="Record Operator">‚ü∂</a> <a id="14687" href="Demos.HSP.html#14640" class="Bound">ùë™</a><a id="14688" class="Symbol">)</a> <a id="14690" class="Keyword">where</a>

 <a id="14698" href="Demos.HSP.html#14698" class="Function">‚àò-IsInjective</a> <a id="14712" class="Symbol">:</a> <a id="14714" href="Demos.HSP.html#14057" class="Function">IsInjective</a> <a id="14726" href="Demos.HSP.html#14668" class="Bound">f</a> <a id="14728" class="Symbol">‚Üí</a> <a id="14730" href="Demos.HSP.html#14057" class="Function">IsInjective</a> <a id="14742" href="Demos.HSP.html#14679" class="Bound">g</a> <a id="14744" class="Symbol">‚Üí</a> <a id="14746" href="Demos.HSP.html#14057" class="Function">IsInjective</a> <a id="14758" class="Symbol">(</a><a id="14759" href="Demos.HSP.html#14679" class="Bound">g</a> <a id="14761" href="Demos.HSP.html#11476" class="Function Operator">‚ü®‚àò‚ü©</a> <a id="14765" href="Demos.HSP.html#14668" class="Bound">f</a><a id="14766" class="Symbol">)</a>
 <a id="14769" href="Demos.HSP.html#14698" class="Function">‚àò-IsInjective</a> <a id="14783" href="Demos.HSP.html#14783" class="Bound">finj</a> <a id="14788" href="Demos.HSP.html#14788" class="Bound">ginj</a> <a id="14793" class="Symbol">=</a> <a id="14795" href="Demos.HSP.html#14783" class="Bound">finj</a> <a id="14800" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="14802" href="Demos.HSP.html#14788" class="Bound">ginj</a>

 <a id="14809" href="Demos.HSP.html#14809" class="Function">‚àò-IsSurjective</a> <a id="14824" class="Symbol">:</a> <a id="14826" href="Demos.HSP.html#14140" class="Function">IsSurjective</a> <a id="14839" href="Demos.HSP.html#14668" class="Bound">f</a> <a id="14841" class="Symbol">‚Üí</a> <a id="14843" href="Demos.HSP.html#14140" class="Function">IsSurjective</a> <a id="14856" href="Demos.HSP.html#14679" class="Bound">g</a> <a id="14858" class="Symbol">‚Üí</a> <a id="14860" href="Demos.HSP.html#14140" class="Function">IsSurjective</a> <a id="14873" class="Symbol">(</a><a id="14874" href="Demos.HSP.html#14679" class="Bound">g</a> <a id="14876" href="Demos.HSP.html#11476" class="Function Operator">‚ü®‚àò‚ü©</a> <a id="14880" href="Demos.HSP.html#14668" class="Bound">f</a><a id="14881" class="Symbol">)</a>
 <a id="14884" href="Demos.HSP.html#14809" class="Function">‚àò-IsSurjective</a> <a id="14899" href="Demos.HSP.html#14899" class="Bound">fonto</a> <a id="14905" href="Demos.HSP.html#14905" class="Bound">gonto</a> <a id="14911" class="Symbol">{</a><a id="14912" href="Demos.HSP.html#14912" class="Bound">y</a><a id="14913" class="Symbol">}</a> <a id="14915" class="Symbol">=</a> <a id="14917" href="Demos.HSP.html#15119" class="Function">Goal</a>
  <a id="14924" class="Keyword">where</a>
  <a id="14932" href="Demos.HSP.html#14932" class="Function">mp</a> <a id="14935" class="Symbol">:</a> <a id="14937" href="Demos.HSP.html#12002" class="Datatype Operator">Image</a> <a id="14943" href="Demos.HSP.html#14679" class="Bound">g</a> <a id="14945" href="Demos.HSP.html#12002" class="Datatype Operator">‚àã</a> <a id="14947" href="Demos.HSP.html#14912" class="Bound">y</a> <a id="14949" class="Symbol">‚Üí</a> <a id="14951" href="Demos.HSP.html#12002" class="Datatype Operator">Image</a> <a id="14957" href="Demos.HSP.html#14679" class="Bound">g</a> <a id="14959" href="Demos.HSP.html#11476" class="Function Operator">‚ü®‚àò‚ü©</a> <a id="14963" href="Demos.HSP.html#14668" class="Bound">f</a> <a id="14965" href="Demos.HSP.html#12002" class="Datatype Operator">‚àã</a> <a id="14967" href="Demos.HSP.html#14912" class="Bound">y</a>
  <a id="14971" href="Demos.HSP.html#14932" class="Function">mp</a> <a id="14974" class="Symbol">(</a><a id="14975" href="Demos.HSP.html#12055" class="InductiveConstructor">eq</a> <a id="14978" href="Demos.HSP.html#14978" class="Bound">c</a> <a id="14980" href="Demos.HSP.html#14980" class="Bound">p</a><a id="14981" class="Symbol">)</a> <a id="14983" class="Symbol">=</a> <a id="14985" href="Demos.HSP.html#15038" class="Function">Œ∑</a> <a id="14987" href="Demos.HSP.html#14899" class="Bound">fonto</a>
   <a id="14996" class="Keyword">where</a>
   <a id="15005" class="Keyword">open</a> <a id="15010" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="15017" href="Demos.HSP.html#14640" class="Bound">ùë™</a> <a id="15019" class="Keyword">using</a> <a id="15025" class="Symbol">(</a> <a id="15027" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="15033" class="Symbol">)</a>
   <a id="15038" href="Demos.HSP.html#15038" class="Function">Œ∑</a> <a id="15040" class="Symbol">:</a> <a id="15042" href="Demos.HSP.html#12002" class="Datatype Operator">Image</a> <a id="15048" href="Demos.HSP.html#14668" class="Bound">f</a> <a id="15050" href="Demos.HSP.html#12002" class="Datatype Operator">‚àã</a> <a id="15052" href="Demos.HSP.html#14978" class="Bound">c</a> <a id="15054" class="Symbol">‚Üí</a> <a id="15056" href="Demos.HSP.html#12002" class="Datatype Operator">Image</a> <a id="15062" href="Demos.HSP.html#14679" class="Bound">g</a> <a id="15064" href="Demos.HSP.html#11476" class="Function Operator">‚ü®‚àò‚ü©</a> <a id="15068" href="Demos.HSP.html#14668" class="Bound">f</a> <a id="15070" href="Demos.HSP.html#12002" class="Datatype Operator">‚àã</a> <a id="15072" href="Demos.HSP.html#14912" class="Bound">y</a>
   <a id="15077" href="Demos.HSP.html#15038" class="Function">Œ∑</a> <a id="15079" class="Symbol">(</a><a id="15080" href="Demos.HSP.html#12055" class="InductiveConstructor">eq</a> <a id="15083" href="Demos.HSP.html#15083" class="Bound">a</a> <a id="15085" href="Demos.HSP.html#15085" class="Bound">q</a><a id="15086" class="Symbol">)</a> <a id="15088" class="Symbol">=</a> <a id="15090" href="Demos.HSP.html#12055" class="InductiveConstructor">eq</a> <a id="15093" href="Demos.HSP.html#15083" class="Bound">a</a> <a id="15095" class="Symbol">(</a><a id="15096" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="15102" href="Demos.HSP.html#14980" class="Bound">p</a> <a id="15104" class="Symbol">(</a><a id="15105" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="15110" href="Demos.HSP.html#14679" class="Bound">g</a> <a id="15112" href="Demos.HSP.html#15085" class="Bound">q</a><a id="15113" class="Symbol">))</a>

  <a id="15119" href="Demos.HSP.html#15119" class="Function">Goal</a> <a id="15124" class="Symbol">:</a> <a id="15126" href="Demos.HSP.html#12002" class="Datatype Operator">Image</a> <a id="15132" href="Demos.HSP.html#14679" class="Bound">g</a> <a id="15134" href="Demos.HSP.html#11476" class="Function Operator">‚ü®‚àò‚ü©</a> <a id="15138" href="Demos.HSP.html#14668" class="Bound">f</a> <a id="15140" href="Demos.HSP.html#12002" class="Datatype Operator">‚àã</a> <a id="15142" href="Demos.HSP.html#14912" class="Bound">y</a>
  <a id="15146" href="Demos.HSP.html#15119" class="Function">Goal</a> <a id="15151" class="Symbol">=</a> <a id="15153" href="Demos.HSP.html#14932" class="Function">mp</a> <a id="15156" href="Demos.HSP.html#14905" class="Bound">gonto</a>
</pre>
\fi

\paragraph*{Kernels of setoid functions}
The \defn{kernel} of a function \ab f~\as :~\ab A~\as{‚Üí}~\ab B (where \ab A and \ab B are
bare types) is defined informally by \{\AgdaPair{x}{y} \aod{‚àà} \ab A \aof{√ó} \ab A \as :
\ab f \ab x \as{=} \ab f \ab y \}. This can be represented in \agda in a number of ways,
but for our purposes it is convenient to define the kernel as an inhabitant of a (unary)
predicate over \ab A \aof{√ó} \ab A, where \ab A is the function's domain, as follows.

<pre class="Agda">

<a id="kernel"></a><a id="15677" href="Demos.HSP.html#15677" class="Function">kernel</a> <a id="15684" class="Symbol">:</a> <a id="15686" class="Symbol">{</a><a id="15687" href="Demos.HSP.html#15687" class="Bound">A</a> <a id="15689" class="Symbol">:</a> <a id="15691" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="15696" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a><a id="15697" class="Symbol">}{</a><a id="15699" href="Demos.HSP.html#15699" class="Bound">B</a> <a id="15701" class="Symbol">:</a> <a id="15703" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="15708" href="Demos.HSP.html#8424" class="Generalizable">Œ≤</a><a id="15709" class="Symbol">}</a> <a id="15711" class="Symbol">‚Üí</a> <a id="15713" href="Relation.Binary.Core.html#882" class="Function">Rel</a> <a id="15717" href="Demos.HSP.html#15699" class="Bound">B</a> <a id="15719" href="Demos.HSP.html#8439" class="Generalizable">œÅ</a> <a id="15721" class="Symbol">‚Üí</a> <a id="15723" class="Symbol">(</a><a id="15724" href="Demos.HSP.html#15687" class="Bound">A</a> <a id="15726" class="Symbol">‚Üí</a> <a id="15728" href="Demos.HSP.html#15699" class="Bound">B</a><a id="15729" class="Symbol">)</a> <a id="15731" class="Symbol">‚Üí</a> <a id="15733" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="15738" class="Symbol">(</a><a id="15739" href="Demos.HSP.html#15687" class="Bound">A</a> <a id="15741" href="Data.Product.html#1167" class="Function Operator">√ó</a> <a id="15743" href="Demos.HSP.html#15687" class="Bound">A</a><a id="15744" class="Symbol">)</a> <a id="15746" href="Demos.HSP.html#8439" class="Generalizable">œÅ</a>
<a id="15748" href="Demos.HSP.html#15677" class="Function">kernel</a> <a id="15755" href="Demos.HSP.html#15755" class="Bound Operator">_‚âà_</a> <a id="15759" href="Demos.HSP.html#15759" class="Bound">f</a> <a id="15761" class="Symbol">(</a><a id="15762" href="Demos.HSP.html#15762" class="Bound">x</a> <a id="15764" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="15766" href="Demos.HSP.html#15766" class="Bound">y</a><a id="15767" class="Symbol">)</a> <a id="15769" class="Symbol">=</a> <a id="15771" href="Demos.HSP.html#15759" class="Bound">f</a> <a id="15773" href="Demos.HSP.html#15762" class="Bound">x</a> <a id="15775" href="Demos.HSP.html#15755" class="Bound Operator">‚âà</a> <a id="15777" href="Demos.HSP.html#15759" class="Bound">f</a> <a id="15779" href="Demos.HSP.html#15766" class="Bound">y</a>

</pre>
The kernel of a \emph{setoid} function \ab f \as : \ab{ùê¥} \aor{‚ü∂} \ab{ùêµ} is
defined similarly.

\ifshort\else
<pre class="Agda">
<a id="15916" class="Keyword">module</a> <a id="15923" href="Demos.HSP.html#15923" class="Module">_</a> <a id="15925" class="Symbol">{</a><a id="15926" href="Demos.HSP.html#15926" class="Bound">ùê¥</a> <a id="15928" class="Symbol">:</a> <a id="15930" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="15937" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="15939" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="15941" class="Symbol">}{</a><a id="15943" href="Demos.HSP.html#15943" class="Bound">ùêµ</a> <a id="15945" class="Symbol">:</a> <a id="15947" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="15954" href="Demos.HSP.html#8424" class="Generalizable">Œ≤</a> <a id="15956" href="Demos.HSP.html#8426" class="Generalizable">œÅ·µá</a><a id="15958" class="Symbol">}</a> <a id="15960" class="Keyword">where</a>
 <a id="15967" class="Keyword">open</a> <a id="15972" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="15979" href="Demos.HSP.html#15926" class="Bound">ùê¥</a> <a id="15981" class="Keyword">using</a> <a id="15987" class="Symbol">()</a> <a id="15990" class="Keyword">renaming</a> <a id="15999" class="Symbol">(</a> <a id="16001" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="16009" class="Symbol">to</a> <a id="16012" class="Field">A</a> <a id="16014" class="Symbol">)</a>
</pre>
\fi
<pre class="Agda">

 <a id="16046" href="Demos.HSP.html#16046" class="Function">ker</a> <a id="16050" class="Symbol">:</a> <a id="16052" class="Symbol">(</a><a id="16053" href="Demos.HSP.html#15926" class="Bound">ùê¥</a> <a id="16055" href="Demos.HSP.html#7491" class="Record Operator">‚ü∂</a> <a id="16057" href="Demos.HSP.html#15943" class="Bound">ùêµ</a><a id="16058" class="Symbol">)</a> <a id="16060" class="Symbol">‚Üí</a> <a id="16062" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="16067" class="Symbol">(</a><a id="16068" href="Demos.HSP.html#16012" class="Function">A</a> <a id="16070" href="Data.Product.html#1167" class="Function Operator">√ó</a> <a id="16072" href="Demos.HSP.html#16012" class="Function">A</a><a id="16073" class="Symbol">)</a> <a id="16075" href="Demos.HSP.html#15956" class="Bound">œÅ·µá</a>
 <a id="16079" href="Demos.HSP.html#16046" class="Function">ker</a> <a id="16083" href="Demos.HSP.html#16083" class="Bound">g</a> <a id="16085" class="Symbol">(</a><a id="16086" href="Demos.HSP.html#16086" class="Bound">x</a> <a id="16088" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="16090" href="Demos.HSP.html#16090" class="Bound">y</a><a id="16091" class="Symbol">)</a> <a id="16093" class="Symbol">=</a> <a id="16095" href="Demos.HSP.html#16083" class="Bound">g</a> <a id="16097" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="16101" href="Demos.HSP.html#16086" class="Bound">x</a> <a id="16103" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a> <a id="16105" href="Demos.HSP.html#16083" class="Bound">g</a> <a id="16107" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="16111" href="Demos.HSP.html#16090" class="Bound">y</a> <a id="16113" class="Keyword">where</a> <a id="16119" class="Keyword">open</a> <a id="16124" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="16131" href="Demos.HSP.html#15943" class="Bound">ùêµ</a> <a id="16133" class="Keyword">using</a> <a id="16139" class="Symbol">(</a> <a id="16141" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="16145" class="Symbol">)</a>
</pre>


%% -------------------------------------------------------------------------------------

\section{Basic Universal Algebra}
\label{basic-universal-algebra}
We now develop a working vocabulary in \mltt corresponding to classical,
single-sorted, set-based universal algebra.
We cover a number of important concepts, but limit ourselves to those
required to prove Birkhoff's HSP theorem.
In each case, we give a type-theoretic version of the informal definition,
followed by an \agda implementation.

This section is organized into the following subsections:
¬ß\ref{signatures} defines a general notion of \emph{signature} of a structure and
then defines a type that represent signatures;
¬ß\ref{algebras} does the same for \emph{algebraic structures} and \emph{product algebras};
¬ß\ref{homomorphisms} defines \emph{homomorphisms}, \emph{monomorphisms}, and \emph{epimorphisms},
presents types that codify these concepts, and formally verifies some of their basic properties;
¬ß¬ß\ref{subalgebras}--\ref{terms} do the same for \emph{subalgebras} and \emph{terms}, respectively.

%% -----------------------------------------------------------------------------
\subsection{Signatures}
\label{signatures}

\ifshort
An (algebraic) \defn{signature}
\else
In model theory, the \defn{signature} of a structure is a quadruple \ab{ùëÜ} = (\ab{C},
\ab{F}, \ab{R}, \ab{œÅ}) consisting of three (possibly empty) sets \ab{C}, \ab{F}, and
\ab{R}---called \emph{constant}, \emph{function}, and \emph{relation} symbols,
respectively---along with a function \ab{œÅ} : \ab{C} \as{+} \ab{F} \as{+} \ab{R}
\as{‚Üí} \ab{N} that assigns an \emph{arity} to each symbol. Often, but not always, \ab{N}
is taken to be the set of natural numbers.

As our focus here is universal algebra, we consider the restricted notion of an
\emph{algebraic signature}, that is, a signature for ``purely algebraic'' structures. Such
a signature
\fi
is a pair \ab{ùëÜ} = \AgdaPair{F}{œÅ} where \ab{F} is a collection of
\defn{operation symbols} and \ab{œÅ} : \ab{F} \as{‚Üí} \ab{N} is an \defn{arity function}
which maps each operation symbol to its arity. Here, \ab{N} denotes the \emph{arity type}.
Heuristically, the arity \ab{œÅ} \ab{f} of an operation symbol \ab{f} \as{‚àà} \ab{F} may be
thought of as the number of arguments that \ab{f} takes as ``input.''
Here (and in the Agda Universal Algebra Library) we represent signatures in a very general way, as the
inhabitants of the following dependent pair type.

\begin{center}

\AgdaFunction{Signature}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{ùìû}\AgdaSpace{}%
\AgdaBound{ùì•}\AgdaSpace{}%
\AgdaSymbol{:}\AgdaSpace{}%
\AgdaPostulate{Level}\AgdaSymbol{)}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaPrimitive{Type}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaPrimitive{lsuc}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{ùìû}\AgdaSpace{}%
\AgdaOperator{\AgdaPrimitive{‚äî}}\AgdaSpace{}%
\AgdaBound{ùì•}\AgdaSymbol{))}\\[4pt]
\AgdaFunction{Signature}\AgdaSpace{}%
\AgdaBound{ùìû}\AgdaSpace{}%
\AgdaBound{ùì•}\AgdaSpace{}%
\AgdaSymbol{=}\AgdaSpace{}%
\AgdaFunction{Œ£[}\AgdaSpace{}%
\AgdaBound{F}\AgdaSpace{}%
\AgdaFunction{‚àà}\AgdaSpace{}%
\AgdaPrimitive{Type}\AgdaSpace{}%
\AgdaBound{ùìû}\AgdaSpace{}%
\AgdaFunction{]}\AgdaSpace{}%
\AgdaSymbol{(}\AgdaBound{F}\AgdaSpace{}%
\AgdaSymbol{‚Üí}\AgdaSpace{}%
\AgdaPrimitive{Type}\AgdaSpace{}%
\AgdaBound{ùì•}\AgdaSymbol{)}

\end{center}
Recalling our syntax for the first and second
projections, if \ab{ùëÜ} %\as{:} \af{Signature} \ab{ùìû} \ab{ùì•}
is a signature, then
\aof{‚à£} \ab{ùëÜ} \aof{‚à£} denotes the set of operation symbols and \aof{‚à•} \ab{ùëÜ} \aof{‚à•} denotes the arity function.
Thus, if \ab{f} \as{:} \aof{‚à£} \ab{ùëÜ} \aof{‚à£} is an operation symbol in the
signature \ab{ùëÜ}, then \aof{‚à•} \ab{ùëÜ} \aof{‚à•} \ab{f} is the arity of \ab{f}.

We need to augment the \af{Signature} type so that it supports algebras over setoid domains.
\ifshort\else
To do so---following Andreas Abel's lead (cf.~\cite{Abel:2021})---we
define an operator that translates an ordinary signature into a \defn{setoid signature},
that is, a signature over a setoid domain.
\fi
This raises a minor technical issue:
given operations \ab{f} and \ab{g}, with arguments
\ab{u} \as{:} \aof{‚à•} \ab{ùëÜ} \aof{‚à•} \ab{f} \as{‚Üí}\ab{A} and \ab{v} \as{:} \aof{‚à•} \ab{ùëÜ}
\aof{‚à•} \ab{g} \as{‚Üí} \ab{A}, respectively, and a proof that \ab{f} \aod{‚â°} \ab{g} (i.e.
intensionally), we ought to be able to check whether \ab u and \ab v are pointwise
equal. Technically, \ab{u} and \ab{v} appear to inhabit different types; this is where the
hypothesis \ab f \aod{‚â°} \ab g comes in, as we see in the definition of \af{EqArgs} below (adapted
from Andreas Abel's development~\cite{Abel:2021}).

<pre class="Agda">

<a id="EqArgs"></a><a id="20833" href="Demos.HSP.html#20833" class="Function">EqArgs</a> <a id="20840" class="Symbol">:</a>  <a id="20843" class="Symbol">{</a><a id="20844" href="Demos.HSP.html#20844" class="Bound">ùëÜ</a> <a id="20846" class="Symbol">:</a> <a id="20848" href="Base.Algebras.Basic.html#3888" class="Function">Signature</a> <a id="20858" href="Demos.HSP.html#6194" class="Bound">ùìû</a> <a id="20860" href="Demos.HSP.html#6196" class="Bound">ùì•</a><a id="20861" class="Symbol">}{</a><a id="20863" href="Demos.HSP.html#20863" class="Bound">Œæ</a> <a id="20865" class="Symbol">:</a> <a id="20867" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="20874" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="20876" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="20878" class="Symbol">}</a>
 <a id="20881" class="Symbol">‚Üí</a>        <a id="20890" class="Symbol">‚àÄ</a> <a id="20892" class="Symbol">{</a><a id="20893" href="Demos.HSP.html#20893" class="Bound">f</a> <a id="20895" href="Demos.HSP.html#20895" class="Bound">g</a><a id="20896" class="Symbol">}</a> <a id="20898" class="Symbol">‚Üí</a> <a id="20900" href="Demos.HSP.html#20893" class="Bound">f</a> <a id="20902" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">‚â°</a> <a id="20904" href="Demos.HSP.html#20895" class="Bound">g</a> <a id="20906" class="Symbol">‚Üí</a> <a id="20908" class="Symbol">(</a><a id="20909" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a> <a id="20911" href="Demos.HSP.html#20844" class="Bound">ùëÜ</a> <a id="20913" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a> <a id="20915" href="Demos.HSP.html#20893" class="Bound">f</a> <a id="20917" class="Symbol">‚Üí</a> <a id="20919" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="20927" href="Demos.HSP.html#20863" class="Bound">Œæ</a><a id="20928" class="Symbol">)</a> <a id="20930" class="Symbol">‚Üí</a> <a id="20932" class="Symbol">(</a><a id="20933" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a> <a id="20935" href="Demos.HSP.html#20844" class="Bound">ùëÜ</a> <a id="20937" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a> <a id="20939" href="Demos.HSP.html#20895" class="Bound">g</a> <a id="20941" class="Symbol">‚Üí</a> <a id="20943" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="20951" href="Demos.HSP.html#20863" class="Bound">Œæ</a><a id="20952" class="Symbol">)</a> <a id="20954" class="Symbol">‚Üí</a> <a id="20956" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="20961" class="Symbol">(</a><a id="20962" href="Demos.HSP.html#6196" class="Bound">ùì•</a> <a id="20964" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="20966" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="20968" class="Symbol">)</a>
<a id="20970" href="Demos.HSP.html#20833" class="Function">EqArgs</a> <a id="20977" class="Symbol">{</a><a id="20978" class="Argument">Œæ</a> <a id="20980" class="Symbol">=</a> <a id="20982" href="Demos.HSP.html#20982" class="Bound">Œæ</a><a id="20983" class="Symbol">}</a> <a id="20985" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="20992" href="Demos.HSP.html#20992" class="Bound">u</a> <a id="20994" href="Demos.HSP.html#20994" class="Bound">v</a> <a id="20996" class="Symbol">=</a> <a id="20998" class="Symbol">‚àÄ</a> <a id="21000" href="Demos.HSP.html#21000" class="Bound">i</a> <a id="21002" class="Symbol">‚Üí</a> <a id="21004" href="Demos.HSP.html#20992" class="Bound">u</a> <a id="21006" href="Demos.HSP.html#21000" class="Bound">i</a> <a id="21008" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a> <a id="21010" href="Demos.HSP.html#20994" class="Bound">v</a> <a id="21012" href="Demos.HSP.html#21000" class="Bound">i</a> <a id="21014" class="Keyword">where</a> <a id="21020" class="Keyword">open</a> <a id="21025" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="21032" href="Demos.HSP.html#20982" class="Bound">Œæ</a> <a id="21034" class="Keyword">using</a> <a id="21040" class="Symbol">(</a> <a id="21042" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="21046" class="Symbol">)</a>

</pre>
\noindent
This enables us to define an operator which translates a signature for algebras over bare types into a signature for algebras over setoids.
\ifshort\else
We denote this operator by \aof{‚ü®\AgdaUnderscore{}‚ü©} and define it as follows.
\fi

<pre class="Agda">

<a id="‚ü®_‚ü©"></a><a id="21322" href="Demos.HSP.html#21322" class="Function Operator">‚ü®_‚ü©</a> <a id="21326" class="Symbol">:</a> <a id="21328" href="Base.Algebras.Basic.html#3888" class="Function">Signature</a> <a id="21338" href="Demos.HSP.html#6194" class="Bound">ùìû</a> <a id="21340" href="Demos.HSP.html#6196" class="Bound">ùì•</a> <a id="21342" class="Symbol">‚Üí</a> <a id="21344" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="21351" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="21353" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a> <a id="21356" class="Symbol">‚Üí</a> <a id="21358" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="21365" class="Symbol">_</a> <a id="21367" class="Symbol">_</a>

<a id="21370" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a>  <a id="21379" class="Symbol">(</a><a id="21380" href="Demos.HSP.html#21322" class="Function Operator">‚ü®</a> <a id="21382" href="Demos.HSP.html#21382" class="Bound">ùëÜ</a> <a id="21384" href="Demos.HSP.html#21322" class="Function Operator">‚ü©</a> <a id="21386" href="Demos.HSP.html#21386" class="Bound">Œæ</a><a id="21387" class="Symbol">)</a>                <a id="21404" class="Symbol">=</a> <a id="21406" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="21409" href="Demos.HSP.html#21409" class="Bound">f</a> <a id="21411" href="Data.Product.html#916" class="Function">‚àà</a> <a id="21413" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="21415" href="Demos.HSP.html#21382" class="Bound">ùëÜ</a> <a id="21417" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="21419" href="Data.Product.html#916" class="Function">]</a> <a id="21421" class="Symbol">(</a><a id="21422" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a> <a id="21424" href="Demos.HSP.html#21382" class="Bound">ùëÜ</a> <a id="21426" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a> <a id="21428" href="Demos.HSP.html#21409" class="Bound">f</a> <a id="21430" class="Symbol">‚Üí</a> <a id="21432" href="Demos.HSP.html#21386" class="Bound">Œæ</a> <a id="21434" class="Symbol">.</a><a id="21435" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a><a id="21442" class="Symbol">)</a>
<a id="21444" href="Demos.HSP.html#7873" class="Field Operator">_‚âàÀ¢_</a>     <a id="21453" class="Symbol">(</a><a id="21454" href="Demos.HSP.html#21322" class="Function Operator">‚ü®</a> <a id="21456" href="Demos.HSP.html#21456" class="Bound">ùëÜ</a> <a id="21458" href="Demos.HSP.html#21322" class="Function Operator">‚ü©</a> <a id="21460" href="Demos.HSP.html#21460" class="Bound">Œæ</a><a id="21461" class="Symbol">)(</a><a id="21463" href="Demos.HSP.html#21463" class="Bound">f</a> <a id="21465" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="21467" href="Demos.HSP.html#21467" class="Bound">u</a><a id="21468" class="Symbol">)(</a><a id="21470" href="Demos.HSP.html#21470" class="Bound">g</a> <a id="21472" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="21474" href="Demos.HSP.html#21474" class="Bound">v</a><a id="21475" class="Symbol">)</a>  <a id="21478" class="Symbol">=</a> <a id="21480" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="21483" href="Demos.HSP.html#21483" class="Bound">eqv</a> <a id="21487" href="Data.Product.html#916" class="Function">‚àà</a> <a id="21489" href="Demos.HSP.html#21463" class="Bound">f</a> <a id="21491" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">‚â°</a> <a id="21493" href="Demos.HSP.html#21470" class="Bound">g</a> <a id="21495" href="Data.Product.html#916" class="Function">]</a> <a id="21497" href="Demos.HSP.html#20833" class="Function">EqArgs</a><a id="21503" class="Symbol">{</a><a id="21504" class="Argument">Œæ</a> <a id="21506" class="Symbol">=</a> <a id="21508" href="Demos.HSP.html#21460" class="Bound">Œæ</a><a id="21509" class="Symbol">}</a> <a id="21511" href="Demos.HSP.html#21483" class="Bound">eqv</a> <a id="21515" href="Demos.HSP.html#21467" class="Bound">u</a> <a id="21517" href="Demos.HSP.html#21474" class="Bound">v</a>

<a id="21520" href="Demos.HSP.html#7974" class="Field">refl·µâ</a>   <a id="21528" class="Symbol">(</a><a id="21529" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="21543" class="Symbol">(</a><a id="21544" href="Demos.HSP.html#21322" class="Function Operator">‚ü®</a> <a id="21546" href="Demos.HSP.html#21546" class="Bound">ùëÜ</a> <a id="21548" href="Demos.HSP.html#21322" class="Function Operator">‚ü©</a> <a id="21550" href="Demos.HSP.html#21550" class="Bound">Œæ</a><a id="21551" class="Symbol">))</a>                           <a id="21580" class="Symbol">=</a> <a id="21582" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="21589" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="21591" class="Symbol">Œª</a> <a id="21593" href="Demos.HSP.html#21593" class="Bound">i</a> <a id="21595" class="Symbol">‚Üí</a> <a id="21597" href="Demos.HSP.html#7693" class="Function">reflÀ¢</a>   <a id="21605" href="Demos.HSP.html#21550" class="Bound">Œæ</a>
<a id="21607" href="Demos.HSP.html#8034" class="Field">sym·µâ</a>    <a id="21615" class="Symbol">(</a><a id="21616" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="21630" class="Symbol">(</a><a id="21631" href="Demos.HSP.html#21322" class="Function Operator">‚ü®</a> <a id="21633" href="Demos.HSP.html#21633" class="Bound">ùëÜ</a> <a id="21635" href="Demos.HSP.html#21322" class="Function Operator">‚ü©</a> <a id="21637" href="Demos.HSP.html#21637" class="Bound">Œæ</a><a id="21638" class="Symbol">))</a> <a id="21641" class="Symbol">(</a><a id="21642" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="21649" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="21651" href="Demos.HSP.html#21651" class="Bound">g</a><a id="21652" class="Symbol">)</a>              <a id="21667" class="Symbol">=</a> <a id="21669" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="21676" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="21678" class="Symbol">Œª</a> <a id="21680" href="Demos.HSP.html#21680" class="Bound">i</a> <a id="21682" class="Symbol">‚Üí</a> <a id="21684" href="Demos.HSP.html#7753" class="Function">symÀ¢</a>    <a id="21692" href="Demos.HSP.html#21637" class="Bound">Œæ</a> <a id="21694" class="Symbol">(</a><a id="21695" href="Demos.HSP.html#21651" class="Bound">g</a> <a id="21697" href="Demos.HSP.html#21680" class="Bound">i</a><a id="21698" class="Symbol">)</a>
<a id="21700" href="Demos.HSP.html#8094" class="Field">trans·µâ</a>  <a id="21708" class="Symbol">(</a><a id="21709" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="21723" class="Symbol">(</a><a id="21724" href="Demos.HSP.html#21322" class="Function Operator">‚ü®</a> <a id="21726" href="Demos.HSP.html#21726" class="Bound">ùëÜ</a> <a id="21728" href="Demos.HSP.html#21322" class="Function Operator">‚ü©</a> <a id="21730" href="Demos.HSP.html#21730" class="Bound">Œæ</a><a id="21731" class="Symbol">))</a> <a id="21734" class="Symbol">(</a><a id="21735" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="21742" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="21744" href="Demos.HSP.html#21744" class="Bound">g</a><a id="21745" class="Symbol">)(</a><a id="21747" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="21754" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="21756" href="Demos.HSP.html#21756" class="Bound">h</a><a id="21757" class="Symbol">)</a>  <a id="21760" class="Symbol">=</a> <a id="21762" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="21769" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="21771" class="Symbol">Œª</a> <a id="21773" href="Demos.HSP.html#21773" class="Bound">i</a> <a id="21775" class="Symbol">‚Üí</a> <a id="21777" href="Demos.HSP.html#7813" class="Function">transÀ¢</a>  <a id="21785" href="Demos.HSP.html#21730" class="Bound">Œæ</a> <a id="21787" class="Symbol">(</a><a id="21788" href="Demos.HSP.html#21744" class="Bound">g</a> <a id="21790" href="Demos.HSP.html#21773" class="Bound">i</a><a id="21791" class="Symbol">)</a> <a id="21793" class="Symbol">(</a><a id="21794" href="Demos.HSP.html#21756" class="Bound">h</a> <a id="21796" href="Demos.HSP.html#21773" class="Bound">i</a><a id="21797" class="Symbol">)</a>
</pre>

%% -----------------------------------------------------------------------------
\subsection{Algebras}\label{algebras}
Informally, an \defn{algebraic structure} \ab{ùë®} = (\ab{A}, \ab{F·¥¨}) \defn{in the signature}
\ab{ùëÜ} = (\ab{F}, \ab{œÅ}), or \ab{ùëÜ}-\defn{algebra}, consists of
\begin{itemize}
\item a nonempty type \ab A, called the \defn{domain} (or \defn{carrier} or
\defn{universe}) of the algebra;
\item a collection \ab{F·¥¨} :=
  \{ \ab{f·¥¨} \as{‚à£} \ab f \as{‚àà} \ab F, \ab{f·¥¨} \as :
    (\ab{œÅ} \ab f \as{‚Üí} \ab A) \as{‚Üí} \ab A \} of \defn{operations} on \ab{A};
\item a (potentially empty) collection of \defn{identities} satisfied by elements and
operations of \ab{ùë®}.
\end{itemize}
Our \agda implementation represents algebras as inhabitants of a record type with two
fields---a \afld{Domain} setoid denoting the domain of the algebras, and an \afld{Interp} function denoting the interpretation of each operation symbol in \ab{ùëÜ}. We postpone introducing identities until~¬ß\ref{equational-logic}.

<pre class="Agda">

<a id="22829" class="Keyword">record</a> <a id="Algebra"></a><a id="22836" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="22844" href="Demos.HSP.html#22844" class="Bound">Œ±</a> <a id="22846" href="Demos.HSP.html#22846" class="Bound">œÅ</a> <a id="22848" class="Symbol">:</a> <a id="22850" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="22855" class="Symbol">(</a><a id="22856" href="Demos.HSP.html#6194" class="Bound">ùìû</a> <a id="22858" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="22860" href="Demos.HSP.html#6196" class="Bound">ùì•</a> <a id="22862" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="22864" href="Agda.Primitive.html#780" class="Primitive">lsuc</a> <a id="22869" class="Symbol">(</a><a id="22870" href="Demos.HSP.html#22844" class="Bound">Œ±</a> <a id="22872" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="22874" href="Demos.HSP.html#22846" class="Bound">œÅ</a><a id="22875" class="Symbol">))</a> <a id="22878" class="Keyword">where</a>
 <a id="22885" class="Keyword">field</a>  <a id="Algebra.Domain"></a><a id="22892" href="Demos.HSP.html#22892" class="Field">Domain</a>  <a id="22900" class="Symbol">:</a> <a id="22902" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="22909" href="Demos.HSP.html#22844" class="Bound">Œ±</a> <a id="22911" href="Demos.HSP.html#22846" class="Bound">œÅ</a>
        <a id="Algebra.Interp"></a><a id="22921" href="Demos.HSP.html#22921" class="Field">Interp</a>  <a id="22929" class="Symbol">:</a> <a id="22931" href="Demos.HSP.html#21322" class="Function Operator">‚ü®</a> <a id="22933" href="Demos.HSP.html#6180" class="Bound">ùëÜ</a> <a id="22935" href="Demos.HSP.html#21322" class="Function Operator">‚ü©</a> <a id="22937" href="Demos.HSP.html#22892" class="Field">Domain</a> <a id="22944" href="Demos.HSP.html#7491" class="Record Operator">‚ü∂</a> <a id="22946" href="Demos.HSP.html#22892" class="Field">Domain</a>

</pre>
Thus, for each operation symbol in \ab{ùëÜ}, we have a setoid function
\ab f, whose domain is a power of \afld{Domain}, and whose codomain is \afld{Domain}.

Further, we define some syntactic sugar to make our formalizations easier to read and comprehend.
Specifically, if \ab{ùë®} is an algebra, then
\begin{itemize}
\item \aof{ùîª[ \ab{ùë®} ]} denotes the \afld{Domain} setoid of \ab{ùë®},
\item \aof{ùïå[ \ab{ùë®} ]} is the underlying carrier of (the \afld{Domain} setoid of) \ab{ùë®}, and
\item \ab f \aof{ÃÇ} \ab{ùë®} denotes the interpretation of the operation symbol \ab f in the algebra \ab{ùë®}.
\end{itemize}
\ifshort %%% BEGIN SHORT VERSION ONLY
 We omit the straightforward formal definitions of these types (\seemedium).
\else    %%% END SHORT VERSION ONLY
         %%% BEGIN LONG VERSION ONLY SECTION
<pre class="Agda">
<a id="23772" class="Keyword">open</a> <a id="23777" href="Demos.HSP.html#22836" class="Module">Algebra</a>
<a id="ùîª[_]"></a><a id="23785" href="Demos.HSP.html#23785" class="Function Operator">ùîª[_]</a> <a id="23790" class="Symbol">:</a> <a id="23792" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="23800" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="23802" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a> <a id="23805" class="Symbol">‚Üí</a>  <a id="23808" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="23815" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="23817" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a>
<a id="23820" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="23823" href="Demos.HSP.html#23823" class="Bound">ùë®</a> <a id="23825" href="Demos.HSP.html#23785" class="Function Operator">]</a> <a id="23827" class="Symbol">=</a> <a id="23829" href="Demos.HSP.html#22892" class="Field">Domain</a> <a id="23836" href="Demos.HSP.html#23823" class="Bound">ùë®</a>
<a id="ùïå[_]"></a><a id="23838" href="Demos.HSP.html#23838" class="Function Operator">ùïå[_]</a> <a id="23843" class="Symbol">:</a> <a id="23845" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="23853" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="23855" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a> <a id="23858" class="Symbol">‚Üí</a>  <a id="23861" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="23866" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a>
<a id="23868" href="Demos.HSP.html#23838" class="Function Operator">ùïå[</a> <a id="23871" href="Demos.HSP.html#23871" class="Bound">ùë®</a> <a id="23873" href="Demos.HSP.html#23838" class="Function Operator">]</a> <a id="23875" class="Symbol">=</a> <a id="23877" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="23885" class="Symbol">(</a><a id="23886" href="Demos.HSP.html#22892" class="Field">Domain</a> <a id="23893" href="Demos.HSP.html#23871" class="Bound">ùë®</a><a id="23894" class="Symbol">)</a>
<a id="_ÃÇ_"></a><a id="23896" href="Demos.HSP.html#23896" class="Function Operator">_ÃÇ_</a> <a id="23900" class="Symbol">:</a> <a id="23902" class="Symbol">(</a><a id="23903" href="Demos.HSP.html#23903" class="Bound">f</a> <a id="23905" class="Symbol">:</a> <a id="23907" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="23909" href="Demos.HSP.html#6180" class="Bound">ùëÜ</a> <a id="23911" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a><a id="23912" class="Symbol">)(</a><a id="23914" href="Demos.HSP.html#23914" class="Bound">ùë®</a> <a id="23916" class="Symbol">:</a> <a id="23918" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="23926" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="23928" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="23930" class="Symbol">)</a> <a id="23932" class="Symbol">‚Üí</a> <a id="23934" class="Symbol">(</a><a id="23935" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a> <a id="23937" href="Demos.HSP.html#6180" class="Bound">ùëÜ</a> <a id="23939" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a> <a id="23941" href="Demos.HSP.html#23903" class="Bound">f</a>  <a id="23944" class="Symbol">‚Üí</a>  <a id="23947" href="Demos.HSP.html#23838" class="Function Operator">ùïå[</a> <a id="23950" href="Demos.HSP.html#23914" class="Bound">ùë®</a> <a id="23952" href="Demos.HSP.html#23838" class="Function Operator">]</a><a id="23953" class="Symbol">)</a> <a id="23955" class="Symbol">‚Üí</a> <a id="23957" href="Demos.HSP.html#23838" class="Function Operator">ùïå[</a> <a id="23960" href="Demos.HSP.html#23914" class="Bound">ùë®</a> <a id="23962" href="Demos.HSP.html#23838" class="Function Operator">]</a>
<a id="23964" href="Demos.HSP.html#23964" class="Bound">f</a> <a id="23966" href="Demos.HSP.html#23896" class="Function Operator">ÃÇ</a> <a id="23968" href="Demos.HSP.html#23968" class="Bound">ùë®</a> <a id="23970" class="Symbol">=</a> <a id="23972" class="Symbol">Œª</a> <a id="23974" href="Demos.HSP.html#23974" class="Bound">a</a> <a id="23976" class="Symbol">‚Üí</a> <a id="23978" class="Symbol">(</a><a id="23979" href="Demos.HSP.html#22921" class="Field">Interp</a> <a id="23986" href="Demos.HSP.html#23968" class="Bound">ùë®</a><a id="23987" class="Symbol">)</a> <a id="23989" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="23993" class="Symbol">(</a><a id="23994" href="Demos.HSP.html#23964" class="Bound">f</a> <a id="23996" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="23998" href="Demos.HSP.html#23974" class="Bound">a</a><a id="23999" class="Symbol">)</a>
</pre>
\fi

%% -----------------------------------------------------------------------------
\paragraph*{Universe levels of algebra types}
Types belong to \emph{universes}, which are structured in \agda as
follows:
\ap{Type} \ab{‚Ñì} : \ap{Type} (\ap{suc} \ab{‚Ñì}), \ap{Type} (\ap{suc} \ab{‚Ñì}) : \ap{Type}
(\ap{suc} (\ap{suc} \ab{‚Ñì})), ‚Ä¶.\footnote{\ap{suc} \ab{‚Ñì} denotes the successor of \ab{‚Ñì} in the universe hierarchy} While this means that \ap{Type} \ab{‚Ñì} has type \ap{Type}
(\ap{suc} \ab{‚Ñì}), it does \emph{not} imply that \ap{Type} \ab{‚Ñì} has type
\ap{Type} (\ap{suc} (\ap{suc} \ab{‚Ñì})). In other words, \agda's universes are
\emph{non-cumulative}.
This can be advantageous as it becomes possible to treat size issues
more generally and precisely.  However, dealing with explicit
universe levels can be daunting, and the standard literature
(in which uniform smallness is typically assumed) offers little guidance.
\ifshort\else
This aspect of the language was one of the few stumbling
blocks we encountered while learning how to use \agda for formalizing universal algebra in
type theory. Although some may consider this to be one of the least interesting and most
technical aspects of this paper, others might find the presentation more helpful if we
resist the urge to gloss over these technicalities.
\fi
While in some settings, such as category theory, formalizing it in \agda~\cite{agda-categories}
works smoothly with respect to universe levels, in universal algebra the terrain is bumpier.
Thus, it seems worthwhile to explain how we make use
of universe lifting and lowering functions, available in the \agdastdlib, to
develop domain-specific tools for dealing with \agda's non-cumulative universe hierarchy.

\ifshort\else
Let us be more concrete about what is at issue by considering a typical example. \agda
frequently encounters problems during the type-checking process and responds by printing a
message like the following.
{\color{red}{\small
\begin{verbatim}
  HSP.lagda:498,20-23
  Œ± != ùìû ‚äî ùì• ‚äî (lsuc Œ±) when checking that... has type...
\end{verbatim}}}
\noindent Here \agda informs us that it encountered universe level \ab{Œ±} on line 498 of
the HSP module, where it was expecting level \ab{ùìû}~\aop{‚äî}~\ab{ùì•}~\aop{‚äî}~(\ap{lsuc}
\ab{Œ±}). In this case, we tried to use an algebra inhabiting the type \ar{Algebra}
\ab{Œ±} \ab{œÅ·µÉ} whereas \agda expected an inhabitant of the type \ar{Algebra} (\ab{ùìû}
\aop{‚äî} \ab{ùì•} \aop{‚äî} (\ap{lsuc} \ab{Œ±})) \ab{œÅ·µÉ}.
\fi
The \ar{Lift} operation of the standard library embeds a type into a higher universe.
Specializing \ar{Lift} to our situation, we
define a function \af{Lift-Alg}%
\ifshort
~with the following interface.
\vskip-2mm
\else
.

<pre class="Agda">

<a id="26719" class="Keyword">module</a> <a id="26726" href="Demos.HSP.html#26726" class="Module">_</a> <a id="26728" class="Symbol">(</a><a id="26729" href="Demos.HSP.html#26729" class="Bound">ùë®</a> <a id="26731" class="Symbol">:</a> <a id="26733" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="26741" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="26743" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="26745" class="Symbol">)</a> <a id="26747" class="Keyword">where</a>
 <a id="26754" class="Keyword">open</a> <a id="26759" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="26766" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="26769" href="Demos.HSP.html#26729" class="Bound">ùë®</a> <a id="26771" href="Demos.HSP.html#23785" class="Function Operator">]</a> <a id="26773" class="Keyword">using</a> <a id="26779" class="Symbol">(</a> <a id="26781" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="26785" class="Symbol">;</a> <a id="26787" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="26792" class="Symbol">;</a> <a id="26794" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="26798" class="Symbol">;</a> <a id="26800" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="26806" class="Symbol">)</a> <a id="26808" class="Symbol">;</a> <a id="26810" class="Keyword">open</a> <a id="26815" href="Level.html" class="Module">Level</a>
 <a id="26822" href="Demos.HSP.html#26822" class="Function">Lift-AlgÀ°</a> <a id="26832" class="Symbol">:</a> <a id="26834" class="Symbol">(</a><a id="26835" href="Demos.HSP.html#26835" class="Bound">‚Ñì</a> <a id="26837" class="Symbol">:</a> <a id="26839" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="26844" class="Symbol">)</a> <a id="26846" class="Symbol">‚Üí</a> <a id="26848" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="26856" class="Symbol">(</a><a id="26857" href="Demos.HSP.html#26741" class="Bound">Œ±</a> <a id="26859" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="26861" href="Demos.HSP.html#26835" class="Bound">‚Ñì</a><a id="26862" class="Symbol">)</a> <a id="26864" href="Demos.HSP.html#26743" class="Bound">œÅ·µÉ</a>
 <a id="26868" href="Demos.HSP.html#22892" class="Field">Domain</a> <a id="26875" class="Symbol">(</a><a id="26876" href="Demos.HSP.html#26822" class="Function">Lift-AlgÀ°</a> <a id="26886" href="Demos.HSP.html#26886" class="Bound">‚Ñì</a><a id="26887" class="Symbol">)</a> <a id="26889" class="Symbol">=</a>
  <a id="26893" class="Keyword">record</a>  <a id="26901" class="Symbol">{</a> <a id="26903" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a>        <a id="26918" class="Symbol">=</a> <a id="26920" href="Level.html#400" class="Record">Lift</a> <a id="26925" href="Demos.HSP.html#26886" class="Bound">‚Ñì</a> <a id="26927" href="Demos.HSP.html#23838" class="Function Operator">ùïå[</a> <a id="26930" href="Demos.HSP.html#26729" class="Bound">ùë®</a> <a id="26932" href="Demos.HSP.html#23838" class="Function Operator">]</a>
          <a id="26944" class="Symbol">;</a> <a id="26946" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a>            <a id="26961" class="Symbol">=</a> <a id="26963" class="Symbol">Œª</a> <a id="26965" href="Demos.HSP.html#26965" class="Bound">x</a> <a id="26967" href="Demos.HSP.html#26967" class="Bound">y</a> <a id="26969" class="Symbol">‚Üí</a> <a id="26971" href="Level.html#470" class="Field">lower</a> <a id="26977" href="Demos.HSP.html#26965" class="Bound">x</a> <a id="26979" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a> <a id="26981" href="Level.html#470" class="Field">lower</a> <a id="26987" href="Demos.HSP.html#26967" class="Bound">y</a>
          <a id="26999" class="Symbol">;</a> <a id="27001" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a>  <a id="27016" class="Symbol">=</a> <a id="27018" class="Keyword">record</a> <a id="27025" class="Symbol">{</a> <a id="27027" href="Relation.Binary.Structures.html#1568" class="Field">refl</a> <a id="27032" class="Symbol">=</a> <a id="27034" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="27039" class="Symbol">;</a> <a id="27041" href="Relation.Binary.Structures.html#1594" class="Field">sym</a> <a id="27045" class="Symbol">=</a> <a id="27047" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="27051" class="Symbol">;</a> <a id="27053" href="Relation.Binary.Structures.html#1620" class="Field">trans</a> <a id="27059" class="Symbol">=</a> <a id="27061" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="27067" class="Symbol">}}</a>

 <a id="27072" href="Demos.HSP.html#22921" class="Field">Interp</a> <a id="27079" class="Symbol">(</a><a id="27080" href="Demos.HSP.html#26822" class="Function">Lift-AlgÀ°</a> <a id="27090" href="Demos.HSP.html#27090" class="Bound">‚Ñì</a><a id="27091" class="Symbol">)</a> <a id="27093" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="27097" class="Symbol">(</a><a id="27098" href="Demos.HSP.html#27098" class="Bound">f</a> <a id="27100" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="27102" href="Demos.HSP.html#27102" class="Bound">la</a><a id="27104" class="Symbol">)</a> <a id="27106" class="Symbol">=</a> <a id="27108" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="27113" class="Symbol">((</a><a id="27115" href="Demos.HSP.html#27098" class="Bound">f</a> <a id="27117" href="Demos.HSP.html#23896" class="Function Operator">ÃÇ</a> <a id="27119" href="Demos.HSP.html#26729" class="Bound">ùë®</a><a id="27120" class="Symbol">)</a> <a id="27122" class="Symbol">(</a><a id="27123" href="Level.html#470" class="Field">lower</a> <a id="27129" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="27131" href="Demos.HSP.html#27102" class="Bound">la</a><a id="27133" class="Symbol">))</a>
 <a id="27137" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="27142" class="Symbol">(</a><a id="27143" href="Demos.HSP.html#22921" class="Field">Interp</a> <a id="27150" class="Symbol">(</a><a id="27151" href="Demos.HSP.html#26822" class="Function">Lift-AlgÀ°</a> <a id="27161" href="Demos.HSP.html#27161" class="Bound">‚Ñì</a><a id="27162" class="Symbol">))</a> <a id="27165" class="Symbol">(</a><a id="27166" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="27173" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="27175" href="Demos.HSP.html#27175" class="Bound">lab</a><a id="27178" class="Symbol">)</a> <a id="27180" class="Symbol">=</a> <a id="27182" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="27187" class="Symbol">(</a><a id="27188" href="Demos.HSP.html#22921" class="Field">Interp</a> <a id="27195" href="Demos.HSP.html#26729" class="Bound">ùë®</a><a id="27196" class="Symbol">)</a> <a id="27198" class="Symbol">((</a><a id="27200" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="27207" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="27209" href="Demos.HSP.html#27175" class="Bound">lab</a><a id="27212" class="Symbol">))</a>

 <a id="27217" href="Demos.HSP.html#27217" class="Function">Lift-Alg ≥</a> <a id="27227" class="Symbol">:</a> <a id="27229" class="Symbol">(</a><a id="27230" href="Demos.HSP.html#27230" class="Bound">‚Ñì</a> <a id="27232" class="Symbol">:</a> <a id="27234" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="27239" class="Symbol">)</a> <a id="27241" class="Symbol">‚Üí</a> <a id="27243" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="27251" href="Demos.HSP.html#26741" class="Bound">Œ±</a> <a id="27253" class="Symbol">(</a><a id="27254" href="Demos.HSP.html#26743" class="Bound">œÅ·µÉ</a> <a id="27257" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="27259" href="Demos.HSP.html#27230" class="Bound">‚Ñì</a><a id="27260" class="Symbol">)</a>
 <a id="27263" href="Demos.HSP.html#22892" class="Field">Domain</a> <a id="27270" class="Symbol">(</a><a id="27271" href="Demos.HSP.html#27217" class="Function">Lift-Alg ≥</a> <a id="27281" href="Demos.HSP.html#27281" class="Bound">‚Ñì</a><a id="27282" class="Symbol">)</a> <a id="27284" class="Symbol">=</a>
  <a id="27288" class="Keyword">record</a>  <a id="27296" class="Symbol">{</a> <a id="27298" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a>        <a id="27313" class="Symbol">=</a> <a id="27315" href="Demos.HSP.html#23838" class="Function Operator">ùïå[</a> <a id="27318" href="Demos.HSP.html#26729" class="Bound">ùë®</a> <a id="27320" href="Demos.HSP.html#23838" class="Function Operator">]</a>
          <a id="27332" class="Symbol">;</a> <a id="27334" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a>            <a id="27349" class="Symbol">=</a> <a id="27351" class="Symbol">Œª</a> <a id="27353" href="Demos.HSP.html#27353" class="Bound">x</a> <a id="27355" href="Demos.HSP.html#27355" class="Bound">y</a> <a id="27357" class="Symbol">‚Üí</a> <a id="27359" href="Level.html#400" class="Record">Lift</a> <a id="27364" href="Demos.HSP.html#27281" class="Bound">‚Ñì</a> <a id="27366" class="Symbol">(</a><a id="27367" href="Demos.HSP.html#27353" class="Bound">x</a> <a id="27369" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a> <a id="27371" href="Demos.HSP.html#27355" class="Bound">y</a><a id="27372" class="Symbol">)</a>
          <a id="27384" class="Symbol">;</a> <a id="27386" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a>  <a id="27401" class="Symbol">=</a> <a id="27403" class="Keyword">record</a>  <a id="27411" class="Symbol">{</a> <a id="27413" href="Relation.Binary.Structures.html#1568" class="Field">refl</a>  <a id="27419" class="Symbol">=</a> <a id="27421" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="27426" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>
                                     <a id="27468" class="Symbol">;</a> <a id="27470" href="Relation.Binary.Structures.html#1594" class="Field">sym</a>   <a id="27476" class="Symbol">=</a> <a id="27478" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="27483" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="27485" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="27489" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="27491" href="Level.html#470" class="Field">lower</a>
                                     <a id="27534" class="Symbol">;</a> <a id="27536" href="Relation.Binary.Structures.html#1620" class="Field">trans</a> <a id="27542" class="Symbol">=</a> <a id="27544" class="Symbol">Œª</a> <a id="27546" href="Demos.HSP.html#27546" class="Bound">x</a> <a id="27548" href="Demos.HSP.html#27548" class="Bound">y</a> <a id="27550" class="Symbol">‚Üí</a> <a id="27552" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="27557" class="Symbol">(</a><a id="27558" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="27564" class="Symbol">(</a><a id="27565" href="Level.html#470" class="Field">lower</a> <a id="27571" href="Demos.HSP.html#27546" class="Bound">x</a><a id="27572" class="Symbol">)(</a><a id="27574" href="Level.html#470" class="Field">lower</a> <a id="27580" href="Demos.HSP.html#27548" class="Bound">y</a><a id="27581" class="Symbol">))</a> <a id="27584" class="Symbol">}}</a>

 <a id="27589" href="Demos.HSP.html#22921" class="Field">Interp</a> <a id="27596" class="Symbol">(</a><a id="27597" href="Demos.HSP.html#27217" class="Function">Lift-Alg ≥</a> <a id="27607" href="Demos.HSP.html#27607" class="Bound">‚Ñì</a> <a id="27609" class="Symbol">)</a> <a id="27611" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="27615" class="Symbol">(</a><a id="27616" href="Demos.HSP.html#27616" class="Bound">f</a> <a id="27618" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="27620" href="Demos.HSP.html#27620" class="Bound">la</a><a id="27622" class="Symbol">)</a> <a id="27624" class="Symbol">=</a> <a id="27626" class="Symbol">(</a><a id="27627" href="Demos.HSP.html#27616" class="Bound">f</a> <a id="27629" href="Demos.HSP.html#23896" class="Function Operator">ÃÇ</a> <a id="27631" href="Demos.HSP.html#26729" class="Bound">ùë®</a><a id="27632" class="Symbol">)</a> <a id="27634" href="Demos.HSP.html#27620" class="Bound">la</a>
 <a id="27638" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="27643" class="Symbol">(</a><a id="27644" href="Demos.HSP.html#22921" class="Field">Interp</a> <a id="27651" class="Symbol">(</a><a id="27652" href="Demos.HSP.html#27217" class="Function">Lift-Alg ≥</a> <a id="27662" href="Demos.HSP.html#27662" class="Bound">‚Ñì</a><a id="27663" class="Symbol">))(</a><a id="27666" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="27673" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="27675" href="Demos.HSP.html#27675" class="Bound">lab</a><a id="27678" class="Symbol">)</a> <a id="27680" class="Symbol">=</a> <a id="27682" href="Level.html#457" class="InductiveConstructor">lift</a><a id="27686" class="Symbol">(</a><a id="27687" href="Function.Bundles.html#1938" class="Field">cong</a><a id="27691" class="Symbol">(</a><a id="27692" href="Demos.HSP.html#22921" class="Field">Interp</a> <a id="27699" href="Demos.HSP.html#26729" class="Bound">ùë®</a><a id="27700" class="Symbol">)(</a><a id="27702" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="27709" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="27711" class="Symbol">Œª</a> <a id="27713" href="Demos.HSP.html#27713" class="Bound">i</a> <a id="27715" class="Symbol">‚Üí</a> <a id="27717" href="Level.html#470" class="Field">lower</a> <a id="27723" class="Symbol">(</a><a id="27724" href="Demos.HSP.html#27675" class="Bound">lab</a> <a id="27728" href="Demos.HSP.html#27713" class="Bound">i</a><a id="27729" class="Symbol">)))</a>
</pre>
\fi

<pre class="Agda">

<a id="Lift-Alg"></a><a id="27763" href="Demos.HSP.html#27763" class="Function">Lift-Alg</a> <a id="27772" class="Symbol">:</a> <a id="27774" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="27782" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="27784" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a> <a id="27787" class="Symbol">‚Üí</a> <a id="27789" class="Symbol">(</a><a id="27790" href="Demos.HSP.html#27790" class="Bound">‚Ñì‚ÇÄ</a> <a id="27793" href="Demos.HSP.html#27793" class="Bound">‚Ñì‚ÇÅ</a> <a id="27796" class="Symbol">:</a> <a id="27798" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="27803" class="Symbol">)</a> <a id="27805" class="Symbol">‚Üí</a> <a id="27807" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="27815" class="Symbol">(</a><a id="27816" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="27818" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="27820" href="Demos.HSP.html#27790" class="Bound">‚Ñì‚ÇÄ</a><a id="27822" class="Symbol">)</a> <a id="27824" class="Symbol">(</a><a id="27825" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a> <a id="27828" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="27830" href="Demos.HSP.html#27793" class="Bound">‚Ñì‚ÇÅ</a><a id="27832" class="Symbol">)</a>
</pre>
\ifshort
\vskip2mm
\else
<pre class="Agda">
<a id="27883" href="Demos.HSP.html#27763" class="Function">Lift-Alg</a> <a id="27892" href="Demos.HSP.html#27892" class="Bound">ùë®</a> <a id="27894" href="Demos.HSP.html#27894" class="Bound">‚Ñì‚ÇÄ</a> <a id="27897" href="Demos.HSP.html#27897" class="Bound">‚Ñì‚ÇÅ</a> <a id="27900" class="Symbol">=</a> <a id="27902" href="Demos.HSP.html#27217" class="Function">Lift-Alg ≥</a> <a id="27912" class="Symbol">(</a><a id="27913" href="Demos.HSP.html#26822" class="Function">Lift-AlgÀ°</a> <a id="27923" href="Demos.HSP.html#27892" class="Bound">ùë®</a> <a id="27925" href="Demos.HSP.html#27894" class="Bound">‚Ñì‚ÇÄ</a><a id="27927" class="Symbol">)</a> <a id="27929" href="Demos.HSP.html#27897" class="Bound">‚Ñì‚ÇÅ</a>

</pre>
\fi
\noindent Recall that our \ar{Algebra} type has two universe level parameters, corresponding
to those of the domain setoid.
\ifshort\else
Concretely, an algebra of type \ar{Algebra} \ab{Œ±} \ab{œÅ·µÉ} has a
\afld{Domain} of type \ar{Setoid} \ab{Œ±} \ab{œÅ·µÉ}. This packages a ``carrier set''
(\afld{Carrier}), inhabiting \ap{Type} \ab{Œ±}, with an equality on \afld{Carrier} of type
\af{Rel} \afld{Carrier} \ab{œÅ·µÉ}.
\fi
\af{Lift-Alg} takes an algebra parametrized by levels \ab{a} and \ab{œÅ·µÉ}
and constructs a new algebra whose
carrier inhabits \ap{Type} (\ab{Œ±} \ap{‚äî} \ab{‚Ñì‚ÇÄ}) with equality of type \af{Rel}
\afld{Carrier} (\ab{œÅ·µÉ} \ap{‚äî} \ab{‚Ñì‚ÇÅ}). To be useful, this lifting operation should
result in an algebra with the same semantic properties as the input algebra, which is
indeed the case
\ifshort
(\qv).
\else
as we will see in ¬ß\ref{isomorphisms}.
\fi

\paragraph*{Product Algebras}
Recall the (informal) definition of the \defn{product} of a family of
\ab{ùëÜ}-algebras.
Let \ab{Œπ} be a universe and \ab I~:~\ap{Type}~\ab{Œπ} a type (the ``indexing type'').
Then \ab{ùíú}~:~\ab I~\as{‚Üí}~\ab{Algebra}~\ab{Œ±}~\ab{œÅ·µÉ} represents
an \defn{indexed family of algebras}.
Denote by \af{‚®Ö}~\ab{ùíú} the \defn{product of algebras} in \ab{ùíú} (or \defn{product
algebra}), by which we mean the algebra whose domain is the Cartesian product \af{Œ†}~\ab
i~Íûâ~\ab I~\af{,}~\aof{ùîª[~\ab{ùíú}~\ab i~]} of the domains of the algebras in \ab{ùíú}, and
whose operations are those arising by pointwise interpretation in the obvious way: if
\ab{f} is a \ab J-ary operation symbol and if
\ab a~:~\af{Œ†}~\ab i~Íûâ~\ab I~\af{,}~\ab J~\as{‚Üí}~\aof{ùîª[~\ab{ùíú}~\ab i~]} is, for each
\ab i~:~\ab I, a \ab J-tuple of elements of the domain \aof{ùîª[~\ab{ùíú}~\ab i~]}, then
we define the interpretation of \ab f in \af{‚®Ö}~\ab{ùíú} by\\[-2mm]

(\ab{f}~\af{ÃÇ}~\af{‚®Ö}~\ab{ùíú}) \ab a := \as{Œª}~(\ab i~:~\ab I)~\as{‚Üí}
(\ab{f}~\af{ÃÇ}~\ab{ùíú}~\ab i)(\ab{a}~\ab i).\\[8pt]
Here is how we formalize the concept of product algebra in \agda.

<pre class="Agda">

<a id="29940" class="Keyword">module</a> <a id="29947" href="Demos.HSP.html#29947" class="Module">_</a> <a id="29949" class="Symbol">{</a><a id="29950" href="Demos.HSP.html#29950" class="Bound">Œπ</a> <a id="29952" class="Symbol">:</a> <a id="29954" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="29959" class="Symbol">}{</a><a id="29961" href="Demos.HSP.html#29961" class="Bound">I</a> <a id="29963" class="Symbol">:</a> <a id="29965" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="29970" href="Demos.HSP.html#29950" class="Bound">Œπ</a> <a id="29972" class="Symbol">}</a> <a id="29974" class="Keyword">where</a>

 <a id="29982" href="Demos.HSP.html#29982" class="Function">‚®Ö</a> <a id="29984" class="Symbol">:</a> <a id="29986" class="Symbol">(</a><a id="29987" href="Demos.HSP.html#29987" class="Bound">ùíú</a> <a id="29989" class="Symbol">:</a> <a id="29991" href="Demos.HSP.html#29961" class="Bound">I</a> <a id="29993" class="Symbol">‚Üí</a> <a id="29995" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="30003" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="30005" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="30007" class="Symbol">)</a> <a id="30009" class="Symbol">‚Üí</a> <a id="30011" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="30019" class="Symbol">(</a><a id="30020" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="30022" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="30024" href="Demos.HSP.html#29950" class="Bound">Œπ</a><a id="30025" class="Symbol">)</a> <a id="30027" class="Symbol">(</a><a id="30028" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a> <a id="30031" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="30033" href="Demos.HSP.html#29950" class="Bound">Œπ</a><a id="30034" class="Symbol">)</a>

 <a id="30038" href="Demos.HSP.html#22892" class="Field">Domain</a> <a id="30045" class="Symbol">(</a><a id="30046" href="Demos.HSP.html#29982" class="Function">‚®Ö</a> <a id="30048" href="Demos.HSP.html#30048" class="Bound">ùíú</a><a id="30049" class="Symbol">)</a> <a id="30051" class="Symbol">=</a>
  <a id="30055" class="Keyword">record</a> <a id="30062" class="Symbol">{</a> <a id="30064" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="30072" class="Symbol">=</a> <a id="30074" class="Symbol">‚àÄ</a> <a id="30076" href="Demos.HSP.html#30076" class="Bound">i</a> <a id="30078" class="Symbol">‚Üí</a> <a id="30080" href="Demos.HSP.html#23838" class="Function Operator">ùïå[</a> <a id="30083" href="Demos.HSP.html#30048" class="Bound">ùíú</a> <a id="30085" href="Demos.HSP.html#30076" class="Bound">i</a> <a id="30087" href="Demos.HSP.html#23838" class="Function Operator">]</a>
         <a id="30098" class="Symbol">;</a> <a id="30100" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="30104" class="Symbol">=</a> <a id="30106" class="Symbol">Œª</a> <a id="30108" href="Demos.HSP.html#30108" class="Bound">a</a> <a id="30110" href="Demos.HSP.html#30110" class="Bound">b</a> <a id="30112" class="Symbol">‚Üí</a> <a id="30114" class="Symbol">‚àÄ</a> <a id="30116" href="Demos.HSP.html#30116" class="Bound">i</a> <a id="30118" class="Symbol">‚Üí</a> <a id="30120" class="Symbol">(</a><a id="30121" href="Demos.HSP.html#7873" class="Field Operator">_‚âàÀ¢_</a> <a id="30126" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="30129" href="Demos.HSP.html#30048" class="Bound">ùíú</a> <a id="30131" href="Demos.HSP.html#30116" class="Bound">i</a> <a id="30133" href="Demos.HSP.html#23785" class="Function Operator">]</a><a id="30134" class="Symbol">)</a> <a id="30136" class="Symbol">(</a><a id="30137" href="Demos.HSP.html#30108" class="Bound">a</a> <a id="30139" href="Demos.HSP.html#30116" class="Bound">i</a><a id="30140" class="Symbol">)(</a><a id="30142" href="Demos.HSP.html#30110" class="Bound">b</a> <a id="30144" href="Demos.HSP.html#30116" class="Bound">i</a><a id="30145" class="Symbol">)</a>
         <a id="30156" class="Symbol">;</a> <a id="30158" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="30172" class="Symbol">=</a>
            <a id="30186" class="Keyword">record</a>  <a id="30194" class="Symbol">{</a> <a id="30196" href="Relation.Binary.Structures.html#1568" class="Field">refl</a>   <a id="30203" class="Symbol">=</a> <a id="30205" class="Symbol">Œª</a> <a id="30207" href="Demos.HSP.html#30207" class="Bound">i</a> <a id="30209" class="Symbol">‚Üí</a>      <a id="30216" href="Demos.HSP.html#7974" class="Field">refl·µâ</a>   <a id="30224" class="Symbol">(</a><a id="30225" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="30239" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="30242" href="Demos.HSP.html#30048" class="Bound">ùíú</a> <a id="30244" href="Demos.HSP.html#30207" class="Bound">i</a> <a id="30246" href="Demos.HSP.html#23785" class="Function Operator">]</a><a id="30247" class="Symbol">)</a>
                    <a id="30269" class="Symbol">;</a> <a id="30271" href="Relation.Binary.Structures.html#1594" class="Field">sym</a>    <a id="30278" class="Symbol">=</a> <a id="30280" class="Symbol">Œª</a> <a id="30282" href="Demos.HSP.html#30282" class="Bound">x</a> <a id="30284" href="Demos.HSP.html#30284" class="Bound">i</a> <a id="30286" class="Symbol">‚Üí</a>    <a id="30291" href="Demos.HSP.html#8034" class="Field">sym·µâ</a>    <a id="30299" class="Symbol">(</a><a id="30300" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="30314" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="30317" href="Demos.HSP.html#30048" class="Bound">ùíú</a> <a id="30319" href="Demos.HSP.html#30284" class="Bound">i</a> <a id="30321" href="Demos.HSP.html#23785" class="Function Operator">]</a><a id="30322" class="Symbol">)(</a><a id="30324" href="Demos.HSP.html#30282" class="Bound">x</a> <a id="30326" href="Demos.HSP.html#30284" class="Bound">i</a><a id="30327" class="Symbol">)</a>
                    <a id="30349" class="Symbol">;</a> <a id="30351" href="Relation.Binary.Structures.html#1620" class="Field">trans</a>  <a id="30358" class="Symbol">=</a> <a id="30360" class="Symbol">Œª</a> <a id="30362" href="Demos.HSP.html#30362" class="Bound">x</a> <a id="30364" href="Demos.HSP.html#30364" class="Bound">y</a> <a id="30366" href="Demos.HSP.html#30366" class="Bound">i</a> <a id="30368" class="Symbol">‚Üí</a>  <a id="30371" href="Demos.HSP.html#8094" class="Field">trans·µâ</a>  <a id="30379" class="Symbol">(</a><a id="30380" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="30394" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="30397" href="Demos.HSP.html#30048" class="Bound">ùíú</a> <a id="30399" href="Demos.HSP.html#30366" class="Bound">i</a> <a id="30401" href="Demos.HSP.html#23785" class="Function Operator">]</a><a id="30402" class="Symbol">)(</a><a id="30404" href="Demos.HSP.html#30362" class="Bound">x</a> <a id="30406" href="Demos.HSP.html#30366" class="Bound">i</a><a id="30407" class="Symbol">)(</a><a id="30409" href="Demos.HSP.html#30364" class="Bound">y</a> <a id="30411" href="Demos.HSP.html#30366" class="Bound">i</a><a id="30412" class="Symbol">)</a> <a id="30414" class="Symbol">}}</a>

 <a id="30419" href="Demos.HSP.html#22921" class="Field">Interp</a> <a id="30426" class="Symbol">(</a><a id="30427" href="Demos.HSP.html#29982" class="Function">‚®Ö</a> <a id="30429" href="Demos.HSP.html#30429" class="Bound">ùíú</a><a id="30430" class="Symbol">)</a> <a id="30432" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="30436" class="Symbol">(</a><a id="30437" href="Demos.HSP.html#30437" class="Bound">f</a> <a id="30439" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="30441" href="Demos.HSP.html#30441" class="Bound">a</a><a id="30442" class="Symbol">)</a> <a id="30444" class="Symbol">=</a> <a id="30446" class="Symbol">Œª</a> <a id="30448" href="Demos.HSP.html#30448" class="Bound">i</a> <a id="30450" class="Symbol">‚Üí</a> <a id="30452" class="Symbol">(</a><a id="30453" href="Demos.HSP.html#30437" class="Bound">f</a> <a id="30455" href="Demos.HSP.html#23896" class="Function Operator">ÃÇ</a> <a id="30457" class="Symbol">(</a><a id="30458" href="Demos.HSP.html#30429" class="Bound">ùíú</a> <a id="30460" href="Demos.HSP.html#30448" class="Bound">i</a><a id="30461" class="Symbol">))</a> <a id="30464" class="Symbol">(</a><a id="30465" href="Function.Base.html#1554" class="Function">flip</a> <a id="30470" href="Demos.HSP.html#30441" class="Bound">a</a> <a id="30472" href="Demos.HSP.html#30448" class="Bound">i</a><a id="30473" class="Symbol">)</a>

 <a id="30477" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="30482" class="Symbol">(</a><a id="30483" href="Demos.HSP.html#22921" class="Field">Interp</a> <a id="30490" class="Symbol">(</a><a id="30491" href="Demos.HSP.html#29982" class="Function">‚®Ö</a> <a id="30493" href="Demos.HSP.html#30493" class="Bound">ùíú</a><a id="30494" class="Symbol">))</a> <a id="30497" class="Symbol">(</a><a id="30498" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="30505" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="30507" href="Demos.HSP.html#30507" class="Bound">f=g</a> <a id="30511" class="Symbol">)</a> <a id="30513" class="Symbol">=</a> <a id="30515" class="Symbol">Œª</a> <a id="30517" href="Demos.HSP.html#30517" class="Bound">i</a> <a id="30519" class="Symbol">‚Üí</a> <a id="30521" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="30526" class="Symbol">(</a><a id="30527" href="Demos.HSP.html#22921" class="Field">Interp</a> <a id="30534" class="Symbol">(</a><a id="30535" href="Demos.HSP.html#30493" class="Bound">ùíú</a> <a id="30537" href="Demos.HSP.html#30517" class="Bound">i</a><a id="30538" class="Symbol">))</a> <a id="30541" class="Symbol">(</a><a id="30542" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="30549" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="30551" href="Function.Base.html#1554" class="Function">flip</a> <a id="30556" href="Demos.HSP.html#30507" class="Bound">f=g</a> <a id="30560" href="Demos.HSP.html#30517" class="Bound">i</a> <a id="30562" class="Symbol">)</a>

</pre>
\noindent Evidently, the \afld{Carrier} of the product algebra type is indeed the (dependent)
product of the carriers in the indexed family. The rest of the definitions are the ``pointwise''
versions of the underlying ones.

%% -------------------------------------------------------------------------------------
\subsection{Homomorphisms}\label{homomorphisms}
Throughout the rest of the paper, unless stated otherwise, \ab{ùë®} and \ab{ùë©}
will denote \ab{ùëÜ}-algebras inhabiting the types \af{Algebra} \ab{Œ±} \ab{œÅ·µÉ} and
\af{Algebra} \ab{Œ≤} \ab{œÅ·µá}, respectively.

A \defn{homomorphism} (or ``hom'') from
\ab{ùë®} to \ab{ùë©} is a setoid function \ab{h}~:~\aof{ùîª[~\ab{ùë®}~]} \aor{‚ü∂} \aof{ùîª[~\ab{ùë©}~]}
that is \defn{compatible} with all basic operations; that is, for
every operation symbol \ab{f} : \af{‚à£~\ab{ùëÜ}~‚à£} and all tuples
\ab{a} : \af{‚à•~\ab{ùëÜ}~‚à•}~\ab{f} \as{‚Üí} \aof{ùïå[~\ab{ùë®}~]}, we have \ab{h} \aofld{‚ü®\$‚ü©}
(\ab{f}~\af{ÃÇ}~\ab{ùë®}) \ab{a} \af{‚âà}
(\ab{f}~\af{ÃÇ}~\ab{ùë©}) \ab{h} \aofld{‚ü®\$‚ü©} (\ab{a} \au{}).

It is convenient to first formalize ``compatible'' (\af{compatible-map-op}),
representing the assertion that a given setoid function
\ab{h}~:~\aof{ùîª[~\ab{ùë®}~]} \aor{‚ü∂} \aof{ùîª[~\ab{ùë©}~]} commutes with a given
operation symbol \ab{f}, and then generalize over operation symbols (\af{compatible-map}),
to yield the type of compatible maps from (the domain of) \ab{ùë®} to (the domain of) \ab{ùë©}.

\ifshort\else
<pre class="Agda">

<a id="32003" class="Keyword">module</a> <a id="32010" href="Demos.HSP.html#32010" class="Module">_</a> <a id="32012" class="Symbol">(</a><a id="32013" href="Demos.HSP.html#32013" class="Bound">ùë®</a> <a id="32015" class="Symbol">:</a> <a id="32017" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="32025" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="32027" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="32029" class="Symbol">)(</a><a id="32031" href="Demos.HSP.html#32031" class="Bound">ùë©</a> <a id="32033" class="Symbol">:</a> <a id="32035" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="32043" href="Demos.HSP.html#8424" class="Generalizable">Œ≤</a> <a id="32045" href="Demos.HSP.html#8426" class="Generalizable">œÅ·µá</a><a id="32047" class="Symbol">)</a> <a id="32049" class="Keyword">where</a>
</pre>
\fi
<pre class="Agda">

 <a id="32085" href="Demos.HSP.html#32085" class="Function">compatible-map-op</a> <a id="32103" class="Symbol">:</a> <a id="32105" class="Symbol">(</a><a id="32106" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="32109" href="Demos.HSP.html#32013" class="Bound">ùë®</a> <a id="32111" href="Demos.HSP.html#23785" class="Function Operator">]</a> <a id="32113" href="Demos.HSP.html#7491" class="Record Operator">‚ü∂</a> <a id="32115" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="32118" href="Demos.HSP.html#32031" class="Bound">ùë©</a> <a id="32120" href="Demos.HSP.html#23785" class="Function Operator">]</a><a id="32121" class="Symbol">)</a> <a id="32123" class="Symbol">‚Üí</a> <a id="32125" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="32127" href="Demos.HSP.html#6180" class="Bound">ùëÜ</a> <a id="32129" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="32131" class="Symbol">‚Üí</a> <a id="32133" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="32138" class="Symbol">_</a>
 <a id="32141" href="Demos.HSP.html#32085" class="Function">compatible-map-op</a> <a id="32159" href="Demos.HSP.html#32159" class="Bound">h</a> <a id="32161" href="Demos.HSP.html#32161" class="Bound">f</a> <a id="32163" class="Symbol">=</a> <a id="32165" class="Symbol">‚àÄ</a> <a id="32167" class="Symbol">{</a><a id="32168" href="Demos.HSP.html#32168" class="Bound">a</a><a id="32169" class="Symbol">}</a> <a id="32171" class="Symbol">‚Üí</a> <a id="32173" href="Demos.HSP.html#32159" class="Bound">h</a> <a id="32175" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="32179" class="Symbol">(</a><a id="32180" href="Demos.HSP.html#32161" class="Bound">f</a> <a id="32182" href="Demos.HSP.html#23896" class="Function Operator">ÃÇ</a> <a id="32184" href="Demos.HSP.html#32013" class="Bound">ùë®</a><a id="32185" class="Symbol">)</a> <a id="32187" href="Demos.HSP.html#32168" class="Bound">a</a> <a id="32189" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a> <a id="32191" class="Symbol">(</a><a id="32192" href="Demos.HSP.html#32161" class="Bound">f</a> <a id="32194" href="Demos.HSP.html#23896" class="Function Operator">ÃÇ</a> <a id="32196" href="Demos.HSP.html#32031" class="Bound">ùë©</a><a id="32197" class="Symbol">)</a> <a id="32199" class="Symbol">Œª</a> <a id="32201" href="Demos.HSP.html#32201" class="Bound">x</a> <a id="32203" class="Symbol">‚Üí</a> <a id="32205" href="Demos.HSP.html#32159" class="Bound">h</a> <a id="32207" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="32211" class="Symbol">(</a><a id="32212" href="Demos.HSP.html#32168" class="Bound">a</a> <a id="32214" href="Demos.HSP.html#32201" class="Bound">x</a><a id="32215" class="Symbol">)</a>
  <a id="32219" class="Keyword">where</a> <a id="32225" class="Keyword">open</a> <a id="32230" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="32237" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="32240" href="Demos.HSP.html#32031" class="Bound">ùë©</a> <a id="32242" href="Demos.HSP.html#23785" class="Function Operator">]</a> <a id="32244" class="Keyword">using</a> <a id="32250" class="Symbol">(</a> <a id="32252" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="32256" class="Symbol">)</a>

 <a id="32260" href="Demos.HSP.html#32260" class="Function">compatible-map</a> <a id="32275" class="Symbol">:</a> <a id="32277" class="Symbol">(</a><a id="32278" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="32281" href="Demos.HSP.html#32013" class="Bound">ùë®</a> <a id="32283" href="Demos.HSP.html#23785" class="Function Operator">]</a> <a id="32285" href="Demos.HSP.html#7491" class="Record Operator">‚ü∂</a> <a id="32287" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="32290" href="Demos.HSP.html#32031" class="Bound">ùë©</a> <a id="32292" href="Demos.HSP.html#23785" class="Function Operator">]</a><a id="32293" class="Symbol">)</a> <a id="32295" class="Symbol">‚Üí</a> <a id="32297" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="32302" class="Symbol">_</a>
 <a id="32305" href="Demos.HSP.html#32260" class="Function">compatible-map</a> <a id="32320" href="Demos.HSP.html#32320" class="Bound">h</a> <a id="32322" class="Symbol">=</a> <a id="32324" class="Symbol">‚àÄ</a> <a id="32326" class="Symbol">{</a><a id="32327" href="Demos.HSP.html#32327" class="Bound">f</a><a id="32328" class="Symbol">}</a> <a id="32330" class="Symbol">‚Üí</a> <a id="32332" href="Demos.HSP.html#32085" class="Function">compatible-map-op</a> <a id="32350" href="Demos.HSP.html#32320" class="Bound">h</a> <a id="32352" href="Demos.HSP.html#32327" class="Bound">f</a>

</pre>
Using these we define the property (\ar{IsHom}) of being a homomorphism, and
finally the type \af{hom} of homomorphisms from \ab{ùë®} to \ab{ùêµ}.

<pre class="Agda">

 <a id="32525" class="Keyword">record</a> <a id="32532" href="Demos.HSP.html#32532" class="Record">IsHom</a> <a id="32538" class="Symbol">(</a><a id="32539" href="Demos.HSP.html#32539" class="Bound">h</a> <a id="32541" class="Symbol">:</a> <a id="32543" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="32546" href="Demos.HSP.html#32013" class="Bound">ùë®</a> <a id="32548" href="Demos.HSP.html#23785" class="Function Operator">]</a> <a id="32550" href="Demos.HSP.html#7491" class="Record Operator">‚ü∂</a> <a id="32552" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="32555" href="Demos.HSP.html#32031" class="Bound">ùë©</a> <a id="32557" href="Demos.HSP.html#23785" class="Function Operator">]</a><a id="32558" class="Symbol">)</a> <a id="32560" class="Symbol">:</a> <a id="32562" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="32567" class="Symbol">(</a><a id="32568" href="Demos.HSP.html#6194" class="Bound">ùìû</a> <a id="32570" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="32572" href="Demos.HSP.html#6196" class="Bound">ùì•</a> <a id="32574" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="32576" href="Demos.HSP.html#32025" class="Bound">Œ±</a> <a id="32578" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="32580" href="Demos.HSP.html#32045" class="Bound">œÅ·µá</a><a id="32582" class="Symbol">)</a> <a id="32584" class="Keyword">where</a>
  <a id="32592" class="Keyword">constructor</a> <a id="32604" href="Demos.HSP.html#32604" class="InductiveConstructor">mkhom</a> <a id="32610" class="Symbol">;</a> <a id="32612" class="Keyword">field</a> <a id="32618" href="Demos.HSP.html#32618" class="Field">compatible</a> <a id="32629" class="Symbol">:</a> <a id="32631" href="Demos.HSP.html#32260" class="Function">compatible-map</a> <a id="32646" href="Demos.HSP.html#32539" class="Bound">h</a>

 <a id="32650" href="Demos.HSP.html#32650" class="Function">hom</a> <a id="32654" class="Symbol">:</a> <a id="32656" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="32661" class="Symbol">_</a>
 <a id="32664" href="Demos.HSP.html#32650" class="Function">hom</a> <a id="32668" class="Symbol">=</a> <a id="32670" href="Agda.Builtin.Sigma.html#166" class="Record">Œ£</a> <a id="32672" class="Symbol">(</a><a id="32673" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a>¬†<a id="32676" href="Demos.HSP.html#32013" class="Bound">ùë®</a> <a id="32678" href="Demos.HSP.html#23785" class="Function Operator">]</a> <a id="32680" href="Demos.HSP.html#7491" class="Record Operator">‚ü∂</a> <a id="32682" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="32685" href="Demos.HSP.html#32031" class="Bound">ùë©</a> <a id="32687" href="Demos.HSP.html#23785" class="Function Operator">]</a><a id="32688" class="Symbol">)</a> <a id="32690" href="Demos.HSP.html#32532" class="Record">IsHom</a>

</pre>
Thus, an inhabitant of \af{hom} is a pair (\ab h , \ab p) consisting of
a setoid function \ab h, from the domain of \ab{ùë®} to that of \ab{ùë©}, along with
a proof \ab p that \ab h is a homomorphism.

A \defn{monomorphism} (resp. \defn{epimorphism}) is an injective (resp. surjective)
homomorphism. We define predicates \ar{IsMon} and \ar{IsEpi} for these,
 well as \af{mon} and \af{epi} for the corresponding types.
\ifshort %%% BEGIN SHORT VERSION ONLY
\else    %%% BEGIN LONG VERSION ONLY

<pre class="Agda">

 <a id="33213" class="Keyword">record</a> <a id="33220" href="Demos.HSP.html#33220" class="Record">IsMon</a> <a id="33226" class="Symbol">(</a><a id="33227" href="Demos.HSP.html#33227" class="Bound">h</a> <a id="33229" class="Symbol">:</a> <a id="33231" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="33234" href="Demos.HSP.html#32013" class="Bound">ùë®</a> <a id="33236" href="Demos.HSP.html#23785" class="Function Operator">]</a> <a id="33238" href="Demos.HSP.html#7491" class="Record Operator">‚ü∂</a> <a id="33240" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="33243" href="Demos.HSP.html#32031" class="Bound">ùë©</a> <a id="33245" href="Demos.HSP.html#23785" class="Function Operator">]</a><a id="33246" class="Symbol">)</a> <a id="33248" class="Symbol">:</a> <a id="33250" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="33255" class="Symbol">(</a><a id="33256" href="Demos.HSP.html#6194" class="Bound">ùìû</a> <a id="33258" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="33260" href="Demos.HSP.html#6196" class="Bound">ùì•</a> <a id="33262" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="33264" href="Demos.HSP.html#32025" class="Bound">Œ±</a> <a id="33266" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="33268" href="Demos.HSP.html#32027" class="Bound">œÅ·µÉ</a> <a id="33271" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="33273" href="Demos.HSP.html#32045" class="Bound">œÅ·µá</a><a id="33275" class="Symbol">)</a> <a id="33277" class="Keyword">where</a>
  <a id="33285" class="Keyword">field</a>  <a id="33292" href="Demos.HSP.html#33292" class="Field">isHom</a> <a id="33298" class="Symbol">:</a> <a id="33300" href="Demos.HSP.html#32532" class="Record">IsHom</a> <a id="33306" href="Demos.HSP.html#33227" class="Bound">h</a>
         <a id="33317" href="Demos.HSP.html#33317" class="Field">isInjective</a> <a id="33329" class="Symbol">:</a> <a id="33331" href="Demos.HSP.html#14057" class="Function">IsInjective</a> <a id="33343" href="Demos.HSP.html#33227" class="Bound">h</a>

  <a id="33348" href="Demos.HSP.html#33348" class="Function">HomReduct</a> <a id="33358" class="Symbol">:</a> <a id="33360" href="Demos.HSP.html#32650" class="Function">hom</a>
  <a id="33366" href="Demos.HSP.html#33348" class="Function">HomReduct</a> <a id="33376" class="Symbol">=</a> <a id="33378" href="Demos.HSP.html#33227" class="Bound">h</a> <a id="33380" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="33382" href="Demos.HSP.html#33292" class="Field">isHom</a>

 <a id="33390" href="Demos.HSP.html#33390" class="Function">mon</a> <a id="33394" class="Symbol">:</a> <a id="33396" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="33401" class="Symbol">_</a>
 <a id="33404" href="Demos.HSP.html#33390" class="Function">mon</a> <a id="33408" class="Symbol">=</a> <a id="33410" href="Agda.Builtin.Sigma.html#166" class="Record">Œ£</a> <a id="33412" class="Symbol">(</a><a id="33413" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="33416" href="Demos.HSP.html#32013" class="Bound">ùë®</a> <a id="33418" href="Demos.HSP.html#23785" class="Function Operator">]</a> <a id="33420" href="Demos.HSP.html#7491" class="Record Operator">‚ü∂</a> <a id="33422" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="33425" href="Demos.HSP.html#32031" class="Bound">ùë©</a> <a id="33427" href="Demos.HSP.html#23785" class="Function Operator">]</a><a id="33428" class="Symbol">)</a> <a id="33430" href="Demos.HSP.html#33220" class="Record">IsMon</a>

</pre>
As with \af{hom}, the type \af{mon} is a dependent product type; each inhabitant is a pair
consisting of a setoid function, say, \ab h, along with a proof that \ab h is a
monomorphism.

<pre class="Agda">

 <a id="33649" class="Keyword">record</a> <a id="33656" href="Demos.HSP.html#33656" class="Record">IsEpi</a> <a id="33662" class="Symbol">(</a><a id="33663" href="Demos.HSP.html#33663" class="Bound">h</a> <a id="33665" class="Symbol">:</a> <a id="33667" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="33670" href="Demos.HSP.html#32013" class="Bound">ùë®</a> <a id="33672" href="Demos.HSP.html#23785" class="Function Operator">]</a> <a id="33674" href="Demos.HSP.html#7491" class="Record Operator">‚ü∂</a> <a id="33676" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="33679" href="Demos.HSP.html#32031" class="Bound">ùë©</a> <a id="33681" href="Demos.HSP.html#23785" class="Function Operator">]</a><a id="33682" class="Symbol">)</a> <a id="33684" class="Symbol">:</a> <a id="33686" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="33691" class="Symbol">(</a><a id="33692" href="Demos.HSP.html#6194" class="Bound">ùìû</a> <a id="33694" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="33696" href="Demos.HSP.html#6196" class="Bound">ùì•</a> <a id="33698" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="33700" href="Demos.HSP.html#32025" class="Bound">Œ±</a> <a id="33702" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="33704" href="Demos.HSP.html#32043" class="Bound">Œ≤</a> <a id="33706" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="33708" href="Demos.HSP.html#32045" class="Bound">œÅ·µá</a><a id="33710" class="Symbol">)</a> <a id="33712" class="Keyword">where</a>
  <a id="33720" class="Keyword">field</a>  <a id="33727" href="Demos.HSP.html#33727" class="Field">isHom</a> <a id="33733" class="Symbol">:</a> <a id="33735" href="Demos.HSP.html#32532" class="Record">IsHom</a> <a id="33741" href="Demos.HSP.html#33663" class="Bound">h</a>
         <a id="33752" href="Demos.HSP.html#33752" class="Field">isSurjective</a> <a id="33765" class="Symbol">:</a> <a id="33767" href="Demos.HSP.html#14140" class="Function">IsSurjective</a> <a id="33780" href="Demos.HSP.html#33663" class="Bound">h</a>

  <a id="33785" href="Demos.HSP.html#33785" class="Function">HomReduct</a> <a id="33795" class="Symbol">:</a> <a id="33797" href="Demos.HSP.html#32650" class="Function">hom</a>
  <a id="33803" href="Demos.HSP.html#33785" class="Function">HomReduct</a> <a id="33813" class="Symbol">=</a> <a id="33815" href="Demos.HSP.html#33663" class="Bound">h</a> <a id="33817" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="33819" href="Demos.HSP.html#33727" class="Field">isHom</a>

 <a id="33827" href="Demos.HSP.html#33827" class="Function">epi</a> <a id="33831" class="Symbol">:</a> <a id="33833" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="33838" class="Symbol">_</a>
 <a id="33841" href="Demos.HSP.html#33827" class="Function">epi</a> <a id="33845" class="Symbol">=</a> <a id="33847" href="Agda.Builtin.Sigma.html#166" class="Record">Œ£</a> <a id="33849" class="Symbol">(</a><a id="33850" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="33853" href="Demos.HSP.html#32013" class="Bound">ùë®</a> <a id="33855" href="Demos.HSP.html#23785" class="Function Operator">]</a> <a id="33857" href="Demos.HSP.html#7491" class="Record Operator">‚ü∂</a> <a id="33859" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="33862" href="Demos.HSP.html#32031" class="Bound">ùë©</a> <a id="33864" href="Demos.HSP.html#23785" class="Function Operator">]</a><a id="33865" class="Symbol">)</a> <a id="33867" href="Demos.HSP.html#33656" class="Record">IsEpi</a>
</pre>

Here are two utilities that are useful for translating between types.

<pre class="Agda">
<a id="33969" class="Keyword">open</a> <a id="33974" href="Demos.HSP.html#32532" class="Module">IsHom</a> <a id="33980" class="Symbol">;</a> <a id="33982" class="Keyword">open</a> <a id="33987" href="Demos.HSP.html#33220" class="Module">IsMon</a> <a id="33993" class="Symbol">;</a> <a id="33995" class="Keyword">open</a> <a id="34000" href="Demos.HSP.html#33656" class="Module">IsEpi</a>

<a id="34007" class="Keyword">module</a> <a id="34014" href="Demos.HSP.html#34014" class="Module">_</a> <a id="34016" class="Symbol">(</a><a id="34017" href="Demos.HSP.html#34017" class="Bound">ùë®</a> <a id="34019" class="Symbol">:</a> <a id="34021" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="34029" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="34031" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="34033" class="Symbol">)(</a><a id="34035" href="Demos.HSP.html#34035" class="Bound">ùë©</a> <a id="34037" class="Symbol">:</a> <a id="34039" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="34047" href="Demos.HSP.html#8424" class="Generalizable">Œ≤</a> <a id="34049" href="Demos.HSP.html#8426" class="Generalizable">œÅ·µá</a><a id="34051" class="Symbol">)</a> <a id="34053" class="Keyword">where</a>

 <a id="34061" href="Demos.HSP.html#34061" class="Function">mon‚Üíintohom</a> <a id="34073" class="Symbol">:</a> <a id="34075" href="Demos.HSP.html#33390" class="Function">mon</a> <a id="34079" href="Demos.HSP.html#34017" class="Bound">ùë®</a> <a id="34081" href="Demos.HSP.html#34035" class="Bound">ùë©</a> <a id="34083" class="Symbol">‚Üí</a> <a id="34085" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="34088" href="Demos.HSP.html#34088" class="Bound">h</a> <a id="34090" href="Data.Product.html#916" class="Function">‚àà</a> <a id="34092" href="Demos.HSP.html#32650" class="Function">hom</a> <a id="34096" href="Demos.HSP.html#34017" class="Bound">ùë®</a> <a id="34098" href="Demos.HSP.html#34035" class="Bound">ùë©</a> <a id="34100" href="Data.Product.html#916" class="Function">]</a> <a id="34102" href="Demos.HSP.html#14057" class="Function">IsInjective</a> <a id="34114" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="34116" href="Demos.HSP.html#34088" class="Bound">h</a> <a id="34118" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a>
 <a id="34121" href="Demos.HSP.html#34061" class="Function">mon‚Üíintohom</a> <a id="34133" class="Symbol">(</a><a id="34134" href="Demos.HSP.html#34134" class="Bound">hh</a> <a id="34137" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="34139" href="Demos.HSP.html#34139" class="Bound">hhM</a><a id="34142" class="Symbol">)</a> <a id="34144" class="Symbol">=</a> <a id="34146" class="Symbol">(</a><a id="34147" href="Demos.HSP.html#34134" class="Bound">hh</a> <a id="34150" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="34152" href="Demos.HSP.html#33292" class="Field">isHom</a> <a id="34158" href="Demos.HSP.html#34139" class="Bound">hhM</a><a id="34161" class="Symbol">)</a> <a id="34163" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="34165" href="Demos.HSP.html#33317" class="Field">isInjective</a> <a id="34177" href="Demos.HSP.html#34139" class="Bound">hhM</a>

 <a id="34183" href="Demos.HSP.html#34183" class="Function">epi‚Üíontohom</a> <a id="34195" class="Symbol">:</a> <a id="34197" href="Demos.HSP.html#33827" class="Function">epi</a> <a id="34201" href="Demos.HSP.html#34017" class="Bound">ùë®</a> <a id="34203" href="Demos.HSP.html#34035" class="Bound">ùë©</a> <a id="34205" class="Symbol">‚Üí</a> <a id="34207" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="34210" href="Demos.HSP.html#34210" class="Bound">h</a> <a id="34212" href="Data.Product.html#916" class="Function">‚àà</a> <a id="34214" href="Demos.HSP.html#32650" class="Function">hom</a> <a id="34218" href="Demos.HSP.html#34017" class="Bound">ùë®</a> <a id="34220" href="Demos.HSP.html#34035" class="Bound">ùë©</a> <a id="34222" href="Data.Product.html#916" class="Function">]</a> <a id="34224" href="Demos.HSP.html#14140" class="Function">IsSurjective</a> <a id="34237" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="34239" href="Demos.HSP.html#34210" class="Bound">h</a> <a id="34241" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a>
 <a id="34244" href="Demos.HSP.html#34183" class="Function">epi‚Üíontohom</a> <a id="34256" class="Symbol">(</a><a id="34257" href="Demos.HSP.html#34257" class="Bound">hh</a> <a id="34260" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="34262" href="Demos.HSP.html#34262" class="Bound">hhE</a><a id="34265" class="Symbol">)</a> <a id="34267" class="Symbol">=</a> <a id="34269" class="Symbol">(</a><a id="34270" href="Demos.HSP.html#34257" class="Bound">hh</a> <a id="34273" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="34275" href="Demos.HSP.html#33727" class="Field">isHom</a> <a id="34281" href="Demos.HSP.html#34262" class="Bound">hhE</a><a id="34284" class="Symbol">)</a> <a id="34286" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="34288" href="Demos.HSP.html#33752" class="Field">isSurjective</a> <a id="34301" href="Demos.HSP.html#34262" class="Bound">hhE</a>
</pre>

\paragraph*{Composition of homomorphisms}
\fi      %%% END LONG VERSION ONLY SECTION
The composition of homomorphisms is again a homomorphism, and similarly for epimorphisms and monomorphisms.
\ifshort
The proofs of these facts are straightforward so we omit them, but give them the names
\af{‚àò-hom} and \af{‚àò-epi} so we can refer to them below.
\else

<pre class="Agda">

<a id="34684" class="Keyword">module</a> <a id="34691" href="Demos.HSP.html#34691" class="Module">_</a>  <a id="34694" class="Symbol">{</a><a id="34695" href="Demos.HSP.html#34695" class="Bound">ùë®</a> <a id="34697" class="Symbol">:</a> <a id="34699" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="34707" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="34709" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="34711" class="Symbol">}</a> <a id="34713" class="Symbol">{</a><a id="34714" href="Demos.HSP.html#34714" class="Bound">ùë©</a> <a id="34716" class="Symbol">:</a> <a id="34718" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="34726" href="Demos.HSP.html#8424" class="Generalizable">Œ≤</a> <a id="34728" href="Demos.HSP.html#8426" class="Generalizable">œÅ·µá</a><a id="34730" class="Symbol">}</a> <a id="34732" class="Symbol">{</a><a id="34733" href="Demos.HSP.html#34733" class="Bound">ùë™</a> <a id="34735" class="Symbol">:</a> <a id="34737" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="34745" href="Demos.HSP.html#8429" class="Generalizable">Œ≥</a> <a id="34747" href="Demos.HSP.html#8431" class="Generalizable">œÅ·∂ú</a><a id="34749" class="Symbol">}</a>
          <a id="34761" class="Symbol">{</a><a id="34762" href="Demos.HSP.html#34762" class="Bound">g</a> <a id="34764" class="Symbol">:</a> <a id="34766" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="34769" href="Demos.HSP.html#34695" class="Bound">ùë®</a> <a id="34771" href="Demos.HSP.html#23785" class="Function Operator">]</a> <a id="34773" href="Demos.HSP.html#7491" class="Record Operator">‚ü∂</a> <a id="34775" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="34778" href="Demos.HSP.html#34714" class="Bound">ùë©</a> <a id="34780" href="Demos.HSP.html#23785" class="Function Operator">]</a><a id="34781" class="Symbol">}{</a><a id="34783" href="Demos.HSP.html#34783" class="Bound">h</a> <a id="34785" class="Symbol">:</a> <a id="34787" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="34790" href="Demos.HSP.html#34714" class="Bound">ùë©</a> <a id="34792" href="Demos.HSP.html#23785" class="Function Operator">]</a> <a id="34794" href="Demos.HSP.html#7491" class="Record Operator">‚ü∂</a> <a id="34796" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="34799" href="Demos.HSP.html#34733" class="Bound">ùë™</a> <a id="34801" href="Demos.HSP.html#23785" class="Function Operator">]</a><a id="34802" class="Symbol">}</a> <a id="34804" class="Keyword">where</a>

  <a id="34813" class="Keyword">open</a> <a id="34818" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="34825" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="34828" href="Demos.HSP.html#34733" class="Bound">ùë™</a> <a id="34830" href="Demos.HSP.html#23785" class="Function Operator">]</a> <a id="34832" class="Keyword">using</a> <a id="34838" class="Symbol">(</a> <a id="34840" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="34846" class="Symbol">)</a>

  <a id="34851" href="Demos.HSP.html#34851" class="Function">‚àò-is-hom</a> <a id="34860" class="Symbol">:</a> <a id="34862" href="Demos.HSP.html#32532" class="Record">IsHom</a> <a id="34868" href="Demos.HSP.html#34695" class="Bound">ùë®</a> <a id="34870" href="Demos.HSP.html#34714" class="Bound">ùë©</a> <a id="34872" href="Demos.HSP.html#34762" class="Bound">g</a> <a id="34874" class="Symbol">‚Üí</a> <a id="34876" href="Demos.HSP.html#32532" class="Record">IsHom</a> <a id="34882" href="Demos.HSP.html#34714" class="Bound">ùë©</a> <a id="34884" href="Demos.HSP.html#34733" class="Bound">ùë™</a> <a id="34886" href="Demos.HSP.html#34783" class="Bound">h</a> <a id="34888" class="Symbol">‚Üí</a> <a id="34890" href="Demos.HSP.html#32532" class="Record">IsHom</a> <a id="34896" href="Demos.HSP.html#34695" class="Bound">ùë®</a> <a id="34898" href="Demos.HSP.html#34733" class="Bound">ùë™</a> <a id="34900" class="Symbol">(</a><a id="34901" href="Demos.HSP.html#34783" class="Bound">h</a> <a id="34903" href="Demos.HSP.html#11476" class="Function Operator">‚ü®‚àò‚ü©</a> <a id="34907" href="Demos.HSP.html#34762" class="Bound">g</a><a id="34908" class="Symbol">)</a>
  <a id="34912" href="Demos.HSP.html#34851" class="Function">‚àò-is-hom</a> <a id="34921" href="Demos.HSP.html#34921" class="Bound">ghom</a> <a id="34926" href="Demos.HSP.html#34926" class="Bound">hhom</a> <a id="34931" class="Symbol">=</a> <a id="34933" href="Demos.HSP.html#32604" class="InductiveConstructor">mkhom</a> <a id="34939" href="Demos.HSP.html#34953" class="Function">c</a>
   <a id="34944" class="Keyword">where</a>
   <a id="34953" href="Demos.HSP.html#34953" class="Function">c</a> <a id="34955" class="Symbol">:</a> <a id="34957" href="Demos.HSP.html#32260" class="Function">compatible-map</a> <a id="34972" href="Demos.HSP.html#34695" class="Bound">ùë®</a> <a id="34974" href="Demos.HSP.html#34733" class="Bound">ùë™</a> <a id="34976" class="Symbol">(</a><a id="34977" href="Demos.HSP.html#34783" class="Bound">h</a> <a id="34979" href="Demos.HSP.html#11476" class="Function Operator">‚ü®‚àò‚ü©</a> <a id="34983" href="Demos.HSP.html#34762" class="Bound">g</a><a id="34984" class="Symbol">)</a>
   <a id="34989" href="Demos.HSP.html#34953" class="Function">c</a> <a id="34991" class="Symbol">=</a> <a id="34993" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="34999" class="Symbol">(</a><a id="35000" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="35005" href="Demos.HSP.html#34783" class="Bound">h</a> <a id="35007" class="Symbol">(</a><a id="35008" href="Demos.HSP.html#32618" class="Field">compatible</a> <a id="35019" href="Demos.HSP.html#34921" class="Bound">ghom</a><a id="35023" class="Symbol">))</a> <a id="35026" class="Symbol">(</a><a id="35027" href="Demos.HSP.html#32618" class="Field">compatible</a> <a id="35038" href="Demos.HSP.html#34926" class="Bound">hhom</a><a id="35042" class="Symbol">)</a>

  <a id="35047" href="Demos.HSP.html#35047" class="Function">‚àò-is-epi</a> <a id="35056" class="Symbol">:</a> <a id="35058" href="Demos.HSP.html#33656" class="Record">IsEpi</a> <a id="35064" href="Demos.HSP.html#34695" class="Bound">ùë®</a> <a id="35066" href="Demos.HSP.html#34714" class="Bound">ùë©</a> <a id="35068" href="Demos.HSP.html#34762" class="Bound">g</a> <a id="35070" class="Symbol">‚Üí</a> <a id="35072" href="Demos.HSP.html#33656" class="Record">IsEpi</a> <a id="35078" href="Demos.HSP.html#34714" class="Bound">ùë©</a> <a id="35080" href="Demos.HSP.html#34733" class="Bound">ùë™</a> <a id="35082" href="Demos.HSP.html#34783" class="Bound">h</a> <a id="35084" class="Symbol">‚Üí</a> <a id="35086" href="Demos.HSP.html#33656" class="Record">IsEpi</a> <a id="35092" href="Demos.HSP.html#34695" class="Bound">ùë®</a> <a id="35094" href="Demos.HSP.html#34733" class="Bound">ùë™</a> <a id="35096" class="Symbol">(</a><a id="35097" href="Demos.HSP.html#34783" class="Bound">h</a> <a id="35099" href="Demos.HSP.html#11476" class="Function Operator">‚ü®‚àò‚ü©</a> <a id="35103" href="Demos.HSP.html#34762" class="Bound">g</a><a id="35104" class="Symbol">)</a>
  <a id="35108" href="Demos.HSP.html#35047" class="Function">‚àò-is-epi</a> <a id="35117" href="Demos.HSP.html#35117" class="Bound">gE</a> <a id="35120" href="Demos.HSP.html#35120" class="Bound">hE</a> <a id="35123" class="Symbol">=</a> <a id="35125" class="Keyword">record</a>  <a id="35133" class="Symbol">{</a> <a id="35135" href="Demos.HSP.html#33727" class="Field">isHom</a> <a id="35141" class="Symbol">=</a> <a id="35143" href="Demos.HSP.html#34851" class="Function">‚àò-is-hom</a> <a id="35152" class="Symbol">(</a><a id="35153" href="Demos.HSP.html#33727" class="Field">isHom</a> <a id="35159" href="Demos.HSP.html#35117" class="Bound">gE</a><a id="35161" class="Symbol">)</a> <a id="35163" class="Symbol">(</a><a id="35164" href="Demos.HSP.html#33727" class="Field">isHom</a> <a id="35170" href="Demos.HSP.html#35120" class="Bound">hE</a><a id="35172" class="Symbol">)</a>
                           <a id="35201" class="Symbol">;</a> <a id="35203" href="Demos.HSP.html#33752" class="Field">isSurjective</a> <a id="35216" class="Symbol">=</a> <a id="35218" href="Demos.HSP.html#14809" class="Function">‚àò-IsSurjective</a> <a id="35233" href="Demos.HSP.html#34762" class="Bound">g</a> <a id="35235" href="Demos.HSP.html#34783" class="Bound">h</a> <a id="35237" class="Symbol">(</a><a id="35238" href="Demos.HSP.html#33752" class="Field">isSurjective</a> <a id="35251" href="Demos.HSP.html#35117" class="Bound">gE</a><a id="35253" class="Symbol">)</a> <a id="35255" class="Symbol">(</a><a id="35256" href="Demos.HSP.html#33752" class="Field">isSurjective</a> <a id="35269" href="Demos.HSP.html#35120" class="Bound">hE</a><a id="35271" class="Symbol">)</a> <a id="35273" class="Symbol">}</a>

<a id="35276" class="Keyword">module</a> <a id="35283" href="Demos.HSP.html#35283" class="Module">_</a> <a id="35285" class="Symbol">{</a><a id="35286" href="Demos.HSP.html#35286" class="Bound">ùë®</a> <a id="35288" class="Symbol">:</a> <a id="35290" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="35298" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="35300" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="35302" class="Symbol">}</a> <a id="35304" class="Symbol">{</a><a id="35305" href="Demos.HSP.html#35305" class="Bound">ùë©</a> <a id="35307" class="Symbol">:</a> <a id="35309" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="35317" href="Demos.HSP.html#8424" class="Generalizable">Œ≤</a> <a id="35319" href="Demos.HSP.html#8426" class="Generalizable">œÅ·µá</a><a id="35321" class="Symbol">}</a> <a id="35323" class="Symbol">{</a><a id="35324" href="Demos.HSP.html#35324" class="Bound">ùë™</a> <a id="35326" class="Symbol">:</a> <a id="35328" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="35336" href="Demos.HSP.html#8429" class="Generalizable">Œ≥</a> <a id="35338" href="Demos.HSP.html#8431" class="Generalizable">œÅ·∂ú</a><a id="35340" class="Symbol">}</a> <a id="35342" class="Keyword">where</a>

  <a id="35351" href="Demos.HSP.html#35351" class="Function">‚àò-hom</a> <a id="35357" class="Symbol">:</a> <a id="35359" href="Demos.HSP.html#32650" class="Function">hom</a> <a id="35363" href="Demos.HSP.html#35286" class="Bound">ùë®</a> <a id="35365" href="Demos.HSP.html#35305" class="Bound">ùë©</a> <a id="35367" class="Symbol">‚Üí</a> <a id="35369" href="Demos.HSP.html#32650" class="Function">hom</a> <a id="35373" href="Demos.HSP.html#35305" class="Bound">ùë©</a> <a id="35375" href="Demos.HSP.html#35324" class="Bound">ùë™</a>  <a id="35378" class="Symbol">‚Üí</a> <a id="35380" href="Demos.HSP.html#32650" class="Function">hom</a> <a id="35384" href="Demos.HSP.html#35286" class="Bound">ùë®</a> <a id="35386" href="Demos.HSP.html#35324" class="Bound">ùë™</a>
  <a id="35390" href="Demos.HSP.html#35351" class="Function">‚àò-hom</a> <a id="35396" class="Symbol">(</a><a id="35397" href="Demos.HSP.html#35397" class="Bound">h</a> <a id="35399" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="35401" href="Demos.HSP.html#35401" class="Bound">hhom</a><a id="35405" class="Symbol">)</a> <a id="35407" class="Symbol">(</a><a id="35408" href="Demos.HSP.html#35408" class="Bound">g</a> <a id="35410" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="35412" href="Demos.HSP.html#35412" class="Bound">ghom</a><a id="35416" class="Symbol">)</a> <a id="35418" class="Symbol">=</a> <a id="35420" class="Symbol">(</a><a id="35421" href="Demos.HSP.html#35408" class="Bound">g</a> <a id="35423" href="Demos.HSP.html#11476" class="Function Operator">‚ü®‚àò‚ü©</a> <a id="35427" href="Demos.HSP.html#35397" class="Bound">h</a><a id="35428" class="Symbol">)</a> <a id="35430" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="35432" href="Demos.HSP.html#34851" class="Function">‚àò-is-hom</a> <a id="35441" href="Demos.HSP.html#35401" class="Bound">hhom</a> <a id="35446" href="Demos.HSP.html#35412" class="Bound">ghom</a>

  <a id="35454" href="Demos.HSP.html#35454" class="Function">‚àò-epi</a> <a id="35460" class="Symbol">:</a> <a id="35462" href="Demos.HSP.html#33827" class="Function">epi</a> <a id="35466" href="Demos.HSP.html#35286" class="Bound">ùë®</a> <a id="35468" href="Demos.HSP.html#35305" class="Bound">ùë©</a> <a id="35470" class="Symbol">‚Üí</a> <a id="35472" href="Demos.HSP.html#33827" class="Function">epi</a> <a id="35476" href="Demos.HSP.html#35305" class="Bound">ùë©</a> <a id="35478" href="Demos.HSP.html#35324" class="Bound">ùë™</a>  <a id="35481" class="Symbol">‚Üí</a> <a id="35483" href="Demos.HSP.html#33827" class="Function">epi</a> <a id="35487" href="Demos.HSP.html#35286" class="Bound">ùë®</a> <a id="35489" href="Demos.HSP.html#35324" class="Bound">ùë™</a>
  <a id="35493" href="Demos.HSP.html#35454" class="Function">‚àò-epi</a> <a id="35499" class="Symbol">(</a><a id="35500" href="Demos.HSP.html#35500" class="Bound">h</a> <a id="35502" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="35504" href="Demos.HSP.html#35504" class="Bound">hepi</a><a id="35508" class="Symbol">)</a> <a id="35510" class="Symbol">(</a><a id="35511" href="Demos.HSP.html#35511" class="Bound">g</a> <a id="35513" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="35515" href="Demos.HSP.html#35515" class="Bound">gepi</a><a id="35519" class="Symbol">)</a> <a id="35521" class="Symbol">=</a> <a id="35523" class="Symbol">(</a><a id="35524" href="Demos.HSP.html#35511" class="Bound">g</a> <a id="35526" href="Demos.HSP.html#11476" class="Function Operator">‚ü®‚àò‚ü©</a> <a id="35530" href="Demos.HSP.html#35500" class="Bound">h</a><a id="35531" class="Symbol">)</a> <a id="35533" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="35535" href="Demos.HSP.html#35047" class="Function">‚àò-is-epi</a> <a id="35544" href="Demos.HSP.html#35504" class="Bound">hepi</a> <a id="35549" href="Demos.HSP.html#35515" class="Bound">gepi</a>
</pre>

\paragraph*{Universe lifting of homomorphisms}
Here we define the identity homomorphism for setoid algebras. Then we prove that the
operations of lifting and lowering of a setoid algebra are homomorphisms.

<pre class="Agda">

<a id="ùíæùíπ"></a><a id="35787" href="Demos.HSP.html#35787" class="Function">ùíæùíπ</a> <a id="35790" class="Symbol">:</a> <a id="35792" class="Symbol">{</a><a id="35793" href="Demos.HSP.html#35793" class="Bound">ùë®</a> <a id="35795" class="Symbol">:</a> <a id="35797" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="35805" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="35807" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="35809" class="Symbol">}</a> <a id="35811" class="Symbol">‚Üí</a> <a id="35813" href="Demos.HSP.html#32650" class="Function">hom</a> <a id="35817" href="Demos.HSP.html#35793" class="Bound">ùë®</a> <a id="35819" href="Demos.HSP.html#35793" class="Bound">ùë®</a>
<a id="35821" href="Demos.HSP.html#35787" class="Function">ùíæùíπ</a> <a id="35824" class="Symbol">{</a><a id="35825" class="Argument">ùë®</a> <a id="35827" class="Symbol">=</a> <a id="35829" href="Demos.HSP.html#35829" class="Bound">ùë®</a><a id="35830" class="Symbol">}</a> <a id="35832" class="Symbol">=</a> <a id="35834" href="Demos.HSP.html#11405" class="Function">ùëñùëë</a> <a id="35837" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="35839" href="Demos.HSP.html#32604" class="InductiveConstructor">mkhom</a> <a id="35845" class="Symbol">(</a><a id="35846" href="Relation.Binary.Structures.html#1646" class="Function">reflexive</a> <a id="35856" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a><a id="35862" class="Symbol">)</a> <a id="35864" class="Keyword">where</a> <a id="35870" class="Keyword">open</a> <a id="35875" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="35882" class="Symbol">(</a> <a id="35884" href="Demos.HSP.html#22892" class="Field">Domain</a> <a id="35891" href="Demos.HSP.html#35829" class="Bound">ùë®</a> <a id="35893" class="Symbol">)</a> <a id="35895" class="Keyword">using</a> <a id="35901" class="Symbol">(</a> <a id="35903" href="Relation.Binary.Structures.html#1646" class="Function">reflexive</a> <a id="35913" class="Symbol">)</a>

<a id="35916" class="Keyword">module</a> <a id="35923" href="Demos.HSP.html#35923" class="Module">_</a> <a id="35925" class="Symbol">{</a><a id="35926" href="Demos.HSP.html#35926" class="Bound">ùë®</a> <a id="35928" class="Symbol">:</a> <a id="35930" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="35938" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="35940" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="35942" class="Symbol">}{</a><a id="35944" href="Demos.HSP.html#35944" class="Bound">‚Ñì</a> <a id="35946" class="Symbol">:</a> <a id="35948" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="35953" class="Symbol">}</a> <a id="35955" class="Keyword">where</a>
 <a id="35962" class="Keyword">open</a> <a id="35967" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="35974" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="35977" href="Demos.HSP.html#35926" class="Bound">ùë®</a> <a id="35979" href="Demos.HSP.html#23785" class="Function Operator">]</a>              <a id="35994" class="Keyword">using</a> <a id="36000" class="Symbol">(</a> <a id="36002" href="Relation.Binary.Structures.html#1646" class="Function">reflexive</a> <a id="36012" class="Symbol">)</a>  <a id="36015" class="Keyword">renaming</a> <a id="36024" class="Symbol">(</a> <a id="36026" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="36030" class="Symbol">to</a> <a id="36033" class="Field Operator">_‚âà‚ÇÅ_</a> <a id="36038" class="Symbol">;</a> <a id="36040" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="36045" class="Symbol">to</a> <a id="36048" class="Function">refl‚ÇÅ</a> <a id="36054" class="Symbol">)</a>
 <a id="36057" class="Keyword">open</a> <a id="36062" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="36069" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="36072" href="Demos.HSP.html#26822" class="Function">Lift-AlgÀ°</a> <a id="36082" href="Demos.HSP.html#35926" class="Bound">ùë®</a> <a id="36084" href="Demos.HSP.html#35944" class="Bound">‚Ñì</a> <a id="36086" href="Demos.HSP.html#23785" class="Function Operator">]</a>  <a id="36089" class="Keyword">using</a> <a id="36095" class="Symbol">()</a>             <a id="36110" class="Keyword">renaming</a> <a id="36119" class="Symbol">(</a> <a id="36121" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="36125" class="Symbol">to</a> <a id="36128" class="Field Operator">_‚âàÀ°_</a> <a id="36133" class="Symbol">;</a> <a id="36135" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="36140" class="Symbol">to</a> <a id="36143" class="Function">reflÀ°</a><a id="36148" class="Symbol">)</a>
 <a id="36151" class="Keyword">open</a> <a id="36156" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="36163" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="36166" href="Demos.HSP.html#27217" class="Function">Lift-Alg ≥</a> <a id="36176" href="Demos.HSP.html#35926" class="Bound">ùë®</a> <a id="36178" href="Demos.HSP.html#35944" class="Bound">‚Ñì</a> <a id="36180" href="Demos.HSP.html#23785" class="Function Operator">]</a>  <a id="36183" class="Keyword">using</a> <a id="36189" class="Symbol">()</a>             <a id="36204" class="Keyword">renaming</a> <a id="36213" class="Symbol">(</a> <a id="36215" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="36219" class="Symbol">to</a> <a id="36222" class="Field Operator">_‚âà ≥_</a> <a id="36227" class="Symbol">;</a> <a id="36229" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="36234" class="Symbol">to</a> <a id="36237" class="Function">refl ≥</a><a id="36242" class="Symbol">)</a>
 <a id="36245" class="Keyword">open</a> <a id="36250" href="Level.html" class="Module">Level</a>

 <a id="36258" href="Demos.HSP.html#36258" class="Function">ToLiftÀ°</a> <a id="36266" class="Symbol">:</a> <a id="36268" href="Demos.HSP.html#32650" class="Function">hom</a> <a id="36272" href="Demos.HSP.html#35926" class="Bound">ùë®</a> <a id="36274" class="Symbol">(</a><a id="36275" href="Demos.HSP.html#26822" class="Function">Lift-AlgÀ°</a> <a id="36285" href="Demos.HSP.html#35926" class="Bound">ùë®</a> <a id="36287" href="Demos.HSP.html#35944" class="Bound">‚Ñì</a><a id="36288" class="Symbol">)</a>
 <a id="36291" href="Demos.HSP.html#36258" class="Function">ToLiftÀ°</a> <a id="36299" class="Symbol">=</a> <a id="36301" class="Keyword">record</a> <a id="36308" class="Symbol">{</a> <a id="36310" href="Function.Bundles.html#1919" class="Field">f</a> <a id="36312" class="Symbol">=</a> <a id="36314" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="36319" class="Symbol">;</a> <a id="36321" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="36326" class="Symbol">=</a> <a id="36328" href="Function.Base.html#615" class="Function">id</a> <a id="36331" class="Symbol">}</a> <a id="36333" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="36335" href="Demos.HSP.html#32604" class="InductiveConstructor">mkhom</a> <a id="36341" class="Symbol">(</a><a id="36342" href="Relation.Binary.Structures.html#1646" class="Function">reflexive</a> <a id="36352" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a><a id="36358" class="Symbol">)</a>

 <a id="36362" href="Demos.HSP.html#36362" class="Function">FromLiftÀ°</a> <a id="36372" class="Symbol">:</a> <a id="36374" href="Demos.HSP.html#32650" class="Function">hom</a> <a id="36378" class="Symbol">(</a><a id="36379" href="Demos.HSP.html#26822" class="Function">Lift-AlgÀ°</a> <a id="36389" href="Demos.HSP.html#35926" class="Bound">ùë®</a> <a id="36391" href="Demos.HSP.html#35944" class="Bound">‚Ñì</a><a id="36392" class="Symbol">)</a> <a id="36394" href="Demos.HSP.html#35926" class="Bound">ùë®</a>
 <a id="36397" href="Demos.HSP.html#36362" class="Function">FromLiftÀ°</a> <a id="36407" class="Symbol">=</a> <a id="36409" class="Keyword">record</a> <a id="36416" class="Symbol">{</a> <a id="36418" href="Function.Bundles.html#1919" class="Field">f</a> <a id="36420" class="Symbol">=</a> <a id="36422" href="Level.html#470" class="Field">lower</a> <a id="36428" class="Symbol">;</a> <a id="36430" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="36435" class="Symbol">=</a> <a id="36437" href="Function.Base.html#615" class="Function">id</a> <a id="36440" class="Symbol">}</a> <a id="36442" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="36444" href="Demos.HSP.html#32604" class="InductiveConstructor">mkhom</a> <a id="36450" href="Demos.HSP.html#36143" class="Function">reflÀ°</a>

 <a id="36458" href="Demos.HSP.html#36458" class="Function">ToFromLiftÀ°</a> <a id="36470" class="Symbol">:</a> <a id="36472" class="Symbol">‚àÄ</a> <a id="36474" href="Demos.HSP.html#36474" class="Bound">b</a> <a id="36476" class="Symbol">‚Üí</a>  <a id="36479" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="36481" href="Demos.HSP.html#36258" class="Function">ToLiftÀ°</a> <a id="36489" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="36491" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="36495" class="Symbol">(</a><a id="36496" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="36498" href="Demos.HSP.html#36362" class="Function">FromLiftÀ°</a> <a id="36508" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="36510" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="36514" href="Demos.HSP.html#36474" class="Bound">b</a><a id="36515" class="Symbol">)</a> <a id="36517" href="Demos.HSP.html#36128" class="Function Operator">‚âàÀ°</a> <a id="36520" href="Demos.HSP.html#36474" class="Bound">b</a>
 <a id="36523" href="Demos.HSP.html#36458" class="Function">ToFromLiftÀ°</a> <a id="36535" href="Demos.HSP.html#36535" class="Bound">b</a> <a id="36537" class="Symbol">=</a> <a id="36539" href="Demos.HSP.html#36048" class="Function">refl‚ÇÅ</a>

 <a id="36547" href="Demos.HSP.html#36547" class="Function">FromToLiftÀ°</a> <a id="36559" class="Symbol">:</a> <a id="36561" class="Symbol">‚àÄ</a> <a id="36563" href="Demos.HSP.html#36563" class="Bound">a</a> <a id="36565" class="Symbol">‚Üí</a> <a id="36567" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="36569" href="Demos.HSP.html#36362" class="Function">FromLiftÀ°</a> <a id="36579" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="36581" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="36585" class="Symbol">(</a><a id="36586" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="36588" href="Demos.HSP.html#36258" class="Function">ToLiftÀ°</a> <a id="36596" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="36598" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="36602" href="Demos.HSP.html#36563" class="Bound">a</a><a id="36603" class="Symbol">)</a> <a id="36605" href="Demos.HSP.html#36033" class="Function Operator">‚âà‚ÇÅ</a> <a id="36608" href="Demos.HSP.html#36563" class="Bound">a</a>
 <a id="36611" href="Demos.HSP.html#36547" class="Function">FromToLiftÀ°</a> <a id="36623" href="Demos.HSP.html#36623" class="Bound">a</a> <a id="36625" class="Symbol">=</a> <a id="36627" href="Demos.HSP.html#36048" class="Function">refl‚ÇÅ</a>

 <a id="36635" href="Demos.HSP.html#36635" class="Function">ToLift ≥</a> <a id="36643" class="Symbol">:</a> <a id="36645" href="Demos.HSP.html#32650" class="Function">hom</a> <a id="36649" href="Demos.HSP.html#35926" class="Bound">ùë®</a> <a id="36651" class="Symbol">(</a><a id="36652" href="Demos.HSP.html#27217" class="Function">Lift-Alg ≥</a> <a id="36662" href="Demos.HSP.html#35926" class="Bound">ùë®</a> <a id="36664" href="Demos.HSP.html#35944" class="Bound">‚Ñì</a><a id="36665" class="Symbol">)</a>
 <a id="36668" href="Demos.HSP.html#36635" class="Function">ToLift ≥</a> <a id="36676" class="Symbol">=</a> <a id="36678" class="Keyword">record</a> <a id="36685" class="Symbol">{</a> <a id="36687" href="Function.Bundles.html#1919" class="Field">f</a> <a id="36689" class="Symbol">=</a> <a id="36691" href="Function.Base.html#615" class="Function">id</a> <a id="36694" class="Symbol">;</a> <a id="36696" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="36701" class="Symbol">=</a> <a id="36703" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="36708" class="Symbol">}</a> <a id="36710" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="36712" href="Demos.HSP.html#32604" class="InductiveConstructor">mkhom</a> <a id="36718" class="Symbol">(</a><a id="36719" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="36724" class="Symbol">(</a><a id="36725" href="Relation.Binary.Structures.html#1646" class="Function">reflexive</a> <a id="36735" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a><a id="36741" class="Symbol">))</a>

 <a id="36746" href="Demos.HSP.html#36746" class="Function">FromLift ≥</a> <a id="36756" class="Symbol">:</a> <a id="36758" href="Demos.HSP.html#32650" class="Function">hom</a> <a id="36762" class="Symbol">(</a><a id="36763" href="Demos.HSP.html#27217" class="Function">Lift-Alg ≥</a> <a id="36773" href="Demos.HSP.html#35926" class="Bound">ùë®</a> <a id="36775" href="Demos.HSP.html#35944" class="Bound">‚Ñì</a><a id="36776" class="Symbol">)</a> <a id="36778" href="Demos.HSP.html#35926" class="Bound">ùë®</a>
 <a id="36781" href="Demos.HSP.html#36746" class="Function">FromLift ≥</a> <a id="36791" class="Symbol">=</a> <a id="36793" class="Keyword">record</a> <a id="36800" class="Symbol">{</a> <a id="36802" href="Function.Bundles.html#1919" class="Field">f</a> <a id="36804" class="Symbol">=</a> <a id="36806" href="Function.Base.html#615" class="Function">id</a> <a id="36809" class="Symbol">;</a> <a id="36811" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="36816" class="Symbol">=</a> <a id="36818" href="Level.html#470" class="Field">lower</a> <a id="36824" class="Symbol">}</a> <a id="36826" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="36828" href="Demos.HSP.html#32604" class="InductiveConstructor">mkhom</a> <a id="36834" href="Demos.HSP.html#36143" class="Function">reflÀ°</a>

 <a id="36842" href="Demos.HSP.html#36842" class="Function">ToFromLift ≥</a> <a id="36854" class="Symbol">:</a> <a id="36856" class="Symbol">‚àÄ</a> <a id="36858" href="Demos.HSP.html#36858" class="Bound">b</a> <a id="36860" class="Symbol">‚Üí</a> <a id="36862" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="36864" href="Demos.HSP.html#36635" class="Function">ToLift ≥</a> <a id="36872" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="36874" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="36878" class="Symbol">(</a><a id="36879" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="36881" href="Demos.HSP.html#36746" class="Function">FromLift ≥</a> <a id="36891" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="36893" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="36897" href="Demos.HSP.html#36858" class="Bound">b</a><a id="36898" class="Symbol">)</a> <a id="36900" href="Demos.HSP.html#36222" class="Function Operator">‚âà ≥</a> <a id="36903" href="Demos.HSP.html#36858" class="Bound">b</a>
 <a id="36906" href="Demos.HSP.html#36842" class="Function">ToFromLift ≥</a> <a id="36918" href="Demos.HSP.html#36918" class="Bound">b</a> <a id="36920" class="Symbol">=</a> <a id="36922" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="36927" href="Demos.HSP.html#36048" class="Function">refl‚ÇÅ</a>

 <a id="36935" href="Demos.HSP.html#36935" class="Function">FromToLift ≥</a> <a id="36947" class="Symbol">:</a> <a id="36949" class="Symbol">‚àÄ</a> <a id="36951" href="Demos.HSP.html#36951" class="Bound">a</a> <a id="36953" class="Symbol">‚Üí</a> <a id="36955" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="36957" href="Demos.HSP.html#36746" class="Function">FromLift ≥</a> <a id="36967" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="36969" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="36973" class="Symbol">(</a><a id="36974" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="36976" href="Demos.HSP.html#36635" class="Function">ToLift ≥</a> <a id="36984" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="36986" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="36990" href="Demos.HSP.html#36951" class="Bound">a</a><a id="36991" class="Symbol">)</a> <a id="36993" href="Demos.HSP.html#36033" class="Function Operator">‚âà‚ÇÅ</a> <a id="36996" href="Demos.HSP.html#36951" class="Bound">a</a>
 <a id="36999" href="Demos.HSP.html#36935" class="Function">FromToLift ≥</a> <a id="37011" href="Demos.HSP.html#37011" class="Bound">a</a> <a id="37013" class="Symbol">=</a> <a id="37015" href="Demos.HSP.html#36048" class="Function">refl‚ÇÅ</a>


<a id="37023" class="Keyword">module</a> <a id="37030" href="Demos.HSP.html#37030" class="Module">_</a> <a id="37032" class="Symbol">{</a><a id="37033" href="Demos.HSP.html#37033" class="Bound">ùë®</a> <a id="37035" class="Symbol">:</a> <a id="37037" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="37045" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="37047" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="37049" class="Symbol">}{</a><a id="37051" href="Demos.HSP.html#37051" class="Bound">‚Ñì</a> <a id="37053" href="Demos.HSP.html#37053" class="Bound">r</a> <a id="37055" class="Symbol">:</a> <a id="37057" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="37062" class="Symbol">}</a> <a id="37064" class="Keyword">where</a>
 <a id="37071" class="Keyword">open</a>  <a id="37077" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="37084" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="37087" href="Demos.HSP.html#37033" class="Bound">ùë®</a> <a id="37089" href="Demos.HSP.html#23785" class="Function Operator">]</a>               <a id="37105" class="Keyword">using</a> <a id="37111" class="Symbol">(</a> <a id="37113" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="37118" class="Symbol">)</a>
 <a id="37121" class="Keyword">open</a>  <a id="37127" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="37134" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="37137" href="Demos.HSP.html#27763" class="Function">Lift-Alg</a> <a id="37146" href="Demos.HSP.html#37033" class="Bound">ùë®</a> <a id="37148" href="Demos.HSP.html#37051" class="Bound">‚Ñì</a> <a id="37150" href="Demos.HSP.html#37053" class="Bound">r</a> <a id="37152" href="Demos.HSP.html#23785" class="Function Operator">]</a>  <a id="37155" class="Keyword">using</a> <a id="37161" class="Symbol">(</a> <a id="37163" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="37167" class="Symbol">)</a>
 <a id="37170" class="Keyword">open</a>  <a id="37176" href="Level.html" class="Module">Level</a>

 <a id="37184" href="Demos.HSP.html#37184" class="Function">ToLift</a> <a id="37191" class="Symbol">:</a> <a id="37193" href="Demos.HSP.html#32650" class="Function">hom</a> <a id="37197" href="Demos.HSP.html#37033" class="Bound">ùë®</a> <a id="37199" class="Symbol">(</a><a id="37200" href="Demos.HSP.html#27763" class="Function">Lift-Alg</a> <a id="37209" href="Demos.HSP.html#37033" class="Bound">ùë®</a> <a id="37211" href="Demos.HSP.html#37051" class="Bound">‚Ñì</a> <a id="37213" href="Demos.HSP.html#37053" class="Bound">r</a><a id="37214" class="Symbol">)</a>
 <a id="37217" href="Demos.HSP.html#37184" class="Function">ToLift</a> <a id="37224" class="Symbol">=</a> <a id="37226" href="Demos.HSP.html#35351" class="Function">‚àò-hom</a> <a id="37232" href="Demos.HSP.html#36258" class="Function">ToLiftÀ°</a> <a id="37240" href="Demos.HSP.html#36635" class="Function">ToLift ≥</a>

 <a id="37250" href="Demos.HSP.html#37250" class="Function">FromLift</a> <a id="37259" class="Symbol">:</a> <a id="37261" href="Demos.HSP.html#32650" class="Function">hom</a> <a id="37265" class="Symbol">(</a><a id="37266" href="Demos.HSP.html#27763" class="Function">Lift-Alg</a> <a id="37275" href="Demos.HSP.html#37033" class="Bound">ùë®</a> <a id="37277" href="Demos.HSP.html#37051" class="Bound">‚Ñì</a> <a id="37279" href="Demos.HSP.html#37053" class="Bound">r</a><a id="37280" class="Symbol">)</a> <a id="37282" href="Demos.HSP.html#37033" class="Bound">ùë®</a>
 <a id="37285" href="Demos.HSP.html#37250" class="Function">FromLift</a> <a id="37294" class="Symbol">=</a> <a id="37296" href="Demos.HSP.html#35351" class="Function">‚àò-hom</a> <a id="37302" href="Demos.HSP.html#36746" class="Function">FromLift ≥</a> <a id="37312" href="Demos.HSP.html#36362" class="Function">FromLiftÀ°</a>

 <a id="37324" href="Demos.HSP.html#37324" class="Function">ToFromLift</a> <a id="37335" class="Symbol">:</a> <a id="37337" class="Symbol">‚àÄ</a> <a id="37339" href="Demos.HSP.html#37339" class="Bound">b</a> <a id="37341" class="Symbol">‚Üí</a> <a id="37343" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="37345" href="Demos.HSP.html#37184" class="Function">ToLift</a> <a id="37352" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="37354" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="37358" class="Symbol">(</a><a id="37359" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="37361" href="Demos.HSP.html#37250" class="Function">FromLift</a> <a id="37370" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="37372" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="37376" href="Demos.HSP.html#37339" class="Bound">b</a><a id="37377" class="Symbol">)</a> <a id="37379" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a> <a id="37381" href="Demos.HSP.html#37339" class="Bound">b</a>
 <a id="37384" href="Demos.HSP.html#37324" class="Function">ToFromLift</a> <a id="37395" href="Demos.HSP.html#37395" class="Bound">b</a> <a id="37397" class="Symbol">=</a> <a id="37399" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="37404" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>

 <a id="37411" href="Demos.HSP.html#37411" class="Function">ToLift-epi</a> <a id="37422" class="Symbol">:</a> <a id="37424" href="Demos.HSP.html#33827" class="Function">epi</a> <a id="37428" href="Demos.HSP.html#37033" class="Bound">ùë®</a> <a id="37430" class="Symbol">(</a><a id="37431" href="Demos.HSP.html#27763" class="Function">Lift-Alg</a> <a id="37440" href="Demos.HSP.html#37033" class="Bound">ùë®</a> <a id="37442" href="Demos.HSP.html#37051" class="Bound">‚Ñì</a> <a id="37444" href="Demos.HSP.html#37053" class="Bound">r</a><a id="37445" class="Symbol">)</a>
 <a id="37448" href="Demos.HSP.html#37411" class="Function">ToLift-epi</a> <a id="37459" class="Symbol">=</a> <a id="37461" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="37463" href="Demos.HSP.html#37184" class="Function">ToLift</a> <a id="37470" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="37472" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a>  <a id="37475" class="Keyword">record</a> <a id="37482" class="Symbol">{</a> <a id="37484" href="Demos.HSP.html#33727" class="Field">isHom</a> <a id="37490" class="Symbol">=</a> <a id="37492" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a> <a id="37494" href="Demos.HSP.html#37184" class="Function">ToLift</a> <a id="37501" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a>
                            <a id="37531" class="Symbol">;</a> <a id="37533" href="Demos.HSP.html#33752" class="Field">isSurjective</a> <a id="37546" class="Symbol">=</a> <a id="37548" class="Symbol">Œª</a> <a id="37550" class="Symbol">{</a><a id="37551" href="Demos.HSP.html#37551" class="Bound">y</a><a id="37552" class="Symbol">}</a> <a id="37554" class="Symbol">‚Üí</a> <a id="37556" href="Demos.HSP.html#12055" class="InductiveConstructor">eq</a> <a id="37559" class="Symbol">(</a><a id="37560" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="37562" href="Demos.HSP.html#37250" class="Function">FromLift</a> <a id="37571" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="37573" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="37577" href="Demos.HSP.html#37551" class="Bound">y</a><a id="37578" class="Symbol">)</a> <a id="37580" class="Symbol">(</a><a id="37581" href="Demos.HSP.html#37324" class="Function">ToFromLift</a> <a id="37592" href="Demos.HSP.html#37551" class="Bound">y</a><a id="37593" class="Symbol">)</a> <a id="37595" class="Symbol">}</a>
</pre>

\paragraph*{Homomorphisms of product algebras}
Suppose we have an algebra \ab{ùë®}, a type \ab I : \ap{Type} \ab{ùìò}, and a family \ab{‚Ñ¨} :
\ab I \as{‚Üí} \ar{Algebra} \ab{Œ≤} \ab{œÅ·µá} of algebras.
We sometimes refer to the inhabitants of \ab{I} as \emph{indices}, and call \ab{‚Ñ¨} an
\defn{indexed family of algebras}. If in addition we have a family \ab{ùíΩ} : (\ab i : \ab
I) ‚Üí \af{hom} \ab{ùë®} (\ab{‚Ñ¨} \ab i) of homomorphisms, then we can construct a homomorphism
from \ab{ùë®} to the product \af{‚®Ö} \ab{‚Ñ¨} in the natural way.  We codify the latter in
dependent type theory as follows.

<pre class="Agda">

<a id="38201" class="Keyword">module</a> <a id="38208" href="Demos.HSP.html#38208" class="Module">_</a> <a id="38210" class="Symbol">{</a><a id="38211" href="Demos.HSP.html#38211" class="Bound">Œπ</a> <a id="38213" class="Symbol">:</a> <a id="38215" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="38220" class="Symbol">}{</a><a id="38222" href="Demos.HSP.html#38222" class="Bound">I</a> <a id="38224" class="Symbol">:</a> <a id="38226" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="38231" href="Demos.HSP.html#38211" class="Bound">Œπ</a><a id="38232" class="Symbol">}{</a><a id="38234" href="Demos.HSP.html#38234" class="Bound">ùë®</a> <a id="38236" class="Symbol">:</a> <a id="38238" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="38246" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="38248" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="38250" class="Symbol">}(</a><a id="38252" href="Demos.HSP.html#38252" class="Bound">‚Ñ¨</a> <a id="38254" class="Symbol">:</a> <a id="38256" href="Demos.HSP.html#38222" class="Bound">I</a> <a id="38258" class="Symbol">‚Üí</a> <a id="38260" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="38268" href="Demos.HSP.html#8424" class="Generalizable">Œ≤</a> <a id="38270" href="Demos.HSP.html#8426" class="Generalizable">œÅ·µá</a><a id="38272" class="Symbol">)</a>  <a id="38275" class="Keyword">where</a>
 <a id="38282" href="Demos.HSP.html#38282" class="Function">‚®Ö-hom-co</a> <a id="38291" class="Symbol">:</a> <a id="38293" class="Symbol">(‚àÄ(</a><a id="38296" href="Demos.HSP.html#38296" class="Bound">i</a> <a id="38298" class="Symbol">:</a> <a id="38300" href="Demos.HSP.html#38222" class="Bound">I</a><a id="38301" class="Symbol">)</a> <a id="38303" class="Symbol">‚Üí</a> <a id="38305" href="Demos.HSP.html#32650" class="Function">hom</a> <a id="38309" href="Demos.HSP.html#38234" class="Bound">ùë®</a> <a id="38311" class="Symbol">(</a><a id="38312" href="Demos.HSP.html#38252" class="Bound">‚Ñ¨</a> <a id="38314" href="Demos.HSP.html#38296" class="Bound">i</a><a id="38315" class="Symbol">))</a> <a id="38318" class="Symbol">‚Üí</a> <a id="38320" href="Demos.HSP.html#32650" class="Function">hom</a> <a id="38324" href="Demos.HSP.html#38234" class="Bound">ùë®</a> <a id="38326" class="Symbol">(</a><a id="38327" href="Demos.HSP.html#29982" class="Function">‚®Ö</a> <a id="38329" href="Demos.HSP.html#38252" class="Bound">‚Ñ¨</a><a id="38330" class="Symbol">)</a>
 <a id="38333" href="Demos.HSP.html#38282" class="Function">‚®Ö-hom-co</a> <a id="38342" href="Demos.HSP.html#38342" class="Bound">ùíΩ</a> <a id="38344" class="Symbol">=</a> <a id="38346" href="Demos.HSP.html#38365" class="Function">h</a> <a id="38348" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="38350" href="Demos.HSP.html#38453" class="Function">hhom</a>
  <a id="38357" class="Keyword">where</a>
  <a id="38365" href="Demos.HSP.html#38365" class="Function">h</a> <a id="38367" class="Symbol">:</a> <a id="38369" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="38372" href="Demos.HSP.html#38234" class="Bound">ùë®</a> <a id="38374" href="Demos.HSP.html#23785" class="Function Operator">]</a> <a id="38376" href="Demos.HSP.html#7491" class="Record Operator">‚ü∂</a> <a id="38378" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="38381" href="Demos.HSP.html#29982" class="Function">‚®Ö</a> <a id="38383" href="Demos.HSP.html#38252" class="Bound">‚Ñ¨</a> <a id="38385" href="Demos.HSP.html#23785" class="Function Operator">]</a>
  <a id="38389" href="Demos.HSP.html#38365" class="Function">h</a> <a id="38391" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="38395" href="Demos.HSP.html#38395" class="Bound">a</a> <a id="38397" class="Symbol">=</a> <a id="38399" class="Symbol">Œª</a> <a id="38401" href="Demos.HSP.html#38401" class="Bound">i</a> <a id="38403" class="Symbol">‚Üí</a> <a id="38405" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="38407" href="Demos.HSP.html#38342" class="Bound">ùíΩ</a> <a id="38409" href="Demos.HSP.html#38401" class="Bound">i</a> <a id="38411" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="38413" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="38417" href="Demos.HSP.html#38395" class="Bound">a</a>
  <a id="38421" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="38426" href="Demos.HSP.html#38365" class="Function">h</a> <a id="38428" href="Demos.HSP.html#38428" class="Bound">xy</a> <a id="38431" href="Demos.HSP.html#38431" class="Bound">i</a> <a id="38433" class="Symbol">=</a> <a id="38435" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="38440" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="38442" href="Demos.HSP.html#38342" class="Bound">ùíΩ</a> <a id="38444" href="Demos.HSP.html#38431" class="Bound">i</a> <a id="38446" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="38448" href="Demos.HSP.html#38428" class="Bound">xy</a>
  <a id="38453" href="Demos.HSP.html#38453" class="Function">hhom</a> <a id="38458" class="Symbol">:</a> <a id="38460" href="Demos.HSP.html#32532" class="Record">IsHom</a> <a id="38466" href="Demos.HSP.html#38234" class="Bound">ùë®</a> <a id="38468" class="Symbol">(</a><a id="38469" href="Demos.HSP.html#29982" class="Function">‚®Ö</a> <a id="38471" href="Demos.HSP.html#38252" class="Bound">‚Ñ¨</a><a id="38472" class="Symbol">)</a> <a id="38474" href="Demos.HSP.html#38365" class="Function">h</a>
  <a id="38478" href="Demos.HSP.html#32618" class="Field">compatible</a> <a id="38489" href="Demos.HSP.html#38453" class="Function">hhom</a> <a id="38494" class="Symbol">=</a> <a id="38496" class="Symbol">Œª</a> <a id="38498" href="Demos.HSP.html#38498" class="Bound">i</a> <a id="38500" class="Symbol">‚Üí</a> <a id="38502" href="Demos.HSP.html#32618" class="Field">compatible</a> <a id="38513" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a> <a id="38515" href="Demos.HSP.html#38342" class="Bound">ùíΩ</a> <a id="38517" href="Demos.HSP.html#38498" class="Bound">i</a> <a id="38519" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a>
</pre>

\paragraph*{Factorization of homomorphisms}
\fi      %%% END LONG VERSION ONLY SECTION
We also formalize (as \af{HomFactor}) the following factorization theorem: if \ab g : \af{hom}
\ab{ùë®} \ab{ùë©}, \ab h : \af{hom} \ab{ùë®} \ab{ùë™}, \ab h is surjective, and \af{ker} \ab h
\aof{‚äÜ} \af{ker} \ab g, then there exists \ab{œÜ} : \af{hom} \ab{ùë™} \ab{ùë©} such that \ab g
= \ab{œÜ} \aof{‚àò} \ab h.
\ifshort\else

<pre class="Agda">

<a id="38945" class="Keyword">module</a> <a id="38952" href="Demos.HSP.html#38952" class="Module">_</a> <a id="38954" class="Symbol">{</a><a id="38955" href="Demos.HSP.html#38955" class="Bound">ùë®</a> <a id="38957" class="Symbol">:</a> <a id="38959" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="38967" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="38969" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="38971" class="Symbol">}(</a><a id="38973" href="Demos.HSP.html#38973" class="Bound">ùë©</a> <a id="38975" class="Symbol">:</a> <a id="38977" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="38985" href="Demos.HSP.html#8424" class="Generalizable">Œ≤</a> <a id="38987" href="Demos.HSP.html#8426" class="Generalizable">œÅ·µá</a><a id="38989" class="Symbol">){</a><a id="38991" href="Demos.HSP.html#38991" class="Bound">ùë™</a> <a id="38993" class="Symbol">:</a> <a id="38995" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="39003" href="Demos.HSP.html#8429" class="Generalizable">Œ≥</a> <a id="39005" href="Demos.HSP.html#8431" class="Generalizable">œÅ·∂ú</a><a id="39007" class="Symbol">}</a>
         <a id="39018" class="Symbol">(</a><a id="39019" href="Demos.HSP.html#39019" class="Bound">gh</a> <a id="39022" class="Symbol">:</a> <a id="39024" href="Demos.HSP.html#32650" class="Function">hom</a> <a id="39028" href="Demos.HSP.html#38955" class="Bound">ùë®</a> <a id="39030" href="Demos.HSP.html#38973" class="Bound">ùë©</a><a id="39031" class="Symbol">)(</a><a id="39033" href="Demos.HSP.html#39033" class="Bound">hh</a> <a id="39036" class="Symbol">:</a> <a id="39038" href="Demos.HSP.html#32650" class="Function">hom</a> <a id="39042" href="Demos.HSP.html#38955" class="Bound">ùë®</a> <a id="39044" href="Demos.HSP.html#38991" class="Bound">ùë™</a><a id="39045" class="Symbol">)</a> <a id="39047" class="Keyword">where</a>
 <a id="39054" class="Keyword">open</a> <a id="39059" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="39066" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="39069" href="Demos.HSP.html#38973" class="Bound">ùë©</a> <a id="39071" href="Demos.HSP.html#23785" class="Function Operator">]</a> <a id="39073" class="Keyword">using</a> <a id="39079" class="Symbol">()</a> <a id="39082" class="Keyword">renaming</a> <a id="39091" class="Symbol">(</a> <a id="39093" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="39097" class="Symbol">to</a> <a id="39100" class="Field Operator">_‚âà‚ÇÇ_</a> <a id="39105" class="Symbol">)</a>
 <a id="39108" class="Keyword">open</a> <a id="39113" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="39120" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="39123" href="Demos.HSP.html#38991" class="Bound">ùë™</a> <a id="39125" href="Demos.HSP.html#23785" class="Function Operator">]</a> <a id="39127" class="Keyword">using</a> <a id="39133" class="Symbol">()</a> <a id="39136" class="Keyword">renaming</a> <a id="39145" class="Symbol">(</a> <a id="39147" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="39151" class="Symbol">to</a> <a id="39154" class="Field Operator">_‚âà‚ÇÉ_</a> <a id="39159" class="Symbol">)</a>
 <a id="39162" class="Keyword">private</a> <a id="39170" href="Demos.HSP.html#39170" class="Function">gfunc</a> <a id="39176" class="Symbol">=</a> <a id="39178" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="39180" href="Demos.HSP.html#39019" class="Bound">gh</a> <a id="39183" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="39185" class="Symbol">;</a> <a id="39187" href="Demos.HSP.html#39187" class="Function">g</a> <a id="39189" class="Symbol">=</a> <a id="39191" href="Demos.HSP.html#7592" class="Field Operator">_‚ü®$‚ü©_</a> <a id="39197" href="Demos.HSP.html#39170" class="Function">gfunc</a> <a id="39203" class="Symbol">;</a> <a id="39205" href="Demos.HSP.html#39205" class="Function">hfunc</a> <a id="39211" class="Symbol">=</a> <a id="39213" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="39215" href="Demos.HSP.html#39033" class="Bound">hh</a> <a id="39218" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="39220" class="Symbol">;</a> <a id="39222" href="Demos.HSP.html#39222" class="Function">h</a> <a id="39224" class="Symbol">=</a> <a id="39226" href="Demos.HSP.html#7592" class="Field Operator">_‚ü®$‚ü©_</a> <a id="39232" href="Demos.HSP.html#39205" class="Function">hfunc</a>

 <a id="39240" href="Demos.HSP.html#39240" class="Function">HomFactor</a> <a id="39250" class="Symbol">:</a>  <a id="39253" href="Demos.HSP.html#15677" class="Function">kernel</a> <a id="39260" href="Demos.HSP.html#39154" class="Function Operator">_‚âà‚ÇÉ_</a> <a id="39265" href="Demos.HSP.html#39222" class="Function">h</a> <a id="39267" href="Relation.Unary.html#1742" class="Function Operator">‚äÜ</a> <a id="39269" href="Demos.HSP.html#15677" class="Function">kernel</a> <a id="39276" href="Demos.HSP.html#39100" class="Function Operator">_‚âà‚ÇÇ_</a> <a id="39281" href="Demos.HSP.html#39187" class="Function">g</a>
  <a id="39285" class="Symbol">‚Üí</a>           <a id="39297" href="Demos.HSP.html#14140" class="Function">IsSurjective</a> <a id="39310" href="Demos.HSP.html#39205" class="Function">hfunc</a>
  <a id="39318" class="Symbol">‚Üí</a>           <a id="39330" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="39333" href="Demos.HSP.html#39333" class="Bound">œÜ</a> <a id="39335" href="Data.Product.html#916" class="Function">‚àà</a> <a id="39337" href="Demos.HSP.html#32650" class="Function">hom</a> <a id="39341" href="Demos.HSP.html#38991" class="Bound">ùë™</a> <a id="39343" href="Demos.HSP.html#38973" class="Bound">ùë©</a> <a id="39345" href="Data.Product.html#916" class="Function">]</a> <a id="39347" class="Symbol">‚àÄ</a> <a id="39349" href="Demos.HSP.html#39349" class="Bound">a</a> <a id="39351" class="Symbol">‚Üí</a> <a id="39353" href="Demos.HSP.html#39187" class="Function">g</a> <a id="39355" href="Demos.HSP.html#39349" class="Bound">a</a> <a id="39357" href="Demos.HSP.html#39100" class="Function Operator">‚âà‚ÇÇ</a> <a id="39360" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="39362" href="Demos.HSP.html#39333" class="Bound">œÜ</a> <a id="39364" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="39366" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="39370" href="Demos.HSP.html#39222" class="Function">h</a> <a id="39372" href="Demos.HSP.html#39349" class="Bound">a</a>
 <a id="39375" href="Demos.HSP.html#39240" class="Function">HomFactor</a> <a id="39385" href="Demos.HSP.html#39385" class="Bound">Khg</a> <a id="39389" href="Demos.HSP.html#39389" class="Bound">hE</a> <a id="39392" class="Symbol">=</a> <a id="39394" class="Symbol">(</a><a id="39395" href="Demos.HSP.html#39654" class="Function">œÜmap</a> <a id="39400" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="39402" href="Demos.HSP.html#40383" class="Function">œÜhom</a><a id="39406" class="Symbol">)</a> <a id="39408" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="39410" href="Demos.HSP.html#39776" class="Function">gœÜh</a>
  <a id="39416" class="Keyword">where</a>
  <a id="39424" href="Demos.HSP.html#39424" class="Function">h‚Åª¬π</a> <a id="39428" class="Symbol">:</a> <a id="39430" href="Demos.HSP.html#23838" class="Function Operator">ùïå[</a> <a id="39433" href="Demos.HSP.html#38991" class="Bound">ùë™</a> <a id="39435" href="Demos.HSP.html#23838" class="Function Operator">]</a> <a id="39437" class="Symbol">‚Üí</a> <a id="39439" href="Demos.HSP.html#23838" class="Function Operator">ùïå[</a> <a id="39442" href="Demos.HSP.html#38955" class="Bound">ùë®</a> <a id="39444" href="Demos.HSP.html#23838" class="Function Operator">]</a>
  <a id="39448" href="Demos.HSP.html#39424" class="Function">h‚Åª¬π</a> <a id="39452" class="Symbol">=</a> <a id="39454" href="Demos.HSP.html#14224" class="Function">SurjInv</a> <a id="39462" href="Demos.HSP.html#39205" class="Function">hfunc</a> <a id="39468" href="Demos.HSP.html#39389" class="Bound">hE</a>

  <a id="39474" href="Demos.HSP.html#39474" class="Function">Œ∑</a> <a id="39476" class="Symbol">:</a> <a id="39478" class="Symbol">‚àÄ</a> <a id="39480" class="Symbol">{</a><a id="39481" href="Demos.HSP.html#39481" class="Bound">c</a><a id="39482" class="Symbol">}</a> <a id="39484" class="Symbol">‚Üí</a> <a id="39486" href="Demos.HSP.html#39222" class="Function">h</a> <a id="39488" class="Symbol">(</a><a id="39489" href="Demos.HSP.html#39424" class="Function">h‚Åª¬π</a> <a id="39493" href="Demos.HSP.html#39481" class="Bound">c</a><a id="39494" class="Symbol">)</a> <a id="39496" href="Demos.HSP.html#39154" class="Function Operator">‚âà‚ÇÉ</a> <a id="39499" href="Demos.HSP.html#39481" class="Bound">c</a>
  <a id="39503" href="Demos.HSP.html#39474" class="Function">Œ∑</a> <a id="39505" class="Symbol">=</a> <a id="39507" href="Demos.HSP.html#12646" class="Function">InvIsInverse ≥</a> <a id="39521" href="Demos.HSP.html#39389" class="Bound">hE</a>

  <a id="39527" class="Keyword">open</a> <a id="39532" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="39539" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="39542" href="Demos.HSP.html#38991" class="Bound">ùë™</a> <a id="39544" href="Demos.HSP.html#23785" class="Function Operator">]</a> <a id="39546" class="Keyword">using</a> <a id="39552" class="Symbol">(</a> <a id="39554" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="39558" class="Symbol">;</a> <a id="39560" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="39566" class="Symbol">)</a>
  <a id="39570" href="Demos.HSP.html#39570" class="Function">Œ∂</a> <a id="39572" class="Symbol">:</a> <a id="39574" class="Symbol">‚àÄ{</a><a id="39576" href="Demos.HSP.html#39576" class="Bound">x</a> <a id="39578" href="Demos.HSP.html#39578" class="Bound">y</a><a id="39579" class="Symbol">}</a> <a id="39581" class="Symbol">‚Üí</a> <a id="39583" href="Demos.HSP.html#39576" class="Bound">x</a> <a id="39585" href="Demos.HSP.html#39154" class="Function Operator">‚âà‚ÇÉ</a> <a id="39588" href="Demos.HSP.html#39578" class="Bound">y</a> <a id="39590" class="Symbol">‚Üí</a> <a id="39592" href="Demos.HSP.html#39222" class="Function">h</a> <a id="39594" class="Symbol">(</a><a id="39595" href="Demos.HSP.html#39424" class="Function">h‚Åª¬π</a> <a id="39599" href="Demos.HSP.html#39576" class="Bound">x</a><a id="39600" class="Symbol">)</a> <a id="39602" href="Demos.HSP.html#39154" class="Function Operator">‚âà‚ÇÉ</a> <a id="39605" href="Demos.HSP.html#39222" class="Function">h</a> <a id="39607" class="Symbol">(</a><a id="39608" href="Demos.HSP.html#39424" class="Function">h‚Åª¬π</a> <a id="39612" href="Demos.HSP.html#39578" class="Bound">y</a><a id="39613" class="Symbol">)</a>
  <a id="39617" href="Demos.HSP.html#39570" class="Function">Œ∂</a> <a id="39619" href="Demos.HSP.html#39619" class="Bound">xy</a> <a id="39622" class="Symbol">=</a> <a id="39624" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="39630" href="Demos.HSP.html#39474" class="Function">Œ∑</a> <a id="39632" class="Symbol">(</a><a id="39633" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="39639" href="Demos.HSP.html#39619" class="Bound">xy</a> <a id="39642" class="Symbol">(</a><a id="39643" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="39647" href="Demos.HSP.html#39474" class="Function">Œ∑</a><a id="39648" class="Symbol">))</a>

  <a id="39654" href="Demos.HSP.html#39654" class="Function">œÜmap</a> <a id="39659" class="Symbol">:</a> <a id="39661" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="39664" href="Demos.HSP.html#38991" class="Bound">ùë™</a> <a id="39666" href="Demos.HSP.html#23785" class="Function Operator">]</a> <a id="39668" href="Demos.HSP.html#7491" class="Record Operator">‚ü∂</a> <a id="39670" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="39673" href="Demos.HSP.html#38973" class="Bound">ùë©</a> <a id="39675" href="Demos.HSP.html#23785" class="Function Operator">]</a>
  <a id="39679" href="Demos.HSP.html#7592" class="Field Operator">_‚ü®$‚ü©_</a> <a id="39685" href="Demos.HSP.html#39654" class="Function">œÜmap</a> <a id="39690" class="Symbol">=</a> <a id="39692" href="Demos.HSP.html#39187" class="Function">g</a> <a id="39694" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="39696" href="Demos.HSP.html#39424" class="Function">h‚Åª¬π</a>
  <a id="39702" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="39707" href="Demos.HSP.html#39654" class="Function">œÜmap</a> <a id="39712" class="Symbol">=</a> <a id="39714" href="Demos.HSP.html#39385" class="Bound">Khg</a> <a id="39718" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="39720" href="Demos.HSP.html#39570" class="Function">Œ∂</a>

  <a id="39725" class="Keyword">open</a> <a id="39730" href="Demos.HSP.html#7491" class="Module">_‚ü∂_</a> <a id="39734" href="Demos.HSP.html#39654" class="Function">œÜmap</a> <a id="39739" class="Keyword">using</a> <a id="39745" class="Symbol">()</a> <a id="39748" class="Keyword">renaming</a> <a id="39757" class="Symbol">(</a><a id="39758" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="39763" class="Symbol">to</a> <a id="39766" class="Field">œÜcong</a><a id="39771" class="Symbol">)</a>

  <a id="39776" href="Demos.HSP.html#39776" class="Function">gœÜh</a> <a id="39780" class="Symbol">:</a> <a id="39782" class="Symbol">(</a><a id="39783" href="Demos.HSP.html#39783" class="Bound">a</a> <a id="39785" class="Symbol">:</a> <a id="39787" href="Demos.HSP.html#23838" class="Function Operator">ùïå[</a> <a id="39790" href="Demos.HSP.html#38955" class="Bound">ùë®</a> <a id="39792" href="Demos.HSP.html#23838" class="Function Operator">]</a><a id="39793" class="Symbol">)</a> <a id="39795" class="Symbol">‚Üí</a> <a id="39797" href="Demos.HSP.html#39187" class="Function">g</a> <a id="39799" href="Demos.HSP.html#39783" class="Bound">a</a> <a id="39801" href="Demos.HSP.html#39100" class="Function Operator">‚âà‚ÇÇ</a> <a id="39804" href="Demos.HSP.html#39654" class="Function">œÜmap</a> <a id="39809" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="39813" href="Demos.HSP.html#39222" class="Function">h</a> <a id="39815" href="Demos.HSP.html#39783" class="Bound">a</a>
  <a id="39819" href="Demos.HSP.html#39776" class="Function">gœÜh</a> <a id="39823" href="Demos.HSP.html#39823" class="Bound">a</a> <a id="39825" class="Symbol">=</a> <a id="39827" href="Demos.HSP.html#39385" class="Bound">Khg</a> <a id="39831" class="Symbol">(</a><a id="39832" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="39836" href="Demos.HSP.html#39474" class="Function">Œ∑</a><a id="39837" class="Symbol">)</a>

  <a id="39842" href="Demos.HSP.html#39842" class="Function">œÜcomp</a> <a id="39848" class="Symbol">:</a> <a id="39850" href="Demos.HSP.html#32260" class="Function">compatible-map</a> <a id="39865" href="Demos.HSP.html#38991" class="Bound">ùë™</a> <a id="39867" href="Demos.HSP.html#38973" class="Bound">ùë©</a> <a id="39869" href="Demos.HSP.html#39654" class="Function">œÜmap</a>
  <a id="39876" href="Demos.HSP.html#39842" class="Function">œÜcomp</a> <a id="39882" class="Symbol">{</a><a id="39883" href="Demos.HSP.html#39883" class="Bound">f</a><a id="39884" class="Symbol">}{</a><a id="39886" href="Demos.HSP.html#39886" class="Bound">c</a><a id="39887" class="Symbol">}</a> <a id="39889" class="Symbol">=</a>
   <a id="39894" href="Relation.Binary.Reasoning.Base.Single.html#1916" class="Function Operator">begin</a>
    <a id="39904" href="Demos.HSP.html#39654" class="Function">œÜmap</a> <a id="39909" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a>  <a id="39914" class="Symbol">(</a><a id="39915" href="Demos.HSP.html#39883" class="Bound">f</a> <a id="39917" href="Demos.HSP.html#23896" class="Function Operator">ÃÇ</a> <a id="39919" href="Demos.HSP.html#38991" class="Bound">ùë™</a><a id="39920" class="Symbol">)</a>                   <a id="39940" href="Demos.HSP.html#39886" class="Bound">c</a>       <a id="39948" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚âàÀò‚ü®</a>  <a id="39953" href="Demos.HSP.html#39766" class="Function">œÜcong</a> <a id="39959" class="Symbol">(</a><a id="39960" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="39965" class="Symbol">(</a><a id="39966" href="Demos.HSP.html#22921" class="Field">Interp</a> <a id="39973" href="Demos.HSP.html#38991" class="Bound">ùë™</a><a id="39974" class="Symbol">)</a> <a id="39976" class="Symbol">(</a><a id="39977" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="39984" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="39986" class="Symbol">Œª</a> <a id="39988" href="Demos.HSP.html#39988" class="Bound">_</a> <a id="39990" class="Symbol">‚Üí</a> <a id="39992" href="Demos.HSP.html#39474" class="Function">Œ∑</a><a id="39993" class="Symbol">))</a>  <a id="39997" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚ü©</a>
    <a id="40003" href="Demos.HSP.html#39187" class="Function">g</a><a id="40004" class="Symbol">(</a><a id="40005" href="Demos.HSP.html#39424" class="Function">h‚Åª¬π</a><a id="40008" class="Symbol">(</a>    <a id="40013" class="Symbol">(</a><a id="40014" href="Demos.HSP.html#39883" class="Bound">f</a> <a id="40016" href="Demos.HSP.html#23896" class="Function Operator">ÃÇ</a> <a id="40018" href="Demos.HSP.html#38991" class="Bound">ùë™</a><a id="40019" class="Symbol">)</a>  <a id="40022" class="Symbol">(</a><a id="40023" href="Demos.HSP.html#39222" class="Function">h</a> <a id="40025" href="Function.Base.html#1031" class="Function Operator">‚àò</a>    <a id="40030" href="Demos.HSP.html#39424" class="Function">h‚Åª¬π</a>  <a id="40035" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="40038" href="Demos.HSP.html#39886" class="Bound">c</a>  <a id="40041" class="Symbol">)))</a>   <a id="40047" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚âàÀò‚ü®</a>  <a id="40052" href="Demos.HSP.html#39766" class="Function">œÜcong</a> <a id="40058" class="Symbol">(</a><a id="40059" href="Demos.HSP.html#32618" class="Field">compatible</a> <a id="40070" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a> <a id="40072" href="Demos.HSP.html#39033" class="Bound">hh</a> <a id="40075" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a><a id="40076" class="Symbol">)</a>                   <a id="40096" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚ü©</a>
    <a id="40102" href="Demos.HSP.html#39187" class="Function">g</a><a id="40103" class="Symbol">(</a><a id="40104" href="Demos.HSP.html#39424" class="Function">h‚Åª¬π</a><a id="40107" class="Symbol">(</a><a id="40108" href="Demos.HSP.html#39222" class="Function">h</a><a id="40109" class="Symbol">(</a>  <a id="40112" class="Symbol">(</a><a id="40113" href="Demos.HSP.html#39883" class="Bound">f</a> <a id="40115" href="Demos.HSP.html#23896" class="Function Operator">ÃÇ</a> <a id="40117" href="Demos.HSP.html#38955" class="Bound">ùë®</a><a id="40118" class="Symbol">)</a>  <a id="40121" class="Symbol">(</a>       <a id="40129" href="Demos.HSP.html#39424" class="Function">h‚Åª¬π</a>  <a id="40134" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="40137" href="Demos.HSP.html#39886" class="Bound">c</a>  <a id="40140" class="Symbol">))))</a>  <a id="40146" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚âàÀò‚ü®</a>  <a id="40151" href="Demos.HSP.html#39776" class="Function">gœÜh</a> <a id="40155" class="Symbol">((</a><a id="40157" href="Demos.HSP.html#39883" class="Bound">f</a> <a id="40159" href="Demos.HSP.html#23896" class="Function Operator">ÃÇ</a> <a id="40161" href="Demos.HSP.html#38955" class="Bound">ùë®</a><a id="40162" class="Symbol">)(</a><a id="40164" href="Demos.HSP.html#39424" class="Function">h‚Åª¬π</a> <a id="40168" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="40170" href="Demos.HSP.html#39886" class="Bound">c</a><a id="40171" class="Symbol">))</a>                      <a id="40195" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚ü©</a>
    <a id="40201" href="Demos.HSP.html#39187" class="Function">g</a><a id="40202" class="Symbol">(</a>        <a id="40211" class="Symbol">(</a><a id="40212" href="Demos.HSP.html#39883" class="Bound">f</a> <a id="40214" href="Demos.HSP.html#23896" class="Function Operator">ÃÇ</a> <a id="40216" href="Demos.HSP.html#38955" class="Bound">ùë®</a><a id="40217" class="Symbol">)</a>  <a id="40220" class="Symbol">(</a>       <a id="40228" href="Demos.HSP.html#39424" class="Function">h‚Åª¬π</a>  <a id="40233" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="40236" href="Demos.HSP.html#39886" class="Bound">c</a>  <a id="40239" class="Symbol">))</a>    <a id="40245" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a>   <a id="40250" href="Demos.HSP.html#32618" class="Field">compatible</a> <a id="40261" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a> <a id="40263" href="Demos.HSP.html#39019" class="Bound">gh</a> <a id="40266" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a>                           <a id="40294" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
              <a id="40310" class="Symbol">(</a><a id="40311" href="Demos.HSP.html#39883" class="Bound">f</a> <a id="40313" href="Demos.HSP.html#23896" class="Function Operator">ÃÇ</a> <a id="40315" href="Demos.HSP.html#38973" class="Bound">ùë©</a><a id="40316" class="Symbol">)</a>  <a id="40319" class="Symbol">(</a><a id="40320" href="Demos.HSP.html#39187" class="Function">g</a> <a id="40322" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="40324" class="Symbol">(</a>  <a id="40327" href="Demos.HSP.html#39424" class="Function">h‚Åª¬π</a>  <a id="40332" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="40335" href="Demos.HSP.html#39886" class="Bound">c</a>  <a id="40338" class="Symbol">))</a>    <a id="40344" href="Relation.Binary.Reasoning.Base.Single.html#2555" class="Function Operator">‚àé</a> <a id="40346" class="Keyword">where</a> <a id="40352" class="Keyword">open</a> <a id="40357" href="Relation.Binary.Reasoning.Setoid.html" class="Module">SetoidReasoning</a> <a id="40373" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="40376" href="Demos.HSP.html#38973" class="Bound">ùë©</a> <a id="40378" href="Demos.HSP.html#23785" class="Function Operator">]</a>

  <a id="40383" href="Demos.HSP.html#40383" class="Function">œÜhom</a> <a id="40388" class="Symbol">:</a> <a id="40390" href="Demos.HSP.html#32532" class="Record">IsHom</a> <a id="40396" href="Demos.HSP.html#38991" class="Bound">ùë™</a> <a id="40398" href="Demos.HSP.html#38973" class="Bound">ùë©</a> <a id="40400" href="Demos.HSP.html#39654" class="Function">œÜmap</a>
  <a id="40407" href="Demos.HSP.html#32618" class="Field">compatible</a> <a id="40418" href="Demos.HSP.html#40383" class="Function">œÜhom</a> <a id="40423" class="Symbol">=</a> <a id="40425" href="Demos.HSP.html#39842" class="Function">œÜcomp</a>
</pre>

\subsection{Isomorphisms}
\label{isomorphisms}
\fi      %%% END LONG VERSION ONLY SECTION

Two structures are \defn{isomorphic} provided there are homomorphisms from each to the
other that compose to the identity. We codify this notion, as
well as some of its obvious consequences, as the type \ar{\au{}‚âÖ\au{}}.
\ifshort
\else
Note that the definition, shown below, includes a proof of the fact that the maps \afld{to} and
\afld{from} are bijective, which makes this fact more accessible.

<pre class="Agda">

<a id="40947" class="Keyword">module</a> <a id="40954" href="Demos.HSP.html#40954" class="Module">_</a> <a id="40956" class="Symbol">(</a><a id="40957" href="Demos.HSP.html#40957" class="Bound">ùë®</a> <a id="40959" class="Symbol">:</a> <a id="40961" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="40969" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="40971" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="40973" class="Symbol">)</a> <a id="40975" class="Symbol">(</a><a id="40976" href="Demos.HSP.html#40976" class="Bound">ùë©</a> <a id="40978" class="Symbol">:</a> <a id="40980" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="40988" href="Demos.HSP.html#8424" class="Generalizable">Œ≤</a> <a id="40990" href="Demos.HSP.html#8426" class="Generalizable">œÅ·µá</a><a id="40992" class="Symbol">)</a> <a id="40994" class="Keyword">where</a>
 <a id="41001" class="Keyword">open</a> <a id="41006" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="41013" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="41016" href="Demos.HSP.html#40957" class="Bound">ùë®</a> <a id="41018" href="Demos.HSP.html#23785" class="Function Operator">]</a> <a id="41020" class="Keyword">using</a> <a id="41026" class="Symbol">()</a> <a id="41029" class="Keyword">renaming</a> <a id="41038" class="Symbol">(</a> <a id="41040" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="41044" class="Symbol">to</a> <a id="41047" class="Field Operator">_‚âà·¥¨_</a> <a id="41052" class="Symbol">)</a>
 <a id="41055" class="Keyword">open</a> <a id="41060" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="41067" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="41070" href="Demos.HSP.html#40976" class="Bound">ùë©</a> <a id="41072" href="Demos.HSP.html#23785" class="Function Operator">]</a> <a id="41074" class="Keyword">using</a> <a id="41080" class="Symbol">()</a> <a id="41083" class="Keyword">renaming</a> <a id="41092" class="Symbol">(</a> <a id="41094" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="41098" class="Symbol">to</a> <a id="41101" class="Field Operator">_‚âà·¥Æ_</a> <a id="41106" class="Symbol">)</a>
</pre>
\fi
<pre class="Agda">

 <a id="41138" class="Keyword">record</a> <a id="41145" href="Demos.HSP.html#41145" class="Record Operator">_‚âÖ_</a> <a id="41149" class="Symbol">:</a> <a id="41151" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="41156" class="Symbol">(</a><a id="41157" href="Demos.HSP.html#6194" class="Bound">ùìû</a> <a id="41159" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="41161" href="Demos.HSP.html#6196" class="Bound">ùì•</a> <a id="41163" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="41165" href="Demos.HSP.html#40969" class="Bound">Œ±</a> <a id="41167" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="41169" href="Demos.HSP.html#40971" class="Bound">œÅ·µÉ</a> <a id="41172" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="41174" href="Demos.HSP.html#40988" class="Bound">Œ≤</a> <a id="41176" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="41178" href="Demos.HSP.html#40990" class="Bound">œÅ·µá</a> <a id="41181" class="Symbol">)</a> <a id="41183" class="Keyword">where</a>
  <a id="41191" class="Keyword">constructor</a>  <a id="41204" href="Demos.HSP.html#41204" class="InductiveConstructor">mkiso</a>
  <a id="41212" class="Keyword">field</a>        <a id="41225" href="Demos.HSP.html#41225" class="Field">to</a> <a id="41228" class="Symbol">:</a> <a id="41230" href="Demos.HSP.html#32650" class="Function">hom</a> <a id="41234" href="Demos.HSP.html#40957" class="Bound">ùë®</a> <a id="41236" href="Demos.HSP.html#40976" class="Bound">ùë©</a>
               <a id="41253" href="Demos.HSP.html#41253" class="Field">from</a> <a id="41258" class="Symbol">:</a> <a id="41260" href="Demos.HSP.html#32650" class="Function">hom</a> <a id="41264" href="Demos.HSP.html#40976" class="Bound">ùë©</a> <a id="41266" href="Demos.HSP.html#40957" class="Bound">ùë®</a>
               <a id="41283" href="Demos.HSP.html#41283" class="Field">to‚àºfrom</a> <a id="41291" class="Symbol">:</a> <a id="41293" class="Symbol">‚àÄ</a> <a id="41295" href="Demos.HSP.html#41295" class="Bound">b</a> <a id="41297" class="Symbol">‚Üí</a> <a id="41299" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="41301" href="Demos.HSP.html#41225" class="Field">to</a> <a id="41304" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a>    <a id="41309" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="41313" class="Symbol">(</a><a id="41314" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="41316" href="Demos.HSP.html#41253" class="Field">from</a> <a id="41321" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a>  <a id="41324" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="41328" href="Demos.HSP.html#41295" class="Bound">b</a><a id="41329" class="Symbol">)</a>  <a id="41332" href="Demos.HSP.html#41101" class="Function Operator">‚âà·¥Æ</a> <a id="41335" href="Demos.HSP.html#41295" class="Bound">b</a>
               <a id="41352" href="Demos.HSP.html#41352" class="Field">from‚àºto</a> <a id="41360" class="Symbol">:</a> <a id="41362" class="Symbol">‚àÄ</a> <a id="41364" href="Demos.HSP.html#41364" class="Bound">a</a> <a id="41366" class="Symbol">‚Üí</a> <a id="41368" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="41370" href="Demos.HSP.html#41253" class="Field">from</a> <a id="41375" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a>  <a id="41378" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="41382" class="Symbol">(</a><a id="41383" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="41385" href="Demos.HSP.html#41225" class="Field">to</a> <a id="41388" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a>    <a id="41393" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="41397" href="Demos.HSP.html#41364" class="Bound">a</a><a id="41398" class="Symbol">)</a>  <a id="41401" href="Demos.HSP.html#41047" class="Function Operator">‚âà·¥¨</a> <a id="41404" href="Demos.HSP.html#41364" class="Bound">a</a>
</pre>
\ifshort
Moreover, \afld{to} and \afld{from} are bijections
and \ar{\au{}‚âÖ\au{}} is an equivalence relation (\seemedium).
\else
<pre class="Agda">

  <a id="41561" href="Demos.HSP.html#41561" class="Function">toIsSurjective</a> <a id="41576" class="Symbol">:</a> <a id="41578" href="Demos.HSP.html#14140" class="Function">IsSurjective</a> <a id="41591" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="41593" href="Demos.HSP.html#41225" class="Field">to</a> <a id="41596" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a>
  <a id="41600" href="Demos.HSP.html#41561" class="Function">toIsSurjective</a> <a id="41615" class="Symbol">{</a><a id="41616" href="Demos.HSP.html#41616" class="Bound">y</a><a id="41617" class="Symbol">}</a> <a id="41619" class="Symbol">=</a> <a id="41621" href="Demos.HSP.html#12055" class="InductiveConstructor">eq</a> <a id="41624" class="Symbol">(</a><a id="41625" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="41627" href="Demos.HSP.html#41253" class="Field">from</a> <a id="41632" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="41634" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="41638" href="Demos.HSP.html#41616" class="Bound">y</a><a id="41639" class="Symbol">)</a> <a id="41641" class="Symbol">(</a><a id="41642" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="41646" class="Symbol">(</a><a id="41647" href="Demos.HSP.html#41283" class="Field">to‚àºfrom</a> <a id="41655" href="Demos.HSP.html#41616" class="Bound">y</a><a id="41656" class="Symbol">))</a>
   <a id="41662" class="Keyword">where</a> <a id="41668" class="Keyword">open</a> <a id="41673" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="41680" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="41683" href="Demos.HSP.html#40976" class="Bound">ùë©</a> <a id="41685" href="Demos.HSP.html#23785" class="Function Operator">]</a> <a id="41687" class="Keyword">using</a> <a id="41693" class="Symbol">(</a> <a id="41695" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="41699" class="Symbol">)</a>

  <a id="41704" href="Demos.HSP.html#41704" class="Function">toIsInjective</a> <a id="41718" class="Symbol">:</a> <a id="41720" href="Demos.HSP.html#14057" class="Function">IsInjective</a> <a id="41732" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="41734" href="Demos.HSP.html#41225" class="Field">to</a> <a id="41737" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a>
  <a id="41741" href="Demos.HSP.html#41704" class="Function">toIsInjective</a> <a id="41755" class="Symbol">{</a><a id="41756" href="Demos.HSP.html#41756" class="Bound">x</a><a id="41757" class="Symbol">}{</a><a id="41759" href="Demos.HSP.html#41759" class="Bound">y</a><a id="41760" class="Symbol">}</a> <a id="41762" href="Demos.HSP.html#41762" class="Bound">xy</a> <a id="41765" class="Symbol">=</a> <a id="41767" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="41773" class="Symbol">(</a><a id="41774" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="41778" class="Symbol">(</a><a id="41779" href="Demos.HSP.html#41352" class="Field">from‚àºto</a> <a id="41787" href="Demos.HSP.html#41756" class="Bound">x</a><a id="41788" class="Symbol">))</a> <a id="41791" class="Symbol">(</a><a id="41792" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="41798" href="Demos.HSP.html#41869" class="Function">Œæ</a> <a id="41800" class="Symbol">(</a><a id="41801" href="Demos.HSP.html#41352" class="Field">from‚àºto</a> <a id="41809" href="Demos.HSP.html#41759" class="Bound">y</a><a id="41810" class="Symbol">))</a>
   <a id="41816" class="Keyword">where</a>
   <a id="41825" class="Keyword">open</a> <a id="41830" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="41837" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="41840" href="Demos.HSP.html#40957" class="Bound">ùë®</a> <a id="41842" href="Demos.HSP.html#23785" class="Function Operator">]</a> <a id="41844" class="Keyword">using</a> <a id="41850" class="Symbol">(</a> <a id="41852" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="41856" class="Symbol">;</a> <a id="41858" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="41864" class="Symbol">)</a>
   <a id="41869" href="Demos.HSP.html#41869" class="Function">Œæ</a> <a id="41871" class="Symbol">:</a> <a id="41873" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="41875" href="Demos.HSP.html#41253" class="Field">from</a> <a id="41880" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="41882" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="41886" class="Symbol">(</a><a id="41887" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="41889" href="Demos.HSP.html#41225" class="Field">to</a> <a id="41892" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="41894" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="41898" href="Demos.HSP.html#41756" class="Bound">x</a><a id="41899" class="Symbol">)</a> <a id="41901" href="Demos.HSP.html#41047" class="Function Operator">‚âà·¥¨</a> <a id="41904" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="41906" href="Demos.HSP.html#41253" class="Field">from</a> <a id="41911" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="41913" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="41917" class="Symbol">(</a><a id="41918" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="41920" href="Demos.HSP.html#41225" class="Field">to</a> <a id="41923" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="41925" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="41929" href="Demos.HSP.html#41759" class="Bound">y</a><a id="41930" class="Symbol">)</a>
   <a id="41935" href="Demos.HSP.html#41869" class="Function">Œæ</a> <a id="41937" class="Symbol">=</a> <a id="41939" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="41944" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="41946" href="Demos.HSP.html#41253" class="Field">from</a> <a id="41951" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="41953" href="Demos.HSP.html#41762" class="Bound">xy</a>

  <a id="41959" href="Demos.HSP.html#41959" class="Function">fromIsSurjective</a> <a id="41976" class="Symbol">:</a> <a id="41978" href="Demos.HSP.html#14140" class="Function">IsSurjective</a> <a id="41991" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="41993" href="Demos.HSP.html#41253" class="Field">from</a> <a id="41998" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a>
  <a id="42002" href="Demos.HSP.html#41959" class="Function">fromIsSurjective</a> <a id="42019" class="Symbol">{</a><a id="42020" href="Demos.HSP.html#42020" class="Bound">x</a><a id="42021" class="Symbol">}</a> <a id="42023" class="Symbol">=</a> <a id="42025" href="Demos.HSP.html#12055" class="InductiveConstructor">eq</a> <a id="42028" class="Symbol">(</a><a id="42029" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="42031" href="Demos.HSP.html#41225" class="Field">to</a> <a id="42034" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="42036" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="42040" href="Demos.HSP.html#42020" class="Bound">x</a><a id="42041" class="Symbol">)</a> <a id="42043" class="Symbol">(</a><a id="42044" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="42048" class="Symbol">(</a><a id="42049" href="Demos.HSP.html#41352" class="Field">from‚àºto</a> <a id="42057" href="Demos.HSP.html#42020" class="Bound">x</a><a id="42058" class="Symbol">))</a>
   <a id="42064" class="Keyword">where</a> <a id="42070" class="Keyword">open</a> <a id="42075" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="42082" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="42085" href="Demos.HSP.html#40957" class="Bound">ùë®</a> <a id="42087" href="Demos.HSP.html#23785" class="Function Operator">]</a> <a id="42089" class="Keyword">using</a> <a id="42095" class="Symbol">(</a> <a id="42097" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="42101" class="Symbol">)</a>

  <a id="42106" href="Demos.HSP.html#42106" class="Function">fromIsInjective</a> <a id="42122" class="Symbol">:</a> <a id="42124" href="Demos.HSP.html#14057" class="Function">IsInjective</a> <a id="42136" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="42138" href="Demos.HSP.html#41253" class="Field">from</a> <a id="42143" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a>
  <a id="42147" href="Demos.HSP.html#42106" class="Function">fromIsInjective</a> <a id="42163" class="Symbol">{</a><a id="42164" href="Demos.HSP.html#42164" class="Bound">x</a><a id="42165" class="Symbol">}{</a><a id="42167" href="Demos.HSP.html#42167" class="Bound">y</a><a id="42168" class="Symbol">}</a> <a id="42170" href="Demos.HSP.html#42170" class="Bound">xy</a> <a id="42173" class="Symbol">=</a> <a id="42175" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="42181" class="Symbol">(</a><a id="42182" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="42186" class="Symbol">(</a><a id="42187" href="Demos.HSP.html#41283" class="Field">to‚àºfrom</a> <a id="42195" href="Demos.HSP.html#42164" class="Bound">x</a><a id="42196" class="Symbol">))</a> <a id="42199" class="Symbol">(</a><a id="42200" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="42206" href="Demos.HSP.html#42277" class="Function">Œæ</a> <a id="42208" class="Symbol">(</a><a id="42209" href="Demos.HSP.html#41283" class="Field">to‚àºfrom</a> <a id="42217" href="Demos.HSP.html#42167" class="Bound">y</a><a id="42218" class="Symbol">))</a>
   <a id="42224" class="Keyword">where</a>
   <a id="42233" class="Keyword">open</a> <a id="42238" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="42245" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="42248" href="Demos.HSP.html#40976" class="Bound">ùë©</a> <a id="42250" href="Demos.HSP.html#23785" class="Function Operator">]</a> <a id="42252" class="Keyword">using</a> <a id="42258" class="Symbol">(</a> <a id="42260" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="42264" class="Symbol">;</a> <a id="42266" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="42272" class="Symbol">)</a>
   <a id="42277" href="Demos.HSP.html#42277" class="Function">Œæ</a> <a id="42279" class="Symbol">:</a> <a id="42281" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="42283" href="Demos.HSP.html#41225" class="Field">to</a> <a id="42286" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="42288" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="42292" class="Symbol">(</a><a id="42293" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="42295" href="Demos.HSP.html#41253" class="Field">from</a> <a id="42300" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="42302" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="42306" href="Demos.HSP.html#42164" class="Bound">x</a><a id="42307" class="Symbol">)</a> <a id="42309" href="Demos.HSP.html#41101" class="Function Operator">‚âà·¥Æ</a> <a id="42312" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="42314" href="Demos.HSP.html#41225" class="Field">to</a> <a id="42317" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="42319" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="42323" class="Symbol">(</a><a id="42324" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="42326" href="Demos.HSP.html#41253" class="Field">from</a> <a id="42331" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="42333" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="42337" href="Demos.HSP.html#42167" class="Bound">y</a><a id="42338" class="Symbol">)</a>
   <a id="42343" href="Demos.HSP.html#42277" class="Function">Œæ</a> <a id="42345" class="Symbol">=</a> <a id="42347" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="42352" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="42354" href="Demos.HSP.html#41225" class="Field">to</a> <a id="42357" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="42359" href="Demos.HSP.html#42170" class="Bound">xy</a>

<a id="42363" class="Keyword">open</a> <a id="42368" href="Demos.HSP.html#41145" class="Module Operator">_‚âÖ_</a>

</pre>

It is easy to prove that \ar{\au{}‚âÖ\au{}} is an equivalence relation, as follows.

<pre class="Agda">

<a id="‚âÖ-refl"></a><a id="42482" href="Demos.HSP.html#42482" class="Function">‚âÖ-refl</a> <a id="42489" class="Symbol">:</a> <a id="42491" href="Relation.Binary.Definitions.html#1339" class="Function">Reflexive</a> <a id="42501" class="Symbol">(</a><a id="42502" href="Demos.HSP.html#41145" class="Record Operator">_‚âÖ_</a> <a id="42506" class="Symbol">{</a><a id="42507" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a><a id="42508" class="Symbol">}{</a><a id="42510" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="42512" class="Symbol">})</a>
<a id="42515" href="Demos.HSP.html#42482" class="Function">‚âÖ-refl</a> <a id="42522" class="Symbol">{</a><a id="42523" href="Demos.HSP.html#42523" class="Bound">Œ±</a><a id="42524" class="Symbol">}{</a><a id="42526" href="Demos.HSP.html#42526" class="Bound">œÅ·µÉ</a><a id="42528" class="Symbol">}{</a><a id="42530" href="Demos.HSP.html#42530" class="Bound">ùë®</a><a id="42531" class="Symbol">}</a> <a id="42533" class="Symbol">=</a> <a id="42535" href="Demos.HSP.html#41204" class="InductiveConstructor">mkiso</a> <a id="42541" href="Demos.HSP.html#35787" class="Function">ùíæùíπ</a> <a id="42544" href="Demos.HSP.html#35787" class="Function">ùíæùíπ</a> <a id="42547" class="Symbol">(Œª</a> <a id="42550" href="Demos.HSP.html#42550" class="Bound">b</a> <a id="42552" class="Symbol">‚Üí</a> <a id="42554" href="Relation.Binary.Structures.html#1568" class="Function">refl</a><a id="42558" class="Symbol">)</a> <a id="42560" class="Symbol">Œª</a> <a id="42562" href="Demos.HSP.html#42562" class="Bound">a</a> <a id="42564" class="Symbol">‚Üí</a> <a id="42566" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="42571" class="Keyword">where</a> <a id="42577" class="Keyword">open</a> <a id="42582" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="42589" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="42592" href="Demos.HSP.html#42530" class="Bound">ùë®</a> <a id="42594" href="Demos.HSP.html#23785" class="Function Operator">]</a> <a id="42596" class="Keyword">using</a> <a id="42602" class="Symbol">(</a> <a id="42604" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="42609" class="Symbol">)</a>
<a id="‚âÖ-sym"></a><a id="42611" href="Demos.HSP.html#42611" class="Function">‚âÖ-sym</a> <a id="42617" class="Symbol">:</a> <a id="42619" href="Relation.Binary.Definitions.html#1424" class="Function">Sym</a> <a id="42623" class="Symbol">(</a><a id="42624" href="Demos.HSP.html#41145" class="Record Operator">_‚âÖ_</a><a id="42627" class="Symbol">{</a><a id="42628" href="Demos.HSP.html#8424" class="Generalizable">Œ≤</a><a id="42629" class="Symbol">}{</a><a id="42631" href="Demos.HSP.html#8426" class="Generalizable">œÅ·µá</a><a id="42633" class="Symbol">})</a> <a id="42636" class="Symbol">(</a><a id="42637" href="Demos.HSP.html#41145" class="Record Operator">_‚âÖ_</a><a id="42640" class="Symbol">{</a><a id="42641" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a><a id="42642" class="Symbol">}{</a><a id="42644" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="42646" class="Symbol">})</a>
<a id="42649" href="Demos.HSP.html#42611" class="Function">‚âÖ-sym</a> <a id="42655" href="Demos.HSP.html#42655" class="Bound">œÜ</a> <a id="42657" class="Symbol">=</a> <a id="42659" href="Demos.HSP.html#41204" class="InductiveConstructor">mkiso</a> <a id="42665" class="Symbol">(</a><a id="42666" href="Demos.HSP.html#41253" class="Field">from</a> <a id="42671" href="Demos.HSP.html#42655" class="Bound">œÜ</a><a id="42672" class="Symbol">)</a> <a id="42674" class="Symbol">(</a><a id="42675" href="Demos.HSP.html#41225" class="Field">to</a> <a id="42678" href="Demos.HSP.html#42655" class="Bound">œÜ</a><a id="42679" class="Symbol">)</a> <a id="42681" class="Symbol">(</a><a id="42682" href="Demos.HSP.html#41352" class="Field">from‚àºto</a> <a id="42690" href="Demos.HSP.html#42655" class="Bound">œÜ</a><a id="42691" class="Symbol">)</a> <a id="42693" class="Symbol">(</a><a id="42694" href="Demos.HSP.html#41283" class="Field">to‚àºfrom</a> <a id="42702" href="Demos.HSP.html#42655" class="Bound">œÜ</a><a id="42703" class="Symbol">)</a>

<a id="‚âÖ-trans"></a><a id="42706" href="Demos.HSP.html#42706" class="Function">‚âÖ-trans</a> <a id="42714" class="Symbol">:</a> <a id="42716" href="Relation.Binary.Definitions.html#1585" class="Function">Trans</a> <a id="42722" class="Symbol">(</a><a id="42723" href="Demos.HSP.html#41145" class="Record Operator">_‚âÖ_</a> <a id="42727" class="Symbol">{</a><a id="42728" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a><a id="42729" class="Symbol">}{</a><a id="42731" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="42733" class="Symbol">})</a> <a id="42736" class="Symbol">(</a><a id="42737" href="Demos.HSP.html#41145" class="Record Operator">_‚âÖ_</a><a id="42740" class="Symbol">{</a><a id="42741" href="Demos.HSP.html#8424" class="Generalizable">Œ≤</a><a id="42742" class="Symbol">}{</a><a id="42744" href="Demos.HSP.html#8426" class="Generalizable">œÅ·µá</a><a id="42746" class="Symbol">})</a> <a id="42749" class="Symbol">(</a><a id="42750" href="Demos.HSP.html#41145" class="Record Operator">_‚âÖ_</a><a id="42753" class="Symbol">{</a><a id="42754" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a><a id="42755" class="Symbol">}{</a><a id="42757" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="42759" class="Symbol">}{</a><a id="42761" href="Demos.HSP.html#8429" class="Generalizable">Œ≥</a><a id="42762" class="Symbol">}{</a><a id="42764" href="Demos.HSP.html#8431" class="Generalizable">œÅ·∂ú</a><a id="42766" class="Symbol">})</a>
<a id="42769" href="Demos.HSP.html#42706" class="Function">‚âÖ-trans</a> <a id="42777" class="Symbol">{</a><a id="42778" class="Argument">œÅ·∂ú</a> <a id="42781" class="Symbol">=</a> <a id="42783" href="Demos.HSP.html#42783" class="Bound">œÅ·∂ú</a><a id="42785" class="Symbol">}{</a><a id="42787" href="Demos.HSP.html#42787" class="Bound">ùë®</a><a id="42788" class="Symbol">}{</a><a id="42790" href="Demos.HSP.html#42790" class="Bound">ùë©</a><a id="42791" class="Symbol">}{</a><a id="42793" href="Demos.HSP.html#42793" class="Bound">ùë™</a><a id="42794" class="Symbol">}</a> <a id="42796" href="Demos.HSP.html#42796" class="Bound">ab</a> <a id="42799" href="Demos.HSP.html#42799" class="Bound">bc</a> <a id="42802" class="Symbol">=</a> <a id="42804" href="Demos.HSP.html#41204" class="InductiveConstructor">mkiso</a> <a id="42810" href="Demos.HSP.html#42827" class="Function">f</a> <a id="42812" href="Demos.HSP.html#42857" class="Function">g</a> <a id="42814" href="Demos.HSP.html#43051" class="Function">œÑ</a> <a id="42816" href="Demos.HSP.html#43173" class="Function">ŒΩ</a>
 <a id="42819" class="Keyword">where</a>
  <a id="42827" href="Demos.HSP.html#42827" class="Function">f</a> <a id="42829" class="Symbol">:</a> <a id="42831" href="Demos.HSP.html#32650" class="Function">hom</a> <a id="42835" href="Demos.HSP.html#42787" class="Bound">ùë®</a> <a id="42837" href="Demos.HSP.html#42793" class="Bound">ùë™</a>                <a id="42854" class="Symbol">;</a>  <a id="42857" href="Demos.HSP.html#42857" class="Function">g</a> <a id="42859" class="Symbol">:</a> <a id="42861" href="Demos.HSP.html#32650" class="Function">hom</a> <a id="42865" href="Demos.HSP.html#42793" class="Bound">ùë™</a> <a id="42867" href="Demos.HSP.html#42787" class="Bound">ùë®</a>
  <a id="42871" href="Demos.HSP.html#42827" class="Function">f</a> <a id="42873" class="Symbol">=</a> <a id="42875" href="Demos.HSP.html#35351" class="Function">‚àò-hom</a> <a id="42881" class="Symbol">(</a><a id="42882" href="Demos.HSP.html#41225" class="Field">to</a> <a id="42885" href="Demos.HSP.html#42796" class="Bound">ab</a><a id="42887" class="Symbol">)</a> <a id="42889" class="Symbol">(</a><a id="42890" href="Demos.HSP.html#41225" class="Field">to</a> <a id="42893" href="Demos.HSP.html#42799" class="Bound">bc</a><a id="42895" class="Symbol">)</a>  <a id="42898" class="Symbol">;</a>  <a id="42901" href="Demos.HSP.html#42857" class="Function">g</a> <a id="42903" class="Symbol">=</a> <a id="42905" href="Demos.HSP.html#35351" class="Function">‚àò-hom</a> <a id="42911" class="Symbol">(</a><a id="42912" href="Demos.HSP.html#41253" class="Field">from</a> <a id="42917" href="Demos.HSP.html#42799" class="Bound">bc</a><a id="42919" class="Symbol">)</a> <a id="42921" class="Symbol">(</a><a id="42922" href="Demos.HSP.html#41253" class="Field">from</a> <a id="42927" href="Demos.HSP.html#42796" class="Bound">ab</a><a id="42929" class="Symbol">)</a>

  <a id="42934" class="Keyword">open</a> <a id="42939" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="42946" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="42949" href="Demos.HSP.html#42787" class="Bound">ùë®</a> <a id="42951" href="Demos.HSP.html#23785" class="Function Operator">]</a> <a id="42953" class="Keyword">using</a> <a id="42959" class="Symbol">(</a> <a id="42961" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="42965" class="Symbol">;</a> <a id="42967" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="42973" class="Symbol">)</a>
  <a id="42977" class="Keyword">open</a> <a id="42982" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="42989" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="42992" href="Demos.HSP.html#42793" class="Bound">ùë™</a> <a id="42994" href="Demos.HSP.html#23785" class="Function Operator">]</a> <a id="42996" class="Keyword">using</a> <a id="43002" class="Symbol">()</a> <a id="43005" class="Keyword">renaming</a> <a id="43014" class="Symbol">(</a> <a id="43016" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="43020" class="Symbol">to</a> <a id="43023" class="Field Operator">_‚âà·∂ú_</a> <a id="43028" class="Symbol">;</a> <a id="43030" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="43036" class="Symbol">to</a> <a id="43039" class="Function">trans·∂ú</a> <a id="43046" class="Symbol">)</a>

  <a id="43051" href="Demos.HSP.html#43051" class="Function">œÑ</a> <a id="43053" class="Symbol">:</a> <a id="43055" class="Symbol">‚àÄ</a> <a id="43057" href="Demos.HSP.html#43057" class="Bound">b</a> <a id="43059" class="Symbol">‚Üí</a> <a id="43061" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="43063" href="Demos.HSP.html#42827" class="Function">f</a> <a id="43065" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="43067" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="43071" class="Symbol">(</a><a id="43072" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="43074" href="Demos.HSP.html#42857" class="Function">g</a> <a id="43076" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="43078" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="43082" href="Demos.HSP.html#43057" class="Bound">b</a><a id="43083" class="Symbol">)</a> <a id="43085" href="Demos.HSP.html#43023" class="Function Operator">‚âà·∂ú</a> <a id="43088" href="Demos.HSP.html#43057" class="Bound">b</a>
  <a id="43092" href="Demos.HSP.html#43051" class="Function">œÑ</a> <a id="43094" href="Demos.HSP.html#43094" class="Bound">b</a> <a id="43096" class="Symbol">=</a> <a id="43098" href="Demos.HSP.html#43039" class="Function">trans·∂ú</a> <a id="43105" class="Symbol">(</a><a id="43106" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="43111" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="43113" href="Demos.HSP.html#41225" class="Field">to</a> <a id="43116" href="Demos.HSP.html#42799" class="Bound">bc</a> <a id="43119" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="43121" class="Symbol">(</a><a id="43122" href="Demos.HSP.html#41283" class="Field">to‚àºfrom</a> <a id="43130" href="Demos.HSP.html#42796" class="Bound">ab</a> <a id="43133" class="Symbol">(</a><a id="43134" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="43136" href="Demos.HSP.html#41253" class="Field">from</a> <a id="43141" href="Demos.HSP.html#42799" class="Bound">bc</a> <a id="43144" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="43146" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="43150" href="Demos.HSP.html#43094" class="Bound">b</a><a id="43151" class="Symbol">)))</a> <a id="43155" class="Symbol">(</a><a id="43156" href="Demos.HSP.html#41283" class="Field">to‚àºfrom</a> <a id="43164" href="Demos.HSP.html#42799" class="Bound">bc</a> <a id="43167" href="Demos.HSP.html#43094" class="Bound">b</a><a id="43168" class="Symbol">)</a>

  <a id="43173" href="Demos.HSP.html#43173" class="Function">ŒΩ</a> <a id="43175" class="Symbol">:</a> <a id="43177" class="Symbol">‚àÄ</a> <a id="43179" href="Demos.HSP.html#43179" class="Bound">a</a> <a id="43181" class="Symbol">‚Üí</a> <a id="43183" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="43185" href="Demos.HSP.html#42857" class="Function">g</a> <a id="43187" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="43189" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="43193" class="Symbol">(</a><a id="43194" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="43196" href="Demos.HSP.html#42827" class="Function">f</a> <a id="43198" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="43200" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="43204" href="Demos.HSP.html#43179" class="Bound">a</a><a id="43205" class="Symbol">)</a> <a id="43207" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a> <a id="43209" href="Demos.HSP.html#43179" class="Bound">a</a>
  <a id="43213" href="Demos.HSP.html#43173" class="Function">ŒΩ</a> <a id="43215" href="Demos.HSP.html#43215" class="Bound">a</a> <a id="43217" class="Symbol">=</a> <a id="43219" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="43225" class="Symbol">(</a><a id="43226" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="43231" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="43233" href="Demos.HSP.html#41253" class="Field">from</a> <a id="43238" href="Demos.HSP.html#42796" class="Bound">ab</a> <a id="43241" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="43243" class="Symbol">(</a><a id="43244" href="Demos.HSP.html#41352" class="Field">from‚àºto</a> <a id="43252" href="Demos.HSP.html#42799" class="Bound">bc</a> <a id="43255" class="Symbol">(</a><a id="43256" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="43258" href="Demos.HSP.html#41225" class="Field">to</a> <a id="43261" href="Demos.HSP.html#42796" class="Bound">ab</a> <a id="43264" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="43266" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="43270" href="Demos.HSP.html#43215" class="Bound">a</a><a id="43271" class="Symbol">)))</a> <a id="43275" class="Symbol">(</a><a id="43276" href="Demos.HSP.html#41352" class="Field">from‚àºto</a> <a id="43284" href="Demos.HSP.html#42796" class="Bound">ab</a> <a id="43287" href="Demos.HSP.html#43215" class="Bound">a</a><a id="43288" class="Symbol">)</a>
</pre>
\fi
\paragraph*{Lift-Alg is an algebraic invariant}
The \af{Lift-Alg} operation neatly resolves the technical problem of
universe non-cumulativity because isomorphism classes of algebras are closed under \af{Lift-Alg}; that is,
\ifshort\else

<pre class="Agda">

<a id="43558" class="Keyword">module</a> <a id="43565" href="Demos.HSP.html#43565" class="Module">_</a> <a id="43567" class="Symbol">{</a><a id="43568" href="Demos.HSP.html#43568" class="Bound">ùë®</a> <a id="43570" class="Symbol">:</a> <a id="43572" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="43580" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="43582" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="43584" class="Symbol">}{</a><a id="43586" href="Demos.HSP.html#43586" class="Bound">‚Ñì</a> <a id="43588" class="Symbol">:</a> <a id="43590" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="43595" class="Symbol">}</a> <a id="43597" class="Keyword">where</a>
 <a id="43604" href="Demos.HSP.html#43604" class="Function">Lift-‚âÖÀ°</a> <a id="43612" class="Symbol">:</a> <a id="43614" href="Demos.HSP.html#43568" class="Bound">ùë®</a> <a id="43616" href="Demos.HSP.html#41145" class="Record Operator">‚âÖ</a> <a id="43618" class="Symbol">(</a><a id="43619" href="Demos.HSP.html#26822" class="Function">Lift-AlgÀ°</a> <a id="43629" href="Demos.HSP.html#43568" class="Bound">ùë®</a> <a id="43631" href="Demos.HSP.html#43586" class="Bound">‚Ñì</a><a id="43632" class="Symbol">)</a>
 <a id="43635" href="Demos.HSP.html#43604" class="Function">Lift-‚âÖÀ°</a> <a id="43643" class="Symbol">=</a> <a id="43645" href="Demos.HSP.html#41204" class="InductiveConstructor">mkiso</a> <a id="43651" href="Demos.HSP.html#36258" class="Function">ToLiftÀ°</a> <a id="43659" href="Demos.HSP.html#36362" class="Function">FromLiftÀ°</a> <a id="43669" class="Symbol">(</a><a id="43670" href="Demos.HSP.html#36458" class="Function">ToFromLiftÀ°</a><a id="43681" class="Symbol">{</a><a id="43682" class="Argument">ùë®</a> <a id="43684" class="Symbol">=</a> <a id="43686" href="Demos.HSP.html#43568" class="Bound">ùë®</a><a id="43687" class="Symbol">})</a> <a id="43690" class="Symbol">(</a><a id="43691" href="Demos.HSP.html#36547" class="Function">FromToLiftÀ°</a><a id="43702" class="Symbol">{</a><a id="43703" class="Argument">ùë®</a> <a id="43705" class="Symbol">=</a> <a id="43707" href="Demos.HSP.html#43568" class="Bound">ùë®</a><a id="43708" class="Symbol">}{</a><a id="43710" href="Demos.HSP.html#43586" class="Bound">‚Ñì</a><a id="43711" class="Symbol">})</a>
 <a id="43715" href="Demos.HSP.html#43715" class="Function">Lift-‚âÖ ≥</a> <a id="43723" class="Symbol">:</a> <a id="43725" href="Demos.HSP.html#43568" class="Bound">ùë®</a> <a id="43727" href="Demos.HSP.html#41145" class="Record Operator">‚âÖ</a> <a id="43729" class="Symbol">(</a><a id="43730" href="Demos.HSP.html#27217" class="Function">Lift-Alg ≥</a> <a id="43740" href="Demos.HSP.html#43568" class="Bound">ùë®</a> <a id="43742" href="Demos.HSP.html#43586" class="Bound">‚Ñì</a><a id="43743" class="Symbol">)</a>
 <a id="43746" href="Demos.HSP.html#43715" class="Function">Lift-‚âÖ ≥</a> <a id="43754" class="Symbol">=</a> <a id="43756" href="Demos.HSP.html#41204" class="InductiveConstructor">mkiso</a> <a id="43762" href="Demos.HSP.html#36635" class="Function">ToLift ≥</a> <a id="43770" href="Demos.HSP.html#36746" class="Function">FromLift ≥</a> <a id="43780" class="Symbol">(</a><a id="43781" href="Demos.HSP.html#36842" class="Function">ToFromLift ≥</a><a id="43792" class="Symbol">{</a><a id="43793" class="Argument">ùë®</a> <a id="43795" class="Symbol">=</a> <a id="43797" href="Demos.HSP.html#43568" class="Bound">ùë®</a><a id="43798" class="Symbol">})</a> <a id="43801" class="Symbol">(</a><a id="43802" href="Demos.HSP.html#36935" class="Function">FromToLift ≥</a><a id="43813" class="Symbol">{</a><a id="43814" class="Argument">ùë®</a> <a id="43816" class="Symbol">=</a> <a id="43818" href="Demos.HSP.html#43568" class="Bound">ùë®</a><a id="43819" class="Symbol">}{</a><a id="43821" href="Demos.HSP.html#43586" class="Bound">‚Ñì</a><a id="43822" class="Symbol">})</a>
</pre>
\fi
<pre class="Agda">

<a id="Lift-‚âÖ"></a><a id="43854" href="Demos.HSP.html#43854" class="Function">Lift-‚âÖ</a> <a id="43861" class="Symbol">:</a> <a id="43863" class="Symbol">{</a><a id="43864" href="Demos.HSP.html#43864" class="Bound">ùë®</a> <a id="43866" class="Symbol">:</a> <a id="43868" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="43876" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="43878" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="43880" class="Symbol">}{</a><a id="43882" href="Demos.HSP.html#43882" class="Bound">‚Ñì</a> <a id="43884" href="Demos.HSP.html#43884" class="Bound">œÅ</a> <a id="43886" class="Symbol">:</a> <a id="43888" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="43893" class="Symbol">}</a> <a id="43895" class="Symbol">‚Üí</a> <a id="43897" href="Demos.HSP.html#43864" class="Bound">ùë®</a> <a id="43899" href="Demos.HSP.html#41145" class="Record Operator">‚âÖ</a> <a id="43901" class="Symbol">(</a><a id="43902" href="Demos.HSP.html#27763" class="Function">Lift-Alg</a> <a id="43911" href="Demos.HSP.html#43864" class="Bound">ùë®</a> <a id="43913" href="Demos.HSP.html#43882" class="Bound">‚Ñì</a> <a id="43915" href="Demos.HSP.html#43884" class="Bound">œÅ</a><a id="43916" class="Symbol">)</a>
</pre>
\ifshort\else
<pre class="Agda">
<a id="43956" href="Demos.HSP.html#43854" class="Function">Lift-‚âÖ</a> <a id="43963" class="Symbol">=</a> <a id="43965" href="Demos.HSP.html#42706" class="Function">‚âÖ-trans</a> <a id="43973" href="Demos.HSP.html#43604" class="Function">Lift-‚âÖÀ°</a> <a id="43981" href="Demos.HSP.html#43715" class="Function">Lift-‚âÖ ≥</a>
</pre>
\fi

\paragraph*{Homomorphic images}
We have found that the most useful way to encode the concept of \emph{homomorphic image}
is to produce a witness, that is, a surjective hom.  Thus we define the type of surjective homs
and also record the fact that an algebra is its own homomorphic image via the identity
hom.\footnote{Here and elsewhere we use the shorthand \af{ov}~\ab{Œ±} := \ab{ùí™}
\ap{‚äî} \ab{ùí±} \ap{‚äî} \ab{Œ±}, for any level \ab{Œ±}.}

\ifshort\else
<pre class="Agda">

<a id="ov"></a><a id="44469" href="Demos.HSP.html#44469" class="Function">ov</a> <a id="44472" class="Symbol">:</a> <a id="44474" href="Agda.Primitive.html#597" class="Postulate">Level</a> <a id="44480" class="Symbol">‚Üí</a> <a id="44482" href="Agda.Primitive.html#597" class="Postulate">Level</a>
<a id="44488" href="Demos.HSP.html#44469" class="Function">ov</a> <a id="44491" href="Demos.HSP.html#44491" class="Bound">Œ±</a> <a id="44493" class="Symbol">=</a> <a id="44495" href="Demos.HSP.html#6194" class="Bound">ùìû</a> <a id="44497" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="44499" href="Demos.HSP.html#6196" class="Bound">ùì•</a> <a id="44501" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="44503" href="Agda.Primitive.html#780" class="Primitive">lsuc</a> <a id="44508" href="Demos.HSP.html#44491" class="Bound">Œ±</a>
</pre>
\fi
<pre class="Agda">

<a id="_IsHomImageOf_"></a><a id="44539" href="Demos.HSP.html#44539" class="Function Operator">_IsHomImageOf_</a> <a id="44554" class="Symbol">:</a> <a id="44556" class="Symbol">(</a><a id="44557" href="Demos.HSP.html#44557" class="Bound">ùë©</a> <a id="44559" class="Symbol">:</a> <a id="44561" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="44569" href="Demos.HSP.html#8424" class="Generalizable">Œ≤</a> <a id="44571" href="Demos.HSP.html#8426" class="Generalizable">œÅ·µá</a><a id="44573" class="Symbol">)(</a><a id="44575" href="Demos.HSP.html#44575" class="Bound">ùë®</a> <a id="44577" class="Symbol">:</a> <a id="44579" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="44587" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="44589" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="44591" class="Symbol">)</a> <a id="44593" class="Symbol">‚Üí</a> <a id="44595" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="44600" class="Symbol">_</a>
<a id="44602" href="Demos.HSP.html#44602" class="Bound">ùë©</a> <a id="44604" href="Demos.HSP.html#44539" class="Function Operator">IsHomImageOf</a> <a id="44617" href="Demos.HSP.html#44617" class="Bound">ùë®</a> <a id="44619" class="Symbol">=</a> <a id="44621" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="44624" href="Demos.HSP.html#44624" class="Bound">œÜ</a> <a id="44626" href="Data.Product.html#916" class="Function">‚àà</a> <a id="44628" href="Demos.HSP.html#32650" class="Function">hom</a> <a id="44632" href="Demos.HSP.html#44617" class="Bound">ùë®</a> <a id="44634" href="Demos.HSP.html#44602" class="Bound">ùë©</a> <a id="44636" href="Data.Product.html#916" class="Function">]</a> <a id="44638" href="Demos.HSP.html#14140" class="Function">IsSurjective</a> <a id="44651" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="44653" href="Demos.HSP.html#44624" class="Bound">œÜ</a> <a id="44655" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a>

<a id="HomImages"></a><a id="44658" href="Demos.HSP.html#44658" class="Function">HomImages</a> <a id="44668" class="Symbol">:</a> <a id="44670" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="44678" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="44680" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a> <a id="44683" class="Symbol">‚Üí</a> <a id="44685" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="44690" class="Symbol">(</a><a id="44691" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="44693" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="44695" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a> <a id="44698" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="44700" href="Demos.HSP.html#44469" class="Function">ov</a> <a id="44703" class="Symbol">(</a><a id="44704" href="Demos.HSP.html#8424" class="Generalizable">Œ≤</a> <a id="44706" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="44708" href="Demos.HSP.html#8426" class="Generalizable">œÅ·µá</a><a id="44710" class="Symbol">))</a>
<a id="44713" href="Demos.HSP.html#44658" class="Function">HomImages</a> <a id="44723" class="Symbol">{</a><a id="44724" class="Argument">Œ≤</a> <a id="44726" class="Symbol">=</a> <a id="44728" href="Demos.HSP.html#44728" class="Bound">Œ≤</a><a id="44729" class="Symbol">}{</a><a id="44731" class="Argument">œÅ·µá</a> <a id="44734" class="Symbol">=</a> <a id="44736" href="Demos.HSP.html#44736" class="Bound">œÅ·µá</a><a id="44738" class="Symbol">}</a> <a id="44740" href="Demos.HSP.html#44740" class="Bound">ùë®</a> <a id="44742" class="Symbol">=</a> <a id="44744" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="44747" href="Demos.HSP.html#44747" class="Bound">ùë©</a> <a id="44749" href="Data.Product.html#916" class="Function">‚àà</a> <a id="44751" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="44759" href="Demos.HSP.html#44728" class="Bound">Œ≤</a> <a id="44761" href="Demos.HSP.html#44736" class="Bound">œÅ·µá</a> <a id="44764" href="Data.Product.html#916" class="Function">]</a> <a id="44766" href="Demos.HSP.html#44747" class="Bound">ùë©</a> <a id="44768" href="Demos.HSP.html#44539" class="Function Operator">IsHomImageOf</a> <a id="44781" href="Demos.HSP.html#44740" class="Bound">ùë®</a>

<a id="IdHomImage"></a><a id="44784" href="Demos.HSP.html#44784" class="Function">IdHomImage</a> <a id="44795" class="Symbol">:</a> <a id="44797" class="Symbol">{</a><a id="44798" href="Demos.HSP.html#44798" class="Bound">ùë®</a> <a id="44800" class="Symbol">:</a> <a id="44802" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="44810" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="44812" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="44814" class="Symbol">}</a> <a id="44816" class="Symbol">‚Üí</a> <a id="44818" href="Demos.HSP.html#44798" class="Bound">ùë®</a> <a id="44820" href="Demos.HSP.html#44539" class="Function Operator">IsHomImageOf</a> <a id="44833" href="Demos.HSP.html#44798" class="Bound">ùë®</a>
<a id="44835" href="Demos.HSP.html#44784" class="Function">IdHomImage</a> <a id="44846" class="Symbol">{</a><a id="44847" class="Argument">Œ±</a> <a id="44849" class="Symbol">=</a> <a id="44851" href="Demos.HSP.html#44851" class="Bound">Œ±</a><a id="44852" class="Symbol">}{</a><a id="44854" class="Argument">ùë®</a> <a id="44856" class="Symbol">=</a> <a id="44858" href="Demos.HSP.html#44858" class="Bound">ùë®</a><a id="44859" class="Symbol">}</a> <a id="44861" class="Symbol">=</a> <a id="44863" href="Demos.HSP.html#35787" class="Function">ùíæùíπ</a> <a id="44866" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="44868" class="Symbol">Œª</a> <a id="44870" class="Symbol">{</a><a id="44871" href="Demos.HSP.html#44871" class="Bound">y</a><a id="44872" class="Symbol">}</a> <a id="44874" class="Symbol">‚Üí</a> <a id="44876" href="Demos.HSP.html#12055" class="InductiveConstructor">Image_‚àã_.eq</a> <a id="44888" href="Demos.HSP.html#44871" class="Bound">y</a> <a id="44890" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>
 <a id="44896" class="Keyword">where</a> <a id="44902" class="Keyword">open</a> <a id="44907" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="44914" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="44917" href="Demos.HSP.html#44858" class="Bound">ùë®</a> <a id="44919" href="Demos.HSP.html#23785" class="Function Operator">]</a> <a id="44921" class="Keyword">using</a> <a id="44927" class="Symbol">(</a> <a id="44929" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="44934" class="Symbol">)</a>
</pre>
\ifshort\else    %%% BEGIN LONG VERSION ONLY

\medskip

\noindent These types should be self-explanatory, but just to be sure, we pause
to describe the semantics of the Sigma type appearing in the definition of \af{HomImages}.
If \ab{ùë®} : \af{Algebra} \ab{Œ±} \ab{œÅ·µÉ} is an \ab{ùëÜ}-algebra, then \af{HomImages} \ab{ùë®}
denotes the type of pairs (\ab{ùë©} \aic{,} \ab p) such that \ab{ùë©} : \ar{Algebra} \ab{Œ≤} \ab{œÅ·µá}
and \ab p is a proof that there exists a hom from \ab{ùë®} onto \ab{ùë©}.
\fi      %%% END LONG VERSION ONLY SECTION

%% -------------------------------------------------------------------------------------
\subsection{Subalgebras}
\label{subalgebras}
Given \ab{ùëÜ}-algebras \ab{ùë®} and \ab{ùë©}, we say that \ab{ùë®} is a \defn{subalgebra} of
\ab{ùë®}, and we write \ab{ùë®}~\aof{‚â§}~\ab{ùë©}, just in case \ab{ùë®} can be \emph{homomorphically
embedded} in \ab{ùë©}; in other terms, \ab{ùë®}~\aof{‚â§}~\ab{ùë©} if and only if there exists an injective
hom from \ab{ùë®} to \ab{ùë©}.

<pre class="Agda">

<a id="_‚â§_"></a><a id="45928" href="Demos.HSP.html#45928" class="Function Operator">_‚â§_</a> <a id="45932" class="Symbol">:</a> <a id="45934" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="45942" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="45944" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a> <a id="45947" class="Symbol">‚Üí</a> <a id="45949" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="45957" href="Demos.HSP.html#8424" class="Generalizable">Œ≤</a> <a id="45959" href="Demos.HSP.html#8426" class="Generalizable">œÅ·µá</a> <a id="45962" class="Symbol">‚Üí</a> <a id="45964" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="45969" class="Symbol">_</a>
<a id="45971" href="Demos.HSP.html#45971" class="Bound">ùë®</a> <a id="45973" href="Demos.HSP.html#45928" class="Function Operator">‚â§</a> <a id="45975" href="Demos.HSP.html#45975" class="Bound">ùë©</a> <a id="45977" class="Symbol">=</a> <a id="45979" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="45982" href="Demos.HSP.html#45982" class="Bound">h</a> <a id="45984" href="Data.Product.html#916" class="Function">‚àà</a> <a id="45986" href="Demos.HSP.html#32650" class="Function">hom</a> <a id="45990" href="Demos.HSP.html#45971" class="Bound">ùë®</a> <a id="45992" href="Demos.HSP.html#45975" class="Bound">ùë©</a> <a id="45994" href="Data.Product.html#916" class="Function">]</a> <a id="45996" href="Demos.HSP.html#14057" class="Function">IsInjective</a> <a id="46008" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="46010" href="Demos.HSP.html#45982" class="Bound">h</a> <a id="46012" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a>

</pre>
The subalgebra relation is a \defn{preorder}, that is, a reflexive (by the identity monomorphism), and
transitive (by composition of monomorphisms) relation.
<pre class="Agda">

<a id="‚â§-reflexive"></a><a id="46198" href="Demos.HSP.html#46198" class="Function">‚â§-reflexive</a>   <a id="46212" class="Symbol">:</a>  <a id="46215" class="Symbol">{</a><a id="46216" href="Demos.HSP.html#46216" class="Bound">ùë®</a> <a id="46218" class="Symbol">:</a> <a id="46220" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="46228" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="46230" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="46232" class="Symbol">}</a> <a id="46234" class="Symbol">‚Üí</a> <a id="46236" href="Demos.HSP.html#46216" class="Bound">ùë®</a> <a id="46238" href="Demos.HSP.html#45928" class="Function Operator">‚â§</a> <a id="46240" href="Demos.HSP.html#46216" class="Bound">ùë®</a>
<a id="46242" href="Demos.HSP.html#46198" class="Function">‚â§-reflexive</a> <a id="46254" class="Symbol">{</a><a id="46255" class="Argument">ùë®</a> <a id="46257" class="Symbol">=</a> <a id="46259" href="Demos.HSP.html#46259" class="Bound">ùë®</a><a id="46260" class="Symbol">}</a> <a id="46262" class="Symbol">=</a> <a id="46264" href="Demos.HSP.html#35787" class="Function">ùíæùíπ</a> <a id="46267" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="46269" href="Function.Base.html#615" class="Function">id</a>

<a id="‚â§-transitive"></a><a id="46273" href="Demos.HSP.html#46273" class="Function">‚â§-transitive</a>  <a id="46287" class="Symbol">:</a>  <a id="46290" class="Symbol">{</a><a id="46291" href="Demos.HSP.html#46291" class="Bound">ùë®</a> <a id="46293" class="Symbol">:</a> <a id="46295" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="46303" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="46305" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="46307" class="Symbol">}{</a><a id="46309" href="Demos.HSP.html#46309" class="Bound">ùë©</a> <a id="46311" class="Symbol">:</a> <a id="46313" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="46321" href="Demos.HSP.html#8424" class="Generalizable">Œ≤</a> <a id="46323" href="Demos.HSP.html#8426" class="Generalizable">œÅ·µá</a><a id="46325" class="Symbol">}{</a><a id="46327" href="Demos.HSP.html#46327" class="Bound">ùë™</a> <a id="46329" class="Symbol">:</a> <a id="46331" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="46339" href="Demos.HSP.html#8429" class="Generalizable">Œ≥</a> <a id="46341" href="Demos.HSP.html#8431" class="Generalizable">œÅ·∂ú</a><a id="46343" class="Symbol">}</a>
 <a id="46346" class="Symbol">‚Üí</a>               <a id="46362" href="Demos.HSP.html#46291" class="Bound">ùë®</a> <a id="46364" href="Demos.HSP.html#45928" class="Function Operator">‚â§</a> <a id="46366" href="Demos.HSP.html#46309" class="Bound">ùë©</a> <a id="46368" class="Symbol">‚Üí</a> <a id="46370" href="Demos.HSP.html#46309" class="Bound">ùë©</a> <a id="46372" href="Demos.HSP.html#45928" class="Function Operator">‚â§</a> <a id="46374" href="Demos.HSP.html#46327" class="Bound">ùë™</a> <a id="46376" class="Symbol">‚Üí</a> <a id="46378" href="Demos.HSP.html#46291" class="Bound">ùë®</a> <a id="46380" href="Demos.HSP.html#45928" class="Function Operator">‚â§</a> <a id="46382" href="Demos.HSP.html#46327" class="Bound">ùë™</a>
<a id="46384" href="Demos.HSP.html#46273" class="Function">‚â§-transitive</a> <a id="46397" class="Symbol">(</a> <a id="46399" href="Demos.HSP.html#46399" class="Bound">f</a> <a id="46401" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="46403" href="Demos.HSP.html#46403" class="Bound">finj</a> <a id="46408" class="Symbol">)</a> <a id="46410" class="Symbol">(</a> <a id="46412" href="Demos.HSP.html#46412" class="Bound">g</a> <a id="46414" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="46416" href="Demos.HSP.html#46416" class="Bound">ginj</a> <a id="46421" class="Symbol">)</a> <a id="46423" class="Symbol">=</a> <a id="46425" class="Symbol">(</a><a id="46426" href="Demos.HSP.html#35351" class="Function">‚àò-hom</a> <a id="46432" href="Demos.HSP.html#46399" class="Bound">f</a> <a id="46434" href="Demos.HSP.html#46412" class="Bound">g</a> <a id="46436" class="Symbol">)</a> <a id="46438" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="46440" href="Demos.HSP.html#14698" class="Function">‚àò-IsInjective</a> <a id="46454" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="46456" href="Demos.HSP.html#46399" class="Bound">f</a> <a id="46458" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="46460" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="46462" href="Demos.HSP.html#46412" class="Bound">g</a> <a id="46464" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="46466" href="Demos.HSP.html#46403" class="Bound">finj</a> <a id="46471" href="Demos.HSP.html#46416" class="Bound">ginj</a>

</pre>
\noindent If
\ab{ùíú} : \ab I ‚Üí \af{Algebra} \ab{Œ±} \ab{œÅ·µÉ},
\ab{‚Ñ¨} : \ab I ‚Üí \af{Algebra} \ab{Œ≤} \ab{œÅ·µá} (families of \ab{ùëÜ}-algebras) and
\ab{‚Ñ¨} \ab i \af{‚â§} \ab{ùíú} \ab i for all \ab i~:~\ab I, then \af{‚®Ö} \ab{‚Ñ¨} is a subalgebra
of \af{‚®Ö} \ab{ùíú}.
\ifshort
Below we use \af{‚®Ö-‚â§} to denote this fact.
\else

<pre class="Agda">
<a id="46807" class="Keyword">module</a> <a id="46814" href="Demos.HSP.html#46814" class="Module">_</a> <a id="46816" class="Symbol">{</a><a id="46817" href="Demos.HSP.html#46817" class="Bound">Œπ</a> <a id="46819" class="Symbol">:</a> <a id="46821" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="46826" class="Symbol">}</a> <a id="46828" class="Symbol">{</a><a id="46829" href="Demos.HSP.html#46829" class="Bound">I</a> <a id="46831" class="Symbol">:</a> <a id="46833" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="46838" href="Demos.HSP.html#46817" class="Bound">Œπ</a><a id="46839" class="Symbol">}{</a><a id="46841" href="Demos.HSP.html#46841" class="Bound">ùíú</a> <a id="46843" class="Symbol">:</a> <a id="46845" href="Demos.HSP.html#46829" class="Bound">I</a> <a id="46847" class="Symbol">‚Üí</a> <a id="46849" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="46857" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="46859" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="46861" class="Symbol">}{</a><a id="46863" href="Demos.HSP.html#46863" class="Bound">‚Ñ¨</a> <a id="46865" class="Symbol">:</a> <a id="46867" href="Demos.HSP.html#46829" class="Bound">I</a> <a id="46869" class="Symbol">‚Üí</a> <a id="46871" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="46879" href="Demos.HSP.html#8424" class="Generalizable">Œ≤</a> <a id="46881" href="Demos.HSP.html#8426" class="Generalizable">œÅ·µá</a><a id="46883" class="Symbol">}</a> <a id="46885" class="Keyword">where</a>

 <a id="46893" href="Demos.HSP.html#46893" class="Function">‚®Ö-‚â§</a> <a id="46897" class="Symbol">:</a> <a id="46899" class="Symbol">(‚àÄ</a> <a id="46902" href="Demos.HSP.html#46902" class="Bound">i</a> <a id="46904" class="Symbol">‚Üí</a> <a id="46906" href="Demos.HSP.html#46863" class="Bound">‚Ñ¨</a> <a id="46908" href="Demos.HSP.html#46902" class="Bound">i</a> <a id="46910" href="Demos.HSP.html#45928" class="Function Operator">‚â§</a> <a id="46912" href="Demos.HSP.html#46841" class="Bound">ùíú</a> <a id="46914" href="Demos.HSP.html#46902" class="Bound">i</a><a id="46915" class="Symbol">)</a> <a id="46917" class="Symbol">‚Üí</a> <a id="46919" href="Demos.HSP.html#29982" class="Function">‚®Ö</a> <a id="46921" href="Demos.HSP.html#46863" class="Bound">‚Ñ¨</a> <a id="46923" href="Demos.HSP.html#45928" class="Function Operator">‚â§</a> <a id="46925" href="Demos.HSP.html#29982" class="Function">‚®Ö</a> <a id="46927" href="Demos.HSP.html#46841" class="Bound">ùíú</a>
 <a id="46930" href="Demos.HSP.html#46893" class="Function">‚®Ö-‚â§</a> <a id="46934" href="Demos.HSP.html#46934" class="Bound">B‚â§A</a> <a id="46938" class="Symbol">=</a> <a id="46940" class="Symbol">(</a><a id="46941" href="Demos.HSP.html#47016" class="Function">hfunc</a> <a id="46947" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="46949" href="Demos.HSP.html#47128" class="Function">hhom</a><a id="46953" class="Symbol">)</a> <a id="46955" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="46957" href="Demos.HSP.html#47207" class="Function">hM</a>
  <a id="46962" class="Keyword">where</a>
  <a id="46970" href="Demos.HSP.html#46970" class="Function">hi</a> <a id="46973" class="Symbol">:</a> <a id="46975" class="Symbol">‚àÄ</a> <a id="46977" href="Demos.HSP.html#46977" class="Bound">i</a> <a id="46979" class="Symbol">‚Üí</a> <a id="46981" href="Demos.HSP.html#32650" class="Function">hom</a> <a id="46985" class="Symbol">(</a><a id="46986" href="Demos.HSP.html#46863" class="Bound">‚Ñ¨</a> <a id="46988" href="Demos.HSP.html#46977" class="Bound">i</a><a id="46989" class="Symbol">)</a> <a id="46991" class="Symbol">(</a><a id="46992" href="Demos.HSP.html#46841" class="Bound">ùíú</a> <a id="46994" href="Demos.HSP.html#46977" class="Bound">i</a><a id="46995" class="Symbol">)</a>
  <a id="46999" href="Demos.HSP.html#46970" class="Function">hi</a> <a id="47002" class="Symbol">=</a> <a id="47004" href="Demos.HSP.html#7330" class="Field">fst</a> <a id="47008" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="47010" href="Demos.HSP.html#46934" class="Bound">B‚â§A</a>
  <a id="47016" href="Demos.HSP.html#47016" class="Function">hfunc</a> <a id="47022" class="Symbol">:</a> <a id="47024" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="47027" href="Demos.HSP.html#29982" class="Function">‚®Ö</a> <a id="47029" href="Demos.HSP.html#46863" class="Bound">‚Ñ¨</a> <a id="47031" href="Demos.HSP.html#23785" class="Function Operator">]</a> <a id="47033" href="Demos.HSP.html#7491" class="Record Operator">‚ü∂</a> <a id="47035" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="47038" href="Demos.HSP.html#29982" class="Function">‚®Ö</a> <a id="47040" href="Demos.HSP.html#46841" class="Bound">ùíú</a> <a id="47042" href="Demos.HSP.html#23785" class="Function Operator">]</a>
  <a id="47046" class="Symbol">(</a><a id="47047" href="Demos.HSP.html#47016" class="Function">hfunc</a> <a id="47053" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="47057" href="Demos.HSP.html#47057" class="Bound">x</a><a id="47058" class="Symbol">)</a> <a id="47060" href="Demos.HSP.html#47060" class="Bound">i</a> <a id="47062" class="Symbol">=</a> <a id="47064" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="47066" href="Demos.HSP.html#46970" class="Function">hi</a> <a id="47069" href="Demos.HSP.html#47060" class="Bound">i</a> <a id="47071" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="47073" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="47077" href="Demos.HSP.html#47057" class="Bound">x</a> <a id="47079" href="Demos.HSP.html#47060" class="Bound">i</a>
  <a id="47083" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="47088" href="Demos.HSP.html#47016" class="Function">hfunc</a> <a id="47094" class="Symbol">=</a> <a id="47096" class="Symbol">Œª</a> <a id="47098" href="Demos.HSP.html#47098" class="Bound">xy</a> <a id="47101" href="Demos.HSP.html#47101" class="Bound">i</a> <a id="47103" class="Symbol">‚Üí</a> <a id="47105" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="47110" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="47112" href="Demos.HSP.html#46970" class="Function">hi</a> <a id="47115" href="Demos.HSP.html#47101" class="Bound">i</a> <a id="47117" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="47119" class="Symbol">(</a><a id="47120" href="Demos.HSP.html#47098" class="Bound">xy</a> <a id="47123" href="Demos.HSP.html#47101" class="Bound">i</a><a id="47124" class="Symbol">)</a>
  <a id="47128" href="Demos.HSP.html#47128" class="Function">hhom</a> <a id="47133" class="Symbol">:</a> <a id="47135" href="Demos.HSP.html#32532" class="Record">IsHom</a> <a id="47141" class="Symbol">(</a><a id="47142" href="Demos.HSP.html#29982" class="Function">‚®Ö</a> <a id="47144" href="Demos.HSP.html#46863" class="Bound">‚Ñ¨</a><a id="47145" class="Symbol">)</a> <a id="47147" class="Symbol">(</a><a id="47148" href="Demos.HSP.html#29982" class="Function">‚®Ö</a> <a id="47150" href="Demos.HSP.html#46841" class="Bound">ùíú</a><a id="47151" class="Symbol">)</a> <a id="47153" href="Demos.HSP.html#47016" class="Function">hfunc</a>
  <a id="47161" href="Demos.HSP.html#32618" class="Field">compatible</a> <a id="47172" href="Demos.HSP.html#47128" class="Function">hhom</a> <a id="47177" class="Symbol">=</a> <a id="47179" class="Symbol">Œª</a> <a id="47181" href="Demos.HSP.html#47181" class="Bound">i</a> <a id="47183" class="Symbol">‚Üí</a> <a id="47185" href="Demos.HSP.html#32618" class="Field">compatible</a> <a id="47196" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a> <a id="47198" href="Demos.HSP.html#46970" class="Function">hi</a> <a id="47201" href="Demos.HSP.html#47181" class="Bound">i</a> <a id="47203" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a>
  <a id="47207" href="Demos.HSP.html#47207" class="Function">hM</a> <a id="47210" class="Symbol">:</a> <a id="47212" href="Demos.HSP.html#14057" class="Function">IsInjective</a> <a id="47224" href="Demos.HSP.html#47016" class="Function">hfunc</a>
  <a id="47232" href="Demos.HSP.html#47207" class="Function">hM</a> <a id="47235" class="Symbol">=</a> <a id="47237" class="Symbol">Œª</a> <a id="47239" href="Demos.HSP.html#47239" class="Bound">xy</a> <a id="47242" href="Demos.HSP.html#47242" class="Bound">i</a> <a id="47244" class="Symbol">‚Üí</a> <a id="47246" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a> <a id="47248" href="Demos.HSP.html#46934" class="Bound">B‚â§A</a> <a id="47252" href="Demos.HSP.html#47242" class="Bound">i</a> <a id="47254" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a> <a id="47256" class="Symbol">(</a><a id="47257" href="Demos.HSP.html#47239" class="Bound">xy</a> <a id="47260" href="Demos.HSP.html#47242" class="Bound">i</a><a id="47261" class="Symbol">)</a>

</pre>

We conclude this section with two easy facts that will be useful later. The first converts a monomorphism
to a subalgebra witness while the second is an algebraic invariance property of \aof{‚â§}.

<pre class="Agda">

<a id="mon‚Üí‚â§"></a><a id="47486" href="Demos.HSP.html#47486" class="Function">mon‚Üí‚â§</a>      <a id="47497" class="Symbol">:</a>  <a id="47500" class="Symbol">{</a><a id="47501" href="Demos.HSP.html#47501" class="Bound">ùë®</a> <a id="47503" class="Symbol">:</a> <a id="47505" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="47513" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="47515" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="47517" class="Symbol">}{</a><a id="47519" href="Demos.HSP.html#47519" class="Bound">ùë©</a> <a id="47521" class="Symbol">:</a> <a id="47523" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="47531" href="Demos.HSP.html#8424" class="Generalizable">Œ≤</a> <a id="47533" href="Demos.HSP.html#8426" class="Generalizable">œÅ·µá</a><a id="47535" class="Symbol">}</a> <a id="47537" class="Symbol">‚Üí</a> <a id="47539" href="Demos.HSP.html#33390" class="Function">mon</a> <a id="47543" href="Demos.HSP.html#47501" class="Bound">ùë®</a> <a id="47545" href="Demos.HSP.html#47519" class="Bound">ùë©</a> <a id="47547" class="Symbol">‚Üí</a> <a id="47549" href="Demos.HSP.html#47501" class="Bound">ùë®</a> <a id="47551" href="Demos.HSP.html#45928" class="Function Operator">‚â§</a> <a id="47553" href="Demos.HSP.html#47519" class="Bound">ùë©</a>
<a id="47555" href="Demos.HSP.html#47486" class="Function">mon‚Üí‚â§</a> <a id="47561" class="Symbol">{</a><a id="47562" class="Argument">ùë®</a> <a id="47564" class="Symbol">=</a> <a id="47566" href="Demos.HSP.html#47566" class="Bound">ùë®</a><a id="47567" class="Symbol">}{</a><a id="47569" href="Demos.HSP.html#47569" class="Bound">ùë©</a><a id="47570" class="Symbol">}</a> <a id="47572" href="Demos.HSP.html#47572" class="Bound">x</a> <a id="47574" class="Symbol">=</a> <a id="47576" href="Demos.HSP.html#34061" class="Function">mon‚Üíintohom</a> <a id="47588" href="Demos.HSP.html#47566" class="Bound">ùë®</a> <a id="47590" href="Demos.HSP.html#47569" class="Bound">ùë©</a> <a id="47592" href="Demos.HSP.html#47572" class="Bound">x</a>

<a id="‚âÖ-trans-‚â§"></a><a id="47595" href="Demos.HSP.html#47595" class="Function">‚âÖ-trans-‚â§</a>  <a id="47606" class="Symbol">:</a>  <a id="47609" class="Symbol">{</a><a id="47610" href="Demos.HSP.html#47610" class="Bound">ùë®</a> <a id="47612" class="Symbol">:</a> <a id="47614" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="47622" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="47624" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="47626" class="Symbol">}{</a><a id="47628" href="Demos.HSP.html#47628" class="Bound">ùë©</a> <a id="47630" class="Symbol">:</a> <a id="47632" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="47640" href="Demos.HSP.html#8424" class="Generalizable">Œ≤</a> <a id="47642" href="Demos.HSP.html#8426" class="Generalizable">œÅ·µá</a><a id="47644" class="Symbol">}{</a><a id="47646" href="Demos.HSP.html#47646" class="Bound">ùë™</a> <a id="47648" class="Symbol">:</a> <a id="47650" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="47658" href="Demos.HSP.html#8429" class="Generalizable">Œ≥</a> <a id="47660" href="Demos.HSP.html#8431" class="Generalizable">œÅ·∂ú</a><a id="47662" class="Symbol">}</a>
 <a id="47665" class="Symbol">‚Üí</a>            <a id="47678" href="Demos.HSP.html#47610" class="Bound">ùë®</a> <a id="47680" href="Demos.HSP.html#41145" class="Record Operator">‚âÖ</a> <a id="47682" href="Demos.HSP.html#47628" class="Bound">ùë©</a> <a id="47684" class="Symbol">‚Üí</a> <a id="47686" href="Demos.HSP.html#47628" class="Bound">ùë©</a> <a id="47688" href="Demos.HSP.html#45928" class="Function Operator">‚â§</a> <a id="47690" href="Demos.HSP.html#47646" class="Bound">ùë™</a> <a id="47692" class="Symbol">‚Üí</a> <a id="47694" href="Demos.HSP.html#47610" class="Bound">ùë®</a> <a id="47696" href="Demos.HSP.html#45928" class="Function Operator">‚â§</a> <a id="47698" href="Demos.HSP.html#47646" class="Bound">ùë™</a>
<a id="47700" href="Demos.HSP.html#47595" class="Function">‚âÖ-trans-‚â§</a> <a id="47710" href="Demos.HSP.html#47710" class="Bound">A‚âÖB</a> <a id="47714" class="Symbol">(</a><a id="47715" href="Demos.HSP.html#47715" class="Bound">h</a> <a id="47717" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="47719" href="Demos.HSP.html#47719" class="Bound">hinj</a><a id="47723" class="Symbol">)</a> <a id="47725" class="Symbol">=</a> <a id="47727" class="Symbol">(</a><a id="47728" href="Demos.HSP.html#35351" class="Function">‚àò-hom</a> <a id="47734" class="Symbol">(</a><a id="47735" href="Demos.HSP.html#41225" class="Field">to</a> <a id="47738" href="Demos.HSP.html#47710" class="Bound">A‚âÖB</a><a id="47741" class="Symbol">)</a> <a id="47743" href="Demos.HSP.html#47715" class="Bound">h</a><a id="47744" class="Symbol">)</a> <a id="47746" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="47748" class="Symbol">(</a><a id="47749" href="Demos.HSP.html#14698" class="Function">‚àò-IsInjective</a> <a id="47763" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="47765" href="Demos.HSP.html#41225" class="Field">to</a> <a id="47768" href="Demos.HSP.html#47710" class="Bound">A‚âÖB</a> <a id="47772" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="47774" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="47776" href="Demos.HSP.html#47715" class="Bound">h</a> <a id="47778" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="47780" class="Symbol">(</a><a id="47781" href="Demos.HSP.html#41704" class="Function">toIsInjective</a> <a id="47795" href="Demos.HSP.html#47710" class="Bound">A‚âÖB</a><a id="47798" class="Symbol">)</a> <a id="47800" href="Demos.HSP.html#47719" class="Bound">hinj</a><a id="47804" class="Symbol">)</a>
</pre>
\fi

%% -------------------------------------------------------------------------------------

\subsection{Terms}
\label{terms}
Fix a signature \ab{ùëÜ} and let \ab X denote an arbitrary nonempty collection of variable
symbols. Such a collection is called a \defn{context}.
Assume the symbols in \ab X are distinct from the operation symbols of
\ab{ùëÜ}, that is \ab X \aof{‚à©} \aof{‚à£} \ab{ùëÜ} \aof{‚à£} = ‚àÖ.
A \defn{word} in the language of \ab{ùëÜ} is a finite sequence of members of \ab X \aof{‚à™}
\aof{‚à£~\ab{ùëÜ}~‚à£}. We denote the concatenation of such sequences by simple juxtaposition.
Let \ab{S‚ÇÄ} denote the set of nullary operation symbols of \ab{ùëÜ}. We define by induction
on \textit{n} the sets \ab{ùëá‚Çô} of \emph{words} over \ab X \aof{‚à™} \aof{‚à£~\ab{ùëÜ}~‚à£} as
follows (cf.~\cite[Def. 4.19]{Bergman:2012}): \ab{ùëá‚ÇÄ} := \ab X \aof{‚à™} \ab{S‚ÇÄ} and
\ab{ùëá‚Çô‚Çä‚ÇÅ} := \ab{ùëá‚Çô} \aof{‚à™} \ab{ùíØ‚Çô}, where \ab{ùíØ‚Çô} is the collection of all \ab f \ab t
such that \ab f : \aof{‚à£~\ab{ùëÜ}~‚à£} and \ab t : \aof{‚à•~\ab{ùëÜ}~‚à•} \ab f \as{‚Üí}
\ab{ùëá‚Çô}.
\ifshort\else
(Recall, \aof{‚à•~\ab{ùëÜ}~‚à•} \ab f is the arity of the operation symbol \ab f.)
\fi
An \ab{ùëÜ}-\defn{term} is a term in the language of \ab{ùëÜ} and the collection of all
\ab{ùëÜ}-\defn{terms} in the context \ab X is given by \Term{X} := \aof{‚ãÉ‚Çô} \ab{ùëá‚Çô}.

In type theory, this translates to two cases: variable injection and applying an
operation symbol to a tuple of terms. This represents each term as a tree
with an operation symbol at each \aic{node} and a variable symbol at each leaf \aic{‚Ñä};
hence the constructor names (\aic{‚Ñä} for ``generator'' and \aic{node} for ``node'') in the
following inductively defined type.

<pre class="Agda">

<a id="49478" class="Keyword">data</a> <a id="Term"></a><a id="49483" href="Demos.HSP.html#49483" class="Datatype">Term</a> <a id="49488" class="Symbol">(</a><a id="49489" href="Demos.HSP.html#49489" class="Bound">X</a> <a id="49491" class="Symbol">:</a> <a id="49493" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="49498" href="Demos.HSP.html#8441" class="Generalizable">œá</a> <a id="49500" class="Symbol">)</a> <a id="49502" class="Symbol">:</a> <a id="49504" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="49509" class="Symbol">(</a><a id="49510" href="Demos.HSP.html#44469" class="Function">ov</a> <a id="49513" href="Demos.HSP.html#49498" class="Bound">œá</a><a id="49514" class="Symbol">)</a>  <a id="49517" class="Keyword">where</a>
 <a id="Term.‚Ñä"></a><a id="49524" href="Demos.HSP.html#49524" class="InductiveConstructor">‚Ñä</a> <a id="49526" class="Symbol">:</a> <a id="49528" href="Demos.HSP.html#49489" class="Bound">X</a> <a id="49530" class="Symbol">‚Üí</a> <a id="49532" href="Demos.HSP.html#49483" class="Datatype">Term</a> <a id="49537" href="Demos.HSP.html#49489" class="Bound">X</a>
 <a id="Term.node"></a><a id="49540" href="Demos.HSP.html#49540" class="InductiveConstructor">node</a> <a id="49545" class="Symbol">:</a> <a id="49547" class="Symbol">(</a><a id="49548" href="Demos.HSP.html#49548" class="Bound">f</a> <a id="49550" class="Symbol">:</a> <a id="49552" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="49554" href="Demos.HSP.html#6180" class="Bound">ùëÜ</a> <a id="49556" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a><a id="49557" class="Symbol">)(</a><a id="49559" href="Demos.HSP.html#49559" class="Bound">t</a> <a id="49561" class="Symbol">:</a> <a id="49563" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a> <a id="49565" href="Demos.HSP.html#6180" class="Bound">ùëÜ</a> <a id="49567" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a> <a id="49569" href="Demos.HSP.html#49548" class="Bound">f</a> <a id="49571" class="Symbol">‚Üí</a> <a id="49573" href="Demos.HSP.html#49483" class="Datatype">Term</a> <a id="49578" href="Demos.HSP.html#49489" class="Bound">X</a><a id="49579" class="Symbol">)</a> <a id="49581" class="Symbol">‚Üí</a> <a id="49583" href="Demos.HSP.html#49483" class="Datatype">Term</a> <a id="49588" href="Demos.HSP.html#49489" class="Bound">X</a>
</pre>

\paragraph*{The term algebra}
We enrich the \ad{Term} type to a setoid of  \ab{ùëÜ}-terms, which will ultimately
be used as the domain of an algebra, called the \emph{term algebra in the signature} \ab{ùëÜ}.
For this we need an equivalence relation on terms.

\ifshort\else
<pre class="Agda">

<a id="49886" class="Keyword">module</a> <a id="49893" href="Demos.HSP.html#49893" class="Module">_</a> <a id="49895" class="Symbol">{</a><a id="49896" href="Demos.HSP.html#49896" class="Bound">X</a> <a id="49898" class="Symbol">:</a> <a id="49900" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="49905" href="Demos.HSP.html#8441" class="Generalizable">œá</a> <a id="49907" class="Symbol">}</a> <a id="49909" class="Keyword">where</a>
</pre>
\fi
<pre class="Agda">

 <a id="49945" class="Keyword">data</a> <a id="49950" href="Demos.HSP.html#49950" class="Datatype Operator">_‚âÉ_</a> <a id="49954" class="Symbol">:</a> <a id="49956" href="Demos.HSP.html#49483" class="Datatype">Term</a> <a id="49961" href="Demos.HSP.html#49896" class="Bound">X</a> <a id="49963" class="Symbol">‚Üí</a> <a id="49965" href="Demos.HSP.html#49483" class="Datatype">Term</a> <a id="49970" href="Demos.HSP.html#49896" class="Bound">X</a> <a id="49972" class="Symbol">‚Üí</a> <a id="49974" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="49979" class="Symbol">(</a><a id="49980" href="Demos.HSP.html#44469" class="Function">ov</a> <a id="49983" href="Demos.HSP.html#49905" class="Bound">œá</a><a id="49984" class="Symbol">)</a> <a id="49986" class="Keyword">where</a>
  <a id="49994" href="Demos.HSP.html#49994" class="InductiveConstructor">rfl</a> <a id="49998" class="Symbol">:</a> <a id="50000" class="Symbol">{</a><a id="50001" href="Demos.HSP.html#50001" class="Bound">x</a> <a id="50003" href="Demos.HSP.html#50003" class="Bound">y</a> <a id="50005" class="Symbol">:</a> <a id="50007" href="Demos.HSP.html#49896" class="Bound">X</a><a id="50008" class="Symbol">}</a> <a id="50010" class="Symbol">‚Üí</a> <a id="50012" href="Demos.HSP.html#50001" class="Bound">x</a> <a id="50014" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">‚â°</a> <a id="50016" href="Demos.HSP.html#50003" class="Bound">y</a> <a id="50018" class="Symbol">‚Üí</a> <a id="50020" class="Symbol">(</a><a id="50021" href="Demos.HSP.html#49524" class="InductiveConstructor">‚Ñä</a> <a id="50023" href="Demos.HSP.html#50001" class="Bound">x</a><a id="50024" class="Symbol">)</a> <a id="50026" href="Demos.HSP.html#49950" class="Datatype Operator">‚âÉ</a> <a id="50028" class="Symbol">(</a><a id="50029" href="Demos.HSP.html#49524" class="InductiveConstructor">‚Ñä</a> <a id="50031" href="Demos.HSP.html#50003" class="Bound">y</a><a id="50032" class="Symbol">)</a>
  <a id="50036" href="Demos.HSP.html#50036" class="InductiveConstructor">gnl</a> <a id="50040" class="Symbol">:</a> <a id="50042" class="Symbol">‚àÄ</a> <a id="50044" class="Symbol">{</a><a id="50045" href="Demos.HSP.html#50045" class="Bound">f</a><a id="50046" class="Symbol">}{</a><a id="50048" href="Demos.HSP.html#50048" class="Bound">s</a> <a id="50050" href="Demos.HSP.html#50050" class="Bound">t</a> <a id="50052" class="Symbol">:</a> <a id="50054" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a> <a id="50056" href="Demos.HSP.html#6180" class="Bound">ùëÜ</a> <a id="50058" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a> <a id="50060" href="Demos.HSP.html#50045" class="Bound">f</a> <a id="50062" class="Symbol">‚Üí</a> <a id="50064" href="Demos.HSP.html#49483" class="Datatype">Term</a> <a id="50069" href="Demos.HSP.html#49896" class="Bound">X</a><a id="50070" class="Symbol">}</a> <a id="50072" class="Symbol">‚Üí</a> <a id="50074" class="Symbol">(‚àÄ</a> <a id="50077" href="Demos.HSP.html#50077" class="Bound">i</a> <a id="50079" class="Symbol">‚Üí</a> <a id="50081" class="Symbol">(</a><a id="50082" href="Demos.HSP.html#50048" class="Bound">s</a> <a id="50084" href="Demos.HSP.html#50077" class="Bound">i</a><a id="50085" class="Symbol">)</a> <a id="50087" href="Demos.HSP.html#49950" class="Datatype Operator">‚âÉ</a> <a id="50089" class="Symbol">(</a><a id="50090" href="Demos.HSP.html#50050" class="Bound">t</a> <a id="50092" href="Demos.HSP.html#50077" class="Bound">i</a><a id="50093" class="Symbol">))</a> <a id="50096" class="Symbol">‚Üí</a> <a id="50098" class="Symbol">(</a><a id="50099" href="Demos.HSP.html#49540" class="InductiveConstructor">node</a> <a id="50104" href="Demos.HSP.html#50045" class="Bound">f</a> <a id="50106" href="Demos.HSP.html#50048" class="Bound">s</a><a id="50107" class="Symbol">)</a> <a id="50109" href="Demos.HSP.html#49950" class="Datatype Operator">‚âÉ</a> <a id="50111" class="Symbol">(</a><a id="50112" href="Demos.HSP.html#49540" class="InductiveConstructor">node</a> <a id="50117" href="Demos.HSP.html#50045" class="Bound">f</a> <a id="50119" href="Demos.HSP.html#50050" class="Bound">t</a><a id="50120" class="Symbol">)</a>

</pre>
It is straightforward to show that \ad{\au{}‚âÉ\au{}} is an equivalence relation,
\ifshort
and we refer to this fact as \af{‚âÉ-isEquiv} below.
\else
as follows.

<pre class="Agda">

 <a id="50308" href="Demos.HSP.html#50308" class="Function">‚âÉ-isRefl</a>   <a id="50319" class="Symbol">:</a> <a id="50321" href="Relation.Binary.Definitions.html#1339" class="Function">Reflexive</a>      <a id="50336" href="Demos.HSP.html#49950" class="Datatype Operator">_‚âÉ_</a>
 <a id="50341" href="Demos.HSP.html#50308" class="Function">‚âÉ-isRefl</a> <a id="50350" class="Symbol">{</a><a id="50351" href="Demos.HSP.html#49524" class="InductiveConstructor">‚Ñä</a> <a id="50353" class="Symbol">_}</a> <a id="50356" class="Symbol">=</a> <a id="50358" href="Demos.HSP.html#49994" class="InductiveConstructor">rfl</a> <a id="50362" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a>
 <a id="50370" href="Demos.HSP.html#50308" class="Function">‚âÉ-isRefl</a> <a id="50379" class="Symbol">{</a><a id="50380" href="Demos.HSP.html#49540" class="InductiveConstructor">node</a> <a id="50385" class="Symbol">_</a> <a id="50387" class="Symbol">_}</a> <a id="50390" class="Symbol">=</a> <a id="50392" href="Demos.HSP.html#50036" class="InductiveConstructor">gnl</a> <a id="50396" class="Symbol">(Œª</a> <a id="50399" href="Demos.HSP.html#50399" class="Bound">_</a> <a id="50401" class="Symbol">‚Üí</a> <a id="50403" href="Demos.HSP.html#50308" class="Function">‚âÉ-isRefl</a><a id="50411" class="Symbol">)</a>

 <a id="50415" href="Demos.HSP.html#50415" class="Function">‚âÉ-isSym</a>    <a id="50426" class="Symbol">:</a> <a id="50428" href="Relation.Binary.Definitions.html#1498" class="Function">Symmetric</a>      <a id="50443" href="Demos.HSP.html#49950" class="Datatype Operator">_‚âÉ_</a>
 <a id="50448" href="Demos.HSP.html#50415" class="Function">‚âÉ-isSym</a> <a id="50456" class="Symbol">(</a><a id="50457" href="Demos.HSP.html#49994" class="InductiveConstructor">rfl</a> <a id="50461" href="Demos.HSP.html#50461" class="Bound">x</a><a id="50462" class="Symbol">)</a> <a id="50464" class="Symbol">=</a> <a id="50466" href="Demos.HSP.html#49994" class="InductiveConstructor">rfl</a> <a id="50470" class="Symbol">(</a><a id="50471" href="Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">‚â°.sym</a> <a id="50477" href="Demos.HSP.html#50461" class="Bound">x</a><a id="50478" class="Symbol">)</a>
 <a id="50481" href="Demos.HSP.html#50415" class="Function">‚âÉ-isSym</a> <a id="50489" class="Symbol">(</a><a id="50490" href="Demos.HSP.html#50036" class="InductiveConstructor">gnl</a> <a id="50494" href="Demos.HSP.html#50494" class="Bound">x</a><a id="50495" class="Symbol">)</a> <a id="50497" class="Symbol">=</a> <a id="50499" href="Demos.HSP.html#50036" class="InductiveConstructor">gnl</a> <a id="50503" class="Symbol">(Œª</a> <a id="50506" href="Demos.HSP.html#50506" class="Bound">i</a> <a id="50508" class="Symbol">‚Üí</a> <a id="50510" href="Demos.HSP.html#50415" class="Function">‚âÉ-isSym</a> <a id="50518" class="Symbol">(</a><a id="50519" href="Demos.HSP.html#50494" class="Bound">x</a> <a id="50521" href="Demos.HSP.html#50506" class="Bound">i</a><a id="50522" class="Symbol">))</a>

 <a id="50527" href="Demos.HSP.html#50527" class="Function">‚âÉ-isTrans</a>  <a id="50538" class="Symbol">:</a> <a id="50540" href="Relation.Binary.Definitions.html#1978" class="Function">Transitive</a>     <a id="50555" href="Demos.HSP.html#49950" class="Datatype Operator">_‚âÉ_</a>
 <a id="50560" href="Demos.HSP.html#50527" class="Function">‚âÉ-isTrans</a> <a id="50570" class="Symbol">(</a><a id="50571" href="Demos.HSP.html#49994" class="InductiveConstructor">rfl</a> <a id="50575" href="Demos.HSP.html#50575" class="Bound">x</a><a id="50576" class="Symbol">)</a> <a id="50578" class="Symbol">(</a><a id="50579" href="Demos.HSP.html#49994" class="InductiveConstructor">rfl</a> <a id="50583" href="Demos.HSP.html#50583" class="Bound">y</a><a id="50584" class="Symbol">)</a> <a id="50586" class="Symbol">=</a> <a id="50588" href="Demos.HSP.html#49994" class="InductiveConstructor">rfl</a> <a id="50592" class="Symbol">(</a><a id="50593" href="Relation.Binary.PropositionalEquality.Core.html#1729" class="Function">‚â°.trans</a> <a id="50601" href="Demos.HSP.html#50575" class="Bound">x</a> <a id="50603" href="Demos.HSP.html#50583" class="Bound">y</a><a id="50604" class="Symbol">)</a>
 <a id="50607" href="Demos.HSP.html#50527" class="Function">‚âÉ-isTrans</a> <a id="50617" class="Symbol">(</a><a id="50618" href="Demos.HSP.html#50036" class="InductiveConstructor">gnl</a> <a id="50622" href="Demos.HSP.html#50622" class="Bound">x</a><a id="50623" class="Symbol">)</a> <a id="50625" class="Symbol">(</a><a id="50626" href="Demos.HSP.html#50036" class="InductiveConstructor">gnl</a> <a id="50630" href="Demos.HSP.html#50630" class="Bound">y</a><a id="50631" class="Symbol">)</a> <a id="50633" class="Symbol">=</a> <a id="50635" href="Demos.HSP.html#50036" class="InductiveConstructor">gnl</a> <a id="50639" class="Symbol">(Œª</a> <a id="50642" href="Demos.HSP.html#50642" class="Bound">i</a> <a id="50644" class="Symbol">‚Üí</a> <a id="50646" href="Demos.HSP.html#50527" class="Function">‚âÉ-isTrans</a> <a id="50656" class="Symbol">(</a><a id="50657" href="Demos.HSP.html#50622" class="Bound">x</a> <a id="50659" href="Demos.HSP.html#50642" class="Bound">i</a><a id="50660" class="Symbol">)</a> <a id="50662" class="Symbol">(</a><a id="50663" href="Demos.HSP.html#50630" class="Bound">y</a> <a id="50665" href="Demos.HSP.html#50642" class="Bound">i</a><a id="50666" class="Symbol">))</a>

 <a id="50671" href="Demos.HSP.html#50671" class="Function">‚âÉ-isEquiv</a>  <a id="50682" class="Symbol">:</a> <a id="50684" href="Relation.Binary.Structures.html#1522" class="Record">IsEquivalence</a>  <a id="50699" href="Demos.HSP.html#49950" class="Datatype Operator">_‚âÉ_</a>
 <a id="50704" href="Demos.HSP.html#50671" class="Function">‚âÉ-isEquiv</a> <a id="50714" class="Symbol">=</a> <a id="50716" class="Keyword">record</a> <a id="50723" class="Symbol">{</a> <a id="50725" href="Relation.Binary.Structures.html#1568" class="Field">refl</a> <a id="50730" class="Symbol">=</a> <a id="50732" href="Demos.HSP.html#50308" class="Function">‚âÉ-isRefl</a> <a id="50741" class="Symbol">;</a> <a id="50743" href="Relation.Binary.Structures.html#1594" class="Field">sym</a> <a id="50747" class="Symbol">=</a> <a id="50749" href="Demos.HSP.html#50415" class="Function">‚âÉ-isSym</a> <a id="50757" class="Symbol">;</a> <a id="50759" href="Relation.Binary.Structures.html#1620" class="Field">trans</a> <a id="50765" class="Symbol">=</a> <a id="50767" href="Demos.HSP.html#50527" class="Function">‚âÉ-isTrans</a> <a id="50777" class="Symbol">}</a>
</pre>
\fi

We now define, for a given signature \ab{ùëÜ} and context \ab X,
%if the type \Term{X} is nonempty (equivalently, if \ab X or
%\aof{‚à£~\ab{ùëÜ}~‚à£} is nonempty), then
the algebraic structure \T{X}, known as the \defn{term algebra in} \ab{ùëÜ} \defn{over} \ab
X.  Terms are viewed as acting on other terms, so both the elements of the domain of \T{X}
and its basic operations are terms themselves. That is, for each operation symbol \ab
f : \aof{‚à£~\ab{ùëÜ}~‚à£}, we denote by \ab f~\aof{ÃÇ}~\T{X} the operation on \Term{X} that maps
each tuple of terms, say, \ab t : \aof{‚à•~\ab{ùëÜ}~‚à•} \ab f \as{‚Üí} \Term{X}, to the formal
term \ab f \ab t.
%We let \T{X} denote the term algebra in \ab{ùëÜ} over \ab X; it has universe \Term{X} and
%operations \ab f \aof{ÃÇ} (\T{X}), one for each symbol \ab f in \aof{‚à£~\ab{ùëÜ}~‚à£}.

<pre class="Agda">

<a id="TermSetoid"></a><a id="51606" href="Demos.HSP.html#51606" class="Function">TermSetoid</a> <a id="51617" class="Symbol">:</a> <a id="51619" class="Symbol">(</a><a id="51620" href="Demos.HSP.html#51620" class="Bound">X</a> <a id="51622" class="Symbol">:</a> <a id="51624" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="51629" href="Demos.HSP.html#8441" class="Generalizable">œá</a><a id="51630" class="Symbol">)</a> <a id="51632" class="Symbol">‚Üí</a> <a id="51634" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="51641" class="Symbol">_</a> <a id="51643" class="Symbol">_</a>
<a id="51645" href="Demos.HSP.html#51606" class="Function">TermSetoid</a> <a id="51656" href="Demos.HSP.html#51656" class="Bound">X</a> <a id="51658" class="Symbol">=</a> <a id="51660" class="Keyword">record</a> <a id="51667" class="Symbol">{</a> <a id="51669" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="51677" class="Symbol">=</a> <a id="51679" href="Demos.HSP.html#49483" class="Datatype">Term</a> <a id="51684" href="Demos.HSP.html#51656" class="Bound">X</a> <a id="51686" class="Symbol">;</a> <a id="51688" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="51692" class="Symbol">=</a> <a id="51694" href="Demos.HSP.html#49950" class="Datatype Operator">_‚âÉ_</a> <a id="51698" class="Symbol">;</a> <a id="51700" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="51714" class="Symbol">=</a> <a id="51716" href="Demos.HSP.html#50671" class="Function">‚âÉ-isEquiv</a> <a id="51726" class="Symbol">}</a>

<a id="ùëª"></a><a id="51729" href="Demos.HSP.html#51729" class="Function">ùëª</a> <a id="51731" class="Symbol">:</a> <a id="51733" class="Symbol">(</a><a id="51734" href="Demos.HSP.html#51734" class="Bound">X</a> <a id="51736" class="Symbol">:</a> <a id="51738" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="51743" href="Demos.HSP.html#8441" class="Generalizable">œá</a><a id="51744" class="Symbol">)</a> <a id="51746" class="Symbol">‚Üí</a> <a id="51748" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="51756" class="Symbol">(</a><a id="51757" href="Demos.HSP.html#44469" class="Function">ov</a> <a id="51760" href="Demos.HSP.html#8441" class="Generalizable">œá</a><a id="51761" class="Symbol">)</a> <a id="51763" class="Symbol">(</a><a id="51764" href="Demos.HSP.html#44469" class="Function">ov</a> <a id="51767" href="Demos.HSP.html#8441" class="Generalizable">œá</a><a id="51768" class="Symbol">)</a>
<a id="51770" href="Demos.HSP.html#22892" class="Field">Algebra.Domain</a> <a id="51785" class="Symbol">(</a><a id="51786" href="Demos.HSP.html#51729" class="Function">ùëª</a> <a id="51788" href="Demos.HSP.html#51788" class="Bound">X</a><a id="51789" class="Symbol">)</a> <a id="51791" class="Symbol">=</a> <a id="51793" href="Demos.HSP.html#51606" class="Function">TermSetoid</a> <a id="51804" href="Demos.HSP.html#51788" class="Bound">X</a>
<a id="51806" href="Demos.HSP.html#22921" class="Field">Algebra.Interp</a> <a id="51821" class="Symbol">(</a><a id="51822" href="Demos.HSP.html#51729" class="Function">ùëª</a> <a id="51824" href="Demos.HSP.html#51824" class="Bound">X</a><a id="51825" class="Symbol">)</a> <a id="51827" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="51831" class="Symbol">(</a><a id="51832" href="Demos.HSP.html#51832" class="Bound">f</a> <a id="51834" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="51836" href="Demos.HSP.html#51836" class="Bound">ts</a><a id="51838" class="Symbol">)</a> <a id="51840" class="Symbol">=</a> <a id="51842" href="Demos.HSP.html#49540" class="InductiveConstructor">node</a> <a id="51847" href="Demos.HSP.html#51832" class="Bound">f</a> <a id="51849" href="Demos.HSP.html#51836" class="Bound">ts</a>
<a id="51852" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="51857" class="Symbol">(</a><a id="51858" href="Demos.HSP.html#22921" class="Field">Algebra.Interp</a> <a id="51873" class="Symbol">(</a><a id="51874" href="Demos.HSP.html#51729" class="Function">ùëª</a> <a id="51876" href="Demos.HSP.html#51876" class="Bound">X</a><a id="51877" class="Symbol">))</a> <a id="51880" class="Symbol">(</a><a id="51881" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="51888" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="51890" href="Demos.HSP.html#51890" class="Bound">ss‚âÉts</a><a id="51895" class="Symbol">)</a> <a id="51897" class="Symbol">=</a> <a id="51899" href="Demos.HSP.html#50036" class="InductiveConstructor">gnl</a> <a id="51903" href="Demos.HSP.html#51890" class="Bound">ss‚âÉts</a>
</pre>

\paragraph*{Substitution, environments and interpretation of terms}
The approach to formalizing these three concepts is based on similar code developed by
Andreas Abel to formalize Birkhoff's completeness theorem~\cite{Abel:2021}.
\ifshort\else

Recall that the domain of an algebra \ab{ùë®} is a setoid, which we denote by
\af{ùîª[~\ab{ùë®}~]}, whose \afld{Carrier} is the carrier of the algebra, \af{ùïå[~\ab{ùë®}~]},
and whose equivalence relation represents equality of elements in \af{ùïå[~\ab{ùë®}~]}.
\fi
\af{Sub} performs substitution from one context to
another.  Specifically, if \ab X and \ab Y are contexts, then \af{Sub} \ab X \ab Y
assigns a term in \ab X to each symbol in \ab Y.
A substitution \ab{œÉ} applied to a term \ab t is denoted by \af{[~\ab{œÉ}~]} \ab t.

<pre class="Agda">

<a id="Sub"></a><a id="52700" href="Demos.HSP.html#52700" class="Function">Sub</a> <a id="52704" class="Symbol">:</a> <a id="52706" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="52711" href="Demos.HSP.html#8441" class="Generalizable">œá</a> <a id="52713" class="Symbol">‚Üí</a> <a id="52715" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="52720" href="Demos.HSP.html#8441" class="Generalizable">œá</a> <a id="52722" class="Symbol">‚Üí</a> <a id="52724" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="52729" class="Symbol">_</a>
<a id="52731" href="Demos.HSP.html#52700" class="Function">Sub</a> <a id="52735" href="Demos.HSP.html#52735" class="Bound">X</a> <a id="52737" href="Demos.HSP.html#52737" class="Bound">Y</a> <a id="52739" class="Symbol">=</a> <a id="52741" class="Symbol">(</a><a id="52742" href="Demos.HSP.html#52742" class="Bound">y</a> <a id="52744" class="Symbol">:</a> <a id="52746" href="Demos.HSP.html#52737" class="Bound">Y</a><a id="52747" class="Symbol">)</a> <a id="52749" class="Symbol">‚Üí</a> <a id="52751" href="Demos.HSP.html#49483" class="Datatype">Term</a> <a id="52756" href="Demos.HSP.html#52735" class="Bound">X</a>

<a id="[_]_"></a><a id="52759" href="Demos.HSP.html#52759" class="Function Operator">[_]_</a> <a id="52764" class="Symbol">:</a> <a id="52766" class="Symbol">{</a><a id="52767" href="Demos.HSP.html#52767" class="Bound">X</a> <a id="52769" href="Demos.HSP.html#52769" class="Bound">Y</a> <a id="52771" class="Symbol">:</a> <a id="52773" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="52778" href="Demos.HSP.html#8441" class="Generalizable">œá</a><a id="52779" class="Symbol">}</a> <a id="52781" class="Symbol">‚Üí</a> <a id="52783" href="Demos.HSP.html#52700" class="Function">Sub</a> <a id="52787" href="Demos.HSP.html#52767" class="Bound">X</a> <a id="52789" href="Demos.HSP.html#52769" class="Bound">Y</a> <a id="52791" class="Symbol">‚Üí</a> <a id="52793" href="Demos.HSP.html#49483" class="Datatype">Term</a> <a id="52798" href="Demos.HSP.html#52769" class="Bound">Y</a> <a id="52800" class="Symbol">‚Üí</a> <a id="52802" href="Demos.HSP.html#49483" class="Datatype">Term</a> <a id="52807" href="Demos.HSP.html#52767" class="Bound">X</a>
<a id="52809" href="Demos.HSP.html#52759" class="Function Operator">[</a> <a id="52811" href="Demos.HSP.html#52811" class="Bound">œÉ</a> <a id="52813" href="Demos.HSP.html#52759" class="Function Operator">]</a> <a id="52815" class="Symbol">(</a><a id="52816" href="Demos.HSP.html#49524" class="InductiveConstructor">‚Ñä</a> <a id="52818" href="Demos.HSP.html#52818" class="Bound">x</a><a id="52819" class="Symbol">)</a> <a id="52821" class="Symbol">=</a> <a id="52823" href="Demos.HSP.html#52811" class="Bound">œÉ</a> <a id="52825" href="Demos.HSP.html#52818" class="Bound">x</a>
<a id="52827" href="Demos.HSP.html#52759" class="Function Operator">[</a> <a id="52829" href="Demos.HSP.html#52829" class="Bound">œÉ</a> <a id="52831" href="Demos.HSP.html#52759" class="Function Operator">]</a> <a id="52833" class="Symbol">(</a><a id="52834" href="Demos.HSP.html#49540" class="InductiveConstructor">node</a> <a id="52839" href="Demos.HSP.html#52839" class="Bound">f</a> <a id="52841" href="Demos.HSP.html#52841" class="Bound">ts</a><a id="52843" class="Symbol">)</a> <a id="52845" class="Symbol">=</a> <a id="52847" href="Demos.HSP.html#49540" class="InductiveConstructor">node</a> <a id="52852" href="Demos.HSP.html#52839" class="Bound">f</a> <a id="52854" class="Symbol">(Œª</a> <a id="52857" href="Demos.HSP.html#52857" class="Bound">i</a> <a id="52859" class="Symbol">‚Üí</a> <a id="52861" href="Demos.HSP.html#52759" class="Function Operator">[</a> <a id="52863" href="Demos.HSP.html#52829" class="Bound">œÉ</a> <a id="52865" href="Demos.HSP.html#52759" class="Function Operator">]</a> <a id="52867" class="Symbol">(</a><a id="52868" href="Demos.HSP.html#52841" class="Bound">ts</a> <a id="52871" href="Demos.HSP.html#52857" class="Bound">i</a><a id="52872" class="Symbol">))</a>

</pre>

Fix a signature \ab{ùëÜ}, a context \ab X, and an \ab{ùëÜ}-algebra \ab{ùë®}.
An \defn{environment} \ab{ùë®} for \ab X is an \ab X indexed family of setoids,
where the equivalence is taken pointwise.

<pre class="Agda">

<a id="53094" class="Keyword">module</a> <a id="Environment"></a><a id="53101" href="Demos.HSP.html#53101" class="Module">Environment</a> <a id="53113" class="Symbol">(</a><a id="53114" href="Demos.HSP.html#53114" class="Bound">ùë®</a> <a id="53116" class="Symbol">:</a> <a id="53118" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="53126" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="53128" href="Demos.HSP.html#8443" class="Generalizable">‚Ñì</a><a id="53129" class="Symbol">)</a> <a id="53131" class="Keyword">where</a>
 <a id="53138" class="Keyword">open</a> <a id="53143" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="53150" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="53153" href="Demos.HSP.html#53114" class="Bound">ùë®</a> <a id="53155" href="Demos.HSP.html#23785" class="Function Operator">]</a> <a id="53157" class="Keyword">using</a> <a id="53163" class="Symbol">(</a> <a id="53165" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="53169" class="Symbol">;</a> <a id="53171" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="53176" class="Symbol">;</a> <a id="53178" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="53182" class="Symbol">;</a> <a id="53184" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="53190" class="Symbol">)</a>

 <a id="Environment.Env"></a><a id="53194" href="Demos.HSP.html#53194" class="Function">Env</a> <a id="53198" class="Symbol">:</a> <a id="53200" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="53205" href="Demos.HSP.html#8441" class="Generalizable">œá</a> <a id="53207" class="Symbol">‚Üí</a> <a id="53209" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="53216" class="Symbol">_</a> <a id="53218" class="Symbol">_</a>
 <a id="53221" href="Demos.HSP.html#53194" class="Function">Env</a> <a id="53225" href="Demos.HSP.html#53225" class="Bound">X</a> <a id="53227" class="Symbol">=</a> <a id="53229" class="Keyword">record</a>  <a id="53237" class="Symbol">{</a> <a id="53239" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="53247" class="Symbol">=</a> <a id="53249" href="Demos.HSP.html#53225" class="Bound">X</a> <a id="53251" class="Symbol">‚Üí</a> <a id="53253" href="Demos.HSP.html#23838" class="Function Operator">ùïå[</a> <a id="53256" href="Demos.HSP.html#53114" class="Bound">ùë®</a> <a id="53258" href="Demos.HSP.html#23838" class="Function Operator">]</a>
                 <a id="53277" class="Symbol">;</a> <a id="53279" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="53283" class="Symbol">=</a> <a id="53285" class="Symbol">Œª</a> <a id="53287" href="Demos.HSP.html#53287" class="Bound">œÅ</a> <a id="53289" href="Demos.HSP.html#53289" class="Bound">œÑ</a> <a id="53291" class="Symbol">‚Üí</a> <a id="53293" class="Symbol">(</a><a id="53294" href="Demos.HSP.html#53294" class="Bound">x</a> <a id="53296" class="Symbol">:</a> <a id="53298" href="Demos.HSP.html#53225" class="Bound">X</a><a id="53299" class="Symbol">)</a> <a id="53301" class="Symbol">‚Üí</a> <a id="53303" href="Demos.HSP.html#53287" class="Bound">œÅ</a> <a id="53305" href="Demos.HSP.html#53294" class="Bound">x</a> <a id="53307" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a> <a id="53309" href="Demos.HSP.html#53289" class="Bound">œÑ</a> <a id="53311" href="Demos.HSP.html#53294" class="Bound">x</a>
                 <a id="53330" class="Symbol">;</a> <a id="53332" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="53346" class="Symbol">=</a> <a id="53348" class="Keyword">record</a>  <a id="53356" class="Symbol">{</a> <a id="53358" href="Relation.Binary.Structures.html#1568" class="Field">refl</a>   <a id="53365" class="Symbol">=</a> <a id="53367" class="Symbol">Œª</a> <a id="53369" href="Demos.HSP.html#53369" class="Bound">_</a>      <a id="53376" class="Symbol">‚Üí</a> <a id="53378" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>
                                           <a id="53426" class="Symbol">;</a> <a id="53428" href="Relation.Binary.Structures.html#1594" class="Field">sym</a>    <a id="53435" class="Symbol">=</a> <a id="53437" class="Symbol">Œª</a> <a id="53439" href="Demos.HSP.html#53439" class="Bound">h</a> <a id="53441" href="Demos.HSP.html#53441" class="Bound">x</a>    <a id="53446" class="Symbol">‚Üí</a> <a id="53448" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="53452" class="Symbol">(</a><a id="53453" href="Demos.HSP.html#53439" class="Bound">h</a> <a id="53455" href="Demos.HSP.html#53441" class="Bound">x</a><a id="53456" class="Symbol">)</a>
                                           <a id="53501" class="Symbol">;</a> <a id="53503" href="Relation.Binary.Structures.html#1620" class="Field">trans</a>  <a id="53510" class="Symbol">=</a> <a id="53512" class="Symbol">Œª</a> <a id="53514" href="Demos.HSP.html#53514" class="Bound">g</a> <a id="53516" href="Demos.HSP.html#53516" class="Bound">h</a> <a id="53518" href="Demos.HSP.html#53518" class="Bound">x</a>  <a id="53521" class="Symbol">‚Üí</a> <a id="53523" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="53529" class="Symbol">(</a><a id="53530" href="Demos.HSP.html#53514" class="Bound">g</a> <a id="53532" href="Demos.HSP.html#53518" class="Bound">x</a><a id="53533" class="Symbol">)(</a><a id="53535" href="Demos.HSP.html#53516" class="Bound">h</a> <a id="53537" href="Demos.HSP.html#53518" class="Bound">x</a><a id="53538" class="Symbol">)</a> <a id="53540" class="Symbol">}}</a>

</pre>
As the above definition, as well as the next, are relative a fixed algebra, we use
a submodule to succinctly capture this commonality in the definitions.
The function \af{‚ü¶\au{}‚üß} then denotes the \defn{interpretation} of
a term in a given algebra, \emph{evaluated} in a given environment.

<pre class="Agda">

 <a id="Environment.‚ü¶_‚üß"></a><a id="53861" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶_‚üß</a> <a id="53865" class="Symbol">:</a> <a id="53867" class="Symbol">{</a><a id="53868" href="Demos.HSP.html#53868" class="Bound">X</a> <a id="53870" class="Symbol">:</a> <a id="53872" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="53877" href="Demos.HSP.html#8441" class="Generalizable">œá</a><a id="53878" class="Symbol">}(</a><a id="53880" href="Demos.HSP.html#53880" class="Bound">t</a> <a id="53882" class="Symbol">:</a> <a id="53884" href="Demos.HSP.html#49483" class="Datatype">Term</a> <a id="53889" href="Demos.HSP.html#53868" class="Bound">X</a><a id="53890" class="Symbol">)</a> <a id="53892" class="Symbol">‚Üí</a> <a id="53894" class="Symbol">(</a><a id="53895" href="Demos.HSP.html#53194" class="Function">Env</a> <a id="53899" href="Demos.HSP.html#53868" class="Bound">X</a><a id="53900" class="Symbol">)</a> <a id="53902" href="Demos.HSP.html#7491" class="Record Operator">‚ü∂</a> <a id="53904" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="53907" href="Demos.HSP.html#53114" class="Bound">ùë®</a> <a id="53909" href="Demos.HSP.html#23785" class="Function Operator">]</a>
 <a id="53912" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶</a> <a id="53914" href="Demos.HSP.html#49524" class="InductiveConstructor">‚Ñä</a> <a id="53916" href="Demos.HSP.html#53916" class="Bound">x</a> <a id="53918" href="Demos.HSP.html#53861" class="Function Operator">‚üß</a>          <a id="53929" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="53933" href="Demos.HSP.html#53933" class="Bound">œÅ</a>    <a id="53938" class="Symbol">=</a> <a id="53940" href="Demos.HSP.html#53933" class="Bound">œÅ</a> <a id="53942" href="Demos.HSP.html#53916" class="Bound">x</a>
 <a id="53945" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶</a> <a id="53947" href="Demos.HSP.html#49540" class="InductiveConstructor">node</a> <a id="53952" href="Demos.HSP.html#53952" class="Bound">f</a> <a id="53954" href="Demos.HSP.html#53954" class="Bound">args</a> <a id="53959" href="Demos.HSP.html#53861" class="Function Operator">‚üß</a>  <a id="53962" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="53966" href="Demos.HSP.html#53966" class="Bound">œÅ</a>    <a id="53971" class="Symbol">=</a> <a id="53973" class="Symbol">(</a><a id="53974" href="Demos.HSP.html#22921" class="Field">Interp</a> <a id="53981" href="Demos.HSP.html#53114" class="Bound">ùë®</a><a id="53982" class="Symbol">)</a> <a id="53984" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="53988" class="Symbol">(</a><a id="53989" href="Demos.HSP.html#53952" class="Bound">f</a> <a id="53991" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="53993" class="Symbol">Œª</a> <a id="53995" href="Demos.HSP.html#53995" class="Bound">i</a> <a id="53997" class="Symbol">‚Üí</a> <a id="53999" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶</a> <a id="54001" href="Demos.HSP.html#53954" class="Bound">args</a> <a id="54006" href="Demos.HSP.html#53995" class="Bound">i</a> <a id="54008" href="Demos.HSP.html#53861" class="Function Operator">‚üß</a> <a id="54010" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="54014" href="Demos.HSP.html#53966" class="Bound">œÅ</a><a id="54015" class="Symbol">)</a>
 <a id="54018" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="54023" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶</a> <a id="54025" href="Demos.HSP.html#49524" class="InductiveConstructor">‚Ñä</a> <a id="54027" href="Demos.HSP.html#54027" class="Bound">x</a> <a id="54029" href="Demos.HSP.html#53861" class="Function Operator">‚üß</a> <a id="54031" href="Demos.HSP.html#54031" class="Bound">u‚âàv</a>          <a id="54044" class="Symbol">=</a> <a id="54046" href="Demos.HSP.html#54031" class="Bound">u‚âàv</a> <a id="54050" href="Demos.HSP.html#54027" class="Bound">x</a>
 <a id="54053" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="54058" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶</a> <a id="54060" href="Demos.HSP.html#49540" class="InductiveConstructor">node</a> <a id="54065" href="Demos.HSP.html#54065" class="Bound">f</a> <a id="54067" href="Demos.HSP.html#54067" class="Bound">args</a> <a id="54072" href="Demos.HSP.html#53861" class="Function Operator">‚üß</a> <a id="54074" href="Demos.HSP.html#54074" class="Bound">x‚âày</a>  <a id="54079" class="Symbol">=</a> <a id="54081" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="54086" class="Symbol">(</a><a id="54087" href="Demos.HSP.html#22921" class="Field">Interp</a> <a id="54094" href="Demos.HSP.html#53114" class="Bound">ùë®</a><a id="54095" class="Symbol">)(</a><a id="54097" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="54104" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="54106" class="Symbol">Œª</a> <a id="54108" href="Demos.HSP.html#54108" class="Bound">i</a> <a id="54110" class="Symbol">‚Üí</a> <a id="54112" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="54117" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶</a> <a id="54119" href="Demos.HSP.html#54067" class="Bound">args</a> <a id="54124" href="Demos.HSP.html#54108" class="Bound">i</a> <a id="54126" href="Demos.HSP.html#53861" class="Function Operator">‚üß</a> <a id="54128" href="Demos.HSP.html#54074" class="Bound">x‚âày</a> <a id="54132" class="Symbol">)</a>

</pre>

Two terms are proclaimed \defn{equal} if they are equal for all
environments.  We represent this equivalence of terms
\ifshort\else
and proof that it is an equivalence relation,
\fi
as follows.

<pre class="Agda">

 <a id="Environment.Equal"></a><a id="54357" href="Demos.HSP.html#54357" class="Function">Equal</a> <a id="54363" class="Symbol">:</a> <a id="54365" class="Symbol">{</a><a id="54366" href="Demos.HSP.html#54366" class="Bound">X</a> <a id="54368" class="Symbol">:</a> <a id="54370" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="54375" href="Demos.HSP.html#8441" class="Generalizable">œá</a><a id="54376" class="Symbol">}(</a><a id="54378" href="Demos.HSP.html#54378" class="Bound">s</a> <a id="54380" href="Demos.HSP.html#54380" class="Bound">t</a> <a id="54382" class="Symbol">:</a> <a id="54384" href="Demos.HSP.html#49483" class="Datatype">Term</a> <a id="54389" href="Demos.HSP.html#54366" class="Bound">X</a><a id="54390" class="Symbol">)</a> <a id="54392" class="Symbol">‚Üí</a> <a id="54394" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="54399" class="Symbol">_</a>
 <a id="54402" href="Demos.HSP.html#54357" class="Function">Equal</a> <a id="54408" class="Symbol">{</a><a id="54409" class="Argument">X</a> <a id="54411" class="Symbol">=</a> <a id="54413" href="Demos.HSP.html#54413" class="Bound">X</a><a id="54414" class="Symbol">}</a> <a id="54416" href="Demos.HSP.html#54416" class="Bound">s</a> <a id="54418" href="Demos.HSP.html#54418" class="Bound">t</a> <a id="54420" class="Symbol">=</a> <a id="54422" class="Symbol">‚àÄ</a> <a id="54424" class="Symbol">(</a><a id="54425" href="Demos.HSP.html#54425" class="Bound">œÅ</a> <a id="54427" class="Symbol">:</a> <a id="54429" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="54437" class="Symbol">(</a><a id="54438" href="Demos.HSP.html#53194" class="Function">Env</a> <a id="54442" href="Demos.HSP.html#54413" class="Bound">X</a><a id="54443" class="Symbol">))</a> <a id="54446" class="Symbol">‚Üí</a> <a id="54448" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶</a> <a id="54450" href="Demos.HSP.html#54416" class="Bound">s</a> <a id="54452" href="Demos.HSP.html#53861" class="Function Operator">‚üß</a> <a id="54454" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="54458" href="Demos.HSP.html#54425" class="Bound">œÅ</a> <a id="54460" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a> <a id="54462" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶</a> <a id="54464" href="Demos.HSP.html#54418" class="Bound">t</a> <a id="54466" href="Demos.HSP.html#53861" class="Function Operator">‚üß</a> <a id="54468" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="54472" href="Demos.HSP.html#54425" class="Bound">œÅ</a>

</pre>
\ifshort
Proof that \af{Equal} is an equivalence relation, and that the implication \ab
s~\af{‚âÉ}~\ab t \as{‚Üí} \af{Equal} \ab s \ab t holds for all terms \ab s and \ab t, is
straightforward (\seemedium).
(We denote these by \af{EqualIsEquiv} and \af{‚âÉ‚ÜíEqual} in the sequel.)
\else
<pre class="Agda">
 <a id="Environment.‚âÉ‚ÜíEqual"></a><a id="54780" href="Demos.HSP.html#54780" class="Function">‚âÉ‚ÜíEqual</a> <a id="54788" class="Symbol">:</a> <a id="54790" class="Symbol">{</a><a id="54791" href="Demos.HSP.html#54791" class="Bound">X</a> <a id="54793" class="Symbol">:</a> <a id="54795" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="54800" href="Demos.HSP.html#8441" class="Generalizable">œá</a><a id="54801" class="Symbol">}(</a><a id="54803" href="Demos.HSP.html#54803" class="Bound">s</a> <a id="54805" href="Demos.HSP.html#54805" class="Bound">t</a> <a id="54807" class="Symbol">:</a> <a id="54809" href="Demos.HSP.html#49483" class="Datatype">Term</a> <a id="54814" href="Demos.HSP.html#54791" class="Bound">X</a><a id="54815" class="Symbol">)</a> <a id="54817" class="Symbol">‚Üí</a> <a id="54819" href="Demos.HSP.html#54803" class="Bound">s</a> <a id="54821" href="Demos.HSP.html#49950" class="Datatype Operator">‚âÉ</a> <a id="54823" href="Demos.HSP.html#54805" class="Bound">t</a> <a id="54825" class="Symbol">‚Üí</a> <a id="54827" href="Demos.HSP.html#54357" class="Function">Equal</a> <a id="54833" href="Demos.HSP.html#54803" class="Bound">s</a> <a id="54835" href="Demos.HSP.html#54805" class="Bound">t</a>
 <a id="54838" href="Demos.HSP.html#54780" class="Function">‚âÉ‚ÜíEqual</a> <a id="54846" class="DottedPattern Symbol">.(</a><a id="54848" href="Demos.HSP.html#49524" class="DottedPattern InductiveConstructor">‚Ñä</a> <a id="54850" class="DottedPattern Symbol">_)</a> <a id="54853" class="DottedPattern Symbol">.(</a><a id="54855" href="Demos.HSP.html#49524" class="DottedPattern InductiveConstructor">‚Ñä</a> <a id="54857" class="DottedPattern Symbol">_)</a> <a id="54860" class="Symbol">(</a><a id="54861" href="Demos.HSP.html#49994" class="InductiveConstructor">rfl</a> <a id="54865" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a><a id="54871" class="Symbol">)</a> <a id="54873" class="Symbol">=</a> <a id="54875" class="Symbol">Œª</a> <a id="54877" href="Demos.HSP.html#54877" class="Bound">_</a> <a id="54879" class="Symbol">‚Üí</a> <a id="54881" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>
 <a id="54887" href="Demos.HSP.html#54780" class="Function">‚âÉ‚ÜíEqual</a> <a id="54895" class="Symbol">(</a><a id="54896" href="Demos.HSP.html#49540" class="InductiveConstructor">node</a> <a id="54901" class="Symbol">_</a> <a id="54903" href="Demos.HSP.html#54903" class="Bound">s</a><a id="54904" class="Symbol">)(</a><a id="54906" href="Demos.HSP.html#49540" class="InductiveConstructor">node</a> <a id="54911" class="Symbol">_</a> <a id="54913" href="Demos.HSP.html#54913" class="Bound">t</a><a id="54914" class="Symbol">)(</a><a id="54916" href="Demos.HSP.html#50036" class="InductiveConstructor">gnl</a> <a id="54920" href="Demos.HSP.html#54920" class="Bound">x</a><a id="54921" class="Symbol">)</a> <a id="54923" class="Symbol">=</a>
  <a id="54927" class="Symbol">Œª</a> <a id="54929" href="Demos.HSP.html#54929" class="Bound">œÅ</a> <a id="54931" class="Symbol">‚Üí</a> <a id="54933" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="54938" class="Symbol">(</a><a id="54939" href="Demos.HSP.html#22921" class="Field">Interp</a> <a id="54946" href="Demos.HSP.html#53114" class="Bound">ùë®</a><a id="54947" class="Symbol">)(</a><a id="54949" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="54956" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="54958" class="Symbol">Œª</a> <a id="54960" href="Demos.HSP.html#54960" class="Bound">i</a> <a id="54962" class="Symbol">‚Üí</a> <a id="54964" href="Demos.HSP.html#54780" class="Function">‚âÉ‚ÜíEqual</a><a id="54971" class="Symbol">(</a><a id="54972" href="Demos.HSP.html#54903" class="Bound">s</a> <a id="54974" href="Demos.HSP.html#54960" class="Bound">i</a><a id="54975" class="Symbol">)(</a><a id="54977" href="Demos.HSP.html#54913" class="Bound">t</a> <a id="54979" href="Demos.HSP.html#54960" class="Bound">i</a><a id="54980" class="Symbol">)(</a><a id="54982" href="Demos.HSP.html#54920" class="Bound">x</a> <a id="54984" href="Demos.HSP.html#54960" class="Bound">i</a><a id="54985" class="Symbol">)</a><a id="54986" href="Demos.HSP.html#54929" class="Bound">œÅ</a> <a id="54988" class="Symbol">)</a>

 <a id="Environment.EqualIsEquiv"></a><a id="54992" href="Demos.HSP.html#54992" class="Function">EqualIsEquiv</a> <a id="55005" class="Symbol">:</a> <a id="55007" class="Symbol">{</a><a id="55008" href="Demos.HSP.html#55008" class="Bound">Œì</a> <a id="55010" class="Symbol">:</a> <a id="55012" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="55017" href="Demos.HSP.html#8441" class="Generalizable">œá</a><a id="55018" class="Symbol">}</a> <a id="55020" class="Symbol">‚Üí</a> <a id="55022" href="Relation.Binary.Structures.html#1522" class="Record">IsEquivalence</a> <a id="55036" class="Symbol">(</a><a id="55037" href="Demos.HSP.html#54357" class="Function">Equal</a> <a id="55043" class="Symbol">{</a><a id="55044" class="Argument">X</a> <a id="55046" class="Symbol">=</a> <a id="55048" href="Demos.HSP.html#55008" class="Bound">Œì</a><a id="55049" class="Symbol">})</a>
 <a id="55053" href="Demos.HSP.html#7974" class="Field">refl·µâ</a>   <a id="55061" href="Demos.HSP.html#54992" class="Function">EqualIsEquiv</a> <a id="55074" class="Symbol">=</a> <a id="55076" class="Symbol">Œª</a> <a id="55078" href="Demos.HSP.html#55078" class="Bound">_</a>        <a id="55087" class="Symbol">‚Üí</a> <a id="55089" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>
 <a id="55095" href="Demos.HSP.html#8034" class="Field">sym·µâ</a>    <a id="55103" href="Demos.HSP.html#54992" class="Function">EqualIsEquiv</a> <a id="55116" class="Symbol">=</a> <a id="55118" class="Symbol">Œª</a> <a id="55120" href="Demos.HSP.html#55120" class="Bound">x=y</a> <a id="55124" href="Demos.HSP.html#55124" class="Bound">œÅ</a>    <a id="55129" class="Symbol">‚Üí</a> <a id="55131" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="55135" class="Symbol">(</a><a id="55136" href="Demos.HSP.html#55120" class="Bound">x=y</a> <a id="55140" href="Demos.HSP.html#55124" class="Bound">œÅ</a><a id="55141" class="Symbol">)</a>
 <a id="55144" href="Demos.HSP.html#8094" class="Field">trans·µâ</a>  <a id="55152" href="Demos.HSP.html#54992" class="Function">EqualIsEquiv</a> <a id="55165" class="Symbol">=</a> <a id="55167" class="Symbol">Œª</a> <a id="55169" href="Demos.HSP.html#55169" class="Bound">ij</a> <a id="55172" href="Demos.HSP.html#55172" class="Bound">jk</a> <a id="55175" href="Demos.HSP.html#55175" class="Bound">œÅ</a>  <a id="55178" class="Symbol">‚Üí</a> <a id="55180" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="55186" class="Symbol">(</a><a id="55187" href="Demos.HSP.html#55169" class="Bound">ij</a> <a id="55190" href="Demos.HSP.html#55175" class="Bound">œÅ</a><a id="55191" class="Symbol">)</a> <a id="55193" class="Symbol">(</a><a id="55194" href="Demos.HSP.html#55172" class="Bound">jk</a> <a id="55197" href="Demos.HSP.html#55175" class="Bound">œÅ</a><a id="55198" class="Symbol">)</a>

</pre>
\fi

We can then prove that substitution and evaluation commute.  More precisely,
applying substitution \ab{œÉ} to a term \ab{t}
and evaluating the result in environment \ab{œÅ} has the same effect as evaluating
\ab{t} in the environment \as{Œª} \ab x \as{‚Üí} \aof{‚ü¶~\ab{œÉ}~\ab{x}~‚üß}~\aofld{‚ü®\$‚ü©}
\ab{œÅ} (see~\cite{Abel:2021} or~\cite[Lem.~3.3.11]{Mitchell:1996}).

<pre class="Agda">

 <a id="Environment.substitution"></a><a id="55589" href="Demos.HSP.html#55589" class="Function">substitution</a> <a id="55602" class="Symbol">:</a>  <a id="55605" class="Symbol">{</a><a id="55606" href="Demos.HSP.html#55606" class="Bound">X</a> <a id="55608" href="Demos.HSP.html#55608" class="Bound">Y</a> <a id="55610" class="Symbol">:</a> <a id="55612" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="55617" href="Demos.HSP.html#8441" class="Generalizable">œá</a><a id="55618" class="Symbol">}</a> <a id="55620" class="Symbol">‚Üí</a> <a id="55622" class="Symbol">(</a><a id="55623" href="Demos.HSP.html#55623" class="Bound">t</a> <a id="55625" class="Symbol">:</a> <a id="55627" href="Demos.HSP.html#49483" class="Datatype">Term</a> <a id="55632" href="Demos.HSP.html#55608" class="Bound">Y</a><a id="55633" class="Symbol">)</a> <a id="55635" class="Symbol">(</a><a id="55636" href="Demos.HSP.html#55636" class="Bound">œÉ</a> <a id="55638" class="Symbol">:</a> <a id="55640" href="Demos.HSP.html#52700" class="Function">Sub</a> <a id="55644" href="Demos.HSP.html#55606" class="Bound">X</a> <a id="55646" href="Demos.HSP.html#55608" class="Bound">Y</a><a id="55647" class="Symbol">)</a> <a id="55649" class="Symbol">(</a><a id="55650" href="Demos.HSP.html#55650" class="Bound">œÅ</a> <a id="55652" class="Symbol">:</a> <a id="55654" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a><a id="55661" class="Symbol">(</a> <a id="55663" href="Demos.HSP.html#53194" class="Function">Env</a> <a id="55667" href="Demos.HSP.html#55606" class="Bound">X</a> <a id="55669" class="Symbol">)</a> <a id="55671" class="Symbol">)</a>
  <a id="55675" class="Symbol">‚Üí</a>              <a id="55690" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶</a> <a id="55692" href="Demos.HSP.html#52759" class="Function Operator">[</a> <a id="55694" href="Demos.HSP.html#55636" class="Bound">œÉ</a> <a id="55696" href="Demos.HSP.html#52759" class="Function Operator">]</a> <a id="55698" href="Demos.HSP.html#55623" class="Bound">t</a> <a id="55700" href="Demos.HSP.html#53861" class="Function Operator">‚üß</a> <a id="55702" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="55706" href="Demos.HSP.html#55650" class="Bound">œÅ</a> <a id="55708" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a> <a id="55710" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶</a> <a id="55712" href="Demos.HSP.html#55623" class="Bound">t</a> <a id="55714" href="Demos.HSP.html#53861" class="Function Operator">‚üß</a> <a id="55716" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="55720" class="Symbol">(Œª</a> <a id="55723" href="Demos.HSP.html#55723" class="Bound">x</a> <a id="55725" class="Symbol">‚Üí</a> <a id="55727" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶</a> <a id="55729" href="Demos.HSP.html#55636" class="Bound">œÉ</a> <a id="55731" href="Demos.HSP.html#55723" class="Bound">x</a> <a id="55733" href="Demos.HSP.html#53861" class="Function Operator">‚üß</a> <a id="55735" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="55739" href="Demos.HSP.html#55650" class="Bound">œÅ</a><a id="55740" class="Symbol">)</a>
 <a id="55743" href="Demos.HSP.html#55589" class="Function">substitution</a> <a id="55756" class="Symbol">(</a><a id="55757" href="Demos.HSP.html#49524" class="InductiveConstructor">‚Ñä</a> <a id="55759" href="Demos.HSP.html#55759" class="Bound">x</a><a id="55760" class="Symbol">)</a>        <a id="55769" href="Demos.HSP.html#55769" class="Bound">œÉ</a> <a id="55771" href="Demos.HSP.html#55771" class="Bound">œÅ</a> <a id="55773" class="Symbol">=</a> <a id="55775" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>
 <a id="55781" href="Demos.HSP.html#55589" class="Function">substitution</a> <a id="55794" class="Symbol">(</a><a id="55795" href="Demos.HSP.html#49540" class="InductiveConstructor">node</a> <a id="55800" href="Demos.HSP.html#55800" class="Bound">f</a> <a id="55802" href="Demos.HSP.html#55802" class="Bound">ts</a><a id="55804" class="Symbol">)</a>  <a id="55807" href="Demos.HSP.html#55807" class="Bound">œÉ</a> <a id="55809" href="Demos.HSP.html#55809" class="Bound">œÅ</a> <a id="55811" class="Symbol">=</a> <a id="55813" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="55818" class="Symbol">(</a><a id="55819" href="Demos.HSP.html#22921" class="Field">Interp</a> <a id="55826" href="Demos.HSP.html#53114" class="Bound">ùë®</a><a id="55827" class="Symbol">)(</a><a id="55829" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="55836" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="55838" class="Symbol">Œª</a> <a id="55840" href="Demos.HSP.html#55840" class="Bound">i</a> <a id="55842" class="Symbol">‚Üí</a> <a id="55844" href="Demos.HSP.html#55589" class="Function">substitution</a> <a id="55857" class="Symbol">(</a><a id="55858" href="Demos.HSP.html#55802" class="Bound">ts</a> <a id="55861" href="Demos.HSP.html#55840" class="Bound">i</a><a id="55862" class="Symbol">)</a> <a id="55864" href="Demos.HSP.html#55807" class="Bound">œÉ</a> <a id="55866" href="Demos.HSP.html#55809" class="Bound">œÅ</a><a id="55867" class="Symbol">)</a>

</pre>

\ifshort\else
\paragraph*{Compatibility of terms}
\fi
We need to formalize two more concepts involving terms.
The first is the assertion that every term commutes with every homomorphism (\af{comm-hom-term}), and
the second is the interpretation of a term in a product algebra (\af{interp-prod}).
<pre class="Agda">

<a id="56192" class="Keyword">module</a> <a id="56199" href="Demos.HSP.html#56199" class="Module">_</a> <a id="56201" class="Symbol">{</a><a id="56202" href="Demos.HSP.html#56202" class="Bound">X</a> <a id="56204" class="Symbol">:</a> <a id="56206" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="56211" href="Demos.HSP.html#8441" class="Generalizable">œá</a><a id="56212" class="Symbol">}{</a><a id="56214" href="Demos.HSP.html#56214" class="Bound">ùë®</a> <a id="56216" class="Symbol">:</a> <a id="56218" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="56226" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="56228" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="56230" class="Symbol">}{</a><a id="56232" href="Demos.HSP.html#56232" class="Bound">ùë©</a> <a id="56234" class="Symbol">:</a> <a id="56236" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="56244" href="Demos.HSP.html#8424" class="Generalizable">Œ≤</a> <a id="56246" href="Demos.HSP.html#8426" class="Generalizable">œÅ·µá</a><a id="56248" class="Symbol">}(</a><a id="56250" href="Demos.HSP.html#56250" class="Bound">hh</a> <a id="56253" class="Symbol">:</a> <a id="56255" href="Demos.HSP.html#32650" class="Function">hom</a> <a id="56259" href="Demos.HSP.html#56214" class="Bound">ùë®</a> <a id="56261" href="Demos.HSP.html#56232" class="Bound">ùë©</a><a id="56262" class="Symbol">)</a> <a id="56264" class="Keyword">where</a>
 <a id="56271" class="Keyword">open</a> <a id="56276" href="Demos.HSP.html#53101" class="Module">Environment</a> <a id="56288" href="Demos.HSP.html#56214" class="Bound">ùë®</a>                           <a id="56316" class="Keyword">using</a> <a id="56322" class="Symbol">(</a> <a id="56324" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶_‚üß</a>         <a id="56336" class="Symbol">)</a>
 <a id="56339" class="Keyword">open</a> <a id="56344" href="Demos.HSP.html#53101" class="Module">Environment</a> <a id="56356" href="Demos.HSP.html#56232" class="Bound">ùë©</a> <a id="56358" class="Keyword">renaming</a> <a id="56367" class="Symbol">(</a> <a id="56369" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶_‚üß</a> <a id="56373" class="Symbol">to</a> <a id="56376" class="Function Operator">‚ü¶_‚üß·¥Æ</a> <a id="56381" class="Symbol">)</a>  <a id="56384" class="Keyword">using</a> <a id="56390" class="Symbol">(</a>             <a id="56404" class="Symbol">)</a>
 <a id="56407" class="Keyword">open</a> <a id="56412" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="56419" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="56422" href="Demos.HSP.html#56232" class="Bound">ùë©</a> <a id="56424" href="Demos.HSP.html#23785" class="Function Operator">]</a>                           <a id="56452" class="Keyword">using</a> <a id="56458" class="Symbol">(</a> <a id="56460" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="56464" class="Symbol">;</a> <a id="56466" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>  <a id="56472" class="Symbol">)</a>
 <a id="56475" class="Keyword">private</a> <a id="56483" href="Demos.HSP.html#56483" class="Function">hfunc</a> <a id="56489" class="Symbol">=</a> <a id="56491" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="56493" href="Demos.HSP.html#56250" class="Bound">hh</a> <a id="56496" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="56498" class="Symbol">;</a> <a id="56500" href="Demos.HSP.html#56500" class="Function">h</a> <a id="56502" class="Symbol">=</a> <a id="56504" href="Demos.HSP.html#7592" class="Field Operator">_‚ü®$‚ü©_</a> <a id="56510" href="Demos.HSP.html#56483" class="Function">hfunc</a>

 <a id="56518" href="Demos.HSP.html#56518" class="Function">comm-hom-term</a> <a id="56532" class="Symbol">:</a> <a id="56534" class="Symbol">(</a><a id="56535" href="Demos.HSP.html#56535" class="Bound">t</a> <a id="56537" class="Symbol">:</a> <a id="56539" href="Demos.HSP.html#49483" class="Datatype">Term</a> <a id="56544" href="Demos.HSP.html#56202" class="Bound">X</a><a id="56545" class="Symbol">)</a> <a id="56547" class="Symbol">(</a><a id="56548" href="Demos.HSP.html#56548" class="Bound">a</a> <a id="56550" class="Symbol">:</a> <a id="56552" href="Demos.HSP.html#56202" class="Bound">X</a> <a id="56554" class="Symbol">‚Üí</a> <a id="56556" href="Demos.HSP.html#23838" class="Function Operator">ùïå[</a> <a id="56559" href="Demos.HSP.html#56214" class="Bound">ùë®</a> <a id="56561" href="Demos.HSP.html#23838" class="Function Operator">]</a><a id="56562" class="Symbol">)</a> <a id="56564" class="Symbol">‚Üí</a> <a id="56566" href="Demos.HSP.html#56500" class="Function">h</a> <a id="56568" class="Symbol">(</a><a id="56569" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶</a> <a id="56571" href="Demos.HSP.html#56535" class="Bound">t</a> <a id="56573" href="Demos.HSP.html#53861" class="Function Operator">‚üß</a> <a id="56575" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="56579" href="Demos.HSP.html#56548" class="Bound">a</a><a id="56580" class="Symbol">)</a> <a id="56582" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a> <a id="56584" href="Demos.HSP.html#56376" class="Function Operator">‚ü¶</a> <a id="56586" href="Demos.HSP.html#56535" class="Bound">t</a> <a id="56588" href="Demos.HSP.html#56376" class="Function Operator">‚üß·¥Æ</a> <a id="56591" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="56595" class="Symbol">(</a><a id="56596" href="Demos.HSP.html#56500" class="Function">h</a> <a id="56598" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="56600" href="Demos.HSP.html#56548" class="Bound">a</a><a id="56601" class="Symbol">)</a>
 <a id="56604" href="Demos.HSP.html#56518" class="Function">comm-hom-term</a> <a id="56618" class="Symbol">(</a><a id="56619" href="Demos.HSP.html#49524" class="InductiveConstructor">‚Ñä</a> <a id="56621" href="Demos.HSP.html#56621" class="Bound">x</a><a id="56622" class="Symbol">)</a> <a id="56624" href="Demos.HSP.html#56624" class="Bound">a</a>       <a id="56632" class="Symbol">=</a>     <a id="56638" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>
 <a id="56644" href="Demos.HSP.html#56518" class="Function">comm-hom-term</a> <a id="56658" class="Symbol">(</a><a id="56659" href="Demos.HSP.html#49540" class="InductiveConstructor">node</a> <a id="56664" href="Demos.HSP.html#56664" class="Bound">f</a> <a id="56666" href="Demos.HSP.html#56666" class="Bound">t</a><a id="56667" class="Symbol">)</a> <a id="56669" href="Demos.HSP.html#56669" class="Bound">a</a>  <a id="56672" class="Symbol">=</a>     <a id="56678" href="Relation.Binary.Reasoning.Base.Single.html#1916" class="Function Operator">begin</a>
  <a id="56686" href="Demos.HSP.html#56500" class="Function">h</a><a id="56687" class="Symbol">(</a><a id="56688" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶</a> <a id="56690" href="Demos.HSP.html#49540" class="InductiveConstructor">node</a> <a id="56695" href="Demos.HSP.html#56664" class="Bound">f</a> <a id="56697" href="Demos.HSP.html#56666" class="Bound">t</a> <a id="56699" href="Demos.HSP.html#53861" class="Function Operator">‚üß</a> <a id="56701" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="56705" href="Demos.HSP.html#56669" class="Bound">a</a><a id="56706" class="Symbol">)</a>            <a id="56719" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a> <a id="56722" href="Demos.HSP.html#32618" class="Field">compatible</a> <a id="56733" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a> <a id="56735" href="Demos.HSP.html#56250" class="Bound">hh</a> <a id="56738" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a> <a id="56740" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
  <a id="56744" class="Symbol">(</a><a id="56745" href="Demos.HSP.html#56664" class="Bound">f</a> <a id="56747" href="Demos.HSP.html#23896" class="Function Operator">ÃÇ</a> <a id="56749" href="Demos.HSP.html#56232" class="Bound">ùë©</a><a id="56750" class="Symbol">)(Œª</a> <a id="56754" href="Demos.HSP.html#56754" class="Bound">i</a> <a id="56756" class="Symbol">‚Üí</a> <a id="56758" href="Demos.HSP.html#56500" class="Function">h</a><a id="56759" class="Symbol">(</a><a id="56760" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶</a> <a id="56762" href="Demos.HSP.html#56666" class="Bound">t</a> <a id="56764" href="Demos.HSP.html#56754" class="Bound">i</a> <a id="56766" href="Demos.HSP.html#53861" class="Function Operator">‚üß</a> <a id="56768" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="56772" href="Demos.HSP.html#56669" class="Bound">a</a><a id="56773" class="Symbol">))</a>  <a id="56777" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a> <a id="56780" href="Function.Bundles.html#1938" class="Field">cong</a><a id="56784" class="Symbol">(</a><a id="56785" href="Demos.HSP.html#22921" class="Field">Interp</a> <a id="56792" href="Demos.HSP.html#56232" class="Bound">ùë©</a><a id="56793" class="Symbol">)(</a><a id="56795" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="56802" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="56804" class="Symbol">Œª</a> <a id="56806" href="Demos.HSP.html#56806" class="Bound">i</a> <a id="56808" class="Symbol">‚Üí</a> <a id="56810" href="Demos.HSP.html#56518" class="Function">comm-hom-term</a> <a id="56824" class="Symbol">(</a><a id="56825" href="Demos.HSP.html#56666" class="Bound">t</a> <a id="56827" href="Demos.HSP.html#56806" class="Bound">i</a><a id="56828" class="Symbol">)</a> <a id="56830" href="Demos.HSP.html#56669" class="Bound">a</a><a id="56831" class="Symbol">)</a><a id="56832" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
  <a id="56836" href="Demos.HSP.html#56376" class="Function Operator">‚ü¶</a> <a id="56838" href="Demos.HSP.html#49540" class="InductiveConstructor">node</a> <a id="56843" href="Demos.HSP.html#56664" class="Bound">f</a> <a id="56845" href="Demos.HSP.html#56666" class="Bound">t</a> <a id="56847" href="Demos.HSP.html#56376" class="Function Operator">‚üß·¥Æ</a> <a id="56850" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="56854" class="Symbol">(</a><a id="56855" href="Demos.HSP.html#56500" class="Function">h</a> <a id="56857" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="56859" href="Demos.HSP.html#56669" class="Bound">a</a><a id="56860" class="Symbol">)</a>        <a id="56869" href="Relation.Binary.Reasoning.Base.Single.html#2555" class="Function Operator">‚àé</a> <a id="56871" class="Keyword">where</a>  <a id="56878" class="Keyword">open</a> <a id="56883" href="Relation.Binary.Reasoning.Setoid.html" class="Module">SetoidReasoning</a> <a id="56899" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="56902" href="Demos.HSP.html#56232" class="Bound">ùë©</a> <a id="56904" href="Demos.HSP.html#23785" class="Function Operator">]</a>

<a id="56907" class="Keyword">module</a> <a id="56914" href="Demos.HSP.html#56914" class="Module">_</a> <a id="56916" class="Symbol">{</a><a id="56917" href="Demos.HSP.html#56917" class="Bound">X</a> <a id="56919" class="Symbol">:</a> <a id="56921" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="56926" href="Demos.HSP.html#8441" class="Generalizable">œá</a><a id="56927" class="Symbol">}{</a><a id="56929" href="Demos.HSP.html#56929" class="Bound">Œπ</a> <a id="56931" class="Symbol">:</a> <a id="56933" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="56938" class="Symbol">}</a> <a id="56940" class="Symbol">{</a><a id="56941" href="Demos.HSP.html#56941" class="Bound">I</a> <a id="56943" class="Symbol">:</a> <a id="56945" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="56950" href="Demos.HSP.html#56929" class="Bound">Œπ</a><a id="56951" class="Symbol">}</a> <a id="56953" class="Symbol">(</a><a id="56954" href="Demos.HSP.html#56954" class="Bound">ùíú</a> <a id="56956" class="Symbol">:</a> <a id="56958" href="Demos.HSP.html#56941" class="Bound">I</a> <a id="56960" class="Symbol">‚Üí</a> <a id="56962" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="56970" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="56972" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="56974" class="Symbol">)</a> <a id="56976" class="Keyword">where</a>
 <a id="56983" class="Keyword">open</a> <a id="56988" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="56995" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="56998" href="Demos.HSP.html#29982" class="Function">‚®Ö</a> <a id="57000" href="Demos.HSP.html#56954" class="Bound">ùíú</a> <a id="57002" href="Demos.HSP.html#23785" class="Function Operator">]</a>  <a id="57005" class="Keyword">using</a> <a id="57011" class="Symbol">(</a> <a id="57013" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="57017" class="Symbol">)</a>
 <a id="57020" class="Keyword">open</a> <a id="57025" href="Demos.HSP.html#53101" class="Module">Environment</a>      <a id="57042" class="Keyword">using</a> <a id="57048" class="Symbol">(</a> <a id="57050" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶_‚üß</a> <a id="57054" class="Symbol">;</a> <a id="57056" href="Demos.HSP.html#54780" class="Function">‚âÉ‚ÜíEqual</a> <a id="57064" class="Symbol">)</a>

 <a id="57068" href="Demos.HSP.html#57068" class="Function">interp-prod</a> <a id="57080" class="Symbol">:</a> <a id="57082" class="Symbol">(</a><a id="57083" href="Demos.HSP.html#57083" class="Bound">p</a> <a id="57085" class="Symbol">:</a> <a id="57087" href="Demos.HSP.html#49483" class="Datatype">Term</a> <a id="57092" href="Demos.HSP.html#56917" class="Bound">X</a><a id="57093" class="Symbol">)</a> <a id="57095" class="Symbol">‚Üí</a> <a id="57097" class="Symbol">‚àÄ</a> <a id="57099" href="Demos.HSP.html#57099" class="Bound">œÅ</a> <a id="57101" class="Symbol">‚Üí</a>  <a id="57104" class="Symbol">(</a><a id="57105" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶</a> <a id="57107" href="Demos.HSP.html#29982" class="Function">‚®Ö</a> <a id="57109" href="Demos.HSP.html#56954" class="Bound">ùíú</a> <a id="57111" href="Demos.HSP.html#53861" class="Function Operator">‚üß</a> <a id="57113" href="Demos.HSP.html#57083" class="Bound">p</a><a id="57114" class="Symbol">)</a> <a id="57116" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="57120" href="Demos.HSP.html#57099" class="Bound">œÅ</a>   <a id="57124" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a>   <a id="57128" class="Symbol">Œª</a> <a id="57130" href="Demos.HSP.html#57130" class="Bound">i</a> <a id="57132" class="Symbol">‚Üí</a> <a id="57134" class="Symbol">(</a><a id="57135" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶</a> <a id="57137" href="Demos.HSP.html#56954" class="Bound">ùíú</a> <a id="57139" href="Demos.HSP.html#57130" class="Bound">i</a> <a id="57141" href="Demos.HSP.html#53861" class="Function Operator">‚üß</a> <a id="57143" href="Demos.HSP.html#57083" class="Bound">p</a><a id="57144" class="Symbol">)</a> <a id="57146" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="57150" class="Symbol">Œª</a> <a id="57152" href="Demos.HSP.html#57152" class="Bound">x</a> <a id="57154" class="Symbol">‚Üí</a> <a id="57156" class="Symbol">(</a><a id="57157" href="Demos.HSP.html#57099" class="Bound">œÅ</a> <a id="57159" href="Demos.HSP.html#57152" class="Bound">x</a><a id="57160" class="Symbol">)</a> <a id="57162" href="Demos.HSP.html#57130" class="Bound">i</a>
 <a id="57165" href="Demos.HSP.html#57068" class="Function">interp-prod</a> <a id="57177" class="Symbol">(</a><a id="57178" href="Demos.HSP.html#49524" class="InductiveConstructor">‚Ñä</a> <a id="57180" href="Demos.HSP.html#57180" class="Bound">x</a><a id="57181" class="Symbol">)</a>       <a id="57189" class="Symbol">=</a> <a id="57191" class="Symbol">Œª</a> <a id="57193" href="Demos.HSP.html#57193" class="Bound">œÅ</a> <a id="57195" href="Demos.HSP.html#57195" class="Bound">i</a>  <a id="57198" class="Symbol">‚Üí</a> <a id="57200" href="Demos.HSP.html#54780" class="Function">‚âÉ‚ÜíEqual</a> <a id="57208" class="Symbol">(</a><a id="57209" href="Demos.HSP.html#56954" class="Bound">ùíú</a> <a id="57211" href="Demos.HSP.html#57195" class="Bound">i</a><a id="57212" class="Symbol">)</a> <a id="57214" class="Symbol">(</a><a id="57215" href="Demos.HSP.html#49524" class="InductiveConstructor">‚Ñä</a> <a id="57217" href="Demos.HSP.html#57180" class="Bound">x</a><a id="57218" class="Symbol">)</a> <a id="57220" class="Symbol">(</a><a id="57221" href="Demos.HSP.html#49524" class="InductiveConstructor">‚Ñä</a> <a id="57223" href="Demos.HSP.html#57180" class="Bound">x</a><a id="57224" class="Symbol">)</a> <a id="57226" href="Demos.HSP.html#50308" class="Function">‚âÉ-isRefl</a> <a id="57235" class="Symbol">Œª</a> <a id="57237" href="Demos.HSP.html#57237" class="Bound">_</a> <a id="57239" class="Symbol">‚Üí</a> <a id="57241" class="Symbol">(</a><a id="57242" href="Demos.HSP.html#57193" class="Bound">œÅ</a> <a id="57244" href="Demos.HSP.html#57180" class="Bound">x</a><a id="57245" class="Symbol">)</a> <a id="57247" href="Demos.HSP.html#57195" class="Bound">i</a>
 <a id="57250" href="Demos.HSP.html#57068" class="Function">interp-prod</a> <a id="57262" class="Symbol">(</a><a id="57263" href="Demos.HSP.html#49540" class="InductiveConstructor">node</a> <a id="57268" href="Demos.HSP.html#57268" class="Bound">f</a> <a id="57270" href="Demos.HSP.html#57270" class="Bound">t</a><a id="57271" class="Symbol">)</a>  <a id="57274" class="Symbol">=</a> <a id="57276" class="Symbol">Œª</a> <a id="57278" href="Demos.HSP.html#57278" class="Bound">œÅ</a>    <a id="57283" class="Symbol">‚Üí</a> <a id="57285" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="57290" class="Symbol">(</a><a id="57291" href="Demos.HSP.html#22921" class="Field">Interp</a> <a id="57298" class="Symbol">(</a><a id="57299" href="Demos.HSP.html#29982" class="Function">‚®Ö</a> <a id="57301" href="Demos.HSP.html#56954" class="Bound">ùíú</a><a id="57302" class="Symbol">))</a> <a id="57305" class="Symbol">(</a> <a id="57307" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="57314" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="57316" class="Symbol">Œª</a> <a id="57318" href="Demos.HSP.html#57318" class="Bound">j</a> <a id="57320" href="Demos.HSP.html#57320" class="Bound">k</a> <a id="57322" class="Symbol">‚Üí</a> <a id="57324" href="Demos.HSP.html#57068" class="Function">interp-prod</a> <a id="57336" class="Symbol">(</a><a id="57337" href="Demos.HSP.html#57270" class="Bound">t</a> <a id="57339" href="Demos.HSP.html#57318" class="Bound">j</a><a id="57340" class="Symbol">)</a> <a id="57342" href="Demos.HSP.html#57278" class="Bound">œÅ</a> <a id="57344" href="Demos.HSP.html#57320" class="Bound">k</a> <a id="57346" class="Symbol">)</a>
</pre>

\section{Equational Logic}
\label{equational-logic}

\paragraph*{Term identities, equational theories, and the ‚äß relation}
Given a signature \ab{ùëÜ} and a context \ab X, an \ab{ùëÜ}-\defn{term equation} or \ab{ùëÜ}-\defn{term identity}
is an ordered pair (\ab p , \ab q) of ùëÜ-terms, also denoted by \ab p \af{‚âà} \ab q.
They are often simply called equations or identities, especially when the signature \ab{ùëÜ} is clear.

We define an \defn{equational theory} (or \defn{algebraic theory}) to be a pair \ab{T} =
(\ab{ùëÜ} , \ab{‚Ñ∞·µÄ}) consisting of a signature \ab{ùëÜ} and a collection \ab{‚Ñ∞·µÄ} of
\ab{ùëÜ}-term equations. Some authors reserve the term \defn{theory} for
a \emph{deductively closed} set of equations, that is, a set of equations that is closed
under \emph{entailment} (defined below).

We say that the algebra \ab{ùë®} \emph{satisfies} the equation \ab p \af{‚âà} \ab q if,
for all \ab{œÅ} : \ab X \as{‚Üí} \aof{ùîª[~\ab{ùë®}~]},
%(assigning values in the domain of \ab{ùë®} to variable symbols in \ab X)
we have \aof{‚ü¶~\ab{p}~‚üß} \aofld{‚ü®\$‚ü©} \ab{œÅ} \af{‚âà} \aof{‚ü¶~\ab{q}~‚üß} \aofld{‚ü®\$‚ü©} \ab{œÅ}.
In other words, when they are interpreted in the algebra \ab{ùë®},
the terms \ab{p} and \ab{q} are equal no matter what values in \ab{ùë®} are assigned to variable symbols in \ab{X}.
In this situation, we write
\ab{ùë®}~\aof{‚äß}~\ab{p}~\aof{‚âà}~\ab{q} and say that \ab{ùë®} \defn{models} \ab{p}~\af{‚âà}~\ab{q},
or that \ab{ùë®} is a \defn{model} of \ab{p}~\af{‚âà}~\ab{q}.
If \ab{ùí¶} is a class of algebras, all of the same signature, we write \ab{ùí¶}~\aof{‚ä´}~\ab{p}~\aof{‚âà}~\ab{q}
and say that \ab{ùí¶} \defn{models} the identity \ab{p}~\af{‚âà}~\ab{q} provided for every \ab{ùë®} \aof{‚àà} \ab{ùí¶}
we have \ab{ùë®}~\aof{‚äß}~\ab{p}~\aof{‚âà}~\ab{q}.

\ifshort\else
<pre class="Agda">
<a id="59091" class="Keyword">module</a> <a id="59098" href="Demos.HSP.html#59098" class="Module">_</a> <a id="59100" class="Symbol">{</a><a id="59101" href="Demos.HSP.html#59101" class="Bound">X</a> <a id="59103" class="Symbol">:</a> <a id="59105" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="59110" href="Demos.HSP.html#8441" class="Generalizable">œá</a><a id="59111" class="Symbol">}</a> <a id="59113" class="Keyword">where</a>
</pre>
\fi
<pre class="Agda">

 <a id="59149" href="Demos.HSP.html#59149" class="Function Operator">_‚äß_‚âà_</a> <a id="59155" class="Symbol">:</a> <a id="59157" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="59165" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="59167" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a> <a id="59170" class="Symbol">‚Üí</a> <a id="59172" href="Demos.HSP.html#49483" class="Datatype">Term</a> <a id="59177" href="Demos.HSP.html#59101" class="Bound">X</a> <a id="59179" class="Symbol">‚Üí</a> <a id="59181" href="Demos.HSP.html#49483" class="Datatype">Term</a> <a id="59186" href="Demos.HSP.html#59101" class="Bound">X</a> <a id="59188" class="Symbol">‚Üí</a> <a id="59190" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="59195" class="Symbol">_</a>
 <a id="59198" href="Demos.HSP.html#59198" class="Bound">ùë®</a> <a id="59200" href="Demos.HSP.html#59149" class="Function Operator">‚äß</a> <a id="59202" href="Demos.HSP.html#59202" class="Bound">p</a> <a id="59204" href="Demos.HSP.html#59149" class="Function Operator">‚âà</a> <a id="59206" href="Demos.HSP.html#59206" class="Bound">q</a> <a id="59208" class="Symbol">=</a> <a id="59210" href="Demos.HSP.html#54357" class="Function">Equal</a> <a id="59216" href="Demos.HSP.html#59202" class="Bound">p</a> <a id="59218" href="Demos.HSP.html#59206" class="Bound">q</a> <a id="59220" class="Keyword">where</a> <a id="59226" class="Keyword">open</a> <a id="59231" href="Demos.HSP.html#53101" class="Module">Environment</a> <a id="59243" href="Demos.HSP.html#59198" class="Bound">ùë®</a>

 <a id="59247" href="Demos.HSP.html#59247" class="Function Operator">_‚ä´_‚âà_</a> <a id="59253" class="Symbol">:</a> <a id="59255" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="59260" class="Symbol">(</a><a id="59261" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="59269" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="59271" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="59273" class="Symbol">)</a> <a id="59275" href="Demos.HSP.html#8443" class="Generalizable">‚Ñì</a> <a id="59277" class="Symbol">‚Üí</a> <a id="59279" href="Demos.HSP.html#49483" class="Datatype">Term</a> <a id="59284" href="Demos.HSP.html#59101" class="Bound">X</a> <a id="59286" class="Symbol">‚Üí</a> <a id="59288" href="Demos.HSP.html#49483" class="Datatype">Term</a> <a id="59293" href="Demos.HSP.html#59101" class="Bound">X</a> <a id="59295" class="Symbol">‚Üí</a> <a id="59297" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="59302" class="Symbol">_</a>
 <a id="59305" href="Demos.HSP.html#59305" class="Bound">ùí¶</a> <a id="59307" href="Demos.HSP.html#59247" class="Function Operator">‚ä´</a> <a id="59309" href="Demos.HSP.html#59309" class="Bound">p</a> <a id="59311" href="Demos.HSP.html#59247" class="Function Operator">‚âà</a> <a id="59313" href="Demos.HSP.html#59313" class="Bound">q</a> <a id="59315" class="Symbol">=</a> <a id="59317" class="Symbol">‚àÄ</a> <a id="59319" href="Demos.HSP.html#59319" class="Bound">ùë®</a> <a id="59321" class="Symbol">‚Üí</a> <a id="59323" href="Demos.HSP.html#59305" class="Bound">ùí¶</a> <a id="59325" href="Demos.HSP.html#59319" class="Bound">ùë®</a> <a id="59327" class="Symbol">‚Üí</a> <a id="59329" href="Demos.HSP.html#59319" class="Bound">ùë®</a> <a id="59331" href="Demos.HSP.html#59149" class="Function Operator">‚äß</a> <a id="59333" href="Demos.HSP.html#59309" class="Bound">p</a> <a id="59335" href="Demos.HSP.html#59149" class="Function Operator">‚âà</a> <a id="59337" href="Demos.HSP.html#59313" class="Bound">q</a>

</pre>
We represent a set of identities as a predicate over pairs of
terms, say, \ab{‚Ñ∞} : \af{Pred}(\ad{Term} \ab{X} \af{√ó} \ad{Term} \ab{X})~\au{}  and we denote by
\ab{ùë®}~\aof{‚ä®}~\ab{‚Ñ∞} the assertion that the algebra \ab{ùë®} models \ab{p}~\af{‚âà}~\ab{q}
for all (\ab{p} , \ab{q}) \af{‚àà} \ab{‚Ñ∞}.\footnote{Notice that \af{‚ä®} is
a stretched version of the models symbol, \af{‚äß}%
\ifshort
.
\else
; this makes it possible for \agda to distinguish and parse expressions involving the types
\af{\au{}‚ä®\au{}} and \af{\au{}‚äß\au{}‚âà\au{}}.
In Emacs \texttt{agda2-mode}, the symbol \af{‚ä®} is produced by typing
\textbackslash\textbar{}=, while \af{‚äß} is
produced with \textbackslash{}models.
\fi
}

<pre class="Agda">

 <a id="60047" href="Demos.HSP.html#60047" class="Function Operator">_‚ä®_</a> <a id="60051" class="Symbol">:</a> <a id="60053" class="Symbol">(</a><a id="60054" href="Demos.HSP.html#60054" class="Bound">ùë®</a> <a id="60056" class="Symbol">:</a> <a id="60058" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="60066" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="60068" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="60070" class="Symbol">)</a> <a id="60072" class="Symbol">‚Üí</a> <a id="60074" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="60078" class="Symbol">(</a><a id="60079" href="Demos.HSP.html#49483" class="Datatype">Term</a> <a id="60084" href="Demos.HSP.html#59101" class="Bound">X</a> <a id="60086" href="Data.Product.html#1167" class="Function Operator">√ó</a> <a id="60088" href="Demos.HSP.html#49483" class="Datatype">Term</a> <a id="60093" href="Demos.HSP.html#59101" class="Bound">X</a><a id="60094" class="Symbol">)(</a><a id="60096" href="Demos.HSP.html#44469" class="Function">ov</a> <a id="60099" href="Demos.HSP.html#59110" class="Bound">œá</a><a id="60100" class="Symbol">)</a> <a id="60102" class="Symbol">‚Üí</a> <a id="60104" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="60109" class="Symbol">_</a>
 <a id="60112" href="Demos.HSP.html#60112" class="Bound">ùë®</a> <a id="60114" href="Demos.HSP.html#60047" class="Function Operator">‚ä®</a> <a id="60116" href="Demos.HSP.html#60116" class="Bound">‚Ñ∞</a> <a id="60118" class="Symbol">=</a> <a id="60120" class="Symbol">‚àÄ</a> <a id="60122" class="Symbol">{</a><a id="60123" href="Demos.HSP.html#60123" class="Bound">p</a> <a id="60125" href="Demos.HSP.html#60125" class="Bound">q</a><a id="60126" class="Symbol">}</a> <a id="60128" class="Symbol">‚Üí</a> <a id="60130" class="Symbol">(</a><a id="60131" href="Demos.HSP.html#60123" class="Bound">p</a> <a id="60133" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="60135" href="Demos.HSP.html#60125" class="Bound">q</a><a id="60136" class="Symbol">)</a> <a id="60138" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="60140" href="Demos.HSP.html#60116" class="Bound">‚Ñ∞</a> <a id="60142" class="Symbol">‚Üí</a> <a id="60144" href="Demos.HSP.html#54357" class="Function">Equal</a> <a id="60150" href="Demos.HSP.html#60123" class="Bound">p</a> <a id="60152" href="Demos.HSP.html#60125" class="Bound">q</a> <a id="60154" class="Keyword">where</a> <a id="60160" class="Keyword">open</a> <a id="60165" href="Demos.HSP.html#53101" class="Module">Environment</a> <a id="60177" href="Demos.HSP.html#60112" class="Bound">ùë®</a>

</pre>

If \ab{ùí¶} is a class of structures and \ab{‚Ñ∞} a set of term identities, then the set of
term equations modeled by \ab{ùí¶} is denoted by \af{Th}~\ab{ùí¶} and is called the
\defn{equational theory} of \ab{ùí¶}, while the class of structures modeling \ab{‚Ñ∞} is
denoted by \af{Mod}~\ab{‚Ñ∞} and is called the \defn{equational class axiomatized} by
\ab{‚Ñ∞}.

<pre class="Agda">

<a id="Th"></a><a id="60552" href="Demos.HSP.html#60552" class="Function">Th</a> <a id="60555" class="Symbol">:</a> <a id="60557" class="Symbol">{</a><a id="60558" href="Demos.HSP.html#60558" class="Bound">X</a> <a id="60560" class="Symbol">:</a> <a id="60562" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="60567" href="Demos.HSP.html#8441" class="Generalizable">œá</a><a id="60568" class="Symbol">}</a> <a id="60570" class="Symbol">‚Üí</a> <a id="60572" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="60577" class="Symbol">(</a><a id="60578" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="60586" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="60588" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="60590" class="Symbol">)</a> <a id="60592" href="Demos.HSP.html#8443" class="Generalizable">‚Ñì</a> <a id="60594" class="Symbol">‚Üí</a> <a id="60596" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="60600" class="Symbol">(</a><a id="60601" href="Demos.HSP.html#49483" class="Datatype">Term</a> <a id="60606" href="Demos.HSP.html#60558" class="Bound">X</a> <a id="60608" href="Data.Product.html#1167" class="Function Operator">√ó</a> <a id="60610" href="Demos.HSP.html#49483" class="Datatype">Term</a> <a id="60615" href="Demos.HSP.html#60558" class="Bound">X</a><a id="60616" class="Symbol">)</a> <a id="60618" class="Symbol">_</a>
<a id="60620" href="Demos.HSP.html#60552" class="Function">Th</a> <a id="60623" href="Demos.HSP.html#60623" class="Bound">ùí¶</a> <a id="60625" class="Symbol">=</a> <a id="60627" class="Symbol">Œª</a> <a id="60629" class="Symbol">(</a><a id="60630" href="Demos.HSP.html#60630" class="Bound">p</a> <a id="60632" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="60634" href="Demos.HSP.html#60634" class="Bound">q</a><a id="60635" class="Symbol">)</a> <a id="60637" class="Symbol">‚Üí</a> <a id="60639" href="Demos.HSP.html#60623" class="Bound">ùí¶</a> <a id="60641" href="Demos.HSP.html#59247" class="Function Operator">‚ä´</a> <a id="60643" href="Demos.HSP.html#60630" class="Bound">p</a> <a id="60645" href="Demos.HSP.html#59247" class="Function Operator">‚âà</a> <a id="60647" href="Demos.HSP.html#60634" class="Bound">q</a>

<a id="Mod"></a><a id="60650" href="Demos.HSP.html#60650" class="Function">Mod</a> <a id="60654" class="Symbol">:</a> <a id="60656" class="Symbol">{</a><a id="60657" href="Demos.HSP.html#60657" class="Bound">X</a> <a id="60659" class="Symbol">:</a> <a id="60661" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="60666" href="Demos.HSP.html#8441" class="Generalizable">œá</a><a id="60667" class="Symbol">}</a> <a id="60669" class="Symbol">‚Üí</a> <a id="60671" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="60675" class="Symbol">(</a><a id="60676" href="Demos.HSP.html#49483" class="Datatype">Term</a> <a id="60681" href="Demos.HSP.html#60657" class="Bound">X</a> <a id="60683" href="Data.Product.html#1167" class="Function Operator">√ó</a> <a id="60685" href="Demos.HSP.html#49483" class="Datatype">Term</a> <a id="60690" href="Demos.HSP.html#60657" class="Bound">X</a><a id="60691" class="Symbol">)</a> <a id="60693" href="Demos.HSP.html#8443" class="Generalizable">‚Ñì</a> <a id="60695" class="Symbol">‚Üí</a> <a id="60697" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="60702" class="Symbol">(</a><a id="60703" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="60711" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="60713" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="60715" class="Symbol">)</a> <a id="60717" class="Symbol">_</a>
<a id="60719" href="Demos.HSP.html#60650" class="Function">Mod</a> <a id="60723" href="Demos.HSP.html#60723" class="Bound">‚Ñ∞</a> <a id="60725" href="Demos.HSP.html#60725" class="Bound">ùë®</a> <a id="60727" class="Symbol">=</a> <a id="60729" class="Symbol">‚àÄ</a> <a id="60731" class="Symbol">{</a><a id="60732" href="Demos.HSP.html#60732" class="Bound">p</a> <a id="60734" href="Demos.HSP.html#60734" class="Bound">q</a><a id="60735" class="Symbol">}</a> <a id="60737" class="Symbol">‚Üí</a> <a id="60739" class="Symbol">(</a><a id="60740" href="Demos.HSP.html#60732" class="Bound">p</a> <a id="60742" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="60744" href="Demos.HSP.html#60734" class="Bound">q</a><a id="60745" class="Symbol">)</a> <a id="60747" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="60749" href="Demos.HSP.html#60723" class="Bound">‚Ñ∞</a> <a id="60751" class="Symbol">‚Üí</a> <a id="60753" href="Demos.HSP.html#54357" class="Function">Equal</a> <a id="60759" href="Demos.HSP.html#60732" class="Bound">p</a> <a id="60761" href="Demos.HSP.html#60734" class="Bound">q</a> <a id="60763" class="Keyword">where</a> <a id="60769" class="Keyword">open</a> <a id="60774" href="Demos.HSP.html#53101" class="Module">Environment</a> <a id="60786" href="Demos.HSP.html#60725" class="Bound">ùë®</a>
</pre>

\paragraph*{Entailment}

If \ab{‚Ñ∞} is a set of \ab{ùëÜ}-term equations and \ab{p} and \ab{q} are \ab{ùëÜ}-terms,
we say that \ab{‚Ñ∞} \defn{entails} the equation \ab{p}~\aof{‚âà}~\ab{q}, and we write
\ab{‚Ñ∞}~\ad{‚ä¢}~\ab{p}~\ad{‚âà}~\ab{q}, just in case every model of \ab{‚Ñ∞} also models
\ab{p}~\aof{‚âà}~\ab{q}.
We model our definition of \defn{entailment type} on the one defined by Abel
in~\cite{Abel:2021}.  It contains cases for representing hypotheses, congruence of term
application, that substitution respects entailment, and that entailment is
an equivalence.

<pre class="Agda">

<a id="61369" class="Keyword">data</a> <a id="_‚ä¢_‚ñπ_‚âà_"></a><a id="61374" href="Demos.HSP.html#61374" class="Datatype Operator">_‚ä¢_‚ñπ_‚âà_</a>  <a id="61383" class="Symbol">(</a><a id="61384" href="Demos.HSP.html#61384" class="Bound">‚Ñ∞</a> <a id="61386" class="Symbol">:</a> <a id="61388" class="Symbol">{</a><a id="61389" href="Demos.HSP.html#61389" class="Bound">Y</a> <a id="61391" class="Symbol">:</a> <a id="61393" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="61398" href="Demos.HSP.html#8441" class="Generalizable">œá</a><a id="61399" class="Symbol">}</a> <a id="61401" class="Symbol">‚Üí</a> <a id="61403" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="61407" class="Symbol">(</a><a id="61408" href="Demos.HSP.html#49483" class="Datatype">Term</a> <a id="61413" href="Demos.HSP.html#61389" class="Bound">Y</a> <a id="61415" href="Data.Product.html#1167" class="Function Operator">√ó</a> <a id="61417" href="Demos.HSP.html#49483" class="Datatype">Term</a> <a id="61422" href="Demos.HSP.html#61389" class="Bound">Y</a><a id="61423" class="Symbol">)</a> <a id="61425" class="Symbol">(</a><a id="61426" href="Demos.HSP.html#44469" class="Function">ov</a> <a id="61429" href="Demos.HSP.html#8441" class="Generalizable">œá</a><a id="61430" class="Symbol">))</a> <a id="61433" class="Symbol">:</a>
              <a id="61449" class="Symbol">(</a><a id="61450" href="Demos.HSP.html#61450" class="Bound">X</a> <a id="61452" class="Symbol">:</a> <a id="61454" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="61459" href="Demos.HSP.html#61398" class="Bound">œá</a><a id="61460" class="Symbol">)(</a><a id="61462" href="Demos.HSP.html#61462" class="Bound">p</a> <a id="61464" href="Demos.HSP.html#61464" class="Bound">q</a> <a id="61466" class="Symbol">:</a> <a id="61468" href="Demos.HSP.html#49483" class="Datatype">Term</a> <a id="61473" href="Demos.HSP.html#61450" class="Bound">X</a><a id="61474" class="Symbol">)</a> <a id="61476" class="Symbol">‚Üí</a> <a id="61478" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="61483" class="Symbol">(</a><a id="61484" href="Demos.HSP.html#44469" class="Function">ov</a> <a id="61487" href="Demos.HSP.html#61398" class="Bound">œá</a><a id="61488" class="Symbol">)</a> <a id="61490" class="Keyword">where</a>

 <a id="_‚ä¢_‚ñπ_‚âà_.hyp"></a><a id="61498" href="Demos.HSP.html#61498" class="InductiveConstructor">hyp</a>         <a id="61510" class="Symbol">:</a>  <a id="61513" class="Symbol">‚àÄ{</a><a id="61515" href="Demos.HSP.html#61515" class="Bound">Y</a><a id="61516" class="Symbol">}{</a><a id="61518" href="Demos.HSP.html#61518" class="Bound">p</a> <a id="61520" href="Demos.HSP.html#61520" class="Bound">q</a> <a id="61522" class="Symbol">:</a> <a id="61524" href="Demos.HSP.html#49483" class="Datatype">Term</a> <a id="61529" href="Demos.HSP.html#61515" class="Bound">Y</a><a id="61530" class="Symbol">}</a> <a id="61532" class="Symbol">‚Üí</a> <a id="61534" class="Symbol">(</a><a id="61535" href="Demos.HSP.html#61518" class="Bound">p</a> <a id="61537" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="61539" href="Demos.HSP.html#61520" class="Bound">q</a><a id="61540" class="Symbol">)</a> <a id="61542" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="61544" href="Demos.HSP.html#61384" class="Bound">‚Ñ∞</a> <a id="61546" class="Symbol">‚Üí</a> <a id="61548" href="Demos.HSP.html#61384" class="Bound">‚Ñ∞</a> <a id="61550" href="Demos.HSP.html#61374" class="Datatype Operator">‚ä¢</a> <a id="61552" class="Symbol">_</a> <a id="61554" href="Demos.HSP.html#61374" class="Datatype Operator">‚ñπ</a> <a id="61556" href="Demos.HSP.html#61518" class="Bound">p</a> <a id="61558" href="Demos.HSP.html#61374" class="Datatype Operator">‚âà</a> <a id="61560" href="Demos.HSP.html#61520" class="Bound">q</a>
 <a id="_‚ä¢_‚ñπ_‚âà_.app"></a><a id="61563" href="Demos.HSP.html#61563" class="InductiveConstructor">app</a>         <a id="61575" class="Symbol">:</a>  <a id="61578" class="Symbol">‚àÄ{</a><a id="61580" href="Demos.HSP.html#61580" class="Bound">Y</a><a id="61581" class="Symbol">}{</a><a id="61583" href="Demos.HSP.html#61583" class="Bound">ps</a> <a id="61586" href="Demos.HSP.html#61586" class="Bound">qs</a> <a id="61589" class="Symbol">:</a> <a id="61591" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a> <a id="61593" href="Demos.HSP.html#6180" class="Bound">ùëÜ</a> <a id="61595" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a> <a id="61597" href="Demos.HSP.html#8468" class="Generalizable">ùëì</a> <a id="61599" class="Symbol">‚Üí</a> <a id="61601" href="Demos.HSP.html#49483" class="Datatype">Term</a> <a id="61606" href="Demos.HSP.html#61580" class="Bound">Y</a><a id="61607" class="Symbol">}</a>
                          <a id="61635" class="Symbol">‚Üí</a> <a id="61637" class="Symbol">(‚àÄ</a> <a id="61640" href="Demos.HSP.html#61640" class="Bound">i</a> <a id="61642" class="Symbol">‚Üí</a> <a id="61644" href="Demos.HSP.html#61384" class="Bound">‚Ñ∞</a> <a id="61646" href="Demos.HSP.html#61374" class="Datatype Operator">‚ä¢</a> <a id="61648" href="Demos.HSP.html#61580" class="Bound">Y</a> <a id="61650" href="Demos.HSP.html#61374" class="Datatype Operator">‚ñπ</a> <a id="61652" href="Demos.HSP.html#61583" class="Bound">ps</a> <a id="61655" href="Demos.HSP.html#61640" class="Bound">i</a> <a id="61657" href="Demos.HSP.html#61374" class="Datatype Operator">‚âà</a> <a id="61659" href="Demos.HSP.html#61586" class="Bound">qs</a> <a id="61662" href="Demos.HSP.html#61640" class="Bound">i</a><a id="61663" class="Symbol">)</a> <a id="61665" class="Symbol">‚Üí</a> <a id="61667" href="Demos.HSP.html#61384" class="Bound">‚Ñ∞</a> <a id="61669" href="Demos.HSP.html#61374" class="Datatype Operator">‚ä¢</a> <a id="61671" href="Demos.HSP.html#61580" class="Bound">Y</a> <a id="61673" href="Demos.HSP.html#61374" class="Datatype Operator">‚ñπ</a> <a id="61675" class="Symbol">(</a><a id="61676" href="Demos.HSP.html#49540" class="InductiveConstructor">node</a> <a id="61681" href="Demos.HSP.html#8468" class="Generalizable">ùëì</a> <a id="61683" href="Demos.HSP.html#61583" class="Bound">ps</a><a id="61685" class="Symbol">)</a> <a id="61687" href="Demos.HSP.html#61374" class="Datatype Operator">‚âà</a> <a id="61689" class="Symbol">(</a><a id="61690" href="Demos.HSP.html#49540" class="InductiveConstructor">node</a> <a id="61695" href="Demos.HSP.html#8468" class="Generalizable">ùëì</a> <a id="61697" href="Demos.HSP.html#61586" class="Bound">qs</a><a id="61699" class="Symbol">)</a>
 <a id="_‚ä¢_‚ñπ_‚âà_.sub"></a><a id="61702" href="Demos.HSP.html#61702" class="InductiveConstructor">sub</a>         <a id="61714" class="Symbol">:</a>  <a id="61717" class="Symbol">‚àÄ{</a><a id="61719" href="Demos.HSP.html#61719" class="Bound">p</a> <a id="61721" href="Demos.HSP.html#61721" class="Bound">q</a><a id="61722" class="Symbol">}</a>    <a id="61727" class="Symbol">‚Üí</a> <a id="61729" href="Demos.HSP.html#61384" class="Bound">‚Ñ∞</a> <a id="61731" href="Demos.HSP.html#61374" class="Datatype Operator">‚ä¢</a> <a id="61733" href="Demos.HSP.html#8454" class="Generalizable">Œì</a> <a id="61735" href="Demos.HSP.html#61374" class="Datatype Operator">‚ñπ</a> <a id="61737" href="Demos.HSP.html#61719" class="Bound">p</a> <a id="61739" href="Demos.HSP.html#61374" class="Datatype Operator">‚âà</a> <a id="61741" href="Demos.HSP.html#61721" class="Bound">q</a> <a id="61743" class="Symbol">‚Üí</a> <a id="61745" class="Symbol">(</a><a id="61746" href="Demos.HSP.html#61746" class="Bound">œÉ</a> <a id="61748" class="Symbol">:</a> <a id="61750" href="Demos.HSP.html#52700" class="Function">Sub</a> <a id="61754" href="Demos.HSP.html#8456" class="Generalizable">Œî</a> <a id="61756" href="Demos.HSP.html#8454" class="Generalizable">Œì</a><a id="61757" class="Symbol">)</a> <a id="61759" class="Symbol">‚Üí</a> <a id="61761" href="Demos.HSP.html#61384" class="Bound">‚Ñ∞</a> <a id="61763" href="Demos.HSP.html#61374" class="Datatype Operator">‚ä¢</a> <a id="61765" href="Demos.HSP.html#8456" class="Generalizable">Œî</a> <a id="61767" href="Demos.HSP.html#61374" class="Datatype Operator">‚ñπ</a> <a id="61769" class="Symbol">(</a><a id="61770" href="Demos.HSP.html#52759" class="Function Operator">[</a> <a id="61772" href="Demos.HSP.html#61746" class="Bound">œÉ</a> <a id="61774" href="Demos.HSP.html#52759" class="Function Operator">]</a> <a id="61776" href="Demos.HSP.html#61719" class="Bound">p</a><a id="61777" class="Symbol">)</a> <a id="61779" href="Demos.HSP.html#61374" class="Datatype Operator">‚âà</a> <a id="61781" class="Symbol">(</a><a id="61782" href="Demos.HSP.html#52759" class="Function Operator">[</a> <a id="61784" href="Demos.HSP.html#61746" class="Bound">œÉ</a> <a id="61786" href="Demos.HSP.html#52759" class="Function Operator">]</a> <a id="61788" href="Demos.HSP.html#61721" class="Bound">q</a><a id="61789" class="Symbol">)</a>
 <a id="_‚ä¢_‚ñπ_‚âà_.reflexive"></a><a id="61792" href="Demos.HSP.html#61792" class="InductiveConstructor">reflexive</a>   <a id="61804" class="Symbol">:</a>  <a id="61807" class="Symbol">‚àÄ{</a><a id="61809" href="Demos.HSP.html#61809" class="Bound">p</a><a id="61810" class="Symbol">}</a>      <a id="61817" class="Symbol">‚Üí</a> <a id="61819" href="Demos.HSP.html#61384" class="Bound">‚Ñ∞</a> <a id="61821" href="Demos.HSP.html#61374" class="Datatype Operator">‚ä¢</a> <a id="61823" href="Demos.HSP.html#8454" class="Generalizable">Œì</a> <a id="61825" href="Demos.HSP.html#61374" class="Datatype Operator">‚ñπ</a> <a id="61827" href="Demos.HSP.html#61809" class="Bound">p</a> <a id="61829" href="Demos.HSP.html#61374" class="Datatype Operator">‚âà</a> <a id="61831" href="Demos.HSP.html#61809" class="Bound">p</a>
 <a id="_‚ä¢_‚ñπ_‚âà_.symmetric"></a><a id="61834" href="Demos.HSP.html#61834" class="InductiveConstructor">symmetric</a>   <a id="61846" class="Symbol">:</a>  <a id="61849" class="Symbol">‚àÄ{</a><a id="61851" href="Demos.HSP.html#61851" class="Bound">p</a> <a id="61853" href="Demos.HSP.html#61853" class="Bound">q</a><a id="61854" class="Symbol">}</a>    <a id="61859" class="Symbol">‚Üí</a> <a id="61861" href="Demos.HSP.html#61384" class="Bound">‚Ñ∞</a> <a id="61863" href="Demos.HSP.html#61374" class="Datatype Operator">‚ä¢</a> <a id="61865" href="Demos.HSP.html#8454" class="Generalizable">Œì</a> <a id="61867" href="Demos.HSP.html#61374" class="Datatype Operator">‚ñπ</a> <a id="61869" href="Demos.HSP.html#61851" class="Bound">p</a> <a id="61871" href="Demos.HSP.html#61374" class="Datatype Operator">‚âà</a> <a id="61873" href="Demos.HSP.html#61853" class="Bound">q</a> <a id="61875" class="Symbol">‚Üí</a> <a id="61877" href="Demos.HSP.html#61384" class="Bound">‚Ñ∞</a> <a id="61879" href="Demos.HSP.html#61374" class="Datatype Operator">‚ä¢</a> <a id="61881" href="Demos.HSP.html#8454" class="Generalizable">Œì</a> <a id="61883" href="Demos.HSP.html#61374" class="Datatype Operator">‚ñπ</a> <a id="61885" href="Demos.HSP.html#61853" class="Bound">q</a> <a id="61887" href="Demos.HSP.html#61374" class="Datatype Operator">‚âà</a> <a id="61889" href="Demos.HSP.html#61851" class="Bound">p</a>
 <a id="_‚ä¢_‚ñπ_‚âà_.transitive"></a><a id="61892" href="Demos.HSP.html#61892" class="InductiveConstructor">transitive</a>  <a id="61904" class="Symbol">:</a>  <a id="61907" class="Symbol">‚àÄ{</a><a id="61909" href="Demos.HSP.html#61909" class="Bound">p</a> <a id="61911" href="Demos.HSP.html#61911" class="Bound">q</a> <a id="61913" href="Demos.HSP.html#61913" class="Bound">r</a><a id="61914" class="Symbol">}</a>  <a id="61917" class="Symbol">‚Üí</a> <a id="61919" href="Demos.HSP.html#61384" class="Bound">‚Ñ∞</a> <a id="61921" href="Demos.HSP.html#61374" class="Datatype Operator">‚ä¢</a> <a id="61923" href="Demos.HSP.html#8454" class="Generalizable">Œì</a> <a id="61925" href="Demos.HSP.html#61374" class="Datatype Operator">‚ñπ</a> <a id="61927" href="Demos.HSP.html#61909" class="Bound">p</a> <a id="61929" href="Demos.HSP.html#61374" class="Datatype Operator">‚âà</a> <a id="61931" href="Demos.HSP.html#61911" class="Bound">q</a> <a id="61933" class="Symbol">‚Üí</a> <a id="61935" href="Demos.HSP.html#61384" class="Bound">‚Ñ∞</a> <a id="61937" href="Demos.HSP.html#61374" class="Datatype Operator">‚ä¢</a> <a id="61939" href="Demos.HSP.html#8454" class="Generalizable">Œì</a> <a id="61941" href="Demos.HSP.html#61374" class="Datatype Operator">‚ñπ</a> <a id="61943" href="Demos.HSP.html#61911" class="Bound">q</a> <a id="61945" href="Demos.HSP.html#61374" class="Datatype Operator">‚âà</a> <a id="61947" href="Demos.HSP.html#61913" class="Bound">r</a> <a id="61949" class="Symbol">‚Üí</a> <a id="61951" href="Demos.HSP.html#61384" class="Bound">‚Ñ∞</a> <a id="61953" href="Demos.HSP.html#61374" class="Datatype Operator">‚ä¢</a> <a id="61955" href="Demos.HSP.html#8454" class="Generalizable">Œì</a> <a id="61957" href="Demos.HSP.html#61374" class="Datatype Operator">‚ñπ</a> <a id="61959" href="Demos.HSP.html#61909" class="Bound">p</a> <a id="61961" href="Demos.HSP.html#61374" class="Datatype Operator">‚âà</a> <a id="61963" href="Demos.HSP.html#61913" class="Bound">r</a>

</pre>

The fact that this exactly represents the informal semantic notion of entailment
given earlier is called \defn{soundness} and
\defn{completeness}.
More precisely, \defn{the entailment type is sound} means that
if \ab{‚Ñ∞}~\ad{‚ä¢}~\ab{X}~\ad{‚ñπ}~\ab p~\ad{‚âà}~\ab q, then \ab p \aof{‚âà} \ab q holds in
every model of \ab{‚Ñ∞}.
\defn{The entailment type is complete} means that
if \ab p \aof{‚âà} \ab q holds in every model of \ab{‚Ñ∞},
then \ab{‚Ñ∞}~\ad{‚ä¢}~\ab{X}~\ad{‚ñπ}~\ab p~\aof{‚âà}~\ab q.
We will use soundness of entailment only once below%
\ifshort
~(by the name \af{sound}), so we omit its proof, but see~\cite{Abel:2021}
or~\cite{DeMeo:2021}.
\else
; nonetheless, here is its formalization (essentially due to Abel, \textit{op. cit.}):

<pre class="Agda">

<a id="62721" class="Keyword">module</a> <a id="Soundness"></a><a id="62728" href="Demos.HSP.html#62728" class="Module">Soundness</a>  <a id="62739" class="Symbol">(</a><a id="62740" href="Demos.HSP.html#62740" class="Bound">‚Ñ∞</a> <a id="62742" class="Symbol">:</a> <a id="62744" class="Symbol">{</a><a id="62745" href="Demos.HSP.html#62745" class="Bound">Y</a> <a id="62747" class="Symbol">:</a> <a id="62749" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="62754" href="Demos.HSP.html#8441" class="Generalizable">œá</a><a id="62755" class="Symbol">}</a> <a id="62757" class="Symbol">‚Üí</a> <a id="62759" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="62763" class="Symbol">(</a><a id="62764" href="Demos.HSP.html#49483" class="Datatype">Term</a> <a id="62769" href="Demos.HSP.html#62745" class="Bound">Y</a> <a id="62771" href="Data.Product.html#1167" class="Function Operator">√ó</a> <a id="62773" href="Demos.HSP.html#49483" class="Datatype">Term</a> <a id="62778" href="Demos.HSP.html#62745" class="Bound">Y</a><a id="62779" class="Symbol">)</a> <a id="62781" class="Symbol">(</a><a id="62782" href="Demos.HSP.html#44469" class="Function">ov</a> <a id="62785" href="Demos.HSP.html#8441" class="Generalizable">œá</a><a id="62786" class="Symbol">))</a>
                  <a id="62807" class="Symbol">(</a><a id="62808" href="Demos.HSP.html#62808" class="Bound">ùë®</a> <a id="62810" class="Symbol">:</a> <a id="62812" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="62820" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="62822" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="62824" class="Symbol">)</a>                <a id="62841" class="Comment">-- We assume an algebra ùë®</a>
                  <a id="62885" class="Symbol">(</a><a id="62886" href="Demos.HSP.html#62886" class="Bound">V</a> <a id="62888" class="Symbol">:</a> <a id="62890" class="Symbol">‚àÄ{</a><a id="62892" href="Demos.HSP.html#62892" class="Bound">Y</a><a id="62893" class="Symbol">}</a> <a id="62895" class="Symbol">‚Üí</a> <a id="62897" href="Demos.HSP.html#60047" class="Function Operator">_‚ä®_</a><a id="62900" class="Symbol">{</a><a id="62901" class="Argument">œá</a> <a id="62903" class="Symbol">=</a> <a id="62905" href="Demos.HSP.html#8441" class="Generalizable">œá</a><a id="62906" class="Symbol">}</a> <a id="62908" href="Demos.HSP.html#62808" class="Bound">ùë®</a> <a id="62910" class="Symbol">(</a><a id="62911" href="Demos.HSP.html#62740" class="Bound">‚Ñ∞</a><a id="62912" class="Symbol">{</a><a id="62913" href="Demos.HSP.html#62892" class="Bound">Y</a><a id="62914" class="Symbol">}))</a>  <a id="62919" class="Comment">-- that models all equations in ‚Ñ∞.</a>
                  <a id="62972" class="Keyword">where</a>
 <a id="62979" class="Keyword">open</a> <a id="62984" href="Relation.Binary.Reasoning.Setoid.html" class="Module">SetoidReasoning</a> <a id="63000" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="63003" href="Demos.HSP.html#62808" class="Bound">ùë®</a> <a id="63005" href="Demos.HSP.html#23785" class="Function Operator">]</a>
 <a id="63008" class="Keyword">open</a> <a id="63013" href="Demos.HSP.html#53101" class="Module">Environment</a> <a id="63025" href="Demos.HSP.html#62808" class="Bound">ùë®</a>
 <a id="Soundness.sound"></a><a id="63028" href="Demos.HSP.html#63028" class="Function">sound</a> <a id="63034" class="Symbol">:</a> <a id="63036" class="Symbol">‚àÄ</a> <a id="63038" class="Symbol">{</a><a id="63039" href="Demos.HSP.html#63039" class="Bound">p</a> <a id="63041" href="Demos.HSP.html#63041" class="Bound">q</a><a id="63042" class="Symbol">}</a> <a id="63044" class="Symbol">‚Üí</a> <a id="63046" href="Demos.HSP.html#62740" class="Bound">‚Ñ∞</a> <a id="63048" href="Demos.HSP.html#61374" class="Datatype Operator">‚ä¢</a> <a id="63050" href="Demos.HSP.html#8454" class="Generalizable">Œì</a> <a id="63052" href="Demos.HSP.html#61374" class="Datatype Operator">‚ñπ</a> <a id="63054" href="Demos.HSP.html#63039" class="Bound">p</a> <a id="63056" href="Demos.HSP.html#61374" class="Datatype Operator">‚âà</a> <a id="63058" href="Demos.HSP.html#63041" class="Bound">q</a> <a id="63060" class="Symbol">‚Üí</a> <a id="63062" href="Demos.HSP.html#62808" class="Bound">ùë®</a> <a id="63064" href="Demos.HSP.html#59149" class="Function Operator">‚äß</a> <a id="63066" href="Demos.HSP.html#63039" class="Bound">p</a> <a id="63068" href="Demos.HSP.html#59149" class="Function Operator">‚âà</a> <a id="63070" href="Demos.HSP.html#63041" class="Bound">q</a>
 <a id="63073" href="Demos.HSP.html#63028" class="Function">sound</a> <a id="63079" class="Symbol">(</a><a id="63080" href="Demos.HSP.html#61498" class="InductiveConstructor">hyp</a> <a id="63084" href="Demos.HSP.html#63084" class="Bound">i</a><a id="63085" class="Symbol">)</a> <a id="63087" class="Symbol">=</a> <a id="63089" href="Demos.HSP.html#62886" class="Bound">V</a> <a id="63091" href="Demos.HSP.html#63084" class="Bound">i</a>
 <a id="63094" href="Demos.HSP.html#63028" class="Function">sound</a> <a id="63100" class="Symbol">(</a><a id="63101" href="Demos.HSP.html#61563" class="InductiveConstructor">app</a> <a id="63105" href="Demos.HSP.html#63105" class="Bound">es</a><a id="63107" class="Symbol">)</a> <a id="63109" href="Demos.HSP.html#63109" class="Bound">œÅ</a> <a id="63111" class="Symbol">=</a> <a id="63113" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="63118" class="Symbol">(</a><a id="63119" href="Demos.HSP.html#22921" class="Field">Interp</a> <a id="63126" href="Demos.HSP.html#62808" class="Bound">ùë®</a><a id="63127" class="Symbol">)</a> <a id="63129" class="Symbol">(</a><a id="63130" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="63137" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="63139" class="Symbol">Œª</a> <a id="63141" href="Demos.HSP.html#63141" class="Bound">i</a> <a id="63143" class="Symbol">‚Üí</a> <a id="63145" href="Demos.HSP.html#63028" class="Function">sound</a> <a id="63151" class="Symbol">(</a><a id="63152" href="Demos.HSP.html#63105" class="Bound">es</a> <a id="63155" href="Demos.HSP.html#63141" class="Bound">i</a><a id="63156" class="Symbol">)</a> <a id="63158" href="Demos.HSP.html#63109" class="Bound">œÅ</a><a id="63159" class="Symbol">)</a>
 <a id="63162" href="Demos.HSP.html#63028" class="Function">sound</a> <a id="63168" class="Symbol">(</a><a id="63169" href="Demos.HSP.html#61702" class="InductiveConstructor">sub</a> <a id="63173" class="Symbol">{</a><a id="63174" class="Argument">p</a> <a id="63176" class="Symbol">=</a> <a id="63178" href="Demos.HSP.html#63178" class="Bound">p</a><a id="63179" class="Symbol">}{</a><a id="63181" href="Demos.HSP.html#63181" class="Bound">q</a><a id="63182" class="Symbol">}</a> <a id="63184" href="Demos.HSP.html#63184" class="Bound">Epq</a> <a id="63188" href="Demos.HSP.html#63188" class="Bound">œÉ</a><a id="63189" class="Symbol">)</a> <a id="63191" href="Demos.HSP.html#63191" class="Bound">œÅ</a> <a id="63193" class="Symbol">=</a>
  <a id="63197" href="Relation.Binary.Reasoning.Base.Single.html#1916" class="Function Operator">begin</a>
   <a id="63206" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶</a> <a id="63208" href="Demos.HSP.html#52759" class="Function Operator">[</a> <a id="63210" href="Demos.HSP.html#63188" class="Bound">œÉ</a> <a id="63212" href="Demos.HSP.html#52759" class="Function Operator">]</a> <a id="63214" href="Demos.HSP.html#63178" class="Bound">p</a>  <a id="63217" href="Demos.HSP.html#53861" class="Function Operator">‚üß</a> <a id="63219" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a>                     <a id="63243" href="Demos.HSP.html#63191" class="Bound">œÅ</a>   <a id="63247" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a>   <a id="63252" href="Demos.HSP.html#55589" class="Function">substitution</a> <a id="63265" href="Demos.HSP.html#63178" class="Bound">p</a> <a id="63267" href="Demos.HSP.html#63188" class="Bound">œÉ</a> <a id="63269" href="Demos.HSP.html#63191" class="Bound">œÅ</a>               <a id="63285" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
   <a id="63290" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶</a> <a id="63292" href="Demos.HSP.html#63178" class="Bound">p</a>        <a id="63301" href="Demos.HSP.html#53861" class="Function Operator">‚üß</a> <a id="63303" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="63307" class="Symbol">(Œª</a> <a id="63310" href="Demos.HSP.html#63310" class="Bound">x</a> <a id="63312" class="Symbol">‚Üí</a> <a id="63314" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶</a> <a id="63316" href="Demos.HSP.html#63188" class="Bound">œÉ</a> <a id="63318" href="Demos.HSP.html#63310" class="Bound">x</a> <a id="63320" href="Demos.HSP.html#53861" class="Function Operator">‚üß</a> <a id="63322" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a>  <a id="63327" href="Demos.HSP.html#63191" class="Bound">œÅ</a><a id="63328" class="Symbol">)</a>  <a id="63331" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a>   <a id="63336" href="Demos.HSP.html#63028" class="Function">sound</a> <a id="63342" href="Demos.HSP.html#63184" class="Bound">Epq</a> <a id="63346" class="Symbol">(Œª</a> <a id="63349" href="Demos.HSP.html#63349" class="Bound">x</a> <a id="63351" class="Symbol">‚Üí</a> <a id="63353" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶</a> <a id="63355" href="Demos.HSP.html#63188" class="Bound">œÉ</a> <a id="63357" href="Demos.HSP.html#63349" class="Bound">x</a> <a id="63359" href="Demos.HSP.html#53861" class="Function Operator">‚üß</a> <a id="63361" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="63365" href="Demos.HSP.html#63191" class="Bound">œÅ</a><a id="63366" class="Symbol">)</a>  <a id="63369" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
   <a id="63374" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶</a> <a id="63376" href="Demos.HSP.html#63181" class="Bound">q</a>        <a id="63385" href="Demos.HSP.html#53861" class="Function Operator">‚üß</a> <a id="63387" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="63391" class="Symbol">(Œª</a> <a id="63394" href="Demos.HSP.html#63394" class="Bound">x</a> <a id="63396" class="Symbol">‚Üí</a> <a id="63398" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶</a> <a id="63400" href="Demos.HSP.html#63188" class="Bound">œÉ</a> <a id="63402" href="Demos.HSP.html#63394" class="Bound">x</a> <a id="63404" href="Demos.HSP.html#53861" class="Function Operator">‚üß</a> <a id="63406" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a>  <a id="63411" href="Demos.HSP.html#63191" class="Bound">œÅ</a><a id="63412" class="Symbol">)</a>  <a id="63415" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚âàÀò‚ü®</a>  <a id="63420" href="Demos.HSP.html#55589" class="Function">substitution</a> <a id="63433" href="Demos.HSP.html#63181" class="Bound">q</a> <a id="63435" href="Demos.HSP.html#63188" class="Bound">œÉ</a> <a id="63437" href="Demos.HSP.html#63191" class="Bound">œÅ</a>               <a id="63453" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚ü©</a>
   <a id="63458" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶</a> <a id="63460" href="Demos.HSP.html#52759" class="Function Operator">[</a> <a id="63462" href="Demos.HSP.html#63188" class="Bound">œÉ</a> <a id="63464" href="Demos.HSP.html#52759" class="Function Operator">]</a> <a id="63466" href="Demos.HSP.html#63181" class="Bound">q</a>  <a id="63469" href="Demos.HSP.html#53861" class="Function Operator">‚üß</a> <a id="63471" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a>                     <a id="63495" href="Demos.HSP.html#63191" class="Bound">œÅ</a>   <a id="63499" href="Relation.Binary.Reasoning.Base.Single.html#2555" class="Function Operator">‚àé</a>
 <a id="63502" href="Demos.HSP.html#63028" class="Function">sound</a> <a id="63508" class="Symbol">(</a><a id="63509" href="Demos.HSP.html#61792" class="InductiveConstructor">reflexive</a>   <a id="63521" class="Symbol">{</a><a id="63522" class="Argument">p</a> <a id="63524" class="Symbol">=</a> <a id="63526" href="Demos.HSP.html#63526" class="Bound">p</a><a id="63527" class="Symbol">}</a>                 <a id="63545" class="Symbol">)</a> <a id="63547" class="Symbol">=</a> <a id="63549" href="Demos.HSP.html#7974" class="Field">refl·µâ</a>   <a id="63557" href="Demos.HSP.html#54992" class="Function">EqualIsEquiv</a> <a id="63570" class="Symbol">{</a><a id="63571" class="Argument">x</a> <a id="63573" class="Symbol">=</a> <a id="63575" href="Demos.HSP.html#63526" class="Bound">p</a><a id="63576" class="Symbol">}</a>
 <a id="63579" href="Demos.HSP.html#63028" class="Function">sound</a> <a id="63585" class="Symbol">(</a><a id="63586" href="Demos.HSP.html#61834" class="InductiveConstructor">symmetric</a>   <a id="63598" class="Symbol">{</a><a id="63599" class="Argument">p</a> <a id="63601" class="Symbol">=</a> <a id="63603" href="Demos.HSP.html#63603" class="Bound">p</a><a id="63604" class="Symbol">}{</a><a id="63606" href="Demos.HSP.html#63606" class="Bound">q</a><a id="63607" class="Symbol">}</a>     <a id="63613" href="Demos.HSP.html#63613" class="Bound">Epq</a>      <a id="63622" class="Symbol">)</a> <a id="63624" class="Symbol">=</a> <a id="63626" href="Demos.HSP.html#8034" class="Field">sym·µâ</a>    <a id="63634" href="Demos.HSP.html#54992" class="Function">EqualIsEquiv</a> <a id="63647" class="Symbol">{</a><a id="63648" class="Argument">x</a> <a id="63650" class="Symbol">=</a> <a id="63652" href="Demos.HSP.html#63603" class="Bound">p</a><a id="63653" class="Symbol">}{</a><a id="63655" href="Demos.HSP.html#63606" class="Bound">q</a><a id="63656" class="Symbol">}</a>     <a id="63662" class="Symbol">(</a><a id="63663" href="Demos.HSP.html#63028" class="Function">sound</a> <a id="63669" href="Demos.HSP.html#63613" class="Bound">Epq</a><a id="63672" class="Symbol">)</a>
 <a id="63675" href="Demos.HSP.html#63028" class="Function">sound</a> <a id="63681" class="Symbol">(</a><a id="63682" href="Demos.HSP.html#61892" class="InductiveConstructor">transitive</a>  <a id="63694" class="Symbol">{</a><a id="63695" class="Argument">p</a> <a id="63697" class="Symbol">=</a> <a id="63699" href="Demos.HSP.html#63699" class="Bound">p</a><a id="63700" class="Symbol">}{</a><a id="63702" href="Demos.HSP.html#63702" class="Bound">q</a><a id="63703" class="Symbol">}{</a><a id="63705" href="Demos.HSP.html#63705" class="Bound">r</a><a id="63706" class="Symbol">}</a>  <a id="63709" href="Demos.HSP.html#63709" class="Bound">Epq</a> <a id="63713" href="Demos.HSP.html#63713" class="Bound">Eqr</a>  <a id="63718" class="Symbol">)</a> <a id="63720" class="Symbol">=</a> <a id="63722" href="Demos.HSP.html#8094" class="Field">trans·µâ</a>  <a id="63730" href="Demos.HSP.html#54992" class="Function">EqualIsEquiv</a> <a id="63743" class="Symbol">{</a><a id="63744" class="Argument">i</a> <a id="63746" class="Symbol">=</a> <a id="63748" href="Demos.HSP.html#63699" class="Bound">p</a><a id="63749" class="Symbol">}{</a><a id="63751" href="Demos.HSP.html#63702" class="Bound">q</a><a id="63752" class="Symbol">}{</a><a id="63754" href="Demos.HSP.html#63705" class="Bound">r</a><a id="63755" class="Symbol">}</a>  <a id="63758" class="Symbol">(</a><a id="63759" href="Demos.HSP.html#63028" class="Function">sound</a> <a id="63765" href="Demos.HSP.html#63709" class="Bound">Epq</a><a id="63768" class="Symbol">)(</a><a id="63770" href="Demos.HSP.html#63028" class="Function">sound</a> <a id="63776" href="Demos.HSP.html#63713" class="Bound">Eqr</a><a id="63779" class="Symbol">)</a>
</pre>
\fi

\paragraph*{The Closure Operators H, S, P and V}
Fix a signature \ab{ùëÜ}, let \ab{ùí¶} be a class of \ab{ùëÜ}-algebras, and define
\begin{itemize}
\item \af H \ab{ùí¶} = algebras isomorphic to homomorphic images of members of \ab{ùí¶};
\item \af S \ab{ùí¶} = algebras isomorphic to subalgebras of members of \ab{ùí¶};
\item \af P \ab{ùí¶} = algebras isomorphic to products of members of \ab{ùí¶}.
\end{itemize}
\ifshort\else
A straight-forward verification confirms that
\fi
\af H, \af S, and \af P are \emph{closure operators} (expansive, monotone, and
idempotent).  A class \ab{ùí¶} of \ab{ùëÜ}-algebras is said to be \emph{closed under
the taking of homomorphic images} provided \af H \ab{ùí¶} \aof{‚äÜ} \ab{ùí¶}. Similarly, \ab{ùí¶} is
\emph{closed under the taking of subalgebras} (resp., \emph{arbitrary products}) provided
\af S~\ab{ùí¶}~\aof{‚äÜ}~\ab{ùí¶} (resp., \af P \ab{ùí¶} \aof{‚äÜ} \ab{ùí¶}). The operators \af H, \af
S, and \af P can be composed with one another repeatedly, forming yet more closure
operators.

% An algebra is a homomorphic image (resp., subalgebra; resp., product) of every algebra to which it is isomorphic.
% Thus, the class \af H \ab{ùí¶} (resp., \af S \ab{ùí¶}; resp., \af P \ab{ùí¶}) is closed under isomorphism.

A \emph{variety} is a class of \ab{ùëÜ}-algebras that is closed under the taking of
homomorphic images, subalgebras, and arbitrary products.  To represent varieties
we define closure operators \af H, \af S, and \af P that are composable; we
then define a type \af V which represents closure under all three.
Thus, if \ab{ùí¶} is a class of \ab{ùëÜ}-algebras, then
\af V \ab{ùí¶} := \af H (\af S (\af P \ab{ùí¶})), and \ab{ùí¶} is a variety if and only if \af V \ab{ùí¶} \aof{‚äÜ} \ab{ùí¶}.
\ifshort\else

We now define the type \af H to represent classes of algebras that include all homomorphic images
of algebras in the class---i.e., classes that are closed under the taking of homomorphic
images---the type \af S to represent classes of algebras that closed under the taking of subalgebras,
and the type \af P to represent classes of algebras closed under the taking of arbitrary products.

<pre class="Agda">

<a id="65894" class="Keyword">module</a> <a id="65901" href="Demos.HSP.html#65901" class="Module">_</a> <a id="65903" class="Symbol">{</a><a id="65904" href="Demos.HSP.html#65904" class="Bound">Œ±</a> <a id="65906" href="Demos.HSP.html#65906" class="Bound">œÅ·µÉ</a> <a id="65909" href="Demos.HSP.html#65909" class="Bound">Œ≤</a> <a id="65911" href="Demos.HSP.html#65911" class="Bound">œÅ·µá</a> <a id="65914" class="Symbol">:</a> <a id="65916" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="65921" class="Symbol">}</a> <a id="65923" class="Keyword">where</a>
</pre>
\fi
<pre class="Agda">

 <a id="65959" class="Keyword">private</a> <a id="65967" href="Demos.HSP.html#65967" class="Function">a</a> <a id="65969" class="Symbol">=</a> <a id="65971" href="Demos.HSP.html#65904" class="Bound">Œ±</a> <a id="65973" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="65975" href="Demos.HSP.html#65906" class="Bound">œÅ·µÉ</a>
 <a id="65979" href="Demos.HSP.html#65979" class="Function">H</a> <a id="65981" class="Symbol">:</a> <a id="65983" class="Symbol">‚àÄ</a> <a id="65985" href="Demos.HSP.html#65985" class="Bound">‚Ñì</a> <a id="65987" class="Symbol">‚Üí</a> <a id="65989" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="65993" class="Symbol">(</a><a id="65994" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="66002" href="Demos.HSP.html#65904" class="Bound">Œ±</a> <a id="66004" href="Demos.HSP.html#65906" class="Bound">œÅ·µÉ</a><a id="66006" class="Symbol">)</a> <a id="66008" class="Symbol">(</a><a id="66009" href="Demos.HSP.html#65967" class="Function">a</a> <a id="66011" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="66013" href="Demos.HSP.html#44469" class="Function">ov</a> <a id="66016" href="Demos.HSP.html#65985" class="Bound">‚Ñì</a><a id="66017" class="Symbol">)</a> <a id="66019" class="Symbol">‚Üí</a> <a id="66021" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="66025" class="Symbol">(</a><a id="66026" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="66034" href="Demos.HSP.html#65909" class="Bound">Œ≤</a> <a id="66036" href="Demos.HSP.html#65911" class="Bound">œÅ·µá</a><a id="66038" class="Symbol">)</a> <a id="66040" class="Symbol">_</a>
 <a id="66043" href="Demos.HSP.html#65979" class="Function">H</a> <a id="66045" class="Symbol">_</a> <a id="66047" href="Demos.HSP.html#66047" class="Bound">ùí¶</a> <a id="66049" href="Demos.HSP.html#66049" class="Bound">ùë©</a> <a id="66051" class="Symbol">=</a> <a id="66053" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="66056" href="Demos.HSP.html#66056" class="Bound">ùë®</a> <a id="66058" href="Data.Product.html#916" class="Function">‚àà</a> <a id="66060" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="66068" href="Demos.HSP.html#65904" class="Bound">Œ±</a> <a id="66070" href="Demos.HSP.html#65906" class="Bound">œÅ·µÉ</a> <a id="66073" href="Data.Product.html#916" class="Function">]</a> <a id="66075" href="Demos.HSP.html#66056" class="Bound">ùë®</a> <a id="66077" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="66079" href="Demos.HSP.html#66047" class="Bound">ùí¶</a> <a id="66081" href="Data.Product.html#1167" class="Function Operator">√ó</a> <a id="66083" href="Demos.HSP.html#66049" class="Bound">ùë©</a> <a id="66085" href="Demos.HSP.html#44539" class="Function Operator">IsHomImageOf</a> <a id="66098" href="Demos.HSP.html#66056" class="Bound">ùë®</a>

 <a id="66102" href="Demos.HSP.html#66102" class="Function">S</a> <a id="66104" class="Symbol">:</a> <a id="66106" class="Symbol">‚àÄ</a> <a id="66108" href="Demos.HSP.html#66108" class="Bound">‚Ñì</a> <a id="66110" class="Symbol">‚Üí</a> <a id="66112" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="66116" class="Symbol">(</a><a id="66117" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="66125" href="Demos.HSP.html#65904" class="Bound">Œ±</a> <a id="66127" href="Demos.HSP.html#65906" class="Bound">œÅ·µÉ</a><a id="66129" class="Symbol">)</a> <a id="66131" class="Symbol">(</a><a id="66132" href="Demos.HSP.html#65967" class="Function">a</a> <a id="66134" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="66136" href="Demos.HSP.html#44469" class="Function">ov</a> <a id="66139" href="Demos.HSP.html#66108" class="Bound">‚Ñì</a><a id="66140" class="Symbol">)</a> <a id="66142" class="Symbol">‚Üí</a> <a id="66144" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="66148" class="Symbol">(</a><a id="66149" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="66157" href="Demos.HSP.html#65909" class="Bound">Œ≤</a> <a id="66159" href="Demos.HSP.html#65911" class="Bound">œÅ·µá</a><a id="66161" class="Symbol">)</a> <a id="66163" class="Symbol">_</a>
 <a id="66166" href="Demos.HSP.html#66102" class="Function">S</a> <a id="66168" class="Symbol">_</a> <a id="66170" href="Demos.HSP.html#66170" class="Bound">ùí¶</a> <a id="66172" href="Demos.HSP.html#66172" class="Bound">ùë©</a> <a id="66174" class="Symbol">=</a> <a id="66176" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="66179" href="Demos.HSP.html#66179" class="Bound">ùë®</a> <a id="66181" href="Data.Product.html#916" class="Function">‚àà</a> <a id="66183" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="66191" href="Demos.HSP.html#65904" class="Bound">Œ±</a> <a id="66193" href="Demos.HSP.html#65906" class="Bound">œÅ·µÉ</a> <a id="66196" href="Data.Product.html#916" class="Function">]</a> <a id="66198" href="Demos.HSP.html#66179" class="Bound">ùë®</a> <a id="66200" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="66202" href="Demos.HSP.html#66170" class="Bound">ùí¶</a> <a id="66204" href="Data.Product.html#1167" class="Function Operator">√ó</a> <a id="66206" href="Demos.HSP.html#66172" class="Bound">ùë©</a> <a id="66208" href="Demos.HSP.html#45928" class="Function Operator">‚â§</a> <a id="66210" href="Demos.HSP.html#66179" class="Bound">ùë®</a>

 <a id="66214" href="Demos.HSP.html#66214" class="Function">P</a> <a id="66216" class="Symbol">:</a> <a id="66218" class="Symbol">‚àÄ</a> <a id="66220" href="Demos.HSP.html#66220" class="Bound">‚Ñì</a> <a id="66222" href="Demos.HSP.html#66222" class="Bound">Œπ</a> <a id="66224" class="Symbol">‚Üí</a> <a id="66226" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="66230" class="Symbol">(</a><a id="66231" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="66239" href="Demos.HSP.html#65904" class="Bound">Œ±</a> <a id="66241" href="Demos.HSP.html#65906" class="Bound">œÅ·µÉ</a><a id="66243" class="Symbol">)</a> <a id="66245" class="Symbol">(</a><a id="66246" href="Demos.HSP.html#65967" class="Function">a</a> <a id="66248" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="66250" href="Demos.HSP.html#44469" class="Function">ov</a> <a id="66253" href="Demos.HSP.html#66220" class="Bound">‚Ñì</a><a id="66254" class="Symbol">)</a> <a id="66256" class="Symbol">‚Üí</a> <a id="66258" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="66262" class="Symbol">(</a><a id="66263" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="66271" href="Demos.HSP.html#65909" class="Bound">Œ≤</a> <a id="66273" href="Demos.HSP.html#65911" class="Bound">œÅ·µá</a><a id="66275" class="Symbol">)</a> <a id="66277" class="Symbol">_</a>
 <a id="66280" href="Demos.HSP.html#66214" class="Function">P</a> <a id="66282" class="Symbol">_</a> <a id="66284" href="Demos.HSP.html#66284" class="Bound">Œπ</a> <a id="66286" href="Demos.HSP.html#66286" class="Bound">ùí¶</a> <a id="66288" href="Demos.HSP.html#66288" class="Bound">ùë©</a> <a id="66290" class="Symbol">=</a> <a id="66292" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="66295" href="Demos.HSP.html#66295" class="Bound">I</a> <a id="66297" href="Data.Product.html#916" class="Function">‚àà</a> <a id="66299" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="66304" href="Demos.HSP.html#66284" class="Bound">Œπ</a> <a id="66306" href="Data.Product.html#916" class="Function">]</a> <a id="66308" class="Symbol">(</a><a id="66309" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="66312" href="Demos.HSP.html#66312" class="Bound">ùíú</a> <a id="66314" href="Data.Product.html#916" class="Function">‚àà</a> <a id="66316" class="Symbol">(</a><a id="66317" href="Demos.HSP.html#66295" class="Bound">I</a> <a id="66319" class="Symbol">‚Üí</a> <a id="66321" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="66329" href="Demos.HSP.html#65904" class="Bound">Œ±</a> <a id="66331" href="Demos.HSP.html#65906" class="Bound">œÅ·µÉ</a><a id="66333" class="Symbol">)</a> <a id="66335" href="Data.Product.html#916" class="Function">]</a> <a id="66337" class="Symbol">(‚àÄ</a> <a id="66340" href="Demos.HSP.html#66340" class="Bound">i</a> <a id="66342" class="Symbol">‚Üí</a> <a id="66344" href="Demos.HSP.html#66312" class="Bound">ùíú</a> <a id="66346" href="Demos.HSP.html#66340" class="Bound">i</a> <a id="66348" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="66350" href="Demos.HSP.html#66286" class="Bound">ùí¶</a><a id="66351" class="Symbol">)</a> <a id="66353" href="Data.Product.html#1167" class="Function Operator">√ó</a> <a id="66355" class="Symbol">(</a><a id="66356" href="Demos.HSP.html#66288" class="Bound">ùë©</a> <a id="66358" href="Demos.HSP.html#41145" class="Record Operator">‚âÖ</a> <a id="66360" href="Demos.HSP.html#29982" class="Function">‚®Ö</a> <a id="66362" href="Demos.HSP.html#66312" class="Bound">ùíú</a><a id="66363" class="Symbol">))</a>

</pre>
Finally, we define the \defn{varietal closure} of a class \ab{ùí¶} to be the class \af{V}
\ab{ùí¶} := \af{H} (\af{S} (\af{P} \ab{ùí¶})).  The explicit universe level declarations
are needed for disambiguation.
<pre class="Agda">

<a id="66596" class="Keyword">module</a> <a id="66603" href="Demos.HSP.html#66603" class="Module">_</a>  <a id="66606" class="Symbol">{</a><a id="66607" href="Demos.HSP.html#66607" class="Bound">Œ±</a> <a id="66609" href="Demos.HSP.html#66609" class="Bound">œÅ·µÉ</a> <a id="66612" href="Demos.HSP.html#66612" class="Bound">Œ≤</a> <a id="66614" href="Demos.HSP.html#66614" class="Bound">œÅ·µá</a> <a id="66617" href="Demos.HSP.html#66617" class="Bound">Œ≥</a> <a id="66619" href="Demos.HSP.html#66619" class="Bound">œÅ·∂ú</a> <a id="66622" href="Demos.HSP.html#66622" class="Bound">Œ¥</a> <a id="66624" href="Demos.HSP.html#66624" class="Bound">œÅ·µà</a> <a id="66627" class="Symbol">:</a> <a id="66629" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="66634" class="Symbol">}</a> <a id="66636" class="Keyword">where</a>
 <a id="66643" class="Keyword">private</a> <a id="66651" href="Demos.HSP.html#66651" class="Function">a</a> <a id="66653" class="Symbol">=</a> <a id="66655" href="Demos.HSP.html#66607" class="Bound">Œ±</a> <a id="66657" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="66659" href="Demos.HSP.html#66609" class="Bound">œÅ·µÉ</a> <a id="66662" class="Symbol">;</a> <a id="66664" href="Demos.HSP.html#66664" class="Function">b</a> <a id="66666" class="Symbol">=</a> <a id="66668" href="Demos.HSP.html#66612" class="Bound">Œ≤</a> <a id="66670" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="66672" href="Demos.HSP.html#66614" class="Bound">œÅ·µá</a>
 <a id="66676" href="Demos.HSP.html#66676" class="Function">V</a> <a id="66678" class="Symbol">:</a> <a id="66680" class="Symbol">‚àÄ</a> <a id="66682" href="Demos.HSP.html#66682" class="Bound">‚Ñì</a> <a id="66684" href="Demos.HSP.html#66684" class="Bound">Œπ</a> <a id="66686" class="Symbol">‚Üí</a> <a id="66688" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="66692" class="Symbol">(</a><a id="66693" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="66701" href="Demos.HSP.html#66607" class="Bound">Œ±</a> <a id="66703" href="Demos.HSP.html#66609" class="Bound">œÅ·µÉ</a><a id="66705" class="Symbol">)</a> <a id="66707" class="Symbol">(</a><a id="66708" href="Demos.HSP.html#66651" class="Function">a</a> <a id="66710" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="66712" href="Demos.HSP.html#44469" class="Function">ov</a> <a id="66715" href="Demos.HSP.html#66682" class="Bound">‚Ñì</a><a id="66716" class="Symbol">)</a> <a id="66718" class="Symbol">‚Üí</a>  <a id="66721" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="66725" class="Symbol">(</a><a id="66726" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="66734" href="Demos.HSP.html#66622" class="Bound">Œ¥</a> <a id="66736" href="Demos.HSP.html#66624" class="Bound">œÅ·µà</a><a id="66738" class="Symbol">)</a> <a id="66740" class="Symbol">_</a>
 <a id="66743" href="Demos.HSP.html#66676" class="Function">V</a> <a id="66745" href="Demos.HSP.html#66745" class="Bound">‚Ñì</a> <a id="66747" href="Demos.HSP.html#66747" class="Bound">Œπ</a> <a id="66749" href="Demos.HSP.html#66749" class="Bound">ùí¶</a> <a id="66751" class="Symbol">=</a> <a id="66753" href="Demos.HSP.html#65979" class="Function">H</a><a id="66754" class="Symbol">{</a><a id="66755" href="Demos.HSP.html#66617" class="Bound">Œ≥</a><a id="66756" class="Symbol">}{</a><a id="66758" href="Demos.HSP.html#66619" class="Bound">œÅ·∂ú</a><a id="66760" class="Symbol">}{</a><a id="66762" href="Demos.HSP.html#66622" class="Bound">Œ¥</a><a id="66763" class="Symbol">}{</a><a id="66765" href="Demos.HSP.html#66624" class="Bound">œÅ·µà</a><a id="66767" class="Symbol">}</a> <a id="66769" class="Symbol">(</a><a id="66770" href="Demos.HSP.html#66651" class="Function">a</a> <a id="66772" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="66774" href="Demos.HSP.html#66664" class="Function">b</a> <a id="66776" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="66778" href="Demos.HSP.html#66745" class="Bound">‚Ñì</a> <a id="66780" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="66782" href="Demos.HSP.html#66747" class="Bound">Œπ</a><a id="66783" class="Symbol">)</a> <a id="66785" class="Symbol">(</a><a id="66786" href="Demos.HSP.html#66102" class="Function">S</a><a id="66787" class="Symbol">{</a><a id="66788" href="Demos.HSP.html#66612" class="Bound">Œ≤</a><a id="66789" class="Symbol">}{</a><a id="66791" href="Demos.HSP.html#66614" class="Bound">œÅ·µá</a><a id="66793" class="Symbol">}</a> <a id="66795" class="Symbol">(</a><a id="66796" href="Demos.HSP.html#66651" class="Function">a</a> <a id="66798" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="66800" href="Demos.HSP.html#66745" class="Bound">‚Ñì</a> <a id="66802" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="66804" href="Demos.HSP.html#66747" class="Bound">Œπ</a><a id="66805" class="Symbol">)</a> <a id="66807" class="Symbol">(</a><a id="66808" href="Demos.HSP.html#66214" class="Function">P</a> <a id="66810" href="Demos.HSP.html#66745" class="Bound">‚Ñì</a> <a id="66812" href="Demos.HSP.html#66747" class="Bound">Œπ</a> <a id="66814" href="Demos.HSP.html#66749" class="Bound">ùí¶</a><a id="66815" class="Symbol">))</a>

</pre>

An important property of the binary relation \aof{‚äß} is \emph{algebraic invariance} (i.e.,
invariance under isomorphism).  We formalize this result as follows.

\ifshort\else
<pre class="Agda">

<a id="67020" class="Keyword">module</a> <a id="67027" href="Demos.HSP.html#67027" class="Module">_</a> <a id="67029" class="Symbol">{</a><a id="67030" href="Demos.HSP.html#67030" class="Bound">X</a> <a id="67032" class="Symbol">:</a> <a id="67034" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="67039" href="Demos.HSP.html#8441" class="Generalizable">œá</a><a id="67040" class="Symbol">}{</a><a id="67042" href="Demos.HSP.html#67042" class="Bound">ùë®</a> <a id="67044" class="Symbol">:</a> <a id="67046" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="67054" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="67056" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="67058" class="Symbol">}(</a><a id="67060" href="Demos.HSP.html#67060" class="Bound">ùë©</a> <a id="67062" class="Symbol">:</a> <a id="67064" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="67072" href="Demos.HSP.html#8424" class="Generalizable">Œ≤</a> <a id="67074" href="Demos.HSP.html#8426" class="Generalizable">œÅ·µá</a><a id="67076" class="Symbol">)(</a><a id="67078" href="Demos.HSP.html#67078" class="Bound">p</a> <a id="67080" href="Demos.HSP.html#67080" class="Bound">q</a> <a id="67082" class="Symbol">:</a> <a id="67084" href="Demos.HSP.html#49483" class="Datatype">Term</a> <a id="67089" href="Demos.HSP.html#67030" class="Bound">X</a><a id="67090" class="Symbol">)</a> <a id="67092" class="Keyword">where</a>
</pre>
\fi
<pre class="Agda">

 <a id="67128" href="Demos.HSP.html#67128" class="Function">‚äß-I-invar</a> <a id="67138" class="Symbol">:</a> <a id="67140" href="Demos.HSP.html#67042" class="Bound">ùë®</a> <a id="67142" href="Demos.HSP.html#59149" class="Function Operator">‚äß</a> <a id="67144" href="Demos.HSP.html#67078" class="Bound">p</a> <a id="67146" href="Demos.HSP.html#59149" class="Function Operator">‚âà</a> <a id="67148" href="Demos.HSP.html#67080" class="Bound">q</a>  <a id="67151" class="Symbol">‚Üí</a>  <a id="67154" href="Demos.HSP.html#67042" class="Bound">ùë®</a> <a id="67156" href="Demos.HSP.html#41145" class="Record Operator">‚âÖ</a> <a id="67158" href="Demos.HSP.html#67060" class="Bound">ùë©</a>  <a id="67161" class="Symbol">‚Üí</a>  <a id="67164" href="Demos.HSP.html#67060" class="Bound">ùë©</a> <a id="67166" href="Demos.HSP.html#59149" class="Function Operator">‚äß</a> <a id="67168" href="Demos.HSP.html#67078" class="Bound">p</a> <a id="67170" href="Demos.HSP.html#59149" class="Function Operator">‚âà</a> <a id="67172" href="Demos.HSP.html#67080" class="Bound">q</a>
 <a id="67175" href="Demos.HSP.html#67128" class="Function">‚äß-I-invar</a> <a id="67185" href="Demos.HSP.html#67185" class="Bound">Apq</a> <a id="67189" class="Symbol">(</a><a id="67190" href="Demos.HSP.html#41204" class="InductiveConstructor">mkiso</a> <a id="67196" href="Demos.HSP.html#67196" class="Bound">fh</a> <a id="67199" href="Demos.HSP.html#67199" class="Bound">gh</a> <a id="67202" href="Demos.HSP.html#67202" class="Bound">f‚àºg</a> <a id="67206" href="Demos.HSP.html#67206" class="Bound">g‚àºf</a><a id="67209" class="Symbol">)</a> <a id="67211" href="Demos.HSP.html#67211" class="Bound">œÅ</a> <a id="67213" class="Symbol">=</a> <a id="67215" href="Relation.Binary.Reasoning.Base.Single.html#1916" class="Function Operator">begin</a>
      <a id="67227" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶</a> <a id="67229" href="Demos.HSP.html#67078" class="Bound">p</a> <a id="67231" href="Demos.HSP.html#53861" class="Function Operator">‚üß</a>   <a id="67235" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a>               <a id="67253" href="Demos.HSP.html#67211" class="Bound">œÅ</a>    <a id="67258" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚âàÀò‚ü®</a>  <a id="67263" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="67268" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶</a> <a id="67270" href="Demos.HSP.html#67078" class="Bound">p</a> <a id="67272" href="Demos.HSP.html#53861" class="Function Operator">‚üß</a> <a id="67274" class="Symbol">(</a><a id="67275" href="Demos.HSP.html#67202" class="Bound">f‚àºg</a> <a id="67279" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="67281" href="Demos.HSP.html#67211" class="Bound">œÅ</a><a id="67282" class="Symbol">)</a>        <a id="67291" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚ü©</a>
      <a id="67299" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶</a> <a id="67301" href="Demos.HSP.html#67078" class="Bound">p</a> <a id="67303" href="Demos.HSP.html#53861" class="Function Operator">‚üß</a>   <a id="67307" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="67311" class="Symbol">(</a><a id="67312" href="Demos.HSP.html#67638" class="Function">f</a>  <a id="67315" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="67318" class="Symbol">(</a><a id="67319" href="Demos.HSP.html#67657" class="Function">g</a>  <a id="67322" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="67325" href="Demos.HSP.html#67211" class="Bound">œÅ</a><a id="67326" class="Symbol">))</a>  <a id="67330" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚âàÀò‚ü®</a>  <a id="67335" href="Demos.HSP.html#56518" class="Function">comm-hom-term</a> <a id="67349" href="Demos.HSP.html#67196" class="Bound">fh</a> <a id="67352" href="Demos.HSP.html#67078" class="Bound">p</a> <a id="67354" class="Symbol">(</a><a id="67355" href="Demos.HSP.html#67657" class="Function">g</a> <a id="67357" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="67359" href="Demos.HSP.html#67211" class="Bound">œÅ</a><a id="67360" class="Symbol">)</a>  <a id="67363" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚ü©</a>
    <a id="67369" href="Demos.HSP.html#67638" class="Function">f</a><a id="67370" class="Symbol">(</a><a id="67371" href="Demos.HSP.html#67726" class="Function Operator">‚ü¶</a> <a id="67373" href="Demos.HSP.html#67078" class="Bound">p</a> <a id="67375" href="Demos.HSP.html#67726" class="Function Operator">‚üß·¥¨</a>  <a id="67379" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a>        <a id="67390" class="Symbol">(</a><a id="67391" href="Demos.HSP.html#67657" class="Function">g</a>  <a id="67394" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="67397" href="Demos.HSP.html#67211" class="Bound">œÅ</a><a id="67398" class="Symbol">))</a>  <a id="67402" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a>   <a id="67407" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="67412" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="67414" href="Demos.HSP.html#67196" class="Bound">fh</a> <a id="67417" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="67419" class="Symbol">(</a><a id="67420" href="Demos.HSP.html#67185" class="Bound">Apq</a> <a id="67424" class="Symbol">(</a><a id="67425" href="Demos.HSP.html#67657" class="Function">g</a> <a id="67427" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="67429" href="Demos.HSP.html#67211" class="Bound">œÅ</a><a id="67430" class="Symbol">))</a>   <a id="67435" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
    <a id="67441" href="Demos.HSP.html#67638" class="Function">f</a><a id="67442" class="Symbol">(</a><a id="67443" href="Demos.HSP.html#67726" class="Function Operator">‚ü¶</a> <a id="67445" href="Demos.HSP.html#67080" class="Bound">q</a> <a id="67447" href="Demos.HSP.html#67726" class="Function Operator">‚üß·¥¨</a>  <a id="67451" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a>        <a id="67462" class="Symbol">(</a><a id="67463" href="Demos.HSP.html#67657" class="Function">g</a>  <a id="67466" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="67469" href="Demos.HSP.html#67211" class="Bound">œÅ</a><a id="67470" class="Symbol">))</a>  <a id="67474" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a>   <a id="67479" href="Demos.HSP.html#56518" class="Function">comm-hom-term</a> <a id="67493" href="Demos.HSP.html#67196" class="Bound">fh</a> <a id="67496" href="Demos.HSP.html#67080" class="Bound">q</a> <a id="67498" class="Symbol">(</a><a id="67499" href="Demos.HSP.html#67657" class="Function">g</a> <a id="67501" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="67503" href="Demos.HSP.html#67211" class="Bound">œÅ</a><a id="67504" class="Symbol">)</a>  <a id="67507" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
      <a id="67515" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶</a> <a id="67517" href="Demos.HSP.html#67080" class="Bound">q</a> <a id="67519" href="Demos.HSP.html#53861" class="Function Operator">‚üß</a>   <a id="67523" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="67527" class="Symbol">(</a><a id="67528" href="Demos.HSP.html#67638" class="Function">f</a>  <a id="67531" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="67534" class="Symbol">(</a><a id="67535" href="Demos.HSP.html#67657" class="Function">g</a>  <a id="67538" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="67541" href="Demos.HSP.html#67211" class="Bound">œÅ</a><a id="67542" class="Symbol">))</a>  <a id="67546" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a>   <a id="67551" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="67556" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶</a> <a id="67558" href="Demos.HSP.html#67080" class="Bound">q</a> <a id="67560" href="Demos.HSP.html#53861" class="Function Operator">‚üß</a> <a id="67562" class="Symbol">(</a><a id="67563" href="Demos.HSP.html#67202" class="Bound">f‚àºg</a> <a id="67567" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="67569" href="Demos.HSP.html#67211" class="Bound">œÅ</a><a id="67570" class="Symbol">)</a>        <a id="67579" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
      <a id="67587" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶</a> <a id="67589" href="Demos.HSP.html#67080" class="Bound">q</a> <a id="67591" href="Demos.HSP.html#53861" class="Function Operator">‚üß</a>   <a id="67595" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a>               <a id="67613" href="Demos.HSP.html#67211" class="Bound">œÅ</a>    <a id="67618" href="Relation.Binary.Reasoning.Base.Single.html#2555" class="Function Operator">‚àé</a>
  <a id="67622" class="Keyword">where</a>
  <a id="67630" class="Keyword">private</a> <a id="67638" href="Demos.HSP.html#67638" class="Function">f</a> <a id="67640" class="Symbol">=</a> <a id="67642" href="Demos.HSP.html#7592" class="Field Operator">_‚ü®$‚ü©_</a> <a id="67648" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="67650" href="Demos.HSP.html#67196" class="Bound">fh</a> <a id="67653" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="67655" class="Symbol">;</a> <a id="67657" href="Demos.HSP.html#67657" class="Function">g</a> <a id="67659" class="Symbol">=</a> <a id="67661" href="Demos.HSP.html#7592" class="Field Operator">_‚ü®$‚ü©_</a> <a id="67667" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="67669" href="Demos.HSP.html#67199" class="Bound">gh</a> <a id="67672" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a>
  <a id="67676" class="Keyword">open</a> <a id="67681" href="Demos.HSP.html#53101" class="Module">Environment</a> <a id="67693" href="Demos.HSP.html#67042" class="Bound">ùë®</a>     <a id="67699" class="Keyword">using</a> <a id="67705" class="Symbol">()</a> <a id="67708" class="Keyword">renaming</a> <a id="67717" class="Symbol">(</a> <a id="67719" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶_‚üß</a> <a id="67723" class="Symbol">to</a> <a id="67726" class="Function Operator">‚ü¶_‚üß·¥¨</a> <a id="67731" class="Symbol">)</a>
  <a id="67735" class="Keyword">open</a> <a id="67740" href="Demos.HSP.html#53101" class="Module">Environment</a> <a id="67752" href="Demos.HSP.html#67060" class="Bound">ùë©</a>     <a id="67758" class="Keyword">using</a> <a id="67764" class="Symbol">(</a> <a id="67766" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶_‚üß</a> <a id="67770" class="Symbol">)</a>
  <a id="67774" class="Keyword">open</a> <a id="67779" href="Relation.Binary.Reasoning.Setoid.html" class="Module">SetoidReasoning</a> <a id="67795" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="67798" href="Demos.HSP.html#67060" class="Bound">ùë©</a> <a id="67800" href="Demos.HSP.html#23785" class="Function Operator">]</a>

</pre>
Identities modeled by an algebra \ab{ùë®} are also modeled by every homomorphic image of
\ab{ùë®} and by every subalgebra of \ab{ùë®}.
\ifshort
We refer to these facts as \af{‚äß-H-invar} and \af{‚äß-S-invar}, but omit their formal
statements and proofs, which are analogous to those of \af{‚äß-I-invar}.
\else
These facts are formalized in \agda as follows.

\ifshort\else
<pre class="Agda">

<a id="68190" class="Keyword">module</a> <a id="68197" href="Demos.HSP.html#68197" class="Module">_</a> <a id="68199" class="Symbol">{</a><a id="68200" href="Demos.HSP.html#68200" class="Bound">X</a> <a id="68202" class="Symbol">:</a> <a id="68204" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="68209" href="Demos.HSP.html#8441" class="Generalizable">œá</a><a id="68210" class="Symbol">}{</a><a id="68212" href="Demos.HSP.html#68212" class="Bound">ùë®</a> <a id="68214" class="Symbol">:</a> <a id="68216" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="68224" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="68226" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="68228" class="Symbol">}{</a><a id="68230" href="Demos.HSP.html#68230" class="Bound">ùë©</a> <a id="68232" class="Symbol">:</a> <a id="68234" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="68242" href="Demos.HSP.html#8424" class="Generalizable">Œ≤</a> <a id="68244" href="Demos.HSP.html#8426" class="Generalizable">œÅ·µá</a><a id="68246" class="Symbol">}{</a><a id="68248" href="Demos.HSP.html#68248" class="Bound">p</a> <a id="68250" href="Demos.HSP.html#68250" class="Bound">q</a> <a id="68252" class="Symbol">:</a> <a id="68254" href="Demos.HSP.html#49483" class="Datatype">Term</a> <a id="68259" href="Demos.HSP.html#68200" class="Bound">X</a><a id="68260" class="Symbol">}</a> <a id="68262" class="Keyword">where</a>
</pre>
\fi
<pre class="Agda">

 <a id="68298" href="Demos.HSP.html#68298" class="Function">‚äß-H-invar</a> <a id="68308" class="Symbol">:</a> <a id="68310" href="Demos.HSP.html#68212" class="Bound">ùë®</a> <a id="68312" href="Demos.HSP.html#59149" class="Function Operator">‚äß</a> <a id="68314" href="Demos.HSP.html#68248" class="Bound">p</a> <a id="68316" href="Demos.HSP.html#59149" class="Function Operator">‚âà</a> <a id="68318" href="Demos.HSP.html#68250" class="Bound">q</a> <a id="68320" class="Symbol">‚Üí</a> <a id="68322" href="Demos.HSP.html#68230" class="Bound">ùë©</a> <a id="68324" href="Demos.HSP.html#44539" class="Function Operator">IsHomImageOf</a> <a id="68337" href="Demos.HSP.html#68212" class="Bound">ùë®</a> <a id="68339" class="Symbol">‚Üí</a> <a id="68341" href="Demos.HSP.html#68230" class="Bound">ùë©</a> <a id="68343" href="Demos.HSP.html#59149" class="Function Operator">‚äß</a> <a id="68345" href="Demos.HSP.html#68248" class="Bound">p</a> <a id="68347" href="Demos.HSP.html#59149" class="Function Operator">‚âà</a> <a id="68349" href="Demos.HSP.html#68250" class="Bound">q</a>
 <a id="68352" href="Demos.HSP.html#68298" class="Function">‚äß-H-invar</a> <a id="68362" href="Demos.HSP.html#68362" class="Bound">Apq</a> <a id="68366" class="Symbol">(</a><a id="68367" href="Demos.HSP.html#68367" class="Bound">œÜh</a> <a id="68370" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="68372" href="Demos.HSP.html#68372" class="Bound">œÜE</a><a id="68374" class="Symbol">)</a> <a id="68376" href="Demos.HSP.html#68376" class="Bound">œÅ</a> <a id="68378" class="Symbol">=</a>
  <a id="68382" href="Relation.Binary.Reasoning.Base.Single.html#1916" class="Function Operator">begin</a>
       <a id="68395" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶</a> <a id="68397" href="Demos.HSP.html#68248" class="Bound">p</a> <a id="68399" href="Demos.HSP.html#53861" class="Function Operator">‚üß</a>   <a id="68403" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a>               <a id="68421" href="Demos.HSP.html#68376" class="Bound">œÅ</a>    <a id="68426" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚âàÀò‚ü®</a>  <a id="68431" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="68436" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶</a> <a id="68438" href="Demos.HSP.html#68248" class="Bound">p</a> <a id="68440" href="Demos.HSP.html#53861" class="Function Operator">‚üß</a><a id="68441" class="Symbol">(Œª</a> <a id="68444" href="Demos.HSP.html#68444" class="Bound">_</a> <a id="68446" class="Symbol">‚Üí</a> <a id="68448" href="Demos.HSP.html#12646" class="Function">InvIsInverse ≥</a> <a id="68462" href="Demos.HSP.html#68372" class="Bound">œÜE</a><a id="68464" class="Symbol">)</a>  <a id="68467" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚ü©</a>
       <a id="68476" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶</a> <a id="68478" href="Demos.HSP.html#68248" class="Bound">p</a> <a id="68480" href="Demos.HSP.html#53861" class="Function Operator">‚üß</a>   <a id="68484" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="68488" class="Symbol">(</a><a id="68489" href="Demos.HSP.html#68901" class="Function">œÜ</a> <a id="68491" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="68494" href="Demos.HSP.html#68843" class="Function">œÜ‚Åª¬π</a>  <a id="68499" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="68502" href="Demos.HSP.html#68376" class="Bound">œÅ</a><a id="68503" class="Symbol">)</a>   <a id="68507" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚âàÀò‚ü®</a>  <a id="68512" href="Demos.HSP.html#56518" class="Function">comm-hom-term</a> <a id="68526" href="Demos.HSP.html#68367" class="Bound">œÜh</a> <a id="68529" href="Demos.HSP.html#68248" class="Bound">p</a> <a id="68531" class="Symbol">(</a><a id="68532" href="Demos.HSP.html#68843" class="Function">œÜ‚Åª¬π</a> <a id="68536" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="68538" href="Demos.HSP.html#68376" class="Bound">œÅ</a><a id="68539" class="Symbol">)</a>        <a id="68548" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚ü©</a>
   <a id="68553" href="Demos.HSP.html#68901" class="Function">œÜ</a><a id="68554" class="Symbol">(</a>  <a id="68557" href="Demos.HSP.html#68969" class="Function Operator">‚ü¶</a> <a id="68559" href="Demos.HSP.html#68248" class="Bound">p</a> <a id="68561" href="Demos.HSP.html#68969" class="Function Operator">‚üß·¥¨</a>  <a id="68565" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="68569" class="Symbol">(</a>     <a id="68575" href="Demos.HSP.html#68843" class="Function">œÜ‚Åª¬π</a>  <a id="68580" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="68583" href="Demos.HSP.html#68376" class="Bound">œÅ</a><a id="68584" class="Symbol">))</a>  <a id="68588" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a>   <a id="68593" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="68598" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="68600" href="Demos.HSP.html#68367" class="Bound">œÜh</a> <a id="68603" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="68605" class="Symbol">(</a><a id="68606" href="Demos.HSP.html#68362" class="Bound">Apq</a> <a id="68610" class="Symbol">(</a><a id="68611" href="Demos.HSP.html#68843" class="Function">œÜ‚Åª¬π</a> <a id="68615" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="68617" href="Demos.HSP.html#68376" class="Bound">œÅ</a><a id="68618" class="Symbol">))</a>         <a id="68629" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
   <a id="68634" href="Demos.HSP.html#68901" class="Function">œÜ</a><a id="68635" class="Symbol">(</a>  <a id="68638" href="Demos.HSP.html#68969" class="Function Operator">‚ü¶</a> <a id="68640" href="Demos.HSP.html#68250" class="Bound">q</a> <a id="68642" href="Demos.HSP.html#68969" class="Function Operator">‚üß·¥¨</a>  <a id="68646" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="68650" class="Symbol">(</a>     <a id="68656" href="Demos.HSP.html#68843" class="Function">œÜ‚Åª¬π</a>  <a id="68661" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="68664" href="Demos.HSP.html#68376" class="Bound">œÅ</a><a id="68665" class="Symbol">))</a>  <a id="68669" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a>   <a id="68674" href="Demos.HSP.html#56518" class="Function">comm-hom-term</a> <a id="68688" href="Demos.HSP.html#68367" class="Bound">œÜh</a> <a id="68691" href="Demos.HSP.html#68250" class="Bound">q</a> <a id="68693" class="Symbol">(</a><a id="68694" href="Demos.HSP.html#68843" class="Function">œÜ‚Åª¬π</a> <a id="68698" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="68700" href="Demos.HSP.html#68376" class="Bound">œÅ</a><a id="68701" class="Symbol">)</a>        <a id="68710" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
       <a id="68719" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶</a> <a id="68721" href="Demos.HSP.html#68250" class="Bound">q</a> <a id="68723" href="Demos.HSP.html#53861" class="Function Operator">‚üß</a>   <a id="68727" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="68731" class="Symbol">(</a><a id="68732" href="Demos.HSP.html#68901" class="Function">œÜ</a> <a id="68734" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="68737" href="Demos.HSP.html#68843" class="Function">œÜ‚Åª¬π</a>  <a id="68742" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="68745" href="Demos.HSP.html#68376" class="Bound">œÅ</a><a id="68746" class="Symbol">)</a>   <a id="68750" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a>   <a id="68755" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="68760" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶</a> <a id="68762" href="Demos.HSP.html#68250" class="Bound">q</a> <a id="68764" href="Demos.HSP.html#53861" class="Function Operator">‚üß</a><a id="68765" class="Symbol">(Œª</a> <a id="68768" href="Demos.HSP.html#68768" class="Bound">_</a> <a id="68770" class="Symbol">‚Üí</a> <a id="68772" href="Demos.HSP.html#12646" class="Function">InvIsInverse ≥</a> <a id="68786" href="Demos.HSP.html#68372" class="Bound">œÜE</a><a id="68788" class="Symbol">)</a>  <a id="68791" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
       <a id="68800" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶</a> <a id="68802" href="Demos.HSP.html#68250" class="Bound">q</a> <a id="68804" href="Demos.HSP.html#53861" class="Function Operator">‚üß</a>   <a id="68808" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a>               <a id="68826" href="Demos.HSP.html#68376" class="Bound">œÅ</a>    <a id="68831" href="Relation.Binary.Reasoning.Base.Single.html#2555" class="Function Operator">‚àé</a>
  <a id="68835" class="Keyword">where</a>
  <a id="68843" href="Demos.HSP.html#68843" class="Function">œÜ‚Åª¬π</a> <a id="68847" class="Symbol">:</a> <a id="68849" href="Demos.HSP.html#23838" class="Function Operator">ùïå[</a> <a id="68852" href="Demos.HSP.html#68230" class="Bound">ùë©</a> <a id="68854" href="Demos.HSP.html#23838" class="Function Operator">]</a> <a id="68856" class="Symbol">‚Üí</a> <a id="68858" href="Demos.HSP.html#23838" class="Function Operator">ùïå[</a> <a id="68861" href="Demos.HSP.html#68212" class="Bound">ùë®</a> <a id="68863" href="Demos.HSP.html#23838" class="Function Operator">]</a>
  <a id="68867" href="Demos.HSP.html#68843" class="Function">œÜ‚Åª¬π</a> <a id="68871" class="Symbol">=</a> <a id="68873" href="Demos.HSP.html#14224" class="Function">SurjInv</a> <a id="68881" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="68883" href="Demos.HSP.html#68367" class="Bound">œÜh</a> <a id="68886" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="68888" href="Demos.HSP.html#68372" class="Bound">œÜE</a>
  <a id="68893" class="Keyword">private</a> <a id="68901" href="Demos.HSP.html#68901" class="Function">œÜ</a> <a id="68903" class="Symbol">=</a> <a id="68905" class="Symbol">(</a><a id="68906" href="Demos.HSP.html#7592" class="Field Operator">_‚ü®$‚ü©_</a> <a id="68912" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="68914" href="Demos.HSP.html#68367" class="Bound">œÜh</a> <a id="68917" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a><a id="68918" class="Symbol">)</a>
  <a id="68922" class="Keyword">open</a> <a id="68927" href="Demos.HSP.html#53101" class="Module">Environment</a> <a id="68939" href="Demos.HSP.html#68212" class="Bound">ùë®</a>  <a id="68942" class="Keyword">using</a> <a id="68948" class="Symbol">()</a> <a id="68951" class="Keyword">renaming</a> <a id="68960" class="Symbol">(</a> <a id="68962" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶_‚üß</a> <a id="68966" class="Symbol">to</a> <a id="68969" class="Function Operator">‚ü¶_‚üß·¥¨</a><a id="68973" class="Symbol">)</a>
  <a id="68977" class="Keyword">open</a> <a id="68982" href="Demos.HSP.html#53101" class="Module">Environment</a> <a id="68994" href="Demos.HSP.html#68230" class="Bound">ùë©</a>  <a id="68997" class="Keyword">using</a> <a id="69003" class="Symbol">(</a> <a id="69005" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶_‚üß</a> <a id="69009" class="Symbol">)</a>
  <a id="69013" class="Keyword">open</a> <a id="69018" href="Relation.Binary.Reasoning.Setoid.html" class="Module">SetoidReasoning</a> <a id="69034" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="69037" href="Demos.HSP.html#68230" class="Bound">ùë©</a> <a id="69039" href="Demos.HSP.html#23785" class="Function Operator">]</a>

 <a id="69043" href="Demos.HSP.html#69043" class="Function">‚äß-S-invar</a> <a id="69053" class="Symbol">:</a> <a id="69055" href="Demos.HSP.html#68212" class="Bound">ùë®</a> <a id="69057" href="Demos.HSP.html#59149" class="Function Operator">‚äß</a> <a id="69059" href="Demos.HSP.html#68248" class="Bound">p</a> <a id="69061" href="Demos.HSP.html#59149" class="Function Operator">‚âà</a> <a id="69063" href="Demos.HSP.html#68250" class="Bound">q</a> <a id="69065" class="Symbol">‚Üí</a> <a id="69067" href="Demos.HSP.html#68230" class="Bound">ùë©</a> <a id="69069" href="Demos.HSP.html#45928" class="Function Operator">‚â§</a> <a id="69071" href="Demos.HSP.html#68212" class="Bound">ùë®</a> <a id="69073" class="Symbol">‚Üí</a> <a id="69075" href="Demos.HSP.html#68230" class="Bound">ùë©</a> <a id="69077" href="Demos.HSP.html#59149" class="Function Operator">‚äß</a> <a id="69079" href="Demos.HSP.html#68248" class="Bound">p</a> <a id="69081" href="Demos.HSP.html#59149" class="Function Operator">‚âà</a> <a id="69083" href="Demos.HSP.html#68250" class="Bound">q</a>
 <a id="69086" href="Demos.HSP.html#69043" class="Function">‚äß-S-invar</a> <a id="69096" href="Demos.HSP.html#69096" class="Bound">Apq</a> <a id="69100" href="Demos.HSP.html#69100" class="Bound">B‚â§A</a> <a id="69104" href="Demos.HSP.html#69104" class="Bound">b</a> <a id="69106" class="Symbol">=</a> <a id="69108" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a> <a id="69110" href="Demos.HSP.html#69100" class="Bound">B‚â§A</a> <a id="69114" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a>
  <a id="69118" class="Symbol">(</a> <a id="69120" href="Relation.Binary.Reasoning.Base.Single.html#1916" class="Function Operator">begin</a>
    <a id="69130" href="Demos.HSP.html#69532" class="Function">h</a> <a id="69132" class="Symbol">(</a>  <a id="69135" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶</a> <a id="69137" href="Demos.HSP.html#68248" class="Bound">p</a> <a id="69139" href="Demos.HSP.html#53861" class="Function Operator">‚üß</a>   <a id="69143" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a>       <a id="69153" href="Demos.HSP.html#69104" class="Bound">b</a><a id="69154" class="Symbol">)</a>  <a id="69157" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a>   <a id="69162" href="Demos.HSP.html#56518" class="Function">comm-hom-term</a> <a id="69176" href="Demos.HSP.html#69517" class="Function">hh</a> <a id="69179" href="Demos.HSP.html#68248" class="Bound">p</a> <a id="69181" href="Demos.HSP.html#69104" class="Bound">b</a>  <a id="69184" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
         <a id="69195" href="Demos.HSP.html#69464" class="Function Operator">‚ü¶</a> <a id="69197" href="Demos.HSP.html#68248" class="Bound">p</a> <a id="69199" href="Demos.HSP.html#69464" class="Function Operator">‚üß·¥¨</a>  <a id="69203" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="69207" class="Symbol">(</a><a id="69208" href="Demos.HSP.html#69532" class="Function">h</a> <a id="69210" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="69213" href="Demos.HSP.html#69104" class="Bound">b</a><a id="69214" class="Symbol">)</a>  <a id="69217" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a>   <a id="69222" href="Demos.HSP.html#69096" class="Bound">Apq</a> <a id="69226" class="Symbol">(</a><a id="69227" href="Demos.HSP.html#69532" class="Function">h</a> <a id="69229" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="69231" href="Demos.HSP.html#69104" class="Bound">b</a><a id="69232" class="Symbol">)</a>           <a id="69244" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
         <a id="69255" href="Demos.HSP.html#69464" class="Function Operator">‚ü¶</a> <a id="69257" href="Demos.HSP.html#68250" class="Bound">q</a> <a id="69259" href="Demos.HSP.html#69464" class="Function Operator">‚üß·¥¨</a>  <a id="69263" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="69267" class="Symbol">(</a><a id="69268" href="Demos.HSP.html#69532" class="Function">h</a> <a id="69270" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="69273" href="Demos.HSP.html#69104" class="Bound">b</a><a id="69274" class="Symbol">)</a>  <a id="69277" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚âàÀò‚ü®</a>  <a id="69282" href="Demos.HSP.html#56518" class="Function">comm-hom-term</a> <a id="69296" href="Demos.HSP.html#69517" class="Function">hh</a> <a id="69299" href="Demos.HSP.html#68250" class="Bound">q</a> <a id="69301" href="Demos.HSP.html#69104" class="Bound">b</a>  <a id="69304" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚ü©</a>
    <a id="69310" href="Demos.HSP.html#69532" class="Function">h</a> <a id="69312" class="Symbol">(</a>  <a id="69315" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶</a> <a id="69317" href="Demos.HSP.html#68250" class="Bound">q</a> <a id="69319" href="Demos.HSP.html#53861" class="Function Operator">‚üß</a>   <a id="69323" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a>       <a id="69333" href="Demos.HSP.html#69104" class="Bound">b</a><a id="69334" class="Symbol">)</a>  <a id="69337" href="Relation.Binary.Reasoning.Base.Single.html#2555" class="Function Operator">‚àé</a> <a id="69339" class="Symbol">)</a>
  <a id="69343" class="Keyword">where</a>
  <a id="69351" class="Keyword">open</a> <a id="69356" href="Relation.Binary.Reasoning.Setoid.html" class="Module">SetoidReasoning</a> <a id="69372" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="69375" href="Demos.HSP.html#68212" class="Bound">ùë®</a> <a id="69377" href="Demos.HSP.html#23785" class="Function Operator">]</a>
  <a id="69381" class="Keyword">open</a> <a id="69386" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="69393" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="69396" href="Demos.HSP.html#68212" class="Bound">ùë®</a> <a id="69398" href="Demos.HSP.html#23785" class="Function Operator">]</a>  <a id="69401" class="Keyword">using</a> <a id="69407" class="Symbol">(</a> <a id="69409" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="69413" class="Symbol">)</a>
  <a id="69417" class="Keyword">open</a> <a id="69422" href="Demos.HSP.html#53101" class="Module">Environment</a> <a id="69434" href="Demos.HSP.html#68212" class="Bound">ùë®</a>  <a id="69437" class="Keyword">using</a> <a id="69443" class="Symbol">()</a> <a id="69446" class="Keyword">renaming</a> <a id="69455" class="Symbol">(</a> <a id="69457" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶_‚üß</a> <a id="69461" class="Symbol">to</a> <a id="69464" class="Function Operator">‚ü¶_‚üß·¥¨</a> <a id="69469" class="Symbol">)</a>
  <a id="69473" class="Keyword">open</a> <a id="69478" href="Demos.HSP.html#53101" class="Module">Environment</a> <a id="69490" href="Demos.HSP.html#68230" class="Bound">ùë©</a>  <a id="69493" class="Keyword">using</a> <a id="69499" class="Symbol">(</a> <a id="69501" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶_‚üß</a> <a id="69505" class="Symbol">)</a>
  <a id="69509" class="Keyword">private</a> <a id="69517" href="Demos.HSP.html#69517" class="Function">hh</a> <a id="69520" class="Symbol">=</a> <a id="69522" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="69524" href="Demos.HSP.html#69100" class="Bound">B‚â§A</a> <a id="69528" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="69530" class="Symbol">;</a> <a id="69532" href="Demos.HSP.html#69532" class="Function">h</a> <a id="69534" class="Symbol">=</a> <a id="69536" href="Demos.HSP.html#7592" class="Field Operator">_‚ü®$‚ü©_</a> <a id="69542" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="69544" href="Demos.HSP.html#69517" class="Function">hh</a> <a id="69547" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a>

</pre>
\fi
An identity satisfied by all algebras in an indexed collection is
also satisfied by the product of algebras in the collection.
\ifshort
We refer to this fact as \af{‚äß-P-invar}.
\else

<pre class="Agda">

<a id="69763" class="Keyword">module</a> <a id="69770" href="Demos.HSP.html#69770" class="Module">_</a> <a id="69772" class="Symbol">{</a><a id="69773" href="Demos.HSP.html#69773" class="Bound">X</a> <a id="69775" class="Symbol">:</a> <a id="69777" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="69782" href="Demos.HSP.html#8441" class="Generalizable">œá</a><a id="69783" class="Symbol">}{</a><a id="69785" href="Demos.HSP.html#69785" class="Bound">I</a> <a id="69787" class="Symbol">:</a> <a id="69789" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="69794" href="Demos.HSP.html#8443" class="Generalizable">‚Ñì</a><a id="69795" class="Symbol">}(</a><a id="69797" href="Demos.HSP.html#69797" class="Bound">ùíú</a> <a id="69799" class="Symbol">:</a> <a id="69801" href="Demos.HSP.html#69785" class="Bound">I</a> <a id="69803" class="Symbol">‚Üí</a> <a id="69805" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="69813" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="69815" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="69817" class="Symbol">){</a><a id="69819" href="Demos.HSP.html#69819" class="Bound">p</a> <a id="69821" href="Demos.HSP.html#69821" class="Bound">q</a> <a id="69823" class="Symbol">:</a> <a id="69825" href="Demos.HSP.html#49483" class="Datatype">Term</a> <a id="69830" href="Demos.HSP.html#69773" class="Bound">X</a><a id="69831" class="Symbol">}</a> <a id="69833" class="Keyword">where</a>
 <a id="69840" href="Demos.HSP.html#69840" class="Function">‚äß-P-invar</a> <a id="69850" class="Symbol">:</a> <a id="69852" class="Symbol">(‚àÄ</a> <a id="69855" href="Demos.HSP.html#69855" class="Bound">i</a> <a id="69857" class="Symbol">‚Üí</a> <a id="69859" href="Demos.HSP.html#69797" class="Bound">ùíú</a> <a id="69861" href="Demos.HSP.html#69855" class="Bound">i</a> <a id="69863" href="Demos.HSP.html#59149" class="Function Operator">‚äß</a> <a id="69865" href="Demos.HSP.html#69819" class="Bound">p</a> <a id="69867" href="Demos.HSP.html#59149" class="Function Operator">‚âà</a> <a id="69869" href="Demos.HSP.html#69821" class="Bound">q</a><a id="69870" class="Symbol">)</a> <a id="69872" class="Symbol">‚Üí</a> <a id="69874" href="Demos.HSP.html#29982" class="Function">‚®Ö</a> <a id="69876" href="Demos.HSP.html#69797" class="Bound">ùíú</a> <a id="69878" href="Demos.HSP.html#59149" class="Function Operator">‚äß</a> <a id="69880" href="Demos.HSP.html#69819" class="Bound">p</a> <a id="69882" href="Demos.HSP.html#59149" class="Function Operator">‚âà</a> <a id="69884" href="Demos.HSP.html#69821" class="Bound">q</a>
 <a id="69887" href="Demos.HSP.html#69840" class="Function">‚äß-P-invar</a> <a id="69897" href="Demos.HSP.html#69897" class="Bound">ùíúpq</a> <a id="69901" href="Demos.HSP.html#69901" class="Bound">a</a> <a id="69903" class="Symbol">=</a>
  <a id="69907" href="Relation.Binary.Reasoning.Base.Single.html#1916" class="Function Operator">begin</a>
   <a id="69916" href="Demos.HSP.html#70247" class="Function Operator">‚ü¶</a> <a id="69918" href="Demos.HSP.html#69819" class="Bound">p</a> <a id="69920" href="Demos.HSP.html#70247" class="Function Operator">‚üß‚ÇÅ</a>               <a id="69937" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a>  <a id="69942" href="Demos.HSP.html#69901" class="Bound">a</a>                <a id="69959" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a>   <a id="69964" href="Demos.HSP.html#57068" class="Function">interp-prod</a> <a id="69976" href="Demos.HSP.html#69797" class="Bound">ùíú</a> <a id="69978" href="Demos.HSP.html#69819" class="Bound">p</a> <a id="69980" href="Demos.HSP.html#69901" class="Bound">a</a>  <a id="69983" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
   <a id="69988" class="Symbol">(</a> <a id="69990" class="Symbol">Œª</a> <a id="69992" href="Demos.HSP.html#69992" class="Bound">i</a> <a id="69994" class="Symbol">‚Üí</a> <a id="69996" class="Symbol">(</a><a id="69997" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶</a> <a id="69999" href="Demos.HSP.html#69797" class="Bound">ùíú</a> <a id="70001" href="Demos.HSP.html#69992" class="Bound">i</a> <a id="70003" href="Demos.HSP.html#53861" class="Function Operator">‚üß</a> <a id="70005" href="Demos.HSP.html#69819" class="Bound">p</a><a id="70006" class="Symbol">)</a>  <a id="70009" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a>  <a id="70014" class="Symbol">Œª</a> <a id="70016" href="Demos.HSP.html#70016" class="Bound">x</a> <a id="70018" class="Symbol">‚Üí</a> <a id="70020" class="Symbol">(</a><a id="70021" href="Demos.HSP.html#69901" class="Bound">a</a> <a id="70023" href="Demos.HSP.html#70016" class="Bound">x</a><a id="70024" class="Symbol">)</a> <a id="70026" href="Demos.HSP.html#69992" class="Bound">i</a> <a id="70028" class="Symbol">)</a>  <a id="70031" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a> <a id="70034" class="Symbol">(Œª</a> <a id="70037" href="Demos.HSP.html#70037" class="Bound">i</a> <a id="70039" class="Symbol">‚Üí</a> <a id="70041" href="Demos.HSP.html#69897" class="Bound">ùíúpq</a> <a id="70045" href="Demos.HSP.html#70037" class="Bound">i</a> <a id="70047" class="Symbol">(Œª</a> <a id="70050" href="Demos.HSP.html#70050" class="Bound">x</a> <a id="70052" class="Symbol">‚Üí</a> <a id="70054" class="Symbol">(</a><a id="70055" href="Demos.HSP.html#69901" class="Bound">a</a> <a id="70057" href="Demos.HSP.html#70050" class="Bound">x</a><a id="70058" class="Symbol">)</a> <a id="70060" href="Demos.HSP.html#70037" class="Bound">i</a><a id="70061" class="Symbol">))</a> <a id="70064" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
   <a id="70069" class="Symbol">(</a> <a id="70071" class="Symbol">Œª</a> <a id="70073" href="Demos.HSP.html#70073" class="Bound">i</a> <a id="70075" class="Symbol">‚Üí</a> <a id="70077" class="Symbol">(</a><a id="70078" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶</a> <a id="70080" href="Demos.HSP.html#69797" class="Bound">ùíú</a> <a id="70082" href="Demos.HSP.html#70073" class="Bound">i</a> <a id="70084" href="Demos.HSP.html#53861" class="Function Operator">‚üß</a> <a id="70086" href="Demos.HSP.html#69821" class="Bound">q</a><a id="70087" class="Symbol">)</a>  <a id="70090" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a>  <a id="70095" class="Symbol">Œª</a> <a id="70097" href="Demos.HSP.html#70097" class="Bound">x</a> <a id="70099" class="Symbol">‚Üí</a> <a id="70101" class="Symbol">(</a><a id="70102" href="Demos.HSP.html#69901" class="Bound">a</a> <a id="70104" href="Demos.HSP.html#70097" class="Bound">x</a><a id="70105" class="Symbol">)</a> <a id="70107" href="Demos.HSP.html#70073" class="Bound">i</a> <a id="70109" class="Symbol">)</a>  <a id="70112" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚âàÀò‚ü®</a>  <a id="70117" href="Demos.HSP.html#57068" class="Function">interp-prod</a> <a id="70129" href="Demos.HSP.html#69797" class="Bound">ùíú</a> <a id="70131" href="Demos.HSP.html#69821" class="Bound">q</a> <a id="70133" href="Demos.HSP.html#69901" class="Bound">a</a>  <a id="70136" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚ü©</a>
   <a id="70141" href="Demos.HSP.html#70247" class="Function Operator">‚ü¶</a> <a id="70143" href="Demos.HSP.html#69821" class="Bound">q</a> <a id="70145" href="Demos.HSP.html#70247" class="Function Operator">‚üß‚ÇÅ</a>               <a id="70162" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a>  <a id="70167" href="Demos.HSP.html#69901" class="Bound">a</a>                <a id="70184" href="Relation.Binary.Reasoning.Base.Single.html#2555" class="Function Operator">‚àé</a>
  <a id="70188" class="Keyword">where</a>
  <a id="70196" class="Keyword">open</a> <a id="70201" href="Demos.HSP.html#53101" class="Module">Environment</a> <a id="70213" class="Symbol">(</a><a id="70214" href="Demos.HSP.html#29982" class="Function">‚®Ö</a> <a id="70216" href="Demos.HSP.html#69797" class="Bound">ùíú</a><a id="70217" class="Symbol">)</a>  <a id="70220" class="Keyword">using</a> <a id="70226" class="Symbol">()</a> <a id="70229" class="Keyword">renaming</a> <a id="70238" class="Symbol">(</a> <a id="70240" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶_‚üß</a> <a id="70244" class="Symbol">to</a> <a id="70247" class="Function Operator">‚ü¶_‚üß‚ÇÅ</a> <a id="70252" class="Symbol">)</a>
  <a id="70256" class="Keyword">open</a> <a id="70261" href="Demos.HSP.html#53101" class="Module">Environment</a>        <a id="70280" class="Keyword">using</a> <a id="70286" class="Symbol">(</a> <a id="70288" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶_‚üß</a> <a id="70292" class="Symbol">)</a>
  <a id="70296" class="Keyword">open</a> <a id="70301" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="70308" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="70311" href="Demos.HSP.html#29982" class="Function">‚®Ö</a> <a id="70313" href="Demos.HSP.html#69797" class="Bound">ùíú</a> <a id="70315" href="Demos.HSP.html#23785" class="Function Operator">]</a>    <a id="70320" class="Keyword">using</a> <a id="70326" class="Symbol">(</a> <a id="70328" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="70332" class="Symbol">)</a>
  <a id="70336" class="Keyword">open</a> <a id="70341" href="Relation.Binary.Reasoning.Setoid.html" class="Module">SetoidReasoning</a> <a id="70357" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="70360" href="Demos.HSP.html#29982" class="Function">‚®Ö</a> <a id="70362" href="Demos.HSP.html#69797" class="Bound">ùíú</a> <a id="70364" href="Demos.HSP.html#23785" class="Function Operator">]</a>

</pre>
\fi

The classes \af H \ab{ùí¶}, \af S \ab{ùí¶}, \af P \ab{ùí¶}, and \af V \ab{ùí¶} all satisfy the
same term identities.  We will only use a subset of the inclusions needed to prove this
assertion, and we present here just the facts we need.\footnote{For more details, see
\ualmodule{Varieties.Setoid.Preservation}.}
First, the closure operator \af H preserves the identities modeled by the
given class; this follows almost immediately from the invariance lemma
\af{‚äß-H-invar}.

\ifshort\else
<pre class="Agda">

<a id="70878" class="Keyword">module</a> <a id="70885" href="Demos.HSP.html#70885" class="Module">_</a>  <a id="70888" class="Symbol">{</a><a id="70889" href="Demos.HSP.html#70889" class="Bound">X</a> <a id="70891" class="Symbol">:</a> <a id="70893" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="70898" href="Demos.HSP.html#8441" class="Generalizable">œá</a><a id="70899" class="Symbol">}{</a><a id="70901" href="Demos.HSP.html#70901" class="Bound">ùí¶</a> <a id="70903" class="Symbol">:</a> <a id="70905" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="70909" class="Symbol">(</a><a id="70910" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="70918" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="70920" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="70922" class="Symbol">)</a> <a id="70924" class="Symbol">(</a><a id="70925" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="70927" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="70929" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a> <a id="70932" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="70934" href="Demos.HSP.html#44469" class="Function">ov</a> <a id="70937" href="Demos.HSP.html#8443" class="Generalizable">‚Ñì</a><a id="70938" class="Symbol">)}{</a><a id="70941" href="Demos.HSP.html#70941" class="Bound">p</a> <a id="70943" href="Demos.HSP.html#70943" class="Bound">q</a> <a id="70945" class="Symbol">:</a> <a id="70947" href="Demos.HSP.html#49483" class="Datatype">Term</a> <a id="70952" href="Demos.HSP.html#70889" class="Bound">X</a><a id="70953" class="Symbol">}</a> <a id="70955" class="Keyword">where</a>
</pre>
\fi
<pre class="Agda">

 <a id="70991" href="Demos.HSP.html#70991" class="Function">H-id1</a> <a id="70997" class="Symbol">:</a> <a id="70999" href="Demos.HSP.html#70901" class="Bound">ùí¶</a> <a id="71001" href="Demos.HSP.html#59247" class="Function Operator">‚ä´</a> <a id="71003" href="Demos.HSP.html#70941" class="Bound">p</a> <a id="71005" href="Demos.HSP.html#59247" class="Function Operator">‚âà</a> <a id="71007" href="Demos.HSP.html#70943" class="Bound">q</a> <a id="71009" class="Symbol">‚Üí</a> <a id="71011" href="Demos.HSP.html#65979" class="Function">H</a><a id="71012" class="Symbol">{</a><a id="71013" class="Argument">Œ≤</a> <a id="71015" class="Symbol">=</a> <a id="71017" href="Demos.HSP.html#70918" class="Bound">Œ±</a><a id="71018" class="Symbol">}{</a><a id="71020" href="Demos.HSP.html#70920" class="Bound">œÅ·µÉ</a><a id="71022" class="Symbol">}</a><a id="71023" href="Demos.HSP.html#70937" class="Bound">‚Ñì</a> <a id="71025" href="Demos.HSP.html#70901" class="Bound">ùí¶</a> <a id="71027" href="Demos.HSP.html#59247" class="Function Operator">‚ä´</a> <a id="71029" href="Demos.HSP.html#70941" class="Bound">p</a> <a id="71031" href="Demos.HSP.html#59247" class="Function Operator">‚âà</a> <a id="71033" href="Demos.HSP.html#70943" class="Bound">q</a>
 <a id="71036" href="Demos.HSP.html#70991" class="Function">H-id1</a> <a id="71042" href="Demos.HSP.html#71042" class="Bound">œÉ</a> <a id="71044" href="Demos.HSP.html#71044" class="Bound">ùë©</a> <a id="71046" class="Symbol">(</a><a id="71047" href="Demos.HSP.html#71047" class="Bound">ùë®</a> <a id="71049" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="71051" href="Demos.HSP.html#71051" class="Bound">kA</a> <a id="71054" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="71056" href="Demos.HSP.html#71056" class="Bound">BimgA</a><a id="71061" class="Symbol">)</a> <a id="71063" class="Symbol">=</a> <a id="71065" href="Demos.HSP.html#68298" class="Function">‚äß-H-invar</a><a id="71074" class="Symbol">{</a><a id="71075" class="Argument">p</a> <a id="71077" class="Symbol">=</a> <a id="71079" href="Demos.HSP.html#70941" class="Bound">p</a><a id="71080" class="Symbol">}{</a><a id="71082" href="Demos.HSP.html#70943" class="Bound">q</a><a id="71083" class="Symbol">}</a> <a id="71085" class="Symbol">(</a><a id="71086" href="Demos.HSP.html#71042" class="Bound">œÉ</a> <a id="71088" href="Demos.HSP.html#71047" class="Bound">ùë®</a> <a id="71090" href="Demos.HSP.html#71051" class="Bound">kA</a><a id="71092" class="Symbol">)</a> <a id="71094" href="Demos.HSP.html#71056" class="Bound">BimgA</a>

</pre>
The analogous preservation result for \af S is a consequence of
the invariance lemma \af{‚äß-S-invar}; the converse, which we call
\af{S-id2}, has an equally straightforward proof.

<pre class="Agda">

 <a id="71307" href="Demos.HSP.html#71307" class="Function">S-id1</a> <a id="71313" class="Symbol">:</a> <a id="71315" href="Demos.HSP.html#70901" class="Bound">ùí¶</a> <a id="71317" href="Demos.HSP.html#59247" class="Function Operator">‚ä´</a> <a id="71319" href="Demos.HSP.html#70941" class="Bound">p</a> <a id="71321" href="Demos.HSP.html#59247" class="Function Operator">‚âà</a> <a id="71323" href="Demos.HSP.html#70943" class="Bound">q</a> <a id="71325" class="Symbol">‚Üí</a> <a id="71327" href="Demos.HSP.html#66102" class="Function">S</a><a id="71328" class="Symbol">{</a><a id="71329" class="Argument">Œ≤</a> <a id="71331" class="Symbol">=</a> <a id="71333" href="Demos.HSP.html#70918" class="Bound">Œ±</a><a id="71334" class="Symbol">}{</a><a id="71336" href="Demos.HSP.html#70920" class="Bound">œÅ·µÉ</a><a id="71338" class="Symbol">}</a><a id="71339" href="Demos.HSP.html#70937" class="Bound">‚Ñì</a> <a id="71341" href="Demos.HSP.html#70901" class="Bound">ùí¶</a> <a id="71343" href="Demos.HSP.html#59247" class="Function Operator">‚ä´</a> <a id="71345" href="Demos.HSP.html#70941" class="Bound">p</a> <a id="71347" href="Demos.HSP.html#59247" class="Function Operator">‚âà</a> <a id="71349" href="Demos.HSP.html#70943" class="Bound">q</a>
 <a id="71352" href="Demos.HSP.html#71307" class="Function">S-id1</a> <a id="71358" href="Demos.HSP.html#71358" class="Bound">œÉ</a> <a id="71360" href="Demos.HSP.html#71360" class="Bound">ùë©</a> <a id="71362" class="Symbol">(</a><a id="71363" href="Demos.HSP.html#71363" class="Bound">ùë®</a> <a id="71365" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="71367" href="Demos.HSP.html#71367" class="Bound">kA</a> <a id="71370" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="71372" href="Demos.HSP.html#71372" class="Bound">B‚â§A</a><a id="71375" class="Symbol">)</a> <a id="71377" class="Symbol">=</a> <a id="71379" href="Demos.HSP.html#69043" class="Function">‚äß-S-invar</a><a id="71388" class="Symbol">{</a><a id="71389" class="Argument">p</a> <a id="71391" class="Symbol">=</a> <a id="71393" href="Demos.HSP.html#70941" class="Bound">p</a><a id="71394" class="Symbol">}{</a><a id="71396" href="Demos.HSP.html#70943" class="Bound">q</a><a id="71397" class="Symbol">}</a> <a id="71399" class="Symbol">(</a><a id="71400" href="Demos.HSP.html#71358" class="Bound">œÉ</a> <a id="71402" href="Demos.HSP.html#71363" class="Bound">ùë®</a> <a id="71404" href="Demos.HSP.html#71367" class="Bound">kA</a><a id="71406" class="Symbol">)</a> <a id="71408" href="Demos.HSP.html#71372" class="Bound">B‚â§A</a>

 <a id="71414" href="Demos.HSP.html#71414" class="Function">S-id2</a> <a id="71420" class="Symbol">:</a> <a id="71422" href="Demos.HSP.html#66102" class="Function">S</a> <a id="71424" href="Demos.HSP.html#70937" class="Bound">‚Ñì</a> <a id="71426" href="Demos.HSP.html#70901" class="Bound">ùí¶</a> <a id="71428" href="Demos.HSP.html#59247" class="Function Operator">‚ä´</a> <a id="71430" href="Demos.HSP.html#70941" class="Bound">p</a> <a id="71432" href="Demos.HSP.html#59247" class="Function Operator">‚âà</a> <a id="71434" href="Demos.HSP.html#70943" class="Bound">q</a> <a id="71436" class="Symbol">‚Üí</a> <a id="71438" href="Demos.HSP.html#70901" class="Bound">ùí¶</a> <a id="71440" href="Demos.HSP.html#59247" class="Function Operator">‚ä´</a> <a id="71442" href="Demos.HSP.html#70941" class="Bound">p</a> <a id="71444" href="Demos.HSP.html#59247" class="Function Operator">‚âà</a> <a id="71446" href="Demos.HSP.html#70943" class="Bound">q</a>
 <a id="71449" href="Demos.HSP.html#71414" class="Function">S-id2</a> <a id="71455" href="Demos.HSP.html#71455" class="Bound">Spq</a> <a id="71459" href="Demos.HSP.html#71459" class="Bound">ùë®</a> <a id="71461" href="Demos.HSP.html#71461" class="Bound">kA</a> <a id="71464" class="Symbol">=</a> <a id="71466" href="Demos.HSP.html#71455" class="Bound">Spq</a> <a id="71470" href="Demos.HSP.html#71459" class="Bound">ùë®</a> <a id="71472" class="Symbol">(</a><a id="71473" href="Demos.HSP.html#71459" class="Bound">ùë®</a> <a id="71475" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="71477" class="Symbol">(</a><a id="71478" href="Demos.HSP.html#71461" class="Bound">kA</a> <a id="71481" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="71483" href="Demos.HSP.html#46198" class="Function">‚â§-reflexive</a><a id="71494" class="Symbol">))</a>

</pre>
Finally, we have analogous pairs of implications for \af P and \af V,
\ifshort
  called \af{P-id1}, \af{P-id2}, \af{V-id1} and \af{V-id2}, but we omit the formalizations (\seeshort).
\else
In each case, we will only need the first implication, so we omit the others from this presentation.

<pre class="Agda">

 <a id="71815" href="Demos.HSP.html#71815" class="Function">P-id1</a> <a id="71821" class="Symbol">:</a> <a id="71823" class="Symbol">‚àÄ{</a><a id="71825" href="Demos.HSP.html#71825" class="Bound">Œπ</a><a id="71826" class="Symbol">}</a> <a id="71828" class="Symbol">‚Üí</a> <a id="71830" href="Demos.HSP.html#70901" class="Bound">ùí¶</a> <a id="71832" href="Demos.HSP.html#59247" class="Function Operator">‚ä´</a> <a id="71834" href="Demos.HSP.html#70941" class="Bound">p</a> <a id="71836" href="Demos.HSP.html#59247" class="Function Operator">‚âà</a> <a id="71838" href="Demos.HSP.html#70943" class="Bound">q</a> <a id="71840" class="Symbol">‚Üí</a> <a id="71842" href="Demos.HSP.html#66214" class="Function">P</a><a id="71843" class="Symbol">{</a><a id="71844" class="Argument">Œ≤</a> <a id="71846" class="Symbol">=</a> <a id="71848" href="Demos.HSP.html#70918" class="Bound">Œ±</a><a id="71849" class="Symbol">}{</a><a id="71851" href="Demos.HSP.html#70920" class="Bound">œÅ·µÉ</a><a id="71853" class="Symbol">}</a><a id="71854" href="Demos.HSP.html#70937" class="Bound">‚Ñì</a> <a id="71856" href="Demos.HSP.html#71825" class="Bound">Œπ</a> <a id="71858" href="Demos.HSP.html#70901" class="Bound">ùí¶</a> <a id="71860" href="Demos.HSP.html#59247" class="Function Operator">‚ä´</a> <a id="71862" href="Demos.HSP.html#70941" class="Bound">p</a> <a id="71864" href="Demos.HSP.html#59247" class="Function Operator">‚âà</a> <a id="71866" href="Demos.HSP.html#70943" class="Bound">q</a>
 <a id="71869" href="Demos.HSP.html#71815" class="Function">P-id1</a> <a id="71875" href="Demos.HSP.html#71875" class="Bound">œÉ</a> <a id="71877" href="Demos.HSP.html#71877" class="Bound">ùë®</a> <a id="71879" class="Symbol">(</a><a id="71880" href="Demos.HSP.html#71880" class="Bound">I</a> <a id="71882" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="71884" href="Demos.HSP.html#71884" class="Bound">ùíú</a> <a id="71886" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="71888" href="Demos.HSP.html#71888" class="Bound">kA</a> <a id="71891" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="71893" href="Demos.HSP.html#71893" class="Bound">A‚âÖ‚®ÖA</a><a id="71897" class="Symbol">)</a> <a id="71899" class="Symbol">=</a> <a id="71901" href="Demos.HSP.html#67128" class="Function">‚äß-I-invar</a> <a id="71911" href="Demos.HSP.html#71877" class="Bound">ùë®</a> <a id="71913" href="Demos.HSP.html#70941" class="Bound">p</a> <a id="71915" href="Demos.HSP.html#70943" class="Bound">q</a> <a id="71917" href="Demos.HSP.html#71943" class="Function">IH</a> <a id="71920" class="Symbol">(</a><a id="71921" href="Demos.HSP.html#42611" class="Function">‚âÖ-sym</a> <a id="71927" href="Demos.HSP.html#71893" class="Bound">A‚âÖ‚®ÖA</a><a id="71931" class="Symbol">)</a>
  <a id="71935" class="Keyword">where</a>
  <a id="71943" href="Demos.HSP.html#71943" class="Function">IH</a> <a id="71946" class="Symbol">:</a> <a id="71948" href="Demos.HSP.html#29982" class="Function">‚®Ö</a> <a id="71950" href="Demos.HSP.html#71884" class="Bound">ùíú</a> <a id="71952" href="Demos.HSP.html#59149" class="Function Operator">‚äß</a> <a id="71954" href="Demos.HSP.html#70941" class="Bound">p</a> <a id="71956" href="Demos.HSP.html#59149" class="Function Operator">‚âà</a> <a id="71958" href="Demos.HSP.html#70943" class="Bound">q</a>
  <a id="71962" href="Demos.HSP.html#71943" class="Function">IH</a> <a id="71965" class="Symbol">=</a> <a id="71967" href="Demos.HSP.html#69840" class="Function">‚äß-P-invar</a> <a id="71977" href="Demos.HSP.html#71884" class="Bound">ùíú</a> <a id="71979" class="Symbol">{</a><a id="71980" href="Demos.HSP.html#70941" class="Bound">p</a><a id="71981" class="Symbol">}{</a><a id="71983" href="Demos.HSP.html#70943" class="Bound">q</a><a id="71984" class="Symbol">}</a> <a id="71986" class="Symbol">(Œª</a> <a id="71989" href="Demos.HSP.html#71989" class="Bound">i</a> <a id="71991" class="Symbol">‚Üí</a> <a id="71993" href="Demos.HSP.html#71875" class="Bound">œÉ</a> <a id="71995" class="Symbol">(</a><a id="71996" href="Demos.HSP.html#71884" class="Bound">ùíú</a> <a id="71998" href="Demos.HSP.html#71989" class="Bound">i</a><a id="71999" class="Symbol">)</a> <a id="72001" class="Symbol">(</a><a id="72002" href="Demos.HSP.html#71888" class="Bound">kA</a> <a id="72005" href="Demos.HSP.html#71989" class="Bound">i</a><a id="72006" class="Symbol">))</a>

<a id="72010" class="Keyword">module</a> <a id="72017" href="Demos.HSP.html#72017" class="Module">_</a> <a id="72019" class="Symbol">{</a><a id="72020" href="Demos.HSP.html#72020" class="Bound">X</a> <a id="72022" class="Symbol">:</a> <a id="72024" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="72029" href="Demos.HSP.html#8441" class="Generalizable">œá</a><a id="72030" class="Symbol">}{</a><a id="72032" href="Demos.HSP.html#72032" class="Bound">Œπ</a> <a id="72034" class="Symbol">:</a> <a id="72036" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="72041" class="Symbol">}(</a><a id="72043" href="Demos.HSP.html#72043" class="Bound">‚Ñì</a> <a id="72045" class="Symbol">:</a> <a id="72047" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="72052" class="Symbol">){</a><a id="72054" href="Demos.HSP.html#72054" class="Bound">ùí¶</a> <a id="72056" class="Symbol">:</a> <a id="72058" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="72062" class="Symbol">(</a><a id="72063" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="72071" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="72073" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="72075" class="Symbol">)(</a><a id="72077" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="72079" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="72081" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a> <a id="72084" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="72086" href="Demos.HSP.html#44469" class="Function">ov</a> <a id="72089" href="Demos.HSP.html#72043" class="Bound">‚Ñì</a><a id="72090" class="Symbol">)}{</a><a id="72093" href="Demos.HSP.html#72093" class="Bound">p</a> <a id="72095" href="Demos.HSP.html#72095" class="Bound">q</a> <a id="72097" class="Symbol">:</a> <a id="72099" href="Demos.HSP.html#49483" class="Datatype">Term</a> <a id="72104" href="Demos.HSP.html#72020" class="Bound">X</a><a id="72105" class="Symbol">}</a> <a id="72107" class="Keyword">where</a>
 <a id="72114" class="Keyword">private</a> <a id="72122" href="Demos.HSP.html#72122" class="Function">a‚ÑìŒπ</a> <a id="72126" class="Symbol">=</a> <a id="72128" href="Demos.HSP.html#72071" class="Bound">Œ±</a> <a id="72130" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="72132" href="Demos.HSP.html#72073" class="Bound">œÅ·µÉ</a> <a id="72135" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="72137" href="Demos.HSP.html#72043" class="Bound">‚Ñì</a> <a id="72139" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="72141" href="Demos.HSP.html#72032" class="Bound">Œπ</a>

 <a id="72145" href="Demos.HSP.html#72145" class="Function">V-id1</a> <a id="72151" class="Symbol">:</a> <a id="72153" href="Demos.HSP.html#72054" class="Bound">ùí¶</a> <a id="72155" href="Demos.HSP.html#59247" class="Function Operator">‚ä´</a> <a id="72157" href="Demos.HSP.html#72093" class="Bound">p</a> <a id="72159" href="Demos.HSP.html#59247" class="Function Operator">‚âà</a> <a id="72161" href="Demos.HSP.html#72095" class="Bound">q</a> <a id="72163" class="Symbol">‚Üí</a> <a id="72165" href="Demos.HSP.html#66676" class="Function">V</a> <a id="72167" href="Demos.HSP.html#72043" class="Bound">‚Ñì</a> <a id="72169" href="Demos.HSP.html#72032" class="Bound">Œπ</a> <a id="72171" href="Demos.HSP.html#72054" class="Bound">ùí¶</a> <a id="72173" href="Demos.HSP.html#59247" class="Function Operator">‚ä´</a> <a id="72175" href="Demos.HSP.html#72093" class="Bound">p</a> <a id="72177" href="Demos.HSP.html#59247" class="Function Operator">‚âà</a> <a id="72179" href="Demos.HSP.html#72095" class="Bound">q</a>
 <a id="72182" href="Demos.HSP.html#72145" class="Function">V-id1</a> <a id="72188" href="Demos.HSP.html#72188" class="Bound">œÉ</a> <a id="72190" href="Demos.HSP.html#72190" class="Bound">ùë©</a> <a id="72192" class="Symbol">(</a><a id="72193" href="Demos.HSP.html#72193" class="Bound">ùë®</a> <a id="72195" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="72197" class="Symbol">(</a><a id="72198" href="Demos.HSP.html#72198" class="Bound">‚®ÖA</a> <a id="72201" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="72203" href="Demos.HSP.html#72203" class="Bound">p‚®ÖA</a> <a id="72207" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="72209" href="Demos.HSP.html#72209" class="Bound">A‚â§‚®ÖA</a><a id="72213" class="Symbol">)</a> <a id="72215" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="72217" href="Demos.HSP.html#72217" class="Bound">BimgA</a><a id="72222" class="Symbol">)</a> <a id="72224" class="Symbol">=</a>
  <a id="72228" href="Demos.HSP.html#70991" class="Function">H-id1</a><a id="72233" class="Symbol">{</a><a id="72234" class="Argument">‚Ñì</a> <a id="72236" class="Symbol">=</a> <a id="72238" href="Demos.HSP.html#72122" class="Function">a‚ÑìŒπ</a><a id="72241" class="Symbol">}{</a><a id="72243" class="Argument">ùí¶</a> <a id="72245" class="Symbol">=</a> <a id="72247" href="Demos.HSP.html#66102" class="Function">S</a> <a id="72249" href="Demos.HSP.html#72122" class="Function">a‚ÑìŒπ</a> <a id="72253" class="Symbol">(</a><a id="72254" href="Demos.HSP.html#66214" class="Function">P</a> <a id="72256" class="Symbol">{</a><a id="72257" class="Argument">Œ≤</a> <a id="72259" class="Symbol">=</a> <a id="72261" href="Demos.HSP.html#72071" class="Bound">Œ±</a><a id="72262" class="Symbol">}{</a><a id="72264" href="Demos.HSP.html#72073" class="Bound">œÅ·µÉ</a><a id="72266" class="Symbol">}</a><a id="72267" href="Demos.HSP.html#72043" class="Bound">‚Ñì</a> <a id="72269" href="Demos.HSP.html#72032" class="Bound">Œπ</a> <a id="72271" href="Demos.HSP.html#72054" class="Bound">ùí¶</a><a id="72272" class="Symbol">)}{</a><a id="72275" class="Argument">p</a> <a id="72277" class="Symbol">=</a> <a id="72279" href="Demos.HSP.html#72093" class="Bound">p</a><a id="72280" class="Symbol">}{</a><a id="72282" href="Demos.HSP.html#72095" class="Bound">q</a><a id="72283" class="Symbol">}</a> <a id="72285" href="Demos.HSP.html#72393" class="Function">spK‚äßpq</a> <a id="72292" href="Demos.HSP.html#72190" class="Bound">ùë©</a> <a id="72294" class="Symbol">(</a><a id="72295" href="Demos.HSP.html#72193" class="Bound">ùë®</a> <a id="72297" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="72299" class="Symbol">(</a><a id="72300" href="Demos.HSP.html#72326" class="Function">spA</a> <a id="72304" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="72306" href="Demos.HSP.html#72217" class="Bound">BimgA</a><a id="72311" class="Symbol">))</a>
   <a id="72317" class="Keyword">where</a>
   <a id="72326" href="Demos.HSP.html#72326" class="Function">spA</a> <a id="72330" class="Symbol">:</a> <a id="72332" href="Demos.HSP.html#72193" class="Bound">ùë®</a> <a id="72334" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="72336" href="Demos.HSP.html#66102" class="Function">S</a> <a id="72338" href="Demos.HSP.html#72122" class="Function">a‚ÑìŒπ</a> <a id="72342" class="Symbol">(</a><a id="72343" href="Demos.HSP.html#66214" class="Function">P</a> <a id="72345" class="Symbol">{</a><a id="72346" class="Argument">Œ≤</a> <a id="72348" class="Symbol">=</a> <a id="72350" href="Demos.HSP.html#72071" class="Bound">Œ±</a><a id="72351" class="Symbol">}{</a><a id="72353" href="Demos.HSP.html#72073" class="Bound">œÅ·µÉ</a><a id="72355" class="Symbol">}</a><a id="72356" href="Demos.HSP.html#72043" class="Bound">‚Ñì</a> <a id="72358" href="Demos.HSP.html#72032" class="Bound">Œπ</a> <a id="72360" href="Demos.HSP.html#72054" class="Bound">ùí¶</a><a id="72361" class="Symbol">)</a>
   <a id="72366" href="Demos.HSP.html#72326" class="Function">spA</a> <a id="72370" class="Symbol">=</a> <a id="72372" href="Demos.HSP.html#72198" class="Bound">‚®ÖA</a> <a id="72375" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="72377" class="Symbol">(</a><a id="72378" href="Demos.HSP.html#72203" class="Bound">p‚®ÖA</a> <a id="72382" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="72384" href="Demos.HSP.html#72209" class="Bound">A‚â§‚®ÖA</a><a id="72388" class="Symbol">)</a>
   <a id="72393" href="Demos.HSP.html#72393" class="Function">spK‚äßpq</a> <a id="72400" class="Symbol">:</a> <a id="72402" href="Demos.HSP.html#66102" class="Function">S</a> <a id="72404" href="Demos.HSP.html#72122" class="Function">a‚ÑìŒπ</a> <a id="72408" class="Symbol">(</a><a id="72409" href="Demos.HSP.html#66214" class="Function">P</a> <a id="72411" href="Demos.HSP.html#72043" class="Bound">‚Ñì</a> <a id="72413" href="Demos.HSP.html#72032" class="Bound">Œπ</a> <a id="72415" href="Demos.HSP.html#72054" class="Bound">ùí¶</a><a id="72416" class="Symbol">)</a> <a id="72418" href="Demos.HSP.html#59247" class="Function Operator">‚ä´</a> <a id="72420" href="Demos.HSP.html#72093" class="Bound">p</a> <a id="72422" href="Demos.HSP.html#59247" class="Function Operator">‚âà</a> <a id="72424" href="Demos.HSP.html#72095" class="Bound">q</a>
   <a id="72429" href="Demos.HSP.html#72393" class="Function">spK‚äßpq</a> <a id="72436" class="Symbol">=</a> <a id="72438" href="Demos.HSP.html#71307" class="Function">S-id1</a><a id="72443" class="Symbol">{</a><a id="72444" class="Argument">‚Ñì</a> <a id="72446" class="Symbol">=</a> <a id="72448" href="Demos.HSP.html#72122" class="Function">a‚ÑìŒπ</a><a id="72451" class="Symbol">}{</a><a id="72453" class="Argument">p</a> <a id="72455" class="Symbol">=</a> <a id="72457" href="Demos.HSP.html#72093" class="Bound">p</a><a id="72458" class="Symbol">}{</a><a id="72460" href="Demos.HSP.html#72095" class="Bound">q</a><a id="72461" class="Symbol">}</a> <a id="72463" class="Symbol">(</a><a id="72464" href="Demos.HSP.html#71815" class="Function">P-id1</a><a id="72469" class="Symbol">{</a><a id="72470" class="Argument">‚Ñì</a> <a id="72472" class="Symbol">=</a> <a id="72474" href="Demos.HSP.html#72043" class="Bound">‚Ñì</a><a id="72475" class="Symbol">}</a> <a id="72477" class="Symbol">{</a><a id="72478" class="Argument">ùí¶</a> <a id="72480" class="Symbol">=</a> <a id="72482" href="Demos.HSP.html#72054" class="Bound">ùí¶</a><a id="72483" class="Symbol">}{</a><a id="72485" class="Argument">p</a> <a id="72487" class="Symbol">=</a> <a id="72489" href="Demos.HSP.html#72093" class="Bound">p</a><a id="72490" class="Symbol">}{</a><a id="72492" href="Demos.HSP.html#72095" class="Bound">q</a><a id="72493" class="Symbol">}</a> <a id="72495" href="Demos.HSP.html#72188" class="Bound">œÉ</a><a id="72496" class="Symbol">)</a>
</pre>
\fi

%% -------------------------------------------------------------------------------------

\section{Free Algebras}
\label{free-algebras}
\paragraph*{The absolutely free algebra}
The term algebra \af{ùëª} \ab X is \emph{absolutely free} (or \emph{initial}) for algebras
in the signature \ab{ùëÜ}. That is, for every \ab{ùëÜ}-algebra \ab{ùë®}, the following hold.
\begin{itemize}
\item Every function from \ab{X} to \af{ùïå[ \ab{ùë®} ]} lifts to a homomorphism from \af{ùëª} \ab{X} to \ab{ùë®}.
\item That homomorphism is unique.
\end{itemize}
We formalize the first of these in two steps.\footnote{\agdaalgebras also defines
 \af{free-lift-func} \as{:} \aof{ùîª[~\af{ùëª}~\ab X~]}~\aor{‚ü∂}~\aof{ùîª[~\ab{ùë®}~]}
 for the analogous setoid function.}$^,$\footnote{For the proof of uniqueness,
see \ualmodule{Terms.Setoid.Properties}.}  First is the lifting (\af{free-lift}).
<pre class="Agda">

<a id="73374" class="Keyword">module</a> <a id="73381" href="Demos.HSP.html#73381" class="Module">_</a> <a id="73383" class="Symbol">{</a><a id="73384" href="Demos.HSP.html#73384" class="Bound">X</a> <a id="73386" class="Symbol">:</a> <a id="73388" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="73393" href="Demos.HSP.html#8441" class="Generalizable">œá</a><a id="73394" class="Symbol">}{</a><a id="73396" href="Demos.HSP.html#73396" class="Bound">ùë®</a> <a id="73398" class="Symbol">:</a> <a id="73400" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="73408" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="73410" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="73412" class="Symbol">}(</a><a id="73414" href="Demos.HSP.html#73414" class="Bound">h</a> <a id="73416" class="Symbol">:</a> <a id="73418" href="Demos.HSP.html#73384" class="Bound">X</a> <a id="73420" class="Symbol">‚Üí</a> <a id="73422" href="Demos.HSP.html#23838" class="Function Operator">ùïå[</a> <a id="73425" href="Demos.HSP.html#73396" class="Bound">ùë®</a> <a id="73427" href="Demos.HSP.html#23838" class="Function Operator">]</a><a id="73428" class="Symbol">)</a> <a id="73430" class="Keyword">where</a>
 <a id="73437" href="Demos.HSP.html#73437" class="Function">free-lift</a> <a id="73447" class="Symbol">:</a> <a id="73449" href="Demos.HSP.html#23838" class="Function Operator">ùïå[</a> <a id="73452" href="Demos.HSP.html#51729" class="Function">ùëª</a> <a id="73454" href="Demos.HSP.html#73384" class="Bound">X</a> <a id="73456" href="Demos.HSP.html#23838" class="Function Operator">]</a> <a id="73458" class="Symbol">‚Üí</a> <a id="73460" href="Demos.HSP.html#23838" class="Function Operator">ùïå[</a> <a id="73463" href="Demos.HSP.html#73396" class="Bound">ùë®</a> <a id="73465" href="Demos.HSP.html#23838" class="Function Operator">]</a>
 <a id="73468" href="Demos.HSP.html#73437" class="Function">free-lift</a> <a id="73478" class="Symbol">(</a><a id="73479" href="Demos.HSP.html#49524" class="InductiveConstructor">‚Ñä</a> <a id="73481" href="Demos.HSP.html#73481" class="Bound">x</a><a id="73482" class="Symbol">)</a> <a id="73484" class="Symbol">=</a> <a id="73486" href="Demos.HSP.html#73414" class="Bound">h</a> <a id="73488" href="Demos.HSP.html#73481" class="Bound">x</a>
 <a id="73491" href="Demos.HSP.html#73437" class="Function">free-lift</a> <a id="73501" class="Symbol">(</a><a id="73502" href="Demos.HSP.html#49540" class="InductiveConstructor">node</a> <a id="73507" href="Demos.HSP.html#73507" class="Bound">f</a> <a id="73509" href="Demos.HSP.html#73509" class="Bound">t</a><a id="73510" class="Symbol">)</a> <a id="73512" class="Symbol">=</a> <a id="73514" class="Symbol">(</a><a id="73515" href="Demos.HSP.html#73507" class="Bound">f</a> <a id="73517" href="Demos.HSP.html#23896" class="Function Operator">ÃÇ</a> <a id="73519" href="Demos.HSP.html#73396" class="Bound">ùë®</a><a id="73520" class="Symbol">)</a> <a id="73522" class="Symbol">(Œª</a> <a id="73525" href="Demos.HSP.html#73525" class="Bound">i</a> <a id="73527" class="Symbol">‚Üí</a> <a id="73529" href="Demos.HSP.html#73437" class="Function">free-lift</a> <a id="73539" class="Symbol">(</a><a id="73540" href="Demos.HSP.html#73509" class="Bound">t</a> <a id="73542" href="Demos.HSP.html#73525" class="Bound">i</a><a id="73543" class="Symbol">))</a>

</pre>
\ifshort\else
<pre class="Agda">
 <a id="73586" href="Demos.HSP.html#73586" class="Function">free-lift-func</a> <a id="73601" class="Symbol">:</a> <a id="73603" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="73606" href="Demos.HSP.html#51729" class="Function">ùëª</a> <a id="73608" href="Demos.HSP.html#73384" class="Bound">X</a> <a id="73610" href="Demos.HSP.html#23785" class="Function Operator">]</a> <a id="73612" href="Demos.HSP.html#7491" class="Record Operator">‚ü∂</a> <a id="73614" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="73617" href="Demos.HSP.html#73396" class="Bound">ùë®</a> <a id="73619" href="Demos.HSP.html#23785" class="Function Operator">]</a>
 <a id="73622" href="Demos.HSP.html#73586" class="Function">free-lift-func</a> <a id="73637" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="73641" href="Demos.HSP.html#73641" class="Bound">x</a> <a id="73643" class="Symbol">=</a> <a id="73645" href="Demos.HSP.html#73437" class="Function">free-lift</a> <a id="73655" href="Demos.HSP.html#73641" class="Bound">x</a>
 <a id="73658" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="73663" href="Demos.HSP.html#73586" class="Function">free-lift-func</a> <a id="73678" class="Symbol">=</a> <a id="73680" href="Demos.HSP.html#73769" class="Function">flcong</a>
  <a id="73689" class="Keyword">where</a>
  <a id="73697" class="Keyword">open</a> <a id="73702" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="73709" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="73712" href="Demos.HSP.html#73396" class="Bound">ùë®</a> <a id="73714" href="Demos.HSP.html#23785" class="Function Operator">]</a> <a id="73716" class="Keyword">using</a> <a id="73722" class="Symbol">(</a> <a id="73724" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="73728" class="Symbol">)</a> <a id="73730" class="Keyword">renaming</a> <a id="73739" class="Symbol">(</a> <a id="73741" href="Relation.Binary.Structures.html#1646" class="Function">reflexive</a> <a id="73751" class="Symbol">to</a> <a id="73754" class="Function">reflexive·¥¨</a> <a id="73765" class="Symbol">)</a>
  <a id="73769" href="Demos.HSP.html#73769" class="Function">flcong</a> <a id="73776" class="Symbol">:</a> <a id="73778" class="Symbol">‚àÄ</a> <a id="73780" class="Symbol">{</a><a id="73781" href="Demos.HSP.html#73781" class="Bound">s</a> <a id="73783" href="Demos.HSP.html#73783" class="Bound">t</a><a id="73784" class="Symbol">}</a> <a id="73786" class="Symbol">‚Üí</a> <a id="73788" href="Demos.HSP.html#73781" class="Bound">s</a> <a id="73790" href="Demos.HSP.html#49950" class="Datatype Operator">‚âÉ</a> <a id="73792" href="Demos.HSP.html#73783" class="Bound">t</a> <a id="73794" class="Symbol">‚Üí</a> <a id="73796" href="Demos.HSP.html#73437" class="Function">free-lift</a> <a id="73806" href="Demos.HSP.html#73781" class="Bound">s</a> <a id="73808" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a> <a id="73810" href="Demos.HSP.html#73437" class="Function">free-lift</a> <a id="73820" href="Demos.HSP.html#73783" class="Bound">t</a>
  <a id="73824" href="Demos.HSP.html#73769" class="Function">flcong</a> <a id="73831" class="Symbol">(</a><a id="73832" href="Demos.HSP.html#49994" class="InductiveConstructor">_‚âÉ_.rfl</a> <a id="73840" href="Demos.HSP.html#73840" class="Bound">x</a><a id="73841" class="Symbol">)</a> <a id="73843" class="Symbol">=</a> <a id="73845" href="Demos.HSP.html#73754" class="Function">reflexive·¥¨</a> <a id="73856" class="Symbol">(</a><a id="73857" href="Relation.Binary.PropositionalEquality.Core.html#1130" class="Function">‚â°.cong</a> <a id="73864" href="Demos.HSP.html#73414" class="Bound">h</a> <a id="73866" href="Demos.HSP.html#73840" class="Bound">x</a><a id="73867" class="Symbol">)</a>
  <a id="73871" href="Demos.HSP.html#73769" class="Function">flcong</a> <a id="73878" class="Symbol">(</a><a id="73879" href="Demos.HSP.html#50036" class="InductiveConstructor">_‚âÉ_.gnl</a> <a id="73887" href="Demos.HSP.html#73887" class="Bound">x</a><a id="73888" class="Symbol">)</a> <a id="73890" class="Symbol">=</a> <a id="73892" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="73897" class="Symbol">(</a><a id="73898" href="Demos.HSP.html#22921" class="Field">Interp</a> <a id="73905" href="Demos.HSP.html#73396" class="Bound">ùë®</a><a id="73906" class="Symbol">)</a> <a id="73908" class="Symbol">(</a><a id="73909" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="73916" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="73918" class="Symbol">(Œª</a> <a id="73921" href="Demos.HSP.html#73921" class="Bound">i</a> <a id="73923" class="Symbol">‚Üí</a> <a id="73925" href="Demos.HSP.html#73769" class="Function">flcong</a> <a id="73932" class="Symbol">(</a><a id="73933" href="Demos.HSP.html#73887" class="Bound">x</a> <a id="73935" href="Demos.HSP.html#73921" class="Bound">i</a><a id="73936" class="Symbol">)))</a>

</pre>
\fi
\ifshort\else
At the base step, when the term has the form \aic{‚Ñä}
\ab x, the free lift of \ab h agrees with \ab h; at the inductive step, when the
term has the form \aic{node} \ab f \ab t, we assume (the induction hypothesis)
that the image of each subterm \ab t \ab i under the free lift of \ab h is known
and the free lift is defined by applying \ab f \aof{ÃÇ} \ab{ùë®} to these images.
\fi
Then the lift so defined is shown to be a homomorphism.

<pre class="Agda">

 <a id="74419" href="Demos.HSP.html#74419" class="Function">lift-hom</a> <a id="74428" class="Symbol">:</a> <a id="74430" href="Demos.HSP.html#32650" class="Function">hom</a> <a id="74434" class="Symbol">(</a><a id="74435" href="Demos.HSP.html#51729" class="Function">ùëª</a> <a id="74437" href="Demos.HSP.html#73384" class="Bound">X</a><a id="74438" class="Symbol">)</a> <a id="74440" href="Demos.HSP.html#73396" class="Bound">ùë®</a>
 <a id="74443" href="Demos.HSP.html#74419" class="Function">lift-hom</a> <a id="74452" class="Symbol">=</a> <a id="74454" href="Demos.HSP.html#73586" class="Function">free-lift-func</a> <a id="74469" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a>
   <a id="74474" href="Demos.HSP.html#32604" class="InductiveConstructor">mkhom</a> <a id="74480" class="Symbol">(Œª{</a><a id="74483" href="Demos.HSP.html#74483" class="Bound">_</a><a id="74484" class="Symbol">}{</a><a id="74486" href="Demos.HSP.html#74486" class="Bound">a</a><a id="74487" class="Symbol">}</a> <a id="74489" class="Symbol">‚Üí</a> <a id="74491" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="74496" class="Symbol">(</a><a id="74497" href="Demos.HSP.html#22921" class="Field">Interp</a> <a id="74504" href="Demos.HSP.html#73396" class="Bound">ùë®</a><a id="74505" class="Symbol">)</a> <a id="74507" class="Symbol">(</a><a id="74508" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="74515" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="74517" class="Symbol">(Œª</a> <a id="74520" href="Demos.HSP.html#74520" class="Bound">i</a> <a id="74522" class="Symbol">‚Üí</a> <a id="74524" class="Symbol">(</a><a id="74525" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="74530" href="Demos.HSP.html#73586" class="Function">free-lift-func</a><a id="74544" class="Symbol">){</a><a id="74546" href="Demos.HSP.html#74486" class="Bound">a</a> <a id="74548" href="Demos.HSP.html#74520" class="Bound">i</a><a id="74549" class="Symbol">}</a> <a id="74551" href="Demos.HSP.html#50308" class="Function">‚âÉ-isRefl</a><a id="74559" class="Symbol">)))</a>

</pre>

It turns out that the interpretation of a term \ab p in an environment \ab{Œ∑} is the same
as the free lift of \ab{Œ∑} evaluated at \ab p. We apply this fact a number of times in the sequel.

\ifshort\else
<pre class="Agda">

<a id="74794" class="Keyword">module</a> <a id="74801" href="Demos.HSP.html#74801" class="Module">_</a> <a id="74803" class="Symbol">{</a><a id="74804" href="Demos.HSP.html#74804" class="Bound">X</a> <a id="74806" class="Symbol">:</a> <a id="74808" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="74813" href="Demos.HSP.html#8441" class="Generalizable">œá</a><a id="74814" class="Symbol">}{</a><a id="74816" href="Demos.HSP.html#74816" class="Bound">ùë®</a> <a id="74818" class="Symbol">:</a> <a id="74820" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="74828" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="74830" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="74832" class="Symbol">}</a> <a id="74834" class="Keyword">where</a>
 <a id="74841" class="Keyword">open</a> <a id="74846" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="74853" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="74856" href="Demos.HSP.html#74816" class="Bound">ùë®</a> <a id="74858" href="Demos.HSP.html#23785" class="Function Operator">]</a>  <a id="74861" class="Keyword">using</a> <a id="74867" class="Symbol">(</a> <a id="74869" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="74873" class="Symbol">;</a> <a id="74875" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="74880" class="Symbol">)</a>
 <a id="74883" class="Keyword">open</a> <a id="74888" href="Demos.HSP.html#53101" class="Module">Environment</a> <a id="74900" href="Demos.HSP.html#74816" class="Bound">ùë®</a>  <a id="74903" class="Keyword">using</a> <a id="74909" class="Symbol">(</a> <a id="74911" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶_‚üß</a> <a id="74915" class="Symbol">)</a>
</pre>
\fi
<pre class="Agda">

 <a id="74947" href="Demos.HSP.html#74947" class="Function">free-lift-interp</a> <a id="74964" class="Symbol">:</a> <a id="74966" class="Symbol">(</a><a id="74967" href="Demos.HSP.html#74967" class="Bound">Œ∑</a> <a id="74969" class="Symbol">:</a> <a id="74971" href="Demos.HSP.html#74804" class="Bound">X</a> <a id="74973" class="Symbol">‚Üí</a> <a id="74975" href="Demos.HSP.html#23838" class="Function Operator">ùïå[</a> <a id="74978" href="Demos.HSP.html#74816" class="Bound">ùë®</a> <a id="74980" href="Demos.HSP.html#23838" class="Function Operator">]</a><a id="74981" class="Symbol">)(</a><a id="74983" href="Demos.HSP.html#74983" class="Bound">p</a> <a id="74985" class="Symbol">:</a> <a id="74987" href="Demos.HSP.html#49483" class="Datatype">Term</a> <a id="74992" href="Demos.HSP.html#74804" class="Bound">X</a><a id="74993" class="Symbol">)</a> <a id="74995" class="Symbol">‚Üí</a> <a id="74997" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶</a> <a id="74999" href="Demos.HSP.html#74983" class="Bound">p</a> <a id="75001" href="Demos.HSP.html#53861" class="Function Operator">‚üß</a> <a id="75003" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="75007" href="Demos.HSP.html#74967" class="Bound">Œ∑</a> <a id="75009" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a> <a id="75011" class="Symbol">(</a><a id="75012" href="Demos.HSP.html#73437" class="Function">free-lift</a><a id="75021" class="Symbol">{</a><a id="75022" class="Argument">ùë®</a> <a id="75024" class="Symbol">=</a> <a id="75026" href="Demos.HSP.html#74816" class="Bound">ùë®</a><a id="75027" class="Symbol">}</a> <a id="75029" href="Demos.HSP.html#74967" class="Bound">Œ∑</a><a id="75030" class="Symbol">)</a> <a id="75032" href="Demos.HSP.html#74983" class="Bound">p</a>
 <a id="75035" href="Demos.HSP.html#74947" class="Function">free-lift-interp</a> <a id="75052" href="Demos.HSP.html#75052" class="Bound">Œ∑</a> <a id="75054" class="Symbol">(</a><a id="75055" href="Demos.HSP.html#49524" class="InductiveConstructor">‚Ñä</a> <a id="75057" href="Demos.HSP.html#75057" class="Bound">x</a><a id="75058" class="Symbol">)</a>       <a id="75066" class="Symbol">=</a> <a id="75068" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>
 <a id="75074" href="Demos.HSP.html#74947" class="Function">free-lift-interp</a> <a id="75091" href="Demos.HSP.html#75091" class="Bound">Œ∑</a> <a id="75093" class="Symbol">(</a><a id="75094" href="Demos.HSP.html#49540" class="InductiveConstructor">node</a> <a id="75099" href="Demos.HSP.html#75099" class="Bound">f</a> <a id="75101" href="Demos.HSP.html#75101" class="Bound">t</a><a id="75102" class="Symbol">)</a>  <a id="75105" class="Symbol">=</a> <a id="75107" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="75112" class="Symbol">(</a><a id="75113" href="Demos.HSP.html#22921" class="Field">Interp</a> <a id="75120" href="Demos.HSP.html#74816" class="Bound">ùë®</a><a id="75121" class="Symbol">)</a> <a id="75123" class="Symbol">(</a><a id="75124" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="75131" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="75133" class="Symbol">(</a><a id="75134" href="Demos.HSP.html#74947" class="Function">free-lift-interp</a> <a id="75151" href="Demos.HSP.html#75091" class="Bound">Œ∑</a><a id="75152" class="Symbol">)</a> <a id="75154" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="75156" href="Demos.HSP.html#75101" class="Bound">t</a><a id="75157" class="Symbol">)</a>
</pre>

\paragraph*{The relatively free algebra in theory}
Here we mathematically describe, for a given class \ab{ùí¶} of \ab{ùëÜ}-algebras, the
\emph{relatively free algebra} in \af{S} (\af{P} \ab{ùí¶}) over \ab X, with the
type theoretic version to follow in the next section.

Recall that the term algebra \T{X} is the \emph{free} class of all
\ab{ùëÜ}-algebras. Given an arbitrary class \ab{ùí¶} of \ab{ùëÜ}-algebras, we can't expect that
\T{X} belongs to \ab{ùí¶}, so, in general, we say that \T{X} is free \emph{for} \ab{ùí¶}.
\ifshort\else
Indeed, it might not be possible to find a free algebra that belongs to \ab{ùí¶}.
\fi
However, for any class \ab{ùí¶} we can construct an algebra that is free for \ab{ùí¶}
and belongs to the class \af{S} (\af{P} \ab{ùí¶}), and for most applications this suffices.

The construction of the free algebra in \af{S} (\af{P} \ab{ùí¶})
proceeds by taking the quotient of \T{X} modulo a congruence relation \afld{‚âà}.  One approach is to let
\afld{‚âà} be \af{‚ãÇ}\{\ab{Œ∏} \af{‚àà} \af{Con} (\T{X}) : \T{X} \af{/} \ab{Œ∏} \af{‚àà} \af{S}
\ab{ùí¶}\}.\footnote{\af{Con} (\T{X}) denotes the congruences of \T{X}.}
Equivalently, we let \ab{‚Ñ∞} = \af{Th} \ab{ùí¶} and take \afld{‚âà} to be the least equivalence relation
on the domain of \T{X} such that
\begin{enumerate}
\item for every equation (\ab p , \ab q) \af{‚àà} \af{Th} \ab{ùí¶} and every
environment \ab{œÅ} : \ab X \as{‚Üí} \Term{X}, we have\\
\af{‚ü¶~\ab p~‚üß} \afld{‚ü®\$‚ü©} \ab{œÅ} \afld{‚âà} \af{‚ü¶~\ab q~‚üß} \afld{‚ü®\$‚ü©} \ab{œÅ}, and
\item \afld{‚âà} is a congruence of \T{X}; that is, for every operation symbol \ab
f : \af{‚à£~\ab{ùëÜ}~‚à£}, and for all tuples \ab{s} \ab{t} : \af{‚à•~\ab{ùëÜ}~‚à•} \ab f
‚Üí \Term{X}, the following implication holds:\footnote{Here all
interpretations, denoted by \af{‚ü¶\au{}‚üß}, are with respect to \T{X}.}\\[-8pt]

(‚àÄ i ‚Üí \af{‚ü¶~\ab{s}~\ab i~‚üß}~\afld{‚ü®\$‚ü©}~\ab{œÅ}~\afld{‚âà}~\af{‚ü¶~\ab{t}~\ab
i~‚üß}~\afld{‚ü®\$‚ü©}~\ab{œÅ})
\as{‚Üí} \af{‚ü¶~\ab f~\ab s~‚üß}~\afld{‚ü®\$‚ü©}~\ab{œÅ}~\afld{‚âà}~\af{‚ü¶~\ab f~\ab
t~‚üß}~\afld{‚ü®\$‚ü©}~\ab{œÅ}\\[-8pt]
\end{enumerate}
The \defn{relatively free algebra over} \ab{X} (relative to
\ab{ùí¶}) is defined to be the quotient \Free{X} := \T{X}~\af{/}~\afld{‚âà}.
Evidently, \Free{X} is a subdirect product of the algebras in \{\T{X}~\af{/}~\ab{Œ∏}\!\},
where \ab{Œ∏} ranges over congruences modulo which \T{X} belongs to \af{S}~\ab{ùí¶}.
Thus, \Free{X} \af{‚àà} \af{P}(\af{S}~\ab{ùí¶}) ‚äÜ \af{S}(\af{P}~\ab{ùí¶}), and it follows
that \Free{X} satisfies the identities in \af{Th} \ab{ùí¶} (those modeled by all members of
\ab{ùí¶}).  Indeed, for each pair \ab p \ab q : \Term{X}, if \ab{ùí¶} \af{‚ä´} \ab p \af{‚âà} \ab
q, then \ab p and \ab q must belong to the same \afld{‚âà}-class, so \ab p and \ab q are
identified in \Free{X}. \ifshort\else (Notice that \afld{‚âà} may be empty, in which case
\T{X}~\af{/}~\afld{‚âà} is trivial.) \fi

\paragraph*{The relatively free algebra in \agda}
%Our approach looks a bit different from the informal one described above, because we
%represent quotients as setoids, but the end result is the same.
We start with a type \ab{‚Ñ∞} representing a collection of identities and, instead of
forming a quotient, we take the domain of the free algebra to be a setoid whose
\afld{Carrier} is the type \Term{X} of {ùëÜ}-terms in \ab X and whose equivalence relation
includes all pairs (\ab p , \ab q) \af{‚àà} \Term{X} \af{√ó} \Term{X} such that \ab p \aod{‚âà}
\ab q is derivable from \ab{‚Ñ∞}; that is, \ab{‚Ñ∞} \aod{‚ä¢} \ab X \aod{‚ñπ} \ab p \aod{‚âà} \ab q.
Observe that elements of this setoid are equal iff they belong to the same equivalence
class of the congruence \afld{‚âà} defined above.  Therefore, the setoid so defined, which
we denote by \Free{X}, represents the quotient \T{X}~\af{/}~\afld{‚âà}.
Finally, the interpretation of an operation in the free algebra is simply the operation
itself, which works since \ab{‚Ñ∞} \aod{‚ä¢} \ab X \aod{‚ñπ\au{}‚âà\au{}} is a congruence
relation (see also~\cite{Abel:2021}).

<pre class="Agda">

<a id="79044" class="Keyword">module</a> <a id="FreeAlgebra"></a><a id="79051" href="Demos.HSP.html#79051" class="Module">FreeAlgebra</a> <a id="79063" class="Symbol">{</a><a id="79064" href="Demos.HSP.html#79064" class="Bound">œá</a> <a id="79066" class="Symbol">:</a> <a id="79068" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="79073" class="Symbol">}(</a><a id="79075" href="Demos.HSP.html#79075" class="Bound">‚Ñ∞</a> <a id="79077" class="Symbol">:</a> <a id="79079" class="Symbol">{</a><a id="79080" href="Demos.HSP.html#79080" class="Bound">Y</a> <a id="79082" class="Symbol">:</a> <a id="79084" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="79089" href="Demos.HSP.html#79064" class="Bound">œá</a><a id="79090" class="Symbol">}</a> <a id="79092" class="Symbol">‚Üí</a> <a id="79094" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="79099" class="Symbol">(</a><a id="79100" href="Demos.HSP.html#49483" class="Datatype">Term</a> <a id="79105" href="Demos.HSP.html#79080" class="Bound">Y</a> <a id="79107" href="Data.Product.html#1167" class="Function Operator">√ó</a> <a id="79109" href="Demos.HSP.html#49483" class="Datatype">Term</a> <a id="79114" href="Demos.HSP.html#79080" class="Bound">Y</a><a id="79115" class="Symbol">)</a> <a id="79117" class="Symbol">(</a><a id="79118" href="Demos.HSP.html#44469" class="Function">ov</a> <a id="79121" href="Demos.HSP.html#79064" class="Bound">œá</a><a id="79122" class="Symbol">))</a> <a id="79125" class="Keyword">where</a>

 <a id="FreeAlgebra.FreeDomain"></a><a id="79133" href="Demos.HSP.html#79133" class="Function">FreeDomain</a> <a id="79144" class="Symbol">:</a> <a id="79146" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="79151" href="Demos.HSP.html#79064" class="Bound">œá</a> <a id="79153" class="Symbol">‚Üí</a> <a id="79155" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="79162" class="Symbol">_</a> <a id="79164" class="Symbol">_</a>
 <a id="79167" href="Demos.HSP.html#79133" class="Function">FreeDomain</a> <a id="79178" href="Demos.HSP.html#79178" class="Bound">X</a> <a id="79180" class="Symbol">=</a>
  <a id="79184" class="Keyword">record</a>  <a id="79192" class="Symbol">{</a> <a id="79194" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a>        <a id="79209" class="Symbol">=</a> <a id="79211" href="Demos.HSP.html#49483" class="Datatype">Term</a> <a id="79216" href="Demos.HSP.html#79178" class="Bound">X</a>
          <a id="79228" class="Symbol">;</a> <a id="79230" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a>            <a id="79245" class="Symbol">=</a> <a id="79247" href="Demos.HSP.html#79075" class="Bound">‚Ñ∞</a> <a id="79249" href="Demos.HSP.html#61374" class="Datatype Operator">‚ä¢</a> <a id="79251" href="Demos.HSP.html#79178" class="Bound">X</a> <a id="79253" href="Demos.HSP.html#61374" class="Datatype Operator">‚ñπ_‚âà_</a>
          <a id="79268" class="Symbol">;</a> <a id="79270" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a>  <a id="79285" class="Symbol">=</a> <a id="79287" class="Keyword">record</a> <a id="79294" class="Symbol">{</a> <a id="79296" href="Relation.Binary.Structures.html#1568" class="Field">refl</a> <a id="79301" class="Symbol">=</a> <a id="79303" href="Demos.HSP.html#61792" class="InductiveConstructor">reflexive</a> <a id="79313" class="Symbol">;</a> <a id="79315" href="Relation.Binary.Structures.html#1594" class="Field">sym</a> <a id="79319" class="Symbol">=</a> <a id="79321" href="Demos.HSP.html#61834" class="InductiveConstructor">symmetric</a> <a id="79331" class="Symbol">;</a> <a id="79333" href="Relation.Binary.Structures.html#1620" class="Field">trans</a> <a id="79339" class="Symbol">=</a> <a id="79341" href="Demos.HSP.html#61892" class="InductiveConstructor">transitive</a> <a id="79352" class="Symbol">}</a> <a id="79354" class="Symbol">}</a>

 <a id="FreeAlgebra.ùîΩ[_]"></a><a id="79358" href="Demos.HSP.html#79358" class="Function Operator">ùîΩ[_]</a> <a id="79363" class="Symbol">:</a> <a id="79365" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="79370" href="Demos.HSP.html#79064" class="Bound">œá</a> <a id="79372" class="Symbol">‚Üí</a> <a id="79374" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="79382" class="Symbol">(</a><a id="79383" href="Demos.HSP.html#44469" class="Function">ov</a> <a id="79386" href="Demos.HSP.html#79064" class="Bound">œá</a><a id="79387" class="Symbol">)</a> <a id="79389" class="Symbol">_</a>
 <a id="79392" href="Demos.HSP.html#22892" class="Field">Domain</a> <a id="79399" href="Demos.HSP.html#79358" class="Function Operator">ùîΩ[</a> <a id="79402" href="Demos.HSP.html#79402" class="Bound">X</a> <a id="79404" href="Demos.HSP.html#79358" class="Function Operator">]</a> <a id="79406" class="Symbol">=</a> <a id="79408" href="Demos.HSP.html#79133" class="Function">FreeDomain</a> <a id="79419" href="Demos.HSP.html#79402" class="Bound">X</a>
 <a id="79422" href="Demos.HSP.html#22921" class="Field">Interp</a> <a id="79429" href="Demos.HSP.html#79358" class="Function Operator">ùîΩ[</a> <a id="79432" href="Demos.HSP.html#79432" class="Bound">X</a> <a id="79434" href="Demos.HSP.html#79358" class="Function Operator">]</a> <a id="79436" class="Symbol">=</a> <a id="79438" href="Demos.HSP.html#79457" class="Function">FreeInterp</a> <a id="79449" class="Keyword">where</a>
  <a id="79457" href="Demos.HSP.html#79457" class="Function">FreeInterp</a> <a id="79468" class="Symbol">:</a> <a id="79470" class="Symbol">‚àÄ</a> <a id="79472" class="Symbol">{</a><a id="79473" href="Demos.HSP.html#79473" class="Bound">X</a><a id="79474" class="Symbol">}</a> <a id="79476" class="Symbol">‚Üí</a> <a id="79478" href="Demos.HSP.html#21322" class="Function Operator">‚ü®</a> <a id="79480" href="Demos.HSP.html#6180" class="Bound">ùëÜ</a> <a id="79482" href="Demos.HSP.html#21322" class="Function Operator">‚ü©</a> <a id="79484" class="Symbol">(</a><a id="79485" href="Demos.HSP.html#79133" class="Function">FreeDomain</a> <a id="79496" href="Demos.HSP.html#79473" class="Bound">X</a><a id="79497" class="Symbol">)</a> <a id="79499" href="Demos.HSP.html#7491" class="Record Operator">‚ü∂</a> <a id="79501" href="Demos.HSP.html#79133" class="Function">FreeDomain</a> <a id="79512" href="Demos.HSP.html#79473" class="Bound">X</a>
  <a id="79516" href="Demos.HSP.html#79457" class="Function">FreeInterp</a> <a id="79527" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="79531" class="Symbol">(</a><a id="79532" href="Demos.HSP.html#79532" class="Bound">f</a> <a id="79534" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="79536" href="Demos.HSP.html#79536" class="Bound">ts</a><a id="79538" class="Symbol">)</a>       <a id="79546" class="Symbol">=</a> <a id="79548" href="Demos.HSP.html#49540" class="InductiveConstructor">node</a> <a id="79553" href="Demos.HSP.html#79532" class="Bound">f</a> <a id="79555" href="Demos.HSP.html#79536" class="Bound">ts</a>
  <a id="79560" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="79565" href="Demos.HSP.html#79457" class="Function">FreeInterp</a> <a id="79576" class="Symbol">(</a><a id="79577" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="79584" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="79586" href="Demos.HSP.html#79586" class="Bound">h</a><a id="79587" class="Symbol">)</a>  <a id="79590" class="Symbol">=</a> <a id="79592" href="Demos.HSP.html#61563" class="InductiveConstructor">app</a> <a id="79596" href="Demos.HSP.html#79586" class="Bound">h</a>
</pre>

\paragraph*{The natural epimorphism} % from ùëª X to ùîΩ[ X ]}
We now define the natural epimorphism from \T{X} onto \Free{X} %(= \T{X}~\af{/}~\afld{‚âà})
and prove that its kernel is contained in the collection of identities modeled
by \af{V} \ab{ùí¶}. % (which we represent by \af{Th} (\af{V} \ab{ùí¶})).

\ifshort\else
<pre class="Agda">

<a id="79936" class="Keyword">module</a> <a id="FreeHom"></a><a id="79943" href="Demos.HSP.html#79943" class="Module">FreeHom</a> <a id="79951" class="Symbol">{</a><a id="79952" href="Demos.HSP.html#79952" class="Bound">ùí¶</a> <a id="79954" class="Symbol">:</a> <a id="79956" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="79960" class="Symbol">(</a><a id="79961" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="79969" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="79971" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="79973" class="Symbol">)</a> <a id="79975" class="Symbol">(</a><a id="79976" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="79978" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="79980" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a> <a id="79983" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="79985" href="Demos.HSP.html#44469" class="Function">ov</a> <a id="79988" href="Demos.HSP.html#8443" class="Generalizable">‚Ñì</a><a id="79989" class="Symbol">)}</a> <a id="79992" class="Keyword">where</a>
 <a id="79999" class="Keyword">private</a> <a id="FreeHom.c"></a><a id="80007" href="Demos.HSP.html#80007" class="Function">c</a> <a id="80009" class="Symbol">=</a> <a id="80011" href="Demos.HSP.html#79969" class="Bound">Œ±</a> <a id="80013" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="80015" href="Demos.HSP.html#79971" class="Bound">œÅ·µÉ</a> <a id="80018" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="80020" href="Demos.HSP.html#79988" class="Bound">‚Ñì</a> <a id="80022" class="Symbol">;</a> <a id="FreeHom.Œπ"></a><a id="80024" href="Demos.HSP.html#80024" class="Function">Œπ</a> <a id="80026" class="Symbol">=</a> <a id="80028" href="Demos.HSP.html#44469" class="Function">ov</a> <a id="80031" href="Demos.HSP.html#80007" class="Function">c</a>
 <a id="80034" class="Keyword">open</a> <a id="80039" href="Demos.HSP.html#79051" class="Module">FreeAlgebra</a> <a id="80051" class="Symbol">{</a><a id="80052" class="Argument">œá</a> <a id="80054" class="Symbol">=</a> <a id="80056" href="Demos.HSP.html#80007" class="Function">c</a><a id="80057" class="Symbol">}</a> <a id="80059" class="Symbol">(</a><a id="80060" href="Demos.HSP.html#60552" class="Function">Th</a> <a id="80063" href="Demos.HSP.html#79952" class="Bound">ùí¶</a><a id="80064" class="Symbol">)</a> <a id="80066" class="Keyword">using</a> <a id="80072" class="Symbol">(</a> <a id="80074" href="Demos.HSP.html#79358" class="Function Operator">ùîΩ[_]</a> <a id="80079" class="Symbol">)</a>
</pre>
\fi
<pre class="Agda">

 <a id="FreeHom.epiF[_]"></a><a id="80111" href="Demos.HSP.html#80111" class="Function Operator">epiF[_]</a> <a id="80119" class="Symbol">:</a> <a id="80121" class="Symbol">(</a><a id="80122" href="Demos.HSP.html#80122" class="Bound">X</a> <a id="80124" class="Symbol">:</a> <a id="80126" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="80131" href="Demos.HSP.html#80007" class="Function">c</a><a id="80132" class="Symbol">)</a> <a id="80134" class="Symbol">‚Üí</a> <a id="80136" href="Demos.HSP.html#33827" class="Function">epi</a> <a id="80140" class="Symbol">(</a><a id="80141" href="Demos.HSP.html#51729" class="Function">ùëª</a> <a id="80143" href="Demos.HSP.html#80122" class="Bound">X</a><a id="80144" class="Symbol">)</a> <a id="80146" href="Demos.HSP.html#79358" class="Function Operator">ùîΩ[</a> <a id="80149" href="Demos.HSP.html#80122" class="Bound">X</a> <a id="80151" href="Demos.HSP.html#79358" class="Function Operator">]</a>
 <a id="80154" href="Demos.HSP.html#80111" class="Function Operator">epiF[</a> <a id="80160" href="Demos.HSP.html#80160" class="Bound">X</a> <a id="80162" href="Demos.HSP.html#80111" class="Function Operator">]</a> <a id="80164" class="Symbol">=</a> <a id="80166" href="Demos.HSP.html#80474" class="Function">h</a> <a id="80168" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="80170" href="Demos.HSP.html#80541" class="Function">hepi</a>
  <a id="80177" class="Keyword">where</a>
  <a id="80185" class="Keyword">open</a> <a id="80190" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="80197" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="80200" href="Demos.HSP.html#51729" class="Function">ùëª</a> <a id="80202" href="Demos.HSP.html#80160" class="Bound">X</a> <a id="80204" href="Demos.HSP.html#23785" class="Function Operator">]</a>     <a id="80210" class="Keyword">using</a> <a id="80216" class="Symbol">()</a>        <a id="80226" class="Keyword">renaming</a> <a id="80235" class="Symbol">(</a> <a id="80237" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="80241" class="Symbol">to</a> <a id="80244" class="Field Operator">_‚âà‚ÇÄ_</a>  <a id="80250" class="Symbol">;</a> <a id="80252" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="80257" class="Symbol">to</a> <a id="80260" class="Function">refl·µÄ</a> <a id="80266" class="Symbol">)</a>
  <a id="80270" class="Keyword">open</a> <a id="80275" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="80282" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="80285" href="Demos.HSP.html#79358" class="Function Operator">ùîΩ[</a> <a id="80288" href="Demos.HSP.html#80160" class="Bound">X</a> <a id="80290" href="Demos.HSP.html#79358" class="Function Operator">]</a> <a id="80292" href="Demos.HSP.html#23785" class="Function Operator">]</a>  <a id="80295" class="Keyword">using</a> <a id="80301" class="Symbol">(</a> <a id="80303" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="80308" class="Symbol">)</a>  <a id="80311" class="Keyword">renaming</a> <a id="80320" class="Symbol">(</a> <a id="80322" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="80326" class="Symbol">to</a> <a id="80329" class="Field Operator">_‚âà‚ÇÅ_</a>  <a id="80335" class="Symbol">)</a>

  <a id="80340" href="Demos.HSP.html#80340" class="Function">con</a> <a id="80344" class="Symbol">:</a> <a id="80346" class="Symbol">‚àÄ</a> <a id="80348" class="Symbol">{</a><a id="80349" href="Demos.HSP.html#80349" class="Bound">x</a> <a id="80351" href="Demos.HSP.html#80351" class="Bound">y</a><a id="80352" class="Symbol">}</a> <a id="80354" class="Symbol">‚Üí</a> <a id="80356" href="Demos.HSP.html#80349" class="Bound">x</a> <a id="80358" href="Demos.HSP.html#80244" class="Function Operator">‚âà‚ÇÄ</a> <a id="80361" href="Demos.HSP.html#80351" class="Bound">y</a> <a id="80363" class="Symbol">‚Üí</a> <a id="80365" href="Demos.HSP.html#80349" class="Bound">x</a> <a id="80367" href="Demos.HSP.html#80329" class="Function Operator">‚âà‚ÇÅ</a> <a id="80370" href="Demos.HSP.html#80351" class="Bound">y</a>
  <a id="80374" href="Demos.HSP.html#80340" class="Function">con</a> <a id="80378" class="Symbol">(</a><a id="80379" href="Demos.HSP.html#49994" class="InductiveConstructor">rfl</a> <a id="80383" class="Symbol">{</a><a id="80384" href="Demos.HSP.html#80384" class="Bound">x</a><a id="80385" class="Symbol">}{</a><a id="80387" href="Demos.HSP.html#80387" class="Bound">y</a><a id="80388" class="Symbol">}</a> <a id="80390" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a><a id="80396" class="Symbol">)</a> <a id="80398" class="Symbol">=</a> <a id="80400" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>
  <a id="80407" href="Demos.HSP.html#80340" class="Function">con</a> <a id="80411" class="Symbol">(</a><a id="80412" href="Demos.HSP.html#50036" class="InductiveConstructor">gnl</a> <a id="80416" class="Symbol">{</a><a id="80417" href="Demos.HSP.html#80417" class="Bound">f</a><a id="80418" class="Symbol">}{</a><a id="80420" href="Demos.HSP.html#80420" class="Bound">s</a><a id="80421" class="Symbol">}{</a><a id="80423" href="Demos.HSP.html#80423" class="Bound">t</a><a id="80424" class="Symbol">}</a> <a id="80426" href="Demos.HSP.html#80426" class="Bound">x</a><a id="80427" class="Symbol">)</a> <a id="80429" class="Symbol">=</a> <a id="80431" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="80436" class="Symbol">(</a><a id="80437" href="Demos.HSP.html#22921" class="Field">Interp</a> <a id="80444" href="Demos.HSP.html#79358" class="Function Operator">ùîΩ[</a> <a id="80447" href="Demos.HSP.html#80160" class="Bound">X</a> <a id="80449" href="Demos.HSP.html#79358" class="Function Operator">]</a><a id="80450" class="Symbol">)</a> <a id="80452" class="Symbol">(</a><a id="80453" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="80460" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="80462" href="Demos.HSP.html#80340" class="Function">con</a> <a id="80466" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="80468" href="Demos.HSP.html#80426" class="Bound">x</a><a id="80469" class="Symbol">)</a>

  <a id="80474" href="Demos.HSP.html#80474" class="Function">h</a> <a id="80476" class="Symbol">:</a> <a id="80478" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="80481" href="Demos.HSP.html#51729" class="Function">ùëª</a> <a id="80483" href="Demos.HSP.html#80160" class="Bound">X</a> <a id="80485" href="Demos.HSP.html#23785" class="Function Operator">]</a> <a id="80487" href="Demos.HSP.html#7491" class="Record Operator">‚ü∂</a> <a id="80489" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="80492" href="Demos.HSP.html#79358" class="Function Operator">ùîΩ[</a> <a id="80495" href="Demos.HSP.html#80160" class="Bound">X</a> <a id="80497" href="Demos.HSP.html#79358" class="Function Operator">]</a> <a id="80499" href="Demos.HSP.html#23785" class="Function Operator">]</a>
  <a id="80503" href="Demos.HSP.html#80474" class="Function">h</a> <a id="80505" class="Symbol">=</a> <a id="80507" class="Keyword">record</a> <a id="80514" class="Symbol">{</a> <a id="80516" href="Function.Bundles.html#1919" class="Field">f</a> <a id="80518" class="Symbol">=</a> <a id="80520" href="Function.Base.html#615" class="Function">id</a> <a id="80523" class="Symbol">;</a> <a id="80525" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="80530" class="Symbol">=</a> <a id="80532" href="Demos.HSP.html#80340" class="Function">con</a> <a id="80536" class="Symbol">}</a>

  <a id="80541" href="Demos.HSP.html#80541" class="Function">hepi</a> <a id="80546" class="Symbol">:</a> <a id="80548" href="Demos.HSP.html#33656" class="Record">IsEpi</a> <a id="80554" class="Symbol">(</a><a id="80555" href="Demos.HSP.html#51729" class="Function">ùëª</a> <a id="80557" href="Demos.HSP.html#80160" class="Bound">X</a><a id="80558" class="Symbol">)</a> <a id="80560" href="Demos.HSP.html#79358" class="Function Operator">ùîΩ[</a> <a id="80563" href="Demos.HSP.html#80160" class="Bound">X</a> <a id="80565" href="Demos.HSP.html#79358" class="Function Operator">]</a> <a id="80567" href="Demos.HSP.html#80474" class="Function">h</a>
  <a id="80571" href="Demos.HSP.html#32618" class="Field">compatible</a> <a id="80582" class="Symbol">(</a><a id="80583" href="Demos.HSP.html#33727" class="Field">isHom</a> <a id="80589" href="Demos.HSP.html#80541" class="Function">hepi</a><a id="80593" class="Symbol">)</a> <a id="80595" class="Symbol">=</a> <a id="80597" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="80602" href="Demos.HSP.html#80474" class="Function">h</a> <a id="80604" href="Demos.HSP.html#80260" class="Function">refl·µÄ</a>
  <a id="80612" href="Demos.HSP.html#33752" class="Field">isSurjective</a> <a id="80625" href="Demos.HSP.html#80541" class="Function">hepi</a> <a id="80630" class="Symbol">{</a><a id="80631" href="Demos.HSP.html#80631" class="Bound">y</a><a id="80632" class="Symbol">}</a> <a id="80634" class="Symbol">=</a> <a id="80636" href="Demos.HSP.html#12055" class="InductiveConstructor">eq</a> <a id="80639" href="Demos.HSP.html#80631" class="Bound">y</a> <a id="80641" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>

 <a id="FreeHom.homF[_]"></a><a id="80648" href="Demos.HSP.html#80648" class="Function Operator">homF[_]</a> <a id="80656" class="Symbol">:</a> <a id="80658" class="Symbol">(</a><a id="80659" href="Demos.HSP.html#80659" class="Bound">X</a> <a id="80661" class="Symbol">:</a> <a id="80663" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="80668" href="Demos.HSP.html#80007" class="Function">c</a><a id="80669" class="Symbol">)</a> <a id="80671" class="Symbol">‚Üí</a> <a id="80673" href="Demos.HSP.html#32650" class="Function">hom</a> <a id="80677" class="Symbol">(</a><a id="80678" href="Demos.HSP.html#51729" class="Function">ùëª</a> <a id="80680" href="Demos.HSP.html#80659" class="Bound">X</a><a id="80681" class="Symbol">)</a> <a id="80683" href="Demos.HSP.html#79358" class="Function Operator">ùîΩ[</a> <a id="80686" href="Demos.HSP.html#80659" class="Bound">X</a> <a id="80688" href="Demos.HSP.html#79358" class="Function Operator">]</a>
 <a id="80691" href="Demos.HSP.html#80648" class="Function Operator">homF[</a> <a id="80697" href="Demos.HSP.html#80697" class="Bound">X</a> <a id="80699" href="Demos.HSP.html#80648" class="Function Operator">]</a> <a id="80701" class="Symbol">=</a> <a id="80703" href="Demos.HSP.html#33785" class="Function">IsEpi.HomReduct</a> <a id="80719" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a> <a id="80721" href="Demos.HSP.html#80111" class="Function Operator">epiF[</a> <a id="80727" href="Demos.HSP.html#80697" class="Bound">X</a> <a id="80729" href="Demos.HSP.html#80111" class="Function Operator">]</a> <a id="80731" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a>

 <a id="FreeHom.kernel-in-theory"></a><a id="80735" href="Demos.HSP.html#80735" class="Function">kernel-in-theory</a> <a id="80752" class="Symbol">:</a> <a id="80754" class="Symbol">{</a><a id="80755" href="Demos.HSP.html#80755" class="Bound">X</a> <a id="80757" class="Symbol">:</a> <a id="80759" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="80764" href="Demos.HSP.html#80007" class="Function">c</a><a id="80765" class="Symbol">}</a> <a id="80767" class="Symbol">‚Üí</a> <a id="80769" href="Demos.HSP.html#16046" class="Function">ker</a> <a id="80773" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="80775" href="Demos.HSP.html#80648" class="Function Operator">homF[</a> <a id="80781" href="Demos.HSP.html#80755" class="Bound">X</a> <a id="80783" href="Demos.HSP.html#80648" class="Function Operator">]</a> <a id="80785" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="80787" href="Relation.Unary.html#1742" class="Function Operator">‚äÜ</a> <a id="80789" href="Demos.HSP.html#60552" class="Function">Th</a> <a id="80792" class="Symbol">(</a><a id="80793" href="Demos.HSP.html#66676" class="Function">V</a> <a id="80795" href="Demos.HSP.html#79988" class="Bound">‚Ñì</a> <a id="80797" href="Demos.HSP.html#80024" class="Function">Œπ</a> <a id="80799" href="Demos.HSP.html#79952" class="Bound">ùí¶</a><a id="80800" class="Symbol">)</a>
 <a id="80803" href="Demos.HSP.html#80735" class="Function">kernel-in-theory</a> <a id="80820" class="Symbol">{</a><a id="80821" class="Argument">X</a> <a id="80823" class="Symbol">=</a> <a id="80825" href="Demos.HSP.html#80825" class="Bound">X</a><a id="80826" class="Symbol">}</a> <a id="80828" class="Symbol">{</a><a id="80829" href="Demos.HSP.html#80829" class="Bound">p</a> <a id="80831" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="80833" href="Demos.HSP.html#80833" class="Bound">q</a><a id="80834" class="Symbol">}</a> <a id="80836" href="Demos.HSP.html#80836" class="Bound">pKq</a> <a id="80840" href="Demos.HSP.html#80840" class="Bound">ùë®</a> <a id="80842" href="Demos.HSP.html#80842" class="Bound">vkA</a> <a id="80846" class="Symbol">=</a> <a id="80848" href="Demos.HSP.html#72145" class="Function">V-id1</a> <a id="80854" href="Demos.HSP.html#79988" class="Bound">‚Ñì</a> <a id="80856" class="Symbol">{</a><a id="80857" class="Argument">p</a> <a id="80859" class="Symbol">=</a> <a id="80861" href="Demos.HSP.html#80829" class="Bound">p</a><a id="80862" class="Symbol">}{</a><a id="80864" href="Demos.HSP.html#80833" class="Bound">q</a><a id="80865" class="Symbol">}</a> <a id="80867" class="Symbol">(</a><a id="80868" href="Demos.HSP.html#80891" class="Function">Œ∂</a> <a id="80870" href="Demos.HSP.html#80836" class="Bound">pKq</a><a id="80873" class="Symbol">)</a> <a id="80875" href="Demos.HSP.html#80840" class="Bound">ùë®</a> <a id="80877" href="Demos.HSP.html#80842" class="Bound">vkA</a>
  <a id="80883" class="Keyword">where</a>
  <a id="80891" href="Demos.HSP.html#80891" class="Function">Œ∂</a> <a id="80893" class="Symbol">:</a> <a id="80895" class="Symbol">‚àÄ{</a><a id="80897" href="Demos.HSP.html#80897" class="Bound">p</a> <a id="80899" href="Demos.HSP.html#80899" class="Bound">q</a><a id="80900" class="Symbol">}</a> <a id="80902" class="Symbol">‚Üí</a> <a id="80904" class="Symbol">(</a><a id="80905" href="Demos.HSP.html#60552" class="Function">Th</a> <a id="80908" href="Demos.HSP.html#79952" class="Bound">ùí¶</a><a id="80909" class="Symbol">)</a> <a id="80911" href="Demos.HSP.html#61374" class="Datatype Operator">‚ä¢</a> <a id="80913" href="Demos.HSP.html#80825" class="Bound">X</a> <a id="80915" href="Demos.HSP.html#61374" class="Datatype Operator">‚ñπ</a> <a id="80917" href="Demos.HSP.html#80897" class="Bound">p</a> <a id="80919" href="Demos.HSP.html#61374" class="Datatype Operator">‚âà</a> <a id="80921" href="Demos.HSP.html#80899" class="Bound">q</a> <a id="80923" class="Symbol">‚Üí</a> <a id="80925" href="Demos.HSP.html#79952" class="Bound">ùí¶</a> <a id="80927" href="Demos.HSP.html#59247" class="Function Operator">‚ä´</a> <a id="80929" href="Demos.HSP.html#80897" class="Bound">p</a> <a id="80931" href="Demos.HSP.html#59247" class="Function Operator">‚âà</a> <a id="80933" href="Demos.HSP.html#80899" class="Bound">q</a>
  <a id="80937" href="Demos.HSP.html#80891" class="Function">Œ∂</a> <a id="80939" href="Demos.HSP.html#80939" class="Bound">x</a> <a id="80941" href="Demos.HSP.html#80941" class="Bound">ùë®</a> <a id="80943" href="Demos.HSP.html#80943" class="Bound">kA</a> <a id="80946" class="Symbol">=</a> <a id="80948" href="Demos.HSP.html#63028" class="Function">sound</a> <a id="80954" class="Symbol">(Œª</a> <a id="80957" href="Demos.HSP.html#80957" class="Bound">y</a> <a id="80959" href="Demos.HSP.html#80959" class="Bound">œÅ</a> <a id="80961" class="Symbol">‚Üí</a> <a id="80963" href="Demos.HSP.html#80957" class="Bound">y</a> <a id="80965" href="Demos.HSP.html#80941" class="Bound">ùë®</a> <a id="80967" href="Demos.HSP.html#80943" class="Bound">kA</a> <a id="80970" href="Demos.HSP.html#80959" class="Bound">œÅ</a><a id="80971" class="Symbol">)</a> <a id="80973" href="Demos.HSP.html#80939" class="Bound">x</a> <a id="80975" class="Keyword">where</a> <a id="80981" class="Keyword">open</a> <a id="80986" href="Demos.HSP.html#62728" class="Module">Soundness</a> <a id="80996" class="Symbol">(</a><a id="80997" href="Demos.HSP.html#60552" class="Function">Th</a> <a id="81000" href="Demos.HSP.html#79952" class="Bound">ùí¶</a><a id="81001" class="Symbol">)</a> <a id="81003" href="Demos.HSP.html#80941" class="Bound">ùë®</a>

</pre>
Next we prove an important property of the relatively free algebra
(relative to \ab{ùí¶} and satisfying the identities in \af{Th} \ab{ùí¶}),
which will be used in the formalization of the HSP theorem. Specifically,
we prove that for every algebra \ab{ùë®}, if \ab{ùë®} \af{‚ä®} \ab{Th} (\af{V} \ab{ùí¶}),
then there exists an epimorphism from \Free{A} onto \ab{ùë®}.

\ifshort\else
<pre class="Agda">

<a id="81399" class="Keyword">module</a> <a id="81406" href="Demos.HSP.html#81406" class="Module">_</a>  <a id="81409" class="Symbol">{</a><a id="81410" href="Demos.HSP.html#81410" class="Bound">ùë®</a> <a id="81412" class="Symbol">:</a> <a id="81414" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="81422" class="Symbol">(</a><a id="81423" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="81425" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="81427" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a> <a id="81430" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="81432" href="Demos.HSP.html#8443" class="Generalizable">‚Ñì</a><a id="81433" class="Symbol">)</a> <a id="81435" class="Symbol">(</a><a id="81436" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="81438" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="81440" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a> <a id="81443" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="81445" href="Demos.HSP.html#8443" class="Generalizable">‚Ñì</a><a id="81446" class="Symbol">)}</a> <a id="81449" class="Symbol">{</a><a id="81450" href="Demos.HSP.html#81450" class="Bound">ùí¶</a> <a id="81452" class="Symbol">:</a> <a id="81454" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="81458" class="Symbol">(</a><a id="81459" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="81467" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="81469" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="81471" class="Symbol">)</a> <a id="81473" class="Symbol">(</a><a id="81474" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="81476" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="81478" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a> <a id="81481" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="81483" href="Demos.HSP.html#44469" class="Function">ov</a> <a id="81486" href="Demos.HSP.html#8443" class="Generalizable">‚Ñì</a><a id="81487" class="Symbol">)}</a> <a id="81490" class="Keyword">where</a>
 <a id="81497" class="Keyword">private</a> <a id="81505" href="Demos.HSP.html#81505" class="Function">c</a> <a id="81507" class="Symbol">=</a> <a id="81509" href="Demos.HSP.html#81423" class="Bound">Œ±</a> <a id="81511" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="81513" href="Demos.HSP.html#81427" class="Bound">œÅ·µÉ</a> <a id="81516" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="81518" href="Demos.HSP.html#81432" class="Bound">‚Ñì</a> <a id="81520" class="Symbol">;</a> <a id="81522" href="Demos.HSP.html#81522" class="Function">Œπ</a> <a id="81524" class="Symbol">=</a> <a id="81526" href="Demos.HSP.html#44469" class="Function">ov</a> <a id="81529" href="Demos.HSP.html#81505" class="Function">c</a>
 <a id="81532" class="Keyword">open</a> <a id="81537" href="Demos.HSP.html#79943" class="Module">FreeHom</a> <a id="81545" class="Symbol">{</a><a id="81546" class="Argument">‚Ñì</a> <a id="81548" class="Symbol">=</a> <a id="81550" href="Demos.HSP.html#81432" class="Bound">‚Ñì</a><a id="81551" class="Symbol">}</a> <a id="81553" class="Symbol">{</a><a id="81554" href="Demos.HSP.html#81450" class="Bound">ùí¶</a><a id="81555" class="Symbol">}</a>
 <a id="81558" class="Keyword">open</a> <a id="81563" href="Demos.HSP.html#79051" class="Module">FreeAlgebra</a> <a id="81575" class="Symbol">{</a><a id="81576" class="Argument">œá</a> <a id="81578" class="Symbol">=</a> <a id="81580" href="Demos.HSP.html#81505" class="Function">c</a><a id="81581" class="Symbol">}(</a><a id="81583" href="Demos.HSP.html#60552" class="Function">Th</a> <a id="81586" href="Demos.HSP.html#81450" class="Bound">ùí¶</a><a id="81587" class="Symbol">)</a>  <a id="81590" class="Keyword">using</a> <a id="81596" class="Symbol">(</a> <a id="81598" href="Demos.HSP.html#79358" class="Function Operator">ùîΩ[_]</a> <a id="81603" class="Symbol">)</a>
 <a id="81606" class="Keyword">open</a> <a id="81611" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="81618" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="81621" href="Demos.HSP.html#81410" class="Bound">ùë®</a> <a id="81623" href="Demos.HSP.html#23785" class="Function Operator">]</a>              <a id="81638" class="Keyword">using</a> <a id="81644" class="Symbol">(</a> <a id="81646" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="81651" class="Symbol">;</a> <a id="81653" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="81657" class="Symbol">;</a> <a id="81659" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="81665" class="Symbol">)</a> <a id="81667" class="Keyword">renaming</a>  <a id="81677" class="Symbol">(</a> <a id="81679" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a>  <a id="81688" class="Symbol">to</a> <a id="81691" class="Field">A</a> <a id="81693" class="Symbol">)</a>
</pre>
\fi
<pre class="Agda">

 <a id="81725" href="Demos.HSP.html#81725" class="Function">F-ModTh-epi</a> <a id="81737" class="Symbol">:</a> <a id="81739" href="Demos.HSP.html#81410" class="Bound">ùë®</a> <a id="81741" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="81743" href="Demos.HSP.html#60650" class="Function">Mod</a> <a id="81747" class="Symbol">(</a><a id="81748" href="Demos.HSP.html#60552" class="Function">Th</a> <a id="81751" class="Symbol">(</a><a id="81752" href="Demos.HSP.html#66676" class="Function">V</a> <a id="81754" href="Demos.HSP.html#81432" class="Bound">‚Ñì</a> <a id="81756" href="Demos.HSP.html#81522" class="Function">Œπ</a> <a id="81758" href="Demos.HSP.html#81450" class="Bound">ùí¶</a><a id="81759" class="Symbol">))</a> <a id="81762" class="Symbol">‚Üí</a> <a id="81764" href="Demos.HSP.html#33827" class="Function">epi</a> <a id="81768" href="Demos.HSP.html#79358" class="Function Operator">ùîΩ[</a> <a id="81771" href="Demos.HSP.html#81691" class="Function">A</a> <a id="81773" href="Demos.HSP.html#79358" class="Function Operator">]</a> <a id="81775" href="Demos.HSP.html#81410" class="Bound">ùë®</a>
 <a id="81778" href="Demos.HSP.html#81725" class="Function">F-ModTh-epi</a> <a id="81790" href="Demos.HSP.html#81790" class="Bound">A‚ààModThK</a> <a id="81799" class="Symbol">=</a> <a id="81801" href="Demos.HSP.html#81821" class="Function">œÜ</a> <a id="81803" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="81805" href="Demos.HSP.html#82095" class="Function">isEpi</a>
  <a id="81813" class="Keyword">where</a>
  <a id="81821" href="Demos.HSP.html#81821" class="Function">œÜ</a> <a id="81823" class="Symbol">:</a> <a id="81825" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="81828" href="Demos.HSP.html#79358" class="Function Operator">ùîΩ[</a> <a id="81831" href="Demos.HSP.html#81691" class="Function">A</a> <a id="81833" href="Demos.HSP.html#79358" class="Function Operator">]</a> <a id="81835" href="Demos.HSP.html#23785" class="Function Operator">]</a> <a id="81837" href="Demos.HSP.html#7491" class="Record Operator">‚ü∂</a> <a id="81839" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="81842" href="Demos.HSP.html#81410" class="Bound">ùë®</a> <a id="81844" href="Demos.HSP.html#23785" class="Function Operator">]</a>
  <a id="81848" href="Demos.HSP.html#7592" class="Field Operator">_‚ü®$‚ü©_</a> <a id="81854" href="Demos.HSP.html#81821" class="Function">œÜ</a> <a id="81856" class="Symbol">=</a> <a id="81858" href="Demos.HSP.html#73437" class="Function">free-lift</a><a id="81867" class="Symbol">{</a><a id="81868" class="Argument">ùë®</a> <a id="81870" class="Symbol">=</a> <a id="81872" href="Demos.HSP.html#81410" class="Bound">ùë®</a><a id="81873" class="Symbol">}</a> <a id="81875" href="Function.Base.html#615" class="Function">id</a>
  <a id="81880" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="81885" href="Demos.HSP.html#81821" class="Function">œÜ</a> <a id="81887" class="Symbol">{</a><a id="81888" href="Demos.HSP.html#81888" class="Bound">p</a><a id="81889" class="Symbol">}</a> <a id="81891" class="Symbol">{</a><a id="81892" href="Demos.HSP.html#81892" class="Bound">q</a><a id="81893" class="Symbol">}</a> <a id="81895" href="Demos.HSP.html#81895" class="Bound">pq</a>  <a id="81899" class="Symbol">=</a>  <a id="81902" href="Relation.Binary.Structures.html#1620" class="Function">trans</a>  <a id="81909" class="Symbol">(</a> <a id="81911" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="81915" class="Symbol">(</a><a id="81916" href="Demos.HSP.html#74947" class="Function">free-lift-interp</a><a id="81932" class="Symbol">{</a><a id="81933" class="Argument">ùë®</a> <a id="81935" class="Symbol">=</a> <a id="81937" href="Demos.HSP.html#81410" class="Bound">ùë®</a><a id="81938" class="Symbol">}</a> <a id="81940" href="Function.Base.html#615" class="Function">id</a> <a id="81943" href="Demos.HSP.html#81888" class="Bound">p</a><a id="81944" class="Symbol">)</a> <a id="81946" class="Symbol">)</a>
                     <a id="81969" class="Symbol">(</a>  <a id="81972" href="Relation.Binary.Structures.html#1620" class="Function">trans</a>  <a id="81979" class="Symbol">(</a> <a id="81981" href="Demos.HSP.html#81790" class="Bound">A‚ààModThK</a><a id="81989" class="Symbol">{</a><a id="81990" class="Argument">p</a> <a id="81992" class="Symbol">=</a> <a id="81994" href="Demos.HSP.html#81888" class="Bound">p</a><a id="81995" class="Symbol">}{</a><a id="81997" href="Demos.HSP.html#81892" class="Bound">q</a><a id="81998" class="Symbol">}</a> <a id="82000" class="Symbol">(</a><a id="82001" href="Demos.HSP.html#80735" class="Function">kernel-in-theory</a> <a id="82018" href="Demos.HSP.html#81895" class="Bound">pq</a><a id="82020" class="Symbol">)</a> <a id="82022" href="Function.Base.html#615" class="Function">id</a> <a id="82025" class="Symbol">)</a>
                               <a id="82058" class="Symbol">(</a> <a id="82060" href="Demos.HSP.html#74947" class="Function">free-lift-interp</a><a id="82076" class="Symbol">{</a><a id="82077" class="Argument">ùë®</a> <a id="82079" class="Symbol">=</a> <a id="82081" href="Demos.HSP.html#81410" class="Bound">ùë®</a><a id="82082" class="Symbol">}</a> <a id="82084" href="Function.Base.html#615" class="Function">id</a> <a id="82087" href="Demos.HSP.html#81892" class="Bound">q</a> <a id="82089" class="Symbol">)</a> <a id="82091" class="Symbol">)</a>
  <a id="82095" href="Demos.HSP.html#82095" class="Function">isEpi</a> <a id="82101" class="Symbol">:</a> <a id="82103" href="Demos.HSP.html#33656" class="Record">IsEpi</a> <a id="82109" href="Demos.HSP.html#79358" class="Function Operator">ùîΩ[</a> <a id="82112" href="Demos.HSP.html#81691" class="Function">A</a> <a id="82114" href="Demos.HSP.html#79358" class="Function Operator">]</a> <a id="82116" href="Demos.HSP.html#81410" class="Bound">ùë®</a> <a id="82118" href="Demos.HSP.html#81821" class="Function">œÜ</a>
  <a id="82122" href="Demos.HSP.html#32618" class="Field">compatible</a> <a id="82133" class="Symbol">(</a><a id="82134" href="Demos.HSP.html#33727" class="Field">isHom</a> <a id="82140" href="Demos.HSP.html#82095" class="Function">isEpi</a><a id="82145" class="Symbol">)</a> <a id="82147" class="Symbol">=</a> <a id="82149" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="82154" class="Symbol">(</a><a id="82155" href="Demos.HSP.html#22921" class="Field">Interp</a> <a id="82162" href="Demos.HSP.html#81410" class="Bound">ùë®</a><a id="82163" class="Symbol">)</a> <a id="82165" class="Symbol">(</a><a id="82166" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="82173" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="82175" class="Symbol">(Œª</a> <a id="82178" href="Demos.HSP.html#82178" class="Bound">_</a> <a id="82180" class="Symbol">‚Üí</a> <a id="82182" href="Relation.Binary.Structures.html#1568" class="Function">refl</a><a id="82186" class="Symbol">))</a>
  <a id="82191" href="Demos.HSP.html#33752" class="Field">isSurjective</a> <a id="82204" href="Demos.HSP.html#82095" class="Function">isEpi</a> <a id="82210" class="Symbol">{</a><a id="82211" href="Demos.HSP.html#82211" class="Bound">y</a><a id="82212" class="Symbol">}</a> <a id="82214" class="Symbol">=</a> <a id="82216" href="Demos.HSP.html#12055" class="InductiveConstructor">eq</a> <a id="82219" class="Symbol">(</a><a id="82220" href="Demos.HSP.html#49524" class="InductiveConstructor">‚Ñä</a> <a id="82222" href="Demos.HSP.html#82211" class="Bound">y</a><a id="82223" class="Symbol">)</a> <a id="82225" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>
</pre>
\ifshort\else

\medskip

\noindent Actually, we will need the following lifted version of this result.

<pre class="Agda">

 <a id="82360" href="Demos.HSP.html#82360" class="Function">F-ModTh-epi-lift</a> <a id="82377" class="Symbol">:</a> <a id="82379" href="Demos.HSP.html#81410" class="Bound">ùë®</a> <a id="82381" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="82383" href="Demos.HSP.html#60650" class="Function">Mod</a> <a id="82387" class="Symbol">(</a><a id="82388" href="Demos.HSP.html#60552" class="Function">Th</a> <a id="82391" class="Symbol">(</a><a id="82392" href="Demos.HSP.html#66676" class="Function">V</a> <a id="82394" href="Demos.HSP.html#81432" class="Bound">‚Ñì</a> <a id="82396" href="Demos.HSP.html#81522" class="Function">Œπ</a> <a id="82398" href="Demos.HSP.html#81450" class="Bound">ùí¶</a><a id="82399" class="Symbol">))</a> <a id="82402" class="Symbol">‚Üí</a> <a id="82404" href="Demos.HSP.html#33827" class="Function">epi</a> <a id="82408" href="Demos.HSP.html#79358" class="Function Operator">ùîΩ[</a> <a id="82411" href="Demos.HSP.html#81691" class="Function">A</a> <a id="82413" href="Demos.HSP.html#79358" class="Function Operator">]</a> <a id="82415" class="Symbol">(</a><a id="82416" href="Demos.HSP.html#27763" class="Function">Lift-Alg</a> <a id="82425" href="Demos.HSP.html#81410" class="Bound">ùë®</a> <a id="82427" href="Demos.HSP.html#81522" class="Function">Œπ</a> <a id="82429" href="Demos.HSP.html#81522" class="Function">Œπ</a><a id="82430" class="Symbol">)</a>
 <a id="82433" href="Demos.HSP.html#82360" class="Function">F-ModTh-epi-lift</a> <a id="82450" href="Demos.HSP.html#82450" class="Bound">A‚ààModThK</a> <a id="82459" class="Symbol">=</a> <a id="82461" href="Demos.HSP.html#35454" class="Function">‚àò-epi</a> <a id="82467" class="Symbol">(</a><a id="82468" href="Demos.HSP.html#81725" class="Function">F-ModTh-epi</a> <a id="82480" class="Symbol">(Œª</a> <a id="82483" class="Symbol">{</a><a id="82484" href="Demos.HSP.html#82484" class="Bound">p</a> <a id="82486" href="Demos.HSP.html#82486" class="Bound">q</a><a id="82487" class="Symbol">}</a> <a id="82489" class="Symbol">‚Üí</a> <a id="82491" href="Demos.HSP.html#82450" class="Bound">A‚ààModThK</a><a id="82499" class="Symbol">{</a><a id="82500" class="Argument">p</a> <a id="82502" class="Symbol">=</a> <a id="82504" href="Demos.HSP.html#82484" class="Bound">p</a><a id="82505" class="Symbol">}{</a><a id="82507" href="Demos.HSP.html#82486" class="Bound">q</a><a id="82508" class="Symbol">}))</a> <a id="82512" href="Demos.HSP.html#37411" class="Function">ToLift-epi</a>
</pre>
\fi


%% -------------------------------------------------------------------------------------

\section{Birkhoff's Variety Theorem}

Birkhoff's variety theorem, also known as the HSP theorem, asserts that a class of algebras
is a variety if and only if it is an equational class.  In this section, we present the
statement and proof of the HSP theorem---first in a style similar to
what one finds in textbooks (e.g.,~\cite[Theorem 4.41]{Bergman:2012}),
and then formally in the language of \mltt.

\subsection{Informal proof}
Let \ab{ùí¶} be a class of algebras and recall that \ab{ùí¶} is a \emph{variety} provided
\ifshort\else
it is closed under homomorphisms, subalgebras and products; equivalently,
\fi
\af{V} \ab{ùí¶} ‚äÜ \ab{ùí¶}.
(Observe that \ab{ùí¶} ‚äÜ \af{V} \ab{ùí¶} holds for all \ab{ùí¶} since
\af{V} is a closure operator.)
We call \ab{ùí¶} an \emph{equational class} if it is precisely the class of all models of some set of identities.

\emph{Every equational class is a variety}. Indeed, suppose \ab{ùí¶} is an equational
class axiomatized by term identities \ab{‚Ñ∞}; that is, \ab{ùë®} ‚àà \ab{ùí¶} iff
\ab{ùë®} \af{‚ä®} \ab{‚Ñ∞}. Since the classes \af H \ab{ùí¶}, \af S \ab{ùí¶}, \af P \ab{ùí¶} and
\ab{ùí¶} all satisfy the same set of equations, we have \af{V} \ab{ùí¶} \af{‚ä´} \ab p
\af{‚âà} \ab q for all (\ab p , \ab q) \af{‚àà} \ab{‚Ñ∞}, so \af{V} \ab{ùí¶} ‚äÜ \ab{ùí¶}.

The converse assertion---that \emph{every variety is an equational class}---takes more
work.\footnote{The proof we present here is based on that of~\cite[Theorem 4.41]{Bergman:2012}.}
Let \ab{ùí¶} be an arbitrary variety.  We will describe a set of equations that axiomatizes
\ab{ùí¶}.  A natural choice is \af{Th} \ab{ùí¶}, all equations that hold in \ab{ùí¶}.
Let \ab{ùí¶‚Å∫} := \af{Mod} (\af{Th} \ab{ùí¶}). Clearly, \ab{ùí¶} \aof{‚äÜ} \ab{ùí¶‚Å∫}.  We prove the
converse inclusion. Let \ab{ùë®} \af{‚àà} \ab{ùí¶‚Å∫}; it suffices to find an algebra \ab{ùë≠} \af{‚àà}
\af{S} (\af{P} \ab{ùí¶}) such that \ab{ùë®} is a homomorphic image of \ab{ùë≠}, as this will
show that \ab{ùë®} \af{‚àà} \af{H} (\af{S} (\af{P} \ab{ùí¶})) = \ab{ùí¶}.

Let \ab{X} be such that there exists a \emph{surjective} environment
\ab{œÅ} : \ab{X} \as{‚Üí} \af{ùïå[~\ab{ùë®}~]}.
%\footnote{This is usually done by assuming \ab{X} has cardinality at least max(|~\af{ùïå[~\ab{ùë®}~]}~|, œâ).}
By the \af{lift-hom} lemma, there is an epimorphism \ab{h} from \T{X} onto \af{ùïå[~\ab{ùë®}~]}
that extends \ab{œÅ}.
Now, put \aof{ùîΩ[~\ab{X}~]}~:=~\T{X}/\afld{‚âà}, and let \ab{g} : \T{X} \as{‚Üí} \aof{ùîΩ[~\ab{X}~]}
be the natural epimorphism with kernel \afld{‚âà}. We claim that \af{ker} \ab g \af{‚äÜ}
\af{ker} \ab h. If the claim is true, then there is a map \ab{f} : \aof{ùîΩ[~\ab{X}~]} \as{‚Üí} \ab{ùë®}
such that \ab f \af{‚àò} \ab g = \ab h. Since \ab h is surjective, so is \ab f. Hence \ab{ùë®}
\af{‚àà} \af{ùñß} (\af{ùîΩ} \ab X) \aof{‚äÜ} \ab{ùí¶‚Å∫} completing the proof.
To prove the claim, let \ab u , \ab v \af{‚àà} \T{X} and assume that \ab g \ab u =
\ab g \ab v. Since \T{X} is generated by \ab X, there are terms \ab p, \ab q ‚àà
\T{X} such that \ab u = \af{‚ü¶~\T{X}~‚üß} \ab p and v = \af{‚ü¶~\T{X}~‚üß} \ab
q.
%\footnote{Recall, \af{‚ü¶~\ab{ùë®}~‚üß} \ab t denotes the interpretation of the term
%\ab t in the algebra \ab{ùë®}.}
Therefore,\\[-4pt]

\af{‚ü¶~\Free{X}~‚üß} \ab p = \ab g (\af{‚ü¶~\T{X}~‚üß} \ab p) = \ab g \ab u = \ab g \ab v =
\ab g (\af{‚ü¶~\T{X}~‚üß} \ab q) = \af{‚ü¶~\Free{X}~‚üß} \ab q,\\[8pt]
so \ab{ùí¶} \af{‚ä´} \ab p \af{‚âà} \ab q, thus (\ab p , \ab q) \af{‚àà} \af{Th}
\ab{ùí¶}. Since \ab{ùë®} \af{‚àà} \ab{ùí¶‚Å∫} =
\af{Mod} (\af{Th} \ab{ùí¶}), we obtain \ab{ùë®} \af{‚äß} \ab p \af{‚âà} \ab q, which implies
that \ab h \ab u = (\af{‚ü¶~\ab{ùë®}~‚üß} \ab p) \aofld{‚ü®\$‚ü©} \ab{œÅ} = (\af{‚ü¶~\ab{ùë®}~‚üß} \ab q)
\aofld{‚ü®\$‚ü©} \ab{œÅ} = \ab h \ab v, as desired.

\subsection{Formal proof}
We now show how to express and prove the twin assertions that
(i) every equational class is a variety and (ii) every variety is an equational class.

\paragraph*{Every equational class is a variety}
For (i), we need an arbitrary equational class, which we obtain by starting with an arbitrary
collection \ab{‚Ñ∞} of equations and then defining \ab{ùí¶} = \af{Mod} \ab{‚Ñ∞}, the equational class
determined by \ab{‚Ñ∞}. We prove that \ab{ùí¶} is a variety by showing that
\ab{ùí¶} = \af{V} \ab{ùí¶}. The inclusion \ab{ùí¶} \aof{‚äÜ} \af V \ab{ùí¶}, which holds for all
classes \ab{ùí¶}, is called the \defn{expansive} property of \af{V}.

\ifshort\else
<pre class="Agda">

<a id="86847" class="Keyword">module</a> <a id="86854" href="Demos.HSP.html#86854" class="Module">_</a> <a id="86856" class="Symbol">(</a><a id="86857" href="Demos.HSP.html#86857" class="Bound">ùí¶</a> <a id="86859" class="Symbol">:</a> <a id="86861" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="86865" class="Symbol">(</a><a id="86866" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="86874" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="86876" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="86878" class="Symbol">)</a> <a id="86880" class="Symbol">(</a><a id="86881" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="86883" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="86885" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a> <a id="86888" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="86890" href="Demos.HSP.html#44469" class="Function">ov</a> <a id="86893" href="Demos.HSP.html#8443" class="Generalizable">‚Ñì</a><a id="86894" class="Symbol">)){</a><a id="86897" href="Demos.HSP.html#86897" class="Bound">X</a> <a id="86899" class="Symbol">:</a> <a id="86901" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="86906" class="Symbol">(</a><a id="86907" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="86909" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="86911" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a> <a id="86914" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="86916" href="Demos.HSP.html#8443" class="Generalizable">‚Ñì</a><a id="86917" class="Symbol">)}</a> <a id="86920" class="Keyword">where</a>
 <a id="86927" class="Keyword">private</a> <a id="86935" href="Demos.HSP.html#86935" class="Function">Œπ</a> <a id="86937" class="Symbol">=</a> <a id="86939" href="Demos.HSP.html#44469" class="Function">ov</a> <a id="86942" class="Symbol">(</a><a id="86943" href="Demos.HSP.html#86874" class="Bound">Œ±</a> <a id="86945" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="86947" href="Demos.HSP.html#86876" class="Bound">œÅ·µÉ</a> <a id="86950" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="86952" href="Demos.HSP.html#86893" class="Bound">‚Ñì</a><a id="86953" class="Symbol">)</a>
</pre>
\fi
<pre class="Agda">

 <a id="86985" href="Demos.HSP.html#86985" class="Function">V-expa</a> <a id="86992" class="Symbol">:</a> <a id="86994" href="Demos.HSP.html#86857" class="Bound">ùí¶</a> <a id="86996" href="Relation.Unary.html#1742" class="Function Operator">‚äÜ</a> <a id="86998" href="Demos.HSP.html#66676" class="Function">V</a> <a id="87000" href="Demos.HSP.html#86893" class="Bound">‚Ñì</a> <a id="87002" href="Demos.HSP.html#86935" class="Function">Œπ</a> <a id="87004" href="Demos.HSP.html#86857" class="Bound">ùí¶</a>
 <a id="87007" href="Demos.HSP.html#86985" class="Function">V-expa</a> <a id="87014" class="Symbol">{</a><a id="87015" class="Argument">x</a> <a id="87017" class="Symbol">=</a> <a id="87019" href="Demos.HSP.html#87019" class="Bound">ùë®</a><a id="87020" class="Symbol">}</a> <a id="87022" href="Demos.HSP.html#87022" class="Bound">kA</a> <a id="87025" class="Symbol">=</a> <a id="87027" href="Demos.HSP.html#87019" class="Bound">ùë®</a> <a id="87029" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="87031" class="Symbol">(</a><a id="87032" href="Demos.HSP.html#87019" class="Bound">ùë®</a> <a id="87034" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="87036" class="Symbol">(</a><a id="87037" href="Data.Unit.Polymorphic.Base.html#480" class="Function">‚ä§</a> <a id="87039" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="87041" class="Symbol">(Œª</a> <a id="87044" href="Demos.HSP.html#87044" class="Bound">_</a> <a id="87046" class="Symbol">‚Üí</a> <a id="87048" href="Demos.HSP.html#87019" class="Bound">ùë®</a><a id="87049" class="Symbol">)</a> <a id="87051" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="87053" class="Symbol">(Œª</a> <a id="87056" href="Demos.HSP.html#87056" class="Bound">_</a> <a id="87058" class="Symbol">‚Üí</a> <a id="87060" href="Demos.HSP.html#87022" class="Bound">kA</a><a id="87062" class="Symbol">)</a><a id="87063" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="87065" href="Demos.HSP.html#87395" class="Function">Goal</a><a id="87069" class="Symbol">)</a><a id="87070" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="87072" href="Demos.HSP.html#46198" class="Function">‚â§-reflexive</a><a id="87083" class="Symbol">)</a><a id="87084" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="87086" href="Demos.HSP.html#44784" class="Function">IdHomImage</a>
  <a id="87099" class="Keyword">where</a>
  <a id="87107" class="Keyword">open</a> <a id="87112" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="87119" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="87122" href="Demos.HSP.html#87019" class="Bound">ùë®</a> <a id="87124" href="Demos.HSP.html#23785" class="Function Operator">]</a> <a id="87126" class="Keyword">using</a> <a id="87132" class="Symbol">(</a> <a id="87134" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="87139" class="Symbol">)</a>
  <a id="87143" class="Keyword">open</a> <a id="87148" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="87155" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="87158" href="Demos.HSP.html#29982" class="Function">‚®Ö</a> <a id="87160" class="Symbol">(Œª</a> <a id="87163" href="Demos.HSP.html#87163" class="Bound">_</a> <a id="87165" class="Symbol">‚Üí</a> <a id="87167" href="Demos.HSP.html#87019" class="Bound">ùë®</a><a id="87168" class="Symbol">)</a> <a id="87170" href="Demos.HSP.html#23785" class="Function Operator">]</a> <a id="87172" class="Keyword">using</a> <a id="87178" class="Symbol">()</a> <a id="87181" class="Keyword">renaming</a> <a id="87190" class="Symbol">(</a> <a id="87192" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="87197" class="Symbol">to</a> <a id="87200" class="Function">refl‚®Ö</a> <a id="87206" class="Symbol">)</a>

  <a id="87211" href="Demos.HSP.html#87211" class="Function">to‚®Ö</a> <a id="87215" class="Symbol">:</a> <a id="87217" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="87220" href="Demos.HSP.html#87019" class="Bound">ùë®</a> <a id="87222" href="Demos.HSP.html#23785" class="Function Operator">]</a> <a id="87224" href="Demos.HSP.html#7491" class="Record Operator">‚ü∂</a> <a id="87226" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="87229" href="Demos.HSP.html#29982" class="Function">‚®Ö</a> <a id="87231" class="Symbol">(Œª</a> <a id="87234" href="Demos.HSP.html#87234" class="Bound">_</a> <a id="87236" class="Symbol">‚Üí</a> <a id="87238" href="Demos.HSP.html#87019" class="Bound">ùë®</a><a id="87239" class="Symbol">)</a> <a id="87241" href="Demos.HSP.html#23785" class="Function Operator">]</a>
  <a id="87245" href="Demos.HSP.html#87211" class="Function">to‚®Ö</a> <a id="87249" class="Symbol">=</a> <a id="87251" class="Keyword">record</a> <a id="87258" class="Symbol">{</a> <a id="87260" href="Function.Bundles.html#1919" class="Field">f</a> <a id="87262" class="Symbol">=</a> <a id="87264" class="Symbol">Œª</a> <a id="87266" href="Demos.HSP.html#87266" class="Bound">x</a> <a id="87268" href="Demos.HSP.html#87268" class="Bound">_</a> <a id="87270" class="Symbol">‚Üí</a> <a id="87272" href="Demos.HSP.html#87266" class="Bound">x</a> <a id="87274" class="Symbol">;</a> <a id="87276" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="87281" class="Symbol">=</a> <a id="87283" class="Symbol">Œª</a> <a id="87285" href="Demos.HSP.html#87285" class="Bound">xy</a> <a id="87288" href="Demos.HSP.html#87288" class="Bound">_</a> <a id="87290" class="Symbol">‚Üí</a> <a id="87292" href="Demos.HSP.html#87285" class="Bound">xy</a> <a id="87295" class="Symbol">}</a>

  <a id="87300" href="Demos.HSP.html#87300" class="Function">from‚®Ö</a> <a id="87306" class="Symbol">:</a> <a id="87308" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="87311" href="Demos.HSP.html#29982" class="Function">‚®Ö</a> <a id="87313" class="Symbol">(Œª</a> <a id="87316" href="Demos.HSP.html#87316" class="Bound">_</a> <a id="87318" class="Symbol">‚Üí</a> <a id="87320" href="Demos.HSP.html#87019" class="Bound">ùë®</a><a id="87321" class="Symbol">)</a> <a id="87323" href="Demos.HSP.html#23785" class="Function Operator">]</a> <a id="87325" href="Demos.HSP.html#7491" class="Record Operator">‚ü∂</a> <a id="87327" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="87330" href="Demos.HSP.html#87019" class="Bound">ùë®</a> <a id="87332" href="Demos.HSP.html#23785" class="Function Operator">]</a>
  <a id="87336" href="Demos.HSP.html#87300" class="Function">from‚®Ö</a> <a id="87342" class="Symbol">=</a> <a id="87344" class="Keyword">record</a> <a id="87351" class="Symbol">{</a> <a id="87353" href="Function.Bundles.html#1919" class="Field">f</a> <a id="87355" class="Symbol">=</a> <a id="87357" class="Symbol">Œª</a> <a id="87359" href="Demos.HSP.html#87359" class="Bound">x</a> <a id="87361" class="Symbol">‚Üí</a> <a id="87363" href="Demos.HSP.html#87359" class="Bound">x</a> <a id="87365" href="Data.Unit.Polymorphic.Base.html#524" class="Function">tt</a> <a id="87368" class="Symbol">;</a> <a id="87370" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="87375" class="Symbol">=</a> <a id="87377" class="Symbol">Œª</a> <a id="87379" href="Demos.HSP.html#87379" class="Bound">xy</a> <a id="87382" class="Symbol">‚Üí</a> <a id="87384" href="Demos.HSP.html#87379" class="Bound">xy</a> <a id="87387" href="Data.Unit.Polymorphic.Base.html#524" class="Function">tt</a> <a id="87390" class="Symbol">}</a>

  <a id="87395" href="Demos.HSP.html#87395" class="Function">Goal</a> <a id="87400" class="Symbol">:</a> <a id="87402" href="Demos.HSP.html#87019" class="Bound">ùë®</a> <a id="87404" href="Demos.HSP.html#41145" class="Record Operator">‚âÖ</a> <a id="87406" href="Demos.HSP.html#29982" class="Function">‚®Ö</a> <a id="87408" class="Symbol">(Œª</a> <a id="87411" href="Demos.HSP.html#87411" class="Bound">x</a> <a id="87413" class="Symbol">‚Üí</a> <a id="87415" href="Demos.HSP.html#87019" class="Bound">ùë®</a><a id="87416" class="Symbol">)</a>
  <a id="87420" href="Demos.HSP.html#87395" class="Function">Goal</a> <a id="87425" class="Symbol">=</a> <a id="87427" href="Demos.HSP.html#41204" class="InductiveConstructor">mkiso</a> <a id="87433" class="Symbol">(</a><a id="87434" href="Demos.HSP.html#87211" class="Function">to‚®Ö</a> <a id="87438" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="87440" href="Demos.HSP.html#32604" class="InductiveConstructor">mkhom</a> <a id="87446" href="Demos.HSP.html#87200" class="Function">refl‚®Ö</a><a id="87451" class="Symbol">)</a> <a id="87453" class="Symbol">(</a><a id="87454" href="Demos.HSP.html#87300" class="Function">from‚®Ö</a> <a id="87460" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="87462" href="Demos.HSP.html#32604" class="InductiveConstructor">mkhom</a> <a id="87468" href="Relation.Binary.Structures.html#1568" class="Function">refl</a><a id="87472" class="Symbol">)</a> <a id="87474" class="Symbol">(Œª</a> <a id="87477" href="Demos.HSP.html#87477" class="Bound">_</a> <a id="87479" href="Demos.HSP.html#87479" class="Bound">_</a> <a id="87481" class="Symbol">‚Üí</a> <a id="87483" href="Relation.Binary.Structures.html#1568" class="Function">refl</a><a id="87487" class="Symbol">)</a> <a id="87489" class="Symbol">(Œª</a> <a id="87492" href="Demos.HSP.html#87492" class="Bound">_</a> <a id="87494" class="Symbol">‚Üí</a> <a id="87496" href="Relation.Binary.Structures.html#1568" class="Function">refl</a><a id="87500" class="Symbol">)</a>

</pre>

The converse inclusion, \af V \ab{ùí¶} \aof{‚äÜ} \ab{ùí¶}, requires the assumption
that \ab{ùí¶} is an equational class. Recall lemma
\af{V-id1}, which asserts that \ab{ùí¶} \aof{‚ä´} \ab p \aof{‚âà} \ab q implies \af{V}
\ab{‚Ñì} \ab{Œπ} \ab{ùí¶} \aof{‚ä´} \ab p \aof{‚âà} \ab q. Whence, if \ab{ùí¶} is an equational
class, then \af V \ab{ùí¶} \aof{‚äÜ} \ab{ùí¶}, as we now confirm.

<pre class="Agda">

<a id="87882" class="Keyword">module</a> <a id="87889" href="Demos.HSP.html#87889" class="Module">_</a> <a id="87891" class="Symbol">{</a><a id="87892" href="Demos.HSP.html#87892" class="Bound">‚Ñì</a> <a id="87894" class="Symbol">:</a> <a id="87896" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="87901" class="Symbol">}{</a><a id="87903" href="Demos.HSP.html#87903" class="Bound">X</a> <a id="87905" class="Symbol">:</a> <a id="87907" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="87912" href="Demos.HSP.html#87892" class="Bound">‚Ñì</a><a id="87913" class="Symbol">}{</a><a id="87915" href="Demos.HSP.html#87915" class="Bound">‚Ñ∞</a> <a id="87917" class="Symbol">:</a> <a id="87919" class="Symbol">{</a><a id="87920" href="Demos.HSP.html#87920" class="Bound">Y</a> <a id="87922" class="Symbol">:</a> <a id="87924" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="87929" href="Demos.HSP.html#87892" class="Bound">‚Ñì</a><a id="87930" class="Symbol">}</a> <a id="87932" class="Symbol">‚Üí</a> <a id="87934" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="87939" class="Symbol">(</a><a id="87940" href="Demos.HSP.html#49483" class="Datatype">Term</a> <a id="87945" href="Demos.HSP.html#87920" class="Bound">Y</a> <a id="87947" href="Data.Product.html#1167" class="Function Operator">√ó</a> <a id="87949" href="Demos.HSP.html#49483" class="Datatype">Term</a> <a id="87954" href="Demos.HSP.html#87920" class="Bound">Y</a><a id="87955" class="Symbol">)</a> <a id="87957" class="Symbol">(</a><a id="87958" href="Demos.HSP.html#44469" class="Function">ov</a> <a id="87961" href="Demos.HSP.html#87892" class="Bound">‚Ñì</a><a id="87962" class="Symbol">)}</a> <a id="87965" class="Keyword">where</a>
 <a id="87972" class="Keyword">private</a> <a id="87980" href="Demos.HSP.html#87980" class="Function">ùí¶</a> <a id="87982" class="Symbol">=</a> <a id="87984" href="Demos.HSP.html#60650" class="Function">Mod</a><a id="87987" class="Symbol">{</a><a id="87988" class="Argument">Œ±</a> <a id="87990" class="Symbol">=</a> <a id="87992" href="Demos.HSP.html#87892" class="Bound">‚Ñì</a><a id="87993" class="Symbol">}{</a><a id="87995" href="Demos.HSP.html#87892" class="Bound">‚Ñì</a><a id="87996" class="Symbol">}{</a><a id="87998" href="Demos.HSP.html#87903" class="Bound">X</a><a id="87999" class="Symbol">}</a> <a id="88001" href="Demos.HSP.html#87915" class="Bound">‚Ñ∞</a>     <a id="88007" class="Comment">-- an arbitrary equational class</a>
 <a id="88041" href="Demos.HSP.html#88041" class="Function">EqCl‚áíVar</a> <a id="88050" class="Symbol">:</a> <a id="88052" href="Demos.HSP.html#66676" class="Function">V</a> <a id="88054" href="Demos.HSP.html#87892" class="Bound">‚Ñì</a> <a id="88056" class="Symbol">(</a><a id="88057" href="Demos.HSP.html#44469" class="Function">ov</a> <a id="88060" href="Demos.HSP.html#87892" class="Bound">‚Ñì</a><a id="88061" class="Symbol">)</a> <a id="88063" href="Demos.HSP.html#87980" class="Function">ùí¶</a> <a id="88065" href="Relation.Unary.html#1742" class="Function Operator">‚äÜ</a> <a id="88067" href="Demos.HSP.html#87980" class="Function">ùí¶</a>
 <a id="88070" href="Demos.HSP.html#88041" class="Function">EqCl‚áíVar</a> <a id="88079" class="Symbol">{</a><a id="88080" href="Demos.HSP.html#88080" class="Bound">ùë®</a><a id="88081" class="Symbol">}</a> <a id="88083" href="Demos.HSP.html#88083" class="Bound">vA</a> <a id="88086" class="Symbol">{</a><a id="88087" href="Demos.HSP.html#88087" class="Bound">p</a><a id="88088" class="Symbol">}</a> <a id="88090" class="Symbol">{</a><a id="88091" href="Demos.HSP.html#88091" class="Bound">q</a><a id="88092" class="Symbol">}</a> <a id="88094" href="Demos.HSP.html#88094" class="Bound">p‚Ñ∞q</a> <a id="88098" href="Demos.HSP.html#88098" class="Bound">œÅ</a> <a id="88100" class="Symbol">=</a> <a id="88102" href="Demos.HSP.html#72145" class="Function">V-id1</a> <a id="88108" href="Demos.HSP.html#87892" class="Bound">‚Ñì</a> <a id="88110" class="Symbol">{</a><a id="88111" href="Demos.HSP.html#87980" class="Function">ùí¶</a><a id="88112" class="Symbol">}</a> <a id="88114" class="Symbol">{</a><a id="88115" href="Demos.HSP.html#88087" class="Bound">p</a><a id="88116" class="Symbol">}</a> <a id="88118" class="Symbol">{</a><a id="88119" href="Demos.HSP.html#88091" class="Bound">q</a><a id="88120" class="Symbol">}</a> <a id="88122" class="Symbol">(Œª</a> <a id="88125" href="Demos.HSP.html#88125" class="Bound">_</a> <a id="88127" href="Demos.HSP.html#88127" class="Bound">x</a> <a id="88129" href="Demos.HSP.html#88129" class="Bound">œÑ</a> <a id="88131" class="Symbol">‚Üí</a> <a id="88133" href="Demos.HSP.html#88127" class="Bound">x</a> <a id="88135" href="Demos.HSP.html#88094" class="Bound">p‚Ñ∞q</a> <a id="88139" href="Demos.HSP.html#88129" class="Bound">œÑ</a><a id="88140" class="Symbol">)</a><a id="88141" href="Demos.HSP.html#88080" class="Bound">ùë®</a> <a id="88143" href="Demos.HSP.html#88083" class="Bound">vA</a> <a id="88146" href="Demos.HSP.html#88098" class="Bound">œÅ</a>

</pre>
Together, \af{V-expa} and \af{Eqcl‚áíVar} prove that every equational class is a variety.


\paragraph*{Every variety is an equational class}
For (ii), we need an arbitrary variety, which we obtain by starting with an arbitrary class
\ab{ùí¶} of \ab{ùëÜ}-algebras and taking the \emph{varietal closure}, \af{V} \ab{ùí¶}.
We prove that \af{V} \ab{ùí¶} is an equational class by showing it is precisely the collection of
algebras that model the equations in \af{Th} (\af{V} \ab{ùí¶}); that is, we prove
\af{V} \ab{ùí¶} = \af{Mod} (\af{Th} (\af{V} \ab{ùí¶})).
The inclusion \af{V} \ab{ùí¶} \aof{‚äÜ} \af{Mod} (\af{Th} (\af{V} \ab{ùí¶})) is a
consequence of the fact that \af{Mod} \af{Th} is a closure operator.

<pre class="Agda">

<a id="88861" class="Keyword">module</a> <a id="88868" href="Demos.HSP.html#88868" class="Module">_</a> <a id="88870" class="Symbol">(</a><a id="88871" href="Demos.HSP.html#88871" class="Bound">ùí¶</a> <a id="88873" class="Symbol">:</a> <a id="88875" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="88879" class="Symbol">(</a><a id="88880" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="88888" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="88890" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="88892" class="Symbol">)</a> <a id="88894" class="Symbol">(</a><a id="88895" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="88897" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="88899" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a> <a id="88902" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="88904" href="Demos.HSP.html#44469" class="Function">ov</a> <a id="88907" href="Demos.HSP.html#8443" class="Generalizable">‚Ñì</a><a id="88908" class="Symbol">)){</a><a id="88911" href="Demos.HSP.html#88911" class="Bound">X</a> <a id="88913" class="Symbol">:</a> <a id="88915" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="88920" class="Symbol">(</a><a id="88921" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="88923" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="88925" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a> <a id="88928" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="88930" href="Demos.HSP.html#8443" class="Generalizable">‚Ñì</a><a id="88931" class="Symbol">)}</a> <a id="88934" class="Keyword">where</a>
 <a id="88941" class="Keyword">private</a> <a id="88949" href="Demos.HSP.html#88949" class="Function">c</a> <a id="88951" class="Symbol">=</a> <a id="88953" href="Demos.HSP.html#88888" class="Bound">Œ±</a> <a id="88955" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="88957" href="Demos.HSP.html#88890" class="Bound">œÅ·µÉ</a> <a id="88960" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="88962" href="Demos.HSP.html#88907" class="Bound">‚Ñì</a> <a id="88964" class="Symbol">;</a> <a id="88966" href="Demos.HSP.html#88966" class="Function">Œπ</a> <a id="88968" class="Symbol">=</a> <a id="88970" href="Demos.HSP.html#44469" class="Function">ov</a> <a id="88973" href="Demos.HSP.html#88949" class="Function">c</a>

 <a id="88977" href="Demos.HSP.html#88977" class="Function">ModTh-closure</a> <a id="88991" class="Symbol">:</a> <a id="88993" href="Demos.HSP.html#66676" class="Function">V</a><a id="88994" class="Symbol">{</a><a id="88995" class="Argument">Œ≤</a> <a id="88997" class="Symbol">=</a> <a id="88999" href="Demos.HSP.html#8424" class="Generalizable">Œ≤</a><a id="89000" class="Symbol">}{</a><a id="89002" href="Demos.HSP.html#8426" class="Generalizable">œÅ·µá</a><a id="89004" class="Symbol">}{</a><a id="89006" href="Demos.HSP.html#8429" class="Generalizable">Œ≥</a><a id="89007" class="Symbol">}{</a><a id="89009" href="Demos.HSP.html#8431" class="Generalizable">œÅ·∂ú</a><a id="89011" class="Symbol">}{</a><a id="89013" href="Demos.HSP.html#8434" class="Generalizable">Œ¥</a><a id="89014" class="Symbol">}{</a><a id="89016" href="Demos.HSP.html#8436" class="Generalizable">œÅ·µà</a><a id="89018" class="Symbol">}</a> <a id="89020" href="Demos.HSP.html#88907" class="Bound">‚Ñì</a> <a id="89022" href="Demos.HSP.html#88966" class="Function">Œπ</a> <a id="89024" href="Demos.HSP.html#88871" class="Bound">ùí¶</a> <a id="89026" href="Relation.Unary.html#1742" class="Function Operator">‚äÜ</a> <a id="89028" href="Demos.HSP.html#60650" class="Function">Mod</a><a id="89031" class="Symbol">{</a><a id="89032" class="Argument">X</a> <a id="89034" class="Symbol">=</a> <a id="89036" href="Demos.HSP.html#88911" class="Bound">X</a><a id="89037" class="Symbol">}</a> <a id="89039" class="Symbol">(</a><a id="89040" href="Demos.HSP.html#60552" class="Function">Th</a> <a id="89043" class="Symbol">(</a><a id="89044" href="Demos.HSP.html#66676" class="Function">V</a> <a id="89046" href="Demos.HSP.html#88907" class="Bound">‚Ñì</a> <a id="89048" href="Demos.HSP.html#88966" class="Function">Œπ</a> <a id="89050" href="Demos.HSP.html#88871" class="Bound">ùí¶</a><a id="89051" class="Symbol">))</a>
 <a id="89055" href="Demos.HSP.html#88977" class="Function">ModTh-closure</a> <a id="89069" class="Symbol">{</a><a id="89070" class="Argument">x</a> <a id="89072" class="Symbol">=</a> <a id="89074" href="Demos.HSP.html#89074" class="Bound">ùë®</a><a id="89075" class="Symbol">}</a> <a id="89077" href="Demos.HSP.html#89077" class="Bound">vA</a> <a id="89080" class="Symbol">{</a><a id="89081" href="Demos.HSP.html#89081" class="Bound">p</a><a id="89082" class="Symbol">}</a> <a id="89084" class="Symbol">{</a><a id="89085" href="Demos.HSP.html#89085" class="Bound">q</a><a id="89086" class="Symbol">}</a> <a id="89088" href="Demos.HSP.html#89088" class="Bound">x</a> <a id="89090" href="Demos.HSP.html#89090" class="Bound">œÅ</a> <a id="89092" class="Symbol">=</a> <a id="89094" href="Demos.HSP.html#89088" class="Bound">x</a> <a id="89096" href="Demos.HSP.html#89074" class="Bound">ùë®</a> <a id="89098" href="Demos.HSP.html#89077" class="Bound">vA</a> <a id="89101" href="Demos.HSP.html#89090" class="Bound">œÅ</a>

</pre>

\noindent Our proof of the inclusion \af{Mod} (\af{Th} (V ùí¶)) \aof{‚äÜ} \af{V} \ab{ùí¶} proceeds as follows.

\begin{enumerate}
\item Let \ab{ùë™} be the product of all algebras in \af{S} \ab{ùí¶}, so that \ab{ùë™} \af{‚àà} \af{P} (\af{S} \ab{ùí¶}).
\item Prove \af{P} (\af{S} \ab{ùí¶}) \af{‚äÜ} \af{S} (\af{P} \ab{ùí¶}), so \ab{ùë™} \af{‚àà} \af{S} (\af{P} \ab{ùí¶}).
\item Prove \aof{ùîΩ[ \ab{X} ]} \af{‚â§} \ab{ùë™}, so that \aof{ùîΩ[ \ab{X} ]} \af{‚àà} \af{S} (\af{S} (\af{P} \ab{ùí¶})) (= \af{S} (\af{P} \ab{ùí¶})).
\item Prove that every algebra in \af{Mod} (\af{Th} (V ùí¶)) is a homomorphic image of
\aof{ùîΩ[ \ab{X} ]} and thus belongs to \af{H} (\af{S} (\af{P} \ab{ùí¶})) (= \af{V} \ab{ùí¶}).
\end{enumerate}

To define \ab{ùë™} as the product of all algebras in \af{S} \ab{ùí¶}, we must first contrive
an index type for the class \af{S} \ab{ùí¶}.  We do so by letting the indices be the algebras
belonging to \ab{ùí¶}. Actually, each index will consist of a triple (\ab{ùë®} , \ab p ,
\ab{œÅ}) where \ab{ùë®} is an algebra, \ab p : \ab{ùë®} \af{‚àà} \af{S} \ab{ùí¶} is a proof of membership in \ab{ùí¶},
and \ab{œÅ} : \ab X \as{‚Üí} \aof{ùïå[ \ab{ùë®} ]} is an arbitrary environment.
Using this indexing scheme, we construct \ab{ùë™}, the product of all algebras in \ab{ùí¶}
and all environments.

The indexing type \ab{‚Ñë}, the family of algebras \ab{ùîÑ}, and the product \ab{ùë™} are defined
as follows.

\ifshort\else

<pre class="Agda">

 <a id="90480" class="Keyword">open</a> <a id="90485" href="Demos.HSP.html#79943" class="Module">FreeHom</a> <a id="90493" class="Symbol">{</a><a id="90494" class="Argument">‚Ñì</a> <a id="90496" class="Symbol">=</a> <a id="90498" href="Demos.HSP.html#88907" class="Bound">‚Ñì</a><a id="90499" class="Symbol">}</a> <a id="90501" class="Symbol">{</a><a id="90502" href="Demos.HSP.html#88871" class="Bound">ùí¶</a><a id="90503" class="Symbol">}</a>
 <a id="90506" class="Keyword">open</a> <a id="90511" href="Demos.HSP.html#79051" class="Module">FreeAlgebra</a> <a id="90523" class="Symbol">{</a><a id="90524" class="Argument">œá</a> <a id="90526" class="Symbol">=</a> <a id="90528" href="Demos.HSP.html#88949" class="Function">c</a><a id="90529" class="Symbol">}(</a><a id="90531" href="Demos.HSP.html#60552" class="Function">Th</a> <a id="90534" href="Demos.HSP.html#88871" class="Bound">ùí¶</a><a id="90535" class="Symbol">)</a>  <a id="90538" class="Keyword">using</a> <a id="90544" class="Symbol">(</a> <a id="90546" href="Demos.HSP.html#79358" class="Function Operator">ùîΩ[_]</a> <a id="90551" class="Symbol">)</a>
 <a id="90554" class="Keyword">open</a> <a id="90559" href="Demos.HSP.html#53101" class="Module">Environment</a>                <a id="90586" class="Keyword">using</a> <a id="90592" class="Symbol">(</a> <a id="90594" href="Demos.HSP.html#53194" class="Function">Env</a> <a id="90598" class="Symbol">)</a>
</pre>
\fi
<pre class="Agda">

 <a id="90630" href="Demos.HSP.html#90630" class="Function">‚Ñë</a> <a id="90632" class="Symbol">:</a> <a id="90634" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="90639" href="Demos.HSP.html#88966" class="Function">Œπ</a>
 <a id="90642" href="Demos.HSP.html#90630" class="Function">‚Ñë</a> <a id="90644" class="Symbol">=</a> <a id="90646" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="90649" href="Demos.HSP.html#90649" class="Bound">ùë®</a> <a id="90651" href="Data.Product.html#916" class="Function">‚àà</a> <a id="90653" class="Symbol">(</a><a id="90654" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="90662" href="Demos.HSP.html#88888" class="Bound">Œ±</a> <a id="90664" href="Demos.HSP.html#88890" class="Bound">œÅ·µÉ</a><a id="90666" class="Symbol">)</a> <a id="90668" href="Data.Product.html#916" class="Function">]</a> <a id="90670" class="Symbol">(</a><a id="90671" href="Demos.HSP.html#90649" class="Bound">ùë®</a> <a id="90673" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="90675" href="Demos.HSP.html#66102" class="Function">S</a> <a id="90677" href="Demos.HSP.html#88907" class="Bound">‚Ñì</a> <a id="90679" href="Demos.HSP.html#88871" class="Bound">ùí¶</a><a id="90680" class="Symbol">)</a> <a id="90682" href="Data.Product.html#1167" class="Function Operator">√ó</a> <a id="90684" class="Symbol">(</a><a id="90685" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="90693" class="Symbol">(</a><a id="90694" href="Demos.HSP.html#53194" class="Function">Env</a> <a id="90698" href="Demos.HSP.html#90649" class="Bound">ùë®</a> <a id="90700" href="Demos.HSP.html#88911" class="Bound">X</a><a id="90701" class="Symbol">))</a>

 <a id="90706" href="Demos.HSP.html#90706" class="Function">ùîÑ</a> <a id="90708" class="Symbol">:</a> <a id="90710" href="Demos.HSP.html#90630" class="Function">‚Ñë</a> <a id="90712" class="Symbol">‚Üí</a> <a id="90714" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="90722" href="Demos.HSP.html#88888" class="Bound">Œ±</a> <a id="90724" href="Demos.HSP.html#88890" class="Bound">œÅ·µÉ</a>
 <a id="90728" href="Demos.HSP.html#90706" class="Function">ùîÑ</a> <a id="90730" href="Demos.HSP.html#90730" class="Bound">i</a> <a id="90732" class="Symbol">=</a> <a id="90734" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="90736" href="Demos.HSP.html#90730" class="Bound">i</a> <a id="90738" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a>

 <a id="90742" href="Demos.HSP.html#90742" class="Function">ùë™</a> <a id="90744" class="Symbol">:</a> <a id="90746" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="90754" href="Demos.HSP.html#88966" class="Function">Œπ</a> <a id="90756" href="Demos.HSP.html#88966" class="Function">Œπ</a>
 <a id="90759" href="Demos.HSP.html#90742" class="Function">ùë™</a> <a id="90761" class="Symbol">=</a> <a id="90763" href="Demos.HSP.html#29982" class="Function">‚®Ö</a> <a id="90765" href="Demos.HSP.html#90706" class="Function">ùîÑ</a>

</pre>
\ifshort\else
<pre class="Agda">
 <a id="90807" href="Demos.HSP.html#90807" class="Function">skEqual</a> <a id="90815" class="Symbol">:</a> <a id="90817" class="Symbol">(</a><a id="90818" href="Demos.HSP.html#90818" class="Bound">i</a> <a id="90820" class="Symbol">:</a> <a id="90822" href="Demos.HSP.html#90630" class="Function">‚Ñë</a><a id="90823" class="Symbol">)</a> <a id="90825" class="Symbol">‚Üí</a> <a id="90827" class="Symbol">‚àÄ{</a><a id="90829" href="Demos.HSP.html#90829" class="Bound">p</a> <a id="90831" href="Demos.HSP.html#90831" class="Bound">q</a><a id="90832" class="Symbol">}</a> <a id="90834" class="Symbol">‚Üí</a> <a id="90836" href="Demos.HSP.html#7229" class="Primitive">Type</a> <a id="90841" href="Demos.HSP.html#88890" class="Bound">œÅ·µÉ</a>
 <a id="90845" href="Demos.HSP.html#90807" class="Function">skEqual</a> <a id="90853" href="Demos.HSP.html#90853" class="Bound">i</a> <a id="90855" class="Symbol">{</a><a id="90856" href="Demos.HSP.html#90856" class="Bound">p</a><a id="90857" class="Symbol">}{</a><a id="90859" href="Demos.HSP.html#90859" class="Bound">q</a><a id="90860" class="Symbol">}</a> <a id="90862" class="Symbol">=</a> <a id="90864" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶</a> <a id="90866" href="Demos.HSP.html#90856" class="Bound">p</a> <a id="90868" href="Demos.HSP.html#53861" class="Function Operator">‚üß</a> <a id="90870" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="90874" href="Demos.HSP.html#7390" class="Field">snd</a> <a id="90878" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a> <a id="90880" href="Demos.HSP.html#90853" class="Bound">i</a> <a id="90882" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a> <a id="90884" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a> <a id="90886" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶</a> <a id="90888" href="Demos.HSP.html#90859" class="Bound">q</a> <a id="90890" href="Demos.HSP.html#53861" class="Function Operator">‚üß</a> <a id="90892" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="90896" href="Demos.HSP.html#7390" class="Field">snd</a> <a id="90900" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a> <a id="90902" href="Demos.HSP.html#90853" class="Bound">i</a> <a id="90904" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a>
  <a id="90908" class="Keyword">where</a> <a id="90914" class="Keyword">open</a> <a id="90919" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="90926" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="90929" href="Demos.HSP.html#90706" class="Function">ùîÑ</a> <a id="90931" href="Demos.HSP.html#90853" class="Bound">i</a> <a id="90933" href="Demos.HSP.html#23785" class="Function Operator">]</a> <a id="90935" class="Keyword">using</a> <a id="90941" class="Symbol">(</a> <a id="90943" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="90947" class="Symbol">)</a> <a id="90949" class="Symbol">;</a> <a id="90951" class="Keyword">open</a> <a id="90956" href="Demos.HSP.html#53101" class="Module">Environment</a> <a id="90968" class="Symbol">(</a><a id="90969" href="Demos.HSP.html#90706" class="Function">ùîÑ</a> <a id="90971" href="Demos.HSP.html#90853" class="Bound">i</a><a id="90972" class="Symbol">)</a> <a id="90974" class="Keyword">using</a> <a id="90980" class="Symbol">(</a> <a id="90982" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶_‚üß</a> <a id="90986" class="Symbol">)</a>

</pre>

The type \af{skEqual} provides a term identity \ab p \af{‚âà} \ab q for each index \ab i = (\ab{ùë®} , \ab{p} , \ab{œÅ}) of the product.
%(here, as above, \ab{ùë®} is an algebra, \ab{sA} is a proof that \ab{ùë®} belongs to \af{S} \ab{ùí¶}, and \ab{œÅ} is an environment).
%map assigning values in the domain of \ab{ùë®} to variable symbols in \ab X).
Later we prove that if the identity \ab{p} \af{‚âà} \ab q holds in all \ab{ùë®} \aof{‚àà} \af S \ab{ùí¶} (for all environments), then \ab p \af{‚âà} \ab q
holds in the relatively free algebra \Free{X}; equivalently, the pair (\ab p , \ab q) belongs to the
kernel of the natural homomorphism from \T{X} onto \Free{X}. We will use that fact to prove
that the kernel of the natural hom from \T{X} to \ab{ùë™} is contained in the kernel of the natural hom from \T{X} onto \Free{X},
whence we construct a monomorphism from \Free{X} into \ab{ùë™}, and thus \Free{X} is a subalgebra of \ab{ùë™},
so belongs to \af S (\af P \ab{ùí¶}).

\fi
Next we construct homomorphisms from \ab{ùëª} \ab{X} to \ab{ùë™} and \Free{X} to \ab{ùë™},
the latter of which requires the kernel condition mentioned above.

<pre class="Agda">

 <a id="92120" href="Demos.HSP.html#92120" class="Function">homC</a> <a id="92125" class="Symbol">:</a> <a id="92127" href="Demos.HSP.html#32650" class="Function">hom</a> <a id="92131" class="Symbol">(</a><a id="92132" href="Demos.HSP.html#51729" class="Function">ùëª</a> <a id="92134" href="Demos.HSP.html#88911" class="Bound">X</a><a id="92135" class="Symbol">)</a> <a id="92137" href="Demos.HSP.html#90742" class="Function">ùë™</a>
 <a id="92140" href="Demos.HSP.html#92120" class="Function">homC</a> <a id="92145" class="Symbol">=</a> <a id="92147" href="Demos.HSP.html#38282" class="Function">‚®Ö-hom-co</a> <a id="92156" href="Demos.HSP.html#90706" class="Function">ùîÑ</a> <a id="92158" class="Symbol">(Œª</a> <a id="92161" href="Demos.HSP.html#92161" class="Bound">i</a> <a id="92163" class="Symbol">‚Üí</a> <a id="92165" href="Demos.HSP.html#74419" class="Function">lift-hom</a> <a id="92174" class="Symbol">(</a><a id="92175" href="Demos.HSP.html#7390" class="Field">snd</a> <a id="92179" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a> <a id="92181" href="Demos.HSP.html#92161" class="Bound">i</a> <a id="92183" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a><a id="92184" class="Symbol">))</a>

 <a id="92189" href="Demos.HSP.html#92189" class="Function">kerF‚äÜkerC</a> <a id="92199" class="Symbol">:</a> <a id="92201" href="Demos.HSP.html#16046" class="Function">ker</a> <a id="92205" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="92207" href="Demos.HSP.html#80648" class="Function Operator">homF[</a> <a id="92213" href="Demos.HSP.html#88911" class="Bound">X</a> <a id="92215" href="Demos.HSP.html#80648" class="Function Operator">]</a> <a id="92217" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="92219" href="Relation.Unary.html#1742" class="Function Operator">‚äÜ</a> <a id="92221" href="Demos.HSP.html#16046" class="Function">ker</a> <a id="92225" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="92227" href="Demos.HSP.html#92120" class="Function">homC</a> <a id="92232" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a>
 <a id="92235" href="Demos.HSP.html#92189" class="Function">kerF‚äÜkerC</a> <a id="92245" class="Symbol">{</a><a id="92246" href="Demos.HSP.html#92246" class="Bound">p</a> <a id="92248" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="92250" href="Demos.HSP.html#92250" class="Bound">q</a><a id="92251" class="Symbol">}</a> <a id="92253" href="Demos.HSP.html#92253" class="Bound">pKq</a> <a id="92257" class="Symbol">(</a><a id="92258" href="Demos.HSP.html#92258" class="Bound">ùë®</a> <a id="92260" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="92262" href="Demos.HSP.html#92262" class="Bound">sA</a> <a id="92265" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="92267" href="Demos.HSP.html#92267" class="Bound">œÅ</a><a id="92268" class="Symbol">)</a> <a id="92270" class="Symbol">=</a> <a id="92272" href="Relation.Binary.Reasoning.Base.Single.html#1916" class="Function Operator">begin</a>
   <a id="92281" href="Demos.HSP.html#73437" class="Function">free-lift</a> <a id="92291" href="Demos.HSP.html#92267" class="Bound">œÅ</a> <a id="92293" href="Demos.HSP.html#92246" class="Bound">p</a>   <a id="92297" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚âàÀò‚ü®</a> <a id="92301" href="Demos.HSP.html#74947" class="Function">free-lift-interp</a> <a id="92318" class="Symbol">{</a><a id="92319" class="Argument">ùë®</a> <a id="92321" class="Symbol">=</a> <a id="92323" href="Demos.HSP.html#92258" class="Bound">ùë®</a><a id="92324" class="Symbol">}</a> <a id="92326" href="Demos.HSP.html#92267" class="Bound">œÅ</a> <a id="92328" href="Demos.HSP.html#92246" class="Bound">p</a> <a id="92330" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚ü©</a>
   <a id="92335" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶</a> <a id="92337" href="Demos.HSP.html#92246" class="Bound">p</a> <a id="92339" href="Demos.HSP.html#53861" class="Function Operator">‚üß</a> <a id="92341" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="92345" href="Demos.HSP.html#92267" class="Bound">œÅ</a>      <a id="92352" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a> <a id="92355" href="Demos.HSP.html#71307" class="Function">S-id1</a> <a id="92361" class="Symbol">{</a><a id="92362" class="Argument">‚Ñì</a> <a id="92364" class="Symbol">=</a> <a id="92366" href="Demos.HSP.html#88907" class="Bound">‚Ñì</a><a id="92367" class="Symbol">}</a> <a id="92369" class="Symbol">{</a><a id="92370" class="Argument">p</a> <a id="92372" class="Symbol">=</a> <a id="92374" href="Demos.HSP.html#92246" class="Bound">p</a><a id="92375" class="Symbol">}</a> <a id="92377" class="Symbol">{</a><a id="92378" href="Demos.HSP.html#92250" class="Bound">q</a><a id="92379" class="Symbol">}</a> <a id="92381" class="Symbol">(</a><a id="92382" href="Demos.HSP.html#92586" class="Function">Œ∂</a> <a id="92384" href="Demos.HSP.html#92253" class="Bound">pKq</a><a id="92387" class="Symbol">)</a> <a id="92389" href="Demos.HSP.html#92258" class="Bound">ùë®</a> <a id="92391" href="Demos.HSP.html#92262" class="Bound">sA</a> <a id="92394" href="Demos.HSP.html#92267" class="Bound">œÅ</a> <a id="92396" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
   <a id="92401" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶</a> <a id="92403" href="Demos.HSP.html#92250" class="Bound">q</a> <a id="92405" href="Demos.HSP.html#53861" class="Function Operator">‚üß</a> <a id="92407" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="92411" href="Demos.HSP.html#92267" class="Bound">œÅ</a>      <a id="92418" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a> <a id="92421" href="Demos.HSP.html#74947" class="Function">free-lift-interp</a> <a id="92438" class="Symbol">{</a><a id="92439" class="Argument">ùë®</a> <a id="92441" class="Symbol">=</a> <a id="92443" href="Demos.HSP.html#92258" class="Bound">ùë®</a><a id="92444" class="Symbol">}</a> <a id="92446" href="Demos.HSP.html#92267" class="Bound">œÅ</a> <a id="92448" href="Demos.HSP.html#92250" class="Bound">q</a> <a id="92450" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
   <a id="92455" href="Demos.HSP.html#73437" class="Function">free-lift</a> <a id="92465" href="Demos.HSP.html#92267" class="Bound">œÅ</a> <a id="92467" href="Demos.HSP.html#92250" class="Bound">q</a>   <a id="92471" href="Relation.Binary.Reasoning.Base.Single.html#2555" class="Function Operator">‚àé</a>
  <a id="92475" class="Keyword">where</a>
  <a id="92483" class="Keyword">open</a> <a id="92488" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="92495" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="92498" href="Demos.HSP.html#92258" class="Bound">ùë®</a> <a id="92500" href="Demos.HSP.html#23785" class="Function Operator">]</a>  <a id="92503" class="Keyword">using</a> <a id="92509" class="Symbol">(</a> <a id="92511" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="92515" class="Symbol">)</a>
  <a id="92519" class="Keyword">open</a> <a id="92524" href="Relation.Binary.Reasoning.Setoid.html" class="Module">SetoidReasoning</a> <a id="92540" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="92543" href="Demos.HSP.html#92258" class="Bound">ùë®</a> <a id="92545" href="Demos.HSP.html#23785" class="Function Operator">]</a>
  <a id="92549" class="Keyword">open</a> <a id="92554" href="Demos.HSP.html#53101" class="Module">Environment</a> <a id="92566" href="Demos.HSP.html#92258" class="Bound">ùë®</a>  <a id="92569" class="Keyword">using</a> <a id="92575" class="Symbol">(</a> <a id="92577" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶_‚üß</a> <a id="92581" class="Symbol">)</a>

  <a id="92586" href="Demos.HSP.html#92586" class="Function">Œ∂</a> <a id="92588" class="Symbol">:</a> <a id="92590" class="Symbol">‚àÄ{</a><a id="92592" href="Demos.HSP.html#92592" class="Bound">p</a> <a id="92594" href="Demos.HSP.html#92594" class="Bound">q</a><a id="92595" class="Symbol">}</a> <a id="92597" class="Symbol">‚Üí</a> <a id="92599" class="Symbol">(</a><a id="92600" href="Demos.HSP.html#60552" class="Function">Th</a> <a id="92603" href="Demos.HSP.html#88871" class="Bound">ùí¶</a><a id="92604" class="Symbol">)</a> <a id="92606" href="Demos.HSP.html#61374" class="Datatype Operator">‚ä¢</a> <a id="92608" href="Demos.HSP.html#88911" class="Bound">X</a> <a id="92610" href="Demos.HSP.html#61374" class="Datatype Operator">‚ñπ</a> <a id="92612" href="Demos.HSP.html#92592" class="Bound">p</a> <a id="92614" href="Demos.HSP.html#61374" class="Datatype Operator">‚âà</a> <a id="92616" href="Demos.HSP.html#92594" class="Bound">q</a> <a id="92618" class="Symbol">‚Üí</a> <a id="92620" href="Demos.HSP.html#88871" class="Bound">ùí¶</a> <a id="92622" href="Demos.HSP.html#59247" class="Function Operator">‚ä´</a> <a id="92624" href="Demos.HSP.html#92592" class="Bound">p</a> <a id="92626" href="Demos.HSP.html#59247" class="Function Operator">‚âà</a> <a id="92628" href="Demos.HSP.html#92594" class="Bound">q</a>
  <a id="92632" href="Demos.HSP.html#92586" class="Function">Œ∂</a> <a id="92634" href="Demos.HSP.html#92634" class="Bound">x</a> <a id="92636" href="Demos.HSP.html#92636" class="Bound">ùë®</a> <a id="92638" href="Demos.HSP.html#92638" class="Bound">kA</a> <a id="92641" class="Symbol">=</a> <a id="92643" href="Demos.HSP.html#63028" class="Function">sound</a> <a id="92649" class="Symbol">(Œª</a> <a id="92652" href="Demos.HSP.html#92652" class="Bound">y</a> <a id="92654" href="Demos.HSP.html#92654" class="Bound">œÅ</a> <a id="92656" class="Symbol">‚Üí</a> <a id="92658" href="Demos.HSP.html#92652" class="Bound">y</a> <a id="92660" href="Demos.HSP.html#92636" class="Bound">ùë®</a> <a id="92662" href="Demos.HSP.html#92638" class="Bound">kA</a> <a id="92665" href="Demos.HSP.html#92654" class="Bound">œÅ</a><a id="92666" class="Symbol">)</a> <a id="92668" href="Demos.HSP.html#92634" class="Bound">x</a> <a id="92670" class="Keyword">where</a> <a id="92676" class="Keyword">open</a> <a id="92681" href="Demos.HSP.html#62728" class="Module">Soundness</a> <a id="92691" class="Symbol">(</a><a id="92692" href="Demos.HSP.html#60552" class="Function">Th</a> <a id="92695" href="Demos.HSP.html#88871" class="Bound">ùí¶</a><a id="92696" class="Symbol">)</a> <a id="92698" href="Demos.HSP.html#92636" class="Bound">ùë®</a>

 <a id="92702" href="Demos.HSP.html#92702" class="Function">homFC</a> <a id="92708" class="Symbol">:</a> <a id="92710" href="Demos.HSP.html#32650" class="Function">hom</a> <a id="92714" href="Demos.HSP.html#79358" class="Function Operator">ùîΩ[</a> <a id="92717" href="Demos.HSP.html#88911" class="Bound">X</a> <a id="92719" href="Demos.HSP.html#79358" class="Function Operator">]</a> <a id="92721" href="Demos.HSP.html#90742" class="Function">ùë™</a>
 <a id="92724" href="Demos.HSP.html#92702" class="Function">homFC</a> <a id="92730" class="Symbol">=</a> <a id="92732" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="92734" href="Demos.HSP.html#39240" class="Function">HomFactor</a> <a id="92744" href="Demos.HSP.html#90742" class="Function">ùë™</a> <a id="92746" href="Demos.HSP.html#92120" class="Function">homC</a> <a id="92751" href="Demos.HSP.html#80648" class="Function Operator">homF[</a> <a id="92757" href="Demos.HSP.html#88911" class="Bound">X</a> <a id="92759" href="Demos.HSP.html#80648" class="Function Operator">]</a> <a id="92761" href="Demos.HSP.html#92189" class="Function">kerF‚äÜkerC</a> <a id="92771" class="Symbol">(</a><a id="92772" href="Demos.HSP.html#33752" class="Field">isSurjective</a> <a id="92785" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a> <a id="92787" href="Demos.HSP.html#80111" class="Function Operator">epiF[</a> <a id="92793" href="Demos.HSP.html#88911" class="Bound">X</a> <a id="92795" href="Demos.HSP.html#80111" class="Function Operator">]</a> <a id="92797" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a><a id="92798" class="Symbol">)</a> <a id="92800" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a>

</pre>
If \AgdaPair{p}{q} belongs to the kernel of \af{homC}, then
\af{Th} \ab{ùí¶} includes the identity \ab{p} \af{‚âà} \ab{q}.
%---that is, \af{Th} \ab{ùí¶} \af{‚ä¢} \ab X \af{‚ñπ} \ab{p} \af{‚âà} \ab{q}.
Equivalently,
the kernel of \af{homC} is contained in that of \af{homF[ X ]}.
\ifshort
We omit the proof of this lemma and merely display its formal statement.
\else
\fi

<pre class="Agda">

 <a id="93189" href="Demos.HSP.html#93189" class="Function">kerC‚äÜkerF</a> <a id="93199" class="Symbol">:</a> <a id="93201" class="Symbol">‚àÄ{</a><a id="93203" href="Demos.HSP.html#93203" class="Bound">p</a> <a id="93205" href="Demos.HSP.html#93205" class="Bound">q</a><a id="93206" class="Symbol">}</a> <a id="93208" class="Symbol">‚Üí</a> <a id="93210" class="Symbol">(</a><a id="93211" href="Demos.HSP.html#93203" class="Bound">p</a> <a id="93213" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="93215" href="Demos.HSP.html#93205" class="Bound">q</a><a id="93216" class="Symbol">)</a> <a id="93218" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="93220" href="Demos.HSP.html#16046" class="Function">ker</a> <a id="93224" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="93226" href="Demos.HSP.html#92120" class="Function">homC</a> <a id="93231" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="93233" class="Symbol">‚Üí</a> <a id="93235" class="Symbol">(</a><a id="93236" href="Demos.HSP.html#93203" class="Bound">p</a> <a id="93238" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="93240" href="Demos.HSP.html#93205" class="Bound">q</a><a id="93241" class="Symbol">)</a> <a id="93243" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="93245" href="Demos.HSP.html#16046" class="Function">ker</a> <a id="93249" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="93251" href="Demos.HSP.html#80648" class="Function Operator">homF[</a> <a id="93257" href="Demos.HSP.html#88911" class="Bound">X</a> <a id="93259" href="Demos.HSP.html#80648" class="Function Operator">]</a> <a id="93261" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a>
</pre>
\ifshort
\vskip2mm
\else
<pre class="Agda">
 <a id="93313" href="Demos.HSP.html#93189" class="Function">kerC‚äÜkerF</a> <a id="93323" class="Symbol">{</a><a id="93324" href="Demos.HSP.html#93324" class="Bound">p</a><a id="93325" class="Symbol">}{</a><a id="93327" href="Demos.HSP.html#93327" class="Bound">q</a><a id="93328" class="Symbol">}</a> <a id="93330" href="Demos.HSP.html#93330" class="Bound">pKq</a> <a id="93334" class="Symbol">=</a> <a id="93336" href="Demos.HSP.html#93461" class="Function">Sùí¶‚ä´‚ÜíkerùîΩ</a> <a id="93345" class="Symbol">(</a><a id="93346" href="Demos.HSP.html#93369" class="Function">Sùí¶‚ä´</a> <a id="93350" href="Demos.HSP.html#93576" class="Function">pqEqual</a><a id="93357" class="Symbol">)</a>
  <a id="93361" class="Keyword">where</a>
  <a id="93369" href="Demos.HSP.html#93369" class="Function">Sùí¶‚ä´</a> <a id="93373" class="Symbol">:</a> <a id="93375" class="Symbol">(‚àÄ</a> <a id="93378" href="Demos.HSP.html#93378" class="Bound">i</a> <a id="93380" class="Symbol">‚Üí</a> <a id="93382" href="Demos.HSP.html#90807" class="Function">skEqual</a> <a id="93390" href="Demos.HSP.html#93378" class="Bound">i</a> <a id="93392" class="Symbol">{</a><a id="93393" href="Demos.HSP.html#93324" class="Bound">p</a><a id="93394" class="Symbol">}{</a><a id="93396" href="Demos.HSP.html#93327" class="Bound">q</a><a id="93397" class="Symbol">})</a> <a id="93400" class="Symbol">‚Üí</a> <a id="93402" href="Demos.HSP.html#66102" class="Function">S</a><a id="93403" class="Symbol">{</a><a id="93404" class="Argument">Œ≤</a> <a id="93406" class="Symbol">=</a> <a id="93408" href="Demos.HSP.html#88888" class="Bound">Œ±</a><a id="93409" class="Symbol">}{</a><a id="93411" href="Demos.HSP.html#88890" class="Bound">œÅ·µÉ</a><a id="93413" class="Symbol">}</a> <a id="93415" href="Demos.HSP.html#88907" class="Bound">‚Ñì</a> <a id="93417" href="Demos.HSP.html#88871" class="Bound">ùí¶</a> <a id="93419" href="Demos.HSP.html#59247" class="Function Operator">‚ä´</a> <a id="93421" href="Demos.HSP.html#93324" class="Bound">p</a> <a id="93423" href="Demos.HSP.html#59247" class="Function Operator">‚âà</a> <a id="93425" href="Demos.HSP.html#93327" class="Bound">q</a>
  <a id="93429" href="Demos.HSP.html#93369" class="Function">Sùí¶‚ä´</a> <a id="93433" href="Demos.HSP.html#93433" class="Bound">x</a> <a id="93435" href="Demos.HSP.html#93435" class="Bound">ùë®</a> <a id="93437" href="Demos.HSP.html#93437" class="Bound">sA</a> <a id="93440" href="Demos.HSP.html#93440" class="Bound">œÅ</a> <a id="93442" class="Symbol">=</a> <a id="93444" href="Demos.HSP.html#93433" class="Bound">x</a> <a id="93446" class="Symbol">(</a><a id="93447" href="Demos.HSP.html#93435" class="Bound">ùë®</a> <a id="93449" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="93451" href="Demos.HSP.html#93437" class="Bound">sA</a> <a id="93454" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="93456" href="Demos.HSP.html#93440" class="Bound">œÅ</a><a id="93457" class="Symbol">)</a>
  <a id="93461" href="Demos.HSP.html#93461" class="Function">Sùí¶‚ä´‚ÜíkerùîΩ</a> <a id="93470" class="Symbol">:</a> <a id="93472" href="Demos.HSP.html#66102" class="Function">S</a><a id="93473" class="Symbol">{</a><a id="93474" class="Argument">Œ≤</a> <a id="93476" class="Symbol">=</a> <a id="93478" href="Demos.HSP.html#88888" class="Bound">Œ±</a><a id="93479" class="Symbol">}{</a><a id="93481" href="Demos.HSP.html#88890" class="Bound">œÅ·µÉ</a><a id="93483" class="Symbol">}</a> <a id="93485" href="Demos.HSP.html#88907" class="Bound">‚Ñì</a> <a id="93487" href="Demos.HSP.html#88871" class="Bound">ùí¶</a> <a id="93489" href="Demos.HSP.html#59247" class="Function Operator">‚ä´</a> <a id="93491" href="Demos.HSP.html#93324" class="Bound">p</a> <a id="93493" href="Demos.HSP.html#59247" class="Function Operator">‚âà</a> <a id="93495" href="Demos.HSP.html#93327" class="Bound">q</a> <a id="93497" class="Symbol">‚Üí</a> <a id="93499" class="Symbol">(</a><a id="93500" href="Demos.HSP.html#93324" class="Bound">p</a> <a id="93502" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="93504" href="Demos.HSP.html#93327" class="Bound">q</a><a id="93505" class="Symbol">)</a> <a id="93507" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="93509" href="Demos.HSP.html#16046" class="Function">ker</a> <a id="93513" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="93515" href="Demos.HSP.html#80648" class="Function Operator">homF[</a> <a id="93521" href="Demos.HSP.html#88911" class="Bound">X</a> <a id="93523" href="Demos.HSP.html#80648" class="Function Operator">]</a> <a id="93525" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a>
  <a id="93529" href="Demos.HSP.html#93461" class="Function">Sùí¶‚ä´‚ÜíkerùîΩ</a> <a id="93538" href="Demos.HSP.html#93538" class="Bound">x</a> <a id="93540" class="Symbol">=</a> <a id="93542" href="Demos.HSP.html#61498" class="InductiveConstructor">hyp</a> <a id="93546" class="Symbol">(</a><a id="93547" href="Demos.HSP.html#71414" class="Function">S-id2</a><a id="93552" class="Symbol">{</a><a id="93553" class="Argument">‚Ñì</a> <a id="93555" class="Symbol">=</a> <a id="93557" href="Demos.HSP.html#88907" class="Bound">‚Ñì</a><a id="93558" class="Symbol">}{</a><a id="93560" class="Argument">p</a> <a id="93562" class="Symbol">=</a> <a id="93564" href="Demos.HSP.html#93324" class="Bound">p</a><a id="93565" class="Symbol">}{</a><a id="93567" href="Demos.HSP.html#93327" class="Bound">q</a><a id="93568" class="Symbol">}</a> <a id="93570" href="Demos.HSP.html#93538" class="Bound">x</a><a id="93571" class="Symbol">)</a>

  <a id="93576" href="Demos.HSP.html#93576" class="Function">pqEqual</a> <a id="93584" class="Symbol">:</a> <a id="93586" class="Symbol">‚àÄ</a> <a id="93588" href="Demos.HSP.html#93588" class="Bound">i</a> <a id="93590" class="Symbol">‚Üí</a> <a id="93592" href="Demos.HSP.html#90807" class="Function">skEqual</a> <a id="93600" href="Demos.HSP.html#93588" class="Bound">i</a> <a id="93602" class="Symbol">{</a><a id="93603" href="Demos.HSP.html#93324" class="Bound">p</a><a id="93604" class="Symbol">}{</a><a id="93606" href="Demos.HSP.html#93327" class="Bound">q</a><a id="93607" class="Symbol">}</a>
  <a id="93611" href="Demos.HSP.html#93576" class="Function">pqEqual</a> <a id="93619" href="Demos.HSP.html#93619" class="Bound">i</a> <a id="93621" class="Symbol">=</a> <a id="93623" href="Demos.HSP.html#93736" class="Function">goal</a>
   <a id="93631" class="Keyword">where</a>
   <a id="93640" class="Keyword">open</a> <a id="93645" href="Demos.HSP.html#53101" class="Module">Environment</a> <a id="93657" class="Symbol">(</a><a id="93658" href="Demos.HSP.html#90706" class="Function">ùîÑ</a> <a id="93660" href="Demos.HSP.html#93619" class="Bound">i</a><a id="93661" class="Symbol">)</a>  <a id="93664" class="Keyword">using</a> <a id="93670" class="Symbol">(</a> <a id="93672" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶_‚üß</a> <a id="93676" class="Symbol">)</a>
   <a id="93681" class="Keyword">open</a> <a id="93686" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="93693" href="Demos.HSP.html#23785" class="Function Operator">ùîª[</a> <a id="93696" href="Demos.HSP.html#90706" class="Function">ùîÑ</a> <a id="93698" href="Demos.HSP.html#93619" class="Bound">i</a> <a id="93700" href="Demos.HSP.html#23785" class="Function Operator">]</a>    <a id="93705" class="Keyword">using</a> <a id="93711" class="Symbol">(</a> <a id="93713" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="93717" class="Symbol">;</a> <a id="93719" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="93723" class="Symbol">;</a> <a id="93725" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="93731" class="Symbol">)</a>
   <a id="93736" href="Demos.HSP.html#93736" class="Function">goal</a> <a id="93741" class="Symbol">:</a> <a id="93743" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶</a> <a id="93745" href="Demos.HSP.html#93324" class="Bound">p</a> <a id="93747" href="Demos.HSP.html#53861" class="Function Operator">‚üß</a> <a id="93749" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="93753" href="Demos.HSP.html#7390" class="Field">snd</a> <a id="93757" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a> <a id="93759" href="Demos.HSP.html#93619" class="Bound">i</a> <a id="93761" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a> <a id="93763" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a> <a id="93765" href="Demos.HSP.html#53861" class="Function Operator">‚ü¶</a> <a id="93767" href="Demos.HSP.html#93327" class="Bound">q</a> <a id="93769" href="Demos.HSP.html#53861" class="Function Operator">‚üß</a> <a id="93771" href="Demos.HSP.html#7592" class="Field Operator">‚ü®$‚ü©</a> <a id="93775" href="Demos.HSP.html#7390" class="Field">snd</a> <a id="93779" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a> <a id="93781" href="Demos.HSP.html#93619" class="Bound">i</a> <a id="93783" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a>
   <a id="93788" href="Demos.HSP.html#93736" class="Function">goal</a>  <a id="93794" class="Symbol">=</a> <a id="93796" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="93802" class="Symbol">(</a><a id="93803" href="Demos.HSP.html#74947" class="Function">free-lift-interp</a><a id="93819" class="Symbol">{</a><a id="93820" class="Argument">ùë®</a> <a id="93822" class="Symbol">=</a> <a id="93824" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="93826" href="Demos.HSP.html#93619" class="Bound">i</a> <a id="93828" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a><a id="93829" class="Symbol">}(</a><a id="93831" href="Demos.HSP.html#7390" class="Field">snd</a> <a id="93835" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a> <a id="93837" href="Demos.HSP.html#93619" class="Bound">i</a> <a id="93839" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a><a id="93840" class="Symbol">)</a> <a id="93842" href="Demos.HSP.html#93324" class="Bound">p</a><a id="93843" class="Symbol">)</a>
         <a id="93854" class="Symbol">(</a> <a id="93856" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="93862" class="Symbol">(</a><a id="93863" href="Demos.HSP.html#93330" class="Bound">pKq</a> <a id="93867" href="Demos.HSP.html#93619" class="Bound">i</a><a id="93868" class="Symbol">)(</a><a id="93870" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="93874" class="Symbol">(</a><a id="93875" href="Demos.HSP.html#74947" class="Function">free-lift-interp</a><a id="93891" class="Symbol">{</a><a id="93892" class="Argument">ùë®</a> <a id="93894" class="Symbol">=</a> <a id="93896" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="93898" href="Demos.HSP.html#93619" class="Bound">i</a> <a id="93900" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a><a id="93901" class="Symbol">}</a> <a id="93903" class="Symbol">(</a><a id="93904" href="Demos.HSP.html#7390" class="Field">snd</a> <a id="93908" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a> <a id="93910" href="Demos.HSP.html#93619" class="Bound">i</a> <a id="93912" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a><a id="93913" class="Symbol">)</a> <a id="93915" href="Demos.HSP.html#93327" class="Bound">q</a><a id="93916" class="Symbol">)))</a>

</pre>
\fi
\noindent We conclude that the homomorphism from \Free{X} to \af{ùë™} is injective, whence
\Free{X} is (isomorphic to) a subalgebra of \af{ùë™}.\footnote{The function \af{mon‚Üí‚â§} in
the proof of \af{F‚â§C} merely extracts a subalgebra witness from a monomorphism.}

<pre class="Agda">

 <a id="94210" href="Demos.HSP.html#94210" class="Function">monFC</a> <a id="94216" class="Symbol">:</a> <a id="94218" href="Demos.HSP.html#33390" class="Function">mon</a> <a id="94222" href="Demos.HSP.html#79358" class="Function Operator">ùîΩ[</a> <a id="94225" href="Demos.HSP.html#88911" class="Bound">X</a> <a id="94227" href="Demos.HSP.html#79358" class="Function Operator">]</a> <a id="94229" href="Demos.HSP.html#90742" class="Function">ùë™</a>
 <a id="94232" href="Demos.HSP.html#94210" class="Function">monFC</a> <a id="94238" class="Symbol">=</a> <a id="94240" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="94242" href="Demos.HSP.html#92702" class="Function">homFC</a> <a id="94248" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="94250" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="94252" class="Keyword">record</a> <a id="94259" class="Symbol">{</a> <a id="94261" href="Demos.HSP.html#33292" class="Field">isHom</a> <a id="94267" class="Symbol">=</a> <a id="94269" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a> <a id="94271" href="Demos.HSP.html#92702" class="Function">homFC</a> <a id="94277" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a> <a id="94279" class="Symbol">;</a> <a id="94281" href="Demos.HSP.html#33317" class="Field">isInjective</a> <a id="94293" class="Symbol">=</a> <a id="94295" href="Demos.HSP.html#93189" class="Function">kerC‚äÜkerF</a> <a id="94305" class="Symbol">}</a>

 <a id="94309" href="Demos.HSP.html#94309" class="Function">F‚â§C</a> <a id="94313" class="Symbol">:</a> <a id="94315" href="Demos.HSP.html#79358" class="Function Operator">ùîΩ[</a> <a id="94318" href="Demos.HSP.html#88911" class="Bound">X</a> <a id="94320" href="Demos.HSP.html#79358" class="Function Operator">]</a> <a id="94322" href="Demos.HSP.html#45928" class="Function Operator">‚â§</a> <a id="94324" href="Demos.HSP.html#90742" class="Function">ùë™</a>
 <a id="94327" href="Demos.HSP.html#94309" class="Function">F‚â§C</a> <a id="94331" class="Symbol">=</a> <a id="94333" href="Demos.HSP.html#47486" class="Function">mon‚Üí‚â§</a> <a id="94339" href="Demos.HSP.html#94210" class="Function">monFC</a>

</pre>
From \af{F‚â§C} it follows that \Free{X} belongs to \af{S} (\af{P} \ab{ùí¶}). This
requires one more technical lemma concerning the classes \af{S} and \af{P}; specifically,
\ifshort
\af{P} (\af{S} \ab{ùí¶}) \aof{‚äÜ} \af{S} (\af{P} \ab{ùí¶}) holds for every class \ab{ùí¶}.
The \agdaalgebras library denotes this fact by \af{PS‚äÜSP} (\seeshort).
\else
a product of subalgebras of algebras in a class is a subalgebra of a product of algebras in the class;
in other terms, \af{P} (\af{S} \ab{ùí¶}) \aof{‚äÜ} \af{S} (\af{P} \ab{ùí¶}), for every class \ab{ùí¶}.
We state and prove this in \agda as follows.

<pre class="Agda">

 <a id="94955" class="Keyword">private</a> <a id="94963" href="Demos.HSP.html#94963" class="Function">a</a> <a id="94965" class="Symbol">=</a> <a id="94967" href="Demos.HSP.html#88888" class="Bound">Œ±</a> <a id="94969" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="94971" href="Demos.HSP.html#88890" class="Bound">œÅ·µÉ</a> <a id="94974" class="Symbol">;</a> <a id="94976" href="Demos.HSP.html#94976" class="Function">oa‚Ñì</a> <a id="94980" class="Symbol">=</a> <a id="94982" href="Demos.HSP.html#44469" class="Function">ov</a> <a id="94985" class="Symbol">(</a><a id="94986" href="Demos.HSP.html#94963" class="Function">a</a> <a id="94988" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="94990" href="Demos.HSP.html#88907" class="Bound">‚Ñì</a><a id="94991" class="Symbol">)</a>

 <a id="94995" href="Demos.HSP.html#94995" class="Function">PS‚äÜSP</a> <a id="95001" class="Symbol">:</a> <a id="95003" href="Demos.HSP.html#66214" class="Function">P</a> <a id="95005" class="Symbol">(</a><a id="95006" href="Demos.HSP.html#94963" class="Function">a</a> <a id="95008" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="95010" href="Demos.HSP.html#88907" class="Bound">‚Ñì</a><a id="95011" class="Symbol">)</a> <a id="95013" href="Demos.HSP.html#94976" class="Function">oa‚Ñì</a> <a id="95017" class="Symbol">(</a><a id="95018" href="Demos.HSP.html#66102" class="Function">S</a><a id="95019" class="Symbol">{</a><a id="95020" class="Argument">Œ≤</a> <a id="95022" class="Symbol">=</a> <a id="95024" href="Demos.HSP.html#88888" class="Bound">Œ±</a><a id="95025" class="Symbol">}{</a><a id="95027" href="Demos.HSP.html#88890" class="Bound">œÅ·µÉ</a><a id="95029" class="Symbol">}</a> <a id="95031" href="Demos.HSP.html#88907" class="Bound">‚Ñì</a> <a id="95033" href="Demos.HSP.html#88871" class="Bound">ùí¶</a><a id="95034" class="Symbol">)</a> <a id="95036" href="Relation.Unary.html#1742" class="Function Operator">‚äÜ</a> <a id="95038" href="Demos.HSP.html#66102" class="Function">S</a> <a id="95040" href="Demos.HSP.html#94976" class="Function">oa‚Ñì</a> <a id="95044" class="Symbol">(</a><a id="95045" href="Demos.HSP.html#66214" class="Function">P</a> <a id="95047" href="Demos.HSP.html#88907" class="Bound">‚Ñì</a> <a id="95049" href="Demos.HSP.html#94976" class="Function">oa‚Ñì</a> <a id="95053" href="Demos.HSP.html#88871" class="Bound">ùí¶</a><a id="95054" class="Symbol">)</a>
 <a id="95057" href="Demos.HSP.html#94995" class="Function">PS‚äÜSP</a> <a id="95063" class="Symbol">{</a><a id="95064" href="Demos.HSP.html#95064" class="Bound">ùë©</a><a id="95065" class="Symbol">}</a> <a id="95067" class="Symbol">(</a><a id="95068" href="Demos.HSP.html#95068" class="Bound">I</a> <a id="95070" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="95072" class="Symbol">(</a> <a id="95074" href="Demos.HSP.html#95074" class="Bound">ùíú</a> <a id="95076" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="95078" href="Demos.HSP.html#95078" class="Bound">sA</a> <a id="95081" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="95083" href="Demos.HSP.html#95083" class="Bound">B‚âÖ‚®ÖA</a> <a id="95088" class="Symbol">))</a> <a id="95091" class="Symbol">=</a> <a id="95093" href="Demos.HSP.html#95249" class="Function">Goal</a>
  <a id="95100" class="Keyword">where</a>
  <a id="95108" href="Demos.HSP.html#95108" class="Function">‚Ñ¨</a> <a id="95110" class="Symbol">:</a> <a id="95112" href="Demos.HSP.html#95068" class="Bound">I</a> <a id="95114" class="Symbol">‚Üí</a> <a id="95116" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="95124" href="Demos.HSP.html#88888" class="Bound">Œ±</a> <a id="95126" href="Demos.HSP.html#88890" class="Bound">œÅ·µÉ</a>
  <a id="95131" href="Demos.HSP.html#95108" class="Function">‚Ñ¨</a> <a id="95133" href="Demos.HSP.html#95133" class="Bound">i</a> <a id="95135" class="Symbol">=</a> <a id="95137" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="95139" href="Demos.HSP.html#95078" class="Bound">sA</a> <a id="95142" href="Demos.HSP.html#95133" class="Bound">i</a> <a id="95144" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a>
  <a id="95148" href="Demos.HSP.html#95148" class="Function">kB</a> <a id="95151" class="Symbol">:</a> <a id="95153" class="Symbol">(</a><a id="95154" href="Demos.HSP.html#95154" class="Bound">i</a> <a id="95156" class="Symbol">:</a> <a id="95158" href="Demos.HSP.html#95068" class="Bound">I</a><a id="95159" class="Symbol">)</a> <a id="95161" class="Symbol">‚Üí</a> <a id="95163" href="Demos.HSP.html#95108" class="Function">‚Ñ¨</a> <a id="95165" href="Demos.HSP.html#95154" class="Bound">i</a> <a id="95167" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="95169" href="Demos.HSP.html#88871" class="Bound">ùí¶</a>
  <a id="95173" href="Demos.HSP.html#95148" class="Function">kB</a> <a id="95176" href="Demos.HSP.html#95176" class="Bound">i</a> <a id="95178" class="Symbol">=</a>  <a id="95181" href="Demos.HSP.html#7330" class="Field">fst</a> <a id="95185" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a> <a id="95187" href="Demos.HSP.html#95078" class="Bound">sA</a> <a id="95190" href="Demos.HSP.html#95176" class="Bound">i</a> <a id="95192" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a>
  <a id="95196" href="Demos.HSP.html#95196" class="Function">‚®ÖA‚â§‚®ÖB</a> <a id="95202" class="Symbol">:</a> <a id="95204" href="Demos.HSP.html#29982" class="Function">‚®Ö</a> <a id="95206" href="Demos.HSP.html#95074" class="Bound">ùíú</a> <a id="95208" href="Demos.HSP.html#45928" class="Function Operator">‚â§</a> <a id="95210" href="Demos.HSP.html#29982" class="Function">‚®Ö</a> <a id="95212" href="Demos.HSP.html#95108" class="Function">‚Ñ¨</a>
  <a id="95216" href="Demos.HSP.html#95196" class="Function">‚®ÖA‚â§‚®ÖB</a> <a id="95222" class="Symbol">=</a> <a id="95224" href="Demos.HSP.html#46893" class="Function">‚®Ö-‚â§</a> <a id="95228" class="Symbol">Œª</a> <a id="95230" href="Demos.HSP.html#95230" class="Bound">i</a> <a id="95232" class="Symbol">‚Üí</a> <a id="95234" href="Demos.HSP.html#7390" class="Field">snd</a> <a id="95238" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a> <a id="95240" href="Demos.HSP.html#95078" class="Bound">sA</a> <a id="95243" href="Demos.HSP.html#95230" class="Bound">i</a> <a id="95245" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a>
  <a id="95249" href="Demos.HSP.html#95249" class="Function">Goal</a> <a id="95254" class="Symbol">:</a> <a id="95256" href="Demos.HSP.html#95064" class="Bound">ùë©</a> <a id="95258" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="95260" href="Demos.HSP.html#66102" class="Function">S</a><a id="95261" class="Symbol">{</a><a id="95262" class="Argument">Œ≤</a> <a id="95264" class="Symbol">=</a> <a id="95266" href="Demos.HSP.html#94976" class="Function">oa‚Ñì</a><a id="95269" class="Symbol">}{</a><a id="95271" href="Demos.HSP.html#94976" class="Function">oa‚Ñì</a><a id="95274" class="Symbol">}</a><a id="95275" href="Demos.HSP.html#94976" class="Function">oa‚Ñì</a> <a id="95279" class="Symbol">(</a><a id="95280" href="Demos.HSP.html#66214" class="Function">P</a> <a id="95282" class="Symbol">{</a><a id="95283" class="Argument">Œ≤</a> <a id="95285" class="Symbol">=</a> <a id="95287" href="Demos.HSP.html#94976" class="Function">oa‚Ñì</a><a id="95290" class="Symbol">}{</a><a id="95292" href="Demos.HSP.html#94976" class="Function">oa‚Ñì</a><a id="95295" class="Symbol">}</a> <a id="95297" href="Demos.HSP.html#88907" class="Bound">‚Ñì</a> <a id="95299" href="Demos.HSP.html#94976" class="Function">oa‚Ñì</a> <a id="95303" href="Demos.HSP.html#88871" class="Bound">ùí¶</a><a id="95304" class="Symbol">)</a>
  <a id="95308" href="Demos.HSP.html#95249" class="Function">Goal</a> <a id="95313" class="Symbol">=</a> <a id="95315" href="Demos.HSP.html#29982" class="Function">‚®Ö</a> <a id="95317" href="Demos.HSP.html#95108" class="Function">‚Ñ¨</a> <a id="95319" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="95321" class="Symbol">(</a><a id="95322" href="Demos.HSP.html#95068" class="Bound">I</a> <a id="95324" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="95326" class="Symbol">(</a><a id="95327" href="Demos.HSP.html#95108" class="Function">‚Ñ¨</a> <a id="95329" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="95331" class="Symbol">(</a><a id="95332" href="Demos.HSP.html#95148" class="Function">kB</a> <a id="95335" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="95337" href="Demos.HSP.html#42482" class="Function">‚âÖ-refl</a><a id="95343" class="Symbol">)))</a> <a id="95347" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="95349" class="Symbol">(</a><a id="95350" href="Demos.HSP.html#47595" class="Function">‚âÖ-trans-‚â§</a> <a id="95360" href="Demos.HSP.html#95083" class="Bound">B‚âÖ‚®ÖA</a> <a id="95365" href="Demos.HSP.html#95196" class="Function">‚®ÖA‚â§‚®ÖB</a><a id="95370" class="Symbol">)</a>

</pre>
With this we can prove that \Free{X} belongs to \af{S} (\af{P} \ab{ùí¶}).
\fi

<pre class="Agda">

 <a id="95476" href="Demos.HSP.html#95476" class="Function">SPF</a> <a id="95480" class="Symbol">:</a> <a id="95482" href="Demos.HSP.html#79358" class="Function Operator">ùîΩ[</a> <a id="95485" href="Demos.HSP.html#88911" class="Bound">X</a> <a id="95487" href="Demos.HSP.html#79358" class="Function Operator">]</a> <a id="95489" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="95491" href="Demos.HSP.html#66102" class="Function">S</a> <a id="95493" href="Demos.HSP.html#88966" class="Function">Œπ</a> <a id="95495" class="Symbol">(</a><a id="95496" href="Demos.HSP.html#66214" class="Function">P</a> <a id="95498" href="Demos.HSP.html#88907" class="Bound">‚Ñì</a> <a id="95500" href="Demos.HSP.html#88966" class="Function">Œπ</a> <a id="95502" href="Demos.HSP.html#88871" class="Bound">ùí¶</a><a id="95503" class="Symbol">)</a>
 <a id="95506" href="Demos.HSP.html#95476" class="Function">SPF</a> <a id="95510" class="Symbol">=</a> <a id="95512" class="Keyword">let</a> <a id="95516" class="Symbol">(</a><a id="95517" href="Demos.HSP.html#95517" class="Bound">alg</a> <a id="95521" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="95523" href="Demos.HSP.html#95523" class="Bound">‚ààùí¶</a> <a id="95526" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="95528" href="Demos.HSP.html#95528" class="Bound">‚â§SP</a><a id="95531" class="Symbol">)</a> <a id="95533" class="Symbol">=</a> <a id="95535" href="Demos.HSP.html#94995" class="Function">PS‚äÜSP</a> <a id="95541" href="Demos.HSP.html#95599" class="Function">psC</a> <a id="95545" class="Keyword">in</a>
       <a id="95555" class="Symbol">(</a><a id="95556" href="Demos.HSP.html#95517" class="Bound">alg</a> <a id="95560" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="95562" href="Demos.HSP.html#95523" class="Bound">‚ààùí¶</a> <a id="95565" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="95567" href="Demos.HSP.html#46273" class="Function">‚â§-transitive</a> <a id="95580" href="Demos.HSP.html#94309" class="Function">F‚â§C</a> <a id="95584" href="Demos.HSP.html#95528" class="Bound">‚â§SP</a><a id="95587" class="Symbol">)</a>
  <a id="95591" class="Keyword">where</a>
  <a id="95599" href="Demos.HSP.html#95599" class="Function">psC</a> <a id="95603" class="Symbol">:</a> <a id="95605" href="Demos.HSP.html#90742" class="Function">ùë™</a> <a id="95607" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="95609" href="Demos.HSP.html#66214" class="Function">P</a> <a id="95611" class="Symbol">(</a><a id="95612" href="Demos.HSP.html#88888" class="Bound">Œ±</a> <a id="95614" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="95616" href="Demos.HSP.html#88890" class="Bound">œÅ·µÉ</a> <a id="95619" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="95621" href="Demos.HSP.html#88907" class="Bound">‚Ñì</a><a id="95622" class="Symbol">)</a> <a id="95624" href="Demos.HSP.html#88966" class="Function">Œπ</a> <a id="95626" class="Symbol">(</a><a id="95627" href="Demos.HSP.html#66102" class="Function">S</a> <a id="95629" href="Demos.HSP.html#88907" class="Bound">‚Ñì</a> <a id="95631" href="Demos.HSP.html#88871" class="Bound">ùí¶</a><a id="95632" class="Symbol">)</a>
  <a id="95636" href="Demos.HSP.html#95599" class="Function">psC</a> <a id="95640" class="Symbol">=</a> <a id="95642" href="Demos.HSP.html#90630" class="Function">‚Ñë</a> <a id="95644" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="95646" class="Symbol">(</a><a id="95647" href="Demos.HSP.html#90706" class="Function">ùîÑ</a> <a id="95649" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="95651" class="Symbol">((Œª</a> <a id="95655" href="Demos.HSP.html#95655" class="Bound">i</a> <a id="95657" class="Symbol">‚Üí</a> <a id="95659" href="Demos.HSP.html#7330" class="Field">fst</a> <a id="95663" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a> <a id="95665" href="Demos.HSP.html#95655" class="Bound">i</a> <a id="95667" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a><a id="95668" class="Symbol">)</a> <a id="95670" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="95672" href="Demos.HSP.html#42482" class="Function">‚âÖ-refl</a><a id="95678" class="Symbol">))</a>

</pre>
Finally, we prove that every algebra in \af{Mod} (\af{Th} (\af{V} \ab{ùí¶})) is a homomorphic image of \af{ùîΩ[~\ab{X}~]}.

\ifshort\else
<pre class="Agda">

<a id="95841" class="Keyword">module</a> <a id="95848" href="Demos.HSP.html#95848" class="Module">_</a> <a id="95850" class="Symbol">{</a><a id="95851" href="Demos.HSP.html#95851" class="Bound">ùí¶</a> <a id="95853" class="Symbol">:</a> <a id="95855" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="95859" class="Symbol">(</a><a id="95860" href="Demos.HSP.html#22836" class="Record">Algebra</a> <a id="95868" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="95870" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a><a id="95872" class="Symbol">)</a> <a id="95874" class="Symbol">(</a><a id="95875" href="Demos.HSP.html#8419" class="Generalizable">Œ±</a> <a id="95877" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="95879" href="Demos.HSP.html#8421" class="Generalizable">œÅ·µÉ</a> <a id="95882" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="95884" href="Demos.HSP.html#44469" class="Function">ov</a> <a id="95887" href="Demos.HSP.html#8443" class="Generalizable">‚Ñì</a><a id="95888" class="Symbol">)}</a> <a id="95891" class="Keyword">where</a>
 <a id="95898" class="Keyword">private</a> <a id="95906" href="Demos.HSP.html#95906" class="Function">c</a> <a id="95908" class="Symbol">=</a> <a id="95910" href="Demos.HSP.html#95868" class="Bound">Œ±</a> <a id="95912" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="95914" href="Demos.HSP.html#95870" class="Bound">œÅ·µÉ</a> <a id="95917" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="95919" href="Demos.HSP.html#95887" class="Bound">‚Ñì</a> <a id="95921" class="Symbol">;</a> <a id="95923" href="Demos.HSP.html#95923" class="Function">Œπ</a> <a id="95925" class="Symbol">=</a> <a id="95927" href="Demos.HSP.html#44469" class="Function">ov</a> <a id="95930" href="Demos.HSP.html#95906" class="Function">c</a>
 <a id="95933" class="Keyword">open</a> <a id="95938" href="Demos.HSP.html#79051" class="Module">FreeAlgebra</a> <a id="95950" class="Symbol">{</a><a id="95951" class="Argument">œá</a> <a id="95953" class="Symbol">=</a> <a id="95955" href="Demos.HSP.html#95906" class="Function">c</a><a id="95956" class="Symbol">}(</a><a id="95958" href="Demos.HSP.html#60552" class="Function">Th</a> <a id="95961" href="Demos.HSP.html#95851" class="Bound">ùí¶</a><a id="95962" class="Symbol">)</a> <a id="95964" class="Keyword">using</a> <a id="95970" class="Symbol">(</a> <a id="95972" href="Demos.HSP.html#79358" class="Function Operator">ùîΩ[_]</a> <a id="95977" class="Symbol">)</a>
</pre>
\fi
<pre class="Agda">

 <a id="96009" href="Demos.HSP.html#96009" class="Function">Var‚áíEqCl</a> <a id="96018" class="Symbol">:</a> <a id="96020" class="Symbol">‚àÄ</a> <a id="96022" href="Demos.HSP.html#96022" class="Bound">ùë®</a> <a id="96024" class="Symbol">‚Üí</a> <a id="96026" href="Demos.HSP.html#96022" class="Bound">ùë®</a> <a id="96028" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="96030" href="Demos.HSP.html#60650" class="Function">Mod</a> <a id="96034" class="Symbol">(</a><a id="96035" href="Demos.HSP.html#60552" class="Function">Th</a> <a id="96038" class="Symbol">(</a><a id="96039" href="Demos.HSP.html#66676" class="Function">V</a> <a id="96041" href="Demos.HSP.html#95887" class="Bound">‚Ñì</a> <a id="96043" href="Demos.HSP.html#95923" class="Function">Œπ</a> <a id="96045" href="Demos.HSP.html#95851" class="Bound">ùí¶</a><a id="96046" class="Symbol">))</a> <a id="96049" class="Symbol">‚Üí</a> <a id="96051" href="Demos.HSP.html#96022" class="Bound">ùë®</a> <a id="96053" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="96055" href="Demos.HSP.html#66676" class="Function">V</a> <a id="96057" href="Demos.HSP.html#95887" class="Bound">‚Ñì</a> <a id="96059" href="Demos.HSP.html#95923" class="Function">Œπ</a> <a id="96061" href="Demos.HSP.html#95851" class="Bound">ùí¶</a>
 <a id="96064" href="Demos.HSP.html#96009" class="Function">Var‚áíEqCl</a> <a id="96073" href="Demos.HSP.html#96073" class="Bound">ùë®</a> <a id="96075" href="Demos.HSP.html#96075" class="Bound">ModThA</a> <a id="96082" class="Symbol">=</a> <a id="96084" href="Demos.HSP.html#79358" class="Function Operator">ùîΩ[</a> <a id="96087" href="Demos.HSP.html#23838" class="Function Operator">ùïå[</a> <a id="96090" href="Demos.HSP.html#96073" class="Bound">ùë®</a> <a id="96092" href="Demos.HSP.html#23838" class="Function Operator">]</a> <a id="96094" href="Demos.HSP.html#79358" class="Function Operator">]</a> <a id="96096" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="96098" class="Symbol">(</a><a id="96099" href="Demos.HSP.html#96123" class="Function">spFA</a> <a id="96104" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="96106" href="Demos.HSP.html#96393" class="Function">AimgF</a><a id="96111" class="Symbol">)</a>
  <a id="96115" class="Keyword">where</a>
  <a id="96123" href="Demos.HSP.html#96123" class="Function">spFA</a> <a id="96128" class="Symbol">:</a> <a id="96130" href="Demos.HSP.html#79358" class="Function Operator">ùîΩ[</a> <a id="96133" href="Demos.HSP.html#23838" class="Function Operator">ùïå[</a> <a id="96136" href="Demos.HSP.html#96073" class="Bound">ùë®</a> <a id="96138" href="Demos.HSP.html#23838" class="Function Operator">]</a> <a id="96140" href="Demos.HSP.html#79358" class="Function Operator">]</a> <a id="96142" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="96144" href="Demos.HSP.html#66102" class="Function">S</a><a id="96145" class="Symbol">{</a><a id="96146" href="Demos.HSP.html#95923" class="Function">Œπ</a><a id="96147" class="Symbol">}</a> <a id="96149" href="Demos.HSP.html#95923" class="Function">Œπ</a> <a id="96151" class="Symbol">(</a><a id="96152" href="Demos.HSP.html#66214" class="Function">P</a> <a id="96154" href="Demos.HSP.html#95887" class="Bound">‚Ñì</a> <a id="96156" href="Demos.HSP.html#95923" class="Function">Œπ</a> <a id="96158" href="Demos.HSP.html#95851" class="Bound">ùí¶</a><a id="96159" class="Symbol">)</a>
  <a id="96163" href="Demos.HSP.html#96123" class="Function">spFA</a> <a id="96168" class="Symbol">=</a> <a id="96170" href="Demos.HSP.html#95476" class="Function">SPF</a><a id="96173" class="Symbol">{</a><a id="96174" class="Argument">‚Ñì</a> <a id="96176" class="Symbol">=</a> <a id="96178" href="Demos.HSP.html#95887" class="Bound">‚Ñì</a><a id="96179" class="Symbol">}</a> <a id="96181" href="Demos.HSP.html#95851" class="Bound">ùí¶</a>
  <a id="96185" href="Demos.HSP.html#96185" class="Function">epiFlA</a> <a id="96192" class="Symbol">:</a> <a id="96194" href="Demos.HSP.html#33827" class="Function">epi</a> <a id="96198" href="Demos.HSP.html#79358" class="Function Operator">ùîΩ[</a> <a id="96201" href="Demos.HSP.html#23838" class="Function Operator">ùïå[</a> <a id="96204" href="Demos.HSP.html#96073" class="Bound">ùë®</a> <a id="96206" href="Demos.HSP.html#23838" class="Function Operator">]</a> <a id="96208" href="Demos.HSP.html#79358" class="Function Operator">]</a> <a id="96210" class="Symbol">(</a><a id="96211" href="Demos.HSP.html#27763" class="Function">Lift-Alg</a> <a id="96220" href="Demos.HSP.html#96073" class="Bound">ùë®</a> <a id="96222" href="Demos.HSP.html#95923" class="Function">Œπ</a> <a id="96224" href="Demos.HSP.html#95923" class="Function">Œπ</a><a id="96225" class="Symbol">)</a>
  <a id="96229" href="Demos.HSP.html#96185" class="Function">epiFlA</a> <a id="96236" class="Symbol">=</a> <a id="96238" href="Demos.HSP.html#82360" class="Function">F-ModTh-epi-lift</a><a id="96254" class="Symbol">{</a><a id="96255" class="Argument">‚Ñì</a> <a id="96257" class="Symbol">=</a> <a id="96259" href="Demos.HSP.html#95887" class="Bound">‚Ñì</a><a id="96260" class="Symbol">}</a> <a id="96262" class="Symbol">(Œª</a> <a id="96265" class="Symbol">{</a><a id="96266" href="Demos.HSP.html#96266" class="Bound">p</a> <a id="96268" href="Demos.HSP.html#96268" class="Bound">q</a><a id="96269" class="Symbol">}</a> <a id="96271" class="Symbol">‚Üí</a> <a id="96273" href="Demos.HSP.html#96075" class="Bound">ModThA</a><a id="96279" class="Symbol">{</a><a id="96280" class="Argument">p</a> <a id="96282" class="Symbol">=</a> <a id="96284" href="Demos.HSP.html#96266" class="Bound">p</a><a id="96285" class="Symbol">}{</a><a id="96287" href="Demos.HSP.html#96268" class="Bound">q</a><a id="96288" class="Symbol">})</a>
  <a id="96293" href="Demos.HSP.html#96293" class="Function">œÜ</a> <a id="96295" class="Symbol">:</a> <a id="96297" href="Demos.HSP.html#27763" class="Function">Lift-Alg</a> <a id="96306" href="Demos.HSP.html#96073" class="Bound">ùë®</a> <a id="96308" href="Demos.HSP.html#95923" class="Function">Œπ</a> <a id="96310" href="Demos.HSP.html#95923" class="Function">Œπ</a> <a id="96312" href="Demos.HSP.html#44539" class="Function Operator">IsHomImageOf</a> <a id="96325" href="Demos.HSP.html#79358" class="Function Operator">ùîΩ[</a> <a id="96328" href="Demos.HSP.html#23838" class="Function Operator">ùïå[</a> <a id="96331" href="Demos.HSP.html#96073" class="Bound">ùë®</a> <a id="96333" href="Demos.HSP.html#23838" class="Function Operator">]</a> <a id="96335" href="Demos.HSP.html#79358" class="Function Operator">]</a>
  <a id="96339" href="Demos.HSP.html#96293" class="Function">œÜ</a> <a id="96341" class="Symbol">=</a> <a id="96343" href="Demos.HSP.html#34183" class="Function">epi‚Üíontohom</a> <a id="96355" href="Demos.HSP.html#79358" class="Function Operator">ùîΩ[</a> <a id="96358" href="Demos.HSP.html#23838" class="Function Operator">ùïå[</a> <a id="96361" href="Demos.HSP.html#96073" class="Bound">ùë®</a> <a id="96363" href="Demos.HSP.html#23838" class="Function Operator">]</a> <a id="96365" href="Demos.HSP.html#79358" class="Function Operator">]</a> <a id="96367" class="Symbol">(</a><a id="96368" href="Demos.HSP.html#27763" class="Function">Lift-Alg</a> <a id="96377" href="Demos.HSP.html#96073" class="Bound">ùë®</a> <a id="96379" href="Demos.HSP.html#95923" class="Function">Œπ</a> <a id="96381" href="Demos.HSP.html#95923" class="Function">Œπ</a><a id="96382" class="Symbol">)</a> <a id="96384" href="Demos.HSP.html#96185" class="Function">epiFlA</a>
  <a id="96393" href="Demos.HSP.html#96393" class="Function">AimgF</a> <a id="96399" class="Symbol">:</a> <a id="96401" href="Demos.HSP.html#96073" class="Bound">ùë®</a> <a id="96403" href="Demos.HSP.html#44539" class="Function Operator">IsHomImageOf</a> <a id="96416" href="Demos.HSP.html#79358" class="Function Operator">ùîΩ[</a> <a id="96419" href="Demos.HSP.html#23838" class="Function Operator">ùïå[</a> <a id="96422" href="Demos.HSP.html#96073" class="Bound">ùë®</a> <a id="96424" href="Demos.HSP.html#23838" class="Function Operator">]</a> <a id="96426" href="Demos.HSP.html#79358" class="Function Operator">]</a>
  <a id="96430" href="Demos.HSP.html#96393" class="Function">AimgF</a> <a id="96436" class="Symbol">=</a> <a id="96438" href="Demos.HSP.html#35351" class="Function">‚àò-hom</a> <a id="96444" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="96446" href="Demos.HSP.html#96293" class="Function">œÜ</a> <a id="96448" href="Demos.HSP.html#9308" class="Function Operator">‚à£</a> <a id="96450" class="Symbol">(</a><a id="96451" href="Demos.HSP.html#41253" class="Field">from</a> <a id="96456" href="Demos.HSP.html#43854" class="Function">Lift-‚âÖ</a><a id="96462" class="Symbol">)</a><a id="96463" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="96465" href="Demos.HSP.html#14809" class="Function">‚àò-IsSurjective</a> <a id="96480" class="Symbol">_</a> <a id="96482" class="Symbol">_</a> <a id="96484" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a> <a id="96486" href="Demos.HSP.html#96293" class="Function">œÜ</a> <a id="96488" href="Demos.HSP.html#9345" class="Function Operator">‚à•</a><a id="96489" class="Symbol">(</a><a id="96490" href="Demos.HSP.html#41959" class="Function">fromIsSurjective</a> <a id="96507" class="Symbol">(</a><a id="96508" href="Demos.HSP.html#43854" class="Function">Lift-‚âÖ</a><a id="96514" class="Symbol">{</a><a id="96515" class="Argument">ùë®</a> <a id="96517" class="Symbol">=</a> <a id="96519" href="Demos.HSP.html#96073" class="Bound">ùë®</a><a id="96520" class="Symbol">}))</a>

</pre>
\af{ModTh-closure} and \af{Var‚áíEqCl} show that
\af{V} \ab{ùí¶} = \af{Mod} (\af{Th} (\af{V} \ab{ùí¶})) holds for every class \ab{ùí¶} of \ab{ùëÜ}-algebras.
Thus, every variety is an equational class. This completes the formal proof of Birkhoff's variety theorem.

%% -----------------------------------------------------------------------------
\section{Related work}
There have been a number of efforts to formalize parts of universal algebra in
type theory besides ours. The Coq proof assistant, based on the Calculus of
Inductive Constructions, was used by Capretta, in~\cite{Capretta:1999}, and
Spitters and Van der Weegen, in~\cite{Spitters:2011}, to formalized the basics
of universal algebra and some classical algebraic structures.
In~\cite{Gunther:2018} Gunther et al developed what seemed (prior to the \agdaalgebras
library) the most extensive library of formalized universal algebra to date.
Like \agdaalgebras,~\cite{Gunther:2018} is based on dependent type theory, is programmed
in \agda, and goes beyond the basic isomorphism theorems to include some equational logic.
Although their coverage is less extensive than that of \agdaalgebras, Gunther et al do treat
\emph{multi-sorted} algebras, whereas \agdaalgebras is currently limited to single-sorted structures.

As noted by Abel~\cite{Abel:2021}, Amato et al, in \cite{Amato:2021}, have
formalized multi-sorted algebras with finitary operators in UniMath. The restriction to
finitary operations was due to limitations of the UniMath type theory, which does
not have W-types nor user-defined inductive types.
Abel also notes that Lynge and Spitters, in~\cite{Lynge:2019}, formalize multi-sorted
algebras with finitary operators in \emph{Homotopy type theory} (\cite{HoTT}) using
Coq.  HoTT's higher inductive types enable them to define quotients as types, without
the need for setoids.  Lynge and Spitters prove three isomorphism theorems concerning
subalgebras and quotient algebras, but do not formalize universal algebras nor varieties.
Finally, in~\cite{Abel:2021}, Abel gives a new formal proof of the soundness theorem and
Birkhoff's completeness theorem for multi-sorted algebraic structures.

%Some other projects aimed at formalizing mathematics generally, and algebra in particular,
% have developed into very extensive libraries that include definitions, theorems, and proofs
% about algebraic structures, such as groups, rings, modules, etc.  However, the goals of these
% efforts seem to be the formalization of special classical algebraic structures, as opposed
% to the general theory of (universal) algebras. Moreover, the part of universal algebra and
% equational logic formalized in the \agdaalgebras library extends beyond the scope of prior efforts.

%Prior to our work, a constructive version of Birkhoff's theorem was published by
% Carlstr\"om in~\cite{Carlstrom:2008}.  However, the logical foundations of that work is constructive set
% theory and, as far as we know, there was no attempt to formalize it in type theory and verify
% it with a proof assistant.


% \section{Conclusion}

% One positive outcome of this project is further evidence in support of dependent type theory and the \agda language. We have shown that, despite the technical demands they place on the user, these technologies are accessible to universal algebraists who possess sufficient patience and resolve to codify their work in type theory and verify their results with a proof assistant.
