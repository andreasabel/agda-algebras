Introduction
============

The Agda Universal Algebra Library ([agda-algebras][]) formalizes the foundations of universal 
algebra in intensional Martin-L√∂f type theory ([MLTT][]) using [Agda][] () ¬†[@Norell:2007; @agdaref].
The library includes a collection of definitions and verified theorems originated in classical 
(set-theory based) universal algebra and equational logic, but adapted to [MLTT][].

The first major milestone of the project is a complete formalization of *Birkhoff's variety
theorem* (also known as the *HSP theorem*)¬†[@Birkhoff:1935]. To the best of our knowledge, this
is the first time Birkhoff's celebrated 1935 result has been formalized in [MLTT][].[^1]

Our first attempt to formalize Birkhoff's theorem suffered from two flaws.[^2] First, we 
assumed function extensionality in [MLTT][]; consequently, it was unclear whether the
formalization was fully constructive. Second, an inconsistency could be contrived by taking the
type `X`, representing an arbitrary collection of variable symbols, to be the two element type
(see ¬ß[7](#sec:discuss){reference-type="ref" reference="sec:discuss"} for details). To resolve
these issues, we developed a new formalization of the HSP theorem based on *setoids* and
rewrote much of the [agda-algebras][] library to support this approach. This enabled us to
avoid function extensionality altogether. Moreover, the type `X` of variable symbols was
treated with more care using the *context* and *environment* types that Andreas Abel uses
in¬†[@Abel:2021] to formalize Birkhoff's completeness theorem. These design choices are
discussed further in ¬ß[2.2](#setoids){reference-type="ref"
reference="setoids"}--[2.3](#setoid-functions){reference-type="ref"
reference="setoid-functions"}.

What follows is a self-contained formal proof of the HSP theorem in [Agda][]. This is achieved
by extracting a subset of the library, including only the pieces needed for the proof, into a
single literate file.[^3] For spaces reasons, we elide some inessential parts, but strive to
preserve the essential content and character of the development. Specifically, routine or
overly technical components, as well as anything that does not seem to offer insight into the
central ideas of the proof are omitted. (The file [[src/Demos/HSP.lagda]{.sans-serif}](https://github.com/ualib/agda-algebras/blob/master/src/Demos/HSP.lagda) mentioned above includes the full proof.)

<!-- We include here every line of code of our new proof of Birkhoff's theorem in a single module, -->
<!-- presented as a literate document,[^4]. Apart from a few dozen imports from the , the module is self-contained. -->

In this paper, we highlight some of the more challenging aspects of formalizing universal algebra in type theory. To some extent, this is a sobering glimpse of the significant technical hurdles that must be overcome to do mathematics in dependent type theory. Nonetheless, we hope to demonstrate that [MLTT][] is a relatively natural language for formalizing universal algebra. Indeed, we believe that researchers with sufficient patience and resolve can reap the substantial rewards of deeper insight and greater confidence in their results by using type
theory and a proof assistant like [Agda][]. On the other hand, this paper is probably not the best place to learn about the latter, since we assume the reader is already familiar with [MLTT][] and [Agda][]. In summary, our main contribution is to show that a straightforward but very general representation of algebraic structures in dependent type theory is quite practical, as we demonstrate by formalizing a major seminal result of universal algebra.

Preliminaries
=============

Logical foundations
-------------------

To best emulate [MLTT][], we use
<pre class="Agda">
<a id="3779" class="Symbol">{-#</a> <a id="3783" class="Keyword">OPTIONS</a> <a id="3791" class="Pragma">--without-K</a> <a id="3803" class="Pragma">--exact-split</a> <a id="3817" class="Pragma">--safe</a> <a id="3824" class="Symbol">#-}</a>
</pre>
 disables [Streicher's K axiom](https://ncatlab.org/nlab/show/axiom+K+%28type+theory%29); 
directs [Agda][] to accept only definitions behaving like *judgmental* equalities;
**safe** ensures that nothing is postulated outright.
(See¬†[@agdaref-axiomk; @agdaref-safeagda; @agdatools-patternmatching].)

Here are brief descriptions of these options, accompanied by links to
related documentation.

*  **without-K** disables [Streicher's K axiom](https://ncatlab.org/nlab/show/axiom+K+%28type+theory%29). See
   the [section on axiom K](https://agda.readthedocs.io/en/v2.6.1/language/without-k.html) in the [Agda Language Reference Manual](https://agda.readthedocs.io/en/v2.6.1.3/language)¬†[@agdaref-axiomk].

*  **exact-split** directs [Agda][] to accept only definitions behaving like *judgmental* equalities. See the [Pattern matching and equality](https://agda.readthedocs.io/en/v2.6.1/tools/command-line-options.html#pattern-matching-and-equality) section of the [Agda Tools](https://agda.readthedocs.io/en/v2.6.1.3/tools/) documentation¬†[@agdatools-patternmatching].

*  **safe** ensures that nothing is postulated outright---every non-axiom has to be an explicit assumption (e.g., an argument to a function or module). See the [cmdoption-safe](https://agda.readthedocs.io/en/v2.6.1/tools/command-line-options.html#cmdoption-safe) section of¬†[@agdaref-safeagda].

We also make use of the following definitions from [Agda][]'s standard library (ver.¬†1.7).

<pre class="Agda">
<a id="5310" class="Comment">-- Import universe levels and Signature type (described below) from the agda-algebras library.</a>
<a id="5405" class="Keyword">open</a> <a id="5410" class="Keyword">import</a> <a id="5417" href="Base.Algebras.Basic.html" class="Module">Base.Algebras.Basic</a> <a id="5437" class="Keyword">using</a> <a id="5443" class="Symbol">(</a> <a id="5445" href="Base.Algebras.Basic.html#1162" class="Generalizable">ùìû</a> <a id="5447" class="Symbol">;</a> <a id="5449" href="Base.Algebras.Basic.html#1164" class="Generalizable">ùì•</a> <a id="5451" class="Symbol">;</a> <a id="5453" href="Base.Algebras.Basic.html#3890" class="Function">Signature</a> <a id="5463" class="Symbol">)</a>
<a id="5465" class="Keyword">module</a> <a id="5472" href="Demos.HSP.html" class="Module">Demos.HSP</a> <a id="5482" class="Symbol">{</a><a id="5483" href="Demos.HSP.html#5483" class="Bound">ùëÜ</a> <a id="5485" class="Symbol">:</a> <a id="5487" href="Base.Algebras.Basic.html#3890" class="Function">Signature</a> <a id="5497" href="Base.Algebras.Basic.html#1162" class="Generalizable">ùìû</a> <a id="5499" href="Base.Algebras.Basic.html#1164" class="Generalizable">ùì•</a><a id="5500" class="Symbol">}</a> <a id="5502" class="Keyword">where</a>

<a id="5509" class="Comment">-- Import 16 definitions from the Agda Standard Library.</a>
<a id="5566" class="Keyword">open</a> <a id="5571" class="Keyword">import</a>  <a id="5579" href="Data.Unit.Polymorphic.html" class="Module">Data.Unit.Polymorphic</a>        <a id="5608" class="Keyword">using</a> <a id="5614" class="Symbol">(</a> <a id="5616" href="Data.Unit.Polymorphic.Base.html#480" class="Function">‚ä§</a> <a id="5618" class="Symbol">;</a> <a id="5620" href="Data.Unit.Polymorphic.Base.html#524" class="Function">tt</a>                                            <a id="5666" class="Symbol">)</a>
<a id="5668" class="Keyword">open</a> <a id="5673" class="Keyword">import</a>  <a id="5681" href="Function.html" class="Module">Function</a>                     <a id="5710" class="Keyword">using</a> <a id="5716" class="Symbol">(</a> <a id="5718" href="Function.Base.html#615" class="Function">id</a> <a id="5721" class="Symbol">;</a> <a id="5723" href="Function.Base.html#1031" class="Function Operator">_‚àò_</a> <a id="5727" class="Symbol">;</a> <a id="5729" href="Function.Base.html#1554" class="Function">flip</a>                                   <a id="5768" class="Symbol">)</a>
<a id="5770" class="Keyword">open</a> <a id="5775" class="Keyword">import</a>  <a id="5783" href="Level.html" class="Module">Level</a>                        <a id="5812" class="Keyword">using</a> <a id="5818" class="Symbol">(</a> <a id="5820" href="Agda.Primitive.html#597" class="Postulate">Level</a>                                             <a id="5870" class="Symbol">)</a>
<a id="5872" class="Keyword">open</a> <a id="5877" class="Keyword">import</a>  <a id="5885" href="Relation.Binary.html" class="Module">Relation.Binary</a>              <a id="5914" class="Keyword">using</a> <a id="5920" class="Symbol">(</a> <a id="5922" href="Relation.Binary.Core.html#882" class="Function">Rel</a> <a id="5926" class="Symbol">;</a> <a id="5928" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="5935" class="Symbol">;</a> <a id="5937" href="Relation.Binary.Structures.html#1522" class="Record">IsEquivalence</a>                      <a id="5972" class="Symbol">)</a>
<a id="5974" class="Keyword">open</a> <a id="5979" class="Keyword">import</a>  <a id="5987" href="Relation.Binary.Definitions.html" class="Module">Relation.Binary.Definitions</a>  <a id="6016" class="Keyword">using</a> <a id="6022" class="Symbol">(</a> <a id="6024" href="Relation.Binary.Definitions.html#1339" class="Function">Reflexive</a> <a id="6034" class="Symbol">;</a> <a id="6036" href="Relation.Binary.Definitions.html#1498" class="Function">Symmetric</a> <a id="6046" class="Symbol">;</a> <a id="6048" href="Relation.Binary.Definitions.html#1978" class="Function">Transitive</a> <a id="6059" class="Symbol">;</a> <a id="6061" href="Relation.Binary.Definitions.html#1424" class="Function">Sym</a> <a id="6065" class="Symbol">;</a> <a id="6067" href="Relation.Binary.Definitions.html#1585" class="Function">Trans</a>  <a id="6074" class="Symbol">)</a>
<a id="6076" class="Keyword">open</a> <a id="6081" class="Keyword">import</a>  <a id="6089" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a>  <a id="6128" class="Keyword">using</a> <a id="6134" class="Symbol">(</a> <a id="6136" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">_‚â°_</a>                                     <a id="6176" class="Symbol">)</a>
<a id="6178" class="Keyword">open</a> <a id="6183" class="Keyword">import</a>  <a id="6191" href="Relation.Unary.html" class="Module">Relation.Unary</a>               <a id="6220" class="Keyword">using</a> <a id="6226" class="Symbol">(</a> <a id="6228" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="6233" class="Symbol">;</a> <a id="6235" href="Relation.Unary.html#1742" class="Function Operator">_‚äÜ_</a> <a id="6239" class="Symbol">;</a> <a id="6241" href="Relation.Unary.html#1523" class="Function Operator">_‚àà_</a>                                  <a id="6278" class="Symbol">)</a>

<a id="6281" class="Comment">-- -- Import 23 definitions from the Agda Standard Library and rename 12 of them.</a>
<a id="6363" class="Keyword">open</a> <a id="6368" class="Keyword">import</a>  <a id="6376" href="Agda.Primitive.html" class="Module">Agda.Primitive</a>  <a id="6392" class="Keyword">renaming</a>  <a id="6402" class="Symbol">(</a> <a id="6404" href="Agda.Primitive.html#326" class="Primitive">Set</a>    <a id="6411" class="Symbol">to</a> <a id="6414" class="Primitive">Type</a>    <a id="6422" class="Symbol">)</a>  <a id="6425" class="Keyword">using</a>  <a id="6432" class="Symbol">(</a> <a id="6434" href="Agda.Primitive.html#810" class="Primitive Operator">_‚äî_</a> <a id="6438" class="Symbol">;</a> <a id="6440" href="Agda.Primitive.html#780" class="Primitive">lsuc</a>                   <a id="6463" class="Symbol">)</a>
<a id="6465" class="Keyword">open</a> <a id="6470" class="Keyword">import</a>  <a id="6478" href="Data.Product.html" class="Module">Data.Product</a>    <a id="6494" class="Keyword">renaming</a>  <a id="6504" class="Symbol">(</a> <a id="6506" href="Agda.Builtin.Sigma.html#252" class="Field">proj‚ÇÅ</a>  <a id="6513" class="Symbol">to</a> <a id="6516" class="Field">fst</a>     <a id="6524" class="Symbol">)</a>  <a id="6527" class="Keyword">using</a>  <a id="6534" class="Symbol">(</a> <a id="6536" href="Data.Product.html#1167" class="Function Operator">_√ó_</a> <a id="6540" class="Symbol">;</a> <a id="6542" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">_,_</a> <a id="6546" class="Symbol">;</a> <a id="6548" href="Agda.Builtin.Sigma.html#166" class="Record">Œ£</a> <a id="6550" class="Symbol">;</a> <a id="6552" href="Data.Product.html#916" class="Function">Œ£-syntax</a>     <a id="6565" class="Symbol">)</a>
                             <a id="6596" class="Keyword">renaming</a>  <a id="6606" class="Symbol">(</a> <a id="6608" href="Agda.Builtin.Sigma.html#264" class="Field">proj‚ÇÇ</a>  <a id="6615" class="Symbol">to</a> <a id="6618" class="Field">snd</a>     <a id="6626" class="Symbol">)</a>
<a id="6628" class="Keyword">open</a> <a id="6633" class="Keyword">import</a>  <a id="6641" href="Function.html" class="Module">Function</a>        <a id="6657" class="Keyword">renaming</a>  <a id="6667" class="Symbol">(</a> <a id="6669" href="Function.Bundles.html#1868" class="Record">Func</a>   <a id="6676" class="Symbol">to</a> <a id="6679" class="Record">_‚ü∂_</a>     <a id="6687" class="Symbol">)</a>  <a id="6690" class="Keyword">using</a>  <a id="6697" class="Symbol">(</a>                              <a id="6728" class="Symbol">)</a>
<a id="6730" class="Keyword">open</a>         <a id="6743" href="Demos.HSP.html#6679" class="Module">_‚ü∂_</a>             <a id="6759" class="Keyword">renaming</a>  <a id="6769" class="Symbol">(</a> <a id="6771" href="Function.Bundles.html#1919" class="Field">f</a>      <a id="6778" class="Symbol">to</a> <a id="6781" class="Field">_‚ü®$‚ü©_</a>   <a id="6789" class="Symbol">)</a>  <a id="6792" class="Keyword">using</a>  <a id="6799" class="Symbol">(</a> <a id="6801" href="Function.Bundles.html#1938" class="Field">cong</a>                         <a id="6830" class="Symbol">)</a>
<a id="6832" class="Keyword">open</a>         <a id="6845" href="Relation.Binary.Structures.html#1522" class="Module">IsEquivalence</a>   <a id="6861" class="Keyword">renaming</a>  <a id="6871" class="Symbol">(</a> <a id="6873" href="Relation.Binary.Structures.html#1568" class="Field">refl</a>   <a id="6880" class="Symbol">to</a> <a id="6883" class="Field">refl·µâ</a>   <a id="6891" class="Symbol">)</a>
                             <a id="6922" class="Keyword">renaming</a>  <a id="6932" class="Symbol">(</a> <a id="6934" href="Relation.Binary.Structures.html#1594" class="Field">sym</a>    <a id="6941" class="Symbol">to</a> <a id="6944" class="Field">sym·µâ</a>    <a id="6952" class="Symbol">)</a>
                             <a id="6983" class="Keyword">renaming</a>  <a id="6993" class="Symbol">(</a> <a id="6995" href="Relation.Binary.Structures.html#1620" class="Field">trans</a>  <a id="7002" class="Symbol">to</a> <a id="7005" class="Field">trans·µâ</a>  <a id="7013" class="Symbol">)</a>  <a id="7016" class="Keyword">using</a>  <a id="7023" class="Symbol">(</a>                              <a id="7054" class="Symbol">)</a>
<a id="7056" class="Keyword">open</a>         <a id="7069" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a>          <a id="7085" class="Keyword">renaming</a>  <a id="7095" class="Symbol">(</a> <a id="7097" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>   <a id="7104" class="Symbol">to</a> <a id="7107" class="Function">reflÀ¢</a>   <a id="7115" class="Symbol">)</a>
                             <a id="7146" class="Keyword">renaming</a>  <a id="7156" class="Symbol">(</a> <a id="7158" href="Relation.Binary.Structures.html#1594" class="Function">sym</a>    <a id="7165" class="Symbol">to</a> <a id="7168" class="Function">symÀ¢</a>    <a id="7176" class="Symbol">)</a>
                             <a id="7207" class="Keyword">renaming</a>  <a id="7217" class="Symbol">(</a> <a id="7219" href="Relation.Binary.Structures.html#1620" class="Function">trans</a>  <a id="7226" class="Symbol">to</a> <a id="7229" class="Function">transÀ¢</a>  <a id="7237" class="Symbol">)</a>
                             <a id="7268" class="Keyword">renaming</a>  <a id="7278" class="Symbol">(</a> <a id="7280" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="7284" class="Symbol">to</a> <a id="7287" class="Field Operator">_‚âàÀ¢_</a>       <a id="7298" class="Symbol">)</a>  <a id="7301" class="Keyword">using</a>  <a id="7308" class="Symbol">(</a> <a id="7310" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a>  <a id="7319" class="Symbol">;</a> <a id="7321" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a>     <a id="7339" class="Symbol">)</a>

<a id="7342" class="Comment">-- Assign handles to 3 modules of the Agda Standard Library.</a>
<a id="7403" class="Keyword">import</a>       <a id="7416" href="Function.Definitions.html" class="Module">Function.Definitions</a>                   <a id="7455" class="Symbol">as</a>   <a id="7460" class="Module">FD</a>
<a id="7463" class="Keyword">import</a>       <a id="7476" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a>  <a id="7515" class="Symbol">as</a>   <a id="7520" class="Module">‚â°</a>
<a id="7522" class="Keyword">import</a>       <a id="7535" href="Relation.Binary.Reasoning.Setoid.html" class="Module">Relation.Binary.Reasoning.Setoid</a>       <a id="7574" class="Symbol">as</a>   <a id="7579" class="Module">SetoidReasoning</a>

<a id="7596" class="Keyword">private</a> <a id="7604" class="Keyword">variable</a> <a id="7613" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="7615" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a> <a id="7618" href="Demos.HSP.html#7618" class="Generalizable">Œ≤</a> <a id="7620" href="Demos.HSP.html#7620" class="Generalizable">œÅ·µá</a> <a id="7623" href="Demos.HSP.html#7623" class="Generalizable">Œ≥</a> <a id="7625" href="Demos.HSP.html#7625" class="Generalizable">œÅ·∂ú</a> <a id="7628" href="Demos.HSP.html#7628" class="Generalizable">Œ¥</a> <a id="7630" href="Demos.HSP.html#7630" class="Generalizable">œÅ·µà</a> <a id="7633" href="Demos.HSP.html#7633" class="Generalizable">œÅ</a> <a id="7635" href="Demos.HSP.html#7635" class="Generalizable">œá</a> <a id="7637" href="Demos.HSP.html#7637" class="Generalizable">‚Ñì</a> <a id="7639" class="Symbol">:</a> <a id="7641" href="Agda.Primitive.html#597" class="Postulate">Level</a> <a id="7647" class="Symbol">;</a>       <a id="7655" href="Demos.HSP.html#7655" class="Generalizable">Œì</a> <a id="7657" href="Demos.HSP.html#7657" class="Generalizable">Œî</a> <a id="7659" class="Symbol">:</a> <a id="7661" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="7666" href="Demos.HSP.html#7635" class="Generalizable">œá</a>

</pre>

The above imports include some adjustments to "standard" [Agda][] syntax; in particular, we use `Type` in place of `Set`, the infix long arrow symbol, `_‚ü∂_`, in place of `Func` (the type of "setoid functions," discussed in
¬ß[2.3](#setoid-functions){reference-type="ref"
reference="setoid-functions"} below), and the symbol `_‚ü®$‚ü©_` in place of `f` (application of the map of a setoid function); we use `fst` and `snd`, and sometimes `‚à£_‚à£` and `‚à•_‚à•`, to denote the first and second projections out of the product type `_√ó_`.

<pre class="Agda">
<a id="8218" class="Keyword">module</a> <a id="8225" href="Demos.HSP.html#8225" class="Module">_</a> <a id="8227" class="Symbol">{</a><a id="8228" href="Demos.HSP.html#8228" class="Bound">A</a> <a id="8230" class="Symbol">:</a> <a id="8232" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="8237" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="8239" class="Symbol">}{</a><a id="8241" href="Demos.HSP.html#8241" class="Bound">B</a> <a id="8243" class="Symbol">:</a> <a id="8245" href="Demos.HSP.html#8228" class="Bound">A</a> <a id="8247" class="Symbol">‚Üí</a> <a id="8249" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="8254" href="Demos.HSP.html#7618" class="Generalizable">Œ≤</a><a id="8255" class="Symbol">}</a> <a id="8257" class="Keyword">where</a>
 <a id="8264" href="Demos.HSP.html#8264" class="Function Operator">‚à£_‚à£</a> <a id="8268" class="Symbol">:</a> <a id="8270" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="8273" href="Demos.HSP.html#8273" class="Bound">x</a> <a id="8275" href="Data.Product.html#916" class="Function">‚àà</a> <a id="8277" href="Demos.HSP.html#8228" class="Bound">A</a> <a id="8279" href="Data.Product.html#916" class="Function">]</a> <a id="8281" href="Demos.HSP.html#8241" class="Bound">B</a> <a id="8283" href="Demos.HSP.html#8273" class="Bound">x</a> <a id="8285" class="Symbol">‚Üí</a> <a id="8287" href="Demos.HSP.html#8228" class="Bound">A</a>
 <a id="8290" href="Demos.HSP.html#8264" class="Function Operator">‚à£_‚à£</a> <a id="8294" class="Symbol">=</a> <a id="8296" href="Demos.HSP.html#6516" class="Field">fst</a>
 <a id="8301" href="Demos.HSP.html#8301" class="Function Operator">‚à•_‚à•</a> <a id="8305" class="Symbol">:</a> <a id="8307" class="Symbol">(</a><a id="8308" href="Demos.HSP.html#8308" class="Bound">z</a> <a id="8310" class="Symbol">:</a> <a id="8312" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="8315" href="Demos.HSP.html#8315" class="Bound">a</a> <a id="8317" href="Data.Product.html#916" class="Function">‚àà</a> <a id="8319" href="Demos.HSP.html#8228" class="Bound">A</a> <a id="8321" href="Data.Product.html#916" class="Function">]</a> <a id="8323" href="Demos.HSP.html#8241" class="Bound">B</a> <a id="8325" href="Demos.HSP.html#8315" class="Bound">a</a><a id="8326" class="Symbol">)</a> <a id="8328" class="Symbol">‚Üí</a> <a id="8330" href="Demos.HSP.html#8241" class="Bound">B</a> <a id="8332" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="8334" href="Demos.HSP.html#8308" class="Bound">z</a> <a id="8336" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a>
 <a id="8339" href="Demos.HSP.html#8301" class="Function Operator">‚à•_‚à•</a> <a id="8343" class="Symbol">=</a> <a id="8345" href="Demos.HSP.html#6618" class="Field">snd</a>
</pre>


Setoids
-------

A *setoid* is a pair consisting of a type and an equivalence relation on that type. Setoids are useful for representing a set with an explicit, "local" notion of equivalence, instead of relying on an implicit, "global" one as is more common in set theory. In reality, informal mathematical practice relies on equivalence relations quite pervasively, taking great care to define only functions that preserve equivalences, while eliding the details. To be properly formal, such details must be made explicit. While there are many different workable approaches, the one that requires no additional meta-theory is based on setoids, which is why we adopt it here. While in some settings setoids are found by others to be burdensome, we have not found them to be so for universal algebra.

The [agda-algebras][] library was first developed without setoids, relying on propositional equality instead, along with some experimental, domain-specific types for equivalence classes, quotients, etc. This
required postulating function extensionality,[^4] which is known to be independent from [MLTT][]¬†[@MHE; @MHE:2019]; this was unsatisfactory as we aimed to show that the theorems hold directly in [MLTT][] without extra axioms. The present work makes no appeal to functional extensionality or classical axioms like Choice or Excluded Middle.[^5]

Setoid functions
----------------

A *setoid function* is a function from one setoid to another that respects the underlying equivalences. If [ùë®]{.ab} and [ùë©]{.ab} are setoids, we use [ùë®]{.ab}_[‚ü∂]{.aor}_[ùë©]{.ab} to denote the type of setoid functions from [ùë®]{.ab} to [ùë©]{.ab}.

An example of a setoid function is the identity function from a setoid to itself. We define it, along with a binary composition operation for setoid functions, `_‚ü®‚àò‚ü©_`, as follows.

<pre class="Agda">

<a id="ùëñùëë"></a><a id="10191" href="Demos.HSP.html#10191" class="Function">ùëñùëë</a> <a id="10194" class="Symbol">:</a> <a id="10196" class="Symbol">{</a><a id="10197" href="Demos.HSP.html#10197" class="Bound">A</a> <a id="10199" class="Symbol">:</a> <a id="10201" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="10208" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="10210" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a><a id="10212" class="Symbol">}</a> <a id="10214" class="Symbol">‚Üí</a> <a id="10216" href="Demos.HSP.html#10197" class="Bound">A</a> <a id="10218" href="Demos.HSP.html#6679" class="Record Operator">‚ü∂</a> <a id="10220" href="Demos.HSP.html#10197" class="Bound">A</a>
<a id="10222" href="Demos.HSP.html#10191" class="Function">ùëñùëë</a> <a id="10225" class="Symbol">{</a><a id="10226" href="Demos.HSP.html#10226" class="Bound">A</a><a id="10227" class="Symbol">}</a> <a id="10229" class="Symbol">=</a> <a id="10231" class="Keyword">record</a> <a id="10238" class="Symbol">{</a> <a id="10240" href="Function.Bundles.html#1919" class="Field">f</a> <a id="10242" class="Symbol">=</a> <a id="10244" href="Function.Base.html#615" class="Function">id</a> <a id="10247" class="Symbol">;</a> <a id="10249" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="10254" class="Symbol">=</a> <a id="10256" href="Function.Base.html#615" class="Function">id</a> <a id="10259" class="Symbol">}</a>

<a id="_‚ü®‚àò‚ü©_"></a><a id="10262" href="Demos.HSP.html#10262" class="Function Operator">_‚ü®‚àò‚ü©_</a> <a id="10268" class="Symbol">:</a>  <a id="10271" class="Symbol">{</a><a id="10272" href="Demos.HSP.html#10272" class="Bound">A</a> <a id="10274" class="Symbol">:</a> <a id="10276" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="10283" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="10285" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a><a id="10287" class="Symbol">}</a> <a id="10289" class="Symbol">{</a><a id="10290" href="Demos.HSP.html#10290" class="Bound">B</a> <a id="10292" class="Symbol">:</a> <a id="10294" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="10301" href="Demos.HSP.html#7618" class="Generalizable">Œ≤</a> <a id="10303" href="Demos.HSP.html#7620" class="Generalizable">œÅ·µá</a><a id="10305" class="Symbol">}</a> <a id="10307" class="Symbol">{</a><a id="10308" href="Demos.HSP.html#10308" class="Bound">C</a> <a id="10310" class="Symbol">:</a> <a id="10312" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="10319" href="Demos.HSP.html#7623" class="Generalizable">Œ≥</a> <a id="10321" href="Demos.HSP.html#7625" class="Generalizable">œÅ·∂ú</a><a id="10323" class="Symbol">}</a>
 <a id="10326" class="Symbol">‚Üí</a>       <a id="10334" href="Demos.HSP.html#10290" class="Bound">B</a> <a id="10336" href="Demos.HSP.html#6679" class="Record Operator">‚ü∂</a> <a id="10338" href="Demos.HSP.html#10308" class="Bound">C</a>  <a id="10341" class="Symbol">‚Üí</a>  <a id="10344" href="Demos.HSP.html#10272" class="Bound">A</a> <a id="10346" href="Demos.HSP.html#6679" class="Record Operator">‚ü∂</a> <a id="10348" href="Demos.HSP.html#10290" class="Bound">B</a>  <a id="10351" class="Symbol">‚Üí</a>  <a id="10354" href="Demos.HSP.html#10272" class="Bound">A</a> <a id="10356" href="Demos.HSP.html#6679" class="Record Operator">‚ü∂</a> <a id="10358" href="Demos.HSP.html#10308" class="Bound">C</a>

<a id="10361" href="Demos.HSP.html#10361" class="Bound">f</a> <a id="10363" href="Demos.HSP.html#10262" class="Function Operator">‚ü®‚àò‚ü©</a> <a id="10367" href="Demos.HSP.html#10367" class="Bound">g</a> <a id="10369" class="Symbol">=</a> <a id="10371" class="Keyword">record</a>  <a id="10379" class="Symbol">{</a> <a id="10381" href="Function.Bundles.html#1919" class="Field">f</a> <a id="10383" class="Symbol">=</a> <a id="10385" class="Symbol">(</a><a id="10386" href="Demos.HSP.html#6781" class="Field Operator">_‚ü®$‚ü©_</a> <a id="10392" href="Demos.HSP.html#10361" class="Bound">f</a><a id="10393" class="Symbol">)</a> <a id="10395" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="10397" class="Symbol">(</a><a id="10398" href="Demos.HSP.html#6781" class="Field Operator">_‚ü®$‚ü©_</a> <a id="10404" href="Demos.HSP.html#10367" class="Bound">g</a><a id="10405" class="Symbol">)</a>
                  <a id="10425" class="Symbol">;</a> <a id="10427" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="10432" class="Symbol">=</a> <a id="10434" class="Symbol">(</a><a id="10435" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="10440" href="Demos.HSP.html#10361" class="Bound">f</a><a id="10441" class="Symbol">)</a> <a id="10443" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="10445" class="Symbol">(</a><a id="10446" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="10451" href="Demos.HSP.html#10367" class="Bound">g</a><a id="10452" class="Symbol">)</a> <a id="10454" class="Symbol">}</a>
</pre>


#### Inverses {#inverses .unnumbered}

We define the *inverse* of a setoid function in terms of the image of the function's domain, as follows.

<pre class="Agda">

<a id="10628" class="Keyword">module</a> <a id="10635" href="Demos.HSP.html#10635" class="Module">_</a> <a id="10637" class="Symbol">{</a><a id="10638" href="Demos.HSP.html#10638" class="Bound">ùë®</a> <a id="10640" class="Symbol">:</a> <a id="10642" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="10649" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="10651" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a><a id="10653" class="Symbol">}{</a><a id="10655" href="Demos.HSP.html#10655" class="Bound">ùë©</a> <a id="10657" class="Symbol">:</a> <a id="10659" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="10666" href="Demos.HSP.html#7618" class="Generalizable">Œ≤</a> <a id="10668" href="Demos.HSP.html#7620" class="Generalizable">œÅ·µá</a><a id="10670" class="Symbol">}</a> <a id="10672" class="Keyword">where</a>
 <a id="10679" class="Keyword">open</a> <a id="10684" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="10691" href="Demos.HSP.html#10655" class="Bound">ùë©</a> <a id="10693" class="Keyword">using</a> <a id="10699" class="Symbol">(</a> <a id="10701" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="10705" class="Symbol">;</a> <a id="10707" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="10711" class="Symbol">)</a> <a id="10713" class="Keyword">renaming</a> <a id="10722" class="Symbol">(</a> <a id="10724" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="10732" class="Symbol">to</a> <a id="10735" class="Field">B</a> <a id="10737" class="Symbol">)</a>

 <a id="10741" class="Keyword">data</a> <a id="10746" href="Demos.HSP.html#10746" class="Datatype Operator">Image_‚àã_</a> <a id="10755" class="Symbol">(</a><a id="10756" href="Demos.HSP.html#10756" class="Bound">f</a> <a id="10758" class="Symbol">:</a> <a id="10760" href="Demos.HSP.html#10638" class="Bound">ùë®</a> <a id="10762" href="Demos.HSP.html#6679" class="Record Operator">‚ü∂</a> <a id="10764" href="Demos.HSP.html#10655" class="Bound">ùë©</a><a id="10765" class="Symbol">)</a> <a id="10767" class="Symbol">:</a> <a id="10769" href="Demos.HSP.html#10735" class="Field">B</a> <a id="10771" class="Symbol">‚Üí</a> <a id="10773" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="10778" class="Symbol">(</a><a id="10779" href="Demos.HSP.html#10649" class="Bound">Œ±</a> <a id="10781" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="10783" href="Demos.HSP.html#10666" class="Bound">Œ≤</a> <a id="10785" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="10787" href="Demos.HSP.html#10668" class="Bound">œÅ·µá</a><a id="10789" class="Symbol">)</a> <a id="10791" class="Keyword">where</a>
  <a id="10799" href="Demos.HSP.html#10799" class="InductiveConstructor">eq</a> <a id="10802" class="Symbol">:</a> <a id="10804" class="Symbol">{</a><a id="10805" href="Demos.HSP.html#10805" class="Bound">b</a> <a id="10807" class="Symbol">:</a> <a id="10809" href="Demos.HSP.html#10735" class="Field">B</a><a id="10810" class="Symbol">}</a> <a id="10812" class="Symbol">‚Üí</a> <a id="10814" class="Symbol">‚àÄ</a> <a id="10816" href="Demos.HSP.html#10816" class="Bound">a</a> <a id="10818" class="Symbol">‚Üí</a> <a id="10820" href="Demos.HSP.html#10805" class="Bound">b</a> <a id="10822" href="Relation.Binary.Bundles.html#1098" class="Field Operator">‚âà</a> <a id="10824" href="Demos.HSP.html#10756" class="Bound">f</a> <a id="10826" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="10830" href="Demos.HSP.html#10816" class="Bound">a</a> <a id="10832" class="Symbol">‚Üí</a> <a id="10834" href="Demos.HSP.html#10746" class="Datatype Operator">Image</a> <a id="10840" href="Demos.HSP.html#10756" class="Bound">f</a> <a id="10842" href="Demos.HSP.html#10746" class="Datatype Operator">‚àã</a> <a id="10844" href="Demos.HSP.html#10805" class="Bound">b</a>

</pre>

An inhabitant of the `Image f ‚àã b` type is a point `a : Carrier ùë®`, along with a proof `p : b ‚âà f a`, that `f` maps `a` to `b`. Since a proof of `Image f ‚àã b` must include a concrete witness `a : Carrier ùë®`, we can actually *compute* a range-restricted right-inverse of `f`. Here is the definition of `Inv` which, for extra
certainty, is accompanied by a proof that it gives such a right-inverse.

<pre class="Agda">

 <a id="11272" href="Demos.HSP.html#11272" class="Function">Inv</a> <a id="11276" class="Symbol">:</a> <a id="11278" class="Symbol">(</a><a id="11279" href="Demos.HSP.html#11279" class="Bound">f</a> <a id="11281" class="Symbol">:</a> <a id="11283" href="Demos.HSP.html#10638" class="Bound">ùë®</a> <a id="11285" href="Demos.HSP.html#6679" class="Record Operator">‚ü∂</a> <a id="11287" href="Demos.HSP.html#10655" class="Bound">ùë©</a><a id="11288" class="Symbol">){</a><a id="11290" href="Demos.HSP.html#11290" class="Bound">b</a> <a id="11292" class="Symbol">:</a> <a id="11294" href="Demos.HSP.html#10735" class="Field">B</a><a id="11295" class="Symbol">}</a> <a id="11297" class="Symbol">‚Üí</a> <a id="11299" href="Demos.HSP.html#10746" class="Datatype Operator">Image</a> <a id="11305" href="Demos.HSP.html#11279" class="Bound">f</a> <a id="11307" href="Demos.HSP.html#10746" class="Datatype Operator">‚àã</a> <a id="11309" href="Demos.HSP.html#11290" class="Bound">b</a> <a id="11311" class="Symbol">‚Üí</a> <a id="11313" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="11321" href="Demos.HSP.html#10638" class="Bound">ùë®</a>
 <a id="11324" href="Demos.HSP.html#11272" class="Function">Inv</a> <a id="11328" class="Symbol">_</a> <a id="11330" class="Symbol">(</a><a id="11331" href="Demos.HSP.html#10799" class="InductiveConstructor">eq</a> <a id="11334" href="Demos.HSP.html#11334" class="Bound">a</a> <a id="11336" class="Symbol">_)</a> <a id="11339" class="Symbol">=</a> <a id="11341" href="Demos.HSP.html#11334" class="Bound">a</a>

 <a id="11345" href="Demos.HSP.html#11345" class="Function">InvIsInverse ≥</a> <a id="11359" class="Symbol">:</a> <a id="11361" class="Symbol">{</a><a id="11362" href="Demos.HSP.html#11362" class="Bound">f</a> <a id="11364" class="Symbol">:</a> <a id="11366" href="Demos.HSP.html#10638" class="Bound">ùë®</a> <a id="11368" href="Demos.HSP.html#6679" class="Record Operator">‚ü∂</a> <a id="11370" href="Demos.HSP.html#10655" class="Bound">ùë©</a><a id="11371" class="Symbol">}{</a><a id="11373" href="Demos.HSP.html#11373" class="Bound">b</a> <a id="11375" class="Symbol">:</a> <a id="11377" href="Demos.HSP.html#10735" class="Field">B</a><a id="11378" class="Symbol">}(</a><a id="11380" href="Demos.HSP.html#11380" class="Bound">q</a> <a id="11382" class="Symbol">:</a> <a id="11384" href="Demos.HSP.html#10746" class="Datatype Operator">Image</a> <a id="11390" href="Demos.HSP.html#11362" class="Bound">f</a> <a id="11392" href="Demos.HSP.html#10746" class="Datatype Operator">‚àã</a> <a id="11394" href="Demos.HSP.html#11373" class="Bound">b</a><a id="11395" class="Symbol">)</a> <a id="11397" class="Symbol">‚Üí</a> <a id="11399" href="Demos.HSP.html#11362" class="Bound">f</a> <a id="11401" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="11405" class="Symbol">(</a><a id="11406" href="Demos.HSP.html#11272" class="Function">Inv</a> <a id="11410" href="Demos.HSP.html#11362" class="Bound">f</a> <a id="11412" href="Demos.HSP.html#11380" class="Bound">q</a><a id="11413" class="Symbol">)</a> <a id="11415" href="Relation.Binary.Bundles.html#1098" class="Field Operator">‚âà</a> <a id="11417" href="Demos.HSP.html#11373" class="Bound">b</a>
 <a id="11420" href="Demos.HSP.html#11345" class="Function">InvIsInverse ≥</a> <a id="11434" class="Symbol">(</a><a id="11435" href="Demos.HSP.html#10799" class="InductiveConstructor">eq</a> <a id="11438" class="Symbol">_</a> <a id="11440" href="Demos.HSP.html#11440" class="Bound">p</a><a id="11441" class="Symbol">)</a> <a id="11443" class="Symbol">=</a> <a id="11445" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="11449" href="Demos.HSP.html#11440" class="Bound">p</a>
</pre>


#### Injective and surjective setoid functions {#injective-and-surjective-setoid-functions .unnumbered}

If `f : ùë® ‚ü∂ ùë©` then we call `f` *injective* provided `‚àÄ(a‚ÇÄ a‚ÇÅ : A)`, `f ‚ü®$‚ü© a‚ÇÄ ‚âà·¥Æ f ‚ü®$‚ü© a‚ÇÅ` implies `a‚ÇÄ ‚âà·¥¨ a‚ÇÅ`; we call `f` *surjective* provided `‚àÄ(b : B) ‚àÉ(a : A)` such that `f ‚ü®$‚ü© a ‚âà·¥Æ b`.

We represent injective functions on bare types by the type `Injective`, and use this to define the `IsInjective` type representing the property of being an injective setoid function. Similarly, the type `IsSurjective`
represents the property of being a surjective setoid function and `SurjInv` represents the *right-inverse* of a surjective function.

We reproduce the definitions and prove some of their properties inside the next submodule where we first set the stage by declaring two setoids `ùë®` and `ùë©` and naming their equality relations.

<pre class="Agda">

<a id="12322" class="Keyword">module</a> <a id="12329" href="Demos.HSP.html#12329" class="Module">_</a> <a id="12331" class="Symbol">{</a><a id="12332" href="Demos.HSP.html#12332" class="Bound">ùë®</a> <a id="12334" class="Symbol">:</a> <a id="12336" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="12343" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="12345" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a><a id="12347" class="Symbol">}{</a><a id="12349" href="Demos.HSP.html#12349" class="Bound">ùë©</a> <a id="12351" class="Symbol">:</a> <a id="12353" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="12360" href="Demos.HSP.html#7618" class="Generalizable">Œ≤</a> <a id="12362" href="Demos.HSP.html#7620" class="Generalizable">œÅ·µá</a><a id="12364" class="Symbol">}</a> <a id="12366" class="Keyword">where</a>
 <a id="12373" class="Keyword">open</a> <a id="12378" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="12385" href="Demos.HSP.html#12332" class="Bound">ùë®</a> <a id="12387" class="Keyword">using</a> <a id="12393" class="Symbol">()</a> <a id="12396" class="Keyword">renaming</a> <a id="12405" class="Symbol">(</a> <a id="12407" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="12411" class="Symbol">to</a> <a id="12414" class="Field Operator">_‚âà·¥¨_</a> <a id="12419" class="Symbol">)</a>
 <a id="12422" class="Keyword">open</a> <a id="12427" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="12434" href="Demos.HSP.html#12349" class="Bound">ùë©</a> <a id="12436" class="Keyword">using</a> <a id="12442" class="Symbol">()</a> <a id="12445" class="Keyword">renaming</a> <a id="12454" class="Symbol">(</a> <a id="12456" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="12460" class="Symbol">to</a> <a id="12463" class="Field Operator">_‚âà·¥Æ_</a> <a id="12468" class="Symbol">)</a>
 <a id="12471" class="Keyword">open</a> <a id="12476" href="Function.Definitions.html" class="Module">FD</a> <a id="12479" href="Demos.HSP.html#12414" class="Function Operator">_‚âà·¥¨_</a> <a id="12484" href="Demos.HSP.html#12463" class="Field Operator">_‚âà·¥Æ_</a>

 <a id="12491" href="Demos.HSP.html#12491" class="Function">IsInjective</a> <a id="12503" class="Symbol">:</a> <a id="12505" class="Symbol">(</a><a id="12506" href="Demos.HSP.html#12332" class="Bound">ùë®</a> <a id="12508" href="Demos.HSP.html#6679" class="Record Operator">‚ü∂</a> <a id="12510" href="Demos.HSP.html#12349" class="Bound">ùë©</a><a id="12511" class="Symbol">)</a> <a id="12513" class="Symbol">‚Üí</a>  <a id="12516" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="12521" class="Symbol">(</a><a id="12522" href="Demos.HSP.html#12343" class="Bound">Œ±</a> <a id="12524" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="12526" href="Demos.HSP.html#12345" class="Bound">œÅ·µÉ</a> <a id="12529" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="12531" href="Demos.HSP.html#12362" class="Bound">œÅ·µá</a><a id="12533" class="Symbol">)</a>
 <a id="12536" href="Demos.HSP.html#12491" class="Function">IsInjective</a> <a id="12548" href="Demos.HSP.html#12548" class="Bound">f</a> <a id="12550" class="Symbol">=</a> <a id="12552" href="Function.Definitions.html#889" class="Function">Injective</a> <a id="12562" class="Symbol">(</a><a id="12563" href="Demos.HSP.html#6781" class="Field Operator">_‚ü®$‚ü©_</a> <a id="12569" href="Demos.HSP.html#12548" class="Bound">f</a><a id="12570" class="Symbol">)</a>

 <a id="12574" href="Demos.HSP.html#12574" class="Function">IsSurjective</a> <a id="12587" class="Symbol">:</a> <a id="12589" class="Symbol">(</a><a id="12590" href="Demos.HSP.html#12332" class="Bound">ùë®</a> <a id="12592" href="Demos.HSP.html#6679" class="Record Operator">‚ü∂</a> <a id="12594" href="Demos.HSP.html#12349" class="Bound">ùë©</a><a id="12595" class="Symbol">)</a> <a id="12597" class="Symbol">‚Üí</a>  <a id="12600" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="12605" class="Symbol">(</a><a id="12606" href="Demos.HSP.html#12343" class="Bound">Œ±</a> <a id="12608" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="12610" href="Demos.HSP.html#12360" class="Bound">Œ≤</a> <a id="12612" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="12614" href="Demos.HSP.html#12362" class="Bound">œÅ·µá</a><a id="12616" class="Symbol">)</a>
 <a id="12619" href="Demos.HSP.html#12574" class="Function">IsSurjective</a> <a id="12632" href="Demos.HSP.html#12632" class="Bound">F</a> <a id="12634" class="Symbol">=</a> <a id="12636" class="Symbol">‚àÄ</a> <a id="12638" class="Symbol">{</a><a id="12639" href="Demos.HSP.html#12639" class="Bound">y</a><a id="12640" class="Symbol">}</a> <a id="12642" class="Symbol">‚Üí</a> <a id="12644" href="Demos.HSP.html#10746" class="Datatype Operator">Image</a> <a id="12650" href="Demos.HSP.html#12632" class="Bound">F</a> <a id="12652" href="Demos.HSP.html#10746" class="Datatype Operator">‚àã</a> <a id="12654" href="Demos.HSP.html#12639" class="Bound">y</a>

 <a id="12658" href="Demos.HSP.html#12658" class="Function">SurjInv</a> <a id="12666" class="Symbol">:</a> <a id="12668" class="Symbol">(</a><a id="12669" href="Demos.HSP.html#12669" class="Bound">f</a> <a id="12671" class="Symbol">:</a> <a id="12673" href="Demos.HSP.html#12332" class="Bound">ùë®</a> <a id="12675" href="Demos.HSP.html#6679" class="Record Operator">‚ü∂</a> <a id="12677" href="Demos.HSP.html#12349" class="Bound">ùë©</a><a id="12678" class="Symbol">)</a> <a id="12680" class="Symbol">‚Üí</a> <a id="12682" href="Demos.HSP.html#12574" class="Function">IsSurjective</a> <a id="12695" href="Demos.HSP.html#12669" class="Bound">f</a> <a id="12697" class="Symbol">‚Üí</a> <a id="12699" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="12707" href="Demos.HSP.html#12349" class="Bound">ùë©</a> <a id="12709" class="Symbol">‚Üí</a> <a id="12711" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="12719" href="Demos.HSP.html#12332" class="Bound">ùë®</a>
 <a id="12722" href="Demos.HSP.html#12658" class="Function">SurjInv</a> <a id="12730" href="Demos.HSP.html#12730" class="Bound">f</a> <a id="12732" href="Demos.HSP.html#12732" class="Bound">fonto</a> <a id="12738" href="Demos.HSP.html#12738" class="Bound">b</a> <a id="12740" class="Symbol">=</a> <a id="12742" href="Demos.HSP.html#11272" class="Function">Inv</a> <a id="12746" href="Demos.HSP.html#12730" class="Bound">f</a> <a id="12748" class="Symbol">(</a><a id="12749" href="Demos.HSP.html#12732" class="Bound">fonto</a> <a id="12755" class="Symbol">{</a><a id="12756" href="Demos.HSP.html#12738" class="Bound">b</a><a id="12757" class="Symbol">})</a>

</pre>

Proving that the composition of injective setoid functions is again injective is simply a matter of composing the two assumed witnesses to injectivity. Proving that surjectivity is preserved under composition is only slightly more involved.

<pre class="Agda">

<a id="13029" class="Keyword">module</a> <a id="13036" href="Demos.HSP.html#13036" class="Module">_</a>  <a id="13039" class="Symbol">{</a><a id="13040" href="Demos.HSP.html#13040" class="Bound">ùë®</a> <a id="13042" class="Symbol">:</a> <a id="13044" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="13051" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="13053" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a><a id="13055" class="Symbol">}{</a><a id="13057" href="Demos.HSP.html#13057" class="Bound">ùë©</a> <a id="13059" class="Symbol">:</a> <a id="13061" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="13068" href="Demos.HSP.html#7618" class="Generalizable">Œ≤</a> <a id="13070" href="Demos.HSP.html#7620" class="Generalizable">œÅ·µá</a><a id="13072" class="Symbol">}{</a><a id="13074" href="Demos.HSP.html#13074" class="Bound">ùë™</a> <a id="13076" class="Symbol">:</a> <a id="13078" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="13085" href="Demos.HSP.html#7623" class="Generalizable">Œ≥</a> <a id="13087" href="Demos.HSP.html#7625" class="Generalizable">œÅ·∂ú</a><a id="13089" class="Symbol">}</a>
          <a id="13101" class="Symbol">(</a><a id="13102" href="Demos.HSP.html#13102" class="Bound">f</a> <a id="13104" class="Symbol">:</a> <a id="13106" href="Demos.HSP.html#13040" class="Bound">ùë®</a> <a id="13108" href="Demos.HSP.html#6679" class="Record Operator">‚ü∂</a> <a id="13110" href="Demos.HSP.html#13057" class="Bound">ùë©</a><a id="13111" class="Symbol">)(</a><a id="13113" href="Demos.HSP.html#13113" class="Bound">g</a> <a id="13115" class="Symbol">:</a> <a id="13117" href="Demos.HSP.html#13057" class="Bound">ùë©</a> <a id="13119" href="Demos.HSP.html#6679" class="Record Operator">‚ü∂</a> <a id="13121" href="Demos.HSP.html#13074" class="Bound">ùë™</a><a id="13122" class="Symbol">)</a> <a id="13124" class="Keyword">where</a>

 <a id="13132" href="Demos.HSP.html#13132" class="Function">‚àò-IsInjective</a> <a id="13146" class="Symbol">:</a> <a id="13148" href="Demos.HSP.html#12491" class="Function">IsInjective</a> <a id="13160" href="Demos.HSP.html#13102" class="Bound">f</a> <a id="13162" class="Symbol">‚Üí</a> <a id="13164" href="Demos.HSP.html#12491" class="Function">IsInjective</a> <a id="13176" href="Demos.HSP.html#13113" class="Bound">g</a> <a id="13178" class="Symbol">‚Üí</a> <a id="13180" href="Demos.HSP.html#12491" class="Function">IsInjective</a> <a id="13192" class="Symbol">(</a><a id="13193" href="Demos.HSP.html#13113" class="Bound">g</a> <a id="13195" href="Demos.HSP.html#10262" class="Function Operator">‚ü®‚àò‚ü©</a> <a id="13199" href="Demos.HSP.html#13102" class="Bound">f</a><a id="13200" class="Symbol">)</a>
 <a id="13203" href="Demos.HSP.html#13132" class="Function">‚àò-IsInjective</a> <a id="13217" href="Demos.HSP.html#13217" class="Bound">finj</a> <a id="13222" href="Demos.HSP.html#13222" class="Bound">ginj</a> <a id="13227" class="Symbol">=</a> <a id="13229" href="Demos.HSP.html#13217" class="Bound">finj</a> <a id="13234" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="13236" href="Demos.HSP.html#13222" class="Bound">ginj</a>

 <a id="13243" href="Demos.HSP.html#13243" class="Function">‚àò-IsSurjective</a> <a id="13258" class="Symbol">:</a> <a id="13260" href="Demos.HSP.html#12574" class="Function">IsSurjective</a> <a id="13273" href="Demos.HSP.html#13102" class="Bound">f</a> <a id="13275" class="Symbol">‚Üí</a> <a id="13277" href="Demos.HSP.html#12574" class="Function">IsSurjective</a> <a id="13290" href="Demos.HSP.html#13113" class="Bound">g</a> <a id="13292" class="Symbol">‚Üí</a> <a id="13294" href="Demos.HSP.html#12574" class="Function">IsSurjective</a> <a id="13307" class="Symbol">(</a><a id="13308" href="Demos.HSP.html#13113" class="Bound">g</a> <a id="13310" href="Demos.HSP.html#10262" class="Function Operator">‚ü®‚àò‚ü©</a> <a id="13314" href="Demos.HSP.html#13102" class="Bound">f</a><a id="13315" class="Symbol">)</a>
 <a id="13318" href="Demos.HSP.html#13243" class="Function">‚àò-IsSurjective</a> <a id="13333" href="Demos.HSP.html#13333" class="Bound">fonto</a> <a id="13339" href="Demos.HSP.html#13339" class="Bound">gonto</a> <a id="13345" class="Symbol">{</a><a id="13346" href="Demos.HSP.html#13346" class="Bound">y</a><a id="13347" class="Symbol">}</a> <a id="13349" class="Symbol">=</a> <a id="13351" href="Demos.HSP.html#13548" class="Function">Goal</a> <a id="13356" class="Keyword">where</a>
  <a id="13364" href="Demos.HSP.html#13364" class="Function">mp</a> <a id="13367" class="Symbol">:</a> <a id="13369" href="Demos.HSP.html#10746" class="Datatype Operator">Image</a> <a id="13375" href="Demos.HSP.html#13113" class="Bound">g</a> <a id="13377" href="Demos.HSP.html#10746" class="Datatype Operator">‚àã</a> <a id="13379" href="Demos.HSP.html#13346" class="Bound">y</a> <a id="13381" class="Symbol">‚Üí</a> <a id="13383" href="Demos.HSP.html#10746" class="Datatype Operator">Image</a> <a id="13389" href="Demos.HSP.html#13113" class="Bound">g</a> <a id="13391" href="Demos.HSP.html#10262" class="Function Operator">‚ü®‚àò‚ü©</a> <a id="13395" href="Demos.HSP.html#13102" class="Bound">f</a> <a id="13397" href="Demos.HSP.html#10746" class="Datatype Operator">‚àã</a> <a id="13399" href="Demos.HSP.html#13346" class="Bound">y</a>
  <a id="13403" href="Demos.HSP.html#13364" class="Function">mp</a> <a id="13406" class="Symbol">(</a><a id="13407" href="Demos.HSP.html#10799" class="InductiveConstructor">eq</a> <a id="13410" href="Demos.HSP.html#13410" class="Bound">c</a> <a id="13412" href="Demos.HSP.html#13412" class="Bound">p</a><a id="13413" class="Symbol">)</a> <a id="13415" class="Symbol">=</a> <a id="13417" href="Demos.HSP.html#13467" class="Function">Œ∑</a> <a id="13419" href="Demos.HSP.html#13333" class="Bound">fonto</a> <a id="13425" class="Keyword">where</a>
   <a id="13434" class="Keyword">open</a> <a id="13439" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="13446" href="Demos.HSP.html#13074" class="Bound">ùë™</a> <a id="13448" class="Keyword">using</a> <a id="13454" class="Symbol">(</a> <a id="13456" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="13462" class="Symbol">)</a>
   <a id="13467" href="Demos.HSP.html#13467" class="Function">Œ∑</a> <a id="13469" class="Symbol">:</a> <a id="13471" href="Demos.HSP.html#10746" class="Datatype Operator">Image</a> <a id="13477" href="Demos.HSP.html#13102" class="Bound">f</a> <a id="13479" href="Demos.HSP.html#10746" class="Datatype Operator">‚àã</a> <a id="13481" href="Demos.HSP.html#13410" class="Bound">c</a> <a id="13483" class="Symbol">‚Üí</a> <a id="13485" href="Demos.HSP.html#10746" class="Datatype Operator">Image</a> <a id="13491" href="Demos.HSP.html#13113" class="Bound">g</a> <a id="13493" href="Demos.HSP.html#10262" class="Function Operator">‚ü®‚àò‚ü©</a> <a id="13497" href="Demos.HSP.html#13102" class="Bound">f</a> <a id="13499" href="Demos.HSP.html#10746" class="Datatype Operator">‚àã</a> <a id="13501" href="Demos.HSP.html#13346" class="Bound">y</a>
   <a id="13506" href="Demos.HSP.html#13467" class="Function">Œ∑</a> <a id="13508" class="Symbol">(</a><a id="13509" href="Demos.HSP.html#10799" class="InductiveConstructor">eq</a> <a id="13512" href="Demos.HSP.html#13512" class="Bound">a</a> <a id="13514" href="Demos.HSP.html#13514" class="Bound">q</a><a id="13515" class="Symbol">)</a> <a id="13517" class="Symbol">=</a> <a id="13519" href="Demos.HSP.html#10799" class="InductiveConstructor">eq</a> <a id="13522" href="Demos.HSP.html#13512" class="Bound">a</a> <a id="13524" class="Symbol">(</a><a id="13525" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="13531" href="Demos.HSP.html#13412" class="Bound">p</a> <a id="13533" class="Symbol">(</a><a id="13534" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="13539" href="Demos.HSP.html#13113" class="Bound">g</a> <a id="13541" href="Demos.HSP.html#13514" class="Bound">q</a><a id="13542" class="Symbol">))</a>

  <a id="13548" href="Demos.HSP.html#13548" class="Function">Goal</a> <a id="13553" class="Symbol">:</a> <a id="13555" href="Demos.HSP.html#10746" class="Datatype Operator">Image</a> <a id="13561" href="Demos.HSP.html#13113" class="Bound">g</a> <a id="13563" href="Demos.HSP.html#10262" class="Function Operator">‚ü®‚àò‚ü©</a> <a id="13567" href="Demos.HSP.html#13102" class="Bound">f</a> <a id="13569" href="Demos.HSP.html#10746" class="Datatype Operator">‚àã</a> <a id="13571" href="Demos.HSP.html#13346" class="Bound">y</a>
  <a id="13575" href="Demos.HSP.html#13548" class="Function">Goal</a> <a id="13580" class="Symbol">=</a> <a id="13582" href="Demos.HSP.html#13364" class="Function">mp</a> <a id="13585" href="Demos.HSP.html#13339" class="Bound">gonto</a>
</pre>



#### Factorization of setoid functions[^6] {#factorization-of-setoid-functions .unnumbered}

Every (setoid) function `f : A ‚ü∂ B` factors as a surjective map `toIm : A ‚ü∂ Im f` followed
by an injective map `fromIm : Im f ‚ü∂ B`.

<pre class="Agda">

<a id="13845" class="Keyword">module</a> <a id="13852" href="Demos.HSP.html#13852" class="Module">_</a> <a id="13854" class="Symbol">{</a><a id="13855" href="Demos.HSP.html#13855" class="Bound">ùë®</a> <a id="13857" class="Symbol">:</a> <a id="13859" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="13866" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="13868" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a><a id="13870" class="Symbol">}{</a><a id="13872" href="Demos.HSP.html#13872" class="Bound">ùë©</a> <a id="13874" class="Symbol">:</a> <a id="13876" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="13883" href="Demos.HSP.html#7618" class="Generalizable">Œ≤</a> <a id="13885" href="Demos.HSP.html#7620" class="Generalizable">œÅ·µá</a><a id="13887" class="Symbol">}</a> <a id="13889" class="Keyword">where</a>

 <a id="13897" href="Demos.HSP.html#13897" class="Function">Im</a> <a id="13900" class="Symbol">:</a> <a id="13902" class="Symbol">(</a><a id="13903" href="Demos.HSP.html#13903" class="Bound">f</a> <a id="13905" class="Symbol">:</a> <a id="13907" href="Demos.HSP.html#13855" class="Bound">ùë®</a> <a id="13909" href="Demos.HSP.html#6679" class="Record Operator">‚ü∂</a> <a id="13911" href="Demos.HSP.html#13872" class="Bound">ùë©</a><a id="13912" class="Symbol">)</a> <a id="13914" class="Symbol">‚Üí</a> <a id="13916" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="13923" class="Symbol">_</a> <a id="13925" class="Symbol">_</a>
 <a id="13928" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="13936" class="Symbol">(</a><a id="13937" href="Demos.HSP.html#13897" class="Function">Im</a> <a id="13940" href="Demos.HSP.html#13940" class="Bound">f</a><a id="13941" class="Symbol">)</a> <a id="13943" class="Symbol">=</a> <a id="13945" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="13953" href="Demos.HSP.html#13855" class="Bound">ùë®</a>
 <a id="13956" href="Demos.HSP.html#7287" class="Field Operator">_‚âàÀ¢_</a> <a id="13961" class="Symbol">(</a><a id="13962" href="Demos.HSP.html#13897" class="Function">Im</a> <a id="13965" href="Demos.HSP.html#13965" class="Bound">f</a><a id="13966" class="Symbol">)</a> <a id="13968" href="Demos.HSP.html#13968" class="Bound">b1</a> <a id="13971" href="Demos.HSP.html#13971" class="Bound">b2</a> <a id="13974" class="Symbol">=</a> <a id="13976" href="Demos.HSP.html#13965" class="Bound">f</a> <a id="13978" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="13982" href="Demos.HSP.html#13968" class="Bound">b1</a> <a id="13985" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a> <a id="13987" href="Demos.HSP.html#13965" class="Bound">f</a> <a id="13989" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="13993" href="Demos.HSP.html#13971" class="Bound">b2</a> <a id="13996" class="Keyword">where</a> <a id="14002" class="Keyword">open</a> <a id="14007" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="14014" href="Demos.HSP.html#13872" class="Bound">ùë©</a>

 <a id="14018" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="14032" class="Symbol">(</a><a id="14033" href="Demos.HSP.html#13897" class="Function">Im</a> <a id="14036" href="Demos.HSP.html#14036" class="Bound">f</a><a id="14037" class="Symbol">)</a> <a id="14039" class="Symbol">=</a> <a id="14041" class="Keyword">record</a> <a id="14048" class="Symbol">{</a> <a id="14050" href="Relation.Binary.Structures.html#1568" class="Field">refl</a> <a id="14055" class="Symbol">=</a> <a id="14057" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="14062" class="Symbol">;</a> <a id="14064" href="Relation.Binary.Structures.html#1594" class="Field">sym</a> <a id="14068" class="Symbol">=</a> <a id="14070" href="Relation.Binary.Structures.html#1594" class="Function">sym</a><a id="14073" class="Symbol">;</a> <a id="14075" href="Relation.Binary.Structures.html#1620" class="Field">trans</a> <a id="14081" class="Symbol">=</a> <a id="14083" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="14089" class="Symbol">}</a>
  <a id="14093" class="Keyword">where</a> <a id="14099" class="Keyword">open</a> <a id="14104" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="14111" href="Demos.HSP.html#13872" class="Bound">ùë©</a>

 <a id="14115" href="Demos.HSP.html#14115" class="Function">toIm</a> <a id="14120" class="Symbol">:</a> <a id="14122" class="Symbol">(</a><a id="14123" href="Demos.HSP.html#14123" class="Bound">f</a> <a id="14125" class="Symbol">:</a> <a id="14127" href="Demos.HSP.html#13855" class="Bound">ùë®</a> <a id="14129" href="Demos.HSP.html#6679" class="Record Operator">‚ü∂</a> <a id="14131" href="Demos.HSP.html#13872" class="Bound">ùë©</a><a id="14132" class="Symbol">)</a> <a id="14134" class="Symbol">‚Üí</a> <a id="14136" href="Demos.HSP.html#13855" class="Bound">ùë®</a> <a id="14138" href="Demos.HSP.html#6679" class="Record Operator">‚ü∂</a> <a id="14140" href="Demos.HSP.html#13897" class="Function">Im</a> <a id="14143" href="Demos.HSP.html#14123" class="Bound">f</a>
 <a id="14146" href="Demos.HSP.html#14115" class="Function">toIm</a> <a id="14151" href="Demos.HSP.html#14151" class="Bound">f</a> <a id="14153" class="Symbol">=</a> <a id="14155" class="Keyword">record</a> <a id="14162" class="Symbol">{</a> <a id="14164" href="Function.Bundles.html#1919" class="Field">f</a> <a id="14166" class="Symbol">=</a> <a id="14168" href="Function.Base.html#615" class="Function">id</a> <a id="14171" class="Symbol">;</a> <a id="14173" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="14178" class="Symbol">=</a> <a id="14180" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="14185" href="Demos.HSP.html#14151" class="Bound">f</a> <a id="14187" class="Symbol">}</a>

 <a id="14191" href="Demos.HSP.html#14191" class="Function">fromIm</a> <a id="14198" class="Symbol">:</a> <a id="14200" class="Symbol">(</a><a id="14201" href="Demos.HSP.html#14201" class="Bound">f</a> <a id="14203" class="Symbol">:</a> <a id="14205" href="Demos.HSP.html#13855" class="Bound">ùë®</a> <a id="14207" href="Demos.HSP.html#6679" class="Record Operator">‚ü∂</a> <a id="14209" href="Demos.HSP.html#13872" class="Bound">ùë©</a><a id="14210" class="Symbol">)</a> <a id="14212" class="Symbol">‚Üí</a> <a id="14214" href="Demos.HSP.html#13897" class="Function">Im</a> <a id="14217" href="Demos.HSP.html#14201" class="Bound">f</a> <a id="14219" href="Demos.HSP.html#6679" class="Record Operator">‚ü∂</a> <a id="14221" href="Demos.HSP.html#13872" class="Bound">ùë©</a>
 <a id="14224" href="Demos.HSP.html#14191" class="Function">fromIm</a> <a id="14231" href="Demos.HSP.html#14231" class="Bound">f</a> <a id="14233" class="Symbol">=</a> <a id="14235" class="Keyword">record</a> <a id="14242" class="Symbol">{</a> <a id="14244" href="Function.Bundles.html#1919" class="Field">f</a> <a id="14246" class="Symbol">=</a> <a id="14248" class="Symbol">Œª</a> <a id="14250" href="Demos.HSP.html#14250" class="Bound">x</a> <a id="14252" class="Symbol">‚Üí</a> <a id="14254" href="Demos.HSP.html#14231" class="Bound">f</a> <a id="14256" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="14260" href="Demos.HSP.html#14250" class="Bound">x</a> <a id="14262" class="Symbol">;</a> <a id="14264" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="14269" class="Symbol">=</a> <a id="14271" href="Function.Base.html#615" class="Function">id</a> <a id="14274" class="Symbol">}</a>

 <a id="14278" href="Demos.HSP.html#14278" class="Function">fromIm-inj</a> <a id="14289" class="Symbol">:</a> <a id="14291" class="Symbol">(</a><a id="14292" href="Demos.HSP.html#14292" class="Bound">f</a> <a id="14294" class="Symbol">:</a> <a id="14296" href="Demos.HSP.html#13855" class="Bound">ùë®</a> <a id="14298" href="Demos.HSP.html#6679" class="Record Operator">‚ü∂</a> <a id="14300" href="Demos.HSP.html#13872" class="Bound">ùë©</a><a id="14301" class="Symbol">)</a> <a id="14303" class="Symbol">‚Üí</a> <a id="14305" href="Demos.HSP.html#12491" class="Function">IsInjective</a> <a id="14317" class="Symbol">(</a><a id="14318" href="Demos.HSP.html#14191" class="Function">fromIm</a> <a id="14325" href="Demos.HSP.html#14292" class="Bound">f</a><a id="14326" class="Symbol">)</a>
 <a id="14329" href="Demos.HSP.html#14278" class="Function">fromIm-inj</a> <a id="14340" class="Symbol">_</a> <a id="14342" class="Symbol">=</a> <a id="14344" href="Function.Base.html#615" class="Function">id</a>

 <a id="14349" href="Demos.HSP.html#14349" class="Function">toIm-surj</a> <a id="14359" class="Symbol">:</a> <a id="14361" class="Symbol">(</a><a id="14362" href="Demos.HSP.html#14362" class="Bound">f</a> <a id="14364" class="Symbol">:</a> <a id="14366" href="Demos.HSP.html#13855" class="Bound">ùë®</a> <a id="14368" href="Demos.HSP.html#6679" class="Record Operator">‚ü∂</a> <a id="14370" href="Demos.HSP.html#13872" class="Bound">ùë©</a><a id="14371" class="Symbol">)</a> <a id="14373" class="Symbol">‚Üí</a> <a id="14375" href="Demos.HSP.html#12574" class="Function">IsSurjective</a> <a id="14388" class="Symbol">(</a><a id="14389" href="Demos.HSP.html#14115" class="Function">toIm</a> <a id="14394" href="Demos.HSP.html#14362" class="Bound">f</a><a id="14395" class="Symbol">)</a>
 <a id="14398" href="Demos.HSP.html#14349" class="Function">toIm-surj</a> <a id="14408" class="Symbol">_</a> <a id="14410" class="Symbol">=</a> <a id="14412" href="Demos.HSP.html#10799" class="InductiveConstructor">eq</a> <a id="14415" class="Symbol">_</a> <a id="14417" class="Symbol">(</a><a id="14418" href="Demos.HSP.html#7107" class="Function">reflÀ¢</a> <a id="14424" href="Demos.HSP.html#13872" class="Bound">ùë©</a><a id="14425" class="Symbol">)</a>
</pre>

Basic Universal Algebra
=======================

We now develop a working vocabulary in [MLTT][] corresponding to classical, single-sorted, set-based universal algebra. We cover a number of important concepts, but limit ourselves to those required to prove Birkhoff's HSP theorem. In each case, we give a type-theoretic version of the informal definition, followed by its implementation in [Agda][].

This section is organized into the following subsections:
¬ß[3.1](#signatures){reference-type="ref" reference="signatures"} defines
a general type of *signatures* of algebraic structures;
¬ß[3.2](#algebras){reference-type="ref" reference="algebras"} does the
same for structures and their products;
¬ß[3.3](#homomorphisms){reference-type="ref" reference="homomorphisms"}
defines *homomorphisms*, *monomorphisms*, and *epimorphisms*, presents
types that codify these concepts, and formally verifies some of their
basic properties; ¬ß[3.5](#subalgebras){reference-type="ref"
reference="subalgebras"}--[3.6](#terms){reference-type="ref"
reference="terms"} do the same for *subalgebras* and *terms*,
respectively.

Signatures
----------

An (algebraic) *signature* is a pair `ùëÜ = (F, œÅ)` where `F` is a collection of *operation symbols* and `œÅ : F ‚Üí N` is an *arity function* which maps each operation symbol to its arity. Here, `N` denotes the *arity type*. Heuristically, the arity of an operation symbol may be thought of as the number of arguments that takes as
"input."  We represent signatures as inhabitants of the following dependent pair type.

```agda
Signature : (ùí™ ùí± : Level) ‚Üí Type (lsuc (ùí™ ‚äî ùí±))
Signature ùí™ ùí± = Œ£[ F ‚àà Type ùí™ ] (F ‚Üí Type ùí±)
```

Recalling our syntax for the first and second projections, if `ùëÜ` is a signature, then `‚à£ ùëÜ ‚à£` denotes the set of operation symbols and `‚à• ùëÜ ‚à•` denotes the arity function. Thus, if `f : ‚à£ ùëÜ ‚à£` is an operation symbol in the signature `ùëÜ`, then `‚à• ùëÜ ‚à• f` is the arity of `f`.

We need to augment our `Signature` type so that it supports algebras over setoid domains. To do so, following Abel¬†[@Abel:2021], we define an operator that translates an ordinary signature into a *setoid signature*, that is, a signature over a setoid domain. This raises a minor technical issue: given operations `f` and `g`, with arguments `u : ‚à• ùëÜ ‚à• f ‚Üí A` and `v : ‚à• ùëÜ ‚à• g ‚Üí A`, respectively, and a proof of `f ‚â° g` (*intensional* equality), we ought to be able to check whether `u` and `v` are *pointwise* equal. Technically, `u` and `v` appear to inhabit different types; of course, this is reconciled by the hypothesis `f ‚â° g`, as we see in the next definition (borrowed from¬†[@Abel:2021]).

<pre class="Agda">

<a id="EqArgs"></a><a id="17079" href="Demos.HSP.html#17079" class="Function">EqArgs</a> <a id="17086" class="Symbol">:</a>  <a id="17089" class="Symbol">{</a><a id="17090" href="Demos.HSP.html#17090" class="Bound">ùëÜ</a> <a id="17092" class="Symbol">:</a> <a id="17094" href="Base.Algebras.Basic.html#3890" class="Function">Signature</a> <a id="17104" href="Demos.HSP.html#5497" class="Bound">ùìû</a> <a id="17106" href="Demos.HSP.html#5499" class="Bound">ùì•</a><a id="17107" class="Symbol">}{</a><a id="17109" href="Demos.HSP.html#17109" class="Bound">Œæ</a> <a id="17111" class="Symbol">:</a> <a id="17113" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="17120" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="17122" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a><a id="17124" class="Symbol">}</a>
 <a id="17127" class="Symbol">‚Üí</a>        <a id="17136" class="Symbol">‚àÄ</a> <a id="17138" class="Symbol">{</a><a id="17139" href="Demos.HSP.html#17139" class="Bound">f</a> <a id="17141" href="Demos.HSP.html#17141" class="Bound">g</a><a id="17142" class="Symbol">}</a> <a id="17144" class="Symbol">‚Üí</a> <a id="17146" href="Demos.HSP.html#17139" class="Bound">f</a> <a id="17148" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">‚â°</a> <a id="17150" href="Demos.HSP.html#17141" class="Bound">g</a> <a id="17152" class="Symbol">‚Üí</a> <a id="17154" class="Symbol">(</a><a id="17155" href="Demos.HSP.html#8301" class="Function Operator">‚à•</a> <a id="17157" href="Demos.HSP.html#17090" class="Bound">ùëÜ</a> <a id="17159" href="Demos.HSP.html#8301" class="Function Operator">‚à•</a> <a id="17161" href="Demos.HSP.html#17139" class="Bound">f</a> <a id="17163" class="Symbol">‚Üí</a> <a id="17165" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="17173" href="Demos.HSP.html#17109" class="Bound">Œæ</a><a id="17174" class="Symbol">)</a> <a id="17176" class="Symbol">‚Üí</a> <a id="17178" class="Symbol">(</a><a id="17179" href="Demos.HSP.html#8301" class="Function Operator">‚à•</a> <a id="17181" href="Demos.HSP.html#17090" class="Bound">ùëÜ</a> <a id="17183" href="Demos.HSP.html#8301" class="Function Operator">‚à•</a> <a id="17185" href="Demos.HSP.html#17141" class="Bound">g</a> <a id="17187" class="Symbol">‚Üí</a> <a id="17189" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="17197" href="Demos.HSP.html#17109" class="Bound">Œæ</a><a id="17198" class="Symbol">)</a> <a id="17200" class="Symbol">‚Üí</a> <a id="17202" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="17207" class="Symbol">(</a><a id="17208" href="Demos.HSP.html#5499" class="Bound">ùì•</a> <a id="17210" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="17212" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a><a id="17214" class="Symbol">)</a>
<a id="17216" href="Demos.HSP.html#17079" class="Function">EqArgs</a> <a id="17223" class="Symbol">{</a><a id="17224" class="Argument">Œæ</a> <a id="17226" class="Symbol">=</a> <a id="17228" href="Demos.HSP.html#17228" class="Bound">Œæ</a><a id="17229" class="Symbol">}</a> <a id="17231" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="17238" href="Demos.HSP.html#17238" class="Bound">u</a> <a id="17240" href="Demos.HSP.html#17240" class="Bound">v</a> <a id="17242" class="Symbol">=</a> <a id="17244" class="Symbol">‚àÄ</a> <a id="17246" href="Demos.HSP.html#17246" class="Bound">i</a> <a id="17248" class="Symbol">‚Üí</a> <a id="17250" href="Demos.HSP.html#17238" class="Bound">u</a> <a id="17252" href="Demos.HSP.html#17246" class="Bound">i</a> <a id="17254" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a> <a id="17256" href="Demos.HSP.html#17240" class="Bound">v</a> <a id="17258" href="Demos.HSP.html#17246" class="Bound">i</a> <a id="17260" class="Keyword">where</a> <a id="17266" class="Keyword">open</a> <a id="17271" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="17278" href="Demos.HSP.html#17228" class="Bound">Œæ</a> <a id="17280" class="Keyword">using</a> <a id="17286" class="Symbol">(</a> <a id="17288" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="17292" class="Symbol">)</a>

</pre>

This makes it possible to define an operator which translates a signature for algebras over bare types into a signature for algebras over setoids. We denote this operator by `‚ü®_‚ü©` and define it as follows.

<pre class="Agda">

<a id="‚ü®_‚ü©"></a><a id="17528" href="Demos.HSP.html#17528" class="Function Operator">‚ü®_‚ü©</a> <a id="17532" class="Symbol">:</a> <a id="17534" href="Base.Algebras.Basic.html#3890" class="Function">Signature</a> <a id="17544" href="Demos.HSP.html#5497" class="Bound">ùìû</a> <a id="17546" href="Demos.HSP.html#5499" class="Bound">ùì•</a> <a id="17548" class="Symbol">‚Üí</a> <a id="17550" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="17557" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="17559" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a> <a id="17562" class="Symbol">‚Üí</a> <a id="17564" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="17571" class="Symbol">_</a> <a id="17573" class="Symbol">_</a>

<a id="17576" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a>  <a id="17585" class="Symbol">(</a><a id="17586" href="Demos.HSP.html#17528" class="Function Operator">‚ü®</a> <a id="17588" href="Demos.HSP.html#17588" class="Bound">ùëÜ</a> <a id="17590" href="Demos.HSP.html#17528" class="Function Operator">‚ü©</a> <a id="17592" href="Demos.HSP.html#17592" class="Bound">Œæ</a><a id="17593" class="Symbol">)</a>                <a id="17610" class="Symbol">=</a> <a id="17612" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="17615" href="Demos.HSP.html#17615" class="Bound">f</a> <a id="17617" href="Data.Product.html#916" class="Function">‚àà</a> <a id="17619" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="17621" href="Demos.HSP.html#17588" class="Bound">ùëÜ</a> <a id="17623" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="17625" href="Data.Product.html#916" class="Function">]</a> <a id="17627" class="Symbol">(</a><a id="17628" href="Demos.HSP.html#8301" class="Function Operator">‚à•</a> <a id="17630" href="Demos.HSP.html#17588" class="Bound">ùëÜ</a> <a id="17632" href="Demos.HSP.html#8301" class="Function Operator">‚à•</a> <a id="17634" href="Demos.HSP.html#17615" class="Bound">f</a> <a id="17636" class="Symbol">‚Üí</a> <a id="17638" href="Demos.HSP.html#17592" class="Bound">Œæ</a> <a id="17640" class="Symbol">.</a><a id="17641" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a><a id="17648" class="Symbol">)</a>
<a id="17650" href="Demos.HSP.html#7287" class="Field Operator">_‚âàÀ¢_</a>     <a id="17659" class="Symbol">(</a><a id="17660" href="Demos.HSP.html#17528" class="Function Operator">‚ü®</a> <a id="17662" href="Demos.HSP.html#17662" class="Bound">ùëÜ</a> <a id="17664" href="Demos.HSP.html#17528" class="Function Operator">‚ü©</a> <a id="17666" href="Demos.HSP.html#17666" class="Bound">Œæ</a><a id="17667" class="Symbol">)(</a><a id="17669" href="Demos.HSP.html#17669" class="Bound">f</a> <a id="17671" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="17673" href="Demos.HSP.html#17673" class="Bound">u</a><a id="17674" class="Symbol">)(</a><a id="17676" href="Demos.HSP.html#17676" class="Bound">g</a> <a id="17678" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="17680" href="Demos.HSP.html#17680" class="Bound">v</a><a id="17681" class="Symbol">)</a>  <a id="17684" class="Symbol">=</a> <a id="17686" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="17689" href="Demos.HSP.html#17689" class="Bound">eqv</a> <a id="17693" href="Data.Product.html#916" class="Function">‚àà</a> <a id="17695" href="Demos.HSP.html#17669" class="Bound">f</a> <a id="17697" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">‚â°</a> <a id="17699" href="Demos.HSP.html#17676" class="Bound">g</a> <a id="17701" href="Data.Product.html#916" class="Function">]</a> <a id="17703" href="Demos.HSP.html#17079" class="Function">EqArgs</a><a id="17709" class="Symbol">{</a><a id="17710" class="Argument">Œæ</a> <a id="17712" class="Symbol">=</a> <a id="17714" href="Demos.HSP.html#17666" class="Bound">Œæ</a><a id="17715" class="Symbol">}</a> <a id="17717" href="Demos.HSP.html#17689" class="Bound">eqv</a> <a id="17721" href="Demos.HSP.html#17673" class="Bound">u</a> <a id="17723" href="Demos.HSP.html#17680" class="Bound">v</a>

<a id="17726" href="Demos.HSP.html#6883" class="Field">refl·µâ</a>   <a id="17734" class="Symbol">(</a><a id="17735" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="17749" class="Symbol">(</a><a id="17750" href="Demos.HSP.html#17528" class="Function Operator">‚ü®</a> <a id="17752" href="Demos.HSP.html#17752" class="Bound">ùëÜ</a> <a id="17754" href="Demos.HSP.html#17528" class="Function Operator">‚ü©</a> <a id="17756" href="Demos.HSP.html#17756" class="Bound">Œæ</a><a id="17757" class="Symbol">))</a>                           <a id="17786" class="Symbol">=</a> <a id="17788" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="17795" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="17797" class="Symbol">Œª</a> <a id="17799" href="Demos.HSP.html#17799" class="Bound">i</a> <a id="17801" class="Symbol">‚Üí</a> <a id="17803" href="Demos.HSP.html#7107" class="Function">reflÀ¢</a>   <a id="17811" href="Demos.HSP.html#17756" class="Bound">Œæ</a>
<a id="17813" href="Demos.HSP.html#6944" class="Field">sym·µâ</a>    <a id="17821" class="Symbol">(</a><a id="17822" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="17836" class="Symbol">(</a><a id="17837" href="Demos.HSP.html#17528" class="Function Operator">‚ü®</a> <a id="17839" href="Demos.HSP.html#17839" class="Bound">ùëÜ</a> <a id="17841" href="Demos.HSP.html#17528" class="Function Operator">‚ü©</a> <a id="17843" href="Demos.HSP.html#17843" class="Bound">Œæ</a><a id="17844" class="Symbol">))</a> <a id="17847" class="Symbol">(</a><a id="17848" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="17855" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="17857" href="Demos.HSP.html#17857" class="Bound">g</a><a id="17858" class="Symbol">)</a>              <a id="17873" class="Symbol">=</a> <a id="17875" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="17882" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="17884" class="Symbol">Œª</a> <a id="17886" href="Demos.HSP.html#17886" class="Bound">i</a> <a id="17888" class="Symbol">‚Üí</a> <a id="17890" href="Demos.HSP.html#7168" class="Function">symÀ¢</a>    <a id="17898" href="Demos.HSP.html#17843" class="Bound">Œæ</a> <a id="17900" class="Symbol">(</a><a id="17901" href="Demos.HSP.html#17857" class="Bound">g</a> <a id="17903" href="Demos.HSP.html#17886" class="Bound">i</a><a id="17904" class="Symbol">)</a>
<a id="17906" href="Demos.HSP.html#7005" class="Field">trans·µâ</a>  <a id="17914" class="Symbol">(</a><a id="17915" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="17929" class="Symbol">(</a><a id="17930" href="Demos.HSP.html#17528" class="Function Operator">‚ü®</a> <a id="17932" href="Demos.HSP.html#17932" class="Bound">ùëÜ</a> <a id="17934" href="Demos.HSP.html#17528" class="Function Operator">‚ü©</a> <a id="17936" href="Demos.HSP.html#17936" class="Bound">Œæ</a><a id="17937" class="Symbol">))</a> <a id="17940" class="Symbol">(</a><a id="17941" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="17948" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="17950" href="Demos.HSP.html#17950" class="Bound">g</a><a id="17951" class="Symbol">)(</a><a id="17953" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="17960" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="17962" href="Demos.HSP.html#17962" class="Bound">h</a><a id="17963" class="Symbol">)</a>  <a id="17966" class="Symbol">=</a> <a id="17968" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="17975" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="17977" class="Symbol">Œª</a> <a id="17979" href="Demos.HSP.html#17979" class="Bound">i</a> <a id="17981" class="Symbol">‚Üí</a> <a id="17983" href="Demos.HSP.html#7229" class="Function">transÀ¢</a>  <a id="17991" href="Demos.HSP.html#17936" class="Bound">Œæ</a> <a id="17993" class="Symbol">(</a><a id="17994" href="Demos.HSP.html#17950" class="Bound">g</a> <a id="17996" href="Demos.HSP.html#17979" class="Bound">i</a><a id="17997" class="Symbol">)</a> <a id="17999" class="Symbol">(</a><a id="18000" href="Demos.HSP.html#17962" class="Bound">h</a> <a id="18002" href="Demos.HSP.html#17979" class="Bound">i</a><a id="18003" class="Symbol">)</a>
</pre>


Algebras
--------

An *algebraic structure* `ùë® = (A, F·¥¨)` *in the signature* `ùëÜ = (F, œÅ)`, or `ùëÜ`-*algebra*, consists of
*  a type `A`, called the *domain* of the algebra;
*  a collection `F·¥¨ := {f·¥¨ ‚à£ f ‚àà F, f·¥¨ : (œÅ f ‚Üí A) ‚Üí A}` of *operations* on `A`;
*  a (potentially empty) collection of *identities* satisfied by elements and operations of `ùë®`.
Our [Agda][] implementation represents algebras as inhabitants of a record type with two fields---a `Domain` setoid denoting the domain of the algebra, and an `Interp` function denoting the interpretation in the algebra of each operation symbol in `ùëÜ`. We postpone introducing identities until¬†¬ß[4](#equational-logic){reference-type="ref" reference="equational-logic"}.

<pre class="Agda">

<a id="18753" class="Keyword">record</a> <a id="Algebra"></a><a id="18760" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="18768" href="Demos.HSP.html#18768" class="Bound">Œ±</a> <a id="18770" href="Demos.HSP.html#18770" class="Bound">œÅ</a> <a id="18772" class="Symbol">:</a> <a id="18774" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="18779" class="Symbol">(</a><a id="18780" href="Demos.HSP.html#5497" class="Bound">ùìû</a> <a id="18782" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="18784" href="Demos.HSP.html#5499" class="Bound">ùì•</a> <a id="18786" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="18788" href="Agda.Primitive.html#780" class="Primitive">lsuc</a> <a id="18793" class="Symbol">(</a><a id="18794" href="Demos.HSP.html#18768" class="Bound">Œ±</a> <a id="18796" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="18798" href="Demos.HSP.html#18770" class="Bound">œÅ</a><a id="18799" class="Symbol">))</a> <a id="18802" class="Keyword">where</a>
 <a id="18809" class="Keyword">field</a>  <a id="Algebra.Domain"></a><a id="18816" href="Demos.HSP.html#18816" class="Field">Domain</a>  <a id="18824" class="Symbol">:</a> <a id="18826" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="18833" href="Demos.HSP.html#18768" class="Bound">Œ±</a> <a id="18835" href="Demos.HSP.html#18770" class="Bound">œÅ</a>
        <a id="Algebra.Interp"></a><a id="18845" href="Demos.HSP.html#18845" class="Field">Interp</a>  <a id="18853" class="Symbol">:</a> <a id="18855" href="Demos.HSP.html#17528" class="Function Operator">‚ü®</a> <a id="18857" href="Demos.HSP.html#5483" class="Bound">ùëÜ</a> <a id="18859" href="Demos.HSP.html#17528" class="Function Operator">‚ü©</a> <a id="18861" href="Demos.HSP.html#18816" class="Field">Domain</a> <a id="18868" href="Demos.HSP.html#6679" class="Record Operator">‚ü∂</a> <a id="18870" href="Demos.HSP.html#18816" class="Field">Domain</a>

</pre>

Thus, for each operation symbol in `ùëÜ` we have a setoid function `f` whose domain is a power of `Domain` and whose codomain is `Domain`. Further, we define some syntactic sugar to make our formalizations easier to read and reason about. Specifically, if `ùë®` is an algebra, then
*  `ùîª[ ùë® ]` denotes the `Domain` setoid of `ùë®`,
*  `ùïå[ ùë® ]` is the underlying carrier of (the `Domain` setoid of) `ùë®`, and
*  `f ÃÇ ùë®` denotes the interpretation of the operation symbol `f` in the algebra `ùë®`.

<pre class="Agda">

<a id="19392" class="Keyword">open</a> <a id="19397" href="Demos.HSP.html#18760" class="Module">Algebra</a>
<a id="ùîª[_]"></a><a id="19405" href="Demos.HSP.html#19405" class="Function Operator">ùîª[_]</a> <a id="19410" class="Symbol">:</a> <a id="19412" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="19420" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="19422" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a> <a id="19425" class="Symbol">‚Üí</a>  <a id="19428" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="19435" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="19437" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a>
<a id="19440" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="19443" href="Demos.HSP.html#19443" class="Bound">ùë®</a> <a id="19445" href="Demos.HSP.html#19405" class="Function Operator">]</a> <a id="19447" class="Symbol">=</a> <a id="19449" href="Demos.HSP.html#18816" class="Field">Domain</a> <a id="19456" href="Demos.HSP.html#19443" class="Bound">ùë®</a>

<a id="ùïå[_]"></a><a id="19459" href="Demos.HSP.html#19459" class="Function Operator">ùïå[_]</a> <a id="19464" class="Symbol">:</a> <a id="19466" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="19474" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="19476" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a> <a id="19479" class="Symbol">‚Üí</a>  <a id="19482" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="19487" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a>
<a id="19489" href="Demos.HSP.html#19459" class="Function Operator">ùïå[</a> <a id="19492" href="Demos.HSP.html#19492" class="Bound">ùë®</a> <a id="19494" href="Demos.HSP.html#19459" class="Function Operator">]</a> <a id="19496" class="Symbol">=</a> <a id="19498" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="19506" class="Symbol">(</a><a id="19507" href="Demos.HSP.html#18816" class="Field">Domain</a> <a id="19514" href="Demos.HSP.html#19492" class="Bound">ùë®</a><a id="19515" class="Symbol">)</a>

<a id="_ÃÇ_"></a><a id="19518" href="Demos.HSP.html#19518" class="Function Operator">_ÃÇ_</a> <a id="19522" class="Symbol">:</a> <a id="19524" class="Symbol">(</a><a id="19525" href="Demos.HSP.html#19525" class="Bound">f</a> <a id="19527" class="Symbol">:</a> <a id="19529" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="19531" href="Demos.HSP.html#5483" class="Bound">ùëÜ</a> <a id="19533" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a><a id="19534" class="Symbol">)(</a><a id="19536" href="Demos.HSP.html#19536" class="Bound">ùë®</a> <a id="19538" class="Symbol">:</a> <a id="19540" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="19548" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="19550" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a><a id="19552" class="Symbol">)</a> <a id="19554" class="Symbol">‚Üí</a> <a id="19556" class="Symbol">(</a><a id="19557" href="Demos.HSP.html#8301" class="Function Operator">‚à•</a> <a id="19559" href="Demos.HSP.html#5483" class="Bound">ùëÜ</a> <a id="19561" href="Demos.HSP.html#8301" class="Function Operator">‚à•</a> <a id="19563" href="Demos.HSP.html#19525" class="Bound">f</a>  <a id="19566" class="Symbol">‚Üí</a>  <a id="19569" href="Demos.HSP.html#19459" class="Function Operator">ùïå[</a> <a id="19572" href="Demos.HSP.html#19536" class="Bound">ùë®</a> <a id="19574" href="Demos.HSP.html#19459" class="Function Operator">]</a><a id="19575" class="Symbol">)</a> <a id="19577" class="Symbol">‚Üí</a> <a id="19579" href="Demos.HSP.html#19459" class="Function Operator">ùïå[</a> <a id="19582" href="Demos.HSP.html#19536" class="Bound">ùë®</a> <a id="19584" href="Demos.HSP.html#19459" class="Function Operator">]</a>
<a id="19586" href="Demos.HSP.html#19586" class="Bound">f</a> <a id="19588" href="Demos.HSP.html#19518" class="Function Operator">ÃÇ</a> <a id="19590" href="Demos.HSP.html#19590" class="Bound">ùë®</a> <a id="19592" class="Symbol">=</a> <a id="19594" class="Symbol">Œª</a> <a id="19596" href="Demos.HSP.html#19596" class="Bound">a</a> <a id="19598" class="Symbol">‚Üí</a> <a id="19600" class="Symbol">(</a><a id="19601" href="Demos.HSP.html#18845" class="Field">Interp</a> <a id="19608" href="Demos.HSP.html#19590" class="Bound">ùë®</a><a id="19609" class="Symbol">)</a> <a id="19611" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="19615" class="Symbol">(</a><a id="19616" href="Demos.HSP.html#19586" class="Bound">f</a> <a id="19618" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="19620" href="Demos.HSP.html#19596" class="Bound">a</a><a id="19621" class="Symbol">)</a>
</pre>

#### Universe levels of algebra types {#universe-levels-of-algebra-types .unnumbered}

Types belong to *universes*, which are structured in [Agda][] as follows: 
`Type ‚Ñì : Type (suc ‚Ñì)`, `Type (suc ‚Ñì) : Type (suc (suc ‚Ñì))`.[^7] 
While this means that `Type ‚Ñì` has type `Type (suc ‚Ñì)`, it does *not* imply that `Type ‚Ñì` 
has type `Type (suc (suc ‚Ñì))`. In other words, [Agda][]'s universes are *non-cumulative*. 
This can be advantageous as it becomes possible to treat size issues more generally and precisely. 
However, dealing with explicit universe levels can be daunting, and the standard literature
(in which uniform smallness is typically assumed) offers little guidance. While in some settings, 
such as category theory, formalizing in [Agda][] works smoothly with respect to universe levels 
(see¬†[@agda-categories]), in universal algebra the terrain is bumpier. Thus, it seems worthwhile to 
explain how we make use of universe lifting and lowering functions, available in the 
[Agda Standard Library][], to develop domain-specific tools for dealing with [Agda][]'s non-cumulative 
universe hierarchy.

<!-- Let us be more concrete about what is at issue by considering a typical example. frequently encounters problems during the type-checking process and responds by printing a message like the following. Here informs us that it encountered universe level on line 498 of the HSP module, where it was expecting level ¬†¬†¬†¬†( ). In this case, we tried to use an algebra inhabiting the type whereas expected an inhabitant of the type ( ( )) . The operation of the standard library embeds a type into a higher universe. Specializing to our situation, we define a function ¬†with the following interface. -2mm . -->

The `Lift` operation of the standard library embeds a type into a higher universe. Specializing `Lift` to our situation, we define a function `Lift-Alg`.

<pre class="Agda">

<a id="21524" class="Keyword">module</a> <a id="21531" href="Demos.HSP.html#21531" class="Module">_</a> <a id="21533" class="Symbol">(</a><a id="21534" href="Demos.HSP.html#21534" class="Bound">ùë®</a> <a id="21536" class="Symbol">:</a> <a id="21538" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="21546" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="21548" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a><a id="21550" class="Symbol">)</a> <a id="21552" class="Keyword">where</a>
 <a id="21559" class="Keyword">open</a> <a id="21564" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="21571" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="21574" href="Demos.HSP.html#21534" class="Bound">ùë®</a> <a id="21576" href="Demos.HSP.html#19405" class="Function Operator">]</a> <a id="21578" class="Keyword">using</a> <a id="21584" class="Symbol">(</a> <a id="21586" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="21590" class="Symbol">;</a> <a id="21592" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="21597" class="Symbol">;</a> <a id="21599" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="21603" class="Symbol">;</a> <a id="21605" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="21611" class="Symbol">)</a> <a id="21613" class="Symbol">;</a> <a id="21615" class="Keyword">open</a> <a id="21620" href="Level.html" class="Module">Level</a>
 <a id="21627" href="Demos.HSP.html#21627" class="Function">Lift-AlgÀ°</a> <a id="21637" class="Symbol">:</a> <a id="21639" class="Symbol">(</a><a id="21640" href="Demos.HSP.html#21640" class="Bound">‚Ñì</a> <a id="21642" class="Symbol">:</a> <a id="21644" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="21649" class="Symbol">)</a> <a id="21651" class="Symbol">‚Üí</a> <a id="21653" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="21661" class="Symbol">(</a><a id="21662" href="Demos.HSP.html#21546" class="Bound">Œ±</a> <a id="21664" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="21666" href="Demos.HSP.html#21640" class="Bound">‚Ñì</a><a id="21667" class="Symbol">)</a> <a id="21669" href="Demos.HSP.html#21548" class="Bound">œÅ·µÉ</a>
 <a id="21673" href="Demos.HSP.html#18816" class="Field">Domain</a> <a id="21680" class="Symbol">(</a><a id="21681" href="Demos.HSP.html#21627" class="Function">Lift-AlgÀ°</a> <a id="21691" href="Demos.HSP.html#21691" class="Bound">‚Ñì</a><a id="21692" class="Symbol">)</a> <a id="21694" class="Symbol">=</a>
  <a id="21698" class="Keyword">record</a>  <a id="21706" class="Symbol">{</a> <a id="21708" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a>        <a id="21723" class="Symbol">=</a> <a id="21725" href="Level.html#400" class="Record">Lift</a> <a id="21730" href="Demos.HSP.html#21691" class="Bound">‚Ñì</a> <a id="21732" href="Demos.HSP.html#19459" class="Function Operator">ùïå[</a> <a id="21735" href="Demos.HSP.html#21534" class="Bound">ùë®</a> <a id="21737" href="Demos.HSP.html#19459" class="Function Operator">]</a>
          <a id="21749" class="Symbol">;</a> <a id="21751" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a>            <a id="21766" class="Symbol">=</a> <a id="21768" class="Symbol">Œª</a> <a id="21770" href="Demos.HSP.html#21770" class="Bound">x</a> <a id="21772" href="Demos.HSP.html#21772" class="Bound">y</a> <a id="21774" class="Symbol">‚Üí</a> <a id="21776" href="Level.html#470" class="Field">lower</a> <a id="21782" href="Demos.HSP.html#21770" class="Bound">x</a> <a id="21784" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a> <a id="21786" href="Level.html#470" class="Field">lower</a> <a id="21792" href="Demos.HSP.html#21772" class="Bound">y</a>
          <a id="21804" class="Symbol">;</a> <a id="21806" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a>  <a id="21821" class="Symbol">=</a> <a id="21823" class="Keyword">record</a> <a id="21830" class="Symbol">{</a> <a id="21832" href="Relation.Binary.Structures.html#1568" class="Field">refl</a> <a id="21837" class="Symbol">=</a> <a id="21839" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="21844" class="Symbol">;</a> <a id="21846" href="Relation.Binary.Structures.html#1594" class="Field">sym</a> <a id="21850" class="Symbol">=</a> <a id="21852" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="21856" class="Symbol">;</a> <a id="21858" href="Relation.Binary.Structures.html#1620" class="Field">trans</a> <a id="21864" class="Symbol">=</a> <a id="21866" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="21872" class="Symbol">}}</a>

 <a id="21877" href="Demos.HSP.html#18845" class="Field">Interp</a> <a id="21884" class="Symbol">(</a><a id="21885" href="Demos.HSP.html#21627" class="Function">Lift-AlgÀ°</a> <a id="21895" href="Demos.HSP.html#21895" class="Bound">‚Ñì</a><a id="21896" class="Symbol">)</a> <a id="21898" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="21902" class="Symbol">(</a><a id="21903" href="Demos.HSP.html#21903" class="Bound">f</a> <a id="21905" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="21907" href="Demos.HSP.html#21907" class="Bound">la</a><a id="21909" class="Symbol">)</a> <a id="21911" class="Symbol">=</a> <a id="21913" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="21918" class="Symbol">((</a><a id="21920" href="Demos.HSP.html#21903" class="Bound">f</a> <a id="21922" href="Demos.HSP.html#19518" class="Function Operator">ÃÇ</a> <a id="21924" href="Demos.HSP.html#21534" class="Bound">ùë®</a><a id="21925" class="Symbol">)</a> <a id="21927" class="Symbol">(</a><a id="21928" href="Level.html#470" class="Field">lower</a> <a id="21934" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="21936" href="Demos.HSP.html#21907" class="Bound">la</a><a id="21938" class="Symbol">))</a>
 <a id="21942" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="21947" class="Symbol">(</a><a id="21948" href="Demos.HSP.html#18845" class="Field">Interp</a> <a id="21955" class="Symbol">(</a><a id="21956" href="Demos.HSP.html#21627" class="Function">Lift-AlgÀ°</a> <a id="21966" href="Demos.HSP.html#21966" class="Bound">‚Ñì</a><a id="21967" class="Symbol">))</a> <a id="21970" class="Symbol">(</a><a id="21971" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="21978" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="21980" href="Demos.HSP.html#21980" class="Bound">lab</a><a id="21983" class="Symbol">)</a> <a id="21985" class="Symbol">=</a> <a id="21987" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="21992" class="Symbol">(</a><a id="21993" href="Demos.HSP.html#18845" class="Field">Interp</a> <a id="22000" href="Demos.HSP.html#21534" class="Bound">ùë®</a><a id="22001" class="Symbol">)</a> <a id="22003" class="Symbol">((</a><a id="22005" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="22012" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="22014" href="Demos.HSP.html#21980" class="Bound">lab</a><a id="22017" class="Symbol">))</a>

 <a id="22022" href="Demos.HSP.html#22022" class="Function">Lift-Alg ≥</a> <a id="22032" class="Symbol">:</a> <a id="22034" class="Symbol">(</a><a id="22035" href="Demos.HSP.html#22035" class="Bound">‚Ñì</a> <a id="22037" class="Symbol">:</a> <a id="22039" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="22044" class="Symbol">)</a> <a id="22046" class="Symbol">‚Üí</a> <a id="22048" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="22056" href="Demos.HSP.html#21546" class="Bound">Œ±</a> <a id="22058" class="Symbol">(</a><a id="22059" href="Demos.HSP.html#21548" class="Bound">œÅ·µÉ</a> <a id="22062" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="22064" href="Demos.HSP.html#22035" class="Bound">‚Ñì</a><a id="22065" class="Symbol">)</a>
 <a id="22068" href="Demos.HSP.html#18816" class="Field">Domain</a> <a id="22075" class="Symbol">(</a><a id="22076" href="Demos.HSP.html#22022" class="Function">Lift-Alg ≥</a> <a id="22086" href="Demos.HSP.html#22086" class="Bound">‚Ñì</a><a id="22087" class="Symbol">)</a> <a id="22089" class="Symbol">=</a>
  <a id="22093" class="Keyword">record</a>  <a id="22101" class="Symbol">{</a> <a id="22103" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a>        <a id="22118" class="Symbol">=</a> <a id="22120" href="Demos.HSP.html#19459" class="Function Operator">ùïå[</a> <a id="22123" href="Demos.HSP.html#21534" class="Bound">ùë®</a> <a id="22125" href="Demos.HSP.html#19459" class="Function Operator">]</a>
          <a id="22137" class="Symbol">;</a> <a id="22139" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a>            <a id="22154" class="Symbol">=</a> <a id="22156" class="Symbol">Œª</a> <a id="22158" href="Demos.HSP.html#22158" class="Bound">x</a> <a id="22160" href="Demos.HSP.html#22160" class="Bound">y</a> <a id="22162" class="Symbol">‚Üí</a> <a id="22164" href="Level.html#400" class="Record">Lift</a> <a id="22169" href="Demos.HSP.html#22086" class="Bound">‚Ñì</a> <a id="22171" class="Symbol">(</a><a id="22172" href="Demos.HSP.html#22158" class="Bound">x</a> <a id="22174" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a> <a id="22176" href="Demos.HSP.html#22160" class="Bound">y</a><a id="22177" class="Symbol">)</a>
          <a id="22189" class="Symbol">;</a> <a id="22191" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a>  <a id="22206" class="Symbol">=</a> <a id="22208" class="Keyword">record</a>  <a id="22216" class="Symbol">{</a> <a id="22218" href="Relation.Binary.Structures.html#1568" class="Field">refl</a>  <a id="22224" class="Symbol">=</a> <a id="22226" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="22231" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>
                                     <a id="22273" class="Symbol">;</a> <a id="22275" href="Relation.Binary.Structures.html#1594" class="Field">sym</a>   <a id="22281" class="Symbol">=</a> <a id="22283" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="22288" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="22290" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="22294" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="22296" href="Level.html#470" class="Field">lower</a>
                                     <a id="22339" class="Symbol">;</a> <a id="22341" href="Relation.Binary.Structures.html#1620" class="Field">trans</a> <a id="22347" class="Symbol">=</a> <a id="22349" class="Symbol">Œª</a> <a id="22351" href="Demos.HSP.html#22351" class="Bound">x</a> <a id="22353" href="Demos.HSP.html#22353" class="Bound">y</a> <a id="22355" class="Symbol">‚Üí</a> <a id="22357" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="22362" class="Symbol">(</a><a id="22363" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="22369" class="Symbol">(</a><a id="22370" href="Level.html#470" class="Field">lower</a> <a id="22376" href="Demos.HSP.html#22351" class="Bound">x</a><a id="22377" class="Symbol">)(</a><a id="22379" href="Level.html#470" class="Field">lower</a> <a id="22385" href="Demos.HSP.html#22353" class="Bound">y</a><a id="22386" class="Symbol">))</a> <a id="22389" class="Symbol">}}</a>

 <a id="22394" href="Demos.HSP.html#18845" class="Field">Interp</a> <a id="22401" class="Symbol">(</a><a id="22402" href="Demos.HSP.html#22022" class="Function">Lift-Alg ≥</a> <a id="22412" href="Demos.HSP.html#22412" class="Bound">‚Ñì</a> <a id="22414" class="Symbol">)</a> <a id="22416" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="22420" class="Symbol">(</a><a id="22421" href="Demos.HSP.html#22421" class="Bound">f</a> <a id="22423" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="22425" href="Demos.HSP.html#22425" class="Bound">la</a><a id="22427" class="Symbol">)</a> <a id="22429" class="Symbol">=</a> <a id="22431" class="Symbol">(</a><a id="22432" href="Demos.HSP.html#22421" class="Bound">f</a> <a id="22434" href="Demos.HSP.html#19518" class="Function Operator">ÃÇ</a> <a id="22436" href="Demos.HSP.html#21534" class="Bound">ùë®</a><a id="22437" class="Symbol">)</a> <a id="22439" href="Demos.HSP.html#22425" class="Bound">la</a>
 <a id="22443" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="22448" class="Symbol">(</a><a id="22449" href="Demos.HSP.html#18845" class="Field">Interp</a> <a id="22456" class="Symbol">(</a><a id="22457" href="Demos.HSP.html#22022" class="Function">Lift-Alg ≥</a> <a id="22467" href="Demos.HSP.html#22467" class="Bound">‚Ñì</a><a id="22468" class="Symbol">))(</a><a id="22471" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="22478" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="22480" href="Demos.HSP.html#22480" class="Bound">lab</a><a id="22483" class="Symbol">)</a> <a id="22485" class="Symbol">=</a> <a id="22487" href="Level.html#457" class="InductiveConstructor">lift</a><a id="22491" class="Symbol">(</a><a id="22492" href="Function.Bundles.html#1938" class="Field">cong</a><a id="22496" class="Symbol">(</a><a id="22497" href="Demos.HSP.html#18845" class="Field">Interp</a> <a id="22504" href="Demos.HSP.html#21534" class="Bound">ùë®</a><a id="22505" class="Symbol">)(</a><a id="22507" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="22514" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="22516" class="Symbol">Œª</a> <a id="22518" href="Demos.HSP.html#22518" class="Bound">i</a> <a id="22520" class="Symbol">‚Üí</a> <a id="22522" href="Level.html#470" class="Field">lower</a> <a id="22528" class="Symbol">(</a><a id="22529" href="Demos.HSP.html#22480" class="Bound">lab</a> <a id="22533" href="Demos.HSP.html#22518" class="Bound">i</a><a id="22534" class="Symbol">)))</a>

<a id="Lift-Alg"></a><a id="22539" href="Demos.HSP.html#22539" class="Function">Lift-Alg</a> <a id="22548" class="Symbol">:</a> <a id="22550" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="22558" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="22560" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a> <a id="22563" class="Symbol">‚Üí</a> <a id="22565" class="Symbol">(</a><a id="22566" href="Demos.HSP.html#22566" class="Bound">‚Ñì‚ÇÄ</a> <a id="22569" href="Demos.HSP.html#22569" class="Bound">‚Ñì‚ÇÅ</a> <a id="22572" class="Symbol">:</a> <a id="22574" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="22579" class="Symbol">)</a> <a id="22581" class="Symbol">‚Üí</a> <a id="22583" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="22591" class="Symbol">(</a><a id="22592" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="22594" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="22596" href="Demos.HSP.html#22566" class="Bound">‚Ñì‚ÇÄ</a><a id="22598" class="Symbol">)</a> <a id="22600" class="Symbol">(</a><a id="22601" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a> <a id="22604" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="22606" href="Demos.HSP.html#22569" class="Bound">‚Ñì‚ÇÅ</a><a id="22608" class="Symbol">)</a>
<a id="22610" href="Demos.HSP.html#22539" class="Function">Lift-Alg</a> <a id="22619" href="Demos.HSP.html#22619" class="Bound">ùë®</a> <a id="22621" href="Demos.HSP.html#22621" class="Bound">‚Ñì‚ÇÄ</a> <a id="22624" href="Demos.HSP.html#22624" class="Bound">‚Ñì‚ÇÅ</a> <a id="22627" class="Symbol">=</a> <a id="22629" href="Demos.HSP.html#22022" class="Function">Lift-Alg ≥</a> <a id="22639" class="Symbol">(</a><a id="22640" href="Demos.HSP.html#21627" class="Function">Lift-AlgÀ°</a> <a id="22650" href="Demos.HSP.html#22619" class="Bound">ùë®</a> <a id="22652" href="Demos.HSP.html#22621" class="Bound">‚Ñì‚ÇÄ</a><a id="22654" class="Symbol">)</a> <a id="22656" href="Demos.HSP.html#22624" class="Bound">‚Ñì‚ÇÅ</a>

</pre>

Recall that our `Algebra` type has two universe level parameters corresponding to those of the domain setoid.
Concretely, an algebra of type `Algebra Œ± œÅ·µÉ` has a `Domain` of type `Setoid Œ± œÅ·µÉ`. This packages a 
"carrier set" (`Carrier`), inhabiting `Type Œ±`, with an equality on `Carrier` of type `Rel Carrier œÅ·µÉ`.
`Lift-Alg` takes an algebra parametrized by levels `Œ±` and `œÅ·µÉ` and constructs a new algebra whose carrier 
inhabits `Type (Œ± ‚äî ‚Ñì‚ÇÄ)` and whose equivalence inhabits `Rel Carrier (œÅ·µÉ ‚äî ‚Ñì‚ÇÅ)`.
To be useful, this lifting operation should result in an algebra with the same semantic properties
as the one we started with. We will see in ¬ß[3.4](#sec:lift-alg){reference-type="ref"
reference="sec:lift-alg"} that this is indeed the case.


#### Product Algebras {#product-algebras .unnumbered}

We define the *product* of a family of algebras as follows. Let `Œπ` be a universe and
`I : Type Œπ` a type (the "indexing type"). Then `ùíú : I ‚Üí Algebra Œ± œÅ·µÉ` represents an *indexed family of algebras*. Denote by `‚®Ö ùíú` the *product of algebras* in `ùíú` (or *product algebra*), by which we mean the algebra 
whose domain is the Cartesian product `‚àè[i ‚àà I] ùîª[ ùíú i ]` of the domains of the algebras in `ùíú`, and
whose operations are those arising from the point-wise interpretation of the operation symbols in the obvious way: if `f` is a `J`-ary operation symbol and if `a : Œ†[ i ‚àà I ] J ‚Üí ùîª[ ùíú i ]` is, for each
`i : I`, a `J`-tuple of elements of the domain `ùîª[ ùíú i ]`, then we define the interpretation of `f` 
in `‚®Ö ùíú` by

`(f ÃÇ ‚®Ö ùíú) a := Œª (i : I) ‚Üí (f ÃÇ ùíú i)(a i)`.

Here is the formal definition of the product algebra type in [Agda][].

<pre class="Agda">

<a id="24327" class="Keyword">module</a> <a id="24334" href="Demos.HSP.html#24334" class="Module">_</a> <a id="24336" class="Symbol">{</a><a id="24337" href="Demos.HSP.html#24337" class="Bound">Œπ</a> <a id="24339" class="Symbol">:</a> <a id="24341" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="24346" class="Symbol">}{</a><a id="24348" href="Demos.HSP.html#24348" class="Bound">I</a> <a id="24350" class="Symbol">:</a> <a id="24352" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="24357" href="Demos.HSP.html#24337" class="Bound">Œπ</a> <a id="24359" class="Symbol">}</a> <a id="24361" class="Keyword">where</a>

 <a id="24369" href="Demos.HSP.html#24369" class="Function">‚®Ö</a> <a id="24371" class="Symbol">:</a> <a id="24373" class="Symbol">(</a><a id="24374" href="Demos.HSP.html#24374" class="Bound">ùíú</a> <a id="24376" class="Symbol">:</a> <a id="24378" href="Demos.HSP.html#24348" class="Bound">I</a> <a id="24380" class="Symbol">‚Üí</a> <a id="24382" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="24390" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="24392" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a><a id="24394" class="Symbol">)</a> <a id="24396" class="Symbol">‚Üí</a> <a id="24398" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="24406" class="Symbol">(</a><a id="24407" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="24409" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="24411" href="Demos.HSP.html#24337" class="Bound">Œπ</a><a id="24412" class="Symbol">)</a> <a id="24414" class="Symbol">(</a><a id="24415" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a> <a id="24418" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="24420" href="Demos.HSP.html#24337" class="Bound">Œπ</a><a id="24421" class="Symbol">)</a>

 <a id="24425" href="Demos.HSP.html#18816" class="Field">Domain</a> <a id="24432" class="Symbol">(</a><a id="24433" href="Demos.HSP.html#24369" class="Function">‚®Ö</a> <a id="24435" href="Demos.HSP.html#24435" class="Bound">ùíú</a><a id="24436" class="Symbol">)</a> <a id="24438" class="Symbol">=</a> <a id="24440" class="Keyword">record</a>  <a id="24448" class="Symbol">{</a> <a id="24450" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="24458" class="Symbol">=</a> <a id="24460" class="Symbol">‚àÄ</a> <a id="24462" href="Demos.HSP.html#24462" class="Bound">i</a> <a id="24464" class="Symbol">‚Üí</a> <a id="24466" href="Demos.HSP.html#19459" class="Function Operator">ùïå[</a> <a id="24469" href="Demos.HSP.html#24435" class="Bound">ùíú</a> <a id="24471" href="Demos.HSP.html#24462" class="Bound">i</a> <a id="24473" href="Demos.HSP.html#19459" class="Function Operator">]</a>
                        <a id="24499" class="Symbol">;</a> <a id="24501" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="24505" class="Symbol">=</a> <a id="24507" class="Symbol">Œª</a> <a id="24509" href="Demos.HSP.html#24509" class="Bound">a</a> <a id="24511" href="Demos.HSP.html#24511" class="Bound">b</a> <a id="24513" class="Symbol">‚Üí</a> <a id="24515" class="Symbol">‚àÄ</a> <a id="24517" href="Demos.HSP.html#24517" class="Bound">i</a> <a id="24519" class="Symbol">‚Üí</a> <a id="24521" class="Symbol">(</a><a id="24522" href="Demos.HSP.html#7287" class="Field Operator">_‚âàÀ¢_</a> <a id="24527" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="24530" href="Demos.HSP.html#24435" class="Bound">ùíú</a> <a id="24532" href="Demos.HSP.html#24517" class="Bound">i</a> <a id="24534" href="Demos.HSP.html#19405" class="Function Operator">]</a><a id="24535" class="Symbol">)</a> <a id="24537" class="Symbol">(</a><a id="24538" href="Demos.HSP.html#24509" class="Bound">a</a> <a id="24540" href="Demos.HSP.html#24517" class="Bound">i</a><a id="24541" class="Symbol">)(</a><a id="24543" href="Demos.HSP.html#24511" class="Bound">b</a> <a id="24545" href="Demos.HSP.html#24517" class="Bound">i</a><a id="24546" class="Symbol">)</a>
                        <a id="24572" class="Symbol">;</a> <a id="24574" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="24588" class="Symbol">=</a>
                           <a id="24617" class="Keyword">record</a>  <a id="24625" class="Symbol">{</a> <a id="24627" href="Relation.Binary.Structures.html#1568" class="Field">refl</a> <a id="24632" class="Symbol">=</a> <a id="24634" class="Symbol">Œª</a> <a id="24636" href="Demos.HSP.html#24636" class="Bound">i</a> <a id="24638" class="Symbol">‚Üí</a> <a id="24640" href="Demos.HSP.html#6883" class="Field">refl·µâ</a> <a id="24646" class="Symbol">(</a><a id="24647" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="24661" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="24664" href="Demos.HSP.html#24435" class="Bound">ùíú</a> <a id="24666" href="Demos.HSP.html#24636" class="Bound">i</a> <a id="24668" href="Demos.HSP.html#19405" class="Function Operator">]</a><a id="24669" class="Symbol">)</a>
                                   <a id="24706" class="Symbol">;</a> <a id="24708" href="Relation.Binary.Structures.html#1594" class="Field">sym</a> <a id="24712" class="Symbol">=</a> <a id="24714" class="Symbol">Œª</a> <a id="24716" href="Demos.HSP.html#24716" class="Bound">x</a> <a id="24718" href="Demos.HSP.html#24718" class="Bound">i</a> <a id="24720" class="Symbol">‚Üí</a> <a id="24722" href="Demos.HSP.html#6944" class="Field">sym·µâ</a> <a id="24727" class="Symbol">(</a><a id="24728" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="24742" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="24745" href="Demos.HSP.html#24435" class="Bound">ùíú</a> <a id="24747" href="Demos.HSP.html#24718" class="Bound">i</a> <a id="24749" href="Demos.HSP.html#19405" class="Function Operator">]</a><a id="24750" class="Symbol">)(</a><a id="24752" href="Demos.HSP.html#24716" class="Bound">x</a> <a id="24754" href="Demos.HSP.html#24718" class="Bound">i</a><a id="24755" class="Symbol">)</a>
                                   <a id="24792" class="Symbol">;</a> <a id="24794" href="Relation.Binary.Structures.html#1620" class="Field">trans</a> <a id="24800" class="Symbol">=</a> <a id="24802" class="Symbol">Œª</a> <a id="24804" href="Demos.HSP.html#24804" class="Bound">x</a> <a id="24806" href="Demos.HSP.html#24806" class="Bound">y</a> <a id="24808" href="Demos.HSP.html#24808" class="Bound">i</a> <a id="24810" class="Symbol">‚Üí</a> <a id="24812" href="Demos.HSP.html#7005" class="Field">trans·µâ</a> <a id="24819" class="Symbol">(</a><a id="24820" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="24834" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="24837" href="Demos.HSP.html#24435" class="Bound">ùíú</a> <a id="24839" href="Demos.HSP.html#24808" class="Bound">i</a> <a id="24841" href="Demos.HSP.html#19405" class="Function Operator">]</a><a id="24842" class="Symbol">)(</a><a id="24844" href="Demos.HSP.html#24804" class="Bound">x</a> <a id="24846" href="Demos.HSP.html#24808" class="Bound">i</a><a id="24847" class="Symbol">)(</a><a id="24849" href="Demos.HSP.html#24806" class="Bound">y</a> <a id="24851" href="Demos.HSP.html#24808" class="Bound">i</a><a id="24852" class="Symbol">)</a> <a id="24854" class="Symbol">}}</a>

 <a id="24859" href="Demos.HSP.html#18845" class="Field">Interp</a> <a id="24866" class="Symbol">(</a><a id="24867" href="Demos.HSP.html#24369" class="Function">‚®Ö</a> <a id="24869" href="Demos.HSP.html#24869" class="Bound">ùíú</a><a id="24870" class="Symbol">)</a> <a id="24872" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="24876" class="Symbol">(</a><a id="24877" href="Demos.HSP.html#24877" class="Bound">f</a> <a id="24879" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="24881" href="Demos.HSP.html#24881" class="Bound">a</a><a id="24882" class="Symbol">)</a> <a id="24884" class="Symbol">=</a> <a id="24886" class="Symbol">Œª</a> <a id="24888" href="Demos.HSP.html#24888" class="Bound">i</a> <a id="24890" class="Symbol">‚Üí</a> <a id="24892" class="Symbol">(</a><a id="24893" href="Demos.HSP.html#24877" class="Bound">f</a> <a id="24895" href="Demos.HSP.html#19518" class="Function Operator">ÃÇ</a> <a id="24897" class="Symbol">(</a><a id="24898" href="Demos.HSP.html#24869" class="Bound">ùíú</a> <a id="24900" href="Demos.HSP.html#24888" class="Bound">i</a><a id="24901" class="Symbol">))</a> <a id="24904" class="Symbol">(</a><a id="24905" href="Function.Base.html#1554" class="Function">flip</a> <a id="24910" href="Demos.HSP.html#24881" class="Bound">a</a> <a id="24912" href="Demos.HSP.html#24888" class="Bound">i</a><a id="24913" class="Symbol">)</a>
 <a id="24916" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="24921" class="Symbol">(</a><a id="24922" href="Demos.HSP.html#18845" class="Field">Interp</a> <a id="24929" class="Symbol">(</a><a id="24930" href="Demos.HSP.html#24369" class="Function">‚®Ö</a> <a id="24932" href="Demos.HSP.html#24932" class="Bound">ùíú</a><a id="24933" class="Symbol">))</a> <a id="24936" class="Symbol">(</a><a id="24937" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="24944" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="24946" href="Demos.HSP.html#24946" class="Bound">f=g</a> <a id="24950" class="Symbol">)</a> <a id="24952" class="Symbol">=</a> <a id="24954" class="Symbol">Œª</a> <a id="24956" href="Demos.HSP.html#24956" class="Bound">i</a> <a id="24958" class="Symbol">‚Üí</a> <a id="24960" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="24965" class="Symbol">(</a><a id="24966" href="Demos.HSP.html#18845" class="Field">Interp</a> <a id="24973" class="Symbol">(</a><a id="24974" href="Demos.HSP.html#24932" class="Bound">ùíú</a> <a id="24976" href="Demos.HSP.html#24956" class="Bound">i</a><a id="24977" class="Symbol">))</a> <a id="24980" class="Symbol">(</a><a id="24981" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="24988" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="24990" href="Function.Base.html#1554" class="Function">flip</a> <a id="24995" href="Demos.HSP.html#24946" class="Bound">f=g</a> <a id="24999" href="Demos.HSP.html#24956" class="Bound">i</a> <a id="25001" class="Symbol">)</a>

</pre>

Evidently, the carrier of the product algebra type is indeed the (dependent) product of the carriers in the indexed family. The rest of the definitions are the point-wise versions of the underlying ones.

Structure preserving maps and isomorphism {#homomorphisms}
-----------------------------------------

Throughout the rest of the paper, unless stated otherwise, `ùë®` and `ùë©` will denote `ùëÜ`-algebras inhabiting the types `Algebra Œ± œÅ·µÉ` and `Algebra Œ≤ œÅ·µá`, respectively.

A *homomorphism* (or "hom") from `ùë®` to `ùë©` is a setoid function `h : ùîª[ ùë® ] ‚ü∂ ùîª[ ùë© ]`
that is *compatible* with all basic operations; that is, for
every operation symbol `f : ‚à£ ùëÜ ‚à£` and all tuples `a : ‚à• ùëÜ ‚à• f ‚Üí ùïå[ ùë® ]`, we have 
`h ‚ü®$‚ü© (f ÃÇ ùë®) a ‚âà (f ÃÇ ùë©) Œª x ‚Üí h ‚ü®$‚ü© (a x)`.

It is convenient to first formalize "compatible" (`compatible-map-op`),
representing the assertion that a given setoid function
`h : ùîª[ ùë® ] ‚ü∂ ùîª[ ùë© ]` commutes with a given operation symbol `f`, and then generalize over 
operation symbols to yield the type (`compatible-map`) of compatible maps from (the domain of)
`ùë®` to (the domain of) `ùë©`.

<pre class="Agda">

<a id="26127" class="Keyword">module</a> <a id="26134" href="Demos.HSP.html#26134" class="Module">_</a> <a id="26136" class="Symbol">(</a><a id="26137" href="Demos.HSP.html#26137" class="Bound">ùë®</a> <a id="26139" class="Symbol">:</a> <a id="26141" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="26149" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="26151" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a><a id="26153" class="Symbol">)(</a><a id="26155" href="Demos.HSP.html#26155" class="Bound">ùë©</a> <a id="26157" class="Symbol">:</a> <a id="26159" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="26167" href="Demos.HSP.html#7618" class="Generalizable">Œ≤</a> <a id="26169" href="Demos.HSP.html#7620" class="Generalizable">œÅ·µá</a><a id="26171" class="Symbol">)</a> <a id="26173" class="Keyword">where</a>

 <a id="26181" href="Demos.HSP.html#26181" class="Function">compatible-map-op</a> <a id="26199" class="Symbol">:</a> <a id="26201" class="Symbol">(</a><a id="26202" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="26205" href="Demos.HSP.html#26137" class="Bound">ùë®</a> <a id="26207" href="Demos.HSP.html#19405" class="Function Operator">]</a> <a id="26209" href="Demos.HSP.html#6679" class="Record Operator">‚ü∂</a> <a id="26211" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="26214" href="Demos.HSP.html#26155" class="Bound">ùë©</a> <a id="26216" href="Demos.HSP.html#19405" class="Function Operator">]</a><a id="26217" class="Symbol">)</a> <a id="26219" class="Symbol">‚Üí</a> <a id="26221" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="26223" href="Demos.HSP.html#5483" class="Bound">ùëÜ</a> <a id="26225" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="26227" class="Symbol">‚Üí</a> <a id="26229" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="26234" class="Symbol">_</a>
 <a id="26237" href="Demos.HSP.html#26181" class="Function">compatible-map-op</a> <a id="26255" href="Demos.HSP.html#26255" class="Bound">h</a> <a id="26257" href="Demos.HSP.html#26257" class="Bound">f</a> <a id="26259" class="Symbol">=</a> <a id="26261" class="Symbol">‚àÄ</a> <a id="26263" class="Symbol">{</a><a id="26264" href="Demos.HSP.html#26264" class="Bound">a</a><a id="26265" class="Symbol">}</a> <a id="26267" class="Symbol">‚Üí</a> <a id="26269" href="Demos.HSP.html#26255" class="Bound">h</a> <a id="26271" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="26275" class="Symbol">(</a><a id="26276" href="Demos.HSP.html#26257" class="Bound">f</a> <a id="26278" href="Demos.HSP.html#19518" class="Function Operator">ÃÇ</a> <a id="26280" href="Demos.HSP.html#26137" class="Bound">ùë®</a><a id="26281" class="Symbol">)</a> <a id="26283" href="Demos.HSP.html#26264" class="Bound">a</a> <a id="26285" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a> <a id="26287" class="Symbol">(</a><a id="26288" href="Demos.HSP.html#26257" class="Bound">f</a> <a id="26290" href="Demos.HSP.html#19518" class="Function Operator">ÃÇ</a> <a id="26292" href="Demos.HSP.html#26155" class="Bound">ùë©</a><a id="26293" class="Symbol">)</a> <a id="26295" class="Symbol">Œª</a> <a id="26297" href="Demos.HSP.html#26297" class="Bound">x</a> <a id="26299" class="Symbol">‚Üí</a> <a id="26301" href="Demos.HSP.html#26255" class="Bound">h</a> <a id="26303" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="26307" class="Symbol">(</a><a id="26308" href="Demos.HSP.html#26264" class="Bound">a</a> <a id="26310" href="Demos.HSP.html#26297" class="Bound">x</a><a id="26311" class="Symbol">)</a>
  <a id="26315" class="Keyword">where</a> <a id="26321" class="Keyword">open</a> <a id="26326" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="26333" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="26336" href="Demos.HSP.html#26155" class="Bound">ùë©</a> <a id="26338" href="Demos.HSP.html#19405" class="Function Operator">]</a> <a id="26340" class="Keyword">using</a> <a id="26346" class="Symbol">(</a> <a id="26348" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="26352" class="Symbol">)</a>

 <a id="26356" href="Demos.HSP.html#26356" class="Function">compatible-map</a> <a id="26371" class="Symbol">:</a> <a id="26373" class="Symbol">(</a><a id="26374" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="26377" href="Demos.HSP.html#26137" class="Bound">ùë®</a> <a id="26379" href="Demos.HSP.html#19405" class="Function Operator">]</a> <a id="26381" href="Demos.HSP.html#6679" class="Record Operator">‚ü∂</a> <a id="26383" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="26386" href="Demos.HSP.html#26155" class="Bound">ùë©</a> <a id="26388" href="Demos.HSP.html#19405" class="Function Operator">]</a><a id="26389" class="Symbol">)</a> <a id="26391" class="Symbol">‚Üí</a> <a id="26393" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="26398" class="Symbol">_</a>
 <a id="26401" href="Demos.HSP.html#26356" class="Function">compatible-map</a> <a id="26416" href="Demos.HSP.html#26416" class="Bound">h</a> <a id="26418" class="Symbol">=</a> <a id="26420" class="Symbol">‚àÄ</a> <a id="26422" class="Symbol">{</a><a id="26423" href="Demos.HSP.html#26423" class="Bound">f</a><a id="26424" class="Symbol">}</a> <a id="26426" class="Symbol">‚Üí</a> <a id="26428" href="Demos.HSP.html#26181" class="Function">compatible-map-op</a> <a id="26446" href="Demos.HSP.html#26416" class="Bound">h</a> <a id="26448" href="Demos.HSP.html#26423" class="Bound">f</a>

</pre>

Using these we define the property (`IsHom`) of being a homomorphism, and
finally the type (`hom`) of homomorphisms from `ùë®` to `ùë©`.

<pre class="Agda">

 <a id="26612" class="Keyword">record</a> <a id="26619" href="Demos.HSP.html#26619" class="Record">IsHom</a> <a id="26625" class="Symbol">(</a><a id="26626" href="Demos.HSP.html#26626" class="Bound">h</a> <a id="26628" class="Symbol">:</a> <a id="26630" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="26633" href="Demos.HSP.html#26137" class="Bound">ùë®</a> <a id="26635" href="Demos.HSP.html#19405" class="Function Operator">]</a> <a id="26637" href="Demos.HSP.html#6679" class="Record Operator">‚ü∂</a> <a id="26639" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="26642" href="Demos.HSP.html#26155" class="Bound">ùë©</a> <a id="26644" href="Demos.HSP.html#19405" class="Function Operator">]</a><a id="26645" class="Symbol">)</a> <a id="26647" class="Symbol">:</a> <a id="26649" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="26654" class="Symbol">(</a><a id="26655" href="Demos.HSP.html#5497" class="Bound">ùìû</a> <a id="26657" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="26659" href="Demos.HSP.html#5499" class="Bound">ùì•</a> <a id="26661" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="26663" href="Demos.HSP.html#26149" class="Bound">Œ±</a> <a id="26665" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="26667" href="Demos.HSP.html#26169" class="Bound">œÅ·µá</a><a id="26669" class="Symbol">)</a> <a id="26671" class="Keyword">where</a>
  <a id="26679" class="Keyword">constructor</a>  <a id="26692" href="Demos.HSP.html#26692" class="InductiveConstructor">mkhom</a>
  <a id="26700" class="Keyword">field</a>        <a id="26713" href="Demos.HSP.html#26713" class="Field">compatible</a> <a id="26724" class="Symbol">:</a> <a id="26726" href="Demos.HSP.html#26356" class="Function">compatible-map</a> <a id="26741" href="Demos.HSP.html#26626" class="Bound">h</a>

 <a id="26745" href="Demos.HSP.html#26745" class="Function">hom</a> <a id="26749" class="Symbol">:</a> <a id="26751" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="26756" class="Symbol">_</a>
 <a id="26759" href="Demos.HSP.html#26745" class="Function">hom</a> <a id="26763" class="Symbol">=</a> <a id="26765" href="Agda.Builtin.Sigma.html#166" class="Record">Œ£</a> <a id="26767" class="Symbol">(</a><a id="26768" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a>¬†<a id="26771" href="Demos.HSP.html#26137" class="Bound">ùë®</a> <a id="26773" href="Demos.HSP.html#19405" class="Function Operator">]</a> <a id="26775" href="Demos.HSP.html#6679" class="Record Operator">‚ü∂</a> <a id="26777" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="26780" href="Demos.HSP.html#26155" class="Bound">ùë©</a> <a id="26782" href="Demos.HSP.html#19405" class="Function Operator">]</a><a id="26783" class="Symbol">)</a> <a id="26785" href="Demos.HSP.html#26619" class="Record">IsHom</a>

</pre>

Thus, an inhabitant of `hom ùë® ùë©` is a pair `(h , p)` consisting of a setoid function
`h`, from the domain of `ùë®` to that of `ùë©`, along with a proof `p` that `h` is a homomorphism.

A *monomorphism* (resp. *epimorphism*) is an injective (resp. surjective) homomorphism. The [agda-algebras][] 
library defines predicates and for these, as well as and for the corresponding types.

<pre class="Agda">

 <a id="27198" class="Keyword">record</a> <a id="27205" href="Demos.HSP.html#27205" class="Record">IsMon</a> <a id="27211" class="Symbol">(</a><a id="27212" href="Demos.HSP.html#27212" class="Bound">h</a> <a id="27214" class="Symbol">:</a> <a id="27216" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="27219" href="Demos.HSP.html#26137" class="Bound">ùë®</a> <a id="27221" href="Demos.HSP.html#19405" class="Function Operator">]</a> <a id="27223" href="Demos.HSP.html#6679" class="Record Operator">‚ü∂</a> <a id="27225" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="27228" href="Demos.HSP.html#26155" class="Bound">ùë©</a> <a id="27230" href="Demos.HSP.html#19405" class="Function Operator">]</a><a id="27231" class="Symbol">)</a> <a id="27233" class="Symbol">:</a> <a id="27235" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="27240" class="Symbol">(</a><a id="27241" href="Demos.HSP.html#5497" class="Bound">ùìû</a> <a id="27243" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="27245" href="Demos.HSP.html#5499" class="Bound">ùì•</a> <a id="27247" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="27249" href="Demos.HSP.html#26149" class="Bound">Œ±</a> <a id="27251" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="27253" href="Demos.HSP.html#26151" class="Bound">œÅ·µÉ</a> <a id="27256" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="27258" href="Demos.HSP.html#26169" class="Bound">œÅ·µá</a><a id="27260" class="Symbol">)</a> <a id="27262" class="Keyword">where</a>
  <a id="27270" class="Keyword">field</a>  <a id="27277" href="Demos.HSP.html#27277" class="Field">isHom</a> <a id="27283" class="Symbol">:</a> <a id="27285" href="Demos.HSP.html#26619" class="Record">IsHom</a> <a id="27291" href="Demos.HSP.html#27212" class="Bound">h</a>
         <a id="27302" href="Demos.HSP.html#27302" class="Field">isInjective</a> <a id="27314" class="Symbol">:</a> <a id="27316" href="Demos.HSP.html#12491" class="Function">IsInjective</a> <a id="27328" href="Demos.HSP.html#27212" class="Bound">h</a>
  <a id="27332" href="Demos.HSP.html#27332" class="Function">HomReduct</a> <a id="27342" class="Symbol">:</a> <a id="27344" href="Demos.HSP.html#26745" class="Function">hom</a>
  <a id="27350" href="Demos.HSP.html#27332" class="Function">HomReduct</a> <a id="27360" class="Symbol">=</a> <a id="27362" href="Demos.HSP.html#27212" class="Bound">h</a> <a id="27364" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="27366" href="Demos.HSP.html#27277" class="Field">isHom</a>

 <a id="27374" href="Demos.HSP.html#27374" class="Function">mon</a> <a id="27378" class="Symbol">:</a> <a id="27380" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="27385" class="Symbol">_</a>
 <a id="27388" href="Demos.HSP.html#27374" class="Function">mon</a> <a id="27392" class="Symbol">=</a> <a id="27394" href="Agda.Builtin.Sigma.html#166" class="Record">Œ£</a> <a id="27396" class="Symbol">(</a><a id="27397" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="27400" href="Demos.HSP.html#26137" class="Bound">ùë®</a> <a id="27402" href="Demos.HSP.html#19405" class="Function Operator">]</a> <a id="27404" href="Demos.HSP.html#6679" class="Record Operator">‚ü∂</a> <a id="27406" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="27409" href="Demos.HSP.html#26155" class="Bound">ùë©</a> <a id="27411" href="Demos.HSP.html#19405" class="Function Operator">]</a><a id="27412" class="Symbol">)</a> <a id="27414" href="Demos.HSP.html#27205" class="Record">IsMon</a>

</pre>

As with `hom`, the type `mon` is a dependent product type; each inhabitant is a pair
consisting of a setoid function, say, `h`, along with a proof that `h` is a monomorphism.

<pre class="Agda">

 <a id="27624" class="Keyword">record</a> <a id="27631" href="Demos.HSP.html#27631" class="Record">IsEpi</a> <a id="27637" class="Symbol">(</a><a id="27638" href="Demos.HSP.html#27638" class="Bound">h</a> <a id="27640" class="Symbol">:</a> <a id="27642" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="27645" href="Demos.HSP.html#26137" class="Bound">ùë®</a> <a id="27647" href="Demos.HSP.html#19405" class="Function Operator">]</a> <a id="27649" href="Demos.HSP.html#6679" class="Record Operator">‚ü∂</a> <a id="27651" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="27654" href="Demos.HSP.html#26155" class="Bound">ùë©</a> <a id="27656" href="Demos.HSP.html#19405" class="Function Operator">]</a><a id="27657" class="Symbol">)</a> <a id="27659" class="Symbol">:</a> <a id="27661" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="27666" class="Symbol">(</a><a id="27667" href="Demos.HSP.html#5497" class="Bound">ùìû</a> <a id="27669" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="27671" href="Demos.HSP.html#5499" class="Bound">ùì•</a> <a id="27673" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="27675" href="Demos.HSP.html#26149" class="Bound">Œ±</a> <a id="27677" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="27679" href="Demos.HSP.html#26167" class="Bound">Œ≤</a> <a id="27681" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="27683" href="Demos.HSP.html#26169" class="Bound">œÅ·µá</a><a id="27685" class="Symbol">)</a> <a id="27687" class="Keyword">where</a>
  <a id="27695" class="Keyword">field</a>  <a id="27702" href="Demos.HSP.html#27702" class="Field">isHom</a> <a id="27708" class="Symbol">:</a> <a id="27710" href="Demos.HSP.html#26619" class="Record">IsHom</a> <a id="27716" href="Demos.HSP.html#27638" class="Bound">h</a>
         <a id="27727" href="Demos.HSP.html#27727" class="Field">isSurjective</a> <a id="27740" class="Symbol">:</a> <a id="27742" href="Demos.HSP.html#12574" class="Function">IsSurjective</a> <a id="27755" href="Demos.HSP.html#27638" class="Bound">h</a>
  <a id="27759" href="Demos.HSP.html#27759" class="Function">HomReduct</a> <a id="27769" class="Symbol">:</a> <a id="27771" href="Demos.HSP.html#26745" class="Function">hom</a>
  <a id="27777" href="Demos.HSP.html#27759" class="Function">HomReduct</a> <a id="27787" class="Symbol">=</a> <a id="27789" href="Demos.HSP.html#27638" class="Bound">h</a> <a id="27791" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="27793" href="Demos.HSP.html#27702" class="Field">isHom</a>

 <a id="27801" href="Demos.HSP.html#27801" class="Function">epi</a> <a id="27805" class="Symbol">:</a> <a id="27807" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="27812" class="Symbol">_</a>
 <a id="27815" href="Demos.HSP.html#27801" class="Function">epi</a> <a id="27819" class="Symbol">=</a> <a id="27821" href="Agda.Builtin.Sigma.html#166" class="Record">Œ£</a> <a id="27823" class="Symbol">(</a><a id="27824" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="27827" href="Demos.HSP.html#26137" class="Bound">ùë®</a> <a id="27829" href="Demos.HSP.html#19405" class="Function Operator">]</a> <a id="27831" href="Demos.HSP.html#6679" class="Record Operator">‚ü∂</a> <a id="27833" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="27836" href="Demos.HSP.html#26155" class="Bound">ùë©</a> <a id="27838" href="Demos.HSP.html#19405" class="Function Operator">]</a><a id="27839" class="Symbol">)</a> <a id="27841" href="Demos.HSP.html#27631" class="Record">IsEpi</a>

</pre>

Here are two utilities that are useful for translating between types.

<pre class="Agda">

<a id="27945" class="Keyword">open</a> <a id="27950" href="Demos.HSP.html#26619" class="Module">IsHom</a> <a id="27956" class="Symbol">;</a> <a id="27958" class="Keyword">open</a> <a id="27963" href="Demos.HSP.html#27205" class="Module">IsMon</a> <a id="27969" class="Symbol">;</a> <a id="27971" class="Keyword">open</a> <a id="27976" href="Demos.HSP.html#27631" class="Module">IsEpi</a>
<a id="27982" class="Keyword">module</a> <a id="27989" href="Demos.HSP.html#27989" class="Module">_</a> <a id="27991" class="Symbol">(</a><a id="27992" href="Demos.HSP.html#27992" class="Bound">ùë®</a> <a id="27994" class="Symbol">:</a> <a id="27996" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="28004" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="28006" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a><a id="28008" class="Symbol">)(</a><a id="28010" href="Demos.HSP.html#28010" class="Bound">ùë©</a> <a id="28012" class="Symbol">:</a> <a id="28014" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="28022" href="Demos.HSP.html#7618" class="Generalizable">Œ≤</a> <a id="28024" href="Demos.HSP.html#7620" class="Generalizable">œÅ·µá</a><a id="28026" class="Symbol">)</a> <a id="28028" class="Keyword">where</a>
 <a id="28035" href="Demos.HSP.html#28035" class="Function">mon‚Üíintohom</a> <a id="28047" class="Symbol">:</a> <a id="28049" href="Demos.HSP.html#27374" class="Function">mon</a> <a id="28053" href="Demos.HSP.html#27992" class="Bound">ùë®</a> <a id="28055" href="Demos.HSP.html#28010" class="Bound">ùë©</a> <a id="28057" class="Symbol">‚Üí</a> <a id="28059" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="28062" href="Demos.HSP.html#28062" class="Bound">h</a> <a id="28064" href="Data.Product.html#916" class="Function">‚àà</a> <a id="28066" href="Demos.HSP.html#26745" class="Function">hom</a> <a id="28070" href="Demos.HSP.html#27992" class="Bound">ùë®</a> <a id="28072" href="Demos.HSP.html#28010" class="Bound">ùë©</a> <a id="28074" href="Data.Product.html#916" class="Function">]</a> <a id="28076" href="Demos.HSP.html#12491" class="Function">IsInjective</a> <a id="28088" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="28090" href="Demos.HSP.html#28062" class="Bound">h</a> <a id="28092" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a>
 <a id="28095" href="Demos.HSP.html#28035" class="Function">mon‚Üíintohom</a> <a id="28107" class="Symbol">(</a><a id="28108" href="Demos.HSP.html#28108" class="Bound">hh</a> <a id="28111" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="28113" href="Demos.HSP.html#28113" class="Bound">hhM</a><a id="28116" class="Symbol">)</a> <a id="28118" class="Symbol">=</a> <a id="28120" class="Symbol">(</a><a id="28121" href="Demos.HSP.html#28108" class="Bound">hh</a> <a id="28124" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="28126" href="Demos.HSP.html#27277" class="Field">isHom</a> <a id="28132" href="Demos.HSP.html#28113" class="Bound">hhM</a><a id="28135" class="Symbol">)</a> <a id="28137" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="28139" href="Demos.HSP.html#27302" class="Field">isInjective</a> <a id="28151" href="Demos.HSP.html#28113" class="Bound">hhM</a>

 <a id="28157" href="Demos.HSP.html#28157" class="Function">epi‚Üíontohom</a> <a id="28169" class="Symbol">:</a> <a id="28171" href="Demos.HSP.html#27801" class="Function">epi</a> <a id="28175" href="Demos.HSP.html#27992" class="Bound">ùë®</a> <a id="28177" href="Demos.HSP.html#28010" class="Bound">ùë©</a> <a id="28179" class="Symbol">‚Üí</a> <a id="28181" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="28184" href="Demos.HSP.html#28184" class="Bound">h</a> <a id="28186" href="Data.Product.html#916" class="Function">‚àà</a> <a id="28188" href="Demos.HSP.html#26745" class="Function">hom</a> <a id="28192" href="Demos.HSP.html#27992" class="Bound">ùë®</a> <a id="28194" href="Demos.HSP.html#28010" class="Bound">ùë©</a> <a id="28196" href="Data.Product.html#916" class="Function">]</a> <a id="28198" href="Demos.HSP.html#12574" class="Function">IsSurjective</a> <a id="28211" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="28213" href="Demos.HSP.html#28184" class="Bound">h</a> <a id="28215" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a>
 <a id="28218" href="Demos.HSP.html#28157" class="Function">epi‚Üíontohom</a> <a id="28230" class="Symbol">(</a><a id="28231" href="Demos.HSP.html#28231" class="Bound">hh</a> <a id="28234" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="28236" href="Demos.HSP.html#28236" class="Bound">hhE</a><a id="28239" class="Symbol">)</a> <a id="28241" class="Symbol">=</a> <a id="28243" class="Symbol">(</a><a id="28244" href="Demos.HSP.html#28231" class="Bound">hh</a> <a id="28247" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="28249" href="Demos.HSP.html#27702" class="Field">isHom</a> <a id="28255" href="Demos.HSP.html#28236" class="Bound">hhE</a><a id="28258" class="Symbol">)</a> <a id="28260" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="28262" href="Demos.HSP.html#27727" class="Field">isSurjective</a> <a id="28275" href="Demos.HSP.html#28236" class="Bound">hhE</a>
</pre>

#### Composition of homomorphisms {#composition-of-homomorphisms .unnumbered}

The composition of homomorphisms is again a homomorphism, and similarly
for epimorphisms and monomorphisms. The proofs of these facts are
straightforward.

<pre class="Agda">

<a id="28540" class="Keyword">module</a> <a id="28547" href="Demos.HSP.html#28547" class="Module">_</a>  <a id="28550" class="Symbol">{</a><a id="28551" href="Demos.HSP.html#28551" class="Bound">ùë®</a> <a id="28553" class="Symbol">:</a> <a id="28555" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="28563" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="28565" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a><a id="28567" class="Symbol">}</a> <a id="28569" class="Symbol">{</a><a id="28570" href="Demos.HSP.html#28570" class="Bound">ùë©</a> <a id="28572" class="Symbol">:</a> <a id="28574" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="28582" href="Demos.HSP.html#7618" class="Generalizable">Œ≤</a> <a id="28584" href="Demos.HSP.html#7620" class="Generalizable">œÅ·µá</a><a id="28586" class="Symbol">}</a> <a id="28588" class="Symbol">{</a><a id="28589" href="Demos.HSP.html#28589" class="Bound">ùë™</a> <a id="28591" class="Symbol">:</a> <a id="28593" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="28601" href="Demos.HSP.html#7623" class="Generalizable">Œ≥</a> <a id="28603" href="Demos.HSP.html#7625" class="Generalizable">œÅ·∂ú</a><a id="28605" class="Symbol">}</a>
          <a id="28617" class="Symbol">{</a><a id="28618" href="Demos.HSP.html#28618" class="Bound">g</a> <a id="28620" class="Symbol">:</a> <a id="28622" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="28625" href="Demos.HSP.html#28551" class="Bound">ùë®</a> <a id="28627" href="Demos.HSP.html#19405" class="Function Operator">]</a> <a id="28629" href="Demos.HSP.html#6679" class="Record Operator">‚ü∂</a> <a id="28631" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="28634" href="Demos.HSP.html#28570" class="Bound">ùë©</a> <a id="28636" href="Demos.HSP.html#19405" class="Function Operator">]</a><a id="28637" class="Symbol">}{</a><a id="28639" href="Demos.HSP.html#28639" class="Bound">h</a> <a id="28641" class="Symbol">:</a> <a id="28643" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="28646" href="Demos.HSP.html#28570" class="Bound">ùë©</a> <a id="28648" href="Demos.HSP.html#19405" class="Function Operator">]</a> <a id="28650" href="Demos.HSP.html#6679" class="Record Operator">‚ü∂</a> <a id="28652" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="28655" href="Demos.HSP.html#28589" class="Bound">ùë™</a> <a id="28657" href="Demos.HSP.html#19405" class="Function Operator">]</a><a id="28658" class="Symbol">}</a> <a id="28660" class="Keyword">where</a>
  <a id="28668" class="Keyword">open</a> <a id="28673" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="28680" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="28683" href="Demos.HSP.html#28589" class="Bound">ùë™</a> <a id="28685" href="Demos.HSP.html#19405" class="Function Operator">]</a> <a id="28687" class="Keyword">using</a> <a id="28693" class="Symbol">(</a> <a id="28695" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="28701" class="Symbol">)</a>
  <a id="28705" href="Demos.HSP.html#28705" class="Function">‚àò-is-hom</a> <a id="28714" class="Symbol">:</a> <a id="28716" href="Demos.HSP.html#26619" class="Record">IsHom</a> <a id="28722" href="Demos.HSP.html#28551" class="Bound">ùë®</a> <a id="28724" href="Demos.HSP.html#28570" class="Bound">ùë©</a> <a id="28726" href="Demos.HSP.html#28618" class="Bound">g</a> <a id="28728" class="Symbol">‚Üí</a> <a id="28730" href="Demos.HSP.html#26619" class="Record">IsHom</a> <a id="28736" href="Demos.HSP.html#28570" class="Bound">ùë©</a> <a id="28738" href="Demos.HSP.html#28589" class="Bound">ùë™</a> <a id="28740" href="Demos.HSP.html#28639" class="Bound">h</a> <a id="28742" class="Symbol">‚Üí</a> <a id="28744" href="Demos.HSP.html#26619" class="Record">IsHom</a> <a id="28750" href="Demos.HSP.html#28551" class="Bound">ùë®</a> <a id="28752" href="Demos.HSP.html#28589" class="Bound">ùë™</a> <a id="28754" class="Symbol">(</a><a id="28755" href="Demos.HSP.html#28639" class="Bound">h</a> <a id="28757" href="Demos.HSP.html#10262" class="Function Operator">‚ü®‚àò‚ü©</a> <a id="28761" href="Demos.HSP.html#28618" class="Bound">g</a><a id="28762" class="Symbol">)</a>
  <a id="28766" href="Demos.HSP.html#28705" class="Function">‚àò-is-hom</a> <a id="28775" href="Demos.HSP.html#28775" class="Bound">ghom</a> <a id="28780" href="Demos.HSP.html#28780" class="Bound">hhom</a> <a id="28785" class="Symbol">=</a> <a id="28787" href="Demos.HSP.html#26692" class="InductiveConstructor">mkhom</a> <a id="28793" href="Demos.HSP.html#28804" class="Function">c</a> <a id="28795" class="Keyword">where</a>
   <a id="28804" href="Demos.HSP.html#28804" class="Function">c</a> <a id="28806" class="Symbol">:</a> <a id="28808" href="Demos.HSP.html#26356" class="Function">compatible-map</a> <a id="28823" href="Demos.HSP.html#28551" class="Bound">ùë®</a> <a id="28825" href="Demos.HSP.html#28589" class="Bound">ùë™</a> <a id="28827" class="Symbol">(</a><a id="28828" href="Demos.HSP.html#28639" class="Bound">h</a> <a id="28830" href="Demos.HSP.html#10262" class="Function Operator">‚ü®‚àò‚ü©</a> <a id="28834" href="Demos.HSP.html#28618" class="Bound">g</a><a id="28835" class="Symbol">)</a>
   <a id="28840" href="Demos.HSP.html#28804" class="Function">c</a> <a id="28842" class="Symbol">=</a> <a id="28844" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="28850" class="Symbol">(</a><a id="28851" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="28856" href="Demos.HSP.html#28639" class="Bound">h</a> <a id="28858" class="Symbol">(</a><a id="28859" href="Demos.HSP.html#26713" class="Field">compatible</a> <a id="28870" href="Demos.HSP.html#28775" class="Bound">ghom</a><a id="28874" class="Symbol">))</a> <a id="28877" class="Symbol">(</a><a id="28878" href="Demos.HSP.html#26713" class="Field">compatible</a> <a id="28889" href="Demos.HSP.html#28780" class="Bound">hhom</a><a id="28893" class="Symbol">)</a>

  <a id="28898" href="Demos.HSP.html#28898" class="Function">‚àò-is-epi</a> <a id="28907" class="Symbol">:</a> <a id="28909" href="Demos.HSP.html#27631" class="Record">IsEpi</a> <a id="28915" href="Demos.HSP.html#28551" class="Bound">ùë®</a> <a id="28917" href="Demos.HSP.html#28570" class="Bound">ùë©</a> <a id="28919" href="Demos.HSP.html#28618" class="Bound">g</a> <a id="28921" class="Symbol">‚Üí</a> <a id="28923" href="Demos.HSP.html#27631" class="Record">IsEpi</a> <a id="28929" href="Demos.HSP.html#28570" class="Bound">ùë©</a> <a id="28931" href="Demos.HSP.html#28589" class="Bound">ùë™</a> <a id="28933" href="Demos.HSP.html#28639" class="Bound">h</a> <a id="28935" class="Symbol">‚Üí</a> <a id="28937" href="Demos.HSP.html#27631" class="Record">IsEpi</a> <a id="28943" href="Demos.HSP.html#28551" class="Bound">ùë®</a> <a id="28945" href="Demos.HSP.html#28589" class="Bound">ùë™</a> <a id="28947" class="Symbol">(</a><a id="28948" href="Demos.HSP.html#28639" class="Bound">h</a> <a id="28950" href="Demos.HSP.html#10262" class="Function Operator">‚ü®‚àò‚ü©</a> <a id="28954" href="Demos.HSP.html#28618" class="Bound">g</a><a id="28955" class="Symbol">)</a>
  <a id="28959" href="Demos.HSP.html#28898" class="Function">‚àò-is-epi</a> <a id="28968" href="Demos.HSP.html#28968" class="Bound">gE</a> <a id="28971" href="Demos.HSP.html#28971" class="Bound">hE</a> <a id="28974" class="Symbol">=</a> <a id="28976" class="Keyword">record</a>  <a id="28984" class="Symbol">{</a> <a id="28986" href="Demos.HSP.html#27702" class="Field">isHom</a> <a id="28992" class="Symbol">=</a> <a id="28994" href="Demos.HSP.html#28705" class="Function">‚àò-is-hom</a> <a id="29003" class="Symbol">(</a><a id="29004" href="Demos.HSP.html#27702" class="Field">isHom</a> <a id="29010" href="Demos.HSP.html#28968" class="Bound">gE</a><a id="29012" class="Symbol">)</a> <a id="29014" class="Symbol">(</a><a id="29015" href="Demos.HSP.html#27702" class="Field">isHom</a> <a id="29021" href="Demos.HSP.html#28971" class="Bound">hE</a><a id="29023" class="Symbol">)</a>
                           <a id="29052" class="Symbol">;</a> <a id="29054" href="Demos.HSP.html#27727" class="Field">isSurjective</a> <a id="29067" class="Symbol">=</a> <a id="29069" href="Demos.HSP.html#13243" class="Function">‚àò-IsSurjective</a> <a id="29084" href="Demos.HSP.html#28618" class="Bound">g</a> <a id="29086" href="Demos.HSP.html#28639" class="Bound">h</a> <a id="29088" class="Symbol">(</a><a id="29089" href="Demos.HSP.html#27727" class="Field">isSurjective</a> <a id="29102" href="Demos.HSP.html#28968" class="Bound">gE</a><a id="29104" class="Symbol">)</a> <a id="29106" class="Symbol">(</a><a id="29107" href="Demos.HSP.html#27727" class="Field">isSurjective</a> <a id="29120" href="Demos.HSP.html#28971" class="Bound">hE</a><a id="29122" class="Symbol">)</a> <a id="29124" class="Symbol">}</a>

<a id="29127" class="Keyword">module</a> <a id="29134" href="Demos.HSP.html#29134" class="Module">_</a> <a id="29136" class="Symbol">{</a><a id="29137" href="Demos.HSP.html#29137" class="Bound">ùë®</a> <a id="29139" class="Symbol">:</a> <a id="29141" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="29149" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="29151" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a><a id="29153" class="Symbol">}</a> <a id="29155" class="Symbol">{</a><a id="29156" href="Demos.HSP.html#29156" class="Bound">ùë©</a> <a id="29158" class="Symbol">:</a> <a id="29160" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="29168" href="Demos.HSP.html#7618" class="Generalizable">Œ≤</a> <a id="29170" href="Demos.HSP.html#7620" class="Generalizable">œÅ·µá</a><a id="29172" class="Symbol">}</a> <a id="29174" class="Symbol">{</a><a id="29175" href="Demos.HSP.html#29175" class="Bound">ùë™</a> <a id="29177" class="Symbol">:</a> <a id="29179" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="29187" href="Demos.HSP.html#7623" class="Generalizable">Œ≥</a> <a id="29189" href="Demos.HSP.html#7625" class="Generalizable">œÅ·∂ú</a><a id="29191" class="Symbol">}</a> <a id="29193" class="Keyword">where</a>
  <a id="29201" href="Demos.HSP.html#29201" class="Function">‚àò-hom</a> <a id="29207" class="Symbol">:</a> <a id="29209" href="Demos.HSP.html#26745" class="Function">hom</a> <a id="29213" href="Demos.HSP.html#29137" class="Bound">ùë®</a> <a id="29215" href="Demos.HSP.html#29156" class="Bound">ùë©</a> <a id="29217" class="Symbol">‚Üí</a> <a id="29219" href="Demos.HSP.html#26745" class="Function">hom</a> <a id="29223" href="Demos.HSP.html#29156" class="Bound">ùë©</a> <a id="29225" href="Demos.HSP.html#29175" class="Bound">ùë™</a>  <a id="29228" class="Symbol">‚Üí</a> <a id="29230" href="Demos.HSP.html#26745" class="Function">hom</a> <a id="29234" href="Demos.HSP.html#29137" class="Bound">ùë®</a> <a id="29236" href="Demos.HSP.html#29175" class="Bound">ùë™</a>
  <a id="29240" href="Demos.HSP.html#29201" class="Function">‚àò-hom</a> <a id="29246" class="Symbol">(</a><a id="29247" href="Demos.HSP.html#29247" class="Bound">h</a> <a id="29249" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="29251" href="Demos.HSP.html#29251" class="Bound">hhom</a><a id="29255" class="Symbol">)</a> <a id="29257" class="Symbol">(</a><a id="29258" href="Demos.HSP.html#29258" class="Bound">g</a> <a id="29260" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="29262" href="Demos.HSP.html#29262" class="Bound">ghom</a><a id="29266" class="Symbol">)</a> <a id="29268" class="Symbol">=</a> <a id="29270" class="Symbol">(</a><a id="29271" href="Demos.HSP.html#29258" class="Bound">g</a> <a id="29273" href="Demos.HSP.html#10262" class="Function Operator">‚ü®‚àò‚ü©</a> <a id="29277" href="Demos.HSP.html#29247" class="Bound">h</a><a id="29278" class="Symbol">)</a> <a id="29280" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="29282" href="Demos.HSP.html#28705" class="Function">‚àò-is-hom</a> <a id="29291" href="Demos.HSP.html#29251" class="Bound">hhom</a> <a id="29296" href="Demos.HSP.html#29262" class="Bound">ghom</a>

  <a id="29304" href="Demos.HSP.html#29304" class="Function">‚àò-epi</a> <a id="29310" class="Symbol">:</a> <a id="29312" href="Demos.HSP.html#27801" class="Function">epi</a> <a id="29316" href="Demos.HSP.html#29137" class="Bound">ùë®</a> <a id="29318" href="Demos.HSP.html#29156" class="Bound">ùë©</a> <a id="29320" class="Symbol">‚Üí</a> <a id="29322" href="Demos.HSP.html#27801" class="Function">epi</a> <a id="29326" href="Demos.HSP.html#29156" class="Bound">ùë©</a> <a id="29328" href="Demos.HSP.html#29175" class="Bound">ùë™</a>  <a id="29331" class="Symbol">‚Üí</a> <a id="29333" href="Demos.HSP.html#27801" class="Function">epi</a> <a id="29337" href="Demos.HSP.html#29137" class="Bound">ùë®</a> <a id="29339" href="Demos.HSP.html#29175" class="Bound">ùë™</a>
  <a id="29343" href="Demos.HSP.html#29304" class="Function">‚àò-epi</a> <a id="29349" class="Symbol">(</a><a id="29350" href="Demos.HSP.html#29350" class="Bound">h</a> <a id="29352" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="29354" href="Demos.HSP.html#29354" class="Bound">hepi</a><a id="29358" class="Symbol">)</a> <a id="29360" class="Symbol">(</a><a id="29361" href="Demos.HSP.html#29361" class="Bound">g</a> <a id="29363" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="29365" href="Demos.HSP.html#29365" class="Bound">gepi</a><a id="29369" class="Symbol">)</a> <a id="29371" class="Symbol">=</a> <a id="29373" class="Symbol">(</a><a id="29374" href="Demos.HSP.html#29361" class="Bound">g</a> <a id="29376" href="Demos.HSP.html#10262" class="Function Operator">‚ü®‚àò‚ü©</a> <a id="29380" href="Demos.HSP.html#29350" class="Bound">h</a><a id="29381" class="Symbol">)</a> <a id="29383" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="29385" href="Demos.HSP.html#28898" class="Function">‚àò-is-epi</a> <a id="29394" href="Demos.HSP.html#29354" class="Bound">hepi</a> <a id="29399" href="Demos.HSP.html#29365" class="Bound">gepi</a>
</pre>

#### Universe lifting of homomorphisms {#universe-lifting-of-homomorphisms .unnumbered}

Here we define the identity homomorphism for setoid algebras. Then we prove that the operations of lifting and lowering of a setoid algebra are homomorphisms.

<pre class="Agda">

<a id="ùíæùíπ"></a><a id="29679" href="Demos.HSP.html#29679" class="Function">ùíæùíπ</a> <a id="29682" class="Symbol">:</a> <a id="29684" class="Symbol">{</a><a id="29685" href="Demos.HSP.html#29685" class="Bound">ùë®</a> <a id="29687" class="Symbol">:</a> <a id="29689" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="29697" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="29699" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a><a id="29701" class="Symbol">}</a> <a id="29703" class="Symbol">‚Üí</a> <a id="29705" href="Demos.HSP.html#26745" class="Function">hom</a> <a id="29709" href="Demos.HSP.html#29685" class="Bound">ùë®</a> <a id="29711" href="Demos.HSP.html#29685" class="Bound">ùë®</a>
<a id="29713" href="Demos.HSP.html#29679" class="Function">ùíæùíπ</a> <a id="29716" class="Symbol">{</a><a id="29717" class="Argument">ùë®</a> <a id="29719" class="Symbol">=</a> <a id="29721" href="Demos.HSP.html#29721" class="Bound">ùë®</a><a id="29722" class="Symbol">}</a> <a id="29724" class="Symbol">=</a> <a id="29726" href="Demos.HSP.html#10191" class="Function">ùëñùëë</a> <a id="29729" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="29731" href="Demos.HSP.html#26692" class="InductiveConstructor">mkhom</a> <a id="29737" class="Symbol">(</a><a id="29738" href="Relation.Binary.Structures.html#1646" class="Function">reflexive</a> <a id="29748" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a><a id="29754" class="Symbol">)</a> <a id="29756" class="Keyword">where</a> <a id="29762" class="Keyword">open</a> <a id="29767" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="29774" class="Symbol">(</a> <a id="29776" href="Demos.HSP.html#18816" class="Field">Domain</a> <a id="29783" href="Demos.HSP.html#29721" class="Bound">ùë®</a> <a id="29785" class="Symbol">)</a> <a id="29787" class="Keyword">using</a> <a id="29793" class="Symbol">(</a> <a id="29795" href="Relation.Binary.Structures.html#1646" class="Function">reflexive</a> <a id="29805" class="Symbol">)</a>

<a id="29808" class="Keyword">module</a> <a id="29815" href="Demos.HSP.html#29815" class="Module">_</a> <a id="29817" class="Symbol">{</a><a id="29818" href="Demos.HSP.html#29818" class="Bound">ùë®</a> <a id="29820" class="Symbol">:</a> <a id="29822" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="29830" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="29832" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a><a id="29834" class="Symbol">}{</a><a id="29836" href="Demos.HSP.html#29836" class="Bound">‚Ñì</a> <a id="29838" class="Symbol">:</a> <a id="29840" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="29845" class="Symbol">}</a> <a id="29847" class="Keyword">where</a>
 <a id="29854" class="Keyword">open</a> <a id="29859" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="29866" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="29869" href="Demos.HSP.html#29818" class="Bound">ùë®</a> <a id="29871" href="Demos.HSP.html#19405" class="Function Operator">]</a>              <a id="29886" class="Keyword">using</a> <a id="29892" class="Symbol">(</a> <a id="29894" href="Relation.Binary.Structures.html#1646" class="Function">reflexive</a> <a id="29904" class="Symbol">)</a>  <a id="29907" class="Keyword">renaming</a> <a id="29916" class="Symbol">(</a> <a id="29918" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="29922" class="Symbol">to</a> <a id="29925" class="Field Operator">_‚âà‚ÇÅ_</a> <a id="29930" class="Symbol">;</a> <a id="29932" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="29937" class="Symbol">to</a> <a id="29940" class="Function">refl‚ÇÅ</a> <a id="29946" class="Symbol">)</a>
 <a id="29949" class="Keyword">open</a> <a id="29954" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="29961" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="29964" href="Demos.HSP.html#21627" class="Function">Lift-AlgÀ°</a> <a id="29974" href="Demos.HSP.html#29818" class="Bound">ùë®</a> <a id="29976" href="Demos.HSP.html#29836" class="Bound">‚Ñì</a> <a id="29978" href="Demos.HSP.html#19405" class="Function Operator">]</a>  <a id="29981" class="Keyword">using</a> <a id="29987" class="Symbol">()</a>             <a id="30002" class="Keyword">renaming</a> <a id="30011" class="Symbol">(</a> <a id="30013" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="30017" class="Symbol">to</a> <a id="30020" class="Field Operator">_‚âàÀ°_</a> <a id="30025" class="Symbol">;</a> <a id="30027" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="30032" class="Symbol">to</a> <a id="30035" class="Function">reflÀ°</a><a id="30040" class="Symbol">)</a>
 <a id="30043" class="Keyword">open</a> <a id="30048" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="30055" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="30058" href="Demos.HSP.html#22022" class="Function">Lift-Alg ≥</a> <a id="30068" href="Demos.HSP.html#29818" class="Bound">ùë®</a> <a id="30070" href="Demos.HSP.html#29836" class="Bound">‚Ñì</a> <a id="30072" href="Demos.HSP.html#19405" class="Function Operator">]</a>  <a id="30075" class="Keyword">using</a> <a id="30081" class="Symbol">()</a>             <a id="30096" class="Keyword">renaming</a> <a id="30105" class="Symbol">(</a> <a id="30107" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="30111" class="Symbol">to</a> <a id="30114" class="Field Operator">_‚âà ≥_</a> <a id="30119" class="Symbol">;</a> <a id="30121" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="30126" class="Symbol">to</a> <a id="30129" class="Function">refl ≥</a><a id="30134" class="Symbol">)</a>
 <a id="30137" class="Keyword">open</a> <a id="30142" href="Level.html" class="Module">Level</a>

 <a id="30150" href="Demos.HSP.html#30150" class="Function">ToLiftÀ°</a> <a id="30158" class="Symbol">:</a> <a id="30160" href="Demos.HSP.html#26745" class="Function">hom</a> <a id="30164" href="Demos.HSP.html#29818" class="Bound">ùë®</a> <a id="30166" class="Symbol">(</a><a id="30167" href="Demos.HSP.html#21627" class="Function">Lift-AlgÀ°</a> <a id="30177" href="Demos.HSP.html#29818" class="Bound">ùë®</a> <a id="30179" href="Demos.HSP.html#29836" class="Bound">‚Ñì</a><a id="30180" class="Symbol">)</a>
 <a id="30183" href="Demos.HSP.html#30150" class="Function">ToLiftÀ°</a> <a id="30191" class="Symbol">=</a> <a id="30193" class="Keyword">record</a> <a id="30200" class="Symbol">{</a> <a id="30202" href="Function.Bundles.html#1919" class="Field">f</a> <a id="30204" class="Symbol">=</a> <a id="30206" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="30211" class="Symbol">;</a> <a id="30213" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="30218" class="Symbol">=</a> <a id="30220" href="Function.Base.html#615" class="Function">id</a> <a id="30223" class="Symbol">}</a> <a id="30225" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="30227" href="Demos.HSP.html#26692" class="InductiveConstructor">mkhom</a> <a id="30233" class="Symbol">(</a><a id="30234" href="Relation.Binary.Structures.html#1646" class="Function">reflexive</a> <a id="30244" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a><a id="30250" class="Symbol">)</a>

 <a id="30254" href="Demos.HSP.html#30254" class="Function">FromLiftÀ°</a> <a id="30264" class="Symbol">:</a> <a id="30266" href="Demos.HSP.html#26745" class="Function">hom</a> <a id="30270" class="Symbol">(</a><a id="30271" href="Demos.HSP.html#21627" class="Function">Lift-AlgÀ°</a> <a id="30281" href="Demos.HSP.html#29818" class="Bound">ùë®</a> <a id="30283" href="Demos.HSP.html#29836" class="Bound">‚Ñì</a><a id="30284" class="Symbol">)</a> <a id="30286" href="Demos.HSP.html#29818" class="Bound">ùë®</a>
 <a id="30289" href="Demos.HSP.html#30254" class="Function">FromLiftÀ°</a> <a id="30299" class="Symbol">=</a> <a id="30301" class="Keyword">record</a> <a id="30308" class="Symbol">{</a> <a id="30310" href="Function.Bundles.html#1919" class="Field">f</a> <a id="30312" class="Symbol">=</a> <a id="30314" href="Level.html#470" class="Field">lower</a> <a id="30320" class="Symbol">;</a> <a id="30322" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="30327" class="Symbol">=</a> <a id="30329" href="Function.Base.html#615" class="Function">id</a> <a id="30332" class="Symbol">}</a> <a id="30334" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="30336" href="Demos.HSP.html#26692" class="InductiveConstructor">mkhom</a> <a id="30342" href="Demos.HSP.html#30035" class="Function">reflÀ°</a>

 <a id="30350" href="Demos.HSP.html#30350" class="Function">ToFromLiftÀ°</a> <a id="30362" class="Symbol">:</a> <a id="30364" class="Symbol">‚àÄ</a> <a id="30366" href="Demos.HSP.html#30366" class="Bound">b</a> <a id="30368" class="Symbol">‚Üí</a>  <a id="30371" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="30373" href="Demos.HSP.html#30150" class="Function">ToLiftÀ°</a> <a id="30381" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="30383" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="30387" class="Symbol">(</a><a id="30388" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="30390" href="Demos.HSP.html#30254" class="Function">FromLiftÀ°</a> <a id="30400" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="30402" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="30406" href="Demos.HSP.html#30366" class="Bound">b</a><a id="30407" class="Symbol">)</a> <a id="30409" href="Demos.HSP.html#30020" class="Function Operator">‚âàÀ°</a> <a id="30412" href="Demos.HSP.html#30366" class="Bound">b</a>
 <a id="30415" href="Demos.HSP.html#30350" class="Function">ToFromLiftÀ°</a> <a id="30427" href="Demos.HSP.html#30427" class="Bound">b</a> <a id="30429" class="Symbol">=</a> <a id="30431" href="Demos.HSP.html#29940" class="Function">refl‚ÇÅ</a>

 <a id="30439" href="Demos.HSP.html#30439" class="Function">FromToLiftÀ°</a> <a id="30451" class="Symbol">:</a> <a id="30453" class="Symbol">‚àÄ</a> <a id="30455" href="Demos.HSP.html#30455" class="Bound">a</a> <a id="30457" class="Symbol">‚Üí</a> <a id="30459" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="30461" href="Demos.HSP.html#30254" class="Function">FromLiftÀ°</a> <a id="30471" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="30473" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="30477" class="Symbol">(</a><a id="30478" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="30480" href="Demos.HSP.html#30150" class="Function">ToLiftÀ°</a> <a id="30488" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="30490" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="30494" href="Demos.HSP.html#30455" class="Bound">a</a><a id="30495" class="Symbol">)</a> <a id="30497" href="Demos.HSP.html#29925" class="Function Operator">‚âà‚ÇÅ</a> <a id="30500" href="Demos.HSP.html#30455" class="Bound">a</a>
 <a id="30503" href="Demos.HSP.html#30439" class="Function">FromToLiftÀ°</a> <a id="30515" href="Demos.HSP.html#30515" class="Bound">a</a> <a id="30517" class="Symbol">=</a> <a id="30519" href="Demos.HSP.html#29940" class="Function">refl‚ÇÅ</a>

 <a id="30527" href="Demos.HSP.html#30527" class="Function">ToLift ≥</a> <a id="30535" class="Symbol">:</a> <a id="30537" href="Demos.HSP.html#26745" class="Function">hom</a> <a id="30541" href="Demos.HSP.html#29818" class="Bound">ùë®</a> <a id="30543" class="Symbol">(</a><a id="30544" href="Demos.HSP.html#22022" class="Function">Lift-Alg ≥</a> <a id="30554" href="Demos.HSP.html#29818" class="Bound">ùë®</a> <a id="30556" href="Demos.HSP.html#29836" class="Bound">‚Ñì</a><a id="30557" class="Symbol">)</a>
 <a id="30560" href="Demos.HSP.html#30527" class="Function">ToLift ≥</a> <a id="30568" class="Symbol">=</a> <a id="30570" class="Keyword">record</a> <a id="30577" class="Symbol">{</a> <a id="30579" href="Function.Bundles.html#1919" class="Field">f</a> <a id="30581" class="Symbol">=</a> <a id="30583" href="Function.Base.html#615" class="Function">id</a> <a id="30586" class="Symbol">;</a> <a id="30588" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="30593" class="Symbol">=</a> <a id="30595" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="30600" class="Symbol">}</a> <a id="30602" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="30604" href="Demos.HSP.html#26692" class="InductiveConstructor">mkhom</a> <a id="30610" class="Symbol">(</a><a id="30611" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="30616" class="Symbol">(</a><a id="30617" href="Relation.Binary.Structures.html#1646" class="Function">reflexive</a> <a id="30627" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a><a id="30633" class="Symbol">))</a>

 <a id="30638" href="Demos.HSP.html#30638" class="Function">FromLift ≥</a> <a id="30648" class="Symbol">:</a> <a id="30650" href="Demos.HSP.html#26745" class="Function">hom</a> <a id="30654" class="Symbol">(</a><a id="30655" href="Demos.HSP.html#22022" class="Function">Lift-Alg ≥</a> <a id="30665" href="Demos.HSP.html#29818" class="Bound">ùë®</a> <a id="30667" href="Demos.HSP.html#29836" class="Bound">‚Ñì</a><a id="30668" class="Symbol">)</a> <a id="30670" href="Demos.HSP.html#29818" class="Bound">ùë®</a>
 <a id="30673" href="Demos.HSP.html#30638" class="Function">FromLift ≥</a> <a id="30683" class="Symbol">=</a> <a id="30685" class="Keyword">record</a> <a id="30692" class="Symbol">{</a> <a id="30694" href="Function.Bundles.html#1919" class="Field">f</a> <a id="30696" class="Symbol">=</a> <a id="30698" href="Function.Base.html#615" class="Function">id</a> <a id="30701" class="Symbol">;</a> <a id="30703" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="30708" class="Symbol">=</a> <a id="30710" href="Level.html#470" class="Field">lower</a> <a id="30716" class="Symbol">}</a> <a id="30718" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="30720" href="Demos.HSP.html#26692" class="InductiveConstructor">mkhom</a> <a id="30726" href="Demos.HSP.html#30035" class="Function">reflÀ°</a>

 <a id="30734" href="Demos.HSP.html#30734" class="Function">ToFromLift ≥</a> <a id="30746" class="Symbol">:</a> <a id="30748" class="Symbol">‚àÄ</a> <a id="30750" href="Demos.HSP.html#30750" class="Bound">b</a> <a id="30752" class="Symbol">‚Üí</a> <a id="30754" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="30756" href="Demos.HSP.html#30527" class="Function">ToLift ≥</a> <a id="30764" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="30766" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="30770" class="Symbol">(</a><a id="30771" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="30773" href="Demos.HSP.html#30638" class="Function">FromLift ≥</a> <a id="30783" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="30785" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="30789" href="Demos.HSP.html#30750" class="Bound">b</a><a id="30790" class="Symbol">)</a> <a id="30792" href="Demos.HSP.html#30114" class="Function Operator">‚âà ≥</a> <a id="30795" href="Demos.HSP.html#30750" class="Bound">b</a>
 <a id="30798" href="Demos.HSP.html#30734" class="Function">ToFromLift ≥</a> <a id="30810" href="Demos.HSP.html#30810" class="Bound">b</a> <a id="30812" class="Symbol">=</a> <a id="30814" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="30819" href="Demos.HSP.html#29940" class="Function">refl‚ÇÅ</a>

 <a id="30827" href="Demos.HSP.html#30827" class="Function">FromToLift ≥</a> <a id="30839" class="Symbol">:</a> <a id="30841" class="Symbol">‚àÄ</a> <a id="30843" href="Demos.HSP.html#30843" class="Bound">a</a> <a id="30845" class="Symbol">‚Üí</a> <a id="30847" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="30849" href="Demos.HSP.html#30638" class="Function">FromLift ≥</a> <a id="30859" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="30861" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="30865" class="Symbol">(</a><a id="30866" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="30868" href="Demos.HSP.html#30527" class="Function">ToLift ≥</a> <a id="30876" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="30878" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="30882" href="Demos.HSP.html#30843" class="Bound">a</a><a id="30883" class="Symbol">)</a> <a id="30885" href="Demos.HSP.html#29925" class="Function Operator">‚âà‚ÇÅ</a> <a id="30888" href="Demos.HSP.html#30843" class="Bound">a</a>
 <a id="30891" href="Demos.HSP.html#30827" class="Function">FromToLift ≥</a> <a id="30903" href="Demos.HSP.html#30903" class="Bound">a</a> <a id="30905" class="Symbol">=</a> <a id="30907" href="Demos.HSP.html#29940" class="Function">refl‚ÇÅ</a>


<a id="30915" class="Keyword">module</a> <a id="30922" href="Demos.HSP.html#30922" class="Module">_</a> <a id="30924" class="Symbol">{</a><a id="30925" href="Demos.HSP.html#30925" class="Bound">ùë®</a> <a id="30927" class="Symbol">:</a> <a id="30929" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="30937" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="30939" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a><a id="30941" class="Symbol">}{</a><a id="30943" href="Demos.HSP.html#30943" class="Bound">‚Ñì</a> <a id="30945" href="Demos.HSP.html#30945" class="Bound">r</a> <a id="30947" class="Symbol">:</a> <a id="30949" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="30954" class="Symbol">}</a> <a id="30956" class="Keyword">where</a>
 <a id="30963" class="Keyword">open</a>  <a id="30969" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="30976" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="30979" href="Demos.HSP.html#30925" class="Bound">ùë®</a> <a id="30981" href="Demos.HSP.html#19405" class="Function Operator">]</a>               <a id="30997" class="Keyword">using</a> <a id="31003" class="Symbol">(</a> <a id="31005" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="31010" class="Symbol">)</a>
 <a id="31013" class="Keyword">open</a>  <a id="31019" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="31026" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="31029" href="Demos.HSP.html#22539" class="Function">Lift-Alg</a> <a id="31038" href="Demos.HSP.html#30925" class="Bound">ùë®</a> <a id="31040" href="Demos.HSP.html#30943" class="Bound">‚Ñì</a> <a id="31042" href="Demos.HSP.html#30945" class="Bound">r</a> <a id="31044" href="Demos.HSP.html#19405" class="Function Operator">]</a>  <a id="31047" class="Keyword">using</a> <a id="31053" class="Symbol">(</a> <a id="31055" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="31059" class="Symbol">)</a>
 <a id="31062" class="Keyword">open</a>  <a id="31068" href="Level.html" class="Module">Level</a>
 <a id="31075" href="Demos.HSP.html#31075" class="Function">ToLift</a> <a id="31082" class="Symbol">:</a> <a id="31084" href="Demos.HSP.html#26745" class="Function">hom</a> <a id="31088" href="Demos.HSP.html#30925" class="Bound">ùë®</a> <a id="31090" class="Symbol">(</a><a id="31091" href="Demos.HSP.html#22539" class="Function">Lift-Alg</a> <a id="31100" href="Demos.HSP.html#30925" class="Bound">ùë®</a> <a id="31102" href="Demos.HSP.html#30943" class="Bound">‚Ñì</a> <a id="31104" href="Demos.HSP.html#30945" class="Bound">r</a><a id="31105" class="Symbol">)</a>
 <a id="31108" href="Demos.HSP.html#31075" class="Function">ToLift</a> <a id="31115" class="Symbol">=</a> <a id="31117" href="Demos.HSP.html#29201" class="Function">‚àò-hom</a> <a id="31123" href="Demos.HSP.html#30150" class="Function">ToLiftÀ°</a> <a id="31131" href="Demos.HSP.html#30527" class="Function">ToLift ≥</a>

 <a id="31141" href="Demos.HSP.html#31141" class="Function">FromLift</a> <a id="31150" class="Symbol">:</a> <a id="31152" href="Demos.HSP.html#26745" class="Function">hom</a> <a id="31156" class="Symbol">(</a><a id="31157" href="Demos.HSP.html#22539" class="Function">Lift-Alg</a> <a id="31166" href="Demos.HSP.html#30925" class="Bound">ùë®</a> <a id="31168" href="Demos.HSP.html#30943" class="Bound">‚Ñì</a> <a id="31170" href="Demos.HSP.html#30945" class="Bound">r</a><a id="31171" class="Symbol">)</a> <a id="31173" href="Demos.HSP.html#30925" class="Bound">ùë®</a>
 <a id="31176" href="Demos.HSP.html#31141" class="Function">FromLift</a> <a id="31185" class="Symbol">=</a> <a id="31187" href="Demos.HSP.html#29201" class="Function">‚àò-hom</a> <a id="31193" href="Demos.HSP.html#30638" class="Function">FromLift ≥</a> <a id="31203" href="Demos.HSP.html#30254" class="Function">FromLiftÀ°</a>

 <a id="31215" href="Demos.HSP.html#31215" class="Function">ToFromLift</a> <a id="31226" class="Symbol">:</a> <a id="31228" class="Symbol">‚àÄ</a> <a id="31230" href="Demos.HSP.html#31230" class="Bound">b</a> <a id="31232" class="Symbol">‚Üí</a> <a id="31234" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="31236" href="Demos.HSP.html#31075" class="Function">ToLift</a> <a id="31243" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="31245" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="31249" class="Symbol">(</a><a id="31250" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="31252" href="Demos.HSP.html#31141" class="Function">FromLift</a> <a id="31261" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="31263" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="31267" href="Demos.HSP.html#31230" class="Bound">b</a><a id="31268" class="Symbol">)</a> <a id="31270" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a> <a id="31272" href="Demos.HSP.html#31230" class="Bound">b</a>
 <a id="31275" href="Demos.HSP.html#31215" class="Function">ToFromLift</a> <a id="31286" href="Demos.HSP.html#31286" class="Bound">b</a> <a id="31288" class="Symbol">=</a> <a id="31290" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="31295" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>

 <a id="31302" href="Demos.HSP.html#31302" class="Function">ToLift-epi</a> <a id="31313" class="Symbol">:</a> <a id="31315" href="Demos.HSP.html#27801" class="Function">epi</a> <a id="31319" href="Demos.HSP.html#30925" class="Bound">ùë®</a> <a id="31321" class="Symbol">(</a><a id="31322" href="Demos.HSP.html#22539" class="Function">Lift-Alg</a> <a id="31331" href="Demos.HSP.html#30925" class="Bound">ùë®</a> <a id="31333" href="Demos.HSP.html#30943" class="Bound">‚Ñì</a> <a id="31335" href="Demos.HSP.html#30945" class="Bound">r</a><a id="31336" class="Symbol">)</a>
 <a id="31339" href="Demos.HSP.html#31302" class="Function">ToLift-epi</a> <a id="31350" class="Symbol">=</a> <a id="31352" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="31354" href="Demos.HSP.html#31075" class="Function">ToLift</a> <a id="31361" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="31363" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a>  <a id="31366" class="Keyword">record</a> <a id="31373" class="Symbol">{</a> <a id="31375" href="Demos.HSP.html#27702" class="Field">isHom</a> <a id="31381" class="Symbol">=</a> <a id="31383" href="Demos.HSP.html#8301" class="Function Operator">‚à•</a> <a id="31385" href="Demos.HSP.html#31075" class="Function">ToLift</a> <a id="31392" href="Demos.HSP.html#8301" class="Function Operator">‚à•</a>
                            <a id="31422" class="Symbol">;</a> <a id="31424" href="Demos.HSP.html#27727" class="Field">isSurjective</a> <a id="31437" class="Symbol">=</a> <a id="31439" class="Symbol">Œª</a> <a id="31441" class="Symbol">{</a><a id="31442" href="Demos.HSP.html#31442" class="Bound">y</a><a id="31443" class="Symbol">}</a> <a id="31445" class="Symbol">‚Üí</a> <a id="31447" href="Demos.HSP.html#10799" class="InductiveConstructor">eq</a> <a id="31450" class="Symbol">(</a><a id="31451" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="31453" href="Demos.HSP.html#31141" class="Function">FromLift</a> <a id="31462" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="31464" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="31468" href="Demos.HSP.html#31442" class="Bound">y</a><a id="31469" class="Symbol">)</a> <a id="31471" class="Symbol">(</a><a id="31472" href="Demos.HSP.html#31215" class="Function">ToFromLift</a> <a id="31483" href="Demos.HSP.html#31442" class="Bound">y</a><a id="31484" class="Symbol">)</a> <a id="31486" class="Symbol">}</a>
</pre>


#### Homomorphisms of product algebras {#homomorphisms-of-product-algebras .unnumbered}

Suppose we have an algebra `ùë®`, a type `I : Type ùìò`, and a family `‚Ñ¨ : I ‚Üí Algebra Œ≤ œÅ·µá` of algebras.
We sometimes refer to the inhabitants of `I` as *indices*, and call `‚Ñ¨` an
*indexed family of algebras*. If in addition we have a family `ùíΩ : (i : I) ‚Üí hom ùë® (‚Ñ¨ i)` of homomorphisms, 
then we can construct a homomorphism from `ùë®` to the product `‚®Ö ‚Ñ¨` in the natural way.  We codify the 
latter in dependent type theory as follows.

<pre class="Agda">

<a id="32038" class="Keyword">module</a> <a id="32045" href="Demos.HSP.html#32045" class="Module">_</a> <a id="32047" class="Symbol">{</a><a id="32048" href="Demos.HSP.html#32048" class="Bound">Œπ</a> <a id="32050" class="Symbol">:</a> <a id="32052" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="32057" class="Symbol">}{</a><a id="32059" href="Demos.HSP.html#32059" class="Bound">I</a> <a id="32061" class="Symbol">:</a> <a id="32063" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="32068" href="Demos.HSP.html#32048" class="Bound">Œπ</a><a id="32069" class="Symbol">}{</a><a id="32071" href="Demos.HSP.html#32071" class="Bound">ùë®</a> <a id="32073" class="Symbol">:</a> <a id="32075" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="32083" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="32085" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a><a id="32087" class="Symbol">}(</a><a id="32089" href="Demos.HSP.html#32089" class="Bound">‚Ñ¨</a> <a id="32091" class="Symbol">:</a> <a id="32093" href="Demos.HSP.html#32059" class="Bound">I</a> <a id="32095" class="Symbol">‚Üí</a> <a id="32097" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="32105" href="Demos.HSP.html#7618" class="Generalizable">Œ≤</a> <a id="32107" href="Demos.HSP.html#7620" class="Generalizable">œÅ·µá</a><a id="32109" class="Symbol">)</a> <a id="32111" class="Keyword">where</a>
 <a id="32118" href="Demos.HSP.html#32118" class="Function">‚®Ö-hom-co</a> <a id="32127" class="Symbol">:</a> <a id="32129" class="Symbol">(‚àÄ(</a><a id="32132" href="Demos.HSP.html#32132" class="Bound">i</a> <a id="32134" class="Symbol">:</a> <a id="32136" href="Demos.HSP.html#32059" class="Bound">I</a><a id="32137" class="Symbol">)</a> <a id="32139" class="Symbol">‚Üí</a> <a id="32141" href="Demos.HSP.html#26745" class="Function">hom</a> <a id="32145" href="Demos.HSP.html#32071" class="Bound">ùë®</a> <a id="32147" class="Symbol">(</a><a id="32148" href="Demos.HSP.html#32089" class="Bound">‚Ñ¨</a> <a id="32150" href="Demos.HSP.html#32132" class="Bound">i</a><a id="32151" class="Symbol">))</a> <a id="32154" class="Symbol">‚Üí</a> <a id="32156" href="Demos.HSP.html#26745" class="Function">hom</a> <a id="32160" href="Demos.HSP.html#32071" class="Bound">ùë®</a> <a id="32162" class="Symbol">(</a><a id="32163" href="Demos.HSP.html#24369" class="Function">‚®Ö</a> <a id="32165" href="Demos.HSP.html#32089" class="Bound">‚Ñ¨</a><a id="32166" class="Symbol">)</a>
 <a id="32169" href="Demos.HSP.html#32118" class="Function">‚®Ö-hom-co</a> <a id="32178" href="Demos.HSP.html#32178" class="Bound">ùíΩ</a> <a id="32180" class="Symbol">=</a> <a id="32182" href="Demos.HSP.html#32198" class="Function">h</a> <a id="32184" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="32186" href="Demos.HSP.html#32370" class="Function">hhom</a> <a id="32191" class="Keyword">where</a>  <a id="32198" href="Demos.HSP.html#32198" class="Function">h</a> <a id="32200" class="Symbol">:</a> <a id="32202" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="32205" href="Demos.HSP.html#32071" class="Bound">ùë®</a> <a id="32207" href="Demos.HSP.html#19405" class="Function Operator">]</a> <a id="32209" href="Demos.HSP.html#6679" class="Record Operator">‚ü∂</a> <a id="32211" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="32214" href="Demos.HSP.html#24369" class="Function">‚®Ö</a> <a id="32216" href="Demos.HSP.html#32089" class="Bound">‚Ñ¨</a> <a id="32218" href="Demos.HSP.html#19405" class="Function Operator">]</a>
                              <a id="32250" href="Demos.HSP.html#32198" class="Function">h</a> <a id="32252" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="32256" href="Demos.HSP.html#32256" class="Bound">a</a> <a id="32258" class="Symbol">=</a> <a id="32260" class="Symbol">Œª</a> <a id="32262" href="Demos.HSP.html#32262" class="Bound">i</a> <a id="32264" class="Symbol">‚Üí</a> <a id="32266" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="32268" href="Demos.HSP.html#32178" class="Bound">ùíΩ</a> <a id="32270" href="Demos.HSP.html#32262" class="Bound">i</a> <a id="32272" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="32274" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="32278" href="Demos.HSP.html#32256" class="Bound">a</a>
                              <a id="32310" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="32315" href="Demos.HSP.html#32198" class="Function">h</a> <a id="32317" href="Demos.HSP.html#32317" class="Bound">xy</a> <a id="32320" href="Demos.HSP.html#32320" class="Bound">i</a> <a id="32322" class="Symbol">=</a> <a id="32324" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="32329" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="32331" href="Demos.HSP.html#32178" class="Bound">ùíΩ</a> <a id="32333" href="Demos.HSP.html#32320" class="Bound">i</a> <a id="32335" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="32337" href="Demos.HSP.html#32317" class="Bound">xy</a>
                              <a id="32370" href="Demos.HSP.html#32370" class="Function">hhom</a> <a id="32375" class="Symbol">:</a> <a id="32377" href="Demos.HSP.html#26619" class="Record">IsHom</a> <a id="32383" href="Demos.HSP.html#32071" class="Bound">ùë®</a> <a id="32385" class="Symbol">(</a><a id="32386" href="Demos.HSP.html#24369" class="Function">‚®Ö</a> <a id="32388" href="Demos.HSP.html#32089" class="Bound">‚Ñ¨</a><a id="32389" class="Symbol">)</a> <a id="32391" href="Demos.HSP.html#32198" class="Function">h</a>
                              <a id="32423" href="Demos.HSP.html#26713" class="Field">compatible</a> <a id="32434" href="Demos.HSP.html#32370" class="Function">hhom</a> <a id="32439" class="Symbol">=</a> <a id="32441" class="Symbol">Œª</a> <a id="32443" href="Demos.HSP.html#32443" class="Bound">i</a> <a id="32445" class="Symbol">‚Üí</a> <a id="32447" href="Demos.HSP.html#26713" class="Field">compatible</a> <a id="32458" href="Demos.HSP.html#8301" class="Function Operator">‚à•</a> <a id="32460" href="Demos.HSP.html#32178" class="Bound">ùíΩ</a> <a id="32462" href="Demos.HSP.html#32443" class="Bound">i</a> <a id="32464" href="Demos.HSP.html#8301" class="Function Operator">‚à•</a>
</pre>

Two structures are *isomorphic* provided there are homomorphisms from each to the other that compose to the identity. We define the following record type to represent this concept. Note that the definition, shown below,
includes a proof of the fact that the maps `to` and `from` are bijective, which makes this fact more accessible.

<pre class="Agda">

<a id="32826" class="Keyword">module</a> <a id="32833" href="Demos.HSP.html#32833" class="Module">_</a> <a id="32835" class="Symbol">(</a><a id="32836" href="Demos.HSP.html#32836" class="Bound">ùë®</a> <a id="32838" class="Symbol">:</a> <a id="32840" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="32848" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="32850" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a><a id="32852" class="Symbol">)</a> <a id="32854" class="Symbol">(</a><a id="32855" href="Demos.HSP.html#32855" class="Bound">ùë©</a> <a id="32857" class="Symbol">:</a> <a id="32859" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="32867" href="Demos.HSP.html#7618" class="Generalizable">Œ≤</a> <a id="32869" href="Demos.HSP.html#7620" class="Generalizable">œÅ·µá</a><a id="32871" class="Symbol">)</a> <a id="32873" class="Keyword">where</a>
 <a id="32880" class="Keyword">open</a> <a id="32885" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="32892" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="32895" href="Demos.HSP.html#32836" class="Bound">ùë®</a> <a id="32897" href="Demos.HSP.html#19405" class="Function Operator">]</a>  <a id="32900" class="Keyword">using</a> <a id="32906" class="Symbol">()</a>  <a id="32910" class="Keyword">renaming</a> <a id="32919" class="Symbol">(</a> <a id="32921" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="32925" class="Symbol">to</a> <a id="32928" class="Field Operator">_‚âà·¥¨_</a> <a id="32933" class="Symbol">)</a>
 <a id="32936" class="Keyword">open</a> <a id="32941" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="32948" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="32951" href="Demos.HSP.html#32855" class="Bound">ùë©</a> <a id="32953" href="Demos.HSP.html#19405" class="Function Operator">]</a>  <a id="32956" class="Keyword">using</a> <a id="32962" class="Symbol">()</a>  <a id="32966" class="Keyword">renaming</a> <a id="32975" class="Symbol">(</a> <a id="32977" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="32981" class="Symbol">to</a> <a id="32984" class="Field Operator">_‚âà·¥Æ_</a> <a id="32989" class="Symbol">)</a>

 <a id="32993" class="Keyword">record</a> <a id="33000" href="Demos.HSP.html#33000" class="Record Operator">_‚âÖ_</a> <a id="33004" class="Symbol">:</a> <a id="33006" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="33011" class="Symbol">(</a><a id="33012" href="Demos.HSP.html#5497" class="Bound">ùìû</a> <a id="33014" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="33016" href="Demos.HSP.html#5499" class="Bound">ùì•</a> <a id="33018" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="33020" href="Demos.HSP.html#32848" class="Bound">Œ±</a> <a id="33022" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="33024" href="Demos.HSP.html#32850" class="Bound">œÅ·µÉ</a> <a id="33027" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="33029" href="Demos.HSP.html#32867" class="Bound">Œ≤</a> <a id="33031" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="33033" href="Demos.HSP.html#32869" class="Bound">œÅ·µá</a> <a id="33036" class="Symbol">)</a> <a id="33038" class="Keyword">where</a>
  <a id="33046" class="Keyword">constructor</a>  <a id="33059" href="Demos.HSP.html#33059" class="InductiveConstructor">mkiso</a>
  <a id="33067" class="Keyword">field</a>        <a id="33080" href="Demos.HSP.html#33080" class="Field">to</a>    <a id="33086" class="Symbol">:</a> <a id="33088" href="Demos.HSP.html#26745" class="Function">hom</a> <a id="33092" href="Demos.HSP.html#32836" class="Bound">ùë®</a> <a id="33094" href="Demos.HSP.html#32855" class="Bound">ùë©</a>
               <a id="33111" href="Demos.HSP.html#33111" class="Field">from</a>  <a id="33117" class="Symbol">:</a> <a id="33119" href="Demos.HSP.html#26745" class="Function">hom</a> <a id="33123" href="Demos.HSP.html#32855" class="Bound">ùë©</a> <a id="33125" href="Demos.HSP.html#32836" class="Bound">ùë®</a>
               <a id="33142" href="Demos.HSP.html#33142" class="Field">to‚àºfrom</a> <a id="33150" class="Symbol">:</a> <a id="33152" class="Symbol">‚àÄ</a> <a id="33154" href="Demos.HSP.html#33154" class="Bound">b</a> <a id="33156" class="Symbol">‚Üí</a> <a id="33158" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="33160" href="Demos.HSP.html#33080" class="Field">to</a> <a id="33163" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a>    <a id="33168" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="33172" class="Symbol">(</a><a id="33173" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="33175" href="Demos.HSP.html#33111" class="Field">from</a> <a id="33180" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a>  <a id="33183" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="33187" href="Demos.HSP.html#33154" class="Bound">b</a><a id="33188" class="Symbol">)</a>  <a id="33191" href="Demos.HSP.html#32984" class="Function Operator">‚âà·¥Æ</a> <a id="33194" href="Demos.HSP.html#33154" class="Bound">b</a>
               <a id="33211" href="Demos.HSP.html#33211" class="Field">from‚àºto</a> <a id="33219" class="Symbol">:</a> <a id="33221" class="Symbol">‚àÄ</a> <a id="33223" href="Demos.HSP.html#33223" class="Bound">a</a> <a id="33225" class="Symbol">‚Üí</a> <a id="33227" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="33229" href="Demos.HSP.html#33111" class="Field">from</a> <a id="33234" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a>  <a id="33237" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="33241" class="Symbol">(</a><a id="33242" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="33244" href="Demos.HSP.html#33080" class="Field">to</a> <a id="33247" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a>    <a id="33252" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="33256" href="Demos.HSP.html#33223" class="Bound">a</a><a id="33257" class="Symbol">)</a>  <a id="33260" href="Demos.HSP.html#32928" class="Function Operator">‚âà·¥¨</a> <a id="33263" href="Demos.HSP.html#33223" class="Bound">a</a>

  <a id="33268" href="Demos.HSP.html#33268" class="Function">toIsInjective</a> <a id="33282" class="Symbol">:</a> <a id="33284" href="Demos.HSP.html#12491" class="Function">IsInjective</a> <a id="33296" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="33298" href="Demos.HSP.html#33080" class="Field">to</a> <a id="33301" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a>
  <a id="33305" href="Demos.HSP.html#33268" class="Function">toIsInjective</a> <a id="33319" class="Symbol">{</a><a id="33320" href="Demos.HSP.html#33320" class="Bound">x</a><a id="33321" class="Symbol">}{</a><a id="33323" href="Demos.HSP.html#33323" class="Bound">y</a><a id="33324" class="Symbol">}</a> <a id="33326" href="Demos.HSP.html#33326" class="Bound">xy</a> <a id="33329" class="Symbol">=</a> <a id="33331" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="33337" class="Symbol">(</a><a id="33338" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="33342" class="Symbol">(</a><a id="33343" href="Demos.HSP.html#33211" class="Field">from‚àºto</a> <a id="33351" href="Demos.HSP.html#33320" class="Bound">x</a><a id="33352" class="Symbol">))</a> <a id="33355" class="Symbol">(</a><a id="33356" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="33362" href="Demos.HSP.html#33438" class="Function">Œæ</a> <a id="33364" class="Symbol">(</a><a id="33365" href="Demos.HSP.html#33211" class="Field">from‚àºto</a> <a id="33373" href="Demos.HSP.html#33323" class="Bound">y</a><a id="33374" class="Symbol">))</a>
   <a id="33380" class="Keyword">where</a>  <a id="33387" class="Keyword">open</a> <a id="33392" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="33399" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="33402" href="Demos.HSP.html#32836" class="Bound">ùë®</a> <a id="33404" href="Demos.HSP.html#19405" class="Function Operator">]</a> <a id="33406" class="Keyword">using</a> <a id="33412" class="Symbol">(</a> <a id="33414" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="33418" class="Symbol">;</a> <a id="33420" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="33426" class="Symbol">)</a>
          <a id="33438" href="Demos.HSP.html#33438" class="Function">Œæ</a> <a id="33440" class="Symbol">:</a> <a id="33442" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="33444" href="Demos.HSP.html#33111" class="Field">from</a> <a id="33449" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="33451" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="33455" class="Symbol">(</a><a id="33456" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="33458" href="Demos.HSP.html#33080" class="Field">to</a> <a id="33461" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="33463" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="33467" href="Demos.HSP.html#33320" class="Bound">x</a><a id="33468" class="Symbol">)</a> <a id="33470" href="Demos.HSP.html#32928" class="Function Operator">‚âà·¥¨</a> <a id="33473" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="33475" href="Demos.HSP.html#33111" class="Field">from</a> <a id="33480" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="33482" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="33486" class="Symbol">(</a><a id="33487" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="33489" href="Demos.HSP.html#33080" class="Field">to</a> <a id="33492" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="33494" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="33498" href="Demos.HSP.html#33323" class="Bound">y</a><a id="33499" class="Symbol">)</a>
          <a id="33511" href="Demos.HSP.html#33438" class="Function">Œæ</a> <a id="33513" class="Symbol">=</a> <a id="33515" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="33520" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="33522" href="Demos.HSP.html#33111" class="Field">from</a> <a id="33527" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="33529" href="Demos.HSP.html#33326" class="Bound">xy</a>

  <a id="33535" href="Demos.HSP.html#33535" class="Function">fromIsSurjective</a> <a id="33552" class="Symbol">:</a> <a id="33554" href="Demos.HSP.html#12574" class="Function">IsSurjective</a> <a id="33567" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="33569" href="Demos.HSP.html#33111" class="Field">from</a> <a id="33574" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a>
  <a id="33578" href="Demos.HSP.html#33535" class="Function">fromIsSurjective</a> <a id="33595" class="Symbol">{</a><a id="33596" href="Demos.HSP.html#33596" class="Bound">x</a><a id="33597" class="Symbol">}</a> <a id="33599" class="Symbol">=</a> <a id="33601" href="Demos.HSP.html#10799" class="InductiveConstructor">eq</a> <a id="33604" class="Symbol">(</a><a id="33605" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="33607" href="Demos.HSP.html#33080" class="Field">to</a> <a id="33610" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="33612" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="33616" href="Demos.HSP.html#33596" class="Bound">x</a><a id="33617" class="Symbol">)</a> <a id="33619" class="Symbol">(</a><a id="33620" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="33624" class="Symbol">(</a><a id="33625" href="Demos.HSP.html#33211" class="Field">from‚àºto</a> <a id="33633" href="Demos.HSP.html#33596" class="Bound">x</a><a id="33634" class="Symbol">))</a>
   <a id="33640" class="Keyword">where</a> <a id="33646" class="Keyword">open</a> <a id="33651" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="33658" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="33661" href="Demos.HSP.html#32836" class="Bound">ùë®</a> <a id="33663" href="Demos.HSP.html#19405" class="Function Operator">]</a> <a id="33665" class="Keyword">using</a> <a id="33671" class="Symbol">(</a> <a id="33673" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="33677" class="Symbol">)</a>

<a id="33680" class="Keyword">open</a> <a id="33685" href="Demos.HSP.html#33000" class="Module Operator">_‚âÖ_</a>

</pre>

It is easy to prove that \ar{\au{}‚âÖ\au{}} is an equivalence relation, as follows.

<pre class="Agda">

<a id="‚âÖ-refl"></a><a id="33799" href="Demos.HSP.html#33799" class="Function">‚âÖ-refl</a> <a id="33806" class="Symbol">:</a> <a id="33808" href="Relation.Binary.Definitions.html#1339" class="Function">Reflexive</a> <a id="33818" class="Symbol">(</a><a id="33819" href="Demos.HSP.html#33000" class="Record Operator">_‚âÖ_</a> <a id="33823" class="Symbol">{</a><a id="33824" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a><a id="33825" class="Symbol">}{</a><a id="33827" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a><a id="33829" class="Symbol">})</a>
<a id="33832" href="Demos.HSP.html#33799" class="Function">‚âÖ-refl</a> <a id="33839" class="Symbol">{</a><a id="33840" href="Demos.HSP.html#33840" class="Bound">Œ±</a><a id="33841" class="Symbol">}{</a><a id="33843" href="Demos.HSP.html#33843" class="Bound">œÅ·µÉ</a><a id="33845" class="Symbol">}{</a><a id="33847" href="Demos.HSP.html#33847" class="Bound">ùë®</a><a id="33848" class="Symbol">}</a> <a id="33850" class="Symbol">=</a> <a id="33852" href="Demos.HSP.html#33059" class="InductiveConstructor">mkiso</a> <a id="33858" href="Demos.HSP.html#29679" class="Function">ùíæùíπ</a> <a id="33861" href="Demos.HSP.html#29679" class="Function">ùíæùíπ</a> <a id="33864" class="Symbol">(Œª</a> <a id="33867" href="Demos.HSP.html#33867" class="Bound">b</a> <a id="33869" class="Symbol">‚Üí</a> <a id="33871" href="Relation.Binary.Structures.html#1568" class="Function">refl</a><a id="33875" class="Symbol">)</a> <a id="33877" class="Symbol">Œª</a> <a id="33879" href="Demos.HSP.html#33879" class="Bound">a</a> <a id="33881" class="Symbol">‚Üí</a> <a id="33883" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="33888" class="Keyword">where</a> <a id="33894" class="Keyword">open</a> <a id="33899" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="33906" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="33909" href="Demos.HSP.html#33847" class="Bound">ùë®</a> <a id="33911" href="Demos.HSP.html#19405" class="Function Operator">]</a> <a id="33913" class="Keyword">using</a> <a id="33919" class="Symbol">(</a> <a id="33921" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="33926" class="Symbol">)</a>
<a id="‚âÖ-sym"></a><a id="33928" href="Demos.HSP.html#33928" class="Function">‚âÖ-sym</a> <a id="33934" class="Symbol">:</a> <a id="33936" href="Relation.Binary.Definitions.html#1424" class="Function">Sym</a> <a id="33940" class="Symbol">(</a><a id="33941" href="Demos.HSP.html#33000" class="Record Operator">_‚âÖ_</a><a id="33944" class="Symbol">{</a><a id="33945" href="Demos.HSP.html#7618" class="Generalizable">Œ≤</a><a id="33946" class="Symbol">}{</a><a id="33948" href="Demos.HSP.html#7620" class="Generalizable">œÅ·µá</a><a id="33950" class="Symbol">})</a> <a id="33953" class="Symbol">(</a><a id="33954" href="Demos.HSP.html#33000" class="Record Operator">_‚âÖ_</a><a id="33957" class="Symbol">{</a><a id="33958" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a><a id="33959" class="Symbol">}{</a><a id="33961" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a><a id="33963" class="Symbol">})</a>
<a id="33966" href="Demos.HSP.html#33928" class="Function">‚âÖ-sym</a> <a id="33972" href="Demos.HSP.html#33972" class="Bound">œÜ</a> <a id="33974" class="Symbol">=</a> <a id="33976" href="Demos.HSP.html#33059" class="InductiveConstructor">mkiso</a> <a id="33982" class="Symbol">(</a><a id="33983" href="Demos.HSP.html#33111" class="Field">from</a> <a id="33988" href="Demos.HSP.html#33972" class="Bound">œÜ</a><a id="33989" class="Symbol">)</a> <a id="33991" class="Symbol">(</a><a id="33992" href="Demos.HSP.html#33080" class="Field">to</a> <a id="33995" href="Demos.HSP.html#33972" class="Bound">œÜ</a><a id="33996" class="Symbol">)</a> <a id="33998" class="Symbol">(</a><a id="33999" href="Demos.HSP.html#33211" class="Field">from‚àºto</a> <a id="34007" href="Demos.HSP.html#33972" class="Bound">œÜ</a><a id="34008" class="Symbol">)</a> <a id="34010" class="Symbol">(</a><a id="34011" href="Demos.HSP.html#33142" class="Field">to‚àºfrom</a> <a id="34019" href="Demos.HSP.html#33972" class="Bound">œÜ</a><a id="34020" class="Symbol">)</a>

<a id="‚âÖ-trans"></a><a id="34023" href="Demos.HSP.html#34023" class="Function">‚âÖ-trans</a> <a id="34031" class="Symbol">:</a> <a id="34033" href="Relation.Binary.Definitions.html#1585" class="Function">Trans</a> <a id="34039" class="Symbol">(</a><a id="34040" href="Demos.HSP.html#33000" class="Record Operator">_‚âÖ_</a> <a id="34044" class="Symbol">{</a><a id="34045" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a><a id="34046" class="Symbol">}{</a><a id="34048" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a><a id="34050" class="Symbol">})</a> <a id="34053" class="Symbol">(</a><a id="34054" href="Demos.HSP.html#33000" class="Record Operator">_‚âÖ_</a><a id="34057" class="Symbol">{</a><a id="34058" href="Demos.HSP.html#7618" class="Generalizable">Œ≤</a><a id="34059" class="Symbol">}{</a><a id="34061" href="Demos.HSP.html#7620" class="Generalizable">œÅ·µá</a><a id="34063" class="Symbol">})</a> <a id="34066" class="Symbol">(</a><a id="34067" href="Demos.HSP.html#33000" class="Record Operator">_‚âÖ_</a><a id="34070" class="Symbol">{</a><a id="34071" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a><a id="34072" class="Symbol">}{</a><a id="34074" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a><a id="34076" class="Symbol">}{</a><a id="34078" href="Demos.HSP.html#7623" class="Generalizable">Œ≥</a><a id="34079" class="Symbol">}{</a><a id="34081" href="Demos.HSP.html#7625" class="Generalizable">œÅ·∂ú</a><a id="34083" class="Symbol">})</a>
<a id="34086" href="Demos.HSP.html#34023" class="Function">‚âÖ-trans</a> <a id="34094" class="Symbol">{</a><a id="34095" class="Argument">œÅ·∂ú</a> <a id="34098" class="Symbol">=</a> <a id="34100" href="Demos.HSP.html#34100" class="Bound">œÅ·∂ú</a><a id="34102" class="Symbol">}{</a><a id="34104" href="Demos.HSP.html#34104" class="Bound">ùë®</a><a id="34105" class="Symbol">}{</a><a id="34107" href="Demos.HSP.html#34107" class="Bound">ùë©</a><a id="34108" class="Symbol">}{</a><a id="34110" href="Demos.HSP.html#34110" class="Bound">ùë™</a><a id="34111" class="Symbol">}</a> <a id="34113" href="Demos.HSP.html#34113" class="Bound">ab</a> <a id="34116" href="Demos.HSP.html#34116" class="Bound">bc</a> <a id="34119" class="Symbol">=</a> <a id="34121" href="Demos.HSP.html#33059" class="InductiveConstructor">mkiso</a> <a id="34127" href="Demos.HSP.html#34143" class="Function">f</a> <a id="34129" href="Demos.HSP.html#34173" class="Function">g</a> <a id="34131" href="Demos.HSP.html#34366" class="Function">œÑ</a> <a id="34133" href="Demos.HSP.html#34488" class="Function">ŒΩ</a> <a id="34135" class="Keyword">where</a>
  <a id="34143" href="Demos.HSP.html#34143" class="Function">f</a> <a id="34145" class="Symbol">:</a> <a id="34147" href="Demos.HSP.html#26745" class="Function">hom</a> <a id="34151" href="Demos.HSP.html#34104" class="Bound">ùë®</a> <a id="34153" href="Demos.HSP.html#34110" class="Bound">ùë™</a>                <a id="34170" class="Symbol">;</a>  <a id="34173" href="Demos.HSP.html#34173" class="Function">g</a> <a id="34175" class="Symbol">:</a> <a id="34177" href="Demos.HSP.html#26745" class="Function">hom</a> <a id="34181" href="Demos.HSP.html#34110" class="Bound">ùë™</a> <a id="34183" href="Demos.HSP.html#34104" class="Bound">ùë®</a>
  <a id="34187" href="Demos.HSP.html#34143" class="Function">f</a> <a id="34189" class="Symbol">=</a> <a id="34191" href="Demos.HSP.html#29201" class="Function">‚àò-hom</a> <a id="34197" class="Symbol">(</a><a id="34198" href="Demos.HSP.html#33080" class="Field">to</a> <a id="34201" href="Demos.HSP.html#34113" class="Bound">ab</a><a id="34203" class="Symbol">)</a> <a id="34205" class="Symbol">(</a><a id="34206" href="Demos.HSP.html#33080" class="Field">to</a> <a id="34209" href="Demos.HSP.html#34116" class="Bound">bc</a><a id="34211" class="Symbol">)</a>  <a id="34214" class="Symbol">;</a>  <a id="34217" href="Demos.HSP.html#34173" class="Function">g</a> <a id="34219" class="Symbol">=</a> <a id="34221" href="Demos.HSP.html#29201" class="Function">‚àò-hom</a> <a id="34227" class="Symbol">(</a><a id="34228" href="Demos.HSP.html#33111" class="Field">from</a> <a id="34233" href="Demos.HSP.html#34116" class="Bound">bc</a><a id="34235" class="Symbol">)</a> <a id="34237" class="Symbol">(</a><a id="34238" href="Demos.HSP.html#33111" class="Field">from</a> <a id="34243" href="Demos.HSP.html#34113" class="Bound">ab</a><a id="34245" class="Symbol">)</a>

  <a id="34250" class="Keyword">open</a> <a id="34255" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="34262" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="34265" href="Demos.HSP.html#34104" class="Bound">ùë®</a> <a id="34267" href="Demos.HSP.html#19405" class="Function Operator">]</a> <a id="34269" class="Keyword">using</a> <a id="34275" class="Symbol">(</a> <a id="34277" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="34281" class="Symbol">;</a> <a id="34283" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="34289" class="Symbol">)</a>
  <a id="34293" class="Keyword">open</a> <a id="34298" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="34305" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="34308" href="Demos.HSP.html#34110" class="Bound">ùë™</a> <a id="34310" href="Demos.HSP.html#19405" class="Function Operator">]</a> <a id="34312" class="Keyword">using</a> <a id="34318" class="Symbol">()</a> <a id="34321" class="Keyword">renaming</a> <a id="34330" class="Symbol">(</a> <a id="34332" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="34336" class="Symbol">to</a> <a id="34339" class="Field Operator">_‚âà·∂ú_</a> <a id="34344" class="Symbol">;</a> <a id="34346" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="34352" class="Symbol">to</a> <a id="34355" class="Function">trans·∂ú</a> <a id="34362" class="Symbol">)</a>
  <a id="34366" href="Demos.HSP.html#34366" class="Function">œÑ</a> <a id="34368" class="Symbol">:</a> <a id="34370" class="Symbol">‚àÄ</a> <a id="34372" href="Demos.HSP.html#34372" class="Bound">b</a> <a id="34374" class="Symbol">‚Üí</a> <a id="34376" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="34378" href="Demos.HSP.html#34143" class="Function">f</a> <a id="34380" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="34382" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="34386" class="Symbol">(</a><a id="34387" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="34389" href="Demos.HSP.html#34173" class="Function">g</a> <a id="34391" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="34393" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="34397" href="Demos.HSP.html#34372" class="Bound">b</a><a id="34398" class="Symbol">)</a> <a id="34400" href="Demos.HSP.html#34339" class="Function Operator">‚âà·∂ú</a> <a id="34403" href="Demos.HSP.html#34372" class="Bound">b</a>
  <a id="34407" href="Demos.HSP.html#34366" class="Function">œÑ</a> <a id="34409" href="Demos.HSP.html#34409" class="Bound">b</a> <a id="34411" class="Symbol">=</a> <a id="34413" href="Demos.HSP.html#34355" class="Function">trans·∂ú</a> <a id="34420" class="Symbol">(</a><a id="34421" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="34426" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="34428" href="Demos.HSP.html#33080" class="Field">to</a> <a id="34431" href="Demos.HSP.html#34116" class="Bound">bc</a> <a id="34434" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="34436" class="Symbol">(</a><a id="34437" href="Demos.HSP.html#33142" class="Field">to‚àºfrom</a> <a id="34445" href="Demos.HSP.html#34113" class="Bound">ab</a> <a id="34448" class="Symbol">(</a><a id="34449" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="34451" href="Demos.HSP.html#33111" class="Field">from</a> <a id="34456" href="Demos.HSP.html#34116" class="Bound">bc</a> <a id="34459" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="34461" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="34465" href="Demos.HSP.html#34409" class="Bound">b</a><a id="34466" class="Symbol">)))</a> <a id="34470" class="Symbol">(</a><a id="34471" href="Demos.HSP.html#33142" class="Field">to‚àºfrom</a> <a id="34479" href="Demos.HSP.html#34116" class="Bound">bc</a> <a id="34482" href="Demos.HSP.html#34409" class="Bound">b</a><a id="34483" class="Symbol">)</a>

  <a id="34488" href="Demos.HSP.html#34488" class="Function">ŒΩ</a> <a id="34490" class="Symbol">:</a> <a id="34492" class="Symbol">‚àÄ</a> <a id="34494" href="Demos.HSP.html#34494" class="Bound">a</a> <a id="34496" class="Symbol">‚Üí</a> <a id="34498" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="34500" href="Demos.HSP.html#34173" class="Function">g</a> <a id="34502" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="34504" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="34508" class="Symbol">(</a><a id="34509" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="34511" href="Demos.HSP.html#34143" class="Function">f</a> <a id="34513" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="34515" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="34519" href="Demos.HSP.html#34494" class="Bound">a</a><a id="34520" class="Symbol">)</a> <a id="34522" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a> <a id="34524" href="Demos.HSP.html#34494" class="Bound">a</a>
  <a id="34528" href="Demos.HSP.html#34488" class="Function">ŒΩ</a> <a id="34530" href="Demos.HSP.html#34530" class="Bound">a</a> <a id="34532" class="Symbol">=</a> <a id="34534" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="34540" class="Symbol">(</a><a id="34541" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="34546" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="34548" href="Demos.HSP.html#33111" class="Field">from</a> <a id="34553" href="Demos.HSP.html#34113" class="Bound">ab</a> <a id="34556" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="34558" class="Symbol">(</a><a id="34559" href="Demos.HSP.html#33211" class="Field">from‚àºto</a> <a id="34567" href="Demos.HSP.html#34116" class="Bound">bc</a> <a id="34570" class="Symbol">(</a><a id="34571" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="34573" href="Demos.HSP.html#33080" class="Field">to</a> <a id="34576" href="Demos.HSP.html#34113" class="Bound">ab</a> <a id="34579" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="34581" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="34585" href="Demos.HSP.html#34530" class="Bound">a</a><a id="34586" class="Symbol">)))</a> <a id="34590" class="Symbol">(</a><a id="34591" href="Demos.HSP.html#33211" class="Field">from‚àºto</a> <a id="34599" href="Demos.HSP.html#34113" class="Bound">ab</a> <a id="34602" href="Demos.HSP.html#34530" class="Bound">a</a><a id="34603" class="Symbol">)</a>
</pre>

#### Homomorphic images {#homomorphic-images .unnumbered}

We have found that a useful way to encode the concept of *homomorphic image* is to produce a witness, that is, a surjective hom. Thus we define the type of surjective homs and also record the fact that an algebra is its own homomorphic image via the identity hom.

<pre class="Agda">

<a id="ov"></a><a id="34955" href="Demos.HSP.html#34955" class="Function">ov</a> <a id="34958" class="Symbol">:</a> <a id="34960" href="Agda.Primitive.html#597" class="Postulate">Level</a> <a id="34966" class="Symbol">‚Üí</a> <a id="34968" href="Agda.Primitive.html#597" class="Postulate">Level</a>         <a id="34982" class="Comment">-- shorthand for a common level transformation</a>
<a id="35029" href="Demos.HSP.html#34955" class="Function">ov</a> <a id="35032" href="Demos.HSP.html#35032" class="Bound">Œ±</a> <a id="35034" class="Symbol">=</a> <a id="35036" href="Demos.HSP.html#5497" class="Bound">ùìû</a> <a id="35038" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="35040" href="Demos.HSP.html#5499" class="Bound">ùì•</a> <a id="35042" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="35044" href="Agda.Primitive.html#780" class="Primitive">lsuc</a> <a id="35049" href="Demos.HSP.html#35032" class="Bound">Œ±</a>

<a id="_IsHomImageOf_"></a><a id="35052" href="Demos.HSP.html#35052" class="Function Operator">_IsHomImageOf_</a> <a id="35067" class="Symbol">:</a> <a id="35069" class="Symbol">(</a><a id="35070" href="Demos.HSP.html#35070" class="Bound">ùë©</a> <a id="35072" class="Symbol">:</a> <a id="35074" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="35082" href="Demos.HSP.html#7618" class="Generalizable">Œ≤</a> <a id="35084" href="Demos.HSP.html#7620" class="Generalizable">œÅ·µá</a><a id="35086" class="Symbol">)(</a><a id="35088" href="Demos.HSP.html#35088" class="Bound">ùë®</a> <a id="35090" class="Symbol">:</a> <a id="35092" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="35100" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="35102" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a><a id="35104" class="Symbol">)</a> <a id="35106" class="Symbol">‚Üí</a> <a id="35108" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="35113" class="Symbol">_</a>
<a id="35115" href="Demos.HSP.html#35115" class="Bound">ùë©</a> <a id="35117" href="Demos.HSP.html#35052" class="Function Operator">IsHomImageOf</a> <a id="35130" href="Demos.HSP.html#35130" class="Bound">ùë®</a> <a id="35132" class="Symbol">=</a> <a id="35134" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="35137" href="Demos.HSP.html#35137" class="Bound">œÜ</a> <a id="35139" href="Data.Product.html#916" class="Function">‚àà</a> <a id="35141" href="Demos.HSP.html#26745" class="Function">hom</a> <a id="35145" href="Demos.HSP.html#35130" class="Bound">ùë®</a> <a id="35147" href="Demos.HSP.html#35115" class="Bound">ùë©</a> <a id="35149" href="Data.Product.html#916" class="Function">]</a> <a id="35151" href="Demos.HSP.html#12574" class="Function">IsSurjective</a> <a id="35164" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="35166" href="Demos.HSP.html#35137" class="Bound">œÜ</a> <a id="35168" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a>

<a id="IdHomImage"></a><a id="35171" href="Demos.HSP.html#35171" class="Function">IdHomImage</a> <a id="35182" class="Symbol">:</a> <a id="35184" class="Symbol">{</a><a id="35185" href="Demos.HSP.html#35185" class="Bound">ùë®</a> <a id="35187" class="Symbol">:</a> <a id="35189" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="35197" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="35199" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a><a id="35201" class="Symbol">}</a> <a id="35203" class="Symbol">‚Üí</a> <a id="35205" href="Demos.HSP.html#35185" class="Bound">ùë®</a> <a id="35207" href="Demos.HSP.html#35052" class="Function Operator">IsHomImageOf</a> <a id="35220" href="Demos.HSP.html#35185" class="Bound">ùë®</a>
<a id="35222" href="Demos.HSP.html#35171" class="Function">IdHomImage</a> <a id="35233" class="Symbol">{</a><a id="35234" class="Argument">Œ±</a> <a id="35236" class="Symbol">=</a> <a id="35238" href="Demos.HSP.html#35238" class="Bound">Œ±</a><a id="35239" class="Symbol">}{</a><a id="35241" class="Argument">ùë®</a> <a id="35243" class="Symbol">=</a> <a id="35245" href="Demos.HSP.html#35245" class="Bound">ùë®</a><a id="35246" class="Symbol">}</a> <a id="35248" class="Symbol">=</a> <a id="35250" href="Demos.HSP.html#29679" class="Function">ùíæùíπ</a> <a id="35253" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="35255" class="Symbol">Œª</a> <a id="35257" class="Symbol">{</a><a id="35258" href="Demos.HSP.html#35258" class="Bound">y</a><a id="35259" class="Symbol">}</a> <a id="35261" class="Symbol">‚Üí</a> <a id="35263" href="Demos.HSP.html#10799" class="InductiveConstructor">Image_‚àã_.eq</a> <a id="35275" href="Demos.HSP.html#35258" class="Bound">y</a> <a id="35277" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>
 <a id="35283" class="Keyword">where</a> <a id="35289" class="Keyword">open</a> <a id="35294" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="35301" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="35304" href="Demos.HSP.html#35245" class="Bound">ùë®</a> <a id="35306" href="Demos.HSP.html#19405" class="Function Operator">]</a> <a id="35308" class="Keyword">using</a> <a id="35314" class="Symbol">(</a> <a id="35316" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="35321" class="Symbol">)</a>
</pre>


#### Factorization of homomorphisms {#factorization-of-homomorphisms .unnumbered}

Another theorem in the [agda-algebras][] library, called `HomFactor`, formalizes the following
factorization result: if `g : hom ùë® ùë©`, `h : hom ùë® ùë™`, `h` is surjective, and `ker h ‚äÜ ker g`, then
there exists `œÜ : hom ùë™ ùë©` such that `g = œÜ ‚àò h`. A special case of this result that we
use below is the fact that the setoid function factorization we saw
above lifts to factorization of homomorphisms. Moreover, we associate a
homomorphism `h` with its image---which is (the domain of) a subalgebra of
the codomain of `h`---using the function `HomIm` defined below.[^8]

<pre class="Agda">

<a id="36000" class="Keyword">module</a> <a id="36007" href="Demos.HSP.html#36007" class="Module">_</a> <a id="36009" class="Symbol">{</a><a id="36010" href="Demos.HSP.html#36010" class="Bound">ùë®</a> <a id="36012" class="Symbol">:</a> <a id="36014" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="36022" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="36024" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a><a id="36026" class="Symbol">}{</a><a id="36028" href="Demos.HSP.html#36028" class="Bound">ùë©</a> <a id="36030" class="Symbol">:</a> <a id="36032" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="36040" href="Demos.HSP.html#7618" class="Generalizable">Œ≤</a> <a id="36042" href="Demos.HSP.html#7620" class="Generalizable">œÅ·µá</a><a id="36044" class="Symbol">}</a> <a id="36046" class="Keyword">where</a>

 <a id="36054" href="Demos.HSP.html#36054" class="Function">HomIm</a> <a id="36060" class="Symbol">:</a> <a id="36062" class="Symbol">(</a><a id="36063" href="Demos.HSP.html#36063" class="Bound">h</a> <a id="36065" class="Symbol">:</a> <a id="36067" href="Demos.HSP.html#26745" class="Function">hom</a> <a id="36071" href="Demos.HSP.html#36010" class="Bound">ùë®</a> <a id="36073" href="Demos.HSP.html#36028" class="Bound">ùë©</a><a id="36074" class="Symbol">)</a> <a id="36076" class="Symbol">‚Üí</a> <a id="36078" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="36086" class="Symbol">_</a> <a id="36088" class="Symbol">_</a>
 <a id="36091" href="Demos.HSP.html#18816" class="Field">Domain</a> <a id="36098" class="Symbol">(</a><a id="36099" href="Demos.HSP.html#36054" class="Function">HomIm</a> <a id="36105" href="Demos.HSP.html#36105" class="Bound">h</a><a id="36106" class="Symbol">)</a> <a id="36108" class="Symbol">=</a> <a id="36110" href="Demos.HSP.html#13897" class="Function">Im</a> <a id="36113" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="36115" href="Demos.HSP.html#36105" class="Bound">h</a> <a id="36117" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a>
 <a id="36120" href="Demos.HSP.html#18845" class="Field">Interp</a> <a id="36127" class="Symbol">(</a><a id="36128" href="Demos.HSP.html#36054" class="Function">HomIm</a> <a id="36134" href="Demos.HSP.html#36134" class="Bound">h</a><a id="36135" class="Symbol">)</a> <a id="36137" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="36141" class="Symbol">(</a><a id="36142" href="Demos.HSP.html#36142" class="Bound">f</a> <a id="36144" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="36146" href="Demos.HSP.html#36146" class="Bound">la</a><a id="36148" class="Symbol">)</a> <a id="36150" class="Symbol">=</a> <a id="36152" class="Symbol">(</a><a id="36153" href="Demos.HSP.html#36142" class="Bound">f</a> <a id="36155" href="Demos.HSP.html#19518" class="Function Operator">ÃÇ</a> <a id="36157" href="Demos.HSP.html#36010" class="Bound">ùë®</a><a id="36158" class="Symbol">)</a> <a id="36160" href="Demos.HSP.html#36146" class="Bound">la</a>
 <a id="36164" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="36169" class="Symbol">(</a><a id="36170" href="Demos.HSP.html#18845" class="Field">Interp</a> <a id="36177" class="Symbol">(</a><a id="36178" href="Demos.HSP.html#36054" class="Function">HomIm</a> <a id="36184" href="Demos.HSP.html#36184" class="Bound">h</a><a id="36185" class="Symbol">))</a> <a id="36188" class="Symbol">{</a><a id="36189" href="Demos.HSP.html#36189" class="Bound">x1</a> <a id="36192" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="36194" href="Demos.HSP.html#36194" class="Bound">x2</a><a id="36196" class="Symbol">}</a> <a id="36198" class="Symbol">{</a><a id="36199" class="DottedPattern Symbol">.</a><a id="36200" href="Demos.HSP.html#36189" class="DottedPattern Bound">x1</a> <a id="36203" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="36205" href="Demos.HSP.html#36205" class="Bound">y2</a><a id="36207" class="Symbol">}</a> <a id="36209" class="Symbol">(</a><a id="36210" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="36217" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="36219" href="Demos.HSP.html#36219" class="Bound">e</a><a id="36220" class="Symbol">)</a> <a id="36222" class="Symbol">=</a>
  <a id="36226" href="Relation.Binary.Reasoning.Base.Single.html#1916" class="Function Operator">begin</a>
      <a id="36238" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="36240" href="Demos.HSP.html#36184" class="Bound">h</a> <a id="36242" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a>  <a id="36245" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a>         <a id="36257" class="Symbol">(</a><a id="36258" href="Demos.HSP.html#18845" class="Field">Interp</a> <a id="36265" href="Demos.HSP.html#36010" class="Bound">ùë®</a>  <a id="36268" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="36272" class="Symbol">(</a><a id="36273" href="Demos.HSP.html#36189" class="Bound">x1</a> <a id="36276" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="36278" href="Demos.HSP.html#36194" class="Bound">x2</a><a id="36280" class="Symbol">))</a>  <a id="36284" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a> <a id="36287" href="Demos.HSP.html#36657" class="Function">h-compatible</a>                  <a id="36317" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
   <a id="36322" href="Demos.HSP.html#18845" class="Field">Interp</a> <a id="36329" href="Demos.HSP.html#36028" class="Bound">ùë©</a>  <a id="36332" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="36336" class="Symbol">(</a><a id="36337" href="Demos.HSP.html#36189" class="Bound">x1</a> <a id="36340" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="36342" class="Symbol">Œª</a> <a id="36344" href="Demos.HSP.html#36344" class="Bound">x</a> <a id="36346" class="Symbol">‚Üí</a> <a id="36348" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="36350" href="Demos.HSP.html#36184" class="Bound">h</a> <a id="36352" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a>  <a id="36355" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="36359" href="Demos.HSP.html#36194" class="Bound">x2</a> <a id="36362" href="Demos.HSP.html#36344" class="Bound">x</a><a id="36363" class="Symbol">)</a>       <a id="36371" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a> <a id="36374" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="36379" class="Symbol">(</a><a id="36380" href="Demos.HSP.html#18845" class="Field">Interp</a> <a id="36387" href="Demos.HSP.html#36028" class="Bound">ùë©</a><a id="36388" class="Symbol">)</a> <a id="36390" class="Symbol">(</a><a id="36391" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="36398" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="36400" href="Demos.HSP.html#36219" class="Bound">e</a><a id="36401" class="Symbol">)</a>  <a id="36404" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
   <a id="36409" href="Demos.HSP.html#18845" class="Field">Interp</a> <a id="36416" href="Demos.HSP.html#36028" class="Bound">ùë©</a>  <a id="36419" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="36423" class="Symbol">(</a><a id="36424" href="Demos.HSP.html#36189" class="Bound">x1</a> <a id="36427" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="36429" class="Symbol">Œª</a> <a id="36431" href="Demos.HSP.html#36431" class="Bound">x</a> <a id="36433" class="Symbol">‚Üí</a> <a id="36435" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="36437" href="Demos.HSP.html#36184" class="Bound">h</a> <a id="36439" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a>  <a id="36442" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="36446" href="Demos.HSP.html#36205" class="Bound">y2</a> <a id="36449" href="Demos.HSP.html#36431" class="Bound">x</a><a id="36450" class="Symbol">)</a>       <a id="36458" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚âàÀò‚ü®</a> <a id="36462" href="Demos.HSP.html#36657" class="Function">h-compatible</a>                 <a id="36491" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚ü©</a>
      <a id="36499" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="36501" href="Demos.HSP.html#36184" class="Bound">h</a> <a id="36503" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a>  <a id="36506" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a>         <a id="36518" class="Symbol">(</a><a id="36519" href="Demos.HSP.html#18845" class="Field">Interp</a> <a id="36526" href="Demos.HSP.html#36010" class="Bound">ùë®</a>  <a id="36529" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="36533" class="Symbol">(</a><a id="36534" href="Demos.HSP.html#36189" class="Bound">x1</a> <a id="36537" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="36539" href="Demos.HSP.html#36205" class="Bound">y2</a><a id="36541" class="Symbol">))</a>  <a id="36545" href="Relation.Binary.Reasoning.Base.Single.html#2555" class="Function Operator">‚àé</a>
   <a id="36550" class="Keyword">where</a>  <a id="36557" class="Keyword">open</a> <a id="36562" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="36569" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="36572" href="Demos.HSP.html#36028" class="Bound">ùë©</a> <a id="36574" href="Demos.HSP.html#19405" class="Function Operator">]</a> <a id="36576" class="Symbol">;</a> <a id="36578" class="Keyword">open</a> <a id="36583" href="Relation.Binary.Reasoning.Setoid.html" class="Module">SetoidReasoning</a> <a id="36599" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="36602" href="Demos.HSP.html#36028" class="Bound">ùë©</a> <a id="36604" href="Demos.HSP.html#19405" class="Function Operator">]</a>
          <a id="36616" class="Keyword">open</a> <a id="36621" href="Demos.HSP.html#26619" class="Module">IsHom</a> <a id="36627" href="Demos.HSP.html#8301" class="Function Operator">‚à•</a> <a id="36629" href="Demos.HSP.html#36184" class="Bound">h</a> <a id="36631" href="Demos.HSP.html#8301" class="Function Operator">‚à•</a> <a id="36633" class="Keyword">renaming</a> <a id="36642" class="Symbol">(</a><a id="36643" href="Demos.HSP.html#26713" class="Field">compatible</a> <a id="36654" class="Symbol">to</a> <a id="36657" class="Field">h-compatible</a><a id="36669" class="Symbol">)</a>

 <a id="36673" href="Demos.HSP.html#36673" class="Function">toHomIm</a> <a id="36681" class="Symbol">:</a> <a id="36683" class="Symbol">(</a><a id="36684" href="Demos.HSP.html#36684" class="Bound">h</a> <a id="36686" class="Symbol">:</a> <a id="36688" href="Demos.HSP.html#26745" class="Function">hom</a> <a id="36692" href="Demos.HSP.html#36010" class="Bound">ùë®</a> <a id="36694" href="Demos.HSP.html#36028" class="Bound">ùë©</a><a id="36695" class="Symbol">)</a> <a id="36697" class="Symbol">‚Üí</a> <a id="36699" href="Demos.HSP.html#26745" class="Function">hom</a> <a id="36703" href="Demos.HSP.html#36010" class="Bound">ùë®</a> <a id="36705" class="Symbol">(</a><a id="36706" href="Demos.HSP.html#36054" class="Function">HomIm</a> <a id="36712" href="Demos.HSP.html#36684" class="Bound">h</a><a id="36713" class="Symbol">)</a>
 <a id="36716" href="Demos.HSP.html#36673" class="Function">toHomIm</a> <a id="36724" href="Demos.HSP.html#36724" class="Bound">h</a> <a id="36726" class="Symbol">=</a> <a id="36728" href="Demos.HSP.html#14115" class="Function">toIm</a> <a id="36733" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="36735" href="Demos.HSP.html#36724" class="Bound">h</a> <a id="36737" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="36739" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="36741" href="Demos.HSP.html#26692" class="InductiveConstructor">mkhom</a> <a id="36747" class="Symbol">(</a><a id="36748" href="Demos.HSP.html#7107" class="Function">reflÀ¢</a> <a id="36754" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="36757" href="Demos.HSP.html#36028" class="Bound">ùë©</a> <a id="36759" href="Demos.HSP.html#19405" class="Function Operator">]</a><a id="36760" class="Symbol">)</a>

 <a id="36764" href="Demos.HSP.html#36764" class="Function">fromHomIm</a> <a id="36774" class="Symbol">:</a> <a id="36776" class="Symbol">(</a><a id="36777" href="Demos.HSP.html#36777" class="Bound">h</a> <a id="36779" class="Symbol">:</a> <a id="36781" href="Demos.HSP.html#26745" class="Function">hom</a> <a id="36785" href="Demos.HSP.html#36010" class="Bound">ùë®</a> <a id="36787" href="Demos.HSP.html#36028" class="Bound">ùë©</a><a id="36788" class="Symbol">)</a> <a id="36790" class="Symbol">‚Üí</a> <a id="36792" href="Demos.HSP.html#26745" class="Function">hom</a> <a id="36796" class="Symbol">(</a><a id="36797" href="Demos.HSP.html#36054" class="Function">HomIm</a> <a id="36803" href="Demos.HSP.html#36777" class="Bound">h</a><a id="36804" class="Symbol">)</a> <a id="36806" href="Demos.HSP.html#36028" class="Bound">ùë©</a>
 <a id="36809" href="Demos.HSP.html#36764" class="Function">fromHomIm</a> <a id="36819" href="Demos.HSP.html#36819" class="Bound">h</a> <a id="36821" class="Symbol">=</a> <a id="36823" href="Demos.HSP.html#14191" class="Function">fromIm</a> <a id="36830" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="36832" href="Demos.HSP.html#36819" class="Bound">h</a> <a id="36834" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="36836" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="36838" href="Demos.HSP.html#26692" class="InductiveConstructor">mkhom</a> <a id="36844" class="Symbol">(</a><a id="36845" href="Demos.HSP.html#26713" class="Field">IsHom.compatible</a> <a id="36862" href="Demos.HSP.html#8301" class="Function Operator">‚à•</a> <a id="36864" href="Demos.HSP.html#36819" class="Bound">h</a> <a id="36866" href="Demos.HSP.html#8301" class="Function Operator">‚à•</a><a id="36867" class="Symbol">)</a>
</pre>


Lift-Alg is an algebraic invariant {#sec:lift-alg}
----------------------------------

The `Lift-Alg` operation neatly resolves the technical problem of universe non-cumulativity because isomorphism classes of algebras are closed under `Lift-Alg`.

<pre class="Agda">

<a id="37145" class="Keyword">module</a> <a id="37152" href="Demos.HSP.html#37152" class="Module">_</a> <a id="37154" class="Symbol">{</a><a id="37155" href="Demos.HSP.html#37155" class="Bound">ùë®</a> <a id="37157" class="Symbol">:</a> <a id="37159" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="37167" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="37169" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a><a id="37171" class="Symbol">}{</a><a id="37173" href="Demos.HSP.html#37173" class="Bound">‚Ñì</a> <a id="37175" class="Symbol">:</a> <a id="37177" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="37182" class="Symbol">}</a> <a id="37184" class="Keyword">where</a>
 <a id="37191" href="Demos.HSP.html#37191" class="Function">Lift-‚âÖÀ°</a> <a id="37199" class="Symbol">:</a> <a id="37201" href="Demos.HSP.html#37155" class="Bound">ùë®</a> <a id="37203" href="Demos.HSP.html#33000" class="Record Operator">‚âÖ</a> <a id="37205" class="Symbol">(</a><a id="37206" href="Demos.HSP.html#21627" class="Function">Lift-AlgÀ°</a> <a id="37216" href="Demos.HSP.html#37155" class="Bound">ùë®</a> <a id="37218" href="Demos.HSP.html#37173" class="Bound">‚Ñì</a><a id="37219" class="Symbol">)</a>
 <a id="37222" href="Demos.HSP.html#37191" class="Function">Lift-‚âÖÀ°</a> <a id="37230" class="Symbol">=</a> <a id="37232" href="Demos.HSP.html#33059" class="InductiveConstructor">mkiso</a> <a id="37238" href="Demos.HSP.html#30150" class="Function">ToLiftÀ°</a> <a id="37246" href="Demos.HSP.html#30254" class="Function">FromLiftÀ°</a> <a id="37256" class="Symbol">(</a><a id="37257" href="Demos.HSP.html#30350" class="Function">ToFromLiftÀ°</a><a id="37268" class="Symbol">{</a><a id="37269" class="Argument">ùë®</a> <a id="37271" class="Symbol">=</a> <a id="37273" href="Demos.HSP.html#37155" class="Bound">ùë®</a><a id="37274" class="Symbol">})</a> <a id="37277" class="Symbol">(</a><a id="37278" href="Demos.HSP.html#30439" class="Function">FromToLiftÀ°</a><a id="37289" class="Symbol">{</a><a id="37290" class="Argument">ùë®</a> <a id="37292" class="Symbol">=</a> <a id="37294" href="Demos.HSP.html#37155" class="Bound">ùë®</a><a id="37295" class="Symbol">}{</a><a id="37297" href="Demos.HSP.html#37173" class="Bound">‚Ñì</a><a id="37298" class="Symbol">})</a>
 <a id="37302" href="Demos.HSP.html#37302" class="Function">Lift-‚âÖ ≥</a> <a id="37310" class="Symbol">:</a> <a id="37312" href="Demos.HSP.html#37155" class="Bound">ùë®</a> <a id="37314" href="Demos.HSP.html#33000" class="Record Operator">‚âÖ</a> <a id="37316" class="Symbol">(</a><a id="37317" href="Demos.HSP.html#22022" class="Function">Lift-Alg ≥</a> <a id="37327" href="Demos.HSP.html#37155" class="Bound">ùë®</a> <a id="37329" href="Demos.HSP.html#37173" class="Bound">‚Ñì</a><a id="37330" class="Symbol">)</a>
 <a id="37333" href="Demos.HSP.html#37302" class="Function">Lift-‚âÖ ≥</a> <a id="37341" class="Symbol">=</a> <a id="37343" href="Demos.HSP.html#33059" class="InductiveConstructor">mkiso</a> <a id="37349" href="Demos.HSP.html#30527" class="Function">ToLift ≥</a> <a id="37357" href="Demos.HSP.html#30638" class="Function">FromLift ≥</a> <a id="37367" class="Symbol">(</a><a id="37368" href="Demos.HSP.html#30734" class="Function">ToFromLift ≥</a><a id="37379" class="Symbol">{</a><a id="37380" class="Argument">ùë®</a> <a id="37382" class="Symbol">=</a> <a id="37384" href="Demos.HSP.html#37155" class="Bound">ùë®</a><a id="37385" class="Symbol">})</a> <a id="37388" class="Symbol">(</a><a id="37389" href="Demos.HSP.html#30827" class="Function">FromToLift ≥</a><a id="37400" class="Symbol">{</a><a id="37401" class="Argument">ùë®</a> <a id="37403" class="Symbol">=</a> <a id="37405" href="Demos.HSP.html#37155" class="Bound">ùë®</a><a id="37406" class="Symbol">}{</a><a id="37408" href="Demos.HSP.html#37173" class="Bound">‚Ñì</a><a id="37409" class="Symbol">})</a>

<a id="Lift-‚âÖ"></a><a id="37413" href="Demos.HSP.html#37413" class="Function">Lift-‚âÖ</a> <a id="37420" class="Symbol">:</a> <a id="37422" class="Symbol">{</a><a id="37423" href="Demos.HSP.html#37423" class="Bound">ùë®</a> <a id="37425" class="Symbol">:</a> <a id="37427" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="37435" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="37437" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a><a id="37439" class="Symbol">}{</a><a id="37441" href="Demos.HSP.html#37441" class="Bound">‚Ñì</a> <a id="37443" href="Demos.HSP.html#37443" class="Bound">œÅ</a> <a id="37445" class="Symbol">:</a> <a id="37447" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="37452" class="Symbol">}</a> <a id="37454" class="Symbol">‚Üí</a> <a id="37456" href="Demos.HSP.html#37423" class="Bound">ùë®</a> <a id="37458" href="Demos.HSP.html#33000" class="Record Operator">‚âÖ</a> <a id="37460" class="Symbol">(</a><a id="37461" href="Demos.HSP.html#22539" class="Function">Lift-Alg</a> <a id="37470" href="Demos.HSP.html#37423" class="Bound">ùë®</a> <a id="37472" href="Demos.HSP.html#37441" class="Bound">‚Ñì</a> <a id="37474" href="Demos.HSP.html#37443" class="Bound">œÅ</a><a id="37475" class="Symbol">)</a>
<a id="37477" href="Demos.HSP.html#37413" class="Function">Lift-‚âÖ</a> <a id="37484" class="Symbol">=</a> <a id="37486" href="Demos.HSP.html#34023" class="Function">‚âÖ-trans</a> <a id="37494" href="Demos.HSP.html#37191" class="Function">Lift-‚âÖÀ°</a> <a id="37502" href="Demos.HSP.html#37302" class="Function">Lift-‚âÖ ≥</a>
</pre>

Subalgebras
-----------

We say that `ùë®` is a *subalgebra* of `ùë©` and write `ùë® ‚â§ ùë©` just in case `ùë®` can be *homomorphically
embedded* in `ùë©`; in other terms, `ùë® ‚â§ ùë©` iff there exists an injective hom from `ùë®` to `ùë©`.

<pre class="Agda">

<a id="_‚â§_"></a><a id="37755" href="Demos.HSP.html#37755" class="Function Operator">_‚â§_</a> <a id="37759" class="Symbol">:</a> <a id="37761" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="37769" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="37771" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a> <a id="37774" class="Symbol">‚Üí</a> <a id="37776" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="37784" href="Demos.HSP.html#7618" class="Generalizable">Œ≤</a> <a id="37786" href="Demos.HSP.html#7620" class="Generalizable">œÅ·µá</a> <a id="37789" class="Symbol">‚Üí</a> <a id="37791" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="37796" class="Symbol">_</a>
<a id="37798" href="Demos.HSP.html#37798" class="Bound">ùë®</a> <a id="37800" href="Demos.HSP.html#37755" class="Function Operator">‚â§</a> <a id="37802" href="Demos.HSP.html#37802" class="Bound">ùë©</a> <a id="37804" class="Symbol">=</a> <a id="37806" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="37809" href="Demos.HSP.html#37809" class="Bound">h</a> <a id="37811" href="Data.Product.html#916" class="Function">‚àà</a> <a id="37813" href="Demos.HSP.html#26745" class="Function">hom</a> <a id="37817" href="Demos.HSP.html#37798" class="Bound">ùë®</a> <a id="37819" href="Demos.HSP.html#37802" class="Bound">ùë©</a> <a id="37821" href="Data.Product.html#916" class="Function">]</a> <a id="37823" href="Demos.HSP.html#12491" class="Function">IsInjective</a> <a id="37835" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="37837" href="Demos.HSP.html#37809" class="Bound">h</a> <a id="37839" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a>

</pre>
The subalgebra relation is reflexive, by the identity monomorphism (and transitive by composition of monomorphisms, hence, a *preorder*, though we won't need this fact here).

<pre class="Agda">

<a id="‚â§-reflexive"></a><a id="38043" href="Demos.HSP.html#38043" class="Function">‚â§-reflexive</a>   <a id="38057" class="Symbol">:</a>  <a id="38060" class="Symbol">{</a><a id="38061" href="Demos.HSP.html#38061" class="Bound">ùë®</a> <a id="38063" class="Symbol">:</a> <a id="38065" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="38073" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="38075" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a><a id="38077" class="Symbol">}</a> <a id="38079" class="Symbol">‚Üí</a> <a id="38081" href="Demos.HSP.html#38061" class="Bound">ùë®</a> <a id="38083" href="Demos.HSP.html#37755" class="Function Operator">‚â§</a> <a id="38085" href="Demos.HSP.html#38061" class="Bound">ùë®</a>
<a id="38087" href="Demos.HSP.html#38043" class="Function">‚â§-reflexive</a> <a id="38099" class="Symbol">=</a> <a id="38101" href="Demos.HSP.html#29679" class="Function">ùíæùíπ</a> <a id="38104" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="38106" href="Function.Base.html#615" class="Function">id</a>

</pre>

<!-- If `ùíú : I ‚Üí Algebra Œ± œÅ·µÉ`, `‚Ñ¨ : I ‚Üí Algebra Œ≤ œÅ·µá` (families of -algebras) and if `‚Ñ¨ i ‚â§ ùíú i` for all `i : I`, then `‚®Ö ‚Ñ¨` is a subalgebra of `‚®Ö ùíú`. Below we will use to denote this fact. -->

We conclude this section with an easy fact that will be useful later; it simply converts a monomorphism into a proof of a subalgebra relationship.

<pre class="Agda">

<a id="mon‚Üí‚â§"></a><a id="38480" href="Demos.HSP.html#38480" class="Function">mon‚Üí‚â§</a> <a id="38486" class="Symbol">:</a> <a id="38488" class="Symbol">{</a><a id="38489" href="Demos.HSP.html#38489" class="Bound">ùë®</a> <a id="38491" class="Symbol">:</a> <a id="38493" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="38501" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="38503" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a><a id="38505" class="Symbol">}{</a><a id="38507" href="Demos.HSP.html#38507" class="Bound">ùë©</a> <a id="38509" class="Symbol">:</a> <a id="38511" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="38519" href="Demos.HSP.html#7618" class="Generalizable">Œ≤</a> <a id="38521" href="Demos.HSP.html#7620" class="Generalizable">œÅ·µá</a><a id="38523" class="Symbol">}</a> <a id="38525" class="Symbol">‚Üí</a> <a id="38527" href="Demos.HSP.html#27374" class="Function">mon</a> <a id="38531" href="Demos.HSP.html#38489" class="Bound">ùë®</a> <a id="38533" href="Demos.HSP.html#38507" class="Bound">ùë©</a> <a id="38535" class="Symbol">‚Üí</a> <a id="38537" href="Demos.HSP.html#38489" class="Bound">ùë®</a> <a id="38539" href="Demos.HSP.html#37755" class="Function Operator">‚â§</a> <a id="38541" href="Demos.HSP.html#38507" class="Bound">ùë©</a>
<a id="38543" href="Demos.HSP.html#38480" class="Function">mon‚Üí‚â§</a> <a id="38549" class="Symbol">{</a><a id="38550" class="Argument">ùë®</a> <a id="38552" class="Symbol">=</a> <a id="38554" href="Demos.HSP.html#38554" class="Bound">ùë®</a><a id="38555" class="Symbol">}{</a><a id="38557" href="Demos.HSP.html#38557" class="Bound">ùë©</a><a id="38558" class="Symbol">}</a> <a id="38560" href="Demos.HSP.html#38560" class="Bound">x</a> <a id="38562" class="Symbol">=</a> <a id="38564" href="Demos.HSP.html#28035" class="Function">mon‚Üíintohom</a> <a id="38576" href="Demos.HSP.html#38554" class="Bound">ùë®</a> <a id="38578" href="Demos.HSP.html#38557" class="Bound">ùë©</a> <a id="38580" href="Demos.HSP.html#38560" class="Bound">x</a>
</pre>

Terms
-----

Fix a signature `ùëÜ` and let `X` denote an arbitrary nonempty collection of variable symbols. Such a collection is called a *context*. Assume the symbols in `X` are distinct from the operation symbols of `ùëÜ`, that is `X ‚à© ‚à£ ùëÜ ‚à£ = ‚àÖ`. A *word* in the language of `ùëÜ` is a finite sequence of members of `X ‚à™ ‚à£ ùëÜ ‚à£`. We denote the
concatenation of such sequences by simple juxtaposition. Let `S‚ÇÄ` denote the set of nullary operation symbols of `ùëÜ`. We define by induction on `n` the sets `T‚Çô` of *words* over `X ‚à™ ‚à£ ùëÜ ‚à£` as follows: `T‚ÇÄ := X ‚à™ S‚ÇÄ` and 
`T‚Çô‚Çä‚ÇÅ := T‚Çô ‚à™ ùíØ‚Çô`, where `ùíØ‚Çô` is the collection of all `f t` such that `f : ‚à£ ùëÜ ‚à£` and `t : ‚à• ùëÜ ‚à• f ‚Üí ùëá‚Çô`.
(Recall, `‚à• ùëÜ ‚à• f` is the arity of the operation symbol `f`.)
An `ùëÜ`-*term* is a term in the language of `ùëÜ` and the collection of all `ùëÜ`-terms in the context `X` is `Term X := ‚ãÉ‚Çô T‚Çô`.

In type theory, this translates to two cases: variable injection and applying an operation symbol to a tuple of terms. This represents each term as a tree with an operation symbol at each `node` and a variable symbol at
each leaf `‚Ñä`; hence the constructor names (`‚Ñä` for "generator" and `node` for "node") in the following inductively defined type.

<pre class="Agda">

<a id="39815" class="Keyword">data</a> <a id="Term"></a><a id="39820" href="Demos.HSP.html#39820" class="Datatype">Term</a> <a id="39825" class="Symbol">(</a><a id="39826" href="Demos.HSP.html#39826" class="Bound">X</a> <a id="39828" class="Symbol">:</a> <a id="39830" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="39835" href="Demos.HSP.html#7635" class="Generalizable">œá</a><a id="39836" class="Symbol">)</a> <a id="39838" class="Symbol">:</a> <a id="39840" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="39845" class="Symbol">(</a><a id="39846" href="Demos.HSP.html#34955" class="Function">ov</a> <a id="39849" href="Demos.HSP.html#39835" class="Bound">œá</a><a id="39850" class="Symbol">)</a>  <a id="39853" class="Keyword">where</a>
 <a id="Term.‚Ñä"></a><a id="39860" href="Demos.HSP.html#39860" class="InductiveConstructor">‚Ñä</a> <a id="39862" class="Symbol">:</a> <a id="39864" href="Demos.HSP.html#39826" class="Bound">X</a> <a id="39866" class="Symbol">‚Üí</a> <a id="39868" href="Demos.HSP.html#39820" class="Datatype">Term</a> <a id="39873" href="Demos.HSP.html#39826" class="Bound">X</a>
 <a id="Term.node"></a><a id="39876" href="Demos.HSP.html#39876" class="InductiveConstructor">node</a> <a id="39881" class="Symbol">:</a> <a id="39883" class="Symbol">(</a><a id="39884" href="Demos.HSP.html#39884" class="Bound">f</a> <a id="39886" class="Symbol">:</a> <a id="39888" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="39890" href="Demos.HSP.html#5483" class="Bound">ùëÜ</a> <a id="39892" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a><a id="39893" class="Symbol">)(</a><a id="39895" href="Demos.HSP.html#39895" class="Bound">t</a> <a id="39897" class="Symbol">:</a> <a id="39899" href="Demos.HSP.html#8301" class="Function Operator">‚à•</a> <a id="39901" href="Demos.HSP.html#5483" class="Bound">ùëÜ</a> <a id="39903" href="Demos.HSP.html#8301" class="Function Operator">‚à•</a> <a id="39905" href="Demos.HSP.html#39884" class="Bound">f</a> <a id="39907" class="Symbol">‚Üí</a> <a id="39909" href="Demos.HSP.html#39820" class="Datatype">Term</a> <a id="39914" href="Demos.HSP.html#39826" class="Bound">X</a><a id="39915" class="Symbol">)</a> <a id="39917" class="Symbol">‚Üí</a> <a id="39919" href="Demos.HSP.html#39820" class="Datatype">Term</a> <a id="39924" href="Demos.HSP.html#39826" class="Bound">X</a>
</pre>

#### The term algebra {#the-term-algebra .unnumbered}

We enrich the `Term` type to a setoid of `ùëÜ`-terms, which will ultimately be the domain of an algebra, called the *term algebra in the signature* `ùëÜ`. For this we need an equivalence relation on terms.

<pre class="Agda">

<a id="40210" class="Keyword">module</a> <a id="40217" href="Demos.HSP.html#40217" class="Module">_</a> <a id="40219" class="Symbol">{</a><a id="40220" href="Demos.HSP.html#40220" class="Bound">X</a> <a id="40222" class="Symbol">:</a> <a id="40224" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="40229" href="Demos.HSP.html#7635" class="Generalizable">œá</a> <a id="40231" class="Symbol">}</a> <a id="40233" class="Keyword">where</a>

 <a id="40241" class="Keyword">data</a> <a id="40246" href="Demos.HSP.html#40246" class="Datatype Operator">_‚âÉ_</a> <a id="40250" class="Symbol">:</a> <a id="40252" href="Demos.HSP.html#39820" class="Datatype">Term</a> <a id="40257" href="Demos.HSP.html#40220" class="Bound">X</a> <a id="40259" class="Symbol">‚Üí</a> <a id="40261" href="Demos.HSP.html#39820" class="Datatype">Term</a> <a id="40266" href="Demos.HSP.html#40220" class="Bound">X</a> <a id="40268" class="Symbol">‚Üí</a> <a id="40270" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="40275" class="Symbol">(</a><a id="40276" href="Demos.HSP.html#34955" class="Function">ov</a> <a id="40279" href="Demos.HSP.html#40229" class="Bound">œá</a><a id="40280" class="Symbol">)</a> <a id="40282" class="Keyword">where</a>
  <a id="40290" href="Demos.HSP.html#40290" class="InductiveConstructor">rfl</a> <a id="40294" class="Symbol">:</a> <a id="40296" class="Symbol">{</a><a id="40297" href="Demos.HSP.html#40297" class="Bound">x</a> <a id="40299" href="Demos.HSP.html#40299" class="Bound">y</a> <a id="40301" class="Symbol">:</a> <a id="40303" href="Demos.HSP.html#40220" class="Bound">X</a><a id="40304" class="Symbol">}</a> <a id="40306" class="Symbol">‚Üí</a> <a id="40308" href="Demos.HSP.html#40297" class="Bound">x</a> <a id="40310" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">‚â°</a> <a id="40312" href="Demos.HSP.html#40299" class="Bound">y</a> <a id="40314" class="Symbol">‚Üí</a> <a id="40316" class="Symbol">(</a><a id="40317" href="Demos.HSP.html#39860" class="InductiveConstructor">‚Ñä</a> <a id="40319" href="Demos.HSP.html#40297" class="Bound">x</a><a id="40320" class="Symbol">)</a> <a id="40322" href="Demos.HSP.html#40246" class="Datatype Operator">‚âÉ</a> <a id="40324" class="Symbol">(</a><a id="40325" href="Demos.HSP.html#39860" class="InductiveConstructor">‚Ñä</a> <a id="40327" href="Demos.HSP.html#40299" class="Bound">y</a><a id="40328" class="Symbol">)</a>
  <a id="40332" href="Demos.HSP.html#40332" class="InductiveConstructor">gnl</a> <a id="40336" class="Symbol">:</a> <a id="40338" class="Symbol">‚àÄ</a> <a id="40340" class="Symbol">{</a><a id="40341" href="Demos.HSP.html#40341" class="Bound">f</a><a id="40342" class="Symbol">}{</a><a id="40344" href="Demos.HSP.html#40344" class="Bound">s</a> <a id="40346" href="Demos.HSP.html#40346" class="Bound">t</a> <a id="40348" class="Symbol">:</a> <a id="40350" href="Demos.HSP.html#8301" class="Function Operator">‚à•</a> <a id="40352" href="Demos.HSP.html#5483" class="Bound">ùëÜ</a> <a id="40354" href="Demos.HSP.html#8301" class="Function Operator">‚à•</a> <a id="40356" href="Demos.HSP.html#40341" class="Bound">f</a> <a id="40358" class="Symbol">‚Üí</a> <a id="40360" href="Demos.HSP.html#39820" class="Datatype">Term</a> <a id="40365" href="Demos.HSP.html#40220" class="Bound">X</a><a id="40366" class="Symbol">}</a> <a id="40368" class="Symbol">‚Üí</a> <a id="40370" class="Symbol">(‚àÄ</a> <a id="40373" href="Demos.HSP.html#40373" class="Bound">i</a> <a id="40375" class="Symbol">‚Üí</a> <a id="40377" class="Symbol">(</a><a id="40378" href="Demos.HSP.html#40344" class="Bound">s</a> <a id="40380" href="Demos.HSP.html#40373" class="Bound">i</a><a id="40381" class="Symbol">)</a> <a id="40383" href="Demos.HSP.html#40246" class="Datatype Operator">‚âÉ</a> <a id="40385" class="Symbol">(</a><a id="40386" href="Demos.HSP.html#40346" class="Bound">t</a> <a id="40388" href="Demos.HSP.html#40373" class="Bound">i</a><a id="40389" class="Symbol">))</a> <a id="40392" class="Symbol">‚Üí</a> <a id="40394" class="Symbol">(</a><a id="40395" href="Demos.HSP.html#39876" class="InductiveConstructor">node</a> <a id="40400" href="Demos.HSP.html#40341" class="Bound">f</a> <a id="40402" href="Demos.HSP.html#40344" class="Bound">s</a><a id="40403" class="Symbol">)</a> <a id="40405" href="Demos.HSP.html#40246" class="Datatype Operator">‚âÉ</a> <a id="40407" class="Symbol">(</a><a id="40408" href="Demos.HSP.html#39876" class="InductiveConstructor">node</a> <a id="40413" href="Demos.HSP.html#40341" class="Bound">f</a> <a id="40415" href="Demos.HSP.html#40346" class="Bound">t</a><a id="40416" class="Symbol">)</a>

</pre>

It is easy to show that `_‚âÉ_` is an equivalence relation as follows.

<pre class="Agda">

 <a id="40516" href="Demos.HSP.html#40516" class="Function">‚âÉ-isRefl</a>   <a id="40527" class="Symbol">:</a> <a id="40529" href="Relation.Binary.Definitions.html#1339" class="Function">Reflexive</a>      <a id="40544" href="Demos.HSP.html#40246" class="Datatype Operator">_‚âÉ_</a>
 <a id="40549" href="Demos.HSP.html#40516" class="Function">‚âÉ-isRefl</a> <a id="40558" class="Symbol">{</a><a id="40559" href="Demos.HSP.html#39860" class="InductiveConstructor">‚Ñä</a> <a id="40561" class="Symbol">_}</a> <a id="40564" class="Symbol">=</a> <a id="40566" href="Demos.HSP.html#40290" class="InductiveConstructor">rfl</a> <a id="40570" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a>
 <a id="40578" href="Demos.HSP.html#40516" class="Function">‚âÉ-isRefl</a> <a id="40587" class="Symbol">{</a><a id="40588" href="Demos.HSP.html#39876" class="InductiveConstructor">node</a> <a id="40593" class="Symbol">_</a> <a id="40595" class="Symbol">_}</a> <a id="40598" class="Symbol">=</a> <a id="40600" href="Demos.HSP.html#40332" class="InductiveConstructor">gnl</a> <a id="40604" class="Symbol">Œª</a> <a id="40606" href="Demos.HSP.html#40606" class="Bound">_</a> <a id="40608" class="Symbol">‚Üí</a> <a id="40610" href="Demos.HSP.html#40516" class="Function">‚âÉ-isRefl</a>

 <a id="40621" href="Demos.HSP.html#40621" class="Function">‚âÉ-isSym</a>    <a id="40632" class="Symbol">:</a> <a id="40634" href="Relation.Binary.Definitions.html#1498" class="Function">Symmetric</a>      <a id="40649" href="Demos.HSP.html#40246" class="Datatype Operator">_‚âÉ_</a>
 <a id="40654" href="Demos.HSP.html#40621" class="Function">‚âÉ-isSym</a> <a id="40662" class="Symbol">(</a><a id="40663" href="Demos.HSP.html#40290" class="InductiveConstructor">rfl</a> <a id="40667" href="Demos.HSP.html#40667" class="Bound">x</a><a id="40668" class="Symbol">)</a> <a id="40670" class="Symbol">=</a> <a id="40672" href="Demos.HSP.html#40290" class="InductiveConstructor">rfl</a> <a id="40676" class="Symbol">(</a><a id="40677" href="Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">‚â°.sym</a> <a id="40683" href="Demos.HSP.html#40667" class="Bound">x</a><a id="40684" class="Symbol">)</a>
 <a id="40687" href="Demos.HSP.html#40621" class="Function">‚âÉ-isSym</a> <a id="40695" class="Symbol">(</a><a id="40696" href="Demos.HSP.html#40332" class="InductiveConstructor">gnl</a> <a id="40700" href="Demos.HSP.html#40700" class="Bound">x</a><a id="40701" class="Symbol">)</a> <a id="40703" class="Symbol">=</a> <a id="40705" href="Demos.HSP.html#40332" class="InductiveConstructor">gnl</a> <a id="40709" class="Symbol">Œª</a> <a id="40711" href="Demos.HSP.html#40711" class="Bound">i</a> <a id="40713" class="Symbol">‚Üí</a> <a id="40715" href="Demos.HSP.html#40621" class="Function">‚âÉ-isSym</a> <a id="40723" class="Symbol">(</a><a id="40724" href="Demos.HSP.html#40700" class="Bound">x</a> <a id="40726" href="Demos.HSP.html#40711" class="Bound">i</a><a id="40727" class="Symbol">)</a>

 <a id="40731" href="Demos.HSP.html#40731" class="Function">‚âÉ-isTrans</a>  <a id="40742" class="Symbol">:</a> <a id="40744" href="Relation.Binary.Definitions.html#1978" class="Function">Transitive</a>     <a id="40759" href="Demos.HSP.html#40246" class="Datatype Operator">_‚âÉ_</a>
 <a id="40764" href="Demos.HSP.html#40731" class="Function">‚âÉ-isTrans</a> <a id="40774" class="Symbol">(</a><a id="40775" href="Demos.HSP.html#40290" class="InductiveConstructor">rfl</a> <a id="40779" href="Demos.HSP.html#40779" class="Bound">x</a><a id="40780" class="Symbol">)</a> <a id="40782" class="Symbol">(</a><a id="40783" href="Demos.HSP.html#40290" class="InductiveConstructor">rfl</a> <a id="40787" href="Demos.HSP.html#40787" class="Bound">y</a><a id="40788" class="Symbol">)</a> <a id="40790" class="Symbol">=</a> <a id="40792" href="Demos.HSP.html#40290" class="InductiveConstructor">rfl</a> <a id="40796" class="Symbol">(</a><a id="40797" href="Relation.Binary.PropositionalEquality.Core.html#1729" class="Function">‚â°.trans</a> <a id="40805" href="Demos.HSP.html#40779" class="Bound">x</a> <a id="40807" href="Demos.HSP.html#40787" class="Bound">y</a><a id="40808" class="Symbol">)</a>
 <a id="40811" href="Demos.HSP.html#40731" class="Function">‚âÉ-isTrans</a> <a id="40821" class="Symbol">(</a><a id="40822" href="Demos.HSP.html#40332" class="InductiveConstructor">gnl</a> <a id="40826" href="Demos.HSP.html#40826" class="Bound">x</a><a id="40827" class="Symbol">)</a> <a id="40829" class="Symbol">(</a><a id="40830" href="Demos.HSP.html#40332" class="InductiveConstructor">gnl</a> <a id="40834" href="Demos.HSP.html#40834" class="Bound">y</a><a id="40835" class="Symbol">)</a> <a id="40837" class="Symbol">=</a> <a id="40839" href="Demos.HSP.html#40332" class="InductiveConstructor">gnl</a> <a id="40843" class="Symbol">Œª</a> <a id="40845" href="Demos.HSP.html#40845" class="Bound">i</a> <a id="40847" class="Symbol">‚Üí</a> <a id="40849" href="Demos.HSP.html#40731" class="Function">‚âÉ-isTrans</a> <a id="40859" class="Symbol">(</a><a id="40860" href="Demos.HSP.html#40826" class="Bound">x</a> <a id="40862" href="Demos.HSP.html#40845" class="Bound">i</a><a id="40863" class="Symbol">)</a> <a id="40865" class="Symbol">(</a><a id="40866" href="Demos.HSP.html#40834" class="Bound">y</a> <a id="40868" href="Demos.HSP.html#40845" class="Bound">i</a><a id="40869" class="Symbol">)</a>

 <a id="40873" href="Demos.HSP.html#40873" class="Function">‚âÉ-isEquiv</a>  <a id="40884" class="Symbol">:</a> <a id="40886" href="Relation.Binary.Structures.html#1522" class="Record">IsEquivalence</a>  <a id="40901" href="Demos.HSP.html#40246" class="Datatype Operator">_‚âÉ_</a>
 <a id="40906" href="Demos.HSP.html#40873" class="Function">‚âÉ-isEquiv</a> <a id="40916" class="Symbol">=</a> <a id="40918" class="Keyword">record</a> <a id="40925" class="Symbol">{</a> <a id="40927" href="Relation.Binary.Structures.html#1568" class="Field">refl</a> <a id="40932" class="Symbol">=</a> <a id="40934" href="Demos.HSP.html#40516" class="Function">‚âÉ-isRefl</a> <a id="40943" class="Symbol">;</a> <a id="40945" href="Relation.Binary.Structures.html#1594" class="Field">sym</a> <a id="40949" class="Symbol">=</a> <a id="40951" href="Demos.HSP.html#40621" class="Function">‚âÉ-isSym</a> <a id="40959" class="Symbol">;</a> <a id="40961" href="Relation.Binary.Structures.html#1620" class="Field">trans</a> <a id="40967" class="Symbol">=</a> <a id="40969" href="Demos.HSP.html#40731" class="Function">‚âÉ-isTrans</a> <a id="40979" class="Symbol">}</a>
</pre>

For a given signature `ùëÜ` and context `X`, we define the algebra `ùëª X`, known as the *term algebra in* 
`ùëÜ` *over* `X`. The domain of `ùëª X` is `Term X` and, for each operation symbol `f : ‚à£ ùëÜ ‚à£`, we define 
`f ÃÇ ùëª X` to be the operation which maps each tuple `t : ‚à• ùëÜ ‚à• f ‚Üí Term X` of terms to the formal
term `f t`.

<pre class="Agda">

<a id="TermSetoid"></a><a id="41325" href="Demos.HSP.html#41325" class="Function">TermSetoid</a> <a id="41336" class="Symbol">:</a> <a id="41338" class="Symbol">(</a><a id="41339" href="Demos.HSP.html#41339" class="Bound">X</a> <a id="41341" class="Symbol">:</a> <a id="41343" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="41348" href="Demos.HSP.html#7635" class="Generalizable">œá</a><a id="41349" class="Symbol">)</a> <a id="41351" class="Symbol">‚Üí</a> <a id="41353" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="41360" class="Symbol">_</a> <a id="41362" class="Symbol">_</a>
<a id="41364" href="Demos.HSP.html#41325" class="Function">TermSetoid</a> <a id="41375" href="Demos.HSP.html#41375" class="Bound">X</a> <a id="41377" class="Symbol">=</a> <a id="41379" class="Keyword">record</a> <a id="41386" class="Symbol">{</a> <a id="41388" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="41396" class="Symbol">=</a> <a id="41398" href="Demos.HSP.html#39820" class="Datatype">Term</a> <a id="41403" href="Demos.HSP.html#41375" class="Bound">X</a> <a id="41405" class="Symbol">;</a> <a id="41407" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="41411" class="Symbol">=</a> <a id="41413" href="Demos.HSP.html#40246" class="Datatype Operator">_‚âÉ_</a> <a id="41417" class="Symbol">;</a> <a id="41419" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="41433" class="Symbol">=</a> <a id="41435" href="Demos.HSP.html#40873" class="Function">‚âÉ-isEquiv</a> <a id="41445" class="Symbol">}</a>

<a id="ùëª"></a><a id="41448" href="Demos.HSP.html#41448" class="Function">ùëª</a> <a id="41450" class="Symbol">:</a> <a id="41452" class="Symbol">(</a><a id="41453" href="Demos.HSP.html#41453" class="Bound">X</a> <a id="41455" class="Symbol">:</a> <a id="41457" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="41462" href="Demos.HSP.html#7635" class="Generalizable">œá</a><a id="41463" class="Symbol">)</a> <a id="41465" class="Symbol">‚Üí</a> <a id="41467" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="41475" class="Symbol">(</a><a id="41476" href="Demos.HSP.html#34955" class="Function">ov</a> <a id="41479" href="Demos.HSP.html#7635" class="Generalizable">œá</a><a id="41480" class="Symbol">)</a> <a id="41482" class="Symbol">(</a><a id="41483" href="Demos.HSP.html#34955" class="Function">ov</a> <a id="41486" href="Demos.HSP.html#7635" class="Generalizable">œá</a><a id="41487" class="Symbol">)</a>
<a id="41489" href="Demos.HSP.html#18816" class="Field">Algebra.Domain</a> <a id="41504" class="Symbol">(</a><a id="41505" href="Demos.HSP.html#41448" class="Function">ùëª</a> <a id="41507" href="Demos.HSP.html#41507" class="Bound">X</a><a id="41508" class="Symbol">)</a> <a id="41510" class="Symbol">=</a> <a id="41512" href="Demos.HSP.html#41325" class="Function">TermSetoid</a> <a id="41523" href="Demos.HSP.html#41507" class="Bound">X</a>
<a id="41525" href="Demos.HSP.html#18845" class="Field">Algebra.Interp</a> <a id="41540" class="Symbol">(</a><a id="41541" href="Demos.HSP.html#41448" class="Function">ùëª</a> <a id="41543" href="Demos.HSP.html#41543" class="Bound">X</a><a id="41544" class="Symbol">)</a> <a id="41546" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="41550" class="Symbol">(</a><a id="41551" href="Demos.HSP.html#41551" class="Bound">f</a> <a id="41553" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="41555" href="Demos.HSP.html#41555" class="Bound">ts</a><a id="41557" class="Symbol">)</a> <a id="41559" class="Symbol">=</a> <a id="41561" href="Demos.HSP.html#39876" class="InductiveConstructor">node</a> <a id="41566" href="Demos.HSP.html#41551" class="Bound">f</a> <a id="41568" href="Demos.HSP.html#41555" class="Bound">ts</a>
<a id="41571" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="41576" class="Symbol">(</a><a id="41577" href="Demos.HSP.html#18845" class="Field">Algebra.Interp</a> <a id="41592" class="Symbol">(</a><a id="41593" href="Demos.HSP.html#41448" class="Function">ùëª</a> <a id="41595" href="Demos.HSP.html#41595" class="Bound">X</a><a id="41596" class="Symbol">))</a> <a id="41599" class="Symbol">(</a><a id="41600" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="41607" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="41609" href="Demos.HSP.html#41609" class="Bound">ss‚âÉts</a><a id="41614" class="Symbol">)</a> <a id="41616" class="Symbol">=</a> <a id="41618" href="Demos.HSP.html#40332" class="InductiveConstructor">gnl</a> <a id="41622" href="Demos.HSP.html#41609" class="Bound">ss‚âÉts</a>
</pre>



#### Environments and interpretation of terms {#environments-and-interpretation-of-terms .unnumbered}

Fix a signature `ùëÜ` and a context `X`. An *environment* for `ùë®` and `X` is a setoid whose carrier
is a mapping from the variable symbols `X` to the domain `ùïå[ ùê¥ ]` and whose equivalence relation is 
point-wise equality. Our formalization of this concept is the same as that of¬†[@Abel:2021], which 
Abel uses to formalize Birkhoff's completeness theorem.

<pre class="Agda">

<a id="42114" class="Keyword">module</a> <a id="Environment"></a><a id="42121" href="Demos.HSP.html#42121" class="Module">Environment</a> <a id="42133" class="Symbol">(</a><a id="42134" href="Demos.HSP.html#42134" class="Bound">ùë®</a> <a id="42136" class="Symbol">:</a> <a id="42138" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="42146" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="42148" href="Demos.HSP.html#7637" class="Generalizable">‚Ñì</a><a id="42149" class="Symbol">)</a> <a id="42151" class="Keyword">where</a>
 <a id="42158" class="Keyword">open</a> <a id="42163" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="42170" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="42173" href="Demos.HSP.html#42134" class="Bound">ùë®</a> <a id="42175" href="Demos.HSP.html#19405" class="Function Operator">]</a> <a id="42177" class="Keyword">using</a> <a id="42183" class="Symbol">(</a> <a id="42185" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="42189" class="Symbol">;</a> <a id="42191" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="42196" class="Symbol">;</a> <a id="42198" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="42202" class="Symbol">;</a> <a id="42204" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="42210" class="Symbol">)</a>

 <a id="Environment.Env"></a><a id="42214" href="Demos.HSP.html#42214" class="Function">Env</a> <a id="42218" class="Symbol">:</a> <a id="42220" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="42225" href="Demos.HSP.html#7635" class="Generalizable">œá</a> <a id="42227" class="Symbol">‚Üí</a> <a id="42229" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="42236" class="Symbol">_</a> <a id="42238" class="Symbol">_</a>
 <a id="42241" href="Demos.HSP.html#42214" class="Function">Env</a> <a id="42245" href="Demos.HSP.html#42245" class="Bound">X</a> <a id="42247" class="Symbol">=</a> <a id="42249" class="Keyword">record</a>  <a id="42257" class="Symbol">{</a> <a id="42259" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="42267" class="Symbol">=</a> <a id="42269" href="Demos.HSP.html#42245" class="Bound">X</a> <a id="42271" class="Symbol">‚Üí</a> <a id="42273" href="Demos.HSP.html#19459" class="Function Operator">ùïå[</a> <a id="42276" href="Demos.HSP.html#42134" class="Bound">ùë®</a> <a id="42278" href="Demos.HSP.html#19459" class="Function Operator">]</a>
                 <a id="42297" class="Symbol">;</a> <a id="42299" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="42303" class="Symbol">=</a> <a id="42305" class="Symbol">Œª</a> <a id="42307" href="Demos.HSP.html#42307" class="Bound">œÅ</a> <a id="42309" href="Demos.HSP.html#42309" class="Bound">œÑ</a> <a id="42311" class="Symbol">‚Üí</a> <a id="42313" class="Symbol">(</a><a id="42314" href="Demos.HSP.html#42314" class="Bound">x</a> <a id="42316" class="Symbol">:</a> <a id="42318" href="Demos.HSP.html#42245" class="Bound">X</a><a id="42319" class="Symbol">)</a> <a id="42321" class="Symbol">‚Üí</a> <a id="42323" href="Demos.HSP.html#42307" class="Bound">œÅ</a> <a id="42325" href="Demos.HSP.html#42314" class="Bound">x</a> <a id="42327" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a> <a id="42329" href="Demos.HSP.html#42309" class="Bound">œÑ</a> <a id="42331" href="Demos.HSP.html#42314" class="Bound">x</a>
                 <a id="42350" class="Symbol">;</a> <a id="42352" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="42366" class="Symbol">=</a> <a id="42368" class="Keyword">record</a>  <a id="42376" class="Symbol">{</a> <a id="42378" href="Relation.Binary.Structures.html#1568" class="Field">refl</a>   <a id="42385" class="Symbol">=</a> <a id="42387" class="Symbol">Œª</a> <a id="42389" href="Demos.HSP.html#42389" class="Bound">_</a>      <a id="42396" class="Symbol">‚Üí</a> <a id="42398" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>
                                           <a id="42446" class="Symbol">;</a> <a id="42448" href="Relation.Binary.Structures.html#1594" class="Field">sym</a>    <a id="42455" class="Symbol">=</a> <a id="42457" class="Symbol">Œª</a> <a id="42459" href="Demos.HSP.html#42459" class="Bound">h</a> <a id="42461" href="Demos.HSP.html#42461" class="Bound">x</a>    <a id="42466" class="Symbol">‚Üí</a> <a id="42468" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="42472" class="Symbol">(</a><a id="42473" href="Demos.HSP.html#42459" class="Bound">h</a> <a id="42475" href="Demos.HSP.html#42461" class="Bound">x</a><a id="42476" class="Symbol">)</a>
                                           <a id="42521" class="Symbol">;</a> <a id="42523" href="Relation.Binary.Structures.html#1620" class="Field">trans</a>  <a id="42530" class="Symbol">=</a> <a id="42532" class="Symbol">Œª</a> <a id="42534" href="Demos.HSP.html#42534" class="Bound">g</a> <a id="42536" href="Demos.HSP.html#42536" class="Bound">h</a> <a id="42538" href="Demos.HSP.html#42538" class="Bound">x</a>  <a id="42541" class="Symbol">‚Üí</a> <a id="42543" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="42549" class="Symbol">(</a><a id="42550" href="Demos.HSP.html#42534" class="Bound">g</a> <a id="42552" href="Demos.HSP.html#42538" class="Bound">x</a><a id="42553" class="Symbol">)(</a><a id="42555" href="Demos.HSP.html#42536" class="Bound">h</a> <a id="42557" href="Demos.HSP.html#42538" class="Bound">x</a><a id="42558" class="Symbol">)</a> <a id="42560" class="Symbol">}}</a>

</pre>
The *interpretation* of a term *evaluated* in a particular environment is defined as follows.

<pre class="Agda">

 <a id="Environment.‚ü¶_‚üß"></a><a id="42685" href="Demos.HSP.html#42685" class="Function Operator">‚ü¶_‚üß</a> <a id="42689" class="Symbol">:</a> <a id="42691" class="Symbol">{</a><a id="42692" href="Demos.HSP.html#42692" class="Bound">X</a> <a id="42694" class="Symbol">:</a> <a id="42696" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="42701" href="Demos.HSP.html#7635" class="Generalizable">œá</a><a id="42702" class="Symbol">}(</a><a id="42704" href="Demos.HSP.html#42704" class="Bound">t</a> <a id="42706" class="Symbol">:</a> <a id="42708" href="Demos.HSP.html#39820" class="Datatype">Term</a> <a id="42713" href="Demos.HSP.html#42692" class="Bound">X</a><a id="42714" class="Symbol">)</a> <a id="42716" class="Symbol">‚Üí</a> <a id="42718" class="Symbol">(</a><a id="42719" href="Demos.HSP.html#42214" class="Function">Env</a> <a id="42723" href="Demos.HSP.html#42692" class="Bound">X</a><a id="42724" class="Symbol">)</a> <a id="42726" href="Demos.HSP.html#6679" class="Record Operator">‚ü∂</a> <a id="42728" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="42731" href="Demos.HSP.html#42134" class="Bound">ùë®</a> <a id="42733" href="Demos.HSP.html#19405" class="Function Operator">]</a>
 <a id="42736" href="Demos.HSP.html#42685" class="Function Operator">‚ü¶</a> <a id="42738" href="Demos.HSP.html#39860" class="InductiveConstructor">‚Ñä</a> <a id="42740" href="Demos.HSP.html#42740" class="Bound">x</a> <a id="42742" href="Demos.HSP.html#42685" class="Function Operator">‚üß</a>          <a id="42753" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="42757" href="Demos.HSP.html#42757" class="Bound">œÅ</a>    <a id="42762" class="Symbol">=</a> <a id="42764" href="Demos.HSP.html#42757" class="Bound">œÅ</a> <a id="42766" href="Demos.HSP.html#42740" class="Bound">x</a>
 <a id="42769" href="Demos.HSP.html#42685" class="Function Operator">‚ü¶</a> <a id="42771" href="Demos.HSP.html#39876" class="InductiveConstructor">node</a> <a id="42776" href="Demos.HSP.html#42776" class="Bound">f</a> <a id="42778" href="Demos.HSP.html#42778" class="Bound">args</a> <a id="42783" href="Demos.HSP.html#42685" class="Function Operator">‚üß</a>  <a id="42786" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="42790" href="Demos.HSP.html#42790" class="Bound">œÅ</a>    <a id="42795" class="Symbol">=</a> <a id="42797" class="Symbol">(</a><a id="42798" href="Demos.HSP.html#18845" class="Field">Interp</a> <a id="42805" href="Demos.HSP.html#42134" class="Bound">ùë®</a><a id="42806" class="Symbol">)</a> <a id="42808" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="42812" class="Symbol">(</a><a id="42813" href="Demos.HSP.html#42776" class="Bound">f</a> <a id="42815" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="42817" class="Symbol">Œª</a> <a id="42819" href="Demos.HSP.html#42819" class="Bound">i</a> <a id="42821" class="Symbol">‚Üí</a> <a id="42823" href="Demos.HSP.html#42685" class="Function Operator">‚ü¶</a> <a id="42825" href="Demos.HSP.html#42778" class="Bound">args</a> <a id="42830" href="Demos.HSP.html#42819" class="Bound">i</a> <a id="42832" href="Demos.HSP.html#42685" class="Function Operator">‚üß</a> <a id="42834" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="42838" href="Demos.HSP.html#42790" class="Bound">œÅ</a><a id="42839" class="Symbol">)</a>
 <a id="42842" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="42847" href="Demos.HSP.html#42685" class="Function Operator">‚ü¶</a> <a id="42849" href="Demos.HSP.html#39860" class="InductiveConstructor">‚Ñä</a> <a id="42851" href="Demos.HSP.html#42851" class="Bound">x</a> <a id="42853" href="Demos.HSP.html#42685" class="Function Operator">‚üß</a> <a id="42855" href="Demos.HSP.html#42855" class="Bound">u‚âàv</a>          <a id="42868" class="Symbol">=</a> <a id="42870" href="Demos.HSP.html#42855" class="Bound">u‚âàv</a> <a id="42874" href="Demos.HSP.html#42851" class="Bound">x</a>
 <a id="42877" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="42882" href="Demos.HSP.html#42685" class="Function Operator">‚ü¶</a> <a id="42884" href="Demos.HSP.html#39876" class="InductiveConstructor">node</a> <a id="42889" href="Demos.HSP.html#42889" class="Bound">f</a> <a id="42891" href="Demos.HSP.html#42891" class="Bound">args</a> <a id="42896" href="Demos.HSP.html#42685" class="Function Operator">‚üß</a> <a id="42898" href="Demos.HSP.html#42898" class="Bound">x‚âày</a>  <a id="42903" class="Symbol">=</a> <a id="42905" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="42910" class="Symbol">(</a><a id="42911" href="Demos.HSP.html#18845" class="Field">Interp</a> <a id="42918" href="Demos.HSP.html#42134" class="Bound">ùë®</a><a id="42919" class="Symbol">)(</a><a id="42921" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="42928" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="42930" class="Symbol">Œª</a> <a id="42932" href="Demos.HSP.html#42932" class="Bound">i</a> <a id="42934" class="Symbol">‚Üí</a> <a id="42936" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="42941" href="Demos.HSP.html#42685" class="Function Operator">‚ü¶</a> <a id="42943" href="Demos.HSP.html#42891" class="Bound">args</a> <a id="42948" href="Demos.HSP.html#42932" class="Bound">i</a> <a id="42950" href="Demos.HSP.html#42685" class="Function Operator">‚üß</a> <a id="42952" href="Demos.HSP.html#42898" class="Bound">x‚âày</a> <a id="42956" class="Symbol">)</a>

</pre>
Two terms are proclaimed *equal* if they are equal for all environments.

<pre class="Agda">

 <a id="Environment.Equal"></a><a id="43059" href="Demos.HSP.html#43059" class="Function">Equal</a> <a id="43065" class="Symbol">:</a> <a id="43067" class="Symbol">{</a><a id="43068" href="Demos.HSP.html#43068" class="Bound">X</a> <a id="43070" class="Symbol">:</a> <a id="43072" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="43077" href="Demos.HSP.html#7635" class="Generalizable">œá</a><a id="43078" class="Symbol">}(</a><a id="43080" href="Demos.HSP.html#43080" class="Bound">s</a> <a id="43082" href="Demos.HSP.html#43082" class="Bound">t</a> <a id="43084" class="Symbol">:</a> <a id="43086" href="Demos.HSP.html#39820" class="Datatype">Term</a> <a id="43091" href="Demos.HSP.html#43068" class="Bound">X</a><a id="43092" class="Symbol">)</a> <a id="43094" class="Symbol">‚Üí</a> <a id="43096" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="43101" class="Symbol">_</a>
 <a id="43104" href="Demos.HSP.html#43059" class="Function">Equal</a> <a id="43110" class="Symbol">{</a><a id="43111" class="Argument">X</a> <a id="43113" class="Symbol">=</a> <a id="43115" href="Demos.HSP.html#43115" class="Bound">X</a><a id="43116" class="Symbol">}</a> <a id="43118" href="Demos.HSP.html#43118" class="Bound">s</a> <a id="43120" href="Demos.HSP.html#43120" class="Bound">t</a> <a id="43122" class="Symbol">=</a> <a id="43124" class="Symbol">‚àÄ</a> <a id="43126" class="Symbol">(</a><a id="43127" href="Demos.HSP.html#43127" class="Bound">œÅ</a> <a id="43129" class="Symbol">:</a> <a id="43131" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="43139" class="Symbol">(</a><a id="43140" href="Demos.HSP.html#42214" class="Function">Env</a> <a id="43144" href="Demos.HSP.html#43115" class="Bound">X</a><a id="43145" class="Symbol">))</a> <a id="43148" class="Symbol">‚Üí</a> <a id="43150" href="Demos.HSP.html#42685" class="Function Operator">‚ü¶</a> <a id="43152" href="Demos.HSP.html#43118" class="Bound">s</a> <a id="43154" href="Demos.HSP.html#42685" class="Function Operator">‚üß</a> <a id="43156" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="43160" href="Demos.HSP.html#43127" class="Bound">œÅ</a> <a id="43162" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a> <a id="43164" href="Demos.HSP.html#42685" class="Function Operator">‚ü¶</a> <a id="43166" href="Demos.HSP.html#43120" class="Bound">t</a> <a id="43168" href="Demos.HSP.html#42685" class="Function Operator">‚üß</a> <a id="43170" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="43174" href="Demos.HSP.html#43127" class="Bound">œÅ</a>

</pre>
Proof that `Equal` is an equivalence relation, and that the implication `s ‚âÉ t ‚Üí Equal s t` holds for all terms `s` and `t`, are also found in¬†[@Abel:2021]. We reproduce them here to keep the presentation self-contained.

<pre class="Agda">

 <a id="Environment.‚âÉ‚ÜíEqual"></a><a id="43425" href="Demos.HSP.html#43425" class="Function">‚âÉ‚ÜíEqual</a> <a id="43433" class="Symbol">:</a> <a id="43435" class="Symbol">{</a><a id="43436" href="Demos.HSP.html#43436" class="Bound">X</a> <a id="43438" class="Symbol">:</a> <a id="43440" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="43445" href="Demos.HSP.html#7635" class="Generalizable">œá</a><a id="43446" class="Symbol">}(</a><a id="43448" href="Demos.HSP.html#43448" class="Bound">s</a> <a id="43450" href="Demos.HSP.html#43450" class="Bound">t</a> <a id="43452" class="Symbol">:</a> <a id="43454" href="Demos.HSP.html#39820" class="Datatype">Term</a> <a id="43459" href="Demos.HSP.html#43436" class="Bound">X</a><a id="43460" class="Symbol">)</a> <a id="43462" class="Symbol">‚Üí</a> <a id="43464" href="Demos.HSP.html#43448" class="Bound">s</a> <a id="43466" href="Demos.HSP.html#40246" class="Datatype Operator">‚âÉ</a> <a id="43468" href="Demos.HSP.html#43450" class="Bound">t</a> <a id="43470" class="Symbol">‚Üí</a> <a id="43472" href="Demos.HSP.html#43059" class="Function">Equal</a> <a id="43478" href="Demos.HSP.html#43448" class="Bound">s</a> <a id="43480" href="Demos.HSP.html#43450" class="Bound">t</a>
 <a id="43483" href="Demos.HSP.html#43425" class="Function">‚âÉ‚ÜíEqual</a> <a id="43491" class="DottedPattern Symbol">.(</a><a id="43493" href="Demos.HSP.html#39860" class="DottedPattern InductiveConstructor">‚Ñä</a> <a id="43495" class="DottedPattern Symbol">_)</a> <a id="43498" class="DottedPattern Symbol">.(</a><a id="43500" href="Demos.HSP.html#39860" class="DottedPattern InductiveConstructor">‚Ñä</a> <a id="43502" class="DottedPattern Symbol">_)</a> <a id="43505" class="Symbol">(</a><a id="43506" href="Demos.HSP.html#40290" class="InductiveConstructor">rfl</a> <a id="43510" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a><a id="43516" class="Symbol">)</a> <a id="43518" class="Symbol">=</a> <a id="43520" class="Symbol">Œª</a> <a id="43522" href="Demos.HSP.html#43522" class="Bound">_</a> <a id="43524" class="Symbol">‚Üí</a> <a id="43526" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>
 <a id="43532" href="Demos.HSP.html#43425" class="Function">‚âÉ‚ÜíEqual</a> <a id="43540" class="Symbol">(</a><a id="43541" href="Demos.HSP.html#39876" class="InductiveConstructor">node</a> <a id="43546" class="Symbol">_</a> <a id="43548" href="Demos.HSP.html#43548" class="Bound">s</a><a id="43549" class="Symbol">)(</a><a id="43551" href="Demos.HSP.html#39876" class="InductiveConstructor">node</a> <a id="43556" class="Symbol">_</a> <a id="43558" href="Demos.HSP.html#43558" class="Bound">t</a><a id="43559" class="Symbol">)(</a><a id="43561" href="Demos.HSP.html#40332" class="InductiveConstructor">gnl</a> <a id="43565" href="Demos.HSP.html#43565" class="Bound">x</a><a id="43566" class="Symbol">)</a> <a id="43568" class="Symbol">=</a>
  <a id="43572" class="Symbol">Œª</a> <a id="43574" href="Demos.HSP.html#43574" class="Bound">œÅ</a> <a id="43576" class="Symbol">‚Üí</a> <a id="43578" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="43583" class="Symbol">(</a><a id="43584" href="Demos.HSP.html#18845" class="Field">Interp</a> <a id="43591" href="Demos.HSP.html#42134" class="Bound">ùë®</a><a id="43592" class="Symbol">)(</a><a id="43594" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="43601" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="43603" class="Symbol">Œª</a> <a id="43605" href="Demos.HSP.html#43605" class="Bound">i</a> <a id="43607" class="Symbol">‚Üí</a> <a id="43609" href="Demos.HSP.html#43425" class="Function">‚âÉ‚ÜíEqual</a><a id="43616" class="Symbol">(</a><a id="43617" href="Demos.HSP.html#43548" class="Bound">s</a> <a id="43619" href="Demos.HSP.html#43605" class="Bound">i</a><a id="43620" class="Symbol">)(</a><a id="43622" href="Demos.HSP.html#43558" class="Bound">t</a> <a id="43624" href="Demos.HSP.html#43605" class="Bound">i</a><a id="43625" class="Symbol">)(</a><a id="43627" href="Demos.HSP.html#43565" class="Bound">x</a> <a id="43629" href="Demos.HSP.html#43605" class="Bound">i</a><a id="43630" class="Symbol">)</a><a id="43631" href="Demos.HSP.html#43574" class="Bound">œÅ</a> <a id="43633" class="Symbol">)</a>

 <a id="Environment.EqualIsEquiv"></a><a id="43637" href="Demos.HSP.html#43637" class="Function">EqualIsEquiv</a> <a id="43650" class="Symbol">:</a> <a id="43652" class="Symbol">{</a><a id="43653" href="Demos.HSP.html#43653" class="Bound">Œì</a> <a id="43655" class="Symbol">:</a> <a id="43657" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="43662" href="Demos.HSP.html#7635" class="Generalizable">œá</a><a id="43663" class="Symbol">}</a> <a id="43665" class="Symbol">‚Üí</a> <a id="43667" href="Relation.Binary.Structures.html#1522" class="Record">IsEquivalence</a> <a id="43681" class="Symbol">(</a><a id="43682" href="Demos.HSP.html#43059" class="Function">Equal</a> <a id="43688" class="Symbol">{</a><a id="43689" class="Argument">X</a> <a id="43691" class="Symbol">=</a> <a id="43693" href="Demos.HSP.html#43653" class="Bound">Œì</a><a id="43694" class="Symbol">})</a>
 <a id="43698" href="Demos.HSP.html#6883" class="Field">refl·µâ</a>   <a id="43706" href="Demos.HSP.html#43637" class="Function">EqualIsEquiv</a> <a id="43719" class="Symbol">=</a> <a id="43721" class="Symbol">Œª</a> <a id="43723" href="Demos.HSP.html#43723" class="Bound">_</a>        <a id="43732" class="Symbol">‚Üí</a> <a id="43734" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>
 <a id="43740" href="Demos.HSP.html#6944" class="Field">sym·µâ</a>    <a id="43748" href="Demos.HSP.html#43637" class="Function">EqualIsEquiv</a> <a id="43761" class="Symbol">=</a> <a id="43763" class="Symbol">Œª</a> <a id="43765" href="Demos.HSP.html#43765" class="Bound">x=y</a> <a id="43769" href="Demos.HSP.html#43769" class="Bound">œÅ</a>    <a id="43774" class="Symbol">‚Üí</a> <a id="43776" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="43780" class="Symbol">(</a><a id="43781" href="Demos.HSP.html#43765" class="Bound">x=y</a> <a id="43785" href="Demos.HSP.html#43769" class="Bound">œÅ</a><a id="43786" class="Symbol">)</a>
 <a id="43789" href="Demos.HSP.html#7005" class="Field">trans·µâ</a>  <a id="43797" href="Demos.HSP.html#43637" class="Function">EqualIsEquiv</a> <a id="43810" class="Symbol">=</a> <a id="43812" class="Symbol">Œª</a> <a id="43814" href="Demos.HSP.html#43814" class="Bound">ij</a> <a id="43817" href="Demos.HSP.html#43817" class="Bound">jk</a> <a id="43820" href="Demos.HSP.html#43820" class="Bound">œÅ</a>  <a id="43823" class="Symbol">‚Üí</a> <a id="43825" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="43831" class="Symbol">(</a><a id="43832" href="Demos.HSP.html#43814" class="Bound">ij</a> <a id="43835" href="Demos.HSP.html#43820" class="Bound">œÅ</a><a id="43836" class="Symbol">)</a> <a id="43838" class="Symbol">(</a><a id="43839" href="Demos.HSP.html#43817" class="Bound">jk</a> <a id="43842" href="Demos.HSP.html#43820" class="Bound">œÅ</a><a id="43843" class="Symbol">)</a>
</pre>



#### Compatibility of terms {#compatibility-of-terms .unnumbered}

We need to formalize two more concepts involving terms.
The first (`comm-hom-term`) is the assertion that every term commutes with every homomorphism, and
the second (`interp-prod`) is the interpretation of a term in a product algebra.

<pre class="Agda">

<a id="44177" class="Keyword">module</a> <a id="44184" href="Demos.HSP.html#44184" class="Module">_</a> <a id="44186" class="Symbol">{</a><a id="44187" href="Demos.HSP.html#44187" class="Bound">X</a> <a id="44189" class="Symbol">:</a> <a id="44191" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="44196" href="Demos.HSP.html#7635" class="Generalizable">œá</a><a id="44197" class="Symbol">}{</a><a id="44199" href="Demos.HSP.html#44199" class="Bound">ùë®</a> <a id="44201" class="Symbol">:</a> <a id="44203" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="44211" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="44213" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a><a id="44215" class="Symbol">}{</a><a id="44217" href="Demos.HSP.html#44217" class="Bound">ùë©</a> <a id="44219" class="Symbol">:</a> <a id="44221" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="44229" href="Demos.HSP.html#7618" class="Generalizable">Œ≤</a> <a id="44231" href="Demos.HSP.html#7620" class="Generalizable">œÅ·µá</a><a id="44233" class="Symbol">}(</a><a id="44235" href="Demos.HSP.html#44235" class="Bound">hh</a> <a id="44238" class="Symbol">:</a> <a id="44240" href="Demos.HSP.html#26745" class="Function">hom</a> <a id="44244" href="Demos.HSP.html#44199" class="Bound">ùë®</a> <a id="44246" href="Demos.HSP.html#44217" class="Bound">ùë©</a><a id="44247" class="Symbol">)</a> <a id="44249" class="Keyword">where</a>
 <a id="44256" class="Keyword">open</a> <a id="44261" href="Demos.HSP.html#42121" class="Module">Environment</a> <a id="44273" href="Demos.HSP.html#44199" class="Bound">ùë®</a>  <a id="44276" class="Keyword">using</a> <a id="44282" class="Symbol">(</a> <a id="44284" href="Demos.HSP.html#42685" class="Function Operator">‚ü¶_‚üß</a> <a id="44288" class="Symbol">)</a>
 <a id="44291" class="Keyword">open</a> <a id="44296" href="Demos.HSP.html#42121" class="Module">Environment</a> <a id="44308" href="Demos.HSP.html#44217" class="Bound">ùë©</a>  <a id="44311" class="Keyword">using</a> <a id="44317" class="Symbol">()</a> <a id="44320" class="Keyword">renaming</a> <a id="44329" class="Symbol">(</a> <a id="44331" href="Demos.HSP.html#42685" class="Function Operator">‚ü¶_‚üß</a> <a id="44335" class="Symbol">to</a> <a id="44338" class="Function Operator">‚ü¶_‚üß·¥Æ</a> <a id="44343" class="Symbol">)</a>
 <a id="44346" class="Keyword">open</a> <a id="44351" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="44358" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="44361" href="Demos.HSP.html#44217" class="Bound">ùë©</a> <a id="44363" href="Demos.HSP.html#19405" class="Function Operator">]</a>  <a id="44366" class="Keyword">using</a> <a id="44372" class="Symbol">(</a> <a id="44374" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="44378" class="Symbol">;</a> <a id="44380" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>  <a id="44386" class="Symbol">)</a>
 <a id="44389" class="Keyword">private</a> <a id="44397" href="Demos.HSP.html#44397" class="Function">hfunc</a> <a id="44403" class="Symbol">=</a> <a id="44405" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="44407" href="Demos.HSP.html#44235" class="Bound">hh</a> <a id="44410" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="44412" class="Symbol">;</a> <a id="44414" href="Demos.HSP.html#44414" class="Function">h</a> <a id="44416" class="Symbol">=</a> <a id="44418" href="Demos.HSP.html#6781" class="Field Operator">_‚ü®$‚ü©_</a> <a id="44424" href="Demos.HSP.html#44397" class="Function">hfunc</a>

 <a id="44432" href="Demos.HSP.html#44432" class="Function">comm-hom-term</a> <a id="44446" class="Symbol">:</a> <a id="44448" class="Symbol">(</a><a id="44449" href="Demos.HSP.html#44449" class="Bound">t</a> <a id="44451" class="Symbol">:</a> <a id="44453" href="Demos.HSP.html#39820" class="Datatype">Term</a> <a id="44458" href="Demos.HSP.html#44187" class="Bound">X</a><a id="44459" class="Symbol">)</a> <a id="44461" class="Symbol">(</a><a id="44462" href="Demos.HSP.html#44462" class="Bound">a</a> <a id="44464" class="Symbol">:</a> <a id="44466" href="Demos.HSP.html#44187" class="Bound">X</a> <a id="44468" class="Symbol">‚Üí</a> <a id="44470" href="Demos.HSP.html#19459" class="Function Operator">ùïå[</a> <a id="44473" href="Demos.HSP.html#44199" class="Bound">ùë®</a> <a id="44475" href="Demos.HSP.html#19459" class="Function Operator">]</a><a id="44476" class="Symbol">)</a> <a id="44478" class="Symbol">‚Üí</a> <a id="44480" href="Demos.HSP.html#44414" class="Function">h</a> <a id="44482" class="Symbol">(</a><a id="44483" href="Demos.HSP.html#42685" class="Function Operator">‚ü¶</a> <a id="44485" href="Demos.HSP.html#44449" class="Bound">t</a> <a id="44487" href="Demos.HSP.html#42685" class="Function Operator">‚üß</a> <a id="44489" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="44493" href="Demos.HSP.html#44462" class="Bound">a</a><a id="44494" class="Symbol">)</a> <a id="44496" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a> <a id="44498" href="Demos.HSP.html#44338" class="Function Operator">‚ü¶</a> <a id="44500" href="Demos.HSP.html#44449" class="Bound">t</a> <a id="44502" href="Demos.HSP.html#44338" class="Function Operator">‚üß·¥Æ</a> <a id="44505" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="44509" class="Symbol">(</a><a id="44510" href="Demos.HSP.html#44414" class="Function">h</a> <a id="44512" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="44514" href="Demos.HSP.html#44462" class="Bound">a</a><a id="44515" class="Symbol">)</a>
 <a id="44518" href="Demos.HSP.html#44432" class="Function">comm-hom-term</a> <a id="44532" class="Symbol">(</a><a id="44533" href="Demos.HSP.html#39860" class="InductiveConstructor">‚Ñä</a> <a id="44535" href="Demos.HSP.html#44535" class="Bound">x</a><a id="44536" class="Symbol">)</a> <a id="44538" href="Demos.HSP.html#44538" class="Bound">a</a> <a id="44540" class="Symbol">=</a> <a id="44542" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>
 <a id="44548" href="Demos.HSP.html#44432" class="Function">comm-hom-term</a> <a id="44562" class="Symbol">(</a><a id="44563" href="Demos.HSP.html#39876" class="InductiveConstructor">node</a> <a id="44568" href="Demos.HSP.html#44568" class="Bound">f</a> <a id="44570" href="Demos.HSP.html#44570" class="Bound">t</a><a id="44571" class="Symbol">)</a> <a id="44573" href="Demos.HSP.html#44573" class="Bound">a</a> <a id="44575" class="Symbol">=</a>  <a id="44578" href="Relation.Binary.Reasoning.Base.Single.html#1916" class="Function Operator">begin</a>
   <a id="44587" href="Demos.HSP.html#44414" class="Function">h</a><a id="44588" class="Symbol">(</a><a id="44589" href="Demos.HSP.html#42685" class="Function Operator">‚ü¶</a> <a id="44591" href="Demos.HSP.html#39876" class="InductiveConstructor">node</a> <a id="44596" href="Demos.HSP.html#44568" class="Bound">f</a> <a id="44598" href="Demos.HSP.html#44570" class="Bound">t</a> <a id="44600" href="Demos.HSP.html#42685" class="Function Operator">‚üß</a> <a id="44602" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="44606" href="Demos.HSP.html#44573" class="Bound">a</a><a id="44607" class="Symbol">)</a>            <a id="44620" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a> <a id="44623" href="Demos.HSP.html#26713" class="Field">compatible</a> <a id="44634" href="Demos.HSP.html#8301" class="Function Operator">‚à•</a> <a id="44636" href="Demos.HSP.html#44235" class="Bound">hh</a> <a id="44639" href="Demos.HSP.html#8301" class="Function Operator">‚à•</a> <a id="44641" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
   <a id="44646" class="Symbol">(</a><a id="44647" href="Demos.HSP.html#44568" class="Bound">f</a> <a id="44649" href="Demos.HSP.html#19518" class="Function Operator">ÃÇ</a> <a id="44651" href="Demos.HSP.html#44217" class="Bound">ùë©</a><a id="44652" class="Symbol">)(Œª</a> <a id="44656" href="Demos.HSP.html#44656" class="Bound">i</a> <a id="44658" class="Symbol">‚Üí</a> <a id="44660" href="Demos.HSP.html#44414" class="Function">h</a><a id="44661" class="Symbol">(</a><a id="44662" href="Demos.HSP.html#42685" class="Function Operator">‚ü¶</a> <a id="44664" href="Demos.HSP.html#44570" class="Bound">t</a> <a id="44666" href="Demos.HSP.html#44656" class="Bound">i</a> <a id="44668" href="Demos.HSP.html#42685" class="Function Operator">‚üß</a> <a id="44670" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="44674" href="Demos.HSP.html#44573" class="Bound">a</a><a id="44675" class="Symbol">))</a>  <a id="44679" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a> <a id="44682" href="Function.Bundles.html#1938" class="Field">cong</a><a id="44686" class="Symbol">(</a><a id="44687" href="Demos.HSP.html#18845" class="Field">Interp</a> <a id="44694" href="Demos.HSP.html#44217" class="Bound">ùë©</a><a id="44695" class="Symbol">)(</a><a id="44697" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="44704" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="44706" class="Symbol">Œª</a> <a id="44708" href="Demos.HSP.html#44708" class="Bound">i</a> <a id="44710" class="Symbol">‚Üí</a> <a id="44712" href="Demos.HSP.html#44432" class="Function">comm-hom-term</a><a id="44725" class="Symbol">(</a><a id="44726" href="Demos.HSP.html#44570" class="Bound">t</a> <a id="44728" href="Demos.HSP.html#44708" class="Bound">i</a><a id="44729" class="Symbol">)</a> <a id="44731" href="Demos.HSP.html#44573" class="Bound">a</a><a id="44732" class="Symbol">)</a> <a id="44734" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
   <a id="44739" href="Demos.HSP.html#44338" class="Function Operator">‚ü¶</a> <a id="44741" href="Demos.HSP.html#39876" class="InductiveConstructor">node</a> <a id="44746" href="Demos.HSP.html#44568" class="Bound">f</a> <a id="44748" href="Demos.HSP.html#44570" class="Bound">t</a> <a id="44750" href="Demos.HSP.html#44338" class="Function Operator">‚üß·¥Æ</a> <a id="44753" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="44757" class="Symbol">(</a><a id="44758" href="Demos.HSP.html#44414" class="Function">h</a> <a id="44760" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="44762" href="Demos.HSP.html#44573" class="Bound">a</a><a id="44763" class="Symbol">)</a>   <a id="44767" href="Relation.Binary.Reasoning.Base.Single.html#2555" class="Function Operator">‚àé</a> <a id="44769" class="Keyword">where</a> <a id="44775" class="Keyword">open</a> <a id="44780" href="Relation.Binary.Reasoning.Setoid.html" class="Module">SetoidReasoning</a> <a id="44796" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="44799" href="Demos.HSP.html#44217" class="Bound">ùë©</a> <a id="44801" href="Demos.HSP.html#19405" class="Function Operator">]</a>

<a id="44804" class="Keyword">module</a> <a id="44811" href="Demos.HSP.html#44811" class="Module">_</a> <a id="44813" class="Symbol">{</a><a id="44814" href="Demos.HSP.html#44814" class="Bound">X</a> <a id="44816" class="Symbol">:</a> <a id="44818" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="44823" href="Demos.HSP.html#7635" class="Generalizable">œá</a><a id="44824" class="Symbol">}{</a><a id="44826" href="Demos.HSP.html#44826" class="Bound">Œπ</a> <a id="44828" class="Symbol">:</a> <a id="44830" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="44835" class="Symbol">}</a> <a id="44837" class="Symbol">{</a><a id="44838" href="Demos.HSP.html#44838" class="Bound">I</a> <a id="44840" class="Symbol">:</a> <a id="44842" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="44847" href="Demos.HSP.html#44826" class="Bound">Œπ</a><a id="44848" class="Symbol">}</a> <a id="44850" class="Symbol">(</a><a id="44851" href="Demos.HSP.html#44851" class="Bound">ùíú</a> <a id="44853" class="Symbol">:</a> <a id="44855" href="Demos.HSP.html#44838" class="Bound">I</a> <a id="44857" class="Symbol">‚Üí</a> <a id="44859" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="44867" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="44869" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a><a id="44871" class="Symbol">)</a> <a id="44873" class="Keyword">where</a>
 <a id="44880" class="Keyword">open</a> <a id="44885" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="44892" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="44895" href="Demos.HSP.html#24369" class="Function">‚®Ö</a> <a id="44897" href="Demos.HSP.html#44851" class="Bound">ùíú</a> <a id="44899" href="Demos.HSP.html#19405" class="Function Operator">]</a>  <a id="44902" class="Keyword">using</a> <a id="44908" class="Symbol">(</a> <a id="44910" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="44914" class="Symbol">)</a>
 <a id="44917" class="Keyword">open</a> <a id="44922" href="Demos.HSP.html#42121" class="Module">Environment</a>      <a id="44939" class="Keyword">using</a> <a id="44945" class="Symbol">(</a> <a id="44947" href="Demos.HSP.html#42685" class="Function Operator">‚ü¶_‚üß</a> <a id="44951" class="Symbol">;</a> <a id="44953" href="Demos.HSP.html#43425" class="Function">‚âÉ‚ÜíEqual</a> <a id="44961" class="Symbol">)</a>

 <a id="44965" href="Demos.HSP.html#44965" class="Function">interp-prod</a> <a id="44977" class="Symbol">:</a> <a id="44979" class="Symbol">(</a><a id="44980" href="Demos.HSP.html#44980" class="Bound">p</a> <a id="44982" class="Symbol">:</a> <a id="44984" href="Demos.HSP.html#39820" class="Datatype">Term</a> <a id="44989" href="Demos.HSP.html#44814" class="Bound">X</a><a id="44990" class="Symbol">)</a> <a id="44992" class="Symbol">‚Üí</a> <a id="44994" class="Symbol">‚àÄ</a> <a id="44996" href="Demos.HSP.html#44996" class="Bound">œÅ</a> <a id="44998" class="Symbol">‚Üí</a>  <a id="45001" class="Symbol">(</a><a id="45002" href="Demos.HSP.html#42685" class="Function Operator">‚ü¶</a> <a id="45004" href="Demos.HSP.html#24369" class="Function">‚®Ö</a> <a id="45006" href="Demos.HSP.html#44851" class="Bound">ùíú</a> <a id="45008" href="Demos.HSP.html#42685" class="Function Operator">‚üß</a> <a id="45010" href="Demos.HSP.html#44980" class="Bound">p</a><a id="45011" class="Symbol">)</a> <a id="45013" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="45017" href="Demos.HSP.html#44996" class="Bound">œÅ</a>   <a id="45021" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a>   <a id="45025" class="Symbol">Œª</a> <a id="45027" href="Demos.HSP.html#45027" class="Bound">i</a> <a id="45029" class="Symbol">‚Üí</a> <a id="45031" class="Symbol">(</a><a id="45032" href="Demos.HSP.html#42685" class="Function Operator">‚ü¶</a> <a id="45034" href="Demos.HSP.html#44851" class="Bound">ùíú</a> <a id="45036" href="Demos.HSP.html#45027" class="Bound">i</a> <a id="45038" href="Demos.HSP.html#42685" class="Function Operator">‚üß</a> <a id="45040" href="Demos.HSP.html#44980" class="Bound">p</a><a id="45041" class="Symbol">)</a> <a id="45043" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="45047" class="Symbol">Œª</a> <a id="45049" href="Demos.HSP.html#45049" class="Bound">x</a> <a id="45051" class="Symbol">‚Üí</a> <a id="45053" class="Symbol">(</a><a id="45054" href="Demos.HSP.html#44996" class="Bound">œÅ</a> <a id="45056" href="Demos.HSP.html#45049" class="Bound">x</a><a id="45057" class="Symbol">)</a> <a id="45059" href="Demos.HSP.html#45027" class="Bound">i</a>
 <a id="45062" href="Demos.HSP.html#44965" class="Function">interp-prod</a> <a id="45074" class="Symbol">(</a><a id="45075" href="Demos.HSP.html#39860" class="InductiveConstructor">‚Ñä</a> <a id="45077" href="Demos.HSP.html#45077" class="Bound">x</a><a id="45078" class="Symbol">)</a>       <a id="45086" class="Symbol">=</a> <a id="45088" class="Symbol">Œª</a> <a id="45090" href="Demos.HSP.html#45090" class="Bound">œÅ</a> <a id="45092" href="Demos.HSP.html#45092" class="Bound">i</a>  <a id="45095" class="Symbol">‚Üí</a> <a id="45097" href="Demos.HSP.html#43425" class="Function">‚âÉ‚ÜíEqual</a> <a id="45105" class="Symbol">(</a><a id="45106" href="Demos.HSP.html#44851" class="Bound">ùíú</a> <a id="45108" href="Demos.HSP.html#45092" class="Bound">i</a><a id="45109" class="Symbol">)</a> <a id="45111" class="Symbol">(</a><a id="45112" href="Demos.HSP.html#39860" class="InductiveConstructor">‚Ñä</a> <a id="45114" href="Demos.HSP.html#45077" class="Bound">x</a><a id="45115" class="Symbol">)</a> <a id="45117" class="Symbol">(</a><a id="45118" href="Demos.HSP.html#39860" class="InductiveConstructor">‚Ñä</a> <a id="45120" href="Demos.HSP.html#45077" class="Bound">x</a><a id="45121" class="Symbol">)</a> <a id="45123" href="Demos.HSP.html#40516" class="Function">‚âÉ-isRefl</a> <a id="45132" class="Symbol">Œª</a> <a id="45134" href="Demos.HSP.html#45134" class="Bound">_</a> <a id="45136" class="Symbol">‚Üí</a> <a id="45138" class="Symbol">(</a><a id="45139" href="Demos.HSP.html#45090" class="Bound">œÅ</a> <a id="45141" href="Demos.HSP.html#45077" class="Bound">x</a><a id="45142" class="Symbol">)</a> <a id="45144" href="Demos.HSP.html#45092" class="Bound">i</a>
 <a id="45147" href="Demos.HSP.html#44965" class="Function">interp-prod</a> <a id="45159" class="Symbol">(</a><a id="45160" href="Demos.HSP.html#39876" class="InductiveConstructor">node</a> <a id="45165" href="Demos.HSP.html#45165" class="Bound">f</a> <a id="45167" href="Demos.HSP.html#45167" class="Bound">t</a><a id="45168" class="Symbol">)</a>  <a id="45171" class="Symbol">=</a> <a id="45173" class="Symbol">Œª</a> <a id="45175" href="Demos.HSP.html#45175" class="Bound">œÅ</a>    <a id="45180" class="Symbol">‚Üí</a> <a id="45182" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="45187" class="Symbol">(</a><a id="45188" href="Demos.HSP.html#18845" class="Field">Interp</a> <a id="45195" class="Symbol">(</a><a id="45196" href="Demos.HSP.html#24369" class="Function">‚®Ö</a> <a id="45198" href="Demos.HSP.html#44851" class="Bound">ùíú</a><a id="45199" class="Symbol">))</a> <a id="45202" class="Symbol">(</a> <a id="45204" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="45211" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="45213" class="Symbol">Œª</a> <a id="45215" href="Demos.HSP.html#45215" class="Bound">j</a> <a id="45217" href="Demos.HSP.html#45217" class="Bound">k</a> <a id="45219" class="Symbol">‚Üí</a> <a id="45221" href="Demos.HSP.html#44965" class="Function">interp-prod</a> <a id="45233" class="Symbol">(</a><a id="45234" href="Demos.HSP.html#45167" class="Bound">t</a> <a id="45236" href="Demos.HSP.html#45215" class="Bound">j</a><a id="45237" class="Symbol">)</a> <a id="45239" href="Demos.HSP.html#45175" class="Bound">œÅ</a> <a id="45241" href="Demos.HSP.html#45217" class="Bound">k</a> <a id="45243" class="Symbol">)</a>
</pre>

Equational Logic
================

#### Term identities, equational theories, and the ‚äß relation {#term-identities-equational-theories-and-the-relation .unnumbered}

An `ùëÜ`-*term equation* (or `ùëÜ`-*term identity*) is an ordered pair `(p , q)` of `ùëÜ`-terms, also denoted by `p ‚âà q`. They are often simply called *equations* or *identities*, especially when the signature `ùëÜ` is evident.
We define an *equational theory* (or *algebraic theory*) to be a pair `T = (ùëÜ , ‚Ñ∞)` consisting of a signature `ùëÜ` and a collection `‚Ñ∞` of `ùëÜ`-term equations.[^9]

We say that the algebra `ùë®` *models* the identity `p ‚âà q` and we write `ùë® ‚äß p ‚âà q`
if for all `œÅ : X ‚Üí ùîª[ ùë® ]` we have `‚ü¶ p ‚üß ‚ü®$‚ü© œÅ ‚âà ‚ü¶ q ‚üß ‚ü®$‚ü© œÅ`.
In other words, when interpreted in the algebra `ùë®`, the terms `p` and `q` are equal no matter what values are assigned to variable symbols occurring in `p` and `q`.

If `ùí¶` is a class of algebras of a given signature, then we write `ùí¶ ‚ä´ p ‚âà q` and say that `ùí¶` *models* the identity `p ‚âà q` provided `ùë® ‚äß p ‚âà q` for every `ùë® ‚àà ùí¶`.

<pre class="Agda">

<a id="46301" class="Keyword">module</a> <a id="46308" href="Demos.HSP.html#46308" class="Module">_</a> <a id="46310" class="Symbol">{</a><a id="46311" href="Demos.HSP.html#46311" class="Bound">X</a> <a id="46313" class="Symbol">:</a> <a id="46315" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="46320" href="Demos.HSP.html#7635" class="Generalizable">œá</a><a id="46321" class="Symbol">}</a> <a id="46323" class="Keyword">where</a>
 <a id="46330" href="Demos.HSP.html#46330" class="Function Operator">_‚äß_‚âà_</a> <a id="46336" class="Symbol">:</a> <a id="46338" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="46346" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="46348" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a> <a id="46351" class="Symbol">‚Üí</a> <a id="46353" href="Demos.HSP.html#39820" class="Datatype">Term</a> <a id="46358" href="Demos.HSP.html#46311" class="Bound">X</a> <a id="46360" class="Symbol">‚Üí</a> <a id="46362" href="Demos.HSP.html#39820" class="Datatype">Term</a> <a id="46367" href="Demos.HSP.html#46311" class="Bound">X</a> <a id="46369" class="Symbol">‚Üí</a> <a id="46371" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="46376" class="Symbol">_</a>
 <a id="46379" href="Demos.HSP.html#46379" class="Bound">ùë®</a> <a id="46381" href="Demos.HSP.html#46330" class="Function Operator">‚äß</a> <a id="46383" href="Demos.HSP.html#46383" class="Bound">p</a> <a id="46385" href="Demos.HSP.html#46330" class="Function Operator">‚âà</a> <a id="46387" href="Demos.HSP.html#46387" class="Bound">q</a> <a id="46389" class="Symbol">=</a> <a id="46391" href="Demos.HSP.html#43059" class="Function">Equal</a> <a id="46397" href="Demos.HSP.html#46383" class="Bound">p</a> <a id="46399" href="Demos.HSP.html#46387" class="Bound">q</a> <a id="46401" class="Keyword">where</a> <a id="46407" class="Keyword">open</a> <a id="46412" href="Demos.HSP.html#42121" class="Module">Environment</a> <a id="46424" href="Demos.HSP.html#46379" class="Bound">ùë®</a>

 <a id="46428" href="Demos.HSP.html#46428" class="Function Operator">_‚ä´_‚âà_</a> <a id="46434" class="Symbol">:</a> <a id="46436" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="46441" class="Symbol">(</a><a id="46442" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="46450" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="46452" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a><a id="46454" class="Symbol">)</a> <a id="46456" href="Demos.HSP.html#7637" class="Generalizable">‚Ñì</a> <a id="46458" class="Symbol">‚Üí</a> <a id="46460" href="Demos.HSP.html#39820" class="Datatype">Term</a> <a id="46465" href="Demos.HSP.html#46311" class="Bound">X</a> <a id="46467" class="Symbol">‚Üí</a> <a id="46469" href="Demos.HSP.html#39820" class="Datatype">Term</a> <a id="46474" href="Demos.HSP.html#46311" class="Bound">X</a> <a id="46476" class="Symbol">‚Üí</a> <a id="46478" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="46483" class="Symbol">_</a>
 <a id="46486" href="Demos.HSP.html#46486" class="Bound">ùí¶</a> <a id="46488" href="Demos.HSP.html#46428" class="Function Operator">‚ä´</a> <a id="46490" href="Demos.HSP.html#46490" class="Bound">p</a> <a id="46492" href="Demos.HSP.html#46428" class="Function Operator">‚âà</a> <a id="46494" href="Demos.HSP.html#46494" class="Bound">q</a> <a id="46496" class="Symbol">=</a> <a id="46498" class="Symbol">‚àÄ</a> <a id="46500" href="Demos.HSP.html#46500" class="Bound">ùë®</a> <a id="46502" class="Symbol">‚Üí</a> <a id="46504" href="Demos.HSP.html#46486" class="Bound">ùí¶</a> <a id="46506" href="Demos.HSP.html#46500" class="Bound">ùë®</a> <a id="46508" class="Symbol">‚Üí</a> <a id="46510" href="Demos.HSP.html#46500" class="Bound">ùë®</a> <a id="46512" href="Demos.HSP.html#46330" class="Function Operator">‚äß</a> <a id="46514" href="Demos.HSP.html#46490" class="Bound">p</a> <a id="46516" href="Demos.HSP.html#46330" class="Function Operator">‚âà</a> <a id="46518" href="Demos.HSP.html#46494" class="Bound">q</a>

</pre>
We represent a set of term identities as a predicate over pairs of terms, say, `‚Ñ∞ :  Pred(Term X √ó Term X)`, and we denote by `ùë® ‚ä® ‚Ñ∞` the assertion that `ùë®` models `p ‚âà q` for all `(p, q) ‚àà ‚Ñ∞`.

<pre class="Agda">

 <a id="46742" href="Demos.HSP.html#46742" class="Function Operator">_‚ä®_</a> <a id="46746" class="Symbol">:</a> <a id="46748" class="Symbol">(</a><a id="46749" href="Demos.HSP.html#46749" class="Bound">ùë®</a> <a id="46751" class="Symbol">:</a> <a id="46753" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="46761" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="46763" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a><a id="46765" class="Symbol">)</a> <a id="46767" class="Symbol">‚Üí</a> <a id="46769" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="46773" class="Symbol">(</a><a id="46774" href="Demos.HSP.html#39820" class="Datatype">Term</a> <a id="46779" href="Demos.HSP.html#46311" class="Bound">X</a> <a id="46781" href="Data.Product.html#1167" class="Function Operator">√ó</a> <a id="46783" href="Demos.HSP.html#39820" class="Datatype">Term</a> <a id="46788" href="Demos.HSP.html#46311" class="Bound">X</a><a id="46789" class="Symbol">)(</a><a id="46791" href="Demos.HSP.html#34955" class="Function">ov</a> <a id="46794" href="Demos.HSP.html#46320" class="Bound">œá</a><a id="46795" class="Symbol">)</a> <a id="46797" class="Symbol">‚Üí</a> <a id="46799" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="46804" class="Symbol">_</a>
 <a id="46807" href="Demos.HSP.html#46807" class="Bound">ùë®</a> <a id="46809" href="Demos.HSP.html#46742" class="Function Operator">‚ä®</a> <a id="46811" href="Demos.HSP.html#46811" class="Bound">‚Ñ∞</a> <a id="46813" class="Symbol">=</a> <a id="46815" class="Symbol">‚àÄ</a> <a id="46817" class="Symbol">{</a><a id="46818" href="Demos.HSP.html#46818" class="Bound">p</a> <a id="46820" href="Demos.HSP.html#46820" class="Bound">q</a><a id="46821" class="Symbol">}</a> <a id="46823" class="Symbol">‚Üí</a> <a id="46825" class="Symbol">(</a><a id="46826" href="Demos.HSP.html#46818" class="Bound">p</a> <a id="46828" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="46830" href="Demos.HSP.html#46820" class="Bound">q</a><a id="46831" class="Symbol">)</a> <a id="46833" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="46835" href="Demos.HSP.html#46811" class="Bound">‚Ñ∞</a> <a id="46837" class="Symbol">‚Üí</a> <a id="46839" href="Demos.HSP.html#43059" class="Function">Equal</a> <a id="46845" href="Demos.HSP.html#46818" class="Bound">p</a> <a id="46847" href="Demos.HSP.html#46820" class="Bound">q</a> <a id="46849" class="Keyword">where</a> <a id="46855" class="Keyword">open</a> <a id="46860" href="Demos.HSP.html#42121" class="Module">Environment</a> <a id="46872" href="Demos.HSP.html#46807" class="Bound">ùë®</a>

</pre>
(The symbol `‚ä®` is a stretched version of the models symbol `‚äß`,
so [Agda][] can distinguish between the two and parse expressions involving the types
`_‚ä®_` and `_‚äß_‚âà_`. In Emacs `agda2-mode`, the symbol `‚ä®` is produced by typing
`\|=`, while `‚äß` is produced with `\models`.)

An important property of the binary relation `‚äß` is *algebraic invariance* (i.e.,
invariance under isomorphism).  We formalize this property as follows.

<pre class="Agda">

<a id="47331" class="Keyword">module</a> <a id="47338" href="Demos.HSP.html#47338" class="Module">_</a> <a id="47340" class="Symbol">{</a><a id="47341" href="Demos.HSP.html#47341" class="Bound">X</a> <a id="47343" class="Symbol">:</a> <a id="47345" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="47350" href="Demos.HSP.html#7635" class="Generalizable">œá</a><a id="47351" class="Symbol">}{</a><a id="47353" href="Demos.HSP.html#47353" class="Bound">ùë®</a> <a id="47355" class="Symbol">:</a> <a id="47357" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="47365" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="47367" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a><a id="47369" class="Symbol">}(</a><a id="47371" href="Demos.HSP.html#47371" class="Bound">ùë©</a> <a id="47373" class="Symbol">:</a> <a id="47375" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="47383" href="Demos.HSP.html#7618" class="Generalizable">Œ≤</a> <a id="47385" href="Demos.HSP.html#7620" class="Generalizable">œÅ·µá</a><a id="47387" class="Symbol">)(</a><a id="47389" href="Demos.HSP.html#47389" class="Bound">p</a> <a id="47391" href="Demos.HSP.html#47391" class="Bound">q</a> <a id="47393" class="Symbol">:</a> <a id="47395" href="Demos.HSP.html#39820" class="Datatype">Term</a> <a id="47400" href="Demos.HSP.html#47341" class="Bound">X</a><a id="47401" class="Symbol">)</a> <a id="47403" class="Keyword">where</a>
 <a id="47410" href="Demos.HSP.html#47410" class="Function">‚äß-I-invar</a> <a id="47420" class="Symbol">:</a> <a id="47422" href="Demos.HSP.html#47353" class="Bound">ùë®</a> <a id="47424" href="Demos.HSP.html#46330" class="Function Operator">‚äß</a> <a id="47426" href="Demos.HSP.html#47389" class="Bound">p</a> <a id="47428" href="Demos.HSP.html#46330" class="Function Operator">‚âà</a> <a id="47430" href="Demos.HSP.html#47391" class="Bound">q</a>  <a id="47433" class="Symbol">‚Üí</a>  <a id="47436" href="Demos.HSP.html#47353" class="Bound">ùë®</a> <a id="47438" href="Demos.HSP.html#33000" class="Record Operator">‚âÖ</a> <a id="47440" href="Demos.HSP.html#47371" class="Bound">ùë©</a>  <a id="47443" class="Symbol">‚Üí</a>  <a id="47446" href="Demos.HSP.html#47371" class="Bound">ùë©</a> <a id="47448" href="Demos.HSP.html#46330" class="Function Operator">‚äß</a> <a id="47450" href="Demos.HSP.html#47389" class="Bound">p</a> <a id="47452" href="Demos.HSP.html#46330" class="Function Operator">‚âà</a> <a id="47454" href="Demos.HSP.html#47391" class="Bound">q</a>
 <a id="47457" href="Demos.HSP.html#47410" class="Function">‚äß-I-invar</a> <a id="47467" href="Demos.HSP.html#47467" class="Bound">Apq</a> <a id="47471" class="Symbol">(</a><a id="47472" href="Demos.HSP.html#33059" class="InductiveConstructor">mkiso</a> <a id="47478" href="Demos.HSP.html#47478" class="Bound">fh</a> <a id="47481" href="Demos.HSP.html#47481" class="Bound">gh</a> <a id="47484" href="Demos.HSP.html#47484" class="Bound">f‚àºg</a> <a id="47488" href="Demos.HSP.html#47488" class="Bound">g‚àºf</a><a id="47491" class="Symbol">)</a> <a id="47493" href="Demos.HSP.html#47493" class="Bound">œÅ</a> <a id="47495" class="Symbol">=</a> <a id="47497" href="Relation.Binary.Reasoning.Base.Single.html#1916" class="Function Operator">begin</a>
  <a id="47505" href="Demos.HSP.html#42685" class="Function Operator">‚ü¶</a> <a id="47507" href="Demos.HSP.html#47389" class="Bound">p</a> <a id="47509" href="Demos.HSP.html#42685" class="Function Operator">‚üß</a>     <a id="47515" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a>             <a id="47531" href="Demos.HSP.html#47493" class="Bound">œÅ</a>    <a id="47536" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚âàÀò‚ü®</a>  <a id="47541" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="47546" href="Demos.HSP.html#42685" class="Function Operator">‚ü¶</a> <a id="47548" href="Demos.HSP.html#47389" class="Bound">p</a> <a id="47550" href="Demos.HSP.html#42685" class="Function Operator">‚üß</a> <a id="47552" class="Symbol">(</a><a id="47553" href="Demos.HSP.html#47484" class="Bound">f‚àºg</a> <a id="47557" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="47559" href="Demos.HSP.html#47493" class="Bound">œÅ</a><a id="47560" class="Symbol">)</a>        <a id="47569" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚ü©</a>
  <a id="47573" href="Demos.HSP.html#42685" class="Function Operator">‚ü¶</a> <a id="47575" href="Demos.HSP.html#47389" class="Bound">p</a> <a id="47577" href="Demos.HSP.html#42685" class="Function Operator">‚üß</a>     <a id="47583" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="47587" class="Symbol">(</a><a id="47588" href="Demos.HSP.html#47895" class="Function">f</a> <a id="47590" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="47593" class="Symbol">(</a><a id="47594" href="Demos.HSP.html#47914" class="Function">g</a> <a id="47596" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="47599" href="Demos.HSP.html#47493" class="Bound">œÅ</a><a id="47600" class="Symbol">))</a>  <a id="47604" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚âàÀò‚ü®</a>  <a id="47609" href="Demos.HSP.html#44432" class="Function">comm-hom-term</a> <a id="47623" href="Demos.HSP.html#47478" class="Bound">fh</a> <a id="47626" href="Demos.HSP.html#47389" class="Bound">p</a> <a id="47628" class="Symbol">(</a><a id="47629" href="Demos.HSP.html#47914" class="Function">g</a> <a id="47631" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="47633" href="Demos.HSP.html#47493" class="Bound">œÅ</a><a id="47634" class="Symbol">)</a>  <a id="47637" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚ü©</a>
  <a id="47641" href="Demos.HSP.html#47895" class="Function">f</a><a id="47642" class="Symbol">(</a><a id="47643" href="Demos.HSP.html#47987" class="Function Operator">‚ü¶</a> <a id="47645" href="Demos.HSP.html#47389" class="Bound">p</a> <a id="47647" href="Demos.HSP.html#47987" class="Function Operator">‚üß·¥¨</a>  <a id="47651" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a>       <a id="47661" class="Symbol">(</a><a id="47662" href="Demos.HSP.html#47914" class="Function">g</a> <a id="47664" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="47667" href="Demos.HSP.html#47493" class="Bound">œÅ</a><a id="47668" class="Symbol">))</a>  <a id="47672" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a>   <a id="47677" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="47682" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="47684" href="Demos.HSP.html#47478" class="Bound">fh</a> <a id="47687" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="47689" class="Symbol">(</a><a id="47690" href="Demos.HSP.html#47467" class="Bound">Apq</a> <a id="47694" class="Symbol">(</a><a id="47695" href="Demos.HSP.html#47914" class="Function">g</a> <a id="47697" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="47699" href="Demos.HSP.html#47493" class="Bound">œÅ</a><a id="47700" class="Symbol">))</a>   <a id="47705" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
  <a id="47709" href="Demos.HSP.html#47895" class="Function">f</a><a id="47710" class="Symbol">(</a><a id="47711" href="Demos.HSP.html#47987" class="Function Operator">‚ü¶</a> <a id="47713" href="Demos.HSP.html#47391" class="Bound">q</a> <a id="47715" href="Demos.HSP.html#47987" class="Function Operator">‚üß·¥¨</a>  <a id="47719" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a>       <a id="47729" class="Symbol">(</a><a id="47730" href="Demos.HSP.html#47914" class="Function">g</a> <a id="47732" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="47735" href="Demos.HSP.html#47493" class="Bound">œÅ</a><a id="47736" class="Symbol">))</a>  <a id="47740" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a>   <a id="47745" href="Demos.HSP.html#44432" class="Function">comm-hom-term</a> <a id="47759" href="Demos.HSP.html#47478" class="Bound">fh</a> <a id="47762" href="Demos.HSP.html#47391" class="Bound">q</a> <a id="47764" class="Symbol">(</a><a id="47765" href="Demos.HSP.html#47914" class="Function">g</a> <a id="47767" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="47769" href="Demos.HSP.html#47493" class="Bound">œÅ</a><a id="47770" class="Symbol">)</a>  <a id="47773" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
  <a id="47777" href="Demos.HSP.html#42685" class="Function Operator">‚ü¶</a> <a id="47779" href="Demos.HSP.html#47391" class="Bound">q</a> <a id="47781" href="Demos.HSP.html#42685" class="Function Operator">‚üß</a>     <a id="47787" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="47791" class="Symbol">(</a><a id="47792" href="Demos.HSP.html#47895" class="Function">f</a> <a id="47794" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="47797" class="Symbol">(</a><a id="47798" href="Demos.HSP.html#47914" class="Function">g</a> <a id="47800" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="47803" href="Demos.HSP.html#47493" class="Bound">œÅ</a><a id="47804" class="Symbol">))</a>  <a id="47808" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a>   <a id="47813" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="47818" href="Demos.HSP.html#42685" class="Function Operator">‚ü¶</a> <a id="47820" href="Demos.HSP.html#47391" class="Bound">q</a> <a id="47822" href="Demos.HSP.html#42685" class="Function Operator">‚üß</a> <a id="47824" class="Symbol">(</a><a id="47825" href="Demos.HSP.html#47484" class="Bound">f‚àºg</a> <a id="47829" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="47831" href="Demos.HSP.html#47493" class="Bound">œÅ</a><a id="47832" class="Symbol">)</a>        <a id="47841" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
  <a id="47845" href="Demos.HSP.html#42685" class="Function Operator">‚ü¶</a> <a id="47847" href="Demos.HSP.html#47391" class="Bound">q</a> <a id="47849" href="Demos.HSP.html#42685" class="Function Operator">‚üß</a>     <a id="47855" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a>             <a id="47871" href="Demos.HSP.html#47493" class="Bound">œÅ</a>    <a id="47876" href="Relation.Binary.Reasoning.Base.Single.html#2555" class="Function Operator">‚àé</a>
  <a id="47880" class="Keyword">where</a>  <a id="47887" class="Keyword">private</a> <a id="47895" href="Demos.HSP.html#47895" class="Function">f</a> <a id="47897" class="Symbol">=</a> <a id="47899" href="Demos.HSP.html#6781" class="Field Operator">_‚ü®$‚ü©_</a> <a id="47905" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="47907" href="Demos.HSP.html#47478" class="Bound">fh</a> <a id="47910" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="47912" class="Symbol">;</a> <a id="47914" href="Demos.HSP.html#47914" class="Function">g</a> <a id="47916" class="Symbol">=</a> <a id="47918" href="Demos.HSP.html#6781" class="Field Operator">_‚ü®$‚ü©_</a> <a id="47924" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="47926" href="Demos.HSP.html#47481" class="Bound">gh</a> <a id="47929" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a>
         <a id="47940" class="Keyword">open</a> <a id="47945" href="Demos.HSP.html#42121" class="Module">Environment</a> <a id="47957" href="Demos.HSP.html#47353" class="Bound">ùë®</a>  <a id="47960" class="Keyword">using</a> <a id="47966" class="Symbol">()</a> <a id="47969" class="Keyword">renaming</a> <a id="47978" class="Symbol">(</a> <a id="47980" href="Demos.HSP.html#42685" class="Function Operator">‚ü¶_‚üß</a> <a id="47984" class="Symbol">to</a> <a id="47987" class="Function Operator">‚ü¶_‚üß·¥¨</a> <a id="47992" class="Symbol">)</a>
         <a id="48003" class="Keyword">open</a> <a id="48008" href="Demos.HSP.html#42121" class="Module">Environment</a> <a id="48020" href="Demos.HSP.html#47371" class="Bound">ùë©</a>  <a id="48023" class="Keyword">using</a> <a id="48029" class="Symbol">(</a> <a id="48031" href="Demos.HSP.html#42685" class="Function Operator">‚ü¶_‚üß</a> <a id="48035" class="Symbol">)</a> <a id="48037" class="Symbol">;</a> <a id="48039" class="Keyword">open</a> <a id="48044" href="Relation.Binary.Reasoning.Setoid.html" class="Module">SetoidReasoning</a> <a id="48060" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="48063" href="Demos.HSP.html#47371" class="Bound">ùë©</a> <a id="48065" href="Demos.HSP.html#19405" class="Function Operator">]</a>

</pre>
If `ùí¶` is a class of `ùëÜ`-algebras, the set of identities modeled by `ùí¶`, denoted `Th ùí¶`, is called the *equational theory* of `ùí¶`. If `‚Ñ∞` is a set of `ùëÜ`-term identities,
the class of algebras modeling `‚Ñ∞`, denoted `Mod ‚Ñ∞`, is called the *equational class axiomatized* by `‚Ñ∞`. We codify these notions in the next two definitions.

<pre class="Agda">

<a id="Th"></a><a id="48424" href="Demos.HSP.html#48424" class="Function">Th</a> <a id="48427" class="Symbol">:</a> <a id="48429" class="Symbol">{</a><a id="48430" href="Demos.HSP.html#48430" class="Bound">X</a> <a id="48432" class="Symbol">:</a> <a id="48434" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="48439" href="Demos.HSP.html#7635" class="Generalizable">œá</a><a id="48440" class="Symbol">}</a> <a id="48442" class="Symbol">‚Üí</a> <a id="48444" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="48449" class="Symbol">(</a><a id="48450" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="48458" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="48460" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a><a id="48462" class="Symbol">)</a> <a id="48464" href="Demos.HSP.html#7637" class="Generalizable">‚Ñì</a> <a id="48466" class="Symbol">‚Üí</a> <a id="48468" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="48472" class="Symbol">(</a><a id="48473" href="Demos.HSP.html#39820" class="Datatype">Term</a> <a id="48478" href="Demos.HSP.html#48430" class="Bound">X</a> <a id="48480" href="Data.Product.html#1167" class="Function Operator">√ó</a> <a id="48482" href="Demos.HSP.html#39820" class="Datatype">Term</a> <a id="48487" href="Demos.HSP.html#48430" class="Bound">X</a><a id="48488" class="Symbol">)</a> <a id="48490" class="Symbol">_</a>
<a id="48492" href="Demos.HSP.html#48424" class="Function">Th</a> <a id="48495" href="Demos.HSP.html#48495" class="Bound">ùí¶</a> <a id="48497" class="Symbol">=</a> <a id="48499" class="Symbol">Œª</a> <a id="48501" class="Symbol">(</a><a id="48502" href="Demos.HSP.html#48502" class="Bound">p</a> <a id="48504" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="48506" href="Demos.HSP.html#48506" class="Bound">q</a><a id="48507" class="Symbol">)</a> <a id="48509" class="Symbol">‚Üí</a> <a id="48511" href="Demos.HSP.html#48495" class="Bound">ùí¶</a> <a id="48513" href="Demos.HSP.html#46428" class="Function Operator">‚ä´</a> <a id="48515" href="Demos.HSP.html#48502" class="Bound">p</a> <a id="48517" href="Demos.HSP.html#46428" class="Function Operator">‚âà</a> <a id="48519" href="Demos.HSP.html#48506" class="Bound">q</a>

<a id="Mod"></a><a id="48522" href="Demos.HSP.html#48522" class="Function">Mod</a> <a id="48526" class="Symbol">:</a> <a id="48528" class="Symbol">{</a><a id="48529" href="Demos.HSP.html#48529" class="Bound">X</a> <a id="48531" class="Symbol">:</a> <a id="48533" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="48538" href="Demos.HSP.html#7635" class="Generalizable">œá</a><a id="48539" class="Symbol">}</a> <a id="48541" class="Symbol">‚Üí</a> <a id="48543" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="48547" class="Symbol">(</a><a id="48548" href="Demos.HSP.html#39820" class="Datatype">Term</a> <a id="48553" href="Demos.HSP.html#48529" class="Bound">X</a> <a id="48555" href="Data.Product.html#1167" class="Function Operator">√ó</a> <a id="48557" href="Demos.HSP.html#39820" class="Datatype">Term</a> <a id="48562" href="Demos.HSP.html#48529" class="Bound">X</a><a id="48563" class="Symbol">)</a> <a id="48565" href="Demos.HSP.html#7637" class="Generalizable">‚Ñì</a> <a id="48567" class="Symbol">‚Üí</a> <a id="48569" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="48574" class="Symbol">(</a><a id="48575" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="48583" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="48585" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a><a id="48587" class="Symbol">)</a> <a id="48589" class="Symbol">_</a>
<a id="48591" href="Demos.HSP.html#48522" class="Function">Mod</a> <a id="48595" href="Demos.HSP.html#48595" class="Bound">‚Ñ∞</a> <a id="48597" href="Demos.HSP.html#48597" class="Bound">ùë®</a> <a id="48599" class="Symbol">=</a> <a id="48601" class="Symbol">‚àÄ</a> <a id="48603" class="Symbol">{</a><a id="48604" href="Demos.HSP.html#48604" class="Bound">p</a> <a id="48606" href="Demos.HSP.html#48606" class="Bound">q</a><a id="48607" class="Symbol">}</a> <a id="48609" class="Symbol">‚Üí</a> <a id="48611" class="Symbol">(</a><a id="48612" href="Demos.HSP.html#48604" class="Bound">p</a> <a id="48614" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="48616" href="Demos.HSP.html#48606" class="Bound">q</a><a id="48617" class="Symbol">)</a> <a id="48619" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="48621" href="Demos.HSP.html#48595" class="Bound">‚Ñ∞</a> <a id="48623" class="Symbol">‚Üí</a> <a id="48625" href="Demos.HSP.html#43059" class="Function">Equal</a> <a id="48631" href="Demos.HSP.html#48604" class="Bound">p</a> <a id="48633" href="Demos.HSP.html#48606" class="Bound">q</a> <a id="48635" class="Keyword">where</a> <a id="48641" class="Keyword">open</a> <a id="48646" href="Demos.HSP.html#42121" class="Module">Environment</a> <a id="48658" href="Demos.HSP.html#48597" class="Bound">ùë®</a>
</pre>

#### The Closure Operators H, S, P and V {#the-closure-operators-h-s-p-and-v .unnumbered}

Fix a signature `ùëÜ`, let `ùí¶` be a class of `ùëÜ`-algebras, and define
* `H ùí¶` := the class of all homomorphic images of members of `ùí¶`;
* `S ùí¶` := the class of all subalgebras of members of `ùí¶`;
* `P ùí¶` := the class of all products of members of `ùí¶`.

`H`, `S`, and `P` are *closure operators* (expansive, monotone, and idempotent).  
A class `ùí¶` of `ùëÜ`-algebras is said to be *closed under the taking of homomorphic images* 
provided `H ùí¶ ‚äÜ ùí¶`. Similarly, `ùí¶` is *closed under the taking of subalgebras* (resp., *arbitrary products*) provided `S ùí¶ ‚äÜ ùí¶` (resp., `P ùí¶ ‚äÜ ùí¶`). The operators `H`, `S`, and `P` can be composed with one another repeatedly, forming yet more closure operators. We represent these three closure operators in type theory as follows.

<pre class="Agda">

<a id="49533" class="Keyword">module</a> <a id="49540" href="Demos.HSP.html#49540" class="Module">_</a> <a id="49542" class="Symbol">{</a><a id="49543" href="Demos.HSP.html#49543" class="Bound">Œ±</a> <a id="49545" href="Demos.HSP.html#49545" class="Bound">œÅ·µÉ</a> <a id="49548" href="Demos.HSP.html#49548" class="Bound">Œ≤</a> <a id="49550" href="Demos.HSP.html#49550" class="Bound">œÅ·µá</a> <a id="49553" class="Symbol">:</a> <a id="49555" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="49560" class="Symbol">}</a> <a id="49562" class="Keyword">where</a>
 <a id="49569" class="Keyword">private</a> <a id="49577" href="Demos.HSP.html#49577" class="Function">a</a> <a id="49579" class="Symbol">=</a> <a id="49581" href="Demos.HSP.html#49543" class="Bound">Œ±</a> <a id="49583" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="49585" href="Demos.HSP.html#49545" class="Bound">œÅ·µÉ</a>
 <a id="49589" href="Demos.HSP.html#49589" class="Function">H</a> <a id="49591" class="Symbol">:</a> <a id="49593" class="Symbol">‚àÄ</a> <a id="49595" href="Demos.HSP.html#49595" class="Bound">‚Ñì</a> <a id="49597" class="Symbol">‚Üí</a> <a id="49599" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="49603" class="Symbol">(</a><a id="49604" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="49612" href="Demos.HSP.html#49543" class="Bound">Œ±</a> <a id="49614" href="Demos.HSP.html#49545" class="Bound">œÅ·µÉ</a><a id="49616" class="Symbol">)</a> <a id="49618" class="Symbol">(</a><a id="49619" href="Demos.HSP.html#49577" class="Function">a</a> <a id="49621" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="49623" href="Demos.HSP.html#34955" class="Function">ov</a> <a id="49626" href="Demos.HSP.html#49595" class="Bound">‚Ñì</a><a id="49627" class="Symbol">)</a> <a id="49629" class="Symbol">‚Üí</a> <a id="49631" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="49635" class="Symbol">(</a><a id="49636" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="49644" href="Demos.HSP.html#49548" class="Bound">Œ≤</a> <a id="49646" href="Demos.HSP.html#49550" class="Bound">œÅ·µá</a><a id="49648" class="Symbol">)</a> <a id="49650" class="Symbol">_</a>
 <a id="49653" href="Demos.HSP.html#49589" class="Function">H</a> <a id="49655" class="Symbol">_</a> <a id="49657" href="Demos.HSP.html#49657" class="Bound">ùí¶</a> <a id="49659" href="Demos.HSP.html#49659" class="Bound">ùë©</a> <a id="49661" class="Symbol">=</a> <a id="49663" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="49666" href="Demos.HSP.html#49666" class="Bound">ùë®</a> <a id="49668" href="Data.Product.html#916" class="Function">‚àà</a> <a id="49670" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="49678" href="Demos.HSP.html#49543" class="Bound">Œ±</a> <a id="49680" href="Demos.HSP.html#49545" class="Bound">œÅ·µÉ</a> <a id="49683" href="Data.Product.html#916" class="Function">]</a> <a id="49685" href="Demos.HSP.html#49666" class="Bound">ùë®</a> <a id="49687" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="49689" href="Demos.HSP.html#49657" class="Bound">ùí¶</a> <a id="49691" href="Data.Product.html#1167" class="Function Operator">√ó</a> <a id="49693" href="Demos.HSP.html#49659" class="Bound">ùë©</a> <a id="49695" href="Demos.HSP.html#35052" class="Function Operator">IsHomImageOf</a> <a id="49708" href="Demos.HSP.html#49666" class="Bound">ùë®</a>

 <a id="49712" href="Demos.HSP.html#49712" class="Function">S</a> <a id="49714" class="Symbol">:</a> <a id="49716" class="Symbol">‚àÄ</a> <a id="49718" href="Demos.HSP.html#49718" class="Bound">‚Ñì</a> <a id="49720" class="Symbol">‚Üí</a> <a id="49722" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="49726" class="Symbol">(</a><a id="49727" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="49735" href="Demos.HSP.html#49543" class="Bound">Œ±</a> <a id="49737" href="Demos.HSP.html#49545" class="Bound">œÅ·µÉ</a><a id="49739" class="Symbol">)</a> <a id="49741" class="Symbol">(</a><a id="49742" href="Demos.HSP.html#49577" class="Function">a</a> <a id="49744" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="49746" href="Demos.HSP.html#34955" class="Function">ov</a> <a id="49749" href="Demos.HSP.html#49718" class="Bound">‚Ñì</a><a id="49750" class="Symbol">)</a> <a id="49752" class="Symbol">‚Üí</a> <a id="49754" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="49758" class="Symbol">(</a><a id="49759" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="49767" href="Demos.HSP.html#49548" class="Bound">Œ≤</a> <a id="49769" href="Demos.HSP.html#49550" class="Bound">œÅ·µá</a><a id="49771" class="Symbol">)</a> <a id="49773" class="Symbol">_</a>
 <a id="49776" href="Demos.HSP.html#49712" class="Function">S</a> <a id="49778" class="Symbol">_</a> <a id="49780" href="Demos.HSP.html#49780" class="Bound">ùí¶</a> <a id="49782" href="Demos.HSP.html#49782" class="Bound">ùë©</a> <a id="49784" class="Symbol">=</a> <a id="49786" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="49789" href="Demos.HSP.html#49789" class="Bound">ùë®</a> <a id="49791" href="Data.Product.html#916" class="Function">‚àà</a> <a id="49793" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="49801" href="Demos.HSP.html#49543" class="Bound">Œ±</a> <a id="49803" href="Demos.HSP.html#49545" class="Bound">œÅ·µÉ</a> <a id="49806" href="Data.Product.html#916" class="Function">]</a> <a id="49808" href="Demos.HSP.html#49789" class="Bound">ùë®</a> <a id="49810" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="49812" href="Demos.HSP.html#49780" class="Bound">ùí¶</a> <a id="49814" href="Data.Product.html#1167" class="Function Operator">√ó</a> <a id="49816" href="Demos.HSP.html#49782" class="Bound">ùë©</a> <a id="49818" href="Demos.HSP.html#37755" class="Function Operator">‚â§</a> <a id="49820" href="Demos.HSP.html#49789" class="Bound">ùë®</a>

 <a id="49824" href="Demos.HSP.html#49824" class="Function">P</a> <a id="49826" class="Symbol">:</a> <a id="49828" class="Symbol">‚àÄ</a> <a id="49830" href="Demos.HSP.html#49830" class="Bound">‚Ñì</a> <a id="49832" href="Demos.HSP.html#49832" class="Bound">Œπ</a> <a id="49834" class="Symbol">‚Üí</a> <a id="49836" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="49840" class="Symbol">(</a><a id="49841" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="49849" href="Demos.HSP.html#49543" class="Bound">Œ±</a> <a id="49851" href="Demos.HSP.html#49545" class="Bound">œÅ·µÉ</a><a id="49853" class="Symbol">)</a> <a id="49855" class="Symbol">(</a><a id="49856" href="Demos.HSP.html#49577" class="Function">a</a> <a id="49858" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="49860" href="Demos.HSP.html#34955" class="Function">ov</a> <a id="49863" href="Demos.HSP.html#49830" class="Bound">‚Ñì</a><a id="49864" class="Symbol">)</a> <a id="49866" class="Symbol">‚Üí</a> <a id="49868" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="49872" class="Symbol">(</a><a id="49873" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="49881" href="Demos.HSP.html#49548" class="Bound">Œ≤</a> <a id="49883" href="Demos.HSP.html#49550" class="Bound">œÅ·µá</a><a id="49885" class="Symbol">)</a> <a id="49887" class="Symbol">_</a>
 <a id="49890" href="Demos.HSP.html#49824" class="Function">P</a> <a id="49892" class="Symbol">_</a> <a id="49894" href="Demos.HSP.html#49894" class="Bound">Œπ</a> <a id="49896" href="Demos.HSP.html#49896" class="Bound">ùí¶</a> <a id="49898" href="Demos.HSP.html#49898" class="Bound">ùë©</a> <a id="49900" class="Symbol">=</a> <a id="49902" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="49905" href="Demos.HSP.html#49905" class="Bound">I</a> <a id="49907" href="Data.Product.html#916" class="Function">‚àà</a> <a id="49909" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="49914" href="Demos.HSP.html#49894" class="Bound">Œπ</a> <a id="49916" href="Data.Product.html#916" class="Function">]</a> <a id="49918" class="Symbol">(</a><a id="49919" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="49922" href="Demos.HSP.html#49922" class="Bound">ùíú</a> <a id="49924" href="Data.Product.html#916" class="Function">‚àà</a> <a id="49926" class="Symbol">(</a><a id="49927" href="Demos.HSP.html#49905" class="Bound">I</a> <a id="49929" class="Symbol">‚Üí</a> <a id="49931" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="49939" href="Demos.HSP.html#49543" class="Bound">Œ±</a> <a id="49941" href="Demos.HSP.html#49545" class="Bound">œÅ·µÉ</a><a id="49943" class="Symbol">)</a> <a id="49945" href="Data.Product.html#916" class="Function">]</a> <a id="49947" class="Symbol">(‚àÄ</a> <a id="49950" href="Demos.HSP.html#49950" class="Bound">i</a> <a id="49952" class="Symbol">‚Üí</a> <a id="49954" href="Demos.HSP.html#49922" class="Bound">ùíú</a> <a id="49956" href="Demos.HSP.html#49950" class="Bound">i</a> <a id="49958" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="49960" href="Demos.HSP.html#49896" class="Bound">ùí¶</a><a id="49961" class="Symbol">)</a> <a id="49963" href="Data.Product.html#1167" class="Function Operator">√ó</a> <a id="49965" class="Symbol">(</a><a id="49966" href="Demos.HSP.html#49898" class="Bound">ùë©</a> <a id="49968" href="Demos.HSP.html#33000" class="Record Operator">‚âÖ</a> <a id="49970" href="Demos.HSP.html#24369" class="Function">‚®Ö</a> <a id="49972" href="Demos.HSP.html#49922" class="Bound">ùíú</a><a id="49973" class="Symbol">))</a>

</pre>
Identities modeled by an algebra `ùë®` are also modeled by every homomorphic image of
`ùë®` and by every subalgebra of `ùë®`. These facts are formalized in [Agda][] as follows.

<pre class="Agda">

<a id="50174" class="Keyword">module</a> <a id="50181" href="Demos.HSP.html#50181" class="Module">_</a> <a id="50183" class="Symbol">{</a><a id="50184" href="Demos.HSP.html#50184" class="Bound">X</a> <a id="50186" class="Symbol">:</a> <a id="50188" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="50193" href="Demos.HSP.html#7635" class="Generalizable">œá</a><a id="50194" class="Symbol">}{</a><a id="50196" href="Demos.HSP.html#50196" class="Bound">ùë®</a> <a id="50198" class="Symbol">:</a> <a id="50200" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="50208" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="50210" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a><a id="50212" class="Symbol">}{</a><a id="50214" href="Demos.HSP.html#50214" class="Bound">ùë©</a> <a id="50216" class="Symbol">:</a> <a id="50218" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="50226" href="Demos.HSP.html#7618" class="Generalizable">Œ≤</a> <a id="50228" href="Demos.HSP.html#7620" class="Generalizable">œÅ·µá</a><a id="50230" class="Symbol">}{</a><a id="50232" href="Demos.HSP.html#50232" class="Bound">p</a> <a id="50234" href="Demos.HSP.html#50234" class="Bound">q</a> <a id="50236" class="Symbol">:</a> <a id="50238" href="Demos.HSP.html#39820" class="Datatype">Term</a> <a id="50243" href="Demos.HSP.html#50184" class="Bound">X</a><a id="50244" class="Symbol">}</a> <a id="50246" class="Keyword">where</a>
 <a id="50253" href="Demos.HSP.html#50253" class="Function">‚äß-H-invar</a> <a id="50263" class="Symbol">:</a> <a id="50265" href="Demos.HSP.html#50196" class="Bound">ùë®</a> <a id="50267" href="Demos.HSP.html#46330" class="Function Operator">‚äß</a> <a id="50269" href="Demos.HSP.html#50232" class="Bound">p</a> <a id="50271" href="Demos.HSP.html#46330" class="Function Operator">‚âà</a> <a id="50273" href="Demos.HSP.html#50234" class="Bound">q</a> <a id="50275" class="Symbol">‚Üí</a> <a id="50277" href="Demos.HSP.html#50214" class="Bound">ùë©</a> <a id="50279" href="Demos.HSP.html#35052" class="Function Operator">IsHomImageOf</a> <a id="50292" href="Demos.HSP.html#50196" class="Bound">ùë®</a> <a id="50294" class="Symbol">‚Üí</a> <a id="50296" href="Demos.HSP.html#50214" class="Bound">ùë©</a> <a id="50298" href="Demos.HSP.html#46330" class="Function Operator">‚äß</a> <a id="50300" href="Demos.HSP.html#50232" class="Bound">p</a> <a id="50302" href="Demos.HSP.html#46330" class="Function Operator">‚âà</a> <a id="50304" href="Demos.HSP.html#50234" class="Bound">q</a>
 <a id="50307" href="Demos.HSP.html#50253" class="Function">‚äß-H-invar</a> <a id="50317" href="Demos.HSP.html#50317" class="Bound">Apq</a> <a id="50321" class="Symbol">(</a><a id="50322" href="Demos.HSP.html#50322" class="Bound">œÜh</a> <a id="50325" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="50327" href="Demos.HSP.html#50327" class="Bound">œÜE</a><a id="50329" class="Symbol">)</a> <a id="50331" href="Demos.HSP.html#50331" class="Bound">œÅ</a> <a id="50333" class="Symbol">=</a> <a id="50335" href="Relation.Binary.Reasoning.Base.Single.html#1916" class="Function Operator">begin</a>
       <a id="50348" href="Demos.HSP.html#42685" class="Function Operator">‚ü¶</a> <a id="50350" href="Demos.HSP.html#50232" class="Bound">p</a> <a id="50352" href="Demos.HSP.html#42685" class="Function Operator">‚üß</a>   <a id="50356" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a>               <a id="50374" href="Demos.HSP.html#50331" class="Bound">œÅ</a>    <a id="50379" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚âàÀò‚ü®</a>  <a id="50384" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="50389" href="Demos.HSP.html#42685" class="Function Operator">‚ü¶</a> <a id="50391" href="Demos.HSP.html#50232" class="Bound">p</a> <a id="50393" href="Demos.HSP.html#42685" class="Function Operator">‚üß</a><a id="50394" class="Symbol">(Œª</a> <a id="50397" href="Demos.HSP.html#50397" class="Bound">_</a> <a id="50399" class="Symbol">‚Üí</a> <a id="50401" href="Demos.HSP.html#11345" class="Function">InvIsInverse ≥</a> <a id="50415" href="Demos.HSP.html#50327" class="Bound">œÜE</a><a id="50417" class="Symbol">)</a>  <a id="50420" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚ü©</a>
       <a id="50429" href="Demos.HSP.html#42685" class="Function Operator">‚ü¶</a> <a id="50431" href="Demos.HSP.html#50232" class="Bound">p</a> <a id="50433" href="Demos.HSP.html#42685" class="Function Operator">‚üß</a>   <a id="50437" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="50441" class="Symbol">(</a><a id="50442" href="Demos.HSP.html#50855" class="Function">œÜ</a> <a id="50444" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="50447" href="Demos.HSP.html#50795" class="Function">œÜ‚Åª¬π</a>  <a id="50452" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="50455" href="Demos.HSP.html#50331" class="Bound">œÅ</a><a id="50456" class="Symbol">)</a>   <a id="50460" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚âàÀò‚ü®</a>  <a id="50465" href="Demos.HSP.html#44432" class="Function">comm-hom-term</a> <a id="50479" href="Demos.HSP.html#50322" class="Bound">œÜh</a> <a id="50482" href="Demos.HSP.html#50232" class="Bound">p</a> <a id="50484" class="Symbol">(</a><a id="50485" href="Demos.HSP.html#50795" class="Function">œÜ‚Åª¬π</a> <a id="50489" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="50491" href="Demos.HSP.html#50331" class="Bound">œÅ</a><a id="50492" class="Symbol">)</a>        <a id="50501" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚ü©</a>
   <a id="50506" href="Demos.HSP.html#50855" class="Function">œÜ</a><a id="50507" class="Symbol">(</a>  <a id="50510" href="Demos.HSP.html#50924" class="Function Operator">‚ü¶</a> <a id="50512" href="Demos.HSP.html#50232" class="Bound">p</a> <a id="50514" href="Demos.HSP.html#50924" class="Function Operator">‚üß·¥¨</a>  <a id="50518" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="50522" class="Symbol">(</a>     <a id="50528" href="Demos.HSP.html#50795" class="Function">œÜ‚Åª¬π</a>  <a id="50533" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="50536" href="Demos.HSP.html#50331" class="Bound">œÅ</a><a id="50537" class="Symbol">))</a>  <a id="50541" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a>   <a id="50546" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="50551" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="50553" href="Demos.HSP.html#50322" class="Bound">œÜh</a> <a id="50556" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="50558" class="Symbol">(</a><a id="50559" href="Demos.HSP.html#50317" class="Bound">Apq</a> <a id="50563" class="Symbol">(</a><a id="50564" href="Demos.HSP.html#50795" class="Function">œÜ‚Åª¬π</a> <a id="50568" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="50570" href="Demos.HSP.html#50331" class="Bound">œÅ</a><a id="50571" class="Symbol">))</a>         <a id="50582" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
   <a id="50587" href="Demos.HSP.html#50855" class="Function">œÜ</a><a id="50588" class="Symbol">(</a>  <a id="50591" href="Demos.HSP.html#50924" class="Function Operator">‚ü¶</a> <a id="50593" href="Demos.HSP.html#50234" class="Bound">q</a> <a id="50595" href="Demos.HSP.html#50924" class="Function Operator">‚üß·¥¨</a>  <a id="50599" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="50603" class="Symbol">(</a>     <a id="50609" href="Demos.HSP.html#50795" class="Function">œÜ‚Åª¬π</a>  <a id="50614" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="50617" href="Demos.HSP.html#50331" class="Bound">œÅ</a><a id="50618" class="Symbol">))</a>  <a id="50622" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a>   <a id="50627" href="Demos.HSP.html#44432" class="Function">comm-hom-term</a> <a id="50641" href="Demos.HSP.html#50322" class="Bound">œÜh</a> <a id="50644" href="Demos.HSP.html#50234" class="Bound">q</a> <a id="50646" class="Symbol">(</a><a id="50647" href="Demos.HSP.html#50795" class="Function">œÜ‚Åª¬π</a> <a id="50651" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="50653" href="Demos.HSP.html#50331" class="Bound">œÅ</a><a id="50654" class="Symbol">)</a>        <a id="50663" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
       <a id="50672" href="Demos.HSP.html#42685" class="Function Operator">‚ü¶</a> <a id="50674" href="Demos.HSP.html#50234" class="Bound">q</a> <a id="50676" href="Demos.HSP.html#42685" class="Function Operator">‚üß</a>   <a id="50680" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="50684" class="Symbol">(</a><a id="50685" href="Demos.HSP.html#50855" class="Function">œÜ</a> <a id="50687" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="50690" href="Demos.HSP.html#50795" class="Function">œÜ‚Åª¬π</a>  <a id="50695" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="50698" href="Demos.HSP.html#50331" class="Bound">œÅ</a><a id="50699" class="Symbol">)</a>   <a id="50703" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a>   <a id="50708" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="50713" href="Demos.HSP.html#42685" class="Function Operator">‚ü¶</a> <a id="50715" href="Demos.HSP.html#50234" class="Bound">q</a> <a id="50717" href="Demos.HSP.html#42685" class="Function Operator">‚üß</a><a id="50718" class="Symbol">(Œª</a> <a id="50721" href="Demos.HSP.html#50721" class="Bound">_</a> <a id="50723" class="Symbol">‚Üí</a> <a id="50725" href="Demos.HSP.html#11345" class="Function">InvIsInverse ≥</a> <a id="50739" href="Demos.HSP.html#50327" class="Bound">œÜE</a><a id="50741" class="Symbol">)</a>  <a id="50744" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
       <a id="50753" href="Demos.HSP.html#42685" class="Function Operator">‚ü¶</a> <a id="50755" href="Demos.HSP.html#50234" class="Bound">q</a> <a id="50757" href="Demos.HSP.html#42685" class="Function Operator">‚üß</a>   <a id="50761" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a>               <a id="50779" href="Demos.HSP.html#50331" class="Bound">œÅ</a>    <a id="50784" href="Relation.Binary.Reasoning.Base.Single.html#2555" class="Function Operator">‚àé</a> <a id="50786" class="Keyword">where</a>
   <a id="50795" href="Demos.HSP.html#50795" class="Function">œÜ‚Åª¬π</a> <a id="50799" class="Symbol">:</a> <a id="50801" href="Demos.HSP.html#19459" class="Function Operator">ùïå[</a> <a id="50804" href="Demos.HSP.html#50214" class="Bound">ùë©</a> <a id="50806" href="Demos.HSP.html#19459" class="Function Operator">]</a> <a id="50808" class="Symbol">‚Üí</a> <a id="50810" href="Demos.HSP.html#19459" class="Function Operator">ùïå[</a> <a id="50813" href="Demos.HSP.html#50196" class="Bound">ùë®</a> <a id="50815" href="Demos.HSP.html#19459" class="Function Operator">]</a>
   <a id="50820" href="Demos.HSP.html#50795" class="Function">œÜ‚Åª¬π</a> <a id="50824" class="Symbol">=</a> <a id="50826" href="Demos.HSP.html#12658" class="Function">SurjInv</a> <a id="50834" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="50836" href="Demos.HSP.html#50322" class="Bound">œÜh</a> <a id="50839" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="50841" href="Demos.HSP.html#50327" class="Bound">œÜE</a>
   <a id="50847" class="Keyword">private</a> <a id="50855" href="Demos.HSP.html#50855" class="Function">œÜ</a> <a id="50857" class="Symbol">=</a> <a id="50859" class="Symbol">(</a><a id="50860" href="Demos.HSP.html#6781" class="Field Operator">_‚ü®$‚ü©_</a> <a id="50866" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="50868" href="Demos.HSP.html#50322" class="Bound">œÜh</a> <a id="50871" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a><a id="50872" class="Symbol">)</a>
   <a id="50877" class="Keyword">open</a> <a id="50882" href="Demos.HSP.html#42121" class="Module">Environment</a> <a id="50894" href="Demos.HSP.html#50196" class="Bound">ùë®</a>  <a id="50897" class="Keyword">using</a> <a id="50903" class="Symbol">()</a> <a id="50906" class="Keyword">renaming</a> <a id="50915" class="Symbol">(</a> <a id="50917" href="Demos.HSP.html#42685" class="Function Operator">‚ü¶_‚üß</a> <a id="50921" class="Symbol">to</a> <a id="50924" class="Function Operator">‚ü¶_‚üß·¥¨</a><a id="50928" class="Symbol">)</a>
   <a id="50933" class="Keyword">open</a> <a id="50938" href="Demos.HSP.html#42121" class="Module">Environment</a> <a id="50950" href="Demos.HSP.html#50214" class="Bound">ùë©</a>  <a id="50953" class="Keyword">using</a> <a id="50959" class="Symbol">(</a> <a id="50961" href="Demos.HSP.html#42685" class="Function Operator">‚ü¶_‚üß</a> <a id="50965" class="Symbol">)</a> <a id="50967" class="Symbol">;</a> <a id="50969" class="Keyword">open</a> <a id="50974" href="Relation.Binary.Reasoning.Setoid.html" class="Module">SetoidReasoning</a> <a id="50990" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="50993" href="Demos.HSP.html#50214" class="Bound">ùë©</a> <a id="50995" href="Demos.HSP.html#19405" class="Function Operator">]</a>

 <a id="50999" href="Demos.HSP.html#50999" class="Function">‚äß-S-invar</a> <a id="51009" class="Symbol">:</a> <a id="51011" href="Demos.HSP.html#50196" class="Bound">ùë®</a> <a id="51013" href="Demos.HSP.html#46330" class="Function Operator">‚äß</a> <a id="51015" href="Demos.HSP.html#50232" class="Bound">p</a> <a id="51017" href="Demos.HSP.html#46330" class="Function Operator">‚âà</a> <a id="51019" href="Demos.HSP.html#50234" class="Bound">q</a> <a id="51021" class="Symbol">‚Üí</a> <a id="51023" href="Demos.HSP.html#50214" class="Bound">ùë©</a> <a id="51025" href="Demos.HSP.html#37755" class="Function Operator">‚â§</a> <a id="51027" href="Demos.HSP.html#50196" class="Bound">ùë®</a> <a id="51029" class="Symbol">‚Üí</a> <a id="51031" href="Demos.HSP.html#50214" class="Bound">ùë©</a> <a id="51033" href="Demos.HSP.html#46330" class="Function Operator">‚äß</a> <a id="51035" href="Demos.HSP.html#50232" class="Bound">p</a> <a id="51037" href="Demos.HSP.html#46330" class="Function Operator">‚âà</a> <a id="51039" href="Demos.HSP.html#50234" class="Bound">q</a>
 <a id="51042" href="Demos.HSP.html#50999" class="Function">‚äß-S-invar</a> <a id="51052" href="Demos.HSP.html#51052" class="Bound">Apq</a> <a id="51056" href="Demos.HSP.html#51056" class="Bound">B‚â§A</a> <a id="51060" href="Demos.HSP.html#51060" class="Bound">b</a> <a id="51062" class="Symbol">=</a> <a id="51064" href="Demos.HSP.html#8301" class="Function Operator">‚à•</a> <a id="51066" href="Demos.HSP.html#51056" class="Bound">B‚â§A</a> <a id="51070" href="Demos.HSP.html#8301" class="Function Operator">‚à•</a>
  <a id="51074" class="Symbol">(</a> <a id="51076" href="Relation.Binary.Reasoning.Base.Single.html#1916" class="Function Operator">begin</a>
    <a id="51086" href="Demos.HSP.html#51488" class="Function">h</a> <a id="51088" class="Symbol">(</a>  <a id="51091" href="Demos.HSP.html#42685" class="Function Operator">‚ü¶</a> <a id="51093" href="Demos.HSP.html#50232" class="Bound">p</a> <a id="51095" href="Demos.HSP.html#42685" class="Function Operator">‚üß</a>   <a id="51099" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a>       <a id="51109" href="Demos.HSP.html#51060" class="Bound">b</a><a id="51110" class="Symbol">)</a>  <a id="51113" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a>   <a id="51118" href="Demos.HSP.html#44432" class="Function">comm-hom-term</a> <a id="51132" href="Demos.HSP.html#51473" class="Function">hh</a> <a id="51135" href="Demos.HSP.html#50232" class="Bound">p</a> <a id="51137" href="Demos.HSP.html#51060" class="Bound">b</a>  <a id="51140" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
         <a id="51151" href="Demos.HSP.html#51420" class="Function Operator">‚ü¶</a> <a id="51153" href="Demos.HSP.html#50232" class="Bound">p</a> <a id="51155" href="Demos.HSP.html#51420" class="Function Operator">‚üß·¥¨</a>  <a id="51159" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="51163" class="Symbol">(</a><a id="51164" href="Demos.HSP.html#51488" class="Function">h</a> <a id="51166" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="51169" href="Demos.HSP.html#51060" class="Bound">b</a><a id="51170" class="Symbol">)</a>  <a id="51173" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a>   <a id="51178" href="Demos.HSP.html#51052" class="Bound">Apq</a> <a id="51182" class="Symbol">(</a><a id="51183" href="Demos.HSP.html#51488" class="Function">h</a> <a id="51185" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="51187" href="Demos.HSP.html#51060" class="Bound">b</a><a id="51188" class="Symbol">)</a>           <a id="51200" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
         <a id="51211" href="Demos.HSP.html#51420" class="Function Operator">‚ü¶</a> <a id="51213" href="Demos.HSP.html#50234" class="Bound">q</a> <a id="51215" href="Demos.HSP.html#51420" class="Function Operator">‚üß·¥¨</a>  <a id="51219" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="51223" class="Symbol">(</a><a id="51224" href="Demos.HSP.html#51488" class="Function">h</a> <a id="51226" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="51229" href="Demos.HSP.html#51060" class="Bound">b</a><a id="51230" class="Symbol">)</a>  <a id="51233" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚âàÀò‚ü®</a>  <a id="51238" href="Demos.HSP.html#44432" class="Function">comm-hom-term</a> <a id="51252" href="Demos.HSP.html#51473" class="Function">hh</a> <a id="51255" href="Demos.HSP.html#50234" class="Bound">q</a> <a id="51257" href="Demos.HSP.html#51060" class="Bound">b</a>  <a id="51260" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚ü©</a>
    <a id="51266" href="Demos.HSP.html#51488" class="Function">h</a> <a id="51268" class="Symbol">(</a>  <a id="51271" href="Demos.HSP.html#42685" class="Function Operator">‚ü¶</a> <a id="51273" href="Demos.HSP.html#50234" class="Bound">q</a> <a id="51275" href="Demos.HSP.html#42685" class="Function Operator">‚üß</a>   <a id="51279" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a>       <a id="51289" href="Demos.HSP.html#51060" class="Bound">b</a><a id="51290" class="Symbol">)</a>  <a id="51293" href="Relation.Binary.Reasoning.Base.Single.html#2555" class="Function Operator">‚àé</a> <a id="51295" class="Symbol">)</a>
  <a id="51299" class="Keyword">where</a>
  <a id="51307" class="Keyword">open</a> <a id="51312" href="Relation.Binary.Reasoning.Setoid.html" class="Module">SetoidReasoning</a> <a id="51328" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="51331" href="Demos.HSP.html#50196" class="Bound">ùë®</a> <a id="51333" href="Demos.HSP.html#19405" class="Function Operator">]</a>
  <a id="51337" class="Keyword">open</a> <a id="51342" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="51349" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="51352" href="Demos.HSP.html#50196" class="Bound">ùë®</a> <a id="51354" href="Demos.HSP.html#19405" class="Function Operator">]</a>  <a id="51357" class="Keyword">using</a> <a id="51363" class="Symbol">(</a> <a id="51365" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="51369" class="Symbol">)</a>
  <a id="51373" class="Keyword">open</a> <a id="51378" href="Demos.HSP.html#42121" class="Module">Environment</a> <a id="51390" href="Demos.HSP.html#50196" class="Bound">ùë®</a>  <a id="51393" class="Keyword">using</a> <a id="51399" class="Symbol">()</a> <a id="51402" class="Keyword">renaming</a> <a id="51411" class="Symbol">(</a> <a id="51413" href="Demos.HSP.html#42685" class="Function Operator">‚ü¶_‚üß</a> <a id="51417" class="Symbol">to</a> <a id="51420" class="Function Operator">‚ü¶_‚üß·¥¨</a> <a id="51425" class="Symbol">)</a>
  <a id="51429" class="Keyword">open</a> <a id="51434" href="Demos.HSP.html#42121" class="Module">Environment</a> <a id="51446" href="Demos.HSP.html#50214" class="Bound">ùë©</a>  <a id="51449" class="Keyword">using</a> <a id="51455" class="Symbol">(</a> <a id="51457" href="Demos.HSP.html#42685" class="Function Operator">‚ü¶_‚üß</a> <a id="51461" class="Symbol">)</a>
  <a id="51465" class="Keyword">private</a> <a id="51473" href="Demos.HSP.html#51473" class="Function">hh</a> <a id="51476" class="Symbol">=</a> <a id="51478" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="51480" href="Demos.HSP.html#51056" class="Bound">B‚â§A</a> <a id="51484" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="51486" class="Symbol">;</a> <a id="51488" href="Demos.HSP.html#51488" class="Function">h</a> <a id="51490" class="Symbol">=</a> <a id="51492" href="Demos.HSP.html#6781" class="Field Operator">_‚ü®$‚ü©_</a> <a id="51498" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="51500" href="Demos.HSP.html#51473" class="Function">hh</a> <a id="51503" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a>

</pre>
An identity satisfied by all algebras in an indexed collection is also satisfied by the product of algebras in the collection.

<pre class="Agda">

<a id="51659" class="Keyword">module</a> <a id="51666" href="Demos.HSP.html#51666" class="Module">_</a> <a id="51668" class="Symbol">{</a><a id="51669" href="Demos.HSP.html#51669" class="Bound">X</a> <a id="51671" class="Symbol">:</a> <a id="51673" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="51678" href="Demos.HSP.html#7635" class="Generalizable">œá</a><a id="51679" class="Symbol">}{</a><a id="51681" href="Demos.HSP.html#51681" class="Bound">I</a> <a id="51683" class="Symbol">:</a> <a id="51685" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="51690" href="Demos.HSP.html#7637" class="Generalizable">‚Ñì</a><a id="51691" class="Symbol">}(</a><a id="51693" href="Demos.HSP.html#51693" class="Bound">ùíú</a> <a id="51695" class="Symbol">:</a> <a id="51697" href="Demos.HSP.html#51681" class="Bound">I</a> <a id="51699" class="Symbol">‚Üí</a> <a id="51701" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="51709" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="51711" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a><a id="51713" class="Symbol">){</a><a id="51715" href="Demos.HSP.html#51715" class="Bound">p</a> <a id="51717" href="Demos.HSP.html#51717" class="Bound">q</a> <a id="51719" class="Symbol">:</a> <a id="51721" href="Demos.HSP.html#39820" class="Datatype">Term</a> <a id="51726" href="Demos.HSP.html#51669" class="Bound">X</a><a id="51727" class="Symbol">}</a> <a id="51729" class="Keyword">where</a>
 <a id="51736" href="Demos.HSP.html#51736" class="Function">‚äß-P-invar</a> <a id="51746" class="Symbol">:</a> <a id="51748" class="Symbol">(‚àÄ</a> <a id="51751" href="Demos.HSP.html#51751" class="Bound">i</a> <a id="51753" class="Symbol">‚Üí</a> <a id="51755" href="Demos.HSP.html#51693" class="Bound">ùíú</a> <a id="51757" href="Demos.HSP.html#51751" class="Bound">i</a> <a id="51759" href="Demos.HSP.html#46330" class="Function Operator">‚äß</a> <a id="51761" href="Demos.HSP.html#51715" class="Bound">p</a> <a id="51763" href="Demos.HSP.html#46330" class="Function Operator">‚âà</a> <a id="51765" href="Demos.HSP.html#51717" class="Bound">q</a><a id="51766" class="Symbol">)</a> <a id="51768" class="Symbol">‚Üí</a> <a id="51770" href="Demos.HSP.html#24369" class="Function">‚®Ö</a> <a id="51772" href="Demos.HSP.html#51693" class="Bound">ùíú</a> <a id="51774" href="Demos.HSP.html#46330" class="Function Operator">‚äß</a> <a id="51776" href="Demos.HSP.html#51715" class="Bound">p</a> <a id="51778" href="Demos.HSP.html#46330" class="Function Operator">‚âà</a> <a id="51780" href="Demos.HSP.html#51717" class="Bound">q</a>
 <a id="51783" href="Demos.HSP.html#51736" class="Function">‚äß-P-invar</a> <a id="51793" href="Demos.HSP.html#51793" class="Bound">ùíúpq</a> <a id="51797" href="Demos.HSP.html#51797" class="Bound">a</a> <a id="51799" class="Symbol">=</a> <a id="51801" href="Relation.Binary.Reasoning.Base.Single.html#1916" class="Function Operator">begin</a>
   <a id="51810" href="Demos.HSP.html#52160" class="Function Operator">‚ü¶</a> <a id="51812" href="Demos.HSP.html#51715" class="Bound">p</a> <a id="51814" href="Demos.HSP.html#52160" class="Function Operator">‚üß‚ÇÅ</a>               <a id="51831" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a>  <a id="51836" href="Demos.HSP.html#51797" class="Bound">a</a>                <a id="51853" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a>   <a id="51858" href="Demos.HSP.html#44965" class="Function">interp-prod</a> <a id="51870" href="Demos.HSP.html#51693" class="Bound">ùíú</a> <a id="51872" href="Demos.HSP.html#51715" class="Bound">p</a> <a id="51874" href="Demos.HSP.html#51797" class="Bound">a</a>            <a id="51887" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
   <a id="51892" class="Symbol">(</a> <a id="51894" class="Symbol">Œª</a> <a id="51896" href="Demos.HSP.html#51896" class="Bound">i</a> <a id="51898" class="Symbol">‚Üí</a> <a id="51900" class="Symbol">(</a><a id="51901" href="Demos.HSP.html#42685" class="Function Operator">‚ü¶</a> <a id="51903" href="Demos.HSP.html#51693" class="Bound">ùíú</a> <a id="51905" href="Demos.HSP.html#51896" class="Bound">i</a> <a id="51907" href="Demos.HSP.html#42685" class="Function Operator">‚üß</a> <a id="51909" href="Demos.HSP.html#51715" class="Bound">p</a><a id="51910" class="Symbol">)</a>  <a id="51913" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a>  <a id="51918" class="Symbol">Œª</a> <a id="51920" href="Demos.HSP.html#51920" class="Bound">x</a> <a id="51922" class="Symbol">‚Üí</a> <a id="51924" class="Symbol">(</a><a id="51925" href="Demos.HSP.html#51797" class="Bound">a</a> <a id="51927" href="Demos.HSP.html#51920" class="Bound">x</a><a id="51928" class="Symbol">)</a> <a id="51930" href="Demos.HSP.html#51896" class="Bound">i</a> <a id="51932" class="Symbol">)</a>  <a id="51935" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a> <a id="51938" class="Symbol">(Œª</a> <a id="51941" href="Demos.HSP.html#51941" class="Bound">i</a> <a id="51943" class="Symbol">‚Üí</a> <a id="51945" href="Demos.HSP.html#51793" class="Bound">ùíúpq</a> <a id="51949" href="Demos.HSP.html#51941" class="Bound">i</a> <a id="51951" class="Symbol">(Œª</a> <a id="51954" href="Demos.HSP.html#51954" class="Bound">x</a> <a id="51956" class="Symbol">‚Üí</a> <a id="51958" class="Symbol">(</a><a id="51959" href="Demos.HSP.html#51797" class="Bound">a</a> <a id="51961" href="Demos.HSP.html#51954" class="Bound">x</a><a id="51962" class="Symbol">)</a> <a id="51964" href="Demos.HSP.html#51941" class="Bound">i</a><a id="51965" class="Symbol">))</a>  <a id="51969" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
   <a id="51974" class="Symbol">(</a> <a id="51976" class="Symbol">Œª</a> <a id="51978" href="Demos.HSP.html#51978" class="Bound">i</a> <a id="51980" class="Symbol">‚Üí</a> <a id="51982" class="Symbol">(</a><a id="51983" href="Demos.HSP.html#42685" class="Function Operator">‚ü¶</a> <a id="51985" href="Demos.HSP.html#51693" class="Bound">ùíú</a> <a id="51987" href="Demos.HSP.html#51978" class="Bound">i</a> <a id="51989" href="Demos.HSP.html#42685" class="Function Operator">‚üß</a> <a id="51991" href="Demos.HSP.html#51717" class="Bound">q</a><a id="51992" class="Symbol">)</a>  <a id="51995" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a>  <a id="52000" class="Symbol">Œª</a> <a id="52002" href="Demos.HSP.html#52002" class="Bound">x</a> <a id="52004" class="Symbol">‚Üí</a> <a id="52006" class="Symbol">(</a><a id="52007" href="Demos.HSP.html#51797" class="Bound">a</a> <a id="52009" href="Demos.HSP.html#52002" class="Bound">x</a><a id="52010" class="Symbol">)</a> <a id="52012" href="Demos.HSP.html#51978" class="Bound">i</a> <a id="52014" class="Symbol">)</a>  <a id="52017" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚âàÀò‚ü®</a>  <a id="52022" href="Demos.HSP.html#44965" class="Function">interp-prod</a> <a id="52034" href="Demos.HSP.html#51693" class="Bound">ùíú</a> <a id="52036" href="Demos.HSP.html#51717" class="Bound">q</a> <a id="52038" href="Demos.HSP.html#51797" class="Bound">a</a>            <a id="52051" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚ü©</a>
   <a id="52056" href="Demos.HSP.html#52160" class="Function Operator">‚ü¶</a> <a id="52058" href="Demos.HSP.html#51717" class="Bound">q</a> <a id="52060" href="Demos.HSP.html#52160" class="Function Operator">‚üß‚ÇÅ</a>               <a id="52077" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a>  <a id="52082" href="Demos.HSP.html#51797" class="Bound">a</a>                <a id="52099" href="Relation.Binary.Reasoning.Base.Single.html#2555" class="Function Operator">‚àé</a> <a id="52101" class="Keyword">where</a>
  <a id="52109" class="Keyword">open</a> <a id="52114" href="Demos.HSP.html#42121" class="Module">Environment</a> <a id="52126" class="Symbol">(</a><a id="52127" href="Demos.HSP.html#24369" class="Function">‚®Ö</a> <a id="52129" href="Demos.HSP.html#51693" class="Bound">ùíú</a><a id="52130" class="Symbol">)</a>  <a id="52133" class="Keyword">using</a> <a id="52139" class="Symbol">()</a> <a id="52142" class="Keyword">renaming</a> <a id="52151" class="Symbol">(</a> <a id="52153" href="Demos.HSP.html#42685" class="Function Operator">‚ü¶_‚üß</a> <a id="52157" class="Symbol">to</a> <a id="52160" class="Function Operator">‚ü¶_‚üß‚ÇÅ</a> <a id="52165" class="Symbol">)</a>
  <a id="52169" class="Keyword">open</a> <a id="52174" href="Demos.HSP.html#42121" class="Module">Environment</a>        <a id="52193" class="Keyword">using</a> <a id="52199" class="Symbol">(</a> <a id="52201" href="Demos.HSP.html#42685" class="Function Operator">‚ü¶_‚üß</a> <a id="52205" class="Symbol">)</a>
  <a id="52209" class="Keyword">open</a> <a id="52214" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="52221" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="52224" href="Demos.HSP.html#24369" class="Function">‚®Ö</a> <a id="52226" href="Demos.HSP.html#51693" class="Bound">ùíú</a> <a id="52228" href="Demos.HSP.html#19405" class="Function Operator">]</a>    <a id="52233" class="Keyword">using</a> <a id="52239" class="Symbol">(</a> <a id="52241" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="52245" class="Symbol">)</a>
  <a id="52249" class="Keyword">open</a> <a id="52254" href="Relation.Binary.Reasoning.Setoid.html" class="Module">SetoidReasoning</a> <a id="52270" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="52273" href="Demos.HSP.html#24369" class="Function">‚®Ö</a> <a id="52275" href="Demos.HSP.html#51693" class="Bound">ùíú</a> <a id="52277" href="Demos.HSP.html#19405" class="Function Operator">]</a>

</pre>

A *variety* is a class of `ùëÜ`-algebras that is closed under the taking of homomorphic images, subalgebras, and arbitrary products. If we define `V ùí¶ := H (S (P ùí¶))`, then `ùí¶` is a variety iff `V ùí¶  ‚äÜ ùí¶`.
(The converse inclusion holds by virtue of the fact that `V` is a composition of closure operators.)
The class `V ùí¶` is called the *varietal closure* of `ùí¶`. Here is how we define `V` in type theory.
(The explicit universe level declarations that appear in the definition are needed for disambiguation.)

<pre class="Agda">

<a id="52815" class="Keyword">module</a> <a id="52822" href="Demos.HSP.html#52822" class="Module">_</a>  <a id="52825" class="Symbol">{</a><a id="52826" href="Demos.HSP.html#52826" class="Bound">Œ±</a> <a id="52828" href="Demos.HSP.html#52828" class="Bound">œÅ·µÉ</a> <a id="52831" href="Demos.HSP.html#52831" class="Bound">Œ≤</a> <a id="52833" href="Demos.HSP.html#52833" class="Bound">œÅ·µá</a> <a id="52836" href="Demos.HSP.html#52836" class="Bound">Œ≥</a> <a id="52838" href="Demos.HSP.html#52838" class="Bound">œÅ·∂ú</a> <a id="52841" href="Demos.HSP.html#52841" class="Bound">Œ¥</a> <a id="52843" href="Demos.HSP.html#52843" class="Bound">œÅ·µà</a> <a id="52846" class="Symbol">:</a> <a id="52848" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="52853" class="Symbol">}</a> <a id="52855" class="Keyword">where</a>
 <a id="52862" class="Keyword">private</a> <a id="52870" href="Demos.HSP.html#52870" class="Function">a</a> <a id="52872" class="Symbol">=</a> <a id="52874" href="Demos.HSP.html#52826" class="Bound">Œ±</a> <a id="52876" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="52878" href="Demos.HSP.html#52828" class="Bound">œÅ·µÉ</a> <a id="52881" class="Symbol">;</a> <a id="52883" href="Demos.HSP.html#52883" class="Function">b</a> <a id="52885" class="Symbol">=</a> <a id="52887" href="Demos.HSP.html#52831" class="Bound">Œ≤</a> <a id="52889" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="52891" href="Demos.HSP.html#52833" class="Bound">œÅ·µá</a>
 <a id="52895" href="Demos.HSP.html#52895" class="Function">V</a> <a id="52897" class="Symbol">:</a> <a id="52899" class="Symbol">‚àÄ</a> <a id="52901" href="Demos.HSP.html#52901" class="Bound">‚Ñì</a> <a id="52903" href="Demos.HSP.html#52903" class="Bound">Œπ</a> <a id="52905" class="Symbol">‚Üí</a> <a id="52907" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="52911" class="Symbol">(</a><a id="52912" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="52920" href="Demos.HSP.html#52826" class="Bound">Œ±</a> <a id="52922" href="Demos.HSP.html#52828" class="Bound">œÅ·µÉ</a><a id="52924" class="Symbol">)</a> <a id="52926" class="Symbol">(</a><a id="52927" href="Demos.HSP.html#52870" class="Function">a</a> <a id="52929" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="52931" href="Demos.HSP.html#34955" class="Function">ov</a> <a id="52934" href="Demos.HSP.html#52901" class="Bound">‚Ñì</a><a id="52935" class="Symbol">)</a> <a id="52937" class="Symbol">‚Üí</a>  <a id="52940" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="52944" class="Symbol">(</a><a id="52945" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="52953" href="Demos.HSP.html#52841" class="Bound">Œ¥</a> <a id="52955" href="Demos.HSP.html#52843" class="Bound">œÅ·µà</a><a id="52957" class="Symbol">)</a> <a id="52959" class="Symbol">_</a>
 <a id="52962" href="Demos.HSP.html#52895" class="Function">V</a> <a id="52964" href="Demos.HSP.html#52964" class="Bound">‚Ñì</a> <a id="52966" href="Demos.HSP.html#52966" class="Bound">Œπ</a> <a id="52968" href="Demos.HSP.html#52968" class="Bound">ùí¶</a> <a id="52970" class="Symbol">=</a> <a id="52972" href="Demos.HSP.html#49589" class="Function">H</a><a id="52973" class="Symbol">{</a><a id="52974" href="Demos.HSP.html#52836" class="Bound">Œ≥</a><a id="52975" class="Symbol">}{</a><a id="52977" href="Demos.HSP.html#52838" class="Bound">œÅ·∂ú</a><a id="52979" class="Symbol">}{</a><a id="52981" href="Demos.HSP.html#52841" class="Bound">Œ¥</a><a id="52982" class="Symbol">}{</a><a id="52984" href="Demos.HSP.html#52843" class="Bound">œÅ·µà</a><a id="52986" class="Symbol">}</a> <a id="52988" class="Symbol">(</a><a id="52989" href="Demos.HSP.html#52870" class="Function">a</a> <a id="52991" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="52993" href="Demos.HSP.html#52883" class="Function">b</a> <a id="52995" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="52997" href="Demos.HSP.html#52964" class="Bound">‚Ñì</a> <a id="52999" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="53001" href="Demos.HSP.html#52966" class="Bound">Œπ</a><a id="53002" class="Symbol">)</a> <a id="53004" class="Symbol">(</a><a id="53005" href="Demos.HSP.html#49712" class="Function">S</a><a id="53006" class="Symbol">{</a><a id="53007" href="Demos.HSP.html#52831" class="Bound">Œ≤</a><a id="53008" class="Symbol">}{</a><a id="53010" href="Demos.HSP.html#52833" class="Bound">œÅ·µá</a><a id="53012" class="Symbol">}</a> <a id="53014" class="Symbol">(</a><a id="53015" href="Demos.HSP.html#52870" class="Function">a</a> <a id="53017" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="53019" href="Demos.HSP.html#52964" class="Bound">‚Ñì</a> <a id="53021" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="53023" href="Demos.HSP.html#52966" class="Bound">Œπ</a><a id="53024" class="Symbol">)</a> <a id="53026" class="Symbol">(</a><a id="53027" href="Demos.HSP.html#49824" class="Function">P</a> <a id="53029" href="Demos.HSP.html#52964" class="Bound">‚Ñì</a> <a id="53031" href="Demos.HSP.html#52966" class="Bound">Œπ</a> <a id="53033" href="Demos.HSP.html#52968" class="Bound">ùí¶</a><a id="53034" class="Symbol">))</a>

</pre>

The classes `H ùí¶`, `S ùí¶`, `P ùí¶`, and `V ùí¶` all satisfy the
same term identities.  We will only use a subset of the inclusions needed to prove this
assertion. (The others are included in the `Setoid.Varieties.Preservation` module of the [agda-algebras][] library.) First, the closure operator `H` preserves the identities modeled by the given class; this follows almost immediately from the invariance lemma `‚äß-H-invar`.

<pre class="Agda">

<a id="53485" class="Keyword">module</a> <a id="53492" href="Demos.HSP.html#53492" class="Module">_</a>  <a id="53495" class="Symbol">{</a><a id="53496" href="Demos.HSP.html#53496" class="Bound">X</a> <a id="53498" class="Symbol">:</a> <a id="53500" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="53505" href="Demos.HSP.html#7635" class="Generalizable">œá</a><a id="53506" class="Symbol">}{</a><a id="53508" href="Demos.HSP.html#53508" class="Bound">ùí¶</a> <a id="53510" class="Symbol">:</a> <a id="53512" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="53516" class="Symbol">(</a><a id="53517" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="53525" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="53527" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a><a id="53529" class="Symbol">)</a> <a id="53531" class="Symbol">(</a><a id="53532" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="53534" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="53536" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a> <a id="53539" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="53541" href="Demos.HSP.html#34955" class="Function">ov</a> <a id="53544" href="Demos.HSP.html#7637" class="Generalizable">‚Ñì</a><a id="53545" class="Symbol">)}{</a><a id="53548" href="Demos.HSP.html#53548" class="Bound">p</a> <a id="53550" href="Demos.HSP.html#53550" class="Bound">q</a> <a id="53552" class="Symbol">:</a> <a id="53554" href="Demos.HSP.html#39820" class="Datatype">Term</a> <a id="53559" href="Demos.HSP.html#53496" class="Bound">X</a><a id="53560" class="Symbol">}</a> <a id="53562" class="Keyword">where</a>
 <a id="53569" href="Demos.HSP.html#53569" class="Function">H-id1</a> <a id="53575" class="Symbol">:</a> <a id="53577" href="Demos.HSP.html#53508" class="Bound">ùí¶</a> <a id="53579" href="Demos.HSP.html#46428" class="Function Operator">‚ä´</a> <a id="53581" href="Demos.HSP.html#53548" class="Bound">p</a> <a id="53583" href="Demos.HSP.html#46428" class="Function Operator">‚âà</a> <a id="53585" href="Demos.HSP.html#53550" class="Bound">q</a> <a id="53587" class="Symbol">‚Üí</a> <a id="53589" href="Demos.HSP.html#49589" class="Function">H</a><a id="53590" class="Symbol">{</a><a id="53591" class="Argument">Œ≤</a> <a id="53593" class="Symbol">=</a> <a id="53595" href="Demos.HSP.html#53525" class="Bound">Œ±</a><a id="53596" class="Symbol">}{</a><a id="53598" href="Demos.HSP.html#53527" class="Bound">œÅ·µÉ</a><a id="53600" class="Symbol">}</a><a id="53601" href="Demos.HSP.html#53544" class="Bound">‚Ñì</a> <a id="53603" href="Demos.HSP.html#53508" class="Bound">ùí¶</a> <a id="53605" href="Demos.HSP.html#46428" class="Function Operator">‚ä´</a> <a id="53607" href="Demos.HSP.html#53548" class="Bound">p</a> <a id="53609" href="Demos.HSP.html#46428" class="Function Operator">‚âà</a> <a id="53611" href="Demos.HSP.html#53550" class="Bound">q</a>
 <a id="53614" href="Demos.HSP.html#53569" class="Function">H-id1</a> <a id="53620" href="Demos.HSP.html#53620" class="Bound">œÉ</a> <a id="53622" href="Demos.HSP.html#53622" class="Bound">ùë©</a> <a id="53624" class="Symbol">(</a><a id="53625" href="Demos.HSP.html#53625" class="Bound">ùë®</a> <a id="53627" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="53629" href="Demos.HSP.html#53629" class="Bound">kA</a> <a id="53632" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="53634" href="Demos.HSP.html#53634" class="Bound">BimgA</a><a id="53639" class="Symbol">)</a> <a id="53641" class="Symbol">=</a> <a id="53643" href="Demos.HSP.html#50253" class="Function">‚äß-H-invar</a><a id="53652" class="Symbol">{</a><a id="53653" class="Argument">p</a> <a id="53655" class="Symbol">=</a> <a id="53657" href="Demos.HSP.html#53548" class="Bound">p</a><a id="53658" class="Symbol">}{</a><a id="53660" href="Demos.HSP.html#53550" class="Bound">q</a><a id="53661" class="Symbol">}</a> <a id="53663" class="Symbol">(</a><a id="53664" href="Demos.HSP.html#53620" class="Bound">œÉ</a> <a id="53666" href="Demos.HSP.html#53625" class="Bound">ùë®</a> <a id="53668" href="Demos.HSP.html#53629" class="Bound">kA</a><a id="53670" class="Symbol">)</a> <a id="53672" href="Demos.HSP.html#53634" class="Bound">BimgA</a>

</pre>
The analogous preservation result for `S` is a consequence of the invariance lemma `‚äß-S-invar`; the converse, which we call `S-id2`, has an equally straightforward proof.

<pre class="Agda">

 <a id="53877" href="Demos.HSP.html#53877" class="Function">S-id1</a> <a id="53883" class="Symbol">:</a> <a id="53885" href="Demos.HSP.html#53508" class="Bound">ùí¶</a> <a id="53887" href="Demos.HSP.html#46428" class="Function Operator">‚ä´</a> <a id="53889" href="Demos.HSP.html#53548" class="Bound">p</a> <a id="53891" href="Demos.HSP.html#46428" class="Function Operator">‚âà</a> <a id="53893" href="Demos.HSP.html#53550" class="Bound">q</a> <a id="53895" class="Symbol">‚Üí</a> <a id="53897" href="Demos.HSP.html#49712" class="Function">S</a><a id="53898" class="Symbol">{</a><a id="53899" class="Argument">Œ≤</a> <a id="53901" class="Symbol">=</a> <a id="53903" href="Demos.HSP.html#53525" class="Bound">Œ±</a><a id="53904" class="Symbol">}{</a><a id="53906" href="Demos.HSP.html#53527" class="Bound">œÅ·µÉ</a><a id="53908" class="Symbol">}</a><a id="53909" href="Demos.HSP.html#53544" class="Bound">‚Ñì</a> <a id="53911" href="Demos.HSP.html#53508" class="Bound">ùí¶</a> <a id="53913" href="Demos.HSP.html#46428" class="Function Operator">‚ä´</a> <a id="53915" href="Demos.HSP.html#53548" class="Bound">p</a> <a id="53917" href="Demos.HSP.html#46428" class="Function Operator">‚âà</a> <a id="53919" href="Demos.HSP.html#53550" class="Bound">q</a>
 <a id="53922" href="Demos.HSP.html#53877" class="Function">S-id1</a> <a id="53928" href="Demos.HSP.html#53928" class="Bound">œÉ</a> <a id="53930" href="Demos.HSP.html#53930" class="Bound">ùë©</a> <a id="53932" class="Symbol">(</a><a id="53933" href="Demos.HSP.html#53933" class="Bound">ùë®</a> <a id="53935" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="53937" href="Demos.HSP.html#53937" class="Bound">kA</a> <a id="53940" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="53942" href="Demos.HSP.html#53942" class="Bound">B‚â§A</a><a id="53945" class="Symbol">)</a> <a id="53947" class="Symbol">=</a> <a id="53949" href="Demos.HSP.html#50999" class="Function">‚äß-S-invar</a><a id="53958" class="Symbol">{</a><a id="53959" class="Argument">p</a> <a id="53961" class="Symbol">=</a> <a id="53963" href="Demos.HSP.html#53548" class="Bound">p</a><a id="53964" class="Symbol">}{</a><a id="53966" href="Demos.HSP.html#53550" class="Bound">q</a><a id="53967" class="Symbol">}</a> <a id="53969" class="Symbol">(</a><a id="53970" href="Demos.HSP.html#53928" class="Bound">œÉ</a> <a id="53972" href="Demos.HSP.html#53933" class="Bound">ùë®</a> <a id="53974" href="Demos.HSP.html#53937" class="Bound">kA</a><a id="53976" class="Symbol">)</a> <a id="53978" href="Demos.HSP.html#53942" class="Bound">B‚â§A</a>

 <a id="53984" href="Demos.HSP.html#53984" class="Function">S-id2</a> <a id="53990" class="Symbol">:</a> <a id="53992" href="Demos.HSP.html#49712" class="Function">S</a> <a id="53994" href="Demos.HSP.html#53544" class="Bound">‚Ñì</a> <a id="53996" href="Demos.HSP.html#53508" class="Bound">ùí¶</a> <a id="53998" href="Demos.HSP.html#46428" class="Function Operator">‚ä´</a> <a id="54000" href="Demos.HSP.html#53548" class="Bound">p</a> <a id="54002" href="Demos.HSP.html#46428" class="Function Operator">‚âà</a> <a id="54004" href="Demos.HSP.html#53550" class="Bound">q</a> <a id="54006" class="Symbol">‚Üí</a> <a id="54008" href="Demos.HSP.html#53508" class="Bound">ùí¶</a> <a id="54010" href="Demos.HSP.html#46428" class="Function Operator">‚ä´</a> <a id="54012" href="Demos.HSP.html#53548" class="Bound">p</a> <a id="54014" href="Demos.HSP.html#46428" class="Function Operator">‚âà</a> <a id="54016" href="Demos.HSP.html#53550" class="Bound">q</a>
 <a id="54019" href="Demos.HSP.html#53984" class="Function">S-id2</a> <a id="54025" href="Demos.HSP.html#54025" class="Bound">Spq</a> <a id="54029" href="Demos.HSP.html#54029" class="Bound">ùë®</a> <a id="54031" href="Demos.HSP.html#54031" class="Bound">kA</a> <a id="54034" class="Symbol">=</a> <a id="54036" href="Demos.HSP.html#54025" class="Bound">Spq</a> <a id="54040" href="Demos.HSP.html#54029" class="Bound">ùë®</a> <a id="54042" class="Symbol">(</a><a id="54043" href="Demos.HSP.html#54029" class="Bound">ùë®</a> <a id="54045" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="54047" class="Symbol">(</a><a id="54048" href="Demos.HSP.html#54031" class="Bound">kA</a> <a id="54051" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="54053" href="Demos.HSP.html#38043" class="Function">‚â§-reflexive</a><a id="54064" class="Symbol">))</a>

</pre>
The [agda-algebras][] library includes analogous pairs of implications for `P`, `H`, and `V`, called `P-id1`, `P-id2`, `H-id1`, etc. Here we only need the first implication in each case, so we omit the others.

<pre class="Agda">

 <a id="54305" href="Demos.HSP.html#54305" class="Function">P-id1</a> <a id="54311" class="Symbol">:</a> <a id="54313" class="Symbol">‚àÄ{</a><a id="54315" href="Demos.HSP.html#54315" class="Bound">Œπ</a><a id="54316" class="Symbol">}</a> <a id="54318" class="Symbol">‚Üí</a> <a id="54320" href="Demos.HSP.html#53508" class="Bound">ùí¶</a> <a id="54322" href="Demos.HSP.html#46428" class="Function Operator">‚ä´</a> <a id="54324" href="Demos.HSP.html#53548" class="Bound">p</a> <a id="54326" href="Demos.HSP.html#46428" class="Function Operator">‚âà</a> <a id="54328" href="Demos.HSP.html#53550" class="Bound">q</a> <a id="54330" class="Symbol">‚Üí</a> <a id="54332" href="Demos.HSP.html#49824" class="Function">P</a><a id="54333" class="Symbol">{</a><a id="54334" class="Argument">Œ≤</a> <a id="54336" class="Symbol">=</a> <a id="54338" href="Demos.HSP.html#53525" class="Bound">Œ±</a><a id="54339" class="Symbol">}{</a><a id="54341" href="Demos.HSP.html#53527" class="Bound">œÅ·µÉ</a><a id="54343" class="Symbol">}</a><a id="54344" href="Demos.HSP.html#53544" class="Bound">‚Ñì</a> <a id="54346" href="Demos.HSP.html#54315" class="Bound">Œπ</a> <a id="54348" href="Demos.HSP.html#53508" class="Bound">ùí¶</a> <a id="54350" href="Demos.HSP.html#46428" class="Function Operator">‚ä´</a> <a id="54352" href="Demos.HSP.html#53548" class="Bound">p</a> <a id="54354" href="Demos.HSP.html#46428" class="Function Operator">‚âà</a> <a id="54356" href="Demos.HSP.html#53550" class="Bound">q</a>
 <a id="54359" href="Demos.HSP.html#54305" class="Function">P-id1</a> <a id="54365" href="Demos.HSP.html#54365" class="Bound">œÉ</a> <a id="54367" href="Demos.HSP.html#54367" class="Bound">ùë®</a> <a id="54369" class="Symbol">(</a><a id="54370" href="Demos.HSP.html#54370" class="Bound">I</a> <a id="54372" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="54374" href="Demos.HSP.html#54374" class="Bound">ùíú</a> <a id="54376" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="54378" href="Demos.HSP.html#54378" class="Bound">kA</a> <a id="54381" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="54383" href="Demos.HSP.html#54383" class="Bound">A‚âÖ‚®ÖA</a><a id="54387" class="Symbol">)</a> <a id="54389" class="Symbol">=</a> <a id="54391" href="Demos.HSP.html#47410" class="Function">‚äß-I-invar</a> <a id="54401" href="Demos.HSP.html#54367" class="Bound">ùë®</a> <a id="54403" href="Demos.HSP.html#53548" class="Bound">p</a> <a id="54405" href="Demos.HSP.html#53550" class="Bound">q</a> <a id="54407" href="Demos.HSP.html#54431" class="Function">IH</a> <a id="54410" class="Symbol">(</a><a id="54411" href="Demos.HSP.html#33928" class="Function">‚âÖ-sym</a> <a id="54417" href="Demos.HSP.html#54383" class="Bound">A‚âÖ‚®ÖA</a><a id="54421" class="Symbol">)</a> <a id="54423" class="Keyword">where</a>
  <a id="54431" href="Demos.HSP.html#54431" class="Function">IH</a> <a id="54434" class="Symbol">:</a> <a id="54436" href="Demos.HSP.html#24369" class="Function">‚®Ö</a> <a id="54438" href="Demos.HSP.html#54374" class="Bound">ùíú</a> <a id="54440" href="Demos.HSP.html#46330" class="Function Operator">‚äß</a> <a id="54442" href="Demos.HSP.html#53548" class="Bound">p</a> <a id="54444" href="Demos.HSP.html#46330" class="Function Operator">‚âà</a> <a id="54446" href="Demos.HSP.html#53550" class="Bound">q</a>
  <a id="54450" href="Demos.HSP.html#54431" class="Function">IH</a> <a id="54453" class="Symbol">=</a> <a id="54455" href="Demos.HSP.html#51736" class="Function">‚äß-P-invar</a> <a id="54465" href="Demos.HSP.html#54374" class="Bound">ùíú</a> <a id="54467" class="Symbol">{</a><a id="54468" href="Demos.HSP.html#53548" class="Bound">p</a><a id="54469" class="Symbol">}{</a><a id="54471" href="Demos.HSP.html#53550" class="Bound">q</a><a id="54472" class="Symbol">}</a> <a id="54474" class="Symbol">Œª</a> <a id="54476" href="Demos.HSP.html#54476" class="Bound">i</a> <a id="54478" class="Symbol">‚Üí</a> <a id="54480" href="Demos.HSP.html#54365" class="Bound">œÉ</a> <a id="54482" class="Symbol">(</a><a id="54483" href="Demos.HSP.html#54374" class="Bound">ùíú</a> <a id="54485" href="Demos.HSP.html#54476" class="Bound">i</a><a id="54486" class="Symbol">)</a> <a id="54488" class="Symbol">(</a><a id="54489" href="Demos.HSP.html#54378" class="Bound">kA</a> <a id="54492" href="Demos.HSP.html#54476" class="Bound">i</a><a id="54493" class="Symbol">)</a>

<a id="54496" class="Keyword">module</a> <a id="54503" href="Demos.HSP.html#54503" class="Module">_</a> <a id="54505" class="Symbol">{</a><a id="54506" href="Demos.HSP.html#54506" class="Bound">X</a> <a id="54508" class="Symbol">:</a> <a id="54510" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="54515" href="Demos.HSP.html#7635" class="Generalizable">œá</a><a id="54516" class="Symbol">}{</a><a id="54518" href="Demos.HSP.html#54518" class="Bound">Œπ</a> <a id="54520" class="Symbol">:</a> <a id="54522" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="54527" class="Symbol">}(</a><a id="54529" href="Demos.HSP.html#54529" class="Bound">‚Ñì</a> <a id="54531" class="Symbol">:</a> <a id="54533" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="54538" class="Symbol">){</a><a id="54540" href="Demos.HSP.html#54540" class="Bound">ùí¶</a> <a id="54542" class="Symbol">:</a> <a id="54544" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="54548" class="Symbol">(</a><a id="54549" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="54557" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="54559" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a><a id="54561" class="Symbol">)(</a><a id="54563" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="54565" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="54567" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a> <a id="54570" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="54572" href="Demos.HSP.html#34955" class="Function">ov</a> <a id="54575" href="Demos.HSP.html#54529" class="Bound">‚Ñì</a><a id="54576" class="Symbol">)}{</a><a id="54579" href="Demos.HSP.html#54579" class="Bound">p</a> <a id="54581" href="Demos.HSP.html#54581" class="Bound">q</a> <a id="54583" class="Symbol">:</a> <a id="54585" href="Demos.HSP.html#39820" class="Datatype">Term</a> <a id="54590" href="Demos.HSP.html#54506" class="Bound">X</a><a id="54591" class="Symbol">}</a> <a id="54593" class="Keyword">where</a>
 <a id="54600" class="Keyword">private</a> <a id="54608" href="Demos.HSP.html#54608" class="Function">a‚ÑìŒπ</a> <a id="54612" class="Symbol">=</a> <a id="54614" href="Demos.HSP.html#54557" class="Bound">Œ±</a> <a id="54616" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="54618" href="Demos.HSP.html#54559" class="Bound">œÅ·µÉ</a> <a id="54621" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="54623" href="Demos.HSP.html#54529" class="Bound">‚Ñì</a> <a id="54625" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="54627" href="Demos.HSP.html#54518" class="Bound">Œπ</a>
 <a id="54630" href="Demos.HSP.html#54630" class="Function">V-id1</a> <a id="54636" class="Symbol">:</a> <a id="54638" href="Demos.HSP.html#54540" class="Bound">ùí¶</a> <a id="54640" href="Demos.HSP.html#46428" class="Function Operator">‚ä´</a> <a id="54642" href="Demos.HSP.html#54579" class="Bound">p</a> <a id="54644" href="Demos.HSP.html#46428" class="Function Operator">‚âà</a> <a id="54646" href="Demos.HSP.html#54581" class="Bound">q</a> <a id="54648" class="Symbol">‚Üí</a> <a id="54650" href="Demos.HSP.html#52895" class="Function">V</a> <a id="54652" href="Demos.HSP.html#54529" class="Bound">‚Ñì</a> <a id="54654" href="Demos.HSP.html#54518" class="Bound">Œπ</a> <a id="54656" href="Demos.HSP.html#54540" class="Bound">ùí¶</a> <a id="54658" href="Demos.HSP.html#46428" class="Function Operator">‚ä´</a> <a id="54660" href="Demos.HSP.html#54579" class="Bound">p</a> <a id="54662" href="Demos.HSP.html#46428" class="Function Operator">‚âà</a> <a id="54664" href="Demos.HSP.html#54581" class="Bound">q</a>
 <a id="54667" href="Demos.HSP.html#54630" class="Function">V-id1</a> <a id="54673" href="Demos.HSP.html#54673" class="Bound">œÉ</a> <a id="54675" href="Demos.HSP.html#54675" class="Bound">ùë©</a> <a id="54677" class="Symbol">(</a><a id="54678" href="Demos.HSP.html#54678" class="Bound">ùë®</a> <a id="54680" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="54682" class="Symbol">(</a><a id="54683" href="Demos.HSP.html#54683" class="Bound">‚®ÖA</a> <a id="54686" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="54688" href="Demos.HSP.html#54688" class="Bound">p‚®ÖA</a> <a id="54692" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="54694" href="Demos.HSP.html#54694" class="Bound">A‚â§‚®ÖA</a><a id="54698" class="Symbol">)</a> <a id="54700" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="54702" href="Demos.HSP.html#54702" class="Bound">BimgA</a><a id="54707" class="Symbol">)</a> <a id="54709" class="Symbol">=</a>
  <a id="54713" href="Demos.HSP.html#53569" class="Function">H-id1</a><a id="54718" class="Symbol">{</a><a id="54719" class="Argument">‚Ñì</a> <a id="54721" class="Symbol">=</a> <a id="54723" href="Demos.HSP.html#54608" class="Function">a‚ÑìŒπ</a><a id="54726" class="Symbol">}{</a><a id="54728" class="Argument">ùí¶</a> <a id="54730" class="Symbol">=</a> <a id="54732" href="Demos.HSP.html#49712" class="Function">S</a> <a id="54734" href="Demos.HSP.html#54608" class="Function">a‚ÑìŒπ</a> <a id="54738" class="Symbol">(</a><a id="54739" href="Demos.HSP.html#49824" class="Function">P</a> <a id="54741" class="Symbol">{</a><a id="54742" class="Argument">Œ≤</a> <a id="54744" class="Symbol">=</a> <a id="54746" href="Demos.HSP.html#54557" class="Bound">Œ±</a><a id="54747" class="Symbol">}{</a><a id="54749" href="Demos.HSP.html#54559" class="Bound">œÅ·µÉ</a><a id="54751" class="Symbol">}</a><a id="54752" href="Demos.HSP.html#54529" class="Bound">‚Ñì</a> <a id="54754" href="Demos.HSP.html#54518" class="Bound">Œπ</a> <a id="54756" href="Demos.HSP.html#54540" class="Bound">ùí¶</a><a id="54757" class="Symbol">)}{</a><a id="54760" class="Argument">p</a> <a id="54762" class="Symbol">=</a> <a id="54764" href="Demos.HSP.html#54579" class="Bound">p</a><a id="54765" class="Symbol">}{</a><a id="54767" href="Demos.HSP.html#54581" class="Bound">q</a><a id="54768" class="Symbol">}</a> <a id="54770" href="Demos.HSP.html#54875" class="Function">spK‚äßpq</a> <a id="54777" href="Demos.HSP.html#54675" class="Bound">ùë©</a> <a id="54779" class="Symbol">(</a><a id="54780" href="Demos.HSP.html#54678" class="Bound">ùë®</a> <a id="54782" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="54784" class="Symbol">(</a><a id="54785" href="Demos.HSP.html#54808" class="Function">spA</a> <a id="54789" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="54791" href="Demos.HSP.html#54702" class="Bound">BimgA</a><a id="54796" class="Symbol">))</a> <a id="54799" class="Keyword">where</a>
   <a id="54808" href="Demos.HSP.html#54808" class="Function">spA</a> <a id="54812" class="Symbol">:</a> <a id="54814" href="Demos.HSP.html#54678" class="Bound">ùë®</a> <a id="54816" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="54818" href="Demos.HSP.html#49712" class="Function">S</a> <a id="54820" href="Demos.HSP.html#54608" class="Function">a‚ÑìŒπ</a> <a id="54824" class="Symbol">(</a><a id="54825" href="Demos.HSP.html#49824" class="Function">P</a> <a id="54827" class="Symbol">{</a><a id="54828" class="Argument">Œ≤</a> <a id="54830" class="Symbol">=</a> <a id="54832" href="Demos.HSP.html#54557" class="Bound">Œ±</a><a id="54833" class="Symbol">}{</a><a id="54835" href="Demos.HSP.html#54559" class="Bound">œÅ·µÉ</a><a id="54837" class="Symbol">}</a><a id="54838" href="Demos.HSP.html#54529" class="Bound">‚Ñì</a> <a id="54840" href="Demos.HSP.html#54518" class="Bound">Œπ</a> <a id="54842" href="Demos.HSP.html#54540" class="Bound">ùí¶</a><a id="54843" class="Symbol">)</a>
   <a id="54848" href="Demos.HSP.html#54808" class="Function">spA</a> <a id="54852" class="Symbol">=</a> <a id="54854" href="Demos.HSP.html#54683" class="Bound">‚®ÖA</a> <a id="54857" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="54859" class="Symbol">(</a><a id="54860" href="Demos.HSP.html#54688" class="Bound">p‚®ÖA</a> <a id="54864" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="54866" href="Demos.HSP.html#54694" class="Bound">A‚â§‚®ÖA</a><a id="54870" class="Symbol">)</a>
   <a id="54875" href="Demos.HSP.html#54875" class="Function">spK‚äßpq</a> <a id="54882" class="Symbol">:</a> <a id="54884" href="Demos.HSP.html#49712" class="Function">S</a> <a id="54886" href="Demos.HSP.html#54608" class="Function">a‚ÑìŒπ</a> <a id="54890" class="Symbol">(</a><a id="54891" href="Demos.HSP.html#49824" class="Function">P</a> <a id="54893" href="Demos.HSP.html#54529" class="Bound">‚Ñì</a> <a id="54895" href="Demos.HSP.html#54518" class="Bound">Œπ</a> <a id="54897" href="Demos.HSP.html#54540" class="Bound">ùí¶</a><a id="54898" class="Symbol">)</a> <a id="54900" href="Demos.HSP.html#46428" class="Function Operator">‚ä´</a> <a id="54902" href="Demos.HSP.html#54579" class="Bound">p</a> <a id="54904" href="Demos.HSP.html#46428" class="Function Operator">‚âà</a> <a id="54906" href="Demos.HSP.html#54581" class="Bound">q</a>
   <a id="54911" href="Demos.HSP.html#54875" class="Function">spK‚äßpq</a> <a id="54918" class="Symbol">=</a> <a id="54920" href="Demos.HSP.html#53877" class="Function">S-id1</a><a id="54925" class="Symbol">{</a><a id="54926" class="Argument">‚Ñì</a> <a id="54928" class="Symbol">=</a> <a id="54930" href="Demos.HSP.html#54608" class="Function">a‚ÑìŒπ</a><a id="54933" class="Symbol">}{</a><a id="54935" class="Argument">p</a> <a id="54937" class="Symbol">=</a> <a id="54939" href="Demos.HSP.html#54579" class="Bound">p</a><a id="54940" class="Symbol">}{</a><a id="54942" href="Demos.HSP.html#54581" class="Bound">q</a><a id="54943" class="Symbol">}</a> <a id="54945" class="Symbol">(</a><a id="54946" href="Demos.HSP.html#54305" class="Function">P-id1</a><a id="54951" class="Symbol">{</a><a id="54952" class="Argument">‚Ñì</a> <a id="54954" class="Symbol">=</a> <a id="54956" href="Demos.HSP.html#54529" class="Bound">‚Ñì</a><a id="54957" class="Symbol">}</a> <a id="54959" class="Symbol">{</a><a id="54960" class="Argument">ùí¶</a> <a id="54962" class="Symbol">=</a> <a id="54964" href="Demos.HSP.html#54540" class="Bound">ùí¶</a><a id="54965" class="Symbol">}{</a><a id="54967" class="Argument">p</a> <a id="54969" class="Symbol">=</a> <a id="54971" href="Demos.HSP.html#54579" class="Bound">p</a><a id="54972" class="Symbol">}{</a><a id="54974" href="Demos.HSP.html#54581" class="Bound">q</a><a id="54975" class="Symbol">}</a> <a id="54977" href="Demos.HSP.html#54673" class="Bound">œÉ</a><a id="54978" class="Symbol">)</a>
</pre>


Free Algebras
=============

#### The absolutely free algebra {#the-absolutely-free-algebra .unnumbered}

The term algebra `ùëª X` is the *absolutely free* `ùëÜ`-algebra over `X`.
That is, for every `ùëÜ`-algebra `ùë®`, the following hold.
* Every function from `X` to `ùïå[ ùë® ]` lifts to a homomorphism from `ùëª X` to `ùë®`.
* That homomorphism is unique.
Here we formalize the first of these properties by defining the lifting function `free-lift`
and its setoid analog `free-lift-func`, and then proving the latter is a homomorphism.
(For the proof of uniqueness, see the `Setoid.Terms.Properties` module of the [agda-algebras][] library.)

<pre class="Agda">

<a id="55638" class="Keyword">module</a> <a id="55645" href="Demos.HSP.html#55645" class="Module">_</a> <a id="55647" class="Symbol">{</a><a id="55648" href="Demos.HSP.html#55648" class="Bound">X</a> <a id="55650" class="Symbol">:</a> <a id="55652" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="55657" href="Demos.HSP.html#7635" class="Generalizable">œá</a><a id="55658" class="Symbol">}{</a><a id="55660" href="Demos.HSP.html#55660" class="Bound">ùë®</a> <a id="55662" class="Symbol">:</a> <a id="55664" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="55672" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="55674" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a><a id="55676" class="Symbol">}(</a><a id="55678" href="Demos.HSP.html#55678" class="Bound">h</a> <a id="55680" class="Symbol">:</a> <a id="55682" href="Demos.HSP.html#55648" class="Bound">X</a> <a id="55684" class="Symbol">‚Üí</a> <a id="55686" href="Demos.HSP.html#19459" class="Function Operator">ùïå[</a> <a id="55689" href="Demos.HSP.html#55660" class="Bound">ùë®</a> <a id="55691" href="Demos.HSP.html#19459" class="Function Operator">]</a><a id="55692" class="Symbol">)</a> <a id="55694" class="Keyword">where</a>
 <a id="55701" href="Demos.HSP.html#55701" class="Function">free-lift</a> <a id="55711" class="Symbol">:</a> <a id="55713" href="Demos.HSP.html#19459" class="Function Operator">ùïå[</a> <a id="55716" href="Demos.HSP.html#41448" class="Function">ùëª</a> <a id="55718" href="Demos.HSP.html#55648" class="Bound">X</a> <a id="55720" href="Demos.HSP.html#19459" class="Function Operator">]</a> <a id="55722" class="Symbol">‚Üí</a> <a id="55724" href="Demos.HSP.html#19459" class="Function Operator">ùïå[</a> <a id="55727" href="Demos.HSP.html#55660" class="Bound">ùë®</a> <a id="55729" href="Demos.HSP.html#19459" class="Function Operator">]</a>
 <a id="55732" href="Demos.HSP.html#55701" class="Function">free-lift</a> <a id="55742" class="Symbol">(</a><a id="55743" href="Demos.HSP.html#39860" class="InductiveConstructor">‚Ñä</a> <a id="55745" href="Demos.HSP.html#55745" class="Bound">x</a><a id="55746" class="Symbol">)</a>       <a id="55754" class="Symbol">=</a> <a id="55756" href="Demos.HSP.html#55678" class="Bound">h</a> <a id="55758" href="Demos.HSP.html#55745" class="Bound">x</a>
 <a id="55761" href="Demos.HSP.html#55701" class="Function">free-lift</a> <a id="55771" class="Symbol">(</a><a id="55772" href="Demos.HSP.html#39876" class="InductiveConstructor">node</a> <a id="55777" href="Demos.HSP.html#55777" class="Bound">f</a> <a id="55779" href="Demos.HSP.html#55779" class="Bound">t</a><a id="55780" class="Symbol">)</a>  <a id="55783" class="Symbol">=</a> <a id="55785" class="Symbol">(</a><a id="55786" href="Demos.HSP.html#55777" class="Bound">f</a> <a id="55788" href="Demos.HSP.html#19518" class="Function Operator">ÃÇ</a> <a id="55790" href="Demos.HSP.html#55660" class="Bound">ùë®</a><a id="55791" class="Symbol">)</a> <a id="55793" class="Symbol">Œª</a> <a id="55795" href="Demos.HSP.html#55795" class="Bound">i</a> <a id="55797" class="Symbol">‚Üí</a> <a id="55799" href="Demos.HSP.html#55701" class="Function">free-lift</a> <a id="55809" class="Symbol">(</a><a id="55810" href="Demos.HSP.html#55779" class="Bound">t</a> <a id="55812" href="Demos.HSP.html#55795" class="Bound">i</a><a id="55813" class="Symbol">)</a>

 <a id="55817" href="Demos.HSP.html#55817" class="Function">free-lift-func</a> <a id="55832" class="Symbol">:</a> <a id="55834" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="55837" href="Demos.HSP.html#41448" class="Function">ùëª</a> <a id="55839" href="Demos.HSP.html#55648" class="Bound">X</a> <a id="55841" href="Demos.HSP.html#19405" class="Function Operator">]</a> <a id="55843" href="Demos.HSP.html#6679" class="Record Operator">‚ü∂</a> <a id="55845" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="55848" href="Demos.HSP.html#55660" class="Bound">ùë®</a> <a id="55850" href="Demos.HSP.html#19405" class="Function Operator">]</a>
 <a id="55853" href="Demos.HSP.html#55817" class="Function">free-lift-func</a> <a id="55868" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="55872" href="Demos.HSP.html#55872" class="Bound">x</a> <a id="55874" class="Symbol">=</a> <a id="55876" href="Demos.HSP.html#55701" class="Function">free-lift</a> <a id="55886" href="Demos.HSP.html#55872" class="Bound">x</a>
 <a id="55889" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="55894" href="Demos.HSP.html#55817" class="Function">free-lift-func</a> <a id="55909" class="Symbol">=</a> <a id="55911" href="Demos.HSP.html#55998" class="Function">flcong</a> <a id="55918" class="Keyword">where</a>
  <a id="55926" class="Keyword">open</a> <a id="55931" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="55938" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="55941" href="Demos.HSP.html#55660" class="Bound">ùë®</a> <a id="55943" href="Demos.HSP.html#19405" class="Function Operator">]</a> <a id="55945" class="Keyword">using</a> <a id="55951" class="Symbol">(</a> <a id="55953" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="55957" class="Symbol">)</a> <a id="55959" class="Keyword">renaming</a> <a id="55968" class="Symbol">(</a> <a id="55970" href="Relation.Binary.Structures.html#1646" class="Function">reflexive</a> <a id="55980" class="Symbol">to</a> <a id="55983" class="Function">reflexive·¥¨</a> <a id="55994" class="Symbol">)</a>
  <a id="55998" href="Demos.HSP.html#55998" class="Function">flcong</a> <a id="56005" class="Symbol">:</a> <a id="56007" class="Symbol">‚àÄ</a> <a id="56009" class="Symbol">{</a><a id="56010" href="Demos.HSP.html#56010" class="Bound">s</a> <a id="56012" href="Demos.HSP.html#56012" class="Bound">t</a><a id="56013" class="Symbol">}</a> <a id="56015" class="Symbol">‚Üí</a> <a id="56017" href="Demos.HSP.html#56010" class="Bound">s</a> <a id="56019" href="Demos.HSP.html#40246" class="Datatype Operator">‚âÉ</a> <a id="56021" href="Demos.HSP.html#56012" class="Bound">t</a> <a id="56023" class="Symbol">‚Üí</a> <a id="56025" href="Demos.HSP.html#55701" class="Function">free-lift</a> <a id="56035" href="Demos.HSP.html#56010" class="Bound">s</a> <a id="56037" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a> <a id="56039" href="Demos.HSP.html#55701" class="Function">free-lift</a> <a id="56049" href="Demos.HSP.html#56012" class="Bound">t</a>
  <a id="56053" href="Demos.HSP.html#55998" class="Function">flcong</a> <a id="56060" class="Symbol">(</a><a id="56061" href="Demos.HSP.html#40290" class="InductiveConstructor">_‚âÉ_.rfl</a> <a id="56069" href="Demos.HSP.html#56069" class="Bound">x</a><a id="56070" class="Symbol">)</a> <a id="56072" class="Symbol">=</a> <a id="56074" href="Demos.HSP.html#55983" class="Function">reflexive·¥¨</a> <a id="56085" class="Symbol">(</a><a id="56086" href="Relation.Binary.PropositionalEquality.Core.html#1130" class="Function">‚â°.cong</a> <a id="56093" href="Demos.HSP.html#55678" class="Bound">h</a> <a id="56095" href="Demos.HSP.html#56069" class="Bound">x</a><a id="56096" class="Symbol">)</a>
  <a id="56100" href="Demos.HSP.html#55998" class="Function">flcong</a> <a id="56107" class="Symbol">(</a><a id="56108" href="Demos.HSP.html#40332" class="InductiveConstructor">_‚âÉ_.gnl</a> <a id="56116" href="Demos.HSP.html#56116" class="Bound">x</a><a id="56117" class="Symbol">)</a> <a id="56119" class="Symbol">=</a> <a id="56121" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="56126" class="Symbol">(</a><a id="56127" href="Demos.HSP.html#18845" class="Field">Interp</a> <a id="56134" href="Demos.HSP.html#55660" class="Bound">ùë®</a><a id="56135" class="Symbol">)</a> <a id="56137" class="Symbol">(</a><a id="56138" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="56145" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="56147" class="Symbol">Œª</a> <a id="56149" href="Demos.HSP.html#56149" class="Bound">i</a> <a id="56151" class="Symbol">‚Üí</a> <a id="56153" href="Demos.HSP.html#55998" class="Function">flcong</a> <a id="56160" class="Symbol">(</a><a id="56161" href="Demos.HSP.html#56116" class="Bound">x</a> <a id="56163" href="Demos.HSP.html#56149" class="Bound">i</a><a id="56164" class="Symbol">))</a>

 <a id="56169" href="Demos.HSP.html#56169" class="Function">lift-hom</a> <a id="56178" class="Symbol">:</a> <a id="56180" href="Demos.HSP.html#26745" class="Function">hom</a> <a id="56184" class="Symbol">(</a><a id="56185" href="Demos.HSP.html#41448" class="Function">ùëª</a> <a id="56187" href="Demos.HSP.html#55648" class="Bound">X</a><a id="56188" class="Symbol">)</a> <a id="56190" href="Demos.HSP.html#55660" class="Bound">ùë®</a>
 <a id="56193" href="Demos.HSP.html#56169" class="Function">lift-hom</a> <a id="56202" class="Symbol">=</a> <a id="56204" href="Demos.HSP.html#55817" class="Function">free-lift-func</a> <a id="56219" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a>
   <a id="56224" href="Demos.HSP.html#26692" class="InductiveConstructor">mkhom</a> <a id="56230" class="Symbol">Œª{</a><a id="56232" href="Demos.HSP.html#56232" class="Bound">_</a><a id="56233" class="Symbol">}{</a><a id="56235" href="Demos.HSP.html#56235" class="Bound">a</a><a id="56236" class="Symbol">}</a> <a id="56238" class="Symbol">‚Üí</a> <a id="56240" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="56245" class="Symbol">(</a><a id="56246" href="Demos.HSP.html#18845" class="Field">Interp</a> <a id="56253" href="Demos.HSP.html#55660" class="Bound">ùë®</a><a id="56254" class="Symbol">)</a> <a id="56256" class="Symbol">(</a><a id="56257" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="56264" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="56266" class="Symbol">Œª</a> <a id="56268" href="Demos.HSP.html#56268" class="Bound">i</a> <a id="56270" class="Symbol">‚Üí</a> <a id="56272" class="Symbol">(</a><a id="56273" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="56278" href="Demos.HSP.html#55817" class="Function">free-lift-func</a><a id="56292" class="Symbol">){</a><a id="56294" href="Demos.HSP.html#56235" class="Bound">a</a> <a id="56296" href="Demos.HSP.html#56268" class="Bound">i</a><a id="56297" class="Symbol">}</a> <a id="56299" href="Demos.HSP.html#40516" class="Function">‚âÉ-isRefl</a><a id="56307" class="Symbol">)</a>

</pre>

It turns out that the interpretation of a term `p` in an environment `Œ∑` is the same
as the free lift of `Œ∑` evaluated at `p`. We apply this fact a number of times in the sequel.

<pre class="Agda">

<a id="56516" class="Keyword">module</a> <a id="56523" href="Demos.HSP.html#56523" class="Module">_</a>  <a id="56526" class="Symbol">{</a><a id="56527" href="Demos.HSP.html#56527" class="Bound">X</a> <a id="56529" class="Symbol">:</a> <a id="56531" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="56536" href="Demos.HSP.html#7635" class="Generalizable">œá</a><a id="56537" class="Symbol">}</a> <a id="56539" class="Symbol">{</a><a id="56540" href="Demos.HSP.html#56540" class="Bound">ùë®</a> <a id="56542" class="Symbol">:</a> <a id="56544" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="56552" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="56554" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a><a id="56556" class="Symbol">}</a>   <a id="56560" class="Keyword">where</a>
 <a id="56567" class="Keyword">open</a> <a id="56572" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="56579" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="56582" href="Demos.HSP.html#56540" class="Bound">ùë®</a> <a id="56584" href="Demos.HSP.html#19405" class="Function Operator">]</a>  <a id="56587" class="Keyword">using</a> <a id="56593" class="Symbol">(</a> <a id="56595" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="56599" class="Symbol">;</a> <a id="56601" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="56606" class="Symbol">)</a>
 <a id="56609" class="Keyword">open</a> <a id="56614" href="Demos.HSP.html#42121" class="Module">Environment</a> <a id="56626" href="Demos.HSP.html#56540" class="Bound">ùë®</a>  <a id="56629" class="Keyword">using</a> <a id="56635" class="Symbol">(</a> <a id="56637" href="Demos.HSP.html#42685" class="Function Operator">‚ü¶_‚üß</a> <a id="56641" class="Symbol">)</a>

 <a id="56645" href="Demos.HSP.html#56645" class="Function">free-lift-interp</a> <a id="56662" class="Symbol">:</a> <a id="56664" class="Symbol">(</a><a id="56665" href="Demos.HSP.html#56665" class="Bound">Œ∑</a> <a id="56667" class="Symbol">:</a> <a id="56669" href="Demos.HSP.html#56527" class="Bound">X</a> <a id="56671" class="Symbol">‚Üí</a> <a id="56673" href="Demos.HSP.html#19459" class="Function Operator">ùïå[</a> <a id="56676" href="Demos.HSP.html#56540" class="Bound">ùë®</a> <a id="56678" href="Demos.HSP.html#19459" class="Function Operator">]</a><a id="56679" class="Symbol">)(</a><a id="56681" href="Demos.HSP.html#56681" class="Bound">p</a> <a id="56683" class="Symbol">:</a> <a id="56685" href="Demos.HSP.html#39820" class="Datatype">Term</a> <a id="56690" href="Demos.HSP.html#56527" class="Bound">X</a><a id="56691" class="Symbol">)</a> <a id="56693" class="Symbol">‚Üí</a> <a id="56695" href="Demos.HSP.html#42685" class="Function Operator">‚ü¶</a> <a id="56697" href="Demos.HSP.html#56681" class="Bound">p</a> <a id="56699" href="Demos.HSP.html#42685" class="Function Operator">‚üß</a> <a id="56701" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="56705" href="Demos.HSP.html#56665" class="Bound">Œ∑</a> <a id="56707" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a> <a id="56709" class="Symbol">(</a><a id="56710" href="Demos.HSP.html#55701" class="Function">free-lift</a><a id="56719" class="Symbol">{</a><a id="56720" class="Argument">ùë®</a> <a id="56722" class="Symbol">=</a> <a id="56724" href="Demos.HSP.html#56540" class="Bound">ùë®</a><a id="56725" class="Symbol">}</a> <a id="56727" href="Demos.HSP.html#56665" class="Bound">Œ∑</a><a id="56728" class="Symbol">)</a> <a id="56730" href="Demos.HSP.html#56681" class="Bound">p</a>
 <a id="56733" href="Demos.HSP.html#56645" class="Function">free-lift-interp</a> <a id="56750" href="Demos.HSP.html#56750" class="Bound">Œ∑</a> <a id="56752" class="Symbol">(</a><a id="56753" href="Demos.HSP.html#39860" class="InductiveConstructor">‚Ñä</a> <a id="56755" href="Demos.HSP.html#56755" class="Bound">x</a><a id="56756" class="Symbol">)</a>       <a id="56764" class="Symbol">=</a> <a id="56766" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>
 <a id="56772" href="Demos.HSP.html#56645" class="Function">free-lift-interp</a> <a id="56789" href="Demos.HSP.html#56789" class="Bound">Œ∑</a> <a id="56791" class="Symbol">(</a><a id="56792" href="Demos.HSP.html#39876" class="InductiveConstructor">node</a> <a id="56797" href="Demos.HSP.html#56797" class="Bound">f</a> <a id="56799" href="Demos.HSP.html#56799" class="Bound">t</a><a id="56800" class="Symbol">)</a>  <a id="56803" class="Symbol">=</a> <a id="56805" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="56810" class="Symbol">(</a><a id="56811" href="Demos.HSP.html#18845" class="Field">Interp</a> <a id="56818" href="Demos.HSP.html#56540" class="Bound">ùë®</a><a id="56819" class="Symbol">)</a> <a id="56821" class="Symbol">(</a><a id="56822" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="56829" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="56831" class="Symbol">(</a><a id="56832" href="Demos.HSP.html#56645" class="Function">free-lift-interp</a> <a id="56849" href="Demos.HSP.html#56789" class="Bound">Œ∑</a><a id="56850" class="Symbol">)</a> <a id="56852" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="56854" href="Demos.HSP.html#56799" class="Bound">t</a><a id="56855" class="Symbol">)</a>
</pre>

#### The relatively free algebra {#the-relatively-free-algebra .unnumbered}
Given an arbitrary class `ùí¶` of `ùëÜ`-algebras, we cannot expect that `ùëª X` belongs to `ùí¶`.
Indeed, there may be no free algebra in `ùí¶`.
Nonetheless, it is always possible to construct an algebra that is free for `ùí¶` and belongs to the class `S (P ùí¶`).
Such an algebra is called a *relatively free algebra over* `X` (relative to `ùí¶`).
There are several informal approaches to defining this algebra.
We now describe the approach on which our formal construction is based and then we present the formalization.

Let `ùîΩ[ X ]` denote the relatively free algebra over `X`.  We represent `ùîΩ[ X ]` as the quotient `ùëª X / ‚âà` where `x ‚âà y` if and only if `h x = h y` for every homomorphism `h` from `ùëª X` into a member of `ùí¶`.
More precisely, if `ùë® ‚àà ùí¶` and `h : hom (ùëª X) ùë®`, then `h` factors as `ùëª X ‚Üí HomIm h  ‚Üí ùë®` and `ùëª X / ker h ‚âÖ HomIm h ‚â§ ùë®`; that is, `ùëª X / ker h` is (isomorphic to) an algebra in `S ùí¶`. Letting

`‚âà := ‚ãÇ \{Œ∏ ‚àà Con(ùëª X) ‚à£ ùëª X / Œ∏ ‚àà S ùí¶\}`,

observe that `ùîΩ[ X ] := ùëª X / ‚âà` is a subdirect product of the algebras `ùëª X / ker h`
as `h` ranges over all homomorphisms from `ùëª X` to algebras in `ùí¶`.  Thus, `ùîΩ[ X ] ‚àà P (S ùí¶) ‚äÜ S (P ùí¶)`.
As we have seen, every map `œÅ : X ‚Üí ùïå[ ùë® ]` extends uniquely to a homomorphism `h : hom (ùëª X) ùë®` and `h`
factors through the natural projection `ùëª X ‚Üí ùîΩ[ X ]` (since `‚âà ‚äÜ ker h`) yielding a unique homomorphism from `ùîΩ[ X ]` to `ùë®` extending `œÅ`.

In [Agda][] we construct `ùîΩ[ X ]` as a homomorphic image of `ùëª X` in the following way.
First, given `X` we define `ùë™` as the product of pairs `(ùë®, œÅ)` of
algebras `ùë® ‚àà ùí¶` along with environments `œÅ : X ‚Üí ùïå[ ùë® ]`.
To do so, we contrive an index type for the product; each index is a triple `(ùë®, p, œÅ)` where `ùë®` is an algebra, `p` is proof of `ùë® ‚àà ùí¶`, and `œÅ : X ‚Üí ùïå[ ùë® ]` is an arbitrary environment.

<pre class="Agda">

<a id="58756" class="Keyword">module</a> <a id="FreeAlgebra"></a><a id="58763" href="Demos.HSP.html#58763" class="Module">FreeAlgebra</a> <a id="58775" class="Symbol">(</a><a id="58776" href="Demos.HSP.html#58776" class="Bound">ùí¶</a> <a id="58778" class="Symbol">:</a> <a id="58780" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="58785" class="Symbol">(</a><a id="58786" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="58794" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="58796" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a><a id="58798" class="Symbol">)</a> <a id="58800" href="Demos.HSP.html#7637" class="Generalizable">‚Ñì</a><a id="58801" class="Symbol">)</a> <a id="58803" class="Keyword">where</a>
 <a id="58810" class="Keyword">private</a> <a id="FreeAlgebra.c"></a><a id="58818" href="Demos.HSP.html#58818" class="Function">c</a> <a id="58820" class="Symbol">=</a> <a id="58822" href="Demos.HSP.html#58794" class="Bound">Œ±</a> <a id="58824" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="58826" href="Demos.HSP.html#58796" class="Bound">œÅ·µÉ</a> <a id="58829" class="Symbol">;</a> <a id="FreeAlgebra.Œπ"></a><a id="58831" href="Demos.HSP.html#58831" class="Function">Œπ</a> <a id="58833" class="Symbol">=</a> <a id="58835" href="Demos.HSP.html#34955" class="Function">ov</a> <a id="58838" href="Demos.HSP.html#58818" class="Function">c</a> <a id="58840" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="58842" href="Demos.HSP.html#58800" class="Bound">‚Ñì</a>
 <a id="FreeAlgebra.‚Ñë"></a><a id="58845" href="Demos.HSP.html#58845" class="Function">‚Ñë</a> <a id="58847" class="Symbol">:</a> <a id="58849" class="Symbol">{</a><a id="58850" href="Demos.HSP.html#58850" class="Bound">œá</a> <a id="58852" class="Symbol">:</a> <a id="58854" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="58859" class="Symbol">}</a> <a id="58861" class="Symbol">‚Üí</a> <a id="58863" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="58868" href="Demos.HSP.html#58850" class="Bound">œá</a> <a id="58870" class="Symbol">‚Üí</a> <a id="58872" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="58877" class="Symbol">(</a><a id="58878" href="Demos.HSP.html#58831" class="Function">Œπ</a> <a id="58880" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="58882" href="Demos.HSP.html#58850" class="Bound">œá</a><a id="58883" class="Symbol">)</a>
 <a id="58886" href="Demos.HSP.html#58845" class="Function">‚Ñë</a> <a id="58888" href="Demos.HSP.html#58888" class="Bound">X</a> <a id="58890" class="Symbol">=</a> <a id="58892" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="58895" href="Demos.HSP.html#58895" class="Bound">ùë®</a> <a id="58897" href="Data.Product.html#916" class="Function">‚àà</a> <a id="58899" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="58907" href="Demos.HSP.html#58794" class="Bound">Œ±</a> <a id="58909" href="Demos.HSP.html#58796" class="Bound">œÅ·µÉ</a> <a id="58912" href="Data.Product.html#916" class="Function">]</a> <a id="58914" href="Demos.HSP.html#58895" class="Bound">ùë®</a> <a id="58916" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="58918" href="Demos.HSP.html#58776" class="Bound">ùí¶</a> <a id="58920" href="Data.Product.html#1167" class="Function Operator">√ó</a> <a id="58922" class="Symbol">(</a><a id="58923" href="Demos.HSP.html#58888" class="Bound">X</a> <a id="58925" class="Symbol">‚Üí</a> <a id="58927" href="Demos.HSP.html#19459" class="Function Operator">ùïå[</a> <a id="58930" href="Demos.HSP.html#58895" class="Bound">ùë®</a> <a id="58932" href="Demos.HSP.html#19459" class="Function Operator">]</a><a id="58933" class="Symbol">)</a>

 <a id="FreeAlgebra.ùë™"></a><a id="58937" href="Demos.HSP.html#58937" class="Function">ùë™</a> <a id="58939" class="Symbol">:</a> <a id="58941" class="Symbol">{</a><a id="58942" href="Demos.HSP.html#58942" class="Bound">œá</a> <a id="58944" class="Symbol">:</a> <a id="58946" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="58951" class="Symbol">}</a> <a id="58953" class="Symbol">‚Üí</a> <a id="58955" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="58960" href="Demos.HSP.html#58942" class="Bound">œá</a> <a id="58962" class="Symbol">‚Üí</a> <a id="58964" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="58972" class="Symbol">(</a><a id="58973" href="Demos.HSP.html#58831" class="Function">Œπ</a> <a id="58975" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="58977" href="Demos.HSP.html#58942" class="Bound">œá</a><a id="58978" class="Symbol">)(</a><a id="58980" href="Demos.HSP.html#58831" class="Function">Œπ</a> <a id="58982" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="58984" href="Demos.HSP.html#58942" class="Bound">œá</a><a id="58985" class="Symbol">)</a>
 <a id="58988" href="Demos.HSP.html#58937" class="Function">ùë™</a> <a id="58990" href="Demos.HSP.html#58990" class="Bound">X</a> <a id="58992" class="Symbol">=</a> <a id="58994" href="Demos.HSP.html#24369" class="Function">‚®Ö</a> <a id="58996" class="Symbol">{</a><a id="58997" class="Argument">I</a> <a id="58999" class="Symbol">=</a> <a id="59001" href="Demos.HSP.html#58845" class="Function">‚Ñë</a> <a id="59003" href="Demos.HSP.html#58990" class="Bound">X</a><a id="59004" class="Symbol">}</a> <a id="59006" href="Demos.HSP.html#8264" class="Function Operator">‚à£_‚à£</a>

</pre>
We then define `ùîΩ[ X ]` to be the image of a homomorphism from `ùëª X` to `ùë™` as follows.

<pre class="Agda">

 <a id="FreeAlgebra.homC"></a><a id="59126" href="Demos.HSP.html#59126" class="Function">homC</a> <a id="59131" class="Symbol">:</a> <a id="59133" class="Symbol">(</a><a id="59134" href="Demos.HSP.html#59134" class="Bound">X</a> <a id="59136" class="Symbol">:</a> <a id="59138" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="59143" href="Demos.HSP.html#7635" class="Generalizable">œá</a><a id="59144" class="Symbol">)</a> <a id="59146" class="Symbol">‚Üí</a> <a id="59148" href="Demos.HSP.html#26745" class="Function">hom</a> <a id="59152" class="Symbol">(</a><a id="59153" href="Demos.HSP.html#41448" class="Function">ùëª</a> <a id="59155" href="Demos.HSP.html#59134" class="Bound">X</a><a id="59156" class="Symbol">)</a> <a id="59158" class="Symbol">(</a><a id="59159" href="Demos.HSP.html#58937" class="Function">ùë™</a> <a id="59161" href="Demos.HSP.html#59134" class="Bound">X</a><a id="59162" class="Symbol">)</a>
 <a id="59165" href="Demos.HSP.html#59126" class="Function">homC</a> <a id="59170" href="Demos.HSP.html#59170" class="Bound">X</a> <a id="59172" class="Symbol">=</a> <a id="59174" href="Demos.HSP.html#32118" class="Function">‚®Ö-hom-co</a> <a id="59183" class="Symbol">_</a> <a id="59185" class="Symbol">(Œª</a> <a id="59188" href="Demos.HSP.html#59188" class="Bound">i</a> <a id="59190" class="Symbol">‚Üí</a> <a id="59192" href="Demos.HSP.html#56169" class="Function">lift-hom</a> <a id="59201" class="Symbol">(</a><a id="59202" href="Demos.HSP.html#6618" class="Field">snd</a> <a id="59206" href="Demos.HSP.html#8301" class="Function Operator">‚à•</a> <a id="59208" href="Demos.HSP.html#59188" class="Bound">i</a> <a id="59210" href="Demos.HSP.html#8301" class="Function Operator">‚à•</a><a id="59211" class="Symbol">))</a>

 <a id="FreeAlgebra.ùîΩ[_]"></a><a id="59216" href="Demos.HSP.html#59216" class="Function Operator">ùîΩ[_]</a> <a id="59221" class="Symbol">:</a> <a id="59223" class="Symbol">{</a><a id="59224" href="Demos.HSP.html#59224" class="Bound">œá</a> <a id="59226" class="Symbol">:</a> <a id="59228" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="59233" class="Symbol">}</a> <a id="59235" class="Symbol">‚Üí</a> <a id="59237" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="59242" href="Demos.HSP.html#59224" class="Bound">œá</a> <a id="59244" class="Symbol">‚Üí</a> <a id="59246" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="59254" class="Symbol">(</a><a id="59255" href="Demos.HSP.html#34955" class="Function">ov</a> <a id="59258" href="Demos.HSP.html#59224" class="Bound">œá</a><a id="59259" class="Symbol">)</a> <a id="59261" class="Symbol">(</a><a id="59262" href="Demos.HSP.html#58831" class="Function">Œπ</a> <a id="59264" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="59266" href="Demos.HSP.html#59224" class="Bound">œá</a><a id="59267" class="Symbol">)</a>
 <a id="59270" href="Demos.HSP.html#59216" class="Function Operator">ùîΩ[</a> <a id="59273" href="Demos.HSP.html#59273" class="Bound">X</a> <a id="59275" href="Demos.HSP.html#59216" class="Function Operator">]</a> <a id="59277" class="Symbol">=</a> <a id="59279" href="Demos.HSP.html#36054" class="Function">HomIm</a> <a id="59285" class="Symbol">(</a><a id="59286" href="Demos.HSP.html#59126" class="Function">homC</a> <a id="59291" href="Demos.HSP.html#59273" class="Bound">X</a><a id="59292" class="Symbol">)</a>

</pre>
Observe that if the identity `p ‚âà q` holds in all `ùë® ‚àà ùí¶` (for all environments), then `p ‚âà q` holds in `ùîΩ[ X ]`; equivalently, the pair `(p , q)` belongs to the kernel of the natural homomorphism from `ùëª X` onto `ùîΩ[ X ]`. This natural epimorphism from `ùëª X` onto `ùîΩ[ X ]`
is defined as follows.

<pre class="Agda">

<a id="59617" class="Keyword">module</a> <a id="FreeHom"></a><a id="59624" href="Demos.HSP.html#59624" class="Module">FreeHom</a> <a id="59632" class="Symbol">{</a><a id="59633" href="Demos.HSP.html#59633" class="Bound">ùí¶</a> <a id="59635" class="Symbol">:</a> <a id="59637" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="59641" class="Symbol">(</a><a id="59642" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="59650" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="59652" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a><a id="59654" class="Symbol">)</a> <a id="59656" class="Symbol">(</a><a id="59657" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="59659" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="59661" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a> <a id="59664" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="59666" href="Demos.HSP.html#34955" class="Function">ov</a> <a id="59669" href="Demos.HSP.html#7637" class="Generalizable">‚Ñì</a><a id="59670" class="Symbol">)}</a> <a id="59673" class="Keyword">where</a>
 <a id="59680" class="Keyword">private</a> <a id="FreeHom.c"></a><a id="59688" href="Demos.HSP.html#59688" class="Function">c</a> <a id="59690" class="Symbol">=</a> <a id="59692" href="Demos.HSP.html#59650" class="Bound">Œ±</a> <a id="59694" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="59696" href="Demos.HSP.html#59652" class="Bound">œÅ·µÉ</a> <a id="59699" class="Symbol">;</a> <a id="FreeHom.Œπ"></a><a id="59701" href="Demos.HSP.html#59701" class="Function">Œπ</a> <a id="59703" class="Symbol">=</a> <a id="59705" href="Demos.HSP.html#34955" class="Function">ov</a> <a id="59708" href="Demos.HSP.html#59688" class="Function">c</a> <a id="59710" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="59712" href="Demos.HSP.html#59669" class="Bound">‚Ñì</a>
 <a id="59715" class="Keyword">open</a> <a id="59720" href="Demos.HSP.html#58763" class="Module">FreeAlgebra</a> <a id="59732" href="Demos.HSP.html#59633" class="Bound">ùí¶</a> <a id="59734" class="Keyword">using</a> <a id="59740" class="Symbol">(</a> <a id="59742" href="Demos.HSP.html#59216" class="Function Operator">ùîΩ[_]</a> <a id="59747" class="Symbol">;</a> <a id="59749" href="Demos.HSP.html#59126" class="Function">homC</a> <a id="59754" class="Symbol">)</a>

 <a id="FreeHom.epiF[_]"></a><a id="59758" href="Demos.HSP.html#59758" class="Function Operator">epiF[_]</a> <a id="59766" class="Symbol">:</a> <a id="59768" class="Symbol">(</a><a id="59769" href="Demos.HSP.html#59769" class="Bound">X</a> <a id="59771" class="Symbol">:</a> <a id="59773" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="59778" href="Demos.HSP.html#59688" class="Function">c</a><a id="59779" class="Symbol">)</a> <a id="59781" class="Symbol">‚Üí</a> <a id="59783" href="Demos.HSP.html#27801" class="Function">epi</a> <a id="59787" class="Symbol">(</a><a id="59788" href="Demos.HSP.html#41448" class="Function">ùëª</a> <a id="59790" href="Demos.HSP.html#59769" class="Bound">X</a><a id="59791" class="Symbol">)</a> <a id="59793" href="Demos.HSP.html#59216" class="Function Operator">ùîΩ[</a> <a id="59796" href="Demos.HSP.html#59769" class="Bound">X</a> <a id="59798" href="Demos.HSP.html#59216" class="Function Operator">]</a>
 <a id="59801" href="Demos.HSP.html#59758" class="Function Operator">epiF[</a> <a id="59807" href="Demos.HSP.html#59807" class="Bound">X</a> <a id="59809" href="Demos.HSP.html#59758" class="Function Operator">]</a> <a id="59811" class="Symbol">=</a> <a id="59813" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="59815" href="Demos.HSP.html#36673" class="Function">toHomIm</a> <a id="59823" class="Symbol">(</a><a id="59824" href="Demos.HSP.html#59126" class="Function">homC</a> <a id="59829" href="Demos.HSP.html#59807" class="Bound">X</a><a id="59830" class="Symbol">)</a> <a id="59832" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="59834" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="59836" class="Keyword">record</a>  <a id="59844" class="Symbol">{</a> <a id="59846" href="Demos.HSP.html#27702" class="Field">isHom</a> <a id="59852" class="Symbol">=</a> <a id="59854" href="Demos.HSP.html#8301" class="Function Operator">‚à•</a> <a id="59856" href="Demos.HSP.html#36673" class="Function">toHomIm</a> <a id="59864" class="Symbol">(</a><a id="59865" href="Demos.HSP.html#59126" class="Function">homC</a> <a id="59870" href="Demos.HSP.html#59807" class="Bound">X</a><a id="59871" class="Symbol">)</a> <a id="59873" href="Demos.HSP.html#8301" class="Function Operator">‚à•</a>
                                            <a id="59919" class="Symbol">;</a> <a id="59921" href="Demos.HSP.html#27727" class="Field">isSurjective</a> <a id="59934" class="Symbol">=</a> <a id="59936" href="Demos.HSP.html#14349" class="Function">toIm-surj</a> <a id="59946" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="59948" href="Demos.HSP.html#59126" class="Function">homC</a> <a id="59953" href="Demos.HSP.html#59807" class="Bound">X</a> <a id="59955" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="59957" class="Symbol">}</a>

 <a id="FreeHom.homF[_]"></a><a id="59961" href="Demos.HSP.html#59961" class="Function Operator">homF[_]</a> <a id="59969" class="Symbol">:</a> <a id="59971" class="Symbol">(</a><a id="59972" href="Demos.HSP.html#59972" class="Bound">X</a> <a id="59974" class="Symbol">:</a> <a id="59976" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="59981" href="Demos.HSP.html#59688" class="Function">c</a><a id="59982" class="Symbol">)</a> <a id="59984" class="Symbol">‚Üí</a> <a id="59986" href="Demos.HSP.html#26745" class="Function">hom</a> <a id="59990" class="Symbol">(</a><a id="59991" href="Demos.HSP.html#41448" class="Function">ùëª</a> <a id="59993" href="Demos.HSP.html#59972" class="Bound">X</a><a id="59994" class="Symbol">)</a> <a id="59996" href="Demos.HSP.html#59216" class="Function Operator">ùîΩ[</a> <a id="59999" href="Demos.HSP.html#59972" class="Bound">X</a> <a id="60001" href="Demos.HSP.html#59216" class="Function Operator">]</a>
 <a id="60004" href="Demos.HSP.html#59961" class="Function Operator">homF[</a> <a id="60010" href="Demos.HSP.html#60010" class="Bound">X</a> <a id="60012" href="Demos.HSP.html#59961" class="Function Operator">]</a> <a id="60014" class="Symbol">=</a> <a id="60016" href="Demos.HSP.html#27759" class="Function">IsEpi.HomReduct</a> <a id="60032" href="Demos.HSP.html#8301" class="Function Operator">‚à•</a> <a id="60034" href="Demos.HSP.html#59758" class="Function Operator">epiF[</a> <a id="60040" href="Demos.HSP.html#60010" class="Bound">X</a> <a id="60042" href="Demos.HSP.html#59758" class="Function Operator">]</a> <a id="60044" href="Demos.HSP.html#8301" class="Function Operator">‚à•</a>

</pre>

Before formalizing the HSP theorem in the next section, we need to prove the following important property of the relatively free algebra: For every algebra `ùë®`, if `ùë® ‚ä® Th (V ùí¶)`,
then there exists an epimorphism from `ùîΩ[ A ]` onto `ùë®`, where `A` denotes the carrier of `ùë®`.

<pre class="Agda">

<a id="60349" class="Keyword">module</a> <a id="60356" href="Demos.HSP.html#60356" class="Module">_</a> <a id="60358" class="Symbol">{</a><a id="60359" href="Demos.HSP.html#60359" class="Bound">ùë®</a> <a id="60361" class="Symbol">:</a> <a id="60363" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="60371" class="Symbol">(</a><a id="60372" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="60374" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="60376" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a> <a id="60379" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="60381" href="Demos.HSP.html#7637" class="Generalizable">‚Ñì</a><a id="60382" class="Symbol">)(</a><a id="60384" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="60386" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="60388" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a> <a id="60391" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="60393" href="Demos.HSP.html#7637" class="Generalizable">‚Ñì</a><a id="60394" class="Symbol">)}{</a><a id="60397" href="Demos.HSP.html#60397" class="Bound">ùí¶</a> <a id="60399" class="Symbol">:</a> <a id="60401" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="60405" class="Symbol">(</a><a id="60406" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="60414" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="60416" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a><a id="60418" class="Symbol">)(</a><a id="60420" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="60422" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="60424" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a> <a id="60427" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="60429" href="Demos.HSP.html#34955" class="Function">ov</a> <a id="60432" href="Demos.HSP.html#7637" class="Generalizable">‚Ñì</a><a id="60433" class="Symbol">)}</a> <a id="60436" class="Keyword">where</a>
 <a id="60443" class="Keyword">private</a> <a id="60451" href="Demos.HSP.html#60451" class="Function">c</a> <a id="60453" class="Symbol">=</a> <a id="60455" href="Demos.HSP.html#60372" class="Bound">Œ±</a> <a id="60457" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="60459" href="Demos.HSP.html#60376" class="Bound">œÅ·µÉ</a> <a id="60462" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="60464" href="Demos.HSP.html#60381" class="Bound">‚Ñì</a> <a id="60466" class="Symbol">;</a> <a id="60468" href="Demos.HSP.html#60468" class="Function">Œπ</a> <a id="60470" class="Symbol">=</a> <a id="60472" href="Demos.HSP.html#34955" class="Function">ov</a> <a id="60475" href="Demos.HSP.html#60451" class="Function">c</a>
 <a id="60478" class="Keyword">open</a> <a id="60483" href="Demos.HSP.html#58763" class="Module">FreeAlgebra</a> <a id="60495" href="Demos.HSP.html#60397" class="Bound">ùí¶</a> <a id="60497" class="Keyword">using</a> <a id="60503" class="Symbol">(</a> <a id="60505" href="Demos.HSP.html#59216" class="Function Operator">ùîΩ[_]</a> <a id="60510" class="Symbol">;</a> <a id="60512" href="Demos.HSP.html#58937" class="Function">ùë™</a> <a id="60514" class="Symbol">)</a>
 <a id="60517" class="Keyword">open</a> <a id="60522" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="60529" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="60532" href="Demos.HSP.html#60359" class="Bound">ùë®</a> <a id="60534" href="Demos.HSP.html#19405" class="Function Operator">]</a> <a id="60536" class="Keyword">using</a> <a id="60542" class="Symbol">(</a> <a id="60544" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="60549" class="Symbol">;</a> <a id="60551" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="60555" class="Symbol">;</a> <a id="60557" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="60563" class="Symbol">)</a> <a id="60565" class="Keyword">renaming</a> <a id="60574" class="Symbol">(</a> <a id="60576" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="60584" class="Symbol">to</a> <a id="60587" class="Field">A</a> <a id="60589" class="Symbol">;</a> <a id="60591" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="60595" class="Symbol">to</a> <a id="60598" class="Field Operator">_‚âà·¥¨_</a> <a id="60603" class="Symbol">)</a>

 <a id="60607" href="Demos.HSP.html#60607" class="Function">F-ModTh-epi</a> <a id="60619" class="Symbol">:</a> <a id="60621" href="Demos.HSP.html#60359" class="Bound">ùë®</a> <a id="60623" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="60625" href="Demos.HSP.html#48522" class="Function">Mod</a> <a id="60629" class="Symbol">(</a><a id="60630" href="Demos.HSP.html#48424" class="Function">Th</a> <a id="60633" href="Demos.HSP.html#60397" class="Bound">ùí¶</a><a id="60634" class="Symbol">)</a> <a id="60636" class="Symbol">‚Üí</a> <a id="60638" href="Demos.HSP.html#27801" class="Function">epi</a> <a id="60642" href="Demos.HSP.html#59216" class="Function Operator">ùîΩ[</a> <a id="60645" href="Demos.HSP.html#60587" class="Function">A</a> <a id="60647" href="Demos.HSP.html#59216" class="Function Operator">]</a>  <a id="60650" href="Demos.HSP.html#60359" class="Bound">ùë®</a>
 <a id="60653" href="Demos.HSP.html#60607" class="Function">F-ModTh-epi</a> <a id="60665" href="Demos.HSP.html#60665" class="Bound">A‚ààModThK</a> <a id="60674" class="Symbol">=</a> <a id="60676" href="Demos.HSP.html#60695" class="Function">œÜ</a> <a id="60678" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="60680" href="Demos.HSP.html#61443" class="Function">isEpi</a> <a id="60686" class="Keyword">where</a>

  <a id="60695" href="Demos.HSP.html#60695" class="Function">œÜ</a> <a id="60697" class="Symbol">:</a> <a id="60699" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="60702" href="Demos.HSP.html#59216" class="Function Operator">ùîΩ[</a> <a id="60705" href="Demos.HSP.html#60587" class="Function">A</a> <a id="60707" href="Demos.HSP.html#59216" class="Function Operator">]</a> <a id="60709" href="Demos.HSP.html#19405" class="Function Operator">]</a> <a id="60711" href="Demos.HSP.html#6679" class="Record Operator">‚ü∂</a> <a id="60713" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="60716" href="Demos.HSP.html#60359" class="Bound">ùë®</a> <a id="60718" href="Demos.HSP.html#19405" class="Function Operator">]</a>
  <a id="60722" href="Demos.HSP.html#6781" class="Field Operator">_‚ü®$‚ü©_</a> <a id="60728" href="Demos.HSP.html#60695" class="Function">œÜ</a>            <a id="60741" class="Symbol">=</a> <a id="60743" href="Demos.HSP.html#55701" class="Function">free-lift</a><a id="60752" class="Symbol">{</a><a id="60753" class="Argument">ùë®</a> <a id="60755" class="Symbol">=</a> <a id="60757" href="Demos.HSP.html#60359" class="Bound">ùë®</a><a id="60758" class="Symbol">}</a> <a id="60760" href="Function.Base.html#615" class="Function">id</a>
  <a id="60765" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="60770" href="Demos.HSP.html#60695" class="Function">œÜ</a> <a id="60772" class="Symbol">{</a><a id="60773" href="Demos.HSP.html#60773" class="Bound">p</a><a id="60774" class="Symbol">}</a> <a id="60776" class="Symbol">{</a><a id="60777" href="Demos.HSP.html#60777" class="Bound">q</a><a id="60778" class="Symbol">}</a> <a id="60780" href="Demos.HSP.html#60780" class="Bound">pq</a>  <a id="60784" class="Symbol">=</a> <a id="60786" href="Demos.HSP.html#61114" class="Function">Goal</a>
   <a id="60794" class="Keyword">where</a>
   <a id="60803" href="Demos.HSP.html#60803" class="Function">lift-pq</a> <a id="60811" class="Symbol">:</a> <a id="60813" class="Symbol">(</a><a id="60814" href="Demos.HSP.html#60773" class="Bound">p</a> <a id="60816" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="60818" href="Demos.HSP.html#60777" class="Bound">q</a><a id="60819" class="Symbol">)</a> <a id="60821" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="60823" href="Demos.HSP.html#48424" class="Function">Th</a> <a id="60826" href="Demos.HSP.html#60397" class="Bound">ùí¶</a>
   <a id="60831" href="Demos.HSP.html#60803" class="Function">lift-pq</a> <a id="60839" href="Demos.HSP.html#60839" class="Bound">ùë©</a> <a id="60841" href="Demos.HSP.html#60841" class="Bound">x</a> <a id="60843" href="Demos.HSP.html#60843" class="Bound">œÅ</a> <a id="60845" class="Symbol">=</a> <a id="60847" href="Relation.Binary.Reasoning.Base.Single.html#1916" class="Function Operator">begin</a>
    <a id="60857" href="Demos.HSP.html#42685" class="Function Operator">‚ü¶</a> <a id="60859" href="Demos.HSP.html#60773" class="Bound">p</a> <a id="60861" href="Demos.HSP.html#42685" class="Function Operator">‚üß</a> <a id="60863" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="60867" href="Demos.HSP.html#60843" class="Bound">œÅ</a>    <a id="60872" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a> <a id="60875" href="Demos.HSP.html#56645" class="Function">free-lift-interp</a> <a id="60892" class="Symbol">{</a><a id="60893" class="Argument">ùë®</a> <a id="60895" class="Symbol">=</a> <a id="60897" href="Demos.HSP.html#60839" class="Bound">ùë©</a><a id="60898" class="Symbol">}</a> <a id="60900" href="Demos.HSP.html#60843" class="Bound">œÅ</a> <a id="60902" href="Demos.HSP.html#60773" class="Bound">p</a>  <a id="60905" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
    <a id="60911" href="Demos.HSP.html#55701" class="Function">free-lift</a> <a id="60921" href="Demos.HSP.html#60843" class="Bound">œÅ</a> <a id="60923" href="Demos.HSP.html#60773" class="Bound">p</a>  <a id="60926" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a> <a id="60929" href="Demos.HSP.html#60780" class="Bound">pq</a> <a id="60932" class="Symbol">(</a><a id="60933" href="Demos.HSP.html#60839" class="Bound">ùë©</a> <a id="60935" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="60937" href="Demos.HSP.html#60841" class="Bound">x</a> <a id="60939" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="60941" href="Demos.HSP.html#60843" class="Bound">œÅ</a><a id="60942" class="Symbol">)</a>                <a id="60959" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
    <a id="60965" href="Demos.HSP.html#55701" class="Function">free-lift</a> <a id="60975" href="Demos.HSP.html#60843" class="Bound">œÅ</a> <a id="60977" href="Demos.HSP.html#60777" class="Bound">q</a>  <a id="60980" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚âàÀò‚ü®</a> <a id="60984" href="Demos.HSP.html#56645" class="Function">free-lift-interp</a><a id="61000" class="Symbol">{</a><a id="61001" class="Argument">ùë®</a> <a id="61003" class="Symbol">=</a> <a id="61005" href="Demos.HSP.html#60839" class="Bound">ùë©</a><a id="61006" class="Symbol">}</a> <a id="61008" href="Demos.HSP.html#60843" class="Bound">œÅ</a> <a id="61010" href="Demos.HSP.html#60777" class="Bound">q</a>  <a id="61013" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚ü©</a>
    <a id="61019" href="Demos.HSP.html#42685" class="Function Operator">‚ü¶</a> <a id="61021" href="Demos.HSP.html#60777" class="Bound">q</a> <a id="61023" href="Demos.HSP.html#42685" class="Function Operator">‚üß</a> <a id="61025" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="61029" href="Demos.HSP.html#60843" class="Bound">œÅ</a>    <a id="61034" href="Relation.Binary.Reasoning.Base.Single.html#2555" class="Function Operator">‚àé</a>
     <a id="61041" class="Keyword">where</a> <a id="61047" class="Keyword">open</a> <a id="61052" href="Relation.Binary.Reasoning.Setoid.html" class="Module">SetoidReasoning</a> <a id="61068" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="61071" href="Demos.HSP.html#60839" class="Bound">ùë©</a> <a id="61073" href="Demos.HSP.html#19405" class="Function Operator">]</a> <a id="61075" class="Symbol">;</a> <a id="61077" class="Keyword">open</a> <a id="61082" href="Demos.HSP.html#42121" class="Module">Environment</a> <a id="61094" href="Demos.HSP.html#60839" class="Bound">ùë©</a> <a id="61096" class="Keyword">using</a> <a id="61102" class="Symbol">(</a> <a id="61104" href="Demos.HSP.html#42685" class="Function Operator">‚ü¶_‚üß</a> <a id="61108" class="Symbol">)</a>

   <a id="61114" href="Demos.HSP.html#61114" class="Function">Goal</a> <a id="61119" class="Symbol">:</a> <a id="61121" href="Demos.HSP.html#55701" class="Function">free-lift</a> <a id="61131" href="Function.Base.html#615" class="Function">id</a> <a id="61134" href="Demos.HSP.html#60773" class="Bound">p</a> <a id="61136" href="Demos.HSP.html#60598" class="Function Operator">‚âà·¥¨</a> <a id="61139" href="Demos.HSP.html#55701" class="Function">free-lift</a> <a id="61149" href="Function.Base.html#615" class="Function">id</a> <a id="61152" href="Demos.HSP.html#60777" class="Bound">q</a>
   <a id="61157" href="Demos.HSP.html#61114" class="Function">Goal</a> <a id="61162" class="Symbol">=</a> <a id="61164" href="Relation.Binary.Reasoning.Base.Single.html#1916" class="Function Operator">begin</a>
    <a id="61174" href="Demos.HSP.html#55701" class="Function">free-lift</a> <a id="61184" href="Function.Base.html#615" class="Function">id</a> <a id="61187" href="Demos.HSP.html#60773" class="Bound">p</a>  <a id="61190" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚âàÀò‚ü®</a> <a id="61194" href="Demos.HSP.html#56645" class="Function">free-lift-interp</a> <a id="61211" class="Symbol">{</a><a id="61212" class="Argument">ùë®</a> <a id="61214" class="Symbol">=</a> <a id="61216" href="Demos.HSP.html#60359" class="Bound">ùë®</a><a id="61217" class="Symbol">}</a> <a id="61219" href="Function.Base.html#615" class="Function">id</a> <a id="61222" href="Demos.HSP.html#60773" class="Bound">p</a>   <a id="61226" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚ü©</a>
    <a id="61232" href="Demos.HSP.html#42685" class="Function Operator">‚ü¶</a> <a id="61234" href="Demos.HSP.html#60773" class="Bound">p</a> <a id="61236" href="Demos.HSP.html#42685" class="Function Operator">‚üß</a> <a id="61238" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="61242" href="Function.Base.html#615" class="Function">id</a>    <a id="61248" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a> <a id="61251" href="Demos.HSP.html#60665" class="Bound">A‚ààModThK</a> <a id="61260" class="Symbol">{</a><a id="61261" class="Argument">p</a> <a id="61263" class="Symbol">=</a> <a id="61265" href="Demos.HSP.html#60773" class="Bound">p</a><a id="61266" class="Symbol">}</a> <a id="61268" class="Symbol">{</a><a id="61269" href="Demos.HSP.html#60777" class="Bound">q</a><a id="61270" class="Symbol">}</a> <a id="61272" href="Demos.HSP.html#60803" class="Function">lift-pq</a> <a id="61280" href="Function.Base.html#615" class="Function">id</a>  <a id="61284" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
    <a id="61290" href="Demos.HSP.html#42685" class="Function Operator">‚ü¶</a> <a id="61292" href="Demos.HSP.html#60777" class="Bound">q</a> <a id="61294" href="Demos.HSP.html#42685" class="Function Operator">‚üß</a> <a id="61296" href="Demos.HSP.html#6781" class="Field Operator">‚ü®$‚ü©</a> <a id="61300" href="Function.Base.html#615" class="Function">id</a>    <a id="61306" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a> <a id="61309" href="Demos.HSP.html#56645" class="Function">free-lift-interp</a> <a id="61326" class="Symbol">{</a><a id="61327" class="Argument">ùë®</a> <a id="61329" class="Symbol">=</a> <a id="61331" href="Demos.HSP.html#60359" class="Bound">ùë®</a><a id="61332" class="Symbol">}</a> <a id="61334" href="Function.Base.html#615" class="Function">id</a> <a id="61337" href="Demos.HSP.html#60777" class="Bound">q</a>    <a id="61342" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
    <a id="61348" href="Demos.HSP.html#55701" class="Function">free-lift</a> <a id="61358" href="Function.Base.html#615" class="Function">id</a> <a id="61361" href="Demos.HSP.html#60777" class="Bound">q</a>  <a id="61364" href="Relation.Binary.Reasoning.Base.Single.html#2555" class="Function Operator">‚àé</a>
     <a id="61371" class="Keyword">where</a> <a id="61377" class="Keyword">open</a> <a id="61382" href="Relation.Binary.Reasoning.Setoid.html" class="Module">SetoidReasoning</a> <a id="61398" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="61401" href="Demos.HSP.html#60359" class="Bound">ùë®</a> <a id="61403" href="Demos.HSP.html#19405" class="Function Operator">]</a> <a id="61405" class="Symbol">;</a> <a id="61407" class="Keyword">open</a> <a id="61412" href="Demos.HSP.html#42121" class="Module">Environment</a> <a id="61424" href="Demos.HSP.html#60359" class="Bound">ùë®</a> <a id="61426" class="Keyword">using</a> <a id="61432" class="Symbol">(</a> <a id="61434" href="Demos.HSP.html#42685" class="Function Operator">‚ü¶_‚üß</a> <a id="61438" class="Symbol">)</a>

  <a id="61443" href="Demos.HSP.html#61443" class="Function">isEpi</a> <a id="61449" class="Symbol">:</a> <a id="61451" href="Demos.HSP.html#27631" class="Record">IsEpi</a> <a id="61457" href="Demos.HSP.html#59216" class="Function Operator">ùîΩ[</a> <a id="61460" href="Demos.HSP.html#60587" class="Function">A</a> <a id="61462" href="Demos.HSP.html#59216" class="Function Operator">]</a> <a id="61464" href="Demos.HSP.html#60359" class="Bound">ùë®</a> <a id="61466" href="Demos.HSP.html#60695" class="Function">œÜ</a>
  <a id="61470" href="Demos.HSP.html#61443" class="Function">isEpi</a> <a id="61476" class="Symbol">=</a> <a id="61478" class="Keyword">record</a> <a id="61485" class="Symbol">{</a> <a id="61487" href="Demos.HSP.html#27702" class="Field">isHom</a> <a id="61493" class="Symbol">=</a> <a id="61495" href="Demos.HSP.html#26692" class="InductiveConstructor">mkhom</a> <a id="61501" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="61506" class="Symbol">;</a> <a id="61508" href="Demos.HSP.html#27727" class="Field">isSurjective</a> <a id="61521" class="Symbol">=</a> <a id="61523" href="Demos.HSP.html#10799" class="InductiveConstructor">eq</a> <a id="61526" class="Symbol">(</a><a id="61527" href="Demos.HSP.html#39860" class="InductiveConstructor">‚Ñä</a> <a id="61529" class="Symbol">_)</a> <a id="61532" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="61537" class="Symbol">}</a>

 <a id="61541" href="Demos.HSP.html#61541" class="Function">F-ModThV-epi</a> <a id="61554" class="Symbol">:</a> <a id="61556" href="Demos.HSP.html#60359" class="Bound">ùë®</a> <a id="61558" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="61560" href="Demos.HSP.html#48522" class="Function">Mod</a> <a id="61564" class="Symbol">(</a><a id="61565" href="Demos.HSP.html#48424" class="Function">Th</a> <a id="61568" class="Symbol">(</a><a id="61569" href="Demos.HSP.html#52895" class="Function">V</a> <a id="61571" href="Demos.HSP.html#60381" class="Bound">‚Ñì</a> <a id="61573" href="Demos.HSP.html#60468" class="Function">Œπ</a> <a id="61575" href="Demos.HSP.html#60397" class="Bound">ùí¶</a><a id="61576" class="Symbol">))</a> <a id="61579" class="Symbol">‚Üí</a> <a id="61581" href="Demos.HSP.html#27801" class="Function">epi</a> <a id="61585" href="Demos.HSP.html#59216" class="Function Operator">ùîΩ[</a> <a id="61588" href="Demos.HSP.html#60587" class="Function">A</a> <a id="61590" href="Demos.HSP.html#59216" class="Function Operator">]</a>  <a id="61593" href="Demos.HSP.html#60359" class="Bound">ùë®</a>
 <a id="61596" href="Demos.HSP.html#61541" class="Function">F-ModThV-epi</a> <a id="61609" href="Demos.HSP.html#61609" class="Bound">A‚ààModThVK</a> <a id="61619" class="Symbol">=</a> <a id="61621" href="Demos.HSP.html#60607" class="Function">F-ModTh-epi</a> <a id="61633" class="Symbol">Œª</a> <a id="61635" class="Symbol">{</a><a id="61636" href="Demos.HSP.html#61636" class="Bound">p</a><a id="61637" class="Symbol">}{</a><a id="61639" href="Demos.HSP.html#61639" class="Bound">q</a><a id="61640" class="Symbol">}</a> <a id="61642" class="Symbol">‚Üí</a> <a id="61644" href="Demos.HSP.html#61666" class="Function">Goal</a> <a id="61649" class="Symbol">{</a><a id="61650" href="Demos.HSP.html#61636" class="Bound">p</a><a id="61651" class="Symbol">}{</a><a id="61653" href="Demos.HSP.html#61639" class="Bound">q</a><a id="61654" class="Symbol">}</a>
  <a id="61658" class="Keyword">where</a>
  <a id="61666" href="Demos.HSP.html#61666" class="Function">Goal</a> <a id="61671" class="Symbol">:</a> <a id="61673" href="Demos.HSP.html#60359" class="Bound">ùë®</a> <a id="61675" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="61677" href="Demos.HSP.html#48522" class="Function">Mod</a> <a id="61681" class="Symbol">(</a><a id="61682" href="Demos.HSP.html#48424" class="Function">Th</a> <a id="61685" href="Demos.HSP.html#60397" class="Bound">ùí¶</a><a id="61686" class="Symbol">)</a>
  <a id="61690" href="Demos.HSP.html#61666" class="Function">Goal</a> <a id="61695" class="Symbol">{</a><a id="61696" href="Demos.HSP.html#61696" class="Bound">p</a><a id="61697" class="Symbol">}{</a><a id="61699" href="Demos.HSP.html#61699" class="Bound">q</a><a id="61700" class="Symbol">}</a> <a id="61702" href="Demos.HSP.html#61702" class="Bound">x</a> <a id="61704" href="Demos.HSP.html#61704" class="Bound">œÅ</a> <a id="61706" class="Symbol">=</a> <a id="61708" href="Demos.HSP.html#61609" class="Bound">A‚ààModThVK</a><a id="61717" class="Symbol">{</a><a id="61718" href="Demos.HSP.html#61696" class="Bound">p</a><a id="61719" class="Symbol">}{</a><a id="61721" href="Demos.HSP.html#61699" class="Bound">q</a><a id="61722" class="Symbol">}</a> <a id="61724" class="Symbol">(</a><a id="61725" href="Demos.HSP.html#54630" class="Function">V-id1</a> <a id="61731" href="Demos.HSP.html#60381" class="Bound">‚Ñì</a> <a id="61733" class="Symbol">{</a><a id="61734" class="Argument">p</a> <a id="61736" class="Symbol">=</a> <a id="61738" href="Demos.HSP.html#61696" class="Bound">p</a><a id="61739" class="Symbol">}{</a><a id="61741" href="Demos.HSP.html#61699" class="Bound">q</a><a id="61742" class="Symbol">}</a> <a id="61744" href="Demos.HSP.html#61702" class="Bound">x</a><a id="61745" class="Symbol">)</a> <a id="61747" href="Demos.HSP.html#61704" class="Bound">œÅ</a>

</pre>
Actually, we will need the following lifted version of this result.

<pre class="Agda">

 <a id="61845" href="Demos.HSP.html#61845" class="Function">F-ModTh-epi-lift</a> <a id="61862" class="Symbol">:</a> <a id="61864" href="Demos.HSP.html#60359" class="Bound">ùë®</a> <a id="61866" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="61868" href="Demos.HSP.html#48522" class="Function">Mod</a> <a id="61872" class="Symbol">(</a><a id="61873" href="Demos.HSP.html#48424" class="Function">Th</a> <a id="61876" class="Symbol">(</a><a id="61877" href="Demos.HSP.html#52895" class="Function">V</a> <a id="61879" href="Demos.HSP.html#60381" class="Bound">‚Ñì</a> <a id="61881" href="Demos.HSP.html#60468" class="Function">Œπ</a> <a id="61883" href="Demos.HSP.html#60397" class="Bound">ùí¶</a><a id="61884" class="Symbol">))</a> <a id="61887" class="Symbol">‚Üí</a> <a id="61889" href="Demos.HSP.html#27801" class="Function">epi</a> <a id="61893" href="Demos.HSP.html#59216" class="Function Operator">ùîΩ[</a> <a id="61896" href="Demos.HSP.html#60587" class="Function">A</a> <a id="61898" href="Demos.HSP.html#59216" class="Function Operator">]</a> <a id="61900" class="Symbol">(</a><a id="61901" href="Demos.HSP.html#22539" class="Function">Lift-Alg</a> <a id="61910" href="Demos.HSP.html#60359" class="Bound">ùë®</a> <a id="61912" href="Demos.HSP.html#60468" class="Function">Œπ</a> <a id="61914" href="Demos.HSP.html#60468" class="Function">Œπ</a><a id="61915" class="Symbol">)</a>
 <a id="61918" href="Demos.HSP.html#61845" class="Function">F-ModTh-epi-lift</a> <a id="61935" href="Demos.HSP.html#61935" class="Bound">A‚ààModThK</a> <a id="61944" class="Symbol">=</a> <a id="61946" href="Demos.HSP.html#29304" class="Function">‚àò-epi</a> <a id="61952" class="Symbol">(</a><a id="61953" href="Demos.HSP.html#61541" class="Function">F-ModThV-epi</a> <a id="61966" class="Symbol">Œª</a> <a id="61968" class="Symbol">{</a><a id="61969" href="Demos.HSP.html#61969" class="Bound">p</a> <a id="61971" href="Demos.HSP.html#61971" class="Bound">q</a><a id="61972" class="Symbol">}</a> <a id="61974" class="Symbol">‚Üí</a> <a id="61976" href="Demos.HSP.html#61935" class="Bound">A‚ààModThK</a><a id="61984" class="Symbol">{</a><a id="61985" class="Argument">p</a> <a id="61987" class="Symbol">=</a> <a id="61989" href="Demos.HSP.html#61969" class="Bound">p</a><a id="61990" class="Symbol">}{</a><a id="61992" href="Demos.HSP.html#61971" class="Bound">q</a><a id="61993" class="Symbol">}</a> <a id="61995" class="Symbol">)</a> <a id="61997" href="Demos.HSP.html#31302" class="Function">ToLift-epi</a>
</pre>


Birkhoff's Variety Theorem
==========================

Let `ùí¶` be a class of algebras and recall that `ùí¶` is a *variety* provided
it is closed under homomorphisms, subalgebras and products; equivalently,
`V ùí¶ ‚äÜ ùí¶`.
(Observe that `ùí¶ ‚äÜ V ùí¶` holds for all `ùí¶` since `V` is a closure operator.)
We call `ùí¶` an *equational class* if it is the class of all models of some set of identities.

Birkhoff's variety theorem, also known as the HSP theorem, asserts that `ùí¶` is an equational class if and only if it is a variety.  In this section, we present the statement and proof of this theorem---first in a style similar to what one finds in textbooks (e.g.,¬†[@Bergman:2012 Theorem 4.41]), and then formally in the language of [MLTT][].


#### Informal proof {#informal-proof .unnumbered}

(‚áí) *Every equational class is a variety*. Indeed, suppose `ùí¶` is an equational class axiomatized by term identities `‚Ñ∞`; that is, `ùë® ‚àà ùí¶` iff `ùë® ‚ä® ‚Ñ∞`. Since the classes `H ùí¶`, `S ùí¶`, `P ùí¶` and `ùí¶` all satisfy the same set of equations, we have `V ùí¶ ‚ä´ p ‚âà q` for all `(p , q) ‚àà ‚Ñ∞`, so `V ùí¶ ‚äÜ ùí¶`.

(‚áê) *Every variety is an equational class*.[^10] Let `ùí¶` be an arbitrary variety.  We will describe a set of equations that axiomatizes `ùí¶`.  A natural choice is to take `Th ùí¶` and try to prove that `ùí¶ = Mod (Th ùí¶)`. Clearly, `ùí¶ ‚äÜ Mod (Th ùí¶)`.  To prove the converse inclusion, let `ùë® ‚àà Mod (Th ùí¶)`. It suffices to find an algebra `ùë≠ ‚àà S (P ùí¶)` such that `ùë®` is a homomorphic image of `ùë≠`, as this will show that `ùë® ‚àà H (S (P ùí¶)) = ùí¶`.

Let `X` be such that there exists a surjective environment `œÅ : X ‚Üí ùïå[ ùë® ]`.[^11]
By the `lift-hom` lemma, there is an epimorphism `h : ùëª X ‚Üí ùïå[ ùë® ]` that extends `œÅ`. Put  `ùîΩ[ X ] := ùëª X / ‚âà` and let `g : ùëª X  ‚Üí ùîΩ[ X ]` be the natural epimorphism with kernel `‚âà`. We claim `ker g ‚äÜ ker h`. 
If the claim is true, then there is a map `f : ùîΩ[ X ] ‚Üí ùë®` such that `f ‚àò g = h`, and since `h`
is surjective so is `f`. Therefore, `ùë® ‚àà ùñß (ùîΩ[ X ]) ‚äÜ Mod (Th ùí¶)` completing the proof.

It remains to prove the claim `ker g ‚äÜ ker h`. Let `u`, `v` be terms and assume `g u = g v`. Since `ùëª X` is generated by `X`, there are terms `p`, `q` such that `u = ‚ü¶ ùëª X ‚üß p` and `v = ‚ü¶ ùëª X ‚üß q`.[^12]
Therefore, `‚ü¶ ùîΩ[ X ] ‚üß p = g (‚ü¶ ùëª X ‚üß p) = g u = g v = g (‚ü¶ ùëª X ‚üß q) = ‚ü¶ ùîΩ[ X ]‚üß q`,
so `ùí¶ ‚ä´ p ‚âà q`; thus, `(p , q) ‚àà Th ùí¶`. Since `ùë® ‚àà Mod (Th ùí¶)`, we obtain `ùë® ‚äß p ‚âà q`, which implies
that `h u = (‚ü¶ ùë® ‚üß p) ‚ü®$‚ü© œÅ = (‚ü¶ ùë® ‚üß q) ‚ü®$‚ü© œÅ = h v`, as desired.

#### Formal proof {#formal-proof .unnumbered}

(‚áí) *Every equational class is a variety*.
We need an arbitrary equational class, which we obtain by starting with an arbitrary collection `‚Ñ∞` of equations and then defining `ùí¶ = Mod ‚Ñ∞`, the class axiomatized by `‚Ñ∞`. We prove that `ùí¶` is a variety by showing that `ùí¶ = V ùí¶`. The inclusion `ùí¶ ‚äÜ V ùí¶`, which holds for all classes `ùí¶`, is called the *expansive* property of `V`.

<pre class="Agda">

<a id="64908" class="Keyword">module</a> <a id="64915" href="Demos.HSP.html#64915" class="Module">_</a> <a id="64917" class="Symbol">(</a><a id="64918" href="Demos.HSP.html#64918" class="Bound">ùí¶</a> <a id="64920" class="Symbol">:</a> <a id="64922" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="64926" class="Symbol">(</a><a id="64927" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="64935" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="64937" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a><a id="64939" class="Symbol">)</a> <a id="64941" class="Symbol">(</a><a id="64942" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="64944" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="64946" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a> <a id="64949" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="64951" href="Demos.HSP.html#34955" class="Function">ov</a> <a id="64954" href="Demos.HSP.html#7637" class="Generalizable">‚Ñì</a><a id="64955" class="Symbol">))</a> <a id="64958" class="Keyword">where</a>
 <a id="64965" href="Demos.HSP.html#64965" class="Function">V-expa</a> <a id="64972" class="Symbol">:</a> <a id="64974" href="Demos.HSP.html#64918" class="Bound">ùí¶</a> <a id="64976" href="Relation.Unary.html#1742" class="Function Operator">‚äÜ</a> <a id="64978" href="Demos.HSP.html#52895" class="Function">V</a> <a id="64980" href="Demos.HSP.html#64954" class="Bound">‚Ñì</a> <a id="64982" class="Symbol">(</a><a id="64983" href="Demos.HSP.html#34955" class="Function">ov</a> <a id="64986" class="Symbol">(</a><a id="64987" href="Demos.HSP.html#64935" class="Bound">Œ±</a> <a id="64989" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="64991" href="Demos.HSP.html#64937" class="Bound">œÅ·µÉ</a> <a id="64994" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="64996" href="Demos.HSP.html#64954" class="Bound">‚Ñì</a><a id="64997" class="Symbol">))</a> <a id="65000" href="Demos.HSP.html#64918" class="Bound">ùí¶</a>
 <a id="65003" href="Demos.HSP.html#64965" class="Function">V-expa</a> <a id="65010" class="Symbol">{</a><a id="65011" class="Argument">x</a> <a id="65013" class="Symbol">=</a> <a id="65015" href="Demos.HSP.html#65015" class="Bound">ùë®</a><a id="65016" class="Symbol">}</a><a id="65017" href="Demos.HSP.html#65017" class="Bound">kA</a> <a id="65020" class="Symbol">=</a> <a id="65022" href="Demos.HSP.html#65015" class="Bound">ùë®</a> <a id="65024" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="65026" class="Symbol">(</a><a id="65027" href="Demos.HSP.html#65015" class="Bound">ùë®</a> <a id="65029" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="65031" class="Symbol">(</a><a id="65032" href="Data.Unit.Polymorphic.Base.html#480" class="Function">‚ä§</a> <a id="65034" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="65036" class="Symbol">(Œª</a> <a id="65039" href="Demos.HSP.html#65039" class="Bound">_</a> <a id="65041" class="Symbol">‚Üí</a> <a id="65043" href="Demos.HSP.html#65015" class="Bound">ùë®</a><a id="65044" class="Symbol">)</a><a id="65045" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="65047" class="Symbol">(Œª</a> <a id="65050" href="Demos.HSP.html#65050" class="Bound">_</a> <a id="65052" class="Symbol">‚Üí</a> <a id="65054" href="Demos.HSP.html#65017" class="Bound">kA</a><a id="65056" class="Symbol">)</a><a id="65057" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="65059" href="Demos.HSP.html#65421" class="Function">Goal</a><a id="65063" class="Symbol">)</a><a id="65064" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="65066" href="Demos.HSP.html#38043" class="Function">‚â§-reflexive</a><a id="65077" class="Symbol">)</a><a id="65078" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="65080" href="Demos.HSP.html#35171" class="Function">IdHomImage</a>
  <a id="65093" class="Keyword">where</a>
  <a id="65101" class="Keyword">open</a> <a id="65106" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="65113" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="65116" href="Demos.HSP.html#65015" class="Bound">ùë®</a> <a id="65118" href="Demos.HSP.html#19405" class="Function Operator">]</a>            <a id="65131" class="Keyword">using</a> <a id="65137" class="Symbol">(</a> <a id="65139" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="65144" class="Symbol">)</a>
  <a id="65148" class="Keyword">open</a> <a id="65153" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="65160" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="65163" href="Demos.HSP.html#24369" class="Function">‚®Ö</a> <a id="65165" class="Symbol">(Œª</a> <a id="65168" href="Demos.HSP.html#65168" class="Bound">_</a> <a id="65170" class="Symbol">‚Üí</a> <a id="65172" href="Demos.HSP.html#65015" class="Bound">ùë®</a><a id="65173" class="Symbol">)</a> <a id="65175" href="Demos.HSP.html#19405" class="Function Operator">]</a>  <a id="65178" class="Keyword">using</a> <a id="65184" class="Symbol">()</a> <a id="65187" class="Keyword">renaming</a> <a id="65196" class="Symbol">(</a> <a id="65198" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="65203" class="Symbol">to</a> <a id="65206" class="Function">refl‚®Ö</a> <a id="65212" class="Symbol">)</a>
  <a id="65216" href="Demos.HSP.html#65216" class="Function">to‚®Ö</a>    <a id="65223" class="Symbol">:</a> <a id="65225" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="65228" href="Demos.HSP.html#65015" class="Bound">ùë®</a> <a id="65230" href="Demos.HSP.html#19405" class="Function Operator">]</a>            <a id="65243" href="Demos.HSP.html#6679" class="Record Operator">‚ü∂</a> <a id="65245" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="65248" href="Demos.HSP.html#24369" class="Function">‚®Ö</a> <a id="65250" class="Symbol">(Œª</a> <a id="65253" href="Demos.HSP.html#65253" class="Bound">_</a> <a id="65255" class="Symbol">‚Üí</a> <a id="65257" href="Demos.HSP.html#65015" class="Bound">ùë®</a><a id="65258" class="Symbol">)</a> <a id="65260" href="Demos.HSP.html#19405" class="Function Operator">]</a>
  <a id="65264" href="Demos.HSP.html#65216" class="Function">to‚®Ö</a>    <a id="65271" class="Symbol">=</a> <a id="65273" class="Keyword">record</a> <a id="65280" class="Symbol">{</a> <a id="65282" href="Function.Bundles.html#1919" class="Field">f</a> <a id="65284" class="Symbol">=</a> <a id="65286" class="Symbol">Œª</a> <a id="65288" href="Demos.HSP.html#65288" class="Bound">x</a> <a id="65290" href="Demos.HSP.html#65290" class="Bound">_</a> <a id="65292" class="Symbol">‚Üí</a> <a id="65294" href="Demos.HSP.html#65288" class="Bound">x</a>   <a id="65298" class="Symbol">;</a> <a id="65300" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="65305" class="Symbol">=</a> <a id="65307" class="Symbol">Œª</a> <a id="65309" href="Demos.HSP.html#65309" class="Bound">xy</a> <a id="65312" href="Demos.HSP.html#65312" class="Bound">_</a> <a id="65314" class="Symbol">‚Üí</a> <a id="65316" href="Demos.HSP.html#65309" class="Bound">xy</a> <a id="65319" class="Symbol">}</a>
  <a id="65323" href="Demos.HSP.html#65323" class="Function">from‚®Ö</a>  <a id="65330" class="Symbol">:</a> <a id="65332" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="65335" href="Demos.HSP.html#24369" class="Function">‚®Ö</a> <a id="65337" class="Symbol">(Œª</a> <a id="65340" href="Demos.HSP.html#65340" class="Bound">_</a> <a id="65342" class="Symbol">‚Üí</a> <a id="65344" href="Demos.HSP.html#65015" class="Bound">ùë®</a><a id="65345" class="Symbol">)</a> <a id="65347" href="Demos.HSP.html#19405" class="Function Operator">]</a>  <a id="65350" href="Demos.HSP.html#6679" class="Record Operator">‚ü∂</a> <a id="65352" href="Demos.HSP.html#19405" class="Function Operator">ùîª[</a> <a id="65355" href="Demos.HSP.html#65015" class="Bound">ùë®</a> <a id="65357" href="Demos.HSP.html#19405" class="Function Operator">]</a>
  <a id="65361" href="Demos.HSP.html#65323" class="Function">from‚®Ö</a>  <a id="65368" class="Symbol">=</a> <a id="65370" class="Keyword">record</a> <a id="65377" class="Symbol">{</a> <a id="65379" href="Function.Bundles.html#1919" class="Field">f</a> <a id="65381" class="Symbol">=</a> <a id="65383" class="Symbol">Œª</a> <a id="65385" href="Demos.HSP.html#65385" class="Bound">x</a> <a id="65387" class="Symbol">‚Üí</a> <a id="65389" href="Demos.HSP.html#65385" class="Bound">x</a> <a id="65391" href="Data.Unit.Polymorphic.Base.html#524" class="Function">tt</a>  <a id="65395" class="Symbol">;</a> <a id="65397" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="65402" class="Symbol">=</a> <a id="65404" class="Symbol">Œª</a> <a id="65406" href="Demos.HSP.html#65406" class="Bound">xy</a> <a id="65409" class="Symbol">‚Üí</a> <a id="65411" href="Demos.HSP.html#65406" class="Bound">xy</a> <a id="65414" href="Data.Unit.Polymorphic.Base.html#524" class="Function">tt</a> <a id="65417" class="Symbol">}</a>
  <a id="65421" href="Demos.HSP.html#65421" class="Function">Goal</a>   <a id="65428" class="Symbol">:</a> <a id="65430" href="Demos.HSP.html#65015" class="Bound">ùë®</a> <a id="65432" href="Demos.HSP.html#33000" class="Record Operator">‚âÖ</a> <a id="65434" href="Demos.HSP.html#24369" class="Function">‚®Ö</a> <a id="65436" class="Symbol">(Œª</a> <a id="65439" href="Demos.HSP.html#65439" class="Bound">x</a> <a id="65441" class="Symbol">‚Üí</a> <a id="65443" href="Demos.HSP.html#65015" class="Bound">ùë®</a><a id="65444" class="Symbol">)</a>
  <a id="65448" href="Demos.HSP.html#65421" class="Function">Goal</a>   <a id="65455" class="Symbol">=</a> <a id="65457" href="Demos.HSP.html#33059" class="InductiveConstructor">mkiso</a> <a id="65463" class="Symbol">(</a><a id="65464" href="Demos.HSP.html#65216" class="Function">to‚®Ö</a> <a id="65468" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="65470" href="Demos.HSP.html#26692" class="InductiveConstructor">mkhom</a> <a id="65476" href="Demos.HSP.html#65206" class="Function">refl‚®Ö</a><a id="65481" class="Symbol">)</a> <a id="65483" class="Symbol">(</a><a id="65484" href="Demos.HSP.html#65323" class="Function">from‚®Ö</a> <a id="65490" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="65492" href="Demos.HSP.html#26692" class="InductiveConstructor">mkhom</a> <a id="65498" href="Relation.Binary.Structures.html#1568" class="Function">refl</a><a id="65502" class="Symbol">)</a> <a id="65504" class="Symbol">(Œª</a> <a id="65507" href="Demos.HSP.html#65507" class="Bound">_</a> <a id="65509" href="Demos.HSP.html#65509" class="Bound">_</a> <a id="65511" class="Symbol">‚Üí</a> <a id="65513" href="Relation.Binary.Structures.html#1568" class="Function">refl</a><a id="65517" class="Symbol">)</a> <a id="65519" class="Symbol">(Œª</a> <a id="65522" href="Demos.HSP.html#65522" class="Bound">_</a> <a id="65524" class="Symbol">‚Üí</a> <a id="65526" href="Relation.Binary.Structures.html#1568" class="Function">refl</a><a id="65530" class="Symbol">)</a>

</pre>
Observe how `ùë®` is expressed as (isomorphic to) a product with just one factor (itself), that is, the product
`‚®Ö (Œª x ‚Üí ùë®)` indexed over the one-element type `‚ä§`.

For the inclusion `V ùí¶ ‚äÜ ùí¶`, recall lemma `V-id1` which asserts that `ùí¶ ‚ä´ p ‚âà q` implies
`V ‚Ñì Œπ ùí¶ ‚ä´ p ‚âà q`; whence, if `ùí¶` is an equational class, then `V ùí¶ ‚äÜ ùí¶`, as we now confirm.

<pre class="Agda">

<a id="65905" class="Keyword">module</a> <a id="65912" href="Demos.HSP.html#65912" class="Module">_</a> <a id="65914" class="Symbol">{</a><a id="65915" href="Demos.HSP.html#65915" class="Bound">‚Ñì</a> <a id="65917" class="Symbol">:</a> <a id="65919" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="65924" class="Symbol">}{</a><a id="65926" href="Demos.HSP.html#65926" class="Bound">X</a> <a id="65928" class="Symbol">:</a> <a id="65930" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="65935" href="Demos.HSP.html#65915" class="Bound">‚Ñì</a><a id="65936" class="Symbol">}{</a><a id="65938" href="Demos.HSP.html#65938" class="Bound">‚Ñ∞</a> <a id="65940" class="Symbol">:</a> <a id="65942" class="Symbol">{</a><a id="65943" href="Demos.HSP.html#65943" class="Bound">Y</a> <a id="65945" class="Symbol">:</a> <a id="65947" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="65952" href="Demos.HSP.html#65915" class="Bound">‚Ñì</a><a id="65953" class="Symbol">}</a> <a id="65955" class="Symbol">‚Üí</a> <a id="65957" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="65962" class="Symbol">(</a><a id="65963" href="Demos.HSP.html#39820" class="Datatype">Term</a> <a id="65968" href="Demos.HSP.html#65943" class="Bound">Y</a> <a id="65970" href="Data.Product.html#1167" class="Function Operator">√ó</a> <a id="65972" href="Demos.HSP.html#39820" class="Datatype">Term</a> <a id="65977" href="Demos.HSP.html#65943" class="Bound">Y</a><a id="65978" class="Symbol">)</a> <a id="65980" class="Symbol">(</a><a id="65981" href="Demos.HSP.html#34955" class="Function">ov</a> <a id="65984" href="Demos.HSP.html#65915" class="Bound">‚Ñì</a><a id="65985" class="Symbol">)}</a> <a id="65988" class="Keyword">where</a>
 <a id="65995" class="Keyword">private</a> <a id="66003" href="Demos.HSP.html#66003" class="Function">ùí¶</a> <a id="66005" class="Symbol">=</a> <a id="66007" href="Demos.HSP.html#48522" class="Function">Mod</a><a id="66010" class="Symbol">{</a><a id="66011" class="Argument">Œ±</a> <a id="66013" class="Symbol">=</a> <a id="66015" href="Demos.HSP.html#65915" class="Bound">‚Ñì</a><a id="66016" class="Symbol">}{</a><a id="66018" href="Demos.HSP.html#65915" class="Bound">‚Ñì</a><a id="66019" class="Symbol">}{</a><a id="66021" href="Demos.HSP.html#65926" class="Bound">X</a><a id="66022" class="Symbol">}</a> <a id="66024" href="Demos.HSP.html#65938" class="Bound">‚Ñ∞</a>     <a id="66030" class="Comment">-- an arbitrary equational class</a>

 <a id="66065" href="Demos.HSP.html#66065" class="Function">EqCl‚áíVar</a> <a id="66074" class="Symbol">:</a> <a id="66076" href="Demos.HSP.html#52895" class="Function">V</a> <a id="66078" href="Demos.HSP.html#65915" class="Bound">‚Ñì</a> <a id="66080" class="Symbol">(</a><a id="66081" href="Demos.HSP.html#34955" class="Function">ov</a> <a id="66084" href="Demos.HSP.html#65915" class="Bound">‚Ñì</a><a id="66085" class="Symbol">)</a> <a id="66087" href="Demos.HSP.html#66003" class="Function">ùí¶</a> <a id="66089" href="Relation.Unary.html#1742" class="Function Operator">‚äÜ</a> <a id="66091" href="Demos.HSP.html#66003" class="Function">ùí¶</a>
 <a id="66094" href="Demos.HSP.html#66065" class="Function">EqCl‚áíVar</a> <a id="66103" class="Symbol">{</a><a id="66104" href="Demos.HSP.html#66104" class="Bound">ùë®</a><a id="66105" class="Symbol">}</a> <a id="66107" href="Demos.HSP.html#66107" class="Bound">vA</a> <a id="66110" class="Symbol">{</a><a id="66111" href="Demos.HSP.html#66111" class="Bound">p</a><a id="66112" class="Symbol">}</a> <a id="66114" class="Symbol">{</a><a id="66115" href="Demos.HSP.html#66115" class="Bound">q</a><a id="66116" class="Symbol">}</a> <a id="66118" href="Demos.HSP.html#66118" class="Bound">p‚Ñ∞q</a> <a id="66122" href="Demos.HSP.html#66122" class="Bound">œÅ</a> <a id="66124" class="Symbol">=</a> <a id="66126" href="Demos.HSP.html#54630" class="Function">V-id1</a> <a id="66132" href="Demos.HSP.html#65915" class="Bound">‚Ñì</a> <a id="66134" class="Symbol">{</a><a id="66135" href="Demos.HSP.html#66003" class="Function">ùí¶</a><a id="66136" class="Symbol">}</a> <a id="66138" class="Symbol">{</a><a id="66139" href="Demos.HSP.html#66111" class="Bound">p</a><a id="66140" class="Symbol">}</a> <a id="66142" class="Symbol">{</a><a id="66143" href="Demos.HSP.html#66115" class="Bound">q</a><a id="66144" class="Symbol">}</a> <a id="66146" class="Symbol">(Œª</a> <a id="66149" href="Demos.HSP.html#66149" class="Bound">_</a> <a id="66151" href="Demos.HSP.html#66151" class="Bound">x</a> <a id="66153" href="Demos.HSP.html#66153" class="Bound">œÑ</a> <a id="66155" class="Symbol">‚Üí</a> <a id="66157" href="Demos.HSP.html#66151" class="Bound">x</a> <a id="66159" href="Demos.HSP.html#66118" class="Bound">p‚Ñ∞q</a> <a id="66163" href="Demos.HSP.html#66153" class="Bound">œÑ</a><a id="66164" class="Symbol">)</a> <a id="66166" href="Demos.HSP.html#66104" class="Bound">ùë®</a> <a id="66168" href="Demos.HSP.html#66107" class="Bound">vA</a> <a id="66171" href="Demos.HSP.html#66122" class="Bound">œÅ</a>

</pre>
By `V-expa` and `Eqcl‚áíVar`, every equational class is a variety.

(‚áê) *Every variety is an equational class*.
To fix an arbitrary variety, start with an arbitrary class `ùí¶` of `ùëÜ`-algebras and take the *varietal closure*, `V ùí¶`. We prove that `V ùí¶` is precisely the collection of algebras that model `Th (V ùí¶)`; that is, `V ùí¶ = Mod (Th (V ùí¶))`.  The inclusion `V ùí¶ ‚äÜ Mod (Th (V ùí¶))` is a consequence of the fact that `Mod Th` is a closure operator.

<pre class="Agda">

<a id="66649" class="Keyword">module</a> <a id="66656" href="Demos.HSP.html#66656" class="Module">_</a> <a id="66658" class="Symbol">(</a><a id="66659" href="Demos.HSP.html#66659" class="Bound">ùí¶</a> <a id="66661" class="Symbol">:</a> <a id="66663" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="66667" class="Symbol">(</a><a id="66668" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="66676" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="66678" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a><a id="66680" class="Symbol">)</a> <a id="66682" class="Symbol">(</a><a id="66683" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="66685" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="66687" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a> <a id="66690" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="66692" href="Demos.HSP.html#34955" class="Function">ov</a> <a id="66695" href="Demos.HSP.html#7637" class="Generalizable">‚Ñì</a><a id="66696" class="Symbol">)){</a><a id="66699" href="Demos.HSP.html#66699" class="Bound">X</a> <a id="66701" class="Symbol">:</a> <a id="66703" href="Demos.HSP.html#6414" class="Primitive">Type</a> <a id="66708" class="Symbol">(</a><a id="66709" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="66711" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="66713" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a> <a id="66716" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="66718" href="Demos.HSP.html#7637" class="Generalizable">‚Ñì</a><a id="66719" class="Symbol">)}</a> <a id="66722" class="Keyword">where</a>
 <a id="66729" class="Keyword">private</a> <a id="66737" href="Demos.HSP.html#66737" class="Function">c</a> <a id="66739" class="Symbol">=</a> <a id="66741" href="Demos.HSP.html#66676" class="Bound">Œ±</a> <a id="66743" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="66745" href="Demos.HSP.html#66678" class="Bound">œÅ·µÉ</a> <a id="66748" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="66750" href="Demos.HSP.html#66695" class="Bound">‚Ñì</a> <a id="66752" class="Symbol">;</a> <a id="66754" href="Demos.HSP.html#66754" class="Function">Œπ</a> <a id="66756" class="Symbol">=</a> <a id="66758" href="Demos.HSP.html#34955" class="Function">ov</a> <a id="66761" href="Demos.HSP.html#66737" class="Function">c</a>

 <a id="66765" href="Demos.HSP.html#66765" class="Function">ModTh-closure</a> <a id="66779" class="Symbol">:</a> <a id="66781" href="Demos.HSP.html#52895" class="Function">V</a><a id="66782" class="Symbol">{</a><a id="66783" class="Argument">Œ≤</a> <a id="66785" class="Symbol">=</a> <a id="66787" href="Demos.HSP.html#7618" class="Generalizable">Œ≤</a><a id="66788" class="Symbol">}{</a><a id="66790" href="Demos.HSP.html#7620" class="Generalizable">œÅ·µá</a><a id="66792" class="Symbol">}{</a><a id="66794" href="Demos.HSP.html#7623" class="Generalizable">Œ≥</a><a id="66795" class="Symbol">}{</a><a id="66797" href="Demos.HSP.html#7625" class="Generalizable">œÅ·∂ú</a><a id="66799" class="Symbol">}{</a><a id="66801" href="Demos.HSP.html#7628" class="Generalizable">Œ¥</a><a id="66802" class="Symbol">}{</a><a id="66804" href="Demos.HSP.html#7630" class="Generalizable">œÅ·µà</a><a id="66806" class="Symbol">}</a> <a id="66808" href="Demos.HSP.html#66695" class="Bound">‚Ñì</a> <a id="66810" href="Demos.HSP.html#66754" class="Function">Œπ</a> <a id="66812" href="Demos.HSP.html#66659" class="Bound">ùí¶</a> <a id="66814" href="Relation.Unary.html#1742" class="Function Operator">‚äÜ</a> <a id="66816" href="Demos.HSP.html#48522" class="Function">Mod</a><a id="66819" class="Symbol">{</a><a id="66820" class="Argument">X</a> <a id="66822" class="Symbol">=</a> <a id="66824" href="Demos.HSP.html#66699" class="Bound">X</a><a id="66825" class="Symbol">}</a> <a id="66827" class="Symbol">(</a><a id="66828" href="Demos.HSP.html#48424" class="Function">Th</a> <a id="66831" class="Symbol">(</a><a id="66832" href="Demos.HSP.html#52895" class="Function">V</a> <a id="66834" href="Demos.HSP.html#66695" class="Bound">‚Ñì</a> <a id="66836" href="Demos.HSP.html#66754" class="Function">Œπ</a> <a id="66838" href="Demos.HSP.html#66659" class="Bound">ùí¶</a><a id="66839" class="Symbol">))</a>
 <a id="66843" href="Demos.HSP.html#66765" class="Function">ModTh-closure</a> <a id="66857" class="Symbol">{</a><a id="66858" class="Argument">x</a> <a id="66860" class="Symbol">=</a> <a id="66862" href="Demos.HSP.html#66862" class="Bound">ùë®</a><a id="66863" class="Symbol">}</a> <a id="66865" href="Demos.HSP.html#66865" class="Bound">vA</a> <a id="66868" class="Symbol">{</a><a id="66869" href="Demos.HSP.html#66869" class="Bound">p</a><a id="66870" class="Symbol">}</a> <a id="66872" class="Symbol">{</a><a id="66873" href="Demos.HSP.html#66873" class="Bound">q</a><a id="66874" class="Symbol">}</a> <a id="66876" href="Demos.HSP.html#66876" class="Bound">x</a> <a id="66878" href="Demos.HSP.html#66878" class="Bound">œÅ</a> <a id="66880" class="Symbol">=</a> <a id="66882" href="Demos.HSP.html#66876" class="Bound">x</a> <a id="66884" href="Demos.HSP.html#66862" class="Bound">ùë®</a> <a id="66886" href="Demos.HSP.html#66865" class="Bound">vA</a> <a id="66889" href="Demos.HSP.html#66878" class="Bound">œÅ</a>

</pre>

Our proof of the inclusion `Mod( Th( V ùí¶)) ‚äÜ V ùí¶` is carried out in two steps.

* Prove  `ùîΩ[ X ] ‚â§ ùë™ X`.
* Prove that every algebra in `Mod (Th (V ùí¶))` is a homomorphic image of `ùîΩ[ X ]`.

From the first item we have `ùîΩ[ X ] ‚àà S( P ùí¶))`, since `ùë™ X` is a product of algebras in `ùí¶`. From this and the second item will follow `Mod (Th (V ùí¶)) ‚äÜ H (S (P ùí¶))` (= `V ùí¶`), as desired.

To prove `ùîΩ[ X ] ‚â§ ùë™ X`, we construct a homomorphism from `ùîΩ[ X ]` to `ùë™ X` and then show it is injective,
so `ùîΩ[ X ]` is (isomorphic to) a subalgebra of `ùë™ X`.

<pre class="Agda">

 <a id="67461" class="Keyword">open</a> <a id="67466" href="Demos.HSP.html#59624" class="Module">FreeHom</a> <a id="67474" class="Symbol">{</a><a id="67475" class="Argument">‚Ñì</a> <a id="67477" class="Symbol">=</a> <a id="67479" href="Demos.HSP.html#66695" class="Bound">‚Ñì</a><a id="67480" class="Symbol">}{</a><a id="67482" href="Demos.HSP.html#66659" class="Bound">ùí¶</a><a id="67483" class="Symbol">}</a>
 <a id="67486" class="Keyword">open</a> <a id="67491" href="Demos.HSP.html#58763" class="Module">FreeAlgebra</a> <a id="67503" href="Demos.HSP.html#66659" class="Bound">ùí¶</a> <a id="67505" class="Keyword">using</a> <a id="67511" class="Symbol">(</a><a id="67512" href="Demos.HSP.html#59126" class="Function">homC</a> <a id="67517" class="Symbol">;</a>  <a id="67520" href="Demos.HSP.html#59216" class="Function Operator">ùîΩ[_]</a> <a id="67525" class="Symbol">;</a> <a id="67527" href="Demos.HSP.html#58937" class="Function">ùë™</a> <a id="67529" class="Symbol">)</a>
 <a id="67532" href="Demos.HSP.html#67532" class="Function">homFC</a> <a id="67538" class="Symbol">:</a> <a id="67540" href="Demos.HSP.html#26745" class="Function">hom</a> <a id="67544" href="Demos.HSP.html#59216" class="Function Operator">ùîΩ[</a> <a id="67547" href="Demos.HSP.html#66699" class="Bound">X</a> <a id="67549" href="Demos.HSP.html#59216" class="Function Operator">]</a> <a id="67551" class="Symbol">(</a><a id="67552" href="Demos.HSP.html#58937" class="Function">ùë™</a> <a id="67554" href="Demos.HSP.html#66699" class="Bound">X</a><a id="67555" class="Symbol">)</a>
 <a id="67558" href="Demos.HSP.html#67532" class="Function">homFC</a> <a id="67564" class="Symbol">=</a> <a id="67566" href="Demos.HSP.html#36764" class="Function">fromHomIm</a> <a id="67576" class="Symbol">(</a><a id="67577" href="Demos.HSP.html#59126" class="Function">homC</a> <a id="67582" href="Demos.HSP.html#66699" class="Bound">X</a><a id="67583" class="Symbol">)</a>

 <a id="67587" href="Demos.HSP.html#67587" class="Function">monFC</a> <a id="67593" class="Symbol">:</a> <a id="67595" href="Demos.HSP.html#27374" class="Function">mon</a> <a id="67599" href="Demos.HSP.html#59216" class="Function Operator">ùîΩ[</a> <a id="67602" href="Demos.HSP.html#66699" class="Bound">X</a> <a id="67604" href="Demos.HSP.html#59216" class="Function Operator">]</a> <a id="67606" class="Symbol">(</a><a id="67607" href="Demos.HSP.html#58937" class="Function">ùë™</a> <a id="67609" href="Demos.HSP.html#66699" class="Bound">X</a><a id="67610" class="Symbol">)</a>
 <a id="67613" href="Demos.HSP.html#67587" class="Function">monFC</a> <a id="67619" class="Symbol">=</a> <a id="67621" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="67623" href="Demos.HSP.html#67532" class="Function">homFC</a> <a id="67629" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="67631" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="67633" class="Keyword">record</a> <a id="67640" class="Symbol">{</a> <a id="67642" href="Demos.HSP.html#27277" class="Field">isHom</a> <a id="67648" class="Symbol">=</a> <a id="67650" href="Demos.HSP.html#8301" class="Function Operator">‚à•</a> <a id="67652" href="Demos.HSP.html#67532" class="Function">homFC</a> <a id="67658" href="Demos.HSP.html#8301" class="Function Operator">‚à•</a>
                            <a id="67688" class="Symbol">;</a> <a id="67690" href="Demos.HSP.html#27302" class="Field">isInjective</a> <a id="67702" class="Symbol">=</a>  <a id="67705" class="Symbol">Œª</a> <a id="67707" class="Symbol">{</a><a id="67708" href="Demos.HSP.html#67708" class="Bound">x</a><a id="67709" class="Symbol">}{</a><a id="67711" href="Demos.HSP.html#67711" class="Bound">y</a><a id="67712" class="Symbol">}‚Üí</a> <a id="67715" href="Demos.HSP.html#14278" class="Function">fromIm-inj</a> <a id="67726" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="67728" href="Demos.HSP.html#59126" class="Function">homC</a> <a id="67733" href="Demos.HSP.html#66699" class="Bound">X</a> <a id="67735" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="67737" class="Symbol">{</a><a id="67738" href="Demos.HSP.html#67708" class="Bound">x</a><a id="67739" class="Symbol">}{</a><a id="67741" href="Demos.HSP.html#67711" class="Bound">y</a><a id="67742" class="Symbol">}</a>   <a id="67746" class="Symbol">}</a>
 <a id="67749" href="Demos.HSP.html#67749" class="Function">F‚â§C</a> <a id="67753" class="Symbol">:</a> <a id="67755" href="Demos.HSP.html#59216" class="Function Operator">ùîΩ[</a> <a id="67758" href="Demos.HSP.html#66699" class="Bound">X</a> <a id="67760" href="Demos.HSP.html#59216" class="Function Operator">]</a> <a id="67762" href="Demos.HSP.html#37755" class="Function Operator">‚â§</a> <a id="67764" href="Demos.HSP.html#58937" class="Function">ùë™</a> <a id="67766" href="Demos.HSP.html#66699" class="Bound">X</a>
 <a id="67769" href="Demos.HSP.html#67749" class="Function">F‚â§C</a> <a id="67773" class="Symbol">=</a> <a id="67775" href="Demos.HSP.html#38480" class="Function">mon‚Üí‚â§</a> <a id="67781" href="Demos.HSP.html#67587" class="Function">monFC</a>

 <a id="67789" class="Keyword">open</a> <a id="67794" href="Demos.HSP.html#58763" class="Module">FreeAlgebra</a> <a id="67806" href="Demos.HSP.html#66659" class="Bound">ùí¶</a> <a id="67808" class="Keyword">using</a> <a id="67814" class="Symbol">(</a> <a id="67816" href="Demos.HSP.html#58845" class="Function">‚Ñë</a> <a id="67818" class="Symbol">)</a>

 <a id="67822" href="Demos.HSP.html#67822" class="Function">SPF</a> <a id="67826" class="Symbol">:</a> <a id="67828" href="Demos.HSP.html#59216" class="Function Operator">ùîΩ[</a> <a id="67831" href="Demos.HSP.html#66699" class="Bound">X</a> <a id="67833" href="Demos.HSP.html#59216" class="Function Operator">]</a> <a id="67835" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="67837" href="Demos.HSP.html#49712" class="Function">S</a> <a id="67839" href="Demos.HSP.html#66754" class="Function">Œπ</a> <a id="67841" class="Symbol">(</a><a id="67842" href="Demos.HSP.html#49824" class="Function">P</a> <a id="67844" href="Demos.HSP.html#66695" class="Bound">‚Ñì</a> <a id="67846" href="Demos.HSP.html#66754" class="Function">Œπ</a> <a id="67848" href="Demos.HSP.html#66659" class="Bound">ùí¶</a><a id="67849" class="Symbol">)</a>
 <a id="67852" href="Demos.HSP.html#67822" class="Function">SPF</a> <a id="67856" class="Symbol">=</a> <a id="67858" href="Demos.HSP.html#58937" class="Function">ùë™</a> <a id="67860" href="Demos.HSP.html#66699" class="Bound">X</a> <a id="67862" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="67864" class="Symbol">((</a><a id="67866" href="Demos.HSP.html#58845" class="Function">‚Ñë</a> <a id="67868" href="Demos.HSP.html#66699" class="Bound">X</a><a id="67869" class="Symbol">)</a> <a id="67871" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="67873" class="Symbol">(</a><a id="67874" href="Demos.HSP.html#8264" class="Function Operator">‚à£_‚à£</a> <a id="67878" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="67880" class="Symbol">((Œª</a> <a id="67884" href="Demos.HSP.html#67884" class="Bound">i</a> <a id="67886" class="Symbol">‚Üí</a> <a id="67888" href="Demos.HSP.html#6516" class="Field">fst</a> <a id="67892" href="Demos.HSP.html#8301" class="Function Operator">‚à•</a> <a id="67894" href="Demos.HSP.html#67884" class="Bound">i</a> <a id="67896" href="Demos.HSP.html#8301" class="Function Operator">‚à•</a><a id="67897" class="Symbol">)</a> <a id="67899" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="67901" href="Demos.HSP.html#33799" class="Function">‚âÖ-refl</a><a id="67907" class="Symbol">)))</a> <a id="67911" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a>  <a id="67914" href="Demos.HSP.html#67749" class="Function">F‚â§C</a>
</pre>

Next we prove that every algebra in `Mod (Th (V ùí¶))` is a homomorphic image of `ùîΩ[ X ]`. Indeed,

<pre class="Agda">

<a id="68042" class="Keyword">module</a> <a id="68049" href="Demos.HSP.html#68049" class="Module">_</a> <a id="68051" class="Symbol">{</a><a id="68052" href="Demos.HSP.html#68052" class="Bound">ùí¶</a> <a id="68054" class="Symbol">:</a> <a id="68056" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="68060" class="Symbol">(</a><a id="68061" href="Demos.HSP.html#18760" class="Record">Algebra</a> <a id="68069" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="68071" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a><a id="68073" class="Symbol">)</a> <a id="68075" class="Symbol">(</a><a id="68076" href="Demos.HSP.html#7613" class="Generalizable">Œ±</a> <a id="68078" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="68080" href="Demos.HSP.html#7615" class="Generalizable">œÅ·µÉ</a> <a id="68083" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="68085" href="Demos.HSP.html#34955" class="Function">ov</a> <a id="68088" href="Demos.HSP.html#7637" class="Generalizable">‚Ñì</a><a id="68089" class="Symbol">)}</a> <a id="68092" class="Keyword">where</a>
 <a id="68099" class="Keyword">private</a> <a id="68107" href="Demos.HSP.html#68107" class="Function">c</a> <a id="68109" class="Symbol">=</a> <a id="68111" href="Demos.HSP.html#68069" class="Bound">Œ±</a> <a id="68113" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="68115" href="Demos.HSP.html#68071" class="Bound">œÅ·µÉ</a> <a id="68118" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="68120" href="Demos.HSP.html#68088" class="Bound">‚Ñì</a> <a id="68122" class="Symbol">;</a> <a id="68124" href="Demos.HSP.html#68124" class="Function">Œπ</a> <a id="68126" class="Symbol">=</a> <a id="68128" href="Demos.HSP.html#34955" class="Function">ov</a> <a id="68131" href="Demos.HSP.html#68107" class="Function">c</a>

 <a id="68135" href="Demos.HSP.html#68135" class="Function">Var‚áíEqCl</a> <a id="68144" class="Symbol">:</a> <a id="68146" class="Symbol">‚àÄ</a> <a id="68148" href="Demos.HSP.html#68148" class="Bound">ùë®</a> <a id="68150" class="Symbol">‚Üí</a> <a id="68152" href="Demos.HSP.html#68148" class="Bound">ùë®</a> <a id="68154" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="68156" href="Demos.HSP.html#48522" class="Function">Mod</a> <a id="68160" class="Symbol">(</a><a id="68161" href="Demos.HSP.html#48424" class="Function">Th</a> <a id="68164" class="Symbol">(</a><a id="68165" href="Demos.HSP.html#52895" class="Function">V</a> <a id="68167" href="Demos.HSP.html#68088" class="Bound">‚Ñì</a> <a id="68169" href="Demos.HSP.html#68124" class="Function">Œπ</a> <a id="68171" href="Demos.HSP.html#68052" class="Bound">ùí¶</a><a id="68172" class="Symbol">))</a> <a id="68175" class="Symbol">‚Üí</a> <a id="68177" href="Demos.HSP.html#68148" class="Bound">ùë®</a> <a id="68179" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="68181" href="Demos.HSP.html#52895" class="Function">V</a> <a id="68183" href="Demos.HSP.html#68088" class="Bound">‚Ñì</a> <a id="68185" href="Demos.HSP.html#68124" class="Function">Œπ</a> <a id="68187" href="Demos.HSP.html#68052" class="Bound">ùí¶</a>
 <a id="68190" href="Demos.HSP.html#68135" class="Function">Var‚áíEqCl</a> <a id="68199" href="Demos.HSP.html#68199" class="Bound">ùë®</a> <a id="68201" href="Demos.HSP.html#68201" class="Bound">ModThA</a> <a id="68208" class="Symbol">=</a> <a id="68210" href="Demos.HSP.html#59216" class="Function Operator">ùîΩ[</a> <a id="68213" href="Demos.HSP.html#19459" class="Function Operator">ùïå[</a> <a id="68216" href="Demos.HSP.html#68199" class="Bound">ùë®</a> <a id="68218" href="Demos.HSP.html#19459" class="Function Operator">]</a> <a id="68220" href="Demos.HSP.html#59216" class="Function Operator">]</a> <a id="68222" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="68224" class="Symbol">(</a><a id="68225" href="Demos.HSP.html#67822" class="Function">SPF</a><a id="68228" class="Symbol">{</a><a id="68229" class="Argument">‚Ñì</a> <a id="68231" class="Symbol">=</a> <a id="68233" href="Demos.HSP.html#68088" class="Bound">‚Ñì</a><a id="68234" class="Symbol">}</a> <a id="68236" href="Demos.HSP.html#68052" class="Bound">ùí¶</a> <a id="68238" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="68240" href="Demos.HSP.html#68499" class="Function">Aim</a><a id="68243" class="Symbol">)</a>
  <a id="68247" class="Keyword">where</a>
  <a id="68255" class="Keyword">open</a> <a id="68260" href="Demos.HSP.html#58763" class="Module">FreeAlgebra</a> <a id="68272" href="Demos.HSP.html#68052" class="Bound">ùí¶</a> <a id="68274" class="Keyword">using</a> <a id="68280" class="Symbol">(</a> <a id="68282" href="Demos.HSP.html#59216" class="Function Operator">ùîΩ[_]</a> <a id="68287" class="Symbol">)</a>
  <a id="68291" href="Demos.HSP.html#68291" class="Function">epiFlA</a> <a id="68298" class="Symbol">:</a> <a id="68300" href="Demos.HSP.html#27801" class="Function">epi</a> <a id="68304" href="Demos.HSP.html#59216" class="Function Operator">ùîΩ[</a> <a id="68307" href="Demos.HSP.html#19459" class="Function Operator">ùïå[</a> <a id="68310" href="Demos.HSP.html#68199" class="Bound">ùë®</a> <a id="68312" href="Demos.HSP.html#19459" class="Function Operator">]</a> <a id="68314" href="Demos.HSP.html#59216" class="Function Operator">]</a> <a id="68316" class="Symbol">(</a><a id="68317" href="Demos.HSP.html#22539" class="Function">Lift-Alg</a> <a id="68326" href="Demos.HSP.html#68199" class="Bound">ùë®</a> <a id="68328" href="Demos.HSP.html#68124" class="Function">Œπ</a> <a id="68330" href="Demos.HSP.html#68124" class="Function">Œπ</a><a id="68331" class="Symbol">)</a>
  <a id="68335" href="Demos.HSP.html#68291" class="Function">epiFlA</a> <a id="68342" class="Symbol">=</a> <a id="68344" href="Demos.HSP.html#61845" class="Function">F-ModTh-epi-lift</a><a id="68360" class="Symbol">{</a><a id="68361" class="Argument">‚Ñì</a> <a id="68363" class="Symbol">=</a> <a id="68365" href="Demos.HSP.html#68088" class="Bound">‚Ñì</a><a id="68366" class="Symbol">}</a> <a id="68368" class="Symbol">Œª</a> <a id="68370" class="Symbol">{</a><a id="68371" href="Demos.HSP.html#68371" class="Bound">p</a> <a id="68373" href="Demos.HSP.html#68373" class="Bound">q</a><a id="68374" class="Symbol">}</a> <a id="68376" class="Symbol">‚Üí</a> <a id="68378" href="Demos.HSP.html#68201" class="Bound">ModThA</a><a id="68384" class="Symbol">{</a><a id="68385" class="Argument">p</a> <a id="68387" class="Symbol">=</a> <a id="68389" href="Demos.HSP.html#68371" class="Bound">p</a><a id="68390" class="Symbol">}{</a><a id="68392" href="Demos.HSP.html#68373" class="Bound">q</a><a id="68393" class="Symbol">}</a>

  <a id="68398" href="Demos.HSP.html#68398" class="Function">œÜ</a> <a id="68400" class="Symbol">:</a> <a id="68402" href="Demos.HSP.html#22539" class="Function">Lift-Alg</a> <a id="68411" href="Demos.HSP.html#68199" class="Bound">ùë®</a> <a id="68413" href="Demos.HSP.html#68124" class="Function">Œπ</a> <a id="68415" href="Demos.HSP.html#68124" class="Function">Œπ</a> <a id="68417" href="Demos.HSP.html#35052" class="Function Operator">IsHomImageOf</a> <a id="68430" href="Demos.HSP.html#59216" class="Function Operator">ùîΩ[</a> <a id="68433" href="Demos.HSP.html#19459" class="Function Operator">ùïå[</a> <a id="68436" href="Demos.HSP.html#68199" class="Bound">ùë®</a> <a id="68438" href="Demos.HSP.html#19459" class="Function Operator">]</a> <a id="68440" href="Demos.HSP.html#59216" class="Function Operator">]</a>
  <a id="68444" href="Demos.HSP.html#68398" class="Function">œÜ</a> <a id="68446" class="Symbol">=</a> <a id="68448" href="Demos.HSP.html#28157" class="Function">epi‚Üíontohom</a> <a id="68460" href="Demos.HSP.html#59216" class="Function Operator">ùîΩ[</a> <a id="68463" href="Demos.HSP.html#19459" class="Function Operator">ùïå[</a> <a id="68466" href="Demos.HSP.html#68199" class="Bound">ùë®</a> <a id="68468" href="Demos.HSP.html#19459" class="Function Operator">]</a> <a id="68470" href="Demos.HSP.html#59216" class="Function Operator">]</a> <a id="68472" class="Symbol">(</a><a id="68473" href="Demos.HSP.html#22539" class="Function">Lift-Alg</a> <a id="68482" href="Demos.HSP.html#68199" class="Bound">ùë®</a> <a id="68484" href="Demos.HSP.html#68124" class="Function">Œπ</a> <a id="68486" href="Demos.HSP.html#68124" class="Function">Œπ</a><a id="68487" class="Symbol">)</a> <a id="68489" href="Demos.HSP.html#68291" class="Function">epiFlA</a>

  <a id="68499" href="Demos.HSP.html#68499" class="Function">Aim</a> <a id="68503" class="Symbol">:</a> <a id="68505" href="Demos.HSP.html#68199" class="Bound">ùë®</a> <a id="68507" href="Demos.HSP.html#35052" class="Function Operator">IsHomImageOf</a> <a id="68520" href="Demos.HSP.html#59216" class="Function Operator">ùîΩ[</a> <a id="68523" href="Demos.HSP.html#19459" class="Function Operator">ùïå[</a> <a id="68526" href="Demos.HSP.html#68199" class="Bound">ùë®</a> <a id="68528" href="Demos.HSP.html#19459" class="Function Operator">]</a> <a id="68530" href="Demos.HSP.html#59216" class="Function Operator">]</a>
  <a id="68534" href="Demos.HSP.html#68499" class="Function">Aim</a> <a id="68538" class="Symbol">=</a> <a id="68540" href="Demos.HSP.html#29201" class="Function">‚àò-hom</a> <a id="68546" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a> <a id="68548" href="Demos.HSP.html#68398" class="Function">œÜ</a> <a id="68550" href="Demos.HSP.html#8264" class="Function Operator">‚à£</a><a id="68551" class="Symbol">(</a><a id="68552" href="Demos.HSP.html#33111" class="Field">from</a> <a id="68557" href="Demos.HSP.html#37413" class="Function">Lift-‚âÖ</a><a id="68563" class="Symbol">)</a><a id="68564" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="68566" href="Demos.HSP.html#13243" class="Function">‚àò-IsSurjective</a> <a id="68581" class="Symbol">_</a> <a id="68583" class="Symbol">_</a> <a id="68585" href="Demos.HSP.html#8301" class="Function Operator">‚à•</a> <a id="68587" href="Demos.HSP.html#68398" class="Function">œÜ</a> <a id="68589" href="Demos.HSP.html#8301" class="Function Operator">‚à•</a><a id="68590" class="Symbol">(</a><a id="68591" href="Demos.HSP.html#33535" class="Function">fromIsSurjective</a><a id="68607" class="Symbol">(</a><a id="68608" href="Demos.HSP.html#37413" class="Function">Lift-‚âÖ</a><a id="68614" class="Symbol">{</a><a id="68615" class="Argument">ùë®</a> <a id="68617" class="Symbol">=</a> <a id="68619" href="Demos.HSP.html#68199" class="Bound">ùë®</a><a id="68620" class="Symbol">}))</a>

</pre>
By `ModTh-closure` and `Var‚áíEqCl`, we have `V ùí¶ = Mod (Th (V ùí¶))` for every class `ùí¶` of `ùëÜ`-algebras.
Thus, every variety is an equational class.

This completes the formal proof of Birkhoff's variety theorem. ‚àé

Discussion {#sec:discuss}
==========

How do we differ from the classical, set-theoretic approach? Most noticeable is our avoidance of all *size* issues. By using universe levels and level polymorphism, we always make sure we are in a *large enough* universe. So we can easily talk about "all algebras such that..." because these are always taken from a bounded (but arbitrary) universe.

Our use of setoids introduces nothing new: all the equivalence relations we use were already present in the classical proofs. The only "new" material is that we have to prove that functions respect those equivalences.

Our first attempt to formalize Birkhoff's theorem was not sufficiently careful in its handling of variable symbols `X`. Specifically, this type was unconstrained; it is meant to represent the informal notion of a "sufficiently large" collection of variable symbols. Consequently, we postulated surjections from `X` onto the domains of all algebras in the class under consideration. But then, given a signature `ùë∫` and a one-element `ùëÜ`-algebra `ùë®`, by choosing `X` to be the empty type `‚ä•`, our surjectivity postulate gives a map from `‚ä•` onto the singleton domain of `ùë®`. (For details, see the [Demos.ContraX](https://github.com/ualib/agda-algebras/blob/master/src/Demos/ContraX.lagda) module which constructs the counterexample in [Agda][].)

Related work
============

There have been a number of efforts to formalize parts of universal algebra in type theory besides ours. The Coq proof assistant, based on the Calculus of Inductive Constructions, was used by Capretta, in¬†[@Capretta:1999], and Spitters and Van der Weegen, in¬†[@Spitters:2011], to formalized the basics of universal algebra and some classical algebraic structures. In¬†[@Gunther:2018] Gunther et al developed what seemed (prior to the library) the most extensive libraryof formalized universal algebra to date. Like ,¬†[@Gunther:2018] is based on dependent type theory, is programmed in , and goes beyond the basic isomorphism theorems to include some equational logic. Although their coverage is less extensive than that of , Gunther et al do treat *multi-sorted* algebras, whereas is currently limited to single-sorted structures.

As noted by Abel¬†[@Abel:2021], Amato et al, in [@Amato:2021], have formalized multi-sorted algebras with finitary operators in UniMath. The restriction to finitary operations was due to limitations of the UniMath type theory, which does not have W-types nor user-defined inductive types. Abel also notes that Lynge and Spitters, in¬†[@Lynge:2019], formalize multi-sorted algebras with finitary operators in *Homotopy type theory* ([@HoTT]) using Coq. HoTT's higher inductive types enable them to define quotients as types, without the need for setoids. Lynge and Spitters prove three isomorphism theorems concerning subalgebras and quotient algebras, but do not formalize universal algebras nor varieties. Finally, in¬†[@Abel:2021], Abel gives a new formal proof of the soundness and completeness theorem for multi-sorted algebraic structures.


Footnotes
=========

[^1]: An alternative formalization based on classical set-theory was achieved in¬†[@birkhoff-in-mizar:1999].

[^2]: See the [[Birkhoff.lagda]{.sans-serif}](https://github.com/ualib/ualib.github.io/blob/71f173858701398d56224dd79d152c380c0c2b5e/src/lagda/UALib/Birkhoff.lagda) file in the [[ualib/ualib.gitlab.io]{.sans-serif}](https://github.com/ualib/ualib.github.io) repository ([15 Jan 2021 commit 71f1738](https://github.com/ualib/ualib.github.io/commit/71f173858701398d56224dd79d152c380c0c2b5e))¬†[@ualib_v1.0.0].

[^3]: [[src/Demos/HSP.lagda]{.sans-serif}](https://github.com/ualib/agda-algebras/blob/master/src/Demos/HSP.lagda) in the [agda-algebras][] repository: [[github.com/ualib/agda-algebras]{.sans-serif}](https://github.com/ualib/agda-algebras).

[^4]: the axiom asserting that two point-wise equal functions are equal

[^5]: All submodules of the module in the library are also fully constructive in this sense.

[^6]: The code in this paragraph was suggested by an anonymous referee.

[^7]: `suc ‚Ñì` denotes the successor of `‚Ñì` in the universe hierarchy.

[^8]: The definition of was provided by an anonymous referee; it is indeed simpler than trying to apply the general `HomFactor` theorem found in the [agda-algebras][] library.

[^9]: Some authors reserve the term for a *deductively closed* set of equations, that is, a set of equations that is closed under entailment.

[^10]: The proof we present here is based on¬†[@Bergman:2012 Theorem 4.41].

[^11]: Informally, this is done by assuming `X` has cardinality at least `max(| ùïå[ ùë® ] |, œâ)`. Later we will see how to construct an `X` with the required property in type theory.

[^12]: `‚ü¶ ùë® ‚üß t` denotes the interpretation of the term `t` in the algebra `ùë®`.
