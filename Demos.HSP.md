---
layout: default
title : "Demos/HSP" (The Agda Universal Algebra Library)"
date : "2022-05-26"
author: "the agda-algebras development team"
output: html_document
bibliography: ualib_refs.bib
---


## <a id="introduction">Introduction</a>

The Agda Universal Algebra Library ([agda-algebras][]) formalizes the foundations of universal
algebra in intensional Martin-L√∂f type theory ([MLTT][]) using [Agda][] [@Norell:2007; @agdaref].
The library includes a collection of definitions and verified theorems originated in classical
(set-theory based) universal algebra and equational logic, but adapted to [MLTT][].

The first major milestone of the project is a complete formalization of *Birkhoff's variety
theorem* (also known as the *HSP theorem*)¬†[@Birkhoff:1935]. To the best of our knowledge, this
is the first time Birkhoff's celebrated 1935 result has been formalized in [MLTT][].[^1]

Our first attempt to formalize Birkhoff's theorem suffered from two flaws.[^2] First, we
assumed function extensionality in [MLTT][]; consequently, it was unclear whether the
formalization was fully constructive. Second, an inconsistency could be contrived by taking the
type `X`, representing an arbitrary collection of variable symbols, to be the two element type
(see ¬ß[7](#sec:discuss) for details). To resolve
these issues, we developed a new formalization of the HSP theorem based on *setoids* and
rewrote much of the [agda-algebras][] library to support this approach. This enabled us to
avoid function extensionality altogether. Moreover, the type `X` of variable symbols was
treated with more care using the *context* and *environment* types that Andreas Abel uses
in¬†[@Abel:2021] to formalize Birkhoff's completeness theorem. These design choices are
discussed further in ¬ß[2.2](#setoids)--[2.3](#setoid-functions).

What follows is a self-contained formal proof of the HSP theorem in [Agda][]. This is achieved
by extracting a subset of the library, including only the pieces needed for the proof, into a
single literate file.[^3] For spaces reasons, we elide some inessential parts, but strive to
preserve the essential content and character of the development. Specifically, routine or
overly technical components, as well as anything that does not seem to offer insight into the
central ideas of the proof are omitted. (The file [src/Demos/HSP.lagda](https://github.com/ualib/agda-algebras/blob/master/src/Demos/HSP.lagda) mentioned above includes the full proof.)


In this paper, we highlight some of the more challenging aspects of formalizing universal algebra in type theory. To some extent, this is a sobering glimpse of the significant technical hurdles that must be overcome to do mathematics in dependent type theory. Nonetheless, we hope to demonstrate that [MLTT][] is a relatively natural language for formalizing universal algebra. Indeed, we believe that researchers with sufficient patience and resolve can reap the substantial rewards of deeper insight and greater confidence in their results by using type
theory and a proof assistant like [Agda][]. On the other hand, this paper is probably not the best place to learn about the latter, since we assume the reader is already familiar with [MLTT][] and [Agda][]. In summary, our main contribution is to show that a straightforward but very general representation of algebraic structures in dependent type theory is quite practical, as we demonstrate by formalizing a major seminal result of universal algebra.


------------------------------------------------------------------------------

## <a id="preliminaries">Preliminaries</a>


### <a id="logical-foundations">Logical foundations</a>

To best emulate [MLTT][], we use
<pre class="Agda">
<a id="3723" class="Symbol">{-#</a> <a id="3727" class="Keyword">OPTIONS</a> <a id="3735" class="Pragma">--without-K</a> <a id="3747" class="Pragma">--exact-split</a> <a id="3761" class="Pragma">--safe</a> <a id="3768" class="Symbol">#-}</a>
</pre>
Here are brief descriptions of these options, accompanied by links to
related documentation.

*  **without-K** disables [Streicher's K axiom](https://ncatlab.org/nlab/show/axiom+K+%28type+theory%29). See
   the [section on axiom K](https://agda.readthedocs.io/en/v2.6.1/language/without-k.html) in the [Agda Language Reference Manual](https://agda.readthedocs.io/en/v2.6.1.3/language)¬†[@agdaref-axiomk].

*  **exact-split** directs [Agda][] to accept only definitions behaving like *judgmental* equalities. See the [Pattern matching and equality](https://agda.readthedocs.io/en/v2.6.1/tools/command-line-options.html#pattern-matching-and-equality) section of the [Agda Tools](https://agda.readthedocs.io/en/v2.6.1.3/tools/) documentation¬†[@agdatools-patternmatching].

*  **safe** ensures that nothing is postulated outright---every non-axiom has to be an explicit assumption (e.g., an argument to a function or module). See the [cmdoption-safe](https://agda.readthedocs.io/en/v2.6.1/tools/command-line-options.html#cmdoption-safe) section of¬†[@agdaref-safeagda].

We also make use of the following definitions from [Agda][]'s standard library (ver.¬†1.7).

<pre class="Agda">
<a id="4953" class="Comment">-- Import universe levels and Signature type (described below) from the agda-algebras library.</a>
<a id="5048" class="Keyword">open</a> <a id="5053" class="Keyword">import</a> <a id="5060" href="Base.Algebras.Basic.html" class="Module">Base.Algebras.Basic</a> <a id="5080" class="Keyword">using</a> <a id="5086" class="Symbol">(</a> <a id="5088" href="Base.Algebras.Basic.html#1162" class="Generalizable">ùìû</a> <a id="5090" class="Symbol">;</a> <a id="5092" href="Base.Algebras.Basic.html#1164" class="Generalizable">ùì•</a> <a id="5094" class="Symbol">;</a> <a id="5096" href="Base.Algebras.Basic.html#3890" class="Function">Signature</a> <a id="5106" class="Symbol">)</a>
<a id="5108" class="Keyword">module</a> <a id="5115" href="Demos.HSP.html" class="Module">Demos.HSP</a> <a id="5125" class="Symbol">{</a><a id="5126" href="Demos.HSP.html#5126" class="Bound">ùëÜ</a> <a id="5128" class="Symbol">:</a> <a id="5130" href="Base.Algebras.Basic.html#3890" class="Function">Signature</a> <a id="5140" href="Base.Algebras.Basic.html#1162" class="Generalizable">ùìû</a> <a id="5142" href="Base.Algebras.Basic.html#1164" class="Generalizable">ùì•</a><a id="5143" class="Symbol">}</a> <a id="5145" class="Keyword">where</a>

<a id="5152" class="Comment">-- Import 16 definitions from the Agda Standard Library.</a>
<a id="5209" class="Keyword">open</a> <a id="5214" class="Keyword">import</a>  <a id="5222" href="Data.Unit.Polymorphic.html" class="Module">Data.Unit.Polymorphic</a>        <a id="5251" class="Keyword">using</a> <a id="5257" class="Symbol">(</a> <a id="5259" href="Data.Unit.Polymorphic.Base.html#480" class="Function">‚ä§</a> <a id="5261" class="Symbol">;</a> <a id="5263" href="Data.Unit.Polymorphic.Base.html#524" class="Function">tt</a>                                            <a id="5309" class="Symbol">)</a>
<a id="5311" class="Keyword">open</a> <a id="5316" class="Keyword">import</a>  <a id="5324" href="Function.html" class="Module">Function</a>                     <a id="5353" class="Keyword">using</a> <a id="5359" class="Symbol">(</a> <a id="5361" href="Function.Base.html#615" class="Function">id</a> <a id="5364" class="Symbol">;</a> <a id="5366" href="Function.Base.html#1031" class="Function Operator">_‚àò_</a> <a id="5370" class="Symbol">;</a> <a id="5372" href="Function.Base.html#1554" class="Function">flip</a>                                   <a id="5411" class="Symbol">)</a>
<a id="5413" class="Keyword">open</a> <a id="5418" class="Keyword">import</a>  <a id="5426" href="Level.html" class="Module">Level</a>                        <a id="5455" class="Keyword">using</a> <a id="5461" class="Symbol">(</a> <a id="5463" href="Agda.Primitive.html#597" class="Postulate">Level</a>                                             <a id="5513" class="Symbol">)</a>
<a id="5515" class="Keyword">open</a> <a id="5520" class="Keyword">import</a>  <a id="5528" href="Relation.Binary.html" class="Module">Relation.Binary</a>              <a id="5557" class="Keyword">using</a> <a id="5563" class="Symbol">(</a> <a id="5565" href="Relation.Binary.Core.html#882" class="Function">Rel</a> <a id="5569" class="Symbol">;</a> <a id="5571" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="5578" class="Symbol">;</a> <a id="5580" href="Relation.Binary.Structures.html#1522" class="Record">IsEquivalence</a>                      <a id="5615" class="Symbol">)</a>
<a id="5617" class="Keyword">open</a> <a id="5622" class="Keyword">import</a>  <a id="5630" href="Relation.Binary.Definitions.html" class="Module">Relation.Binary.Definitions</a>  <a id="5659" class="Keyword">using</a> <a id="5665" class="Symbol">(</a> <a id="5667" href="Relation.Binary.Definitions.html#1339" class="Function">Reflexive</a> <a id="5677" class="Symbol">;</a> <a id="5679" href="Relation.Binary.Definitions.html#1498" class="Function">Symmetric</a> <a id="5689" class="Symbol">;</a> <a id="5691" href="Relation.Binary.Definitions.html#1978" class="Function">Transitive</a> <a id="5702" class="Symbol">;</a> <a id="5704" href="Relation.Binary.Definitions.html#1424" class="Function">Sym</a> <a id="5708" class="Symbol">;</a> <a id="5710" href="Relation.Binary.Definitions.html#1585" class="Function">Trans</a>  <a id="5717" class="Symbol">)</a>
<a id="5719" class="Keyword">open</a> <a id="5724" class="Keyword">import</a>  <a id="5732" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a>  <a id="5771" class="Keyword">using</a> <a id="5777" class="Symbol">(</a> <a id="5779" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">_‚â°_</a>                                     <a id="5819" class="Symbol">)</a>
<a id="5821" class="Keyword">open</a> <a id="5826" class="Keyword">import</a>  <a id="5834" href="Relation.Unary.html" class="Module">Relation.Unary</a>               <a id="5863" class="Keyword">using</a> <a id="5869" class="Symbol">(</a> <a id="5871" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="5876" class="Symbol">;</a> <a id="5878" href="Relation.Unary.html#1742" class="Function Operator">_‚äÜ_</a> <a id="5882" class="Symbol">;</a> <a id="5884" href="Relation.Unary.html#1523" class="Function Operator">_‚àà_</a>                                  <a id="5921" class="Symbol">)</a>

<a id="5924" class="Comment">-- -- Import 23 definitions from the Agda Standard Library and rename 12 of them.</a>
<a id="6006" class="Keyword">open</a> <a id="6011" class="Keyword">import</a>  <a id="6019" href="Agda.Primitive.html" class="Module">Agda.Primitive</a>  <a id="6035" class="Keyword">renaming</a>  <a id="6045" class="Symbol">(</a> <a id="6047" href="Agda.Primitive.html#326" class="Primitive">Set</a>    <a id="6054" class="Symbol">to</a> <a id="6057" class="Primitive">Type</a>    <a id="6065" class="Symbol">)</a>  <a id="6068" class="Keyword">using</a>  <a id="6075" class="Symbol">(</a> <a id="6077" href="Agda.Primitive.html#810" class="Primitive Operator">_‚äî_</a> <a id="6081" class="Symbol">;</a> <a id="6083" href="Agda.Primitive.html#780" class="Primitive">lsuc</a>                   <a id="6106" class="Symbol">)</a>
<a id="6108" class="Keyword">open</a> <a id="6113" class="Keyword">import</a>  <a id="6121" href="Data.Product.html" class="Module">Data.Product</a>    <a id="6137" class="Keyword">renaming</a>  <a id="6147" class="Symbol">(</a> <a id="6149" href="Agda.Builtin.Sigma.html#252" class="Field">proj‚ÇÅ</a>  <a id="6156" class="Symbol">to</a> <a id="6159" class="Field">fst</a>     <a id="6167" class="Symbol">)</a>  <a id="6170" class="Keyword">using</a>  <a id="6177" class="Symbol">(</a> <a id="6179" href="Data.Product.html#1167" class="Function Operator">_√ó_</a> <a id="6183" class="Symbol">;</a> <a id="6185" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">_,_</a> <a id="6189" class="Symbol">;</a> <a id="6191" href="Agda.Builtin.Sigma.html#166" class="Record">Œ£</a> <a id="6193" class="Symbol">;</a> <a id="6195" href="Data.Product.html#916" class="Function">Œ£-syntax</a>     <a id="6208" class="Symbol">)</a>
                             <a id="6239" class="Keyword">renaming</a>  <a id="6249" class="Symbol">(</a> <a id="6251" href="Agda.Builtin.Sigma.html#264" class="Field">proj‚ÇÇ</a>  <a id="6258" class="Symbol">to</a> <a id="6261" class="Field">snd</a>     <a id="6269" class="Symbol">)</a>
<a id="6271" class="Keyword">open</a> <a id="6276" class="Keyword">import</a>  <a id="6284" href="Function.html" class="Module">Function</a>        <a id="6300" class="Keyword">renaming</a>  <a id="6310" class="Symbol">(</a> <a id="6312" href="Function.Bundles.html#1868" class="Record">Func</a>   <a id="6319" class="Symbol">to</a> <a id="6322" class="Record">_‚ü∂_</a>     <a id="6330" class="Symbol">)</a>  <a id="6333" class="Keyword">using</a>  <a id="6340" class="Symbol">(</a>                              <a id="6371" class="Symbol">)</a>
<a id="6373" class="Keyword">open</a>         <a id="6386" href="Demos.HSP.html#6322" class="Module">_‚ü∂_</a>             <a id="6402" class="Keyword">renaming</a>  <a id="6412" class="Symbol">(</a> <a id="6414" href="Function.Bundles.html#1919" class="Field">f</a>      <a id="6421" class="Symbol">to</a> <a id="6424" class="Field">_‚ü®$‚ü©_</a>   <a id="6432" class="Symbol">)</a>  <a id="6435" class="Keyword">using</a>  <a id="6442" class="Symbol">(</a> <a id="6444" href="Function.Bundles.html#1938" class="Field">cong</a>                         <a id="6473" class="Symbol">)</a>
<a id="6475" class="Keyword">open</a>         <a id="6488" href="Relation.Binary.Structures.html#1522" class="Module">IsEquivalence</a>   <a id="6504" class="Keyword">renaming</a>  <a id="6514" class="Symbol">(</a> <a id="6516" href="Relation.Binary.Structures.html#1568" class="Field">refl</a>   <a id="6523" class="Symbol">to</a> <a id="6526" class="Field">refl·µâ</a>   <a id="6534" class="Symbol">)</a>
                             <a id="6565" class="Keyword">renaming</a>  <a id="6575" class="Symbol">(</a> <a id="6577" href="Relation.Binary.Structures.html#1594" class="Field">sym</a>    <a id="6584" class="Symbol">to</a> <a id="6587" class="Field">sym·µâ</a>    <a id="6595" class="Symbol">)</a>
                             <a id="6626" class="Keyword">renaming</a>  <a id="6636" class="Symbol">(</a> <a id="6638" href="Relation.Binary.Structures.html#1620" class="Field">trans</a>  <a id="6645" class="Symbol">to</a> <a id="6648" class="Field">trans·µâ</a>  <a id="6656" class="Symbol">)</a>  <a id="6659" class="Keyword">using</a>  <a id="6666" class="Symbol">(</a>                              <a id="6697" class="Symbol">)</a>
<a id="6699" class="Keyword">open</a>         <a id="6712" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a>          <a id="6728" class="Keyword">renaming</a>  <a id="6738" class="Symbol">(</a> <a id="6740" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>   <a id="6747" class="Symbol">to</a> <a id="6750" class="Function">reflÀ¢</a>   <a id="6758" class="Symbol">)</a>
                             <a id="6789" class="Keyword">renaming</a>  <a id="6799" class="Symbol">(</a> <a id="6801" href="Relation.Binary.Structures.html#1594" class="Function">sym</a>    <a id="6808" class="Symbol">to</a> <a id="6811" class="Function">symÀ¢</a>    <a id="6819" class="Symbol">)</a>
                             <a id="6850" class="Keyword">renaming</a>  <a id="6860" class="Symbol">(</a> <a id="6862" href="Relation.Binary.Structures.html#1620" class="Function">trans</a>  <a id="6869" class="Symbol">to</a> <a id="6872" class="Function">transÀ¢</a>  <a id="6880" class="Symbol">)</a>
                             <a id="6911" class="Keyword">renaming</a>  <a id="6921" class="Symbol">(</a> <a id="6923" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="6927" class="Symbol">to</a> <a id="6930" class="Field Operator">_‚âàÀ¢_</a>       <a id="6941" class="Symbol">)</a>  <a id="6944" class="Keyword">using</a>  <a id="6951" class="Symbol">(</a> <a id="6953" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a>  <a id="6962" class="Symbol">;</a> <a id="6964" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a>     <a id="6982" class="Symbol">)</a>

<a id="6985" class="Comment">-- Assign handles to 3 modules of the Agda Standard Library.</a>
<a id="7046" class="Keyword">import</a>       <a id="7059" href="Function.Definitions.html" class="Module">Function.Definitions</a>                   <a id="7098" class="Symbol">as</a>   <a id="7103" class="Module">FD</a>
<a id="7106" class="Keyword">import</a>       <a id="7119" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a>  <a id="7158" class="Symbol">as</a>   <a id="7163" class="Module">‚â°</a>
<a id="7165" class="Keyword">import</a>       <a id="7178" href="Relation.Binary.Reasoning.Setoid.html" class="Module">Relation.Binary.Reasoning.Setoid</a>       <a id="7217" class="Symbol">as</a>   <a id="7222" class="Module">SetoidReasoning</a>

<a id="7239" class="Keyword">private</a> <a id="7247" class="Keyword">variable</a> <a id="7256" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="7258" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a> <a id="7261" href="Demos.HSP.html#7261" class="Generalizable">Œ≤</a> <a id="7263" href="Demos.HSP.html#7263" class="Generalizable">œÅ·µá</a> <a id="7266" href="Demos.HSP.html#7266" class="Generalizable">Œ≥</a> <a id="7268" href="Demos.HSP.html#7268" class="Generalizable">œÅ·∂ú</a> <a id="7271" href="Demos.HSP.html#7271" class="Generalizable">Œ¥</a> <a id="7273" href="Demos.HSP.html#7273" class="Generalizable">œÅ·µà</a> <a id="7276" href="Demos.HSP.html#7276" class="Generalizable">œÅ</a> <a id="7278" href="Demos.HSP.html#7278" class="Generalizable">œá</a> <a id="7280" href="Demos.HSP.html#7280" class="Generalizable">‚Ñì</a> <a id="7282" class="Symbol">:</a> <a id="7284" href="Agda.Primitive.html#597" class="Postulate">Level</a> <a id="7290" class="Symbol">;</a>       <a id="7298" href="Demos.HSP.html#7298" class="Generalizable">Œì</a> <a id="7300" href="Demos.HSP.html#7300" class="Generalizable">Œî</a> <a id="7302" class="Symbol">:</a> <a id="7304" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="7309" href="Demos.HSP.html#7278" class="Generalizable">œá</a>

</pre>

The above imports include some adjustments to "standard" [Agda][] syntax; in particular, we use `Type` in place of `Set`, the infix long arrow symbol, `_‚ü∂_`, in place of `Func` (the type of "setoid functions," discussed in
¬ß[2.3](#setoid-functions) below), and the symbol `_‚ü®$‚ü©_` in place of `f` (application of the map of a setoid function); we use `fst` and `snd`, and sometimes `‚à£_‚à£` and `‚à•_‚à•`, to denote the first and second projections out of the product type `_√ó_`.

<pre class="Agda">
<a id="7810" class="Keyword">module</a> <a id="7817" href="Demos.HSP.html#7817" class="Module">_</a> <a id="7819" class="Symbol">{</a><a id="7820" href="Demos.HSP.html#7820" class="Bound">A</a> <a id="7822" class="Symbol">:</a> <a id="7824" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="7829" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="7831" class="Symbol">}{</a><a id="7833" href="Demos.HSP.html#7833" class="Bound">B</a> <a id="7835" class="Symbol">:</a> <a id="7837" href="Demos.HSP.html#7820" class="Bound">A</a> <a id="7839" class="Symbol">‚Üí</a> <a id="7841" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="7846" href="Demos.HSP.html#7261" class="Generalizable">Œ≤</a><a id="7847" class="Symbol">}</a> <a id="7849" class="Keyword">where</a>
 <a id="7856" href="Demos.HSP.html#7856" class="Function Operator">‚à£_‚à£</a> <a id="7860" class="Symbol">:</a> <a id="7862" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="7865" href="Demos.HSP.html#7865" class="Bound">x</a> <a id="7867" href="Data.Product.html#916" class="Function">‚àà</a> <a id="7869" href="Demos.HSP.html#7820" class="Bound">A</a> <a id="7871" href="Data.Product.html#916" class="Function">]</a> <a id="7873" href="Demos.HSP.html#7833" class="Bound">B</a> <a id="7875" href="Demos.HSP.html#7865" class="Bound">x</a> <a id="7877" class="Symbol">‚Üí</a> <a id="7879" href="Demos.HSP.html#7820" class="Bound">A</a>
 <a id="7882" href="Demos.HSP.html#7856" class="Function Operator">‚à£_‚à£</a> <a id="7886" class="Symbol">=</a> <a id="7888" href="Demos.HSP.html#6159" class="Field">fst</a>
 <a id="7893" href="Demos.HSP.html#7893" class="Function Operator">‚à•_‚à•</a> <a id="7897" class="Symbol">:</a> <a id="7899" class="Symbol">(</a><a id="7900" href="Demos.HSP.html#7900" class="Bound">z</a> <a id="7902" class="Symbol">:</a> <a id="7904" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="7907" href="Demos.HSP.html#7907" class="Bound">a</a> <a id="7909" href="Data.Product.html#916" class="Function">‚àà</a> <a id="7911" href="Demos.HSP.html#7820" class="Bound">A</a> <a id="7913" href="Data.Product.html#916" class="Function">]</a> <a id="7915" href="Demos.HSP.html#7833" class="Bound">B</a> <a id="7917" href="Demos.HSP.html#7907" class="Bound">a</a><a id="7918" class="Symbol">)</a> <a id="7920" class="Symbol">‚Üí</a> <a id="7922" href="Demos.HSP.html#7833" class="Bound">B</a> <a id="7924" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="7926" href="Demos.HSP.html#7900" class="Bound">z</a> <a id="7928" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a>
 <a id="7931" href="Demos.HSP.html#7893" class="Function Operator">‚à•_‚à•</a> <a id="7935" class="Symbol">=</a> <a id="7937" href="Demos.HSP.html#6261" class="Field">snd</a>
</pre>


### <a id="setoids">Setoids</a>

A *setoid* is a pair consisting of a type and an equivalence relation on that type. Setoids are useful for representing a set with an explicit, "local" notion of equivalence, instead of relying on an implicit, "global" one as is more common in set theory. In reality, informal mathematical practice relies on equivalence relations quite pervasively, taking great care to define only functions that preserve equivalences, while eliding the details. To be properly formal, such details must be made explicit. While there are many different workable approaches, the one that requires no additional meta-theory is based on setoids, which is why we adopt it here. While in some settings setoids are found by others to be burdensome, we have not found them to be so for universal algebra.

The [agda-algebras][] library was first developed without setoids, relying on propositional equality instead, along with some experimental, domain-specific types for equivalence classes, quotients, etc. This
required postulating function extensionality,[^4] which is known to be independent from [MLTT][]¬†[@MHE; @MHE:2019]; this was unsatisfactory as we aimed to show that the theorems hold directly in [MLTT][] without extra axioms. The present work makes no appeal to functional extensionality or classical axioms like Choice or Excluded Middle.[^5]


### <a id="setoid-functions">Setoid functions</a>


A *setoid function* is a function from one setoid to another that respects the underlying equivalences. If `ùë®` and `ùë©` are setoids, we use `ùë® ‚ü∂ ùë©` to denote the type of setoid functions from `ùë®` to `ùë©`.

An example of a setoid function is the identity function from a setoid to itself. We define it, along with a binary composition operation for setoid functions, `_‚ü®‚àò‚ü©_`, as follows.

<pre class="Agda">

<a id="ùëñùëë"></a><a id="9777" href="Demos.HSP.html#9777" class="Function">ùëñùëë</a> <a id="9780" class="Symbol">:</a> <a id="9782" class="Symbol">{</a><a id="9783" href="Demos.HSP.html#9783" class="Bound">A</a> <a id="9785" class="Symbol">:</a> <a id="9787" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="9794" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="9796" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a><a id="9798" class="Symbol">}</a> <a id="9800" class="Symbol">‚Üí</a> <a id="9802" href="Demos.HSP.html#9783" class="Bound">A</a> <a id="9804" href="Demos.HSP.html#6322" class="Record Operator">‚ü∂</a> <a id="9806" href="Demos.HSP.html#9783" class="Bound">A</a>
<a id="9808" href="Demos.HSP.html#9777" class="Function">ùëñùëë</a> <a id="9811" class="Symbol">{</a><a id="9812" href="Demos.HSP.html#9812" class="Bound">A</a><a id="9813" class="Symbol">}</a> <a id="9815" class="Symbol">=</a> <a id="9817" class="Keyword">record</a> <a id="9824" class="Symbol">{</a> <a id="9826" href="Function.Bundles.html#1919" class="Field">f</a> <a id="9828" class="Symbol">=</a> <a id="9830" href="Function.Base.html#615" class="Function">id</a> <a id="9833" class="Symbol">;</a> <a id="9835" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="9840" class="Symbol">=</a> <a id="9842" href="Function.Base.html#615" class="Function">id</a> <a id="9845" class="Symbol">}</a>

<a id="_‚ü®‚àò‚ü©_"></a><a id="9848" href="Demos.HSP.html#9848" class="Function Operator">_‚ü®‚àò‚ü©_</a> <a id="9854" class="Symbol">:</a>  <a id="9857" class="Symbol">{</a><a id="9858" href="Demos.HSP.html#9858" class="Bound">A</a> <a id="9860" class="Symbol">:</a> <a id="9862" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="9869" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="9871" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a><a id="9873" class="Symbol">}</a> <a id="9875" class="Symbol">{</a><a id="9876" href="Demos.HSP.html#9876" class="Bound">B</a> <a id="9878" class="Symbol">:</a> <a id="9880" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="9887" href="Demos.HSP.html#7261" class="Generalizable">Œ≤</a> <a id="9889" href="Demos.HSP.html#7263" class="Generalizable">œÅ·µá</a><a id="9891" class="Symbol">}</a> <a id="9893" class="Symbol">{</a><a id="9894" href="Demos.HSP.html#9894" class="Bound">C</a> <a id="9896" class="Symbol">:</a> <a id="9898" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="9905" href="Demos.HSP.html#7266" class="Generalizable">Œ≥</a> <a id="9907" href="Demos.HSP.html#7268" class="Generalizable">œÅ·∂ú</a><a id="9909" class="Symbol">}</a>
 <a id="9912" class="Symbol">‚Üí</a>       <a id="9920" href="Demos.HSP.html#9876" class="Bound">B</a> <a id="9922" href="Demos.HSP.html#6322" class="Record Operator">‚ü∂</a> <a id="9924" href="Demos.HSP.html#9894" class="Bound">C</a>  <a id="9927" class="Symbol">‚Üí</a>  <a id="9930" href="Demos.HSP.html#9858" class="Bound">A</a> <a id="9932" href="Demos.HSP.html#6322" class="Record Operator">‚ü∂</a> <a id="9934" href="Demos.HSP.html#9876" class="Bound">B</a>  <a id="9937" class="Symbol">‚Üí</a>  <a id="9940" href="Demos.HSP.html#9858" class="Bound">A</a> <a id="9942" href="Demos.HSP.html#6322" class="Record Operator">‚ü∂</a> <a id="9944" href="Demos.HSP.html#9894" class="Bound">C</a>

<a id="9947" href="Demos.HSP.html#9947" class="Bound">f</a> <a id="9949" href="Demos.HSP.html#9848" class="Function Operator">‚ü®‚àò‚ü©</a> <a id="9953" href="Demos.HSP.html#9953" class="Bound">g</a> <a id="9955" class="Symbol">=</a> <a id="9957" class="Keyword">record</a>  <a id="9965" class="Symbol">{</a> <a id="9967" href="Function.Bundles.html#1919" class="Field">f</a> <a id="9969" class="Symbol">=</a> <a id="9971" class="Symbol">(</a><a id="9972" href="Demos.HSP.html#6424" class="Field Operator">_‚ü®$‚ü©_</a> <a id="9978" href="Demos.HSP.html#9947" class="Bound">f</a><a id="9979" class="Symbol">)</a> <a id="9981" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="9983" class="Symbol">(</a><a id="9984" href="Demos.HSP.html#6424" class="Field Operator">_‚ü®$‚ü©_</a> <a id="9990" href="Demos.HSP.html#9953" class="Bound">g</a><a id="9991" class="Symbol">)</a>
                  <a id="10011" class="Symbol">;</a> <a id="10013" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="10018" class="Symbol">=</a> <a id="10020" class="Symbol">(</a><a id="10021" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="10026" href="Demos.HSP.html#9947" class="Bound">f</a><a id="10027" class="Symbol">)</a> <a id="10029" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="10031" class="Symbol">(</a><a id="10032" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="10037" href="Demos.HSP.html#9953" class="Bound">g</a><a id="10038" class="Symbol">)</a> <a id="10040" class="Symbol">}</a>
</pre>


### <a id="inverses">Inverses</a>

We define the *inverse* of a setoid function in terms of the image of the function's domain, as follows.

<pre class="Agda">

<a id="10210" class="Keyword">module</a> <a id="10217" href="Demos.HSP.html#10217" class="Module">_</a> <a id="10219" class="Symbol">{</a><a id="10220" href="Demos.HSP.html#10220" class="Bound">ùë®</a> <a id="10222" class="Symbol">:</a> <a id="10224" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="10231" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="10233" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a><a id="10235" class="Symbol">}{</a><a id="10237" href="Demos.HSP.html#10237" class="Bound">ùë©</a> <a id="10239" class="Symbol">:</a> <a id="10241" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="10248" href="Demos.HSP.html#7261" class="Generalizable">Œ≤</a> <a id="10250" href="Demos.HSP.html#7263" class="Generalizable">œÅ·µá</a><a id="10252" class="Symbol">}</a> <a id="10254" class="Keyword">where</a>
 <a id="10261" class="Keyword">open</a> <a id="10266" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="10273" href="Demos.HSP.html#10237" class="Bound">ùë©</a> <a id="10275" class="Keyword">using</a> <a id="10281" class="Symbol">(</a> <a id="10283" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="10287" class="Symbol">;</a> <a id="10289" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="10293" class="Symbol">)</a> <a id="10295" class="Keyword">renaming</a> <a id="10304" class="Symbol">(</a> <a id="10306" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="10314" class="Symbol">to</a> <a id="10317" class="Field">B</a> <a id="10319" class="Symbol">)</a>

 <a id="10323" class="Keyword">data</a> <a id="10328" href="Demos.HSP.html#10328" class="Datatype Operator">Image_‚àã_</a> <a id="10337" class="Symbol">(</a><a id="10338" href="Demos.HSP.html#10338" class="Bound">f</a> <a id="10340" class="Symbol">:</a> <a id="10342" href="Demos.HSP.html#10220" class="Bound">ùë®</a> <a id="10344" href="Demos.HSP.html#6322" class="Record Operator">‚ü∂</a> <a id="10346" href="Demos.HSP.html#10237" class="Bound">ùë©</a><a id="10347" class="Symbol">)</a> <a id="10349" class="Symbol">:</a> <a id="10351" href="Demos.HSP.html#10317" class="Field">B</a> <a id="10353" class="Symbol">‚Üí</a> <a id="10355" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="10360" class="Symbol">(</a><a id="10361" href="Demos.HSP.html#10231" class="Bound">Œ±</a> <a id="10363" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="10365" href="Demos.HSP.html#10248" class="Bound">Œ≤</a> <a id="10367" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="10369" href="Demos.HSP.html#10250" class="Bound">œÅ·µá</a><a id="10371" class="Symbol">)</a> <a id="10373" class="Keyword">where</a>
  <a id="10381" href="Demos.HSP.html#10381" class="InductiveConstructor">eq</a> <a id="10384" class="Symbol">:</a> <a id="10386" class="Symbol">{</a><a id="10387" href="Demos.HSP.html#10387" class="Bound">b</a> <a id="10389" class="Symbol">:</a> <a id="10391" href="Demos.HSP.html#10317" class="Field">B</a><a id="10392" class="Symbol">}</a> <a id="10394" class="Symbol">‚Üí</a> <a id="10396" class="Symbol">‚àÄ</a> <a id="10398" href="Demos.HSP.html#10398" class="Bound">a</a> <a id="10400" class="Symbol">‚Üí</a> <a id="10402" href="Demos.HSP.html#10387" class="Bound">b</a> <a id="10404" href="Relation.Binary.Bundles.html#1098" class="Field Operator">‚âà</a> <a id="10406" href="Demos.HSP.html#10338" class="Bound">f</a> <a id="10408" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="10412" href="Demos.HSP.html#10398" class="Bound">a</a> <a id="10414" class="Symbol">‚Üí</a> <a id="10416" href="Demos.HSP.html#10328" class="Datatype Operator">Image</a> <a id="10422" href="Demos.HSP.html#10338" class="Bound">f</a> <a id="10424" href="Demos.HSP.html#10328" class="Datatype Operator">‚àã</a> <a id="10426" href="Demos.HSP.html#10387" class="Bound">b</a>

</pre>

An inhabitant of the `Image f ‚àã b` type is a point `a : Carrier ùë®`, along with a proof `p : b ‚âà f a`, that `f` maps `a` to `b`. Since a proof of `Image f ‚àã b` must include a concrete witness `a : Carrier ùë®`, we can actually *compute* a range-restricted right-inverse of `f`. Here is the definition of `Inv` which, for extra
certainty, is accompanied by a proof that it gives such a right-inverse.

<pre class="Agda">

 <a id="10854" href="Demos.HSP.html#10854" class="Function">Inv</a> <a id="10858" class="Symbol">:</a> <a id="10860" class="Symbol">(</a><a id="10861" href="Demos.HSP.html#10861" class="Bound">f</a> <a id="10863" class="Symbol">:</a> <a id="10865" href="Demos.HSP.html#10220" class="Bound">ùë®</a> <a id="10867" href="Demos.HSP.html#6322" class="Record Operator">‚ü∂</a> <a id="10869" href="Demos.HSP.html#10237" class="Bound">ùë©</a><a id="10870" class="Symbol">){</a><a id="10872" href="Demos.HSP.html#10872" class="Bound">b</a> <a id="10874" class="Symbol">:</a> <a id="10876" href="Demos.HSP.html#10317" class="Field">B</a><a id="10877" class="Symbol">}</a> <a id="10879" class="Symbol">‚Üí</a> <a id="10881" href="Demos.HSP.html#10328" class="Datatype Operator">Image</a> <a id="10887" href="Demos.HSP.html#10861" class="Bound">f</a> <a id="10889" href="Demos.HSP.html#10328" class="Datatype Operator">‚àã</a> <a id="10891" href="Demos.HSP.html#10872" class="Bound">b</a> <a id="10893" class="Symbol">‚Üí</a> <a id="10895" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="10903" href="Demos.HSP.html#10220" class="Bound">ùë®</a>
 <a id="10906" href="Demos.HSP.html#10854" class="Function">Inv</a> <a id="10910" class="Symbol">_</a> <a id="10912" class="Symbol">(</a><a id="10913" href="Demos.HSP.html#10381" class="InductiveConstructor">eq</a> <a id="10916" href="Demos.HSP.html#10916" class="Bound">a</a> <a id="10918" class="Symbol">_)</a> <a id="10921" class="Symbol">=</a> <a id="10923" href="Demos.HSP.html#10916" class="Bound">a</a>

 <a id="10927" href="Demos.HSP.html#10927" class="Function">InvIsInverse ≥</a> <a id="10941" class="Symbol">:</a> <a id="10943" class="Symbol">{</a><a id="10944" href="Demos.HSP.html#10944" class="Bound">f</a> <a id="10946" class="Symbol">:</a> <a id="10948" href="Demos.HSP.html#10220" class="Bound">ùë®</a> <a id="10950" href="Demos.HSP.html#6322" class="Record Operator">‚ü∂</a> <a id="10952" href="Demos.HSP.html#10237" class="Bound">ùë©</a><a id="10953" class="Symbol">}{</a><a id="10955" href="Demos.HSP.html#10955" class="Bound">b</a> <a id="10957" class="Symbol">:</a> <a id="10959" href="Demos.HSP.html#10317" class="Field">B</a><a id="10960" class="Symbol">}(</a><a id="10962" href="Demos.HSP.html#10962" class="Bound">q</a> <a id="10964" class="Symbol">:</a> <a id="10966" href="Demos.HSP.html#10328" class="Datatype Operator">Image</a> <a id="10972" href="Demos.HSP.html#10944" class="Bound">f</a> <a id="10974" href="Demos.HSP.html#10328" class="Datatype Operator">‚àã</a> <a id="10976" href="Demos.HSP.html#10955" class="Bound">b</a><a id="10977" class="Symbol">)</a> <a id="10979" class="Symbol">‚Üí</a> <a id="10981" href="Demos.HSP.html#10944" class="Bound">f</a> <a id="10983" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="10987" class="Symbol">(</a><a id="10988" href="Demos.HSP.html#10854" class="Function">Inv</a> <a id="10992" href="Demos.HSP.html#10944" class="Bound">f</a> <a id="10994" href="Demos.HSP.html#10962" class="Bound">q</a><a id="10995" class="Symbol">)</a> <a id="10997" href="Relation.Binary.Bundles.html#1098" class="Field Operator">‚âà</a> <a id="10999" href="Demos.HSP.html#10955" class="Bound">b</a>
 <a id="11002" href="Demos.HSP.html#10927" class="Function">InvIsInverse ≥</a> <a id="11016" class="Symbol">(</a><a id="11017" href="Demos.HSP.html#10381" class="InductiveConstructor">eq</a> <a id="11020" class="Symbol">_</a> <a id="11022" href="Demos.HSP.html#11022" class="Bound">p</a><a id="11023" class="Symbol">)</a> <a id="11025" class="Symbol">=</a> <a id="11027" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="11031" href="Demos.HSP.html#11022" class="Bound">p</a>
</pre>


### <a id="injective-and-surjective-setoid-functions">Injective and surjective setoid functions</a>

If `f : ùë® ‚ü∂ ùë©` then we call `f` *injective* provided `‚àÄ(a‚ÇÄ a‚ÇÅ : A)`, `f ‚ü®$‚ü© a‚ÇÄ ‚âà·¥Æ f ‚ü®$‚ü© a‚ÇÅ` implies `a‚ÇÄ ‚âà·¥¨ a‚ÇÅ`; we call `f` *surjective* provided `‚àÄ(b : B) ‚àÉ(a : A)` such that `f ‚ü®$‚ü© a ‚âà·¥Æ b`.

We represent injective functions on bare types by the type `Injective`, and use this to define the `IsInjective` type representing the property of being an injective setoid function. Similarly, the type `IsSurjective`
represents the property of being a surjective setoid function and `SurjInv` represents the *right-inverse* of a surjective function.

We reproduce the definitions and prove some of their properties inside the next submodule where we first set the stage by declaring two setoids `ùë®` and `ùë©` and naming their equality relations.

<pre class="Agda">

<a id="11900" class="Keyword">module</a> <a id="11907" href="Demos.HSP.html#11907" class="Module">_</a> <a id="11909" class="Symbol">{</a><a id="11910" href="Demos.HSP.html#11910" class="Bound">ùë®</a> <a id="11912" class="Symbol">:</a> <a id="11914" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="11921" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="11923" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a><a id="11925" class="Symbol">}{</a><a id="11927" href="Demos.HSP.html#11927" class="Bound">ùë©</a> <a id="11929" class="Symbol">:</a> <a id="11931" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="11938" href="Demos.HSP.html#7261" class="Generalizable">Œ≤</a> <a id="11940" href="Demos.HSP.html#7263" class="Generalizable">œÅ·µá</a><a id="11942" class="Symbol">}</a> <a id="11944" class="Keyword">where</a>
 <a id="11951" class="Keyword">open</a> <a id="11956" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="11963" href="Demos.HSP.html#11910" class="Bound">ùë®</a> <a id="11965" class="Keyword">using</a> <a id="11971" class="Symbol">()</a> <a id="11974" class="Keyword">renaming</a> <a id="11983" class="Symbol">(</a> <a id="11985" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="11989" class="Symbol">to</a> <a id="11992" class="Field Operator">_‚âà·¥¨_</a> <a id="11997" class="Symbol">)</a>
 <a id="12000" class="Keyword">open</a> <a id="12005" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="12012" href="Demos.HSP.html#11927" class="Bound">ùë©</a> <a id="12014" class="Keyword">using</a> <a id="12020" class="Symbol">()</a> <a id="12023" class="Keyword">renaming</a> <a id="12032" class="Symbol">(</a> <a id="12034" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="12038" class="Symbol">to</a> <a id="12041" class="Field Operator">_‚âà·¥Æ_</a> <a id="12046" class="Symbol">)</a>
 <a id="12049" class="Keyword">open</a> <a id="12054" href="Function.Definitions.html" class="Module">FD</a> <a id="12057" href="Demos.HSP.html#11992" class="Function Operator">_‚âà·¥¨_</a> <a id="12062" href="Demos.HSP.html#12041" class="Field Operator">_‚âà·¥Æ_</a>

 <a id="12069" href="Demos.HSP.html#12069" class="Function">IsInjective</a> <a id="12081" class="Symbol">:</a> <a id="12083" class="Symbol">(</a><a id="12084" href="Demos.HSP.html#11910" class="Bound">ùë®</a> <a id="12086" href="Demos.HSP.html#6322" class="Record Operator">‚ü∂</a> <a id="12088" href="Demos.HSP.html#11927" class="Bound">ùë©</a><a id="12089" class="Symbol">)</a> <a id="12091" class="Symbol">‚Üí</a>  <a id="12094" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="12099" class="Symbol">(</a><a id="12100" href="Demos.HSP.html#11921" class="Bound">Œ±</a> <a id="12102" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="12104" href="Demos.HSP.html#11923" class="Bound">œÅ·µÉ</a> <a id="12107" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="12109" href="Demos.HSP.html#11940" class="Bound">œÅ·µá</a><a id="12111" class="Symbol">)</a>
 <a id="12114" href="Demos.HSP.html#12069" class="Function">IsInjective</a> <a id="12126" href="Demos.HSP.html#12126" class="Bound">f</a> <a id="12128" class="Symbol">=</a> <a id="12130" href="Function.Definitions.html#889" class="Function">Injective</a> <a id="12140" class="Symbol">(</a><a id="12141" href="Demos.HSP.html#6424" class="Field Operator">_‚ü®$‚ü©_</a> <a id="12147" href="Demos.HSP.html#12126" class="Bound">f</a><a id="12148" class="Symbol">)</a>

 <a id="12152" href="Demos.HSP.html#12152" class="Function">IsSurjective</a> <a id="12165" class="Symbol">:</a> <a id="12167" class="Symbol">(</a><a id="12168" href="Demos.HSP.html#11910" class="Bound">ùë®</a> <a id="12170" href="Demos.HSP.html#6322" class="Record Operator">‚ü∂</a> <a id="12172" href="Demos.HSP.html#11927" class="Bound">ùë©</a><a id="12173" class="Symbol">)</a> <a id="12175" class="Symbol">‚Üí</a>  <a id="12178" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="12183" class="Symbol">(</a><a id="12184" href="Demos.HSP.html#11921" class="Bound">Œ±</a> <a id="12186" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="12188" href="Demos.HSP.html#11938" class="Bound">Œ≤</a> <a id="12190" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="12192" href="Demos.HSP.html#11940" class="Bound">œÅ·µá</a><a id="12194" class="Symbol">)</a>
 <a id="12197" href="Demos.HSP.html#12152" class="Function">IsSurjective</a> <a id="12210" href="Demos.HSP.html#12210" class="Bound">F</a> <a id="12212" class="Symbol">=</a> <a id="12214" class="Symbol">‚àÄ</a> <a id="12216" class="Symbol">{</a><a id="12217" href="Demos.HSP.html#12217" class="Bound">y</a><a id="12218" class="Symbol">}</a> <a id="12220" class="Symbol">‚Üí</a> <a id="12222" href="Demos.HSP.html#10328" class="Datatype Operator">Image</a> <a id="12228" href="Demos.HSP.html#12210" class="Bound">F</a> <a id="12230" href="Demos.HSP.html#10328" class="Datatype Operator">‚àã</a> <a id="12232" href="Demos.HSP.html#12217" class="Bound">y</a>

 <a id="12236" href="Demos.HSP.html#12236" class="Function">SurjInv</a> <a id="12244" class="Symbol">:</a> <a id="12246" class="Symbol">(</a><a id="12247" href="Demos.HSP.html#12247" class="Bound">f</a> <a id="12249" class="Symbol">:</a> <a id="12251" href="Demos.HSP.html#11910" class="Bound">ùë®</a> <a id="12253" href="Demos.HSP.html#6322" class="Record Operator">‚ü∂</a> <a id="12255" href="Demos.HSP.html#11927" class="Bound">ùë©</a><a id="12256" class="Symbol">)</a> <a id="12258" class="Symbol">‚Üí</a> <a id="12260" href="Demos.HSP.html#12152" class="Function">IsSurjective</a> <a id="12273" href="Demos.HSP.html#12247" class="Bound">f</a> <a id="12275" class="Symbol">‚Üí</a> <a id="12277" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="12285" href="Demos.HSP.html#11927" class="Bound">ùë©</a> <a id="12287" class="Symbol">‚Üí</a> <a id="12289" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="12297" href="Demos.HSP.html#11910" class="Bound">ùë®</a>
 <a id="12300" href="Demos.HSP.html#12236" class="Function">SurjInv</a> <a id="12308" href="Demos.HSP.html#12308" class="Bound">f</a> <a id="12310" href="Demos.HSP.html#12310" class="Bound">fonto</a> <a id="12316" href="Demos.HSP.html#12316" class="Bound">b</a> <a id="12318" class="Symbol">=</a> <a id="12320" href="Demos.HSP.html#10854" class="Function">Inv</a> <a id="12324" href="Demos.HSP.html#12308" class="Bound">f</a> <a id="12326" class="Symbol">(</a><a id="12327" href="Demos.HSP.html#12310" class="Bound">fonto</a> <a id="12333" class="Symbol">{</a><a id="12334" href="Demos.HSP.html#12316" class="Bound">b</a><a id="12335" class="Symbol">})</a>

</pre>

Proving that the composition of injective setoid functions is again injective is simply a matter of composing the two assumed witnesses to injectivity. Proving that surjectivity is preserved under composition is only slightly more involved.

<pre class="Agda">

<a id="12607" class="Keyword">module</a> <a id="12614" href="Demos.HSP.html#12614" class="Module">_</a>  <a id="12617" class="Symbol">{</a><a id="12618" href="Demos.HSP.html#12618" class="Bound">ùë®</a> <a id="12620" class="Symbol">:</a> <a id="12622" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="12629" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="12631" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a><a id="12633" class="Symbol">}{</a><a id="12635" href="Demos.HSP.html#12635" class="Bound">ùë©</a> <a id="12637" class="Symbol">:</a> <a id="12639" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="12646" href="Demos.HSP.html#7261" class="Generalizable">Œ≤</a> <a id="12648" href="Demos.HSP.html#7263" class="Generalizable">œÅ·µá</a><a id="12650" class="Symbol">}{</a><a id="12652" href="Demos.HSP.html#12652" class="Bound">ùë™</a> <a id="12654" class="Symbol">:</a> <a id="12656" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="12663" href="Demos.HSP.html#7266" class="Generalizable">Œ≥</a> <a id="12665" href="Demos.HSP.html#7268" class="Generalizable">œÅ·∂ú</a><a id="12667" class="Symbol">}</a>
          <a id="12679" class="Symbol">(</a><a id="12680" href="Demos.HSP.html#12680" class="Bound">f</a> <a id="12682" class="Symbol">:</a> <a id="12684" href="Demos.HSP.html#12618" class="Bound">ùë®</a> <a id="12686" href="Demos.HSP.html#6322" class="Record Operator">‚ü∂</a> <a id="12688" href="Demos.HSP.html#12635" class="Bound">ùë©</a><a id="12689" class="Symbol">)(</a><a id="12691" href="Demos.HSP.html#12691" class="Bound">g</a> <a id="12693" class="Symbol">:</a> <a id="12695" href="Demos.HSP.html#12635" class="Bound">ùë©</a> <a id="12697" href="Demos.HSP.html#6322" class="Record Operator">‚ü∂</a> <a id="12699" href="Demos.HSP.html#12652" class="Bound">ùë™</a><a id="12700" class="Symbol">)</a> <a id="12702" class="Keyword">where</a>

 <a id="12710" href="Demos.HSP.html#12710" class="Function">‚àò-IsInjective</a> <a id="12724" class="Symbol">:</a> <a id="12726" href="Demos.HSP.html#12069" class="Function">IsInjective</a> <a id="12738" href="Demos.HSP.html#12680" class="Bound">f</a> <a id="12740" class="Symbol">‚Üí</a> <a id="12742" href="Demos.HSP.html#12069" class="Function">IsInjective</a> <a id="12754" href="Demos.HSP.html#12691" class="Bound">g</a> <a id="12756" class="Symbol">‚Üí</a> <a id="12758" href="Demos.HSP.html#12069" class="Function">IsInjective</a> <a id="12770" class="Symbol">(</a><a id="12771" href="Demos.HSP.html#12691" class="Bound">g</a> <a id="12773" href="Demos.HSP.html#9848" class="Function Operator">‚ü®‚àò‚ü©</a> <a id="12777" href="Demos.HSP.html#12680" class="Bound">f</a><a id="12778" class="Symbol">)</a>
 <a id="12781" href="Demos.HSP.html#12710" class="Function">‚àò-IsInjective</a> <a id="12795" href="Demos.HSP.html#12795" class="Bound">finj</a> <a id="12800" href="Demos.HSP.html#12800" class="Bound">ginj</a> <a id="12805" class="Symbol">=</a> <a id="12807" href="Demos.HSP.html#12795" class="Bound">finj</a> <a id="12812" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="12814" href="Demos.HSP.html#12800" class="Bound">ginj</a>

 <a id="12821" href="Demos.HSP.html#12821" class="Function">‚àò-IsSurjective</a> <a id="12836" class="Symbol">:</a> <a id="12838" href="Demos.HSP.html#12152" class="Function">IsSurjective</a> <a id="12851" href="Demos.HSP.html#12680" class="Bound">f</a> <a id="12853" class="Symbol">‚Üí</a> <a id="12855" href="Demos.HSP.html#12152" class="Function">IsSurjective</a> <a id="12868" href="Demos.HSP.html#12691" class="Bound">g</a> <a id="12870" class="Symbol">‚Üí</a> <a id="12872" href="Demos.HSP.html#12152" class="Function">IsSurjective</a> <a id="12885" class="Symbol">(</a><a id="12886" href="Demos.HSP.html#12691" class="Bound">g</a> <a id="12888" href="Demos.HSP.html#9848" class="Function Operator">‚ü®‚àò‚ü©</a> <a id="12892" href="Demos.HSP.html#12680" class="Bound">f</a><a id="12893" class="Symbol">)</a>
 <a id="12896" href="Demos.HSP.html#12821" class="Function">‚àò-IsSurjective</a> <a id="12911" href="Demos.HSP.html#12911" class="Bound">fonto</a> <a id="12917" href="Demos.HSP.html#12917" class="Bound">gonto</a> <a id="12923" class="Symbol">{</a><a id="12924" href="Demos.HSP.html#12924" class="Bound">y</a><a id="12925" class="Symbol">}</a> <a id="12927" class="Symbol">=</a> <a id="12929" href="Demos.HSP.html#13126" class="Function">Goal</a> <a id="12934" class="Keyword">where</a>
  <a id="12942" href="Demos.HSP.html#12942" class="Function">mp</a> <a id="12945" class="Symbol">:</a> <a id="12947" href="Demos.HSP.html#10328" class="Datatype Operator">Image</a> <a id="12953" href="Demos.HSP.html#12691" class="Bound">g</a> <a id="12955" href="Demos.HSP.html#10328" class="Datatype Operator">‚àã</a> <a id="12957" href="Demos.HSP.html#12924" class="Bound">y</a> <a id="12959" class="Symbol">‚Üí</a> <a id="12961" href="Demos.HSP.html#10328" class="Datatype Operator">Image</a> <a id="12967" href="Demos.HSP.html#12691" class="Bound">g</a> <a id="12969" href="Demos.HSP.html#9848" class="Function Operator">‚ü®‚àò‚ü©</a> <a id="12973" href="Demos.HSP.html#12680" class="Bound">f</a> <a id="12975" href="Demos.HSP.html#10328" class="Datatype Operator">‚àã</a> <a id="12977" href="Demos.HSP.html#12924" class="Bound">y</a>
  <a id="12981" href="Demos.HSP.html#12942" class="Function">mp</a> <a id="12984" class="Symbol">(</a><a id="12985" href="Demos.HSP.html#10381" class="InductiveConstructor">eq</a> <a id="12988" href="Demos.HSP.html#12988" class="Bound">c</a> <a id="12990" href="Demos.HSP.html#12990" class="Bound">p</a><a id="12991" class="Symbol">)</a> <a id="12993" class="Symbol">=</a> <a id="12995" href="Demos.HSP.html#13045" class="Function">Œ∑</a> <a id="12997" href="Demos.HSP.html#12911" class="Bound">fonto</a> <a id="13003" class="Keyword">where</a>
   <a id="13012" class="Keyword">open</a> <a id="13017" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="13024" href="Demos.HSP.html#12652" class="Bound">ùë™</a> <a id="13026" class="Keyword">using</a> <a id="13032" class="Symbol">(</a> <a id="13034" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="13040" class="Symbol">)</a>
   <a id="13045" href="Demos.HSP.html#13045" class="Function">Œ∑</a> <a id="13047" class="Symbol">:</a> <a id="13049" href="Demos.HSP.html#10328" class="Datatype Operator">Image</a> <a id="13055" href="Demos.HSP.html#12680" class="Bound">f</a> <a id="13057" href="Demos.HSP.html#10328" class="Datatype Operator">‚àã</a> <a id="13059" href="Demos.HSP.html#12988" class="Bound">c</a> <a id="13061" class="Symbol">‚Üí</a> <a id="13063" href="Demos.HSP.html#10328" class="Datatype Operator">Image</a> <a id="13069" href="Demos.HSP.html#12691" class="Bound">g</a> <a id="13071" href="Demos.HSP.html#9848" class="Function Operator">‚ü®‚àò‚ü©</a> <a id="13075" href="Demos.HSP.html#12680" class="Bound">f</a> <a id="13077" href="Demos.HSP.html#10328" class="Datatype Operator">‚àã</a> <a id="13079" href="Demos.HSP.html#12924" class="Bound">y</a>
   <a id="13084" href="Demos.HSP.html#13045" class="Function">Œ∑</a> <a id="13086" class="Symbol">(</a><a id="13087" href="Demos.HSP.html#10381" class="InductiveConstructor">eq</a> <a id="13090" href="Demos.HSP.html#13090" class="Bound">a</a> <a id="13092" href="Demos.HSP.html#13092" class="Bound">q</a><a id="13093" class="Symbol">)</a> <a id="13095" class="Symbol">=</a> <a id="13097" href="Demos.HSP.html#10381" class="InductiveConstructor">eq</a> <a id="13100" href="Demos.HSP.html#13090" class="Bound">a</a> <a id="13102" class="Symbol">(</a><a id="13103" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="13109" href="Demos.HSP.html#12990" class="Bound">p</a> <a id="13111" class="Symbol">(</a><a id="13112" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="13117" href="Demos.HSP.html#12691" class="Bound">g</a> <a id="13119" href="Demos.HSP.html#13092" class="Bound">q</a><a id="13120" class="Symbol">))</a>

  <a id="13126" href="Demos.HSP.html#13126" class="Function">Goal</a> <a id="13131" class="Symbol">:</a> <a id="13133" href="Demos.HSP.html#10328" class="Datatype Operator">Image</a> <a id="13139" href="Demos.HSP.html#12691" class="Bound">g</a> <a id="13141" href="Demos.HSP.html#9848" class="Function Operator">‚ü®‚àò‚ü©</a> <a id="13145" href="Demos.HSP.html#12680" class="Bound">f</a> <a id="13147" href="Demos.HSP.html#10328" class="Datatype Operator">‚àã</a> <a id="13149" href="Demos.HSP.html#12924" class="Bound">y</a>
  <a id="13153" href="Demos.HSP.html#13126" class="Function">Goal</a> <a id="13158" class="Symbol">=</a> <a id="13160" href="Demos.HSP.html#12942" class="Function">mp</a> <a id="13163" href="Demos.HSP.html#12917" class="Bound">gonto</a>
</pre>


### <a id="factorization-of-setoid-functions"></a> Factorization of setoid functions[^6]

Every (setoid) function `f : A ‚ü∂ B` factors as a surjective map `toIm : A ‚ü∂ Im f` followed
by an injective map `fromIm : Im f ‚ü∂ B`.

<pre class="Agda">

<a id="13419" class="Keyword">module</a> <a id="13426" href="Demos.HSP.html#13426" class="Module">_</a> <a id="13428" class="Symbol">{</a><a id="13429" href="Demos.HSP.html#13429" class="Bound">ùë®</a> <a id="13431" class="Symbol">:</a> <a id="13433" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="13440" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="13442" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a><a id="13444" class="Symbol">}{</a><a id="13446" href="Demos.HSP.html#13446" class="Bound">ùë©</a> <a id="13448" class="Symbol">:</a> <a id="13450" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="13457" href="Demos.HSP.html#7261" class="Generalizable">Œ≤</a> <a id="13459" href="Demos.HSP.html#7263" class="Generalizable">œÅ·µá</a><a id="13461" class="Symbol">}</a> <a id="13463" class="Keyword">where</a>

 <a id="13471" href="Demos.HSP.html#13471" class="Function">Im</a> <a id="13474" class="Symbol">:</a> <a id="13476" class="Symbol">(</a><a id="13477" href="Demos.HSP.html#13477" class="Bound">f</a> <a id="13479" class="Symbol">:</a> <a id="13481" href="Demos.HSP.html#13429" class="Bound">ùë®</a> <a id="13483" href="Demos.HSP.html#6322" class="Record Operator">‚ü∂</a> <a id="13485" href="Demos.HSP.html#13446" class="Bound">ùë©</a><a id="13486" class="Symbol">)</a> <a id="13488" class="Symbol">‚Üí</a> <a id="13490" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="13497" class="Symbol">_</a> <a id="13499" class="Symbol">_</a>
 <a id="13502" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="13510" class="Symbol">(</a><a id="13511" href="Demos.HSP.html#13471" class="Function">Im</a> <a id="13514" href="Demos.HSP.html#13514" class="Bound">f</a><a id="13515" class="Symbol">)</a> <a id="13517" class="Symbol">=</a> <a id="13519" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="13527" href="Demos.HSP.html#13429" class="Bound">ùë®</a>
 <a id="13530" href="Demos.HSP.html#6930" class="Field Operator">_‚âàÀ¢_</a> <a id="13535" class="Symbol">(</a><a id="13536" href="Demos.HSP.html#13471" class="Function">Im</a> <a id="13539" href="Demos.HSP.html#13539" class="Bound">f</a><a id="13540" class="Symbol">)</a> <a id="13542" href="Demos.HSP.html#13542" class="Bound">b1</a> <a id="13545" href="Demos.HSP.html#13545" class="Bound">b2</a> <a id="13548" class="Symbol">=</a> <a id="13550" href="Demos.HSP.html#13539" class="Bound">f</a> <a id="13552" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="13556" href="Demos.HSP.html#13542" class="Bound">b1</a> <a id="13559" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a> <a id="13561" href="Demos.HSP.html#13539" class="Bound">f</a> <a id="13563" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="13567" href="Demos.HSP.html#13545" class="Bound">b2</a> <a id="13570" class="Keyword">where</a> <a id="13576" class="Keyword">open</a> <a id="13581" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="13588" href="Demos.HSP.html#13446" class="Bound">ùë©</a>

 <a id="13592" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="13606" class="Symbol">(</a><a id="13607" href="Demos.HSP.html#13471" class="Function">Im</a> <a id="13610" href="Demos.HSP.html#13610" class="Bound">f</a><a id="13611" class="Symbol">)</a> <a id="13613" class="Symbol">=</a> <a id="13615" class="Keyword">record</a> <a id="13622" class="Symbol">{</a> <a id="13624" href="Relation.Binary.Structures.html#1568" class="Field">refl</a> <a id="13629" class="Symbol">=</a> <a id="13631" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="13636" class="Symbol">;</a> <a id="13638" href="Relation.Binary.Structures.html#1594" class="Field">sym</a> <a id="13642" class="Symbol">=</a> <a id="13644" href="Relation.Binary.Structures.html#1594" class="Function">sym</a><a id="13647" class="Symbol">;</a> <a id="13649" href="Relation.Binary.Structures.html#1620" class="Field">trans</a> <a id="13655" class="Symbol">=</a> <a id="13657" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="13663" class="Symbol">}</a>
  <a id="13667" class="Keyword">where</a> <a id="13673" class="Keyword">open</a> <a id="13678" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="13685" href="Demos.HSP.html#13446" class="Bound">ùë©</a>

 <a id="13689" href="Demos.HSP.html#13689" class="Function">toIm</a> <a id="13694" class="Symbol">:</a> <a id="13696" class="Symbol">(</a><a id="13697" href="Demos.HSP.html#13697" class="Bound">f</a> <a id="13699" class="Symbol">:</a> <a id="13701" href="Demos.HSP.html#13429" class="Bound">ùë®</a> <a id="13703" href="Demos.HSP.html#6322" class="Record Operator">‚ü∂</a> <a id="13705" href="Demos.HSP.html#13446" class="Bound">ùë©</a><a id="13706" class="Symbol">)</a> <a id="13708" class="Symbol">‚Üí</a> <a id="13710" href="Demos.HSP.html#13429" class="Bound">ùë®</a> <a id="13712" href="Demos.HSP.html#6322" class="Record Operator">‚ü∂</a> <a id="13714" href="Demos.HSP.html#13471" class="Function">Im</a> <a id="13717" href="Demos.HSP.html#13697" class="Bound">f</a>
 <a id="13720" href="Demos.HSP.html#13689" class="Function">toIm</a> <a id="13725" href="Demos.HSP.html#13725" class="Bound">f</a> <a id="13727" class="Symbol">=</a> <a id="13729" class="Keyword">record</a> <a id="13736" class="Symbol">{</a> <a id="13738" href="Function.Bundles.html#1919" class="Field">f</a> <a id="13740" class="Symbol">=</a> <a id="13742" href="Function.Base.html#615" class="Function">id</a> <a id="13745" class="Symbol">;</a> <a id="13747" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="13752" class="Symbol">=</a> <a id="13754" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="13759" href="Demos.HSP.html#13725" class="Bound">f</a> <a id="13761" class="Symbol">}</a>

 <a id="13765" href="Demos.HSP.html#13765" class="Function">fromIm</a> <a id="13772" class="Symbol">:</a> <a id="13774" class="Symbol">(</a><a id="13775" href="Demos.HSP.html#13775" class="Bound">f</a> <a id="13777" class="Symbol">:</a> <a id="13779" href="Demos.HSP.html#13429" class="Bound">ùë®</a> <a id="13781" href="Demos.HSP.html#6322" class="Record Operator">‚ü∂</a> <a id="13783" href="Demos.HSP.html#13446" class="Bound">ùë©</a><a id="13784" class="Symbol">)</a> <a id="13786" class="Symbol">‚Üí</a> <a id="13788" href="Demos.HSP.html#13471" class="Function">Im</a> <a id="13791" href="Demos.HSP.html#13775" class="Bound">f</a> <a id="13793" href="Demos.HSP.html#6322" class="Record Operator">‚ü∂</a> <a id="13795" href="Demos.HSP.html#13446" class="Bound">ùë©</a>
 <a id="13798" href="Demos.HSP.html#13765" class="Function">fromIm</a> <a id="13805" href="Demos.HSP.html#13805" class="Bound">f</a> <a id="13807" class="Symbol">=</a> <a id="13809" class="Keyword">record</a> <a id="13816" class="Symbol">{</a> <a id="13818" href="Function.Bundles.html#1919" class="Field">f</a> <a id="13820" class="Symbol">=</a> <a id="13822" class="Symbol">Œª</a> <a id="13824" href="Demos.HSP.html#13824" class="Bound">x</a> <a id="13826" class="Symbol">‚Üí</a> <a id="13828" href="Demos.HSP.html#13805" class="Bound">f</a> <a id="13830" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="13834" href="Demos.HSP.html#13824" class="Bound">x</a> <a id="13836" class="Symbol">;</a> <a id="13838" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="13843" class="Symbol">=</a> <a id="13845" href="Function.Base.html#615" class="Function">id</a> <a id="13848" class="Symbol">}</a>

 <a id="13852" href="Demos.HSP.html#13852" class="Function">fromIm-inj</a> <a id="13863" class="Symbol">:</a> <a id="13865" class="Symbol">(</a><a id="13866" href="Demos.HSP.html#13866" class="Bound">f</a> <a id="13868" class="Symbol">:</a> <a id="13870" href="Demos.HSP.html#13429" class="Bound">ùë®</a> <a id="13872" href="Demos.HSP.html#6322" class="Record Operator">‚ü∂</a> <a id="13874" href="Demos.HSP.html#13446" class="Bound">ùë©</a><a id="13875" class="Symbol">)</a> <a id="13877" class="Symbol">‚Üí</a> <a id="13879" href="Demos.HSP.html#12069" class="Function">IsInjective</a> <a id="13891" class="Symbol">(</a><a id="13892" href="Demos.HSP.html#13765" class="Function">fromIm</a> <a id="13899" href="Demos.HSP.html#13866" class="Bound">f</a><a id="13900" class="Symbol">)</a>
 <a id="13903" href="Demos.HSP.html#13852" class="Function">fromIm-inj</a> <a id="13914" class="Symbol">_</a> <a id="13916" class="Symbol">=</a> <a id="13918" href="Function.Base.html#615" class="Function">id</a>

 <a id="13923" href="Demos.HSP.html#13923" class="Function">toIm-surj</a> <a id="13933" class="Symbol">:</a> <a id="13935" class="Symbol">(</a><a id="13936" href="Demos.HSP.html#13936" class="Bound">f</a> <a id="13938" class="Symbol">:</a> <a id="13940" href="Demos.HSP.html#13429" class="Bound">ùë®</a> <a id="13942" href="Demos.HSP.html#6322" class="Record Operator">‚ü∂</a> <a id="13944" href="Demos.HSP.html#13446" class="Bound">ùë©</a><a id="13945" class="Symbol">)</a> <a id="13947" class="Symbol">‚Üí</a> <a id="13949" href="Demos.HSP.html#12152" class="Function">IsSurjective</a> <a id="13962" class="Symbol">(</a><a id="13963" href="Demos.HSP.html#13689" class="Function">toIm</a> <a id="13968" href="Demos.HSP.html#13936" class="Bound">f</a><a id="13969" class="Symbol">)</a>
 <a id="13972" href="Demos.HSP.html#13923" class="Function">toIm-surj</a> <a id="13982" class="Symbol">_</a> <a id="13984" class="Symbol">=</a> <a id="13986" href="Demos.HSP.html#10381" class="InductiveConstructor">eq</a> <a id="13989" class="Symbol">_</a> <a id="13991" class="Symbol">(</a><a id="13992" href="Demos.HSP.html#6750" class="Function">reflÀ¢</a> <a id="13998" href="Demos.HSP.html#13446" class="Bound">ùë©</a><a id="13999" class="Symbol">)</a>
</pre>


------------------------------------------------------------------------------

## <a id="basic-universal-algebra">Basic Universal Algebra</a>

We now develop a working vocabulary in [MLTT][] corresponding to classical, single-sorted, set-based universal algebra. We cover a number of important concepts, but limit ourselves to those required to prove Birkhoff's HSP theorem. In each case, we give a type-theoretic version of the informal definition, followed by its implementation in [Agda][].

This section is organized into the following subsections:
¬ß[3.1](#signatures) defines a general type of *signatures* of algebraic structures;
¬ß[3.2](#algebras) does the same for structures and their products;
¬ß[3.3](#structure-preserving-maps-and-isomorphism) defines *homomorphisms*, *monomorphisms*, and *epimorphisms*, presents types that codify these concepts, and formally verifies some of their basic properties;
¬ß[3.5](#subalgebras)--[3.6](#terms) do the same for *subalgebras* and *terms*, respectively.

### <a id="signatures">Signatures</a>

An (algebraic) *signature* is a pair `ùëÜ = (F, œÅ)` where `F` is a collection of *operation symbols* and `œÅ : F ‚Üí N` is an *arity function* which maps each operation symbol to its arity. Here, `N` denotes the *arity type*. Heuristically, the arity of an operation symbol may be thought of as the number of arguments that takes as
"input."  We represent signatures as inhabitants of the following dependent pair type.

```agda
Signature : (ùí™ ùí± : Level) ‚Üí Type (lsuc (ùí™ ‚äî ùí±))
Signature ùí™ ùí± = Œ£[ F ‚àà Type ùí™ ] (F ‚Üí Type ùí±)
```

Recalling our syntax for the first and second projections, if `ùëÜ` is a signature, then `‚à£ ùëÜ ‚à£` denotes the set of operation symbols and `‚à• ùëÜ ‚à•` denotes the arity function. Thus, if `f : ‚à£ ùëÜ ‚à£` is an operation symbol in the signature `ùëÜ`, then `‚à• ùëÜ ‚à• f` is the arity of `f`.

We need to augment our `Signature` type so that it supports algebras over setoid domains. To do so, following Abel¬†[@Abel:2021], we define an operator that translates an ordinary signature into a *setoid signature*, that is, a signature over a setoid domain. This raises a minor technical issue: given operations `f` and `g`, with arguments `u : ‚à• ùëÜ ‚à• f ‚Üí A` and `v : ‚à• ùëÜ ‚à• g ‚Üí A`, respectively, and a proof of `f ‚â° g` (*intensional* equality), we ought to be able to check whether `u` and `v` are *pointwise* equal. Technically, `u` and `v` appear to inhabit different types; of course, this is reconciled by the hypothesis `f ‚â° g`, as we see in the next definition (borrowed from¬†[@Abel:2021]).

<pre class="Agda">

<a id="EqArgs"></a><a id="16571" href="Demos.HSP.html#16571" class="Function">EqArgs</a> <a id="16578" class="Symbol">:</a>  <a id="16581" class="Symbol">{</a><a id="16582" href="Demos.HSP.html#16582" class="Bound">ùëÜ</a> <a id="16584" class="Symbol">:</a> <a id="16586" href="Base.Algebras.Basic.html#3890" class="Function">Signature</a> <a id="16596" href="Demos.HSP.html#5140" class="Bound">ùìû</a> <a id="16598" href="Demos.HSP.html#5142" class="Bound">ùì•</a><a id="16599" class="Symbol">}{</a><a id="16601" href="Demos.HSP.html#16601" class="Bound">Œæ</a> <a id="16603" class="Symbol">:</a> <a id="16605" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="16612" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="16614" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a><a id="16616" class="Symbol">}</a>
 <a id="16619" class="Symbol">‚Üí</a>        <a id="16628" class="Symbol">‚àÄ</a> <a id="16630" class="Symbol">{</a><a id="16631" href="Demos.HSP.html#16631" class="Bound">f</a> <a id="16633" href="Demos.HSP.html#16633" class="Bound">g</a><a id="16634" class="Symbol">}</a> <a id="16636" class="Symbol">‚Üí</a> <a id="16638" href="Demos.HSP.html#16631" class="Bound">f</a> <a id="16640" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">‚â°</a> <a id="16642" href="Demos.HSP.html#16633" class="Bound">g</a> <a id="16644" class="Symbol">‚Üí</a> <a id="16646" class="Symbol">(</a><a id="16647" href="Demos.HSP.html#7893" class="Function Operator">‚à•</a> <a id="16649" href="Demos.HSP.html#16582" class="Bound">ùëÜ</a> <a id="16651" href="Demos.HSP.html#7893" class="Function Operator">‚à•</a> <a id="16653" href="Demos.HSP.html#16631" class="Bound">f</a> <a id="16655" class="Symbol">‚Üí</a> <a id="16657" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="16665" href="Demos.HSP.html#16601" class="Bound">Œæ</a><a id="16666" class="Symbol">)</a> <a id="16668" class="Symbol">‚Üí</a> <a id="16670" class="Symbol">(</a><a id="16671" href="Demos.HSP.html#7893" class="Function Operator">‚à•</a> <a id="16673" href="Demos.HSP.html#16582" class="Bound">ùëÜ</a> <a id="16675" href="Demos.HSP.html#7893" class="Function Operator">‚à•</a> <a id="16677" href="Demos.HSP.html#16633" class="Bound">g</a> <a id="16679" class="Symbol">‚Üí</a> <a id="16681" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="16689" href="Demos.HSP.html#16601" class="Bound">Œæ</a><a id="16690" class="Symbol">)</a> <a id="16692" class="Symbol">‚Üí</a> <a id="16694" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="16699" class="Symbol">(</a><a id="16700" href="Demos.HSP.html#5142" class="Bound">ùì•</a> <a id="16702" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="16704" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a><a id="16706" class="Symbol">)</a>
<a id="16708" href="Demos.HSP.html#16571" class="Function">EqArgs</a> <a id="16715" class="Symbol">{</a><a id="16716" class="Argument">Œæ</a> <a id="16718" class="Symbol">=</a> <a id="16720" href="Demos.HSP.html#16720" class="Bound">Œæ</a><a id="16721" class="Symbol">}</a> <a id="16723" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="16730" href="Demos.HSP.html#16730" class="Bound">u</a> <a id="16732" href="Demos.HSP.html#16732" class="Bound">v</a> <a id="16734" class="Symbol">=</a> <a id="16736" class="Symbol">‚àÄ</a> <a id="16738" href="Demos.HSP.html#16738" class="Bound">i</a> <a id="16740" class="Symbol">‚Üí</a> <a id="16742" href="Demos.HSP.html#16730" class="Bound">u</a> <a id="16744" href="Demos.HSP.html#16738" class="Bound">i</a> <a id="16746" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a> <a id="16748" href="Demos.HSP.html#16732" class="Bound">v</a> <a id="16750" href="Demos.HSP.html#16738" class="Bound">i</a> <a id="16752" class="Keyword">where</a> <a id="16758" class="Keyword">open</a> <a id="16763" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="16770" href="Demos.HSP.html#16720" class="Bound">Œæ</a> <a id="16772" class="Keyword">using</a> <a id="16778" class="Symbol">(</a> <a id="16780" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="16784" class="Symbol">)</a>

</pre>

This makes it possible to define an operator which translates a signature for algebras over bare types into a signature for algebras over setoids. We denote this operator by `‚ü®_‚ü©` and define it as follows.

<pre class="Agda">

<a id="‚ü®_‚ü©"></a><a id="17020" href="Demos.HSP.html#17020" class="Function Operator">‚ü®_‚ü©</a> <a id="17024" class="Symbol">:</a> <a id="17026" href="Base.Algebras.Basic.html#3890" class="Function">Signature</a> <a id="17036" href="Demos.HSP.html#5140" class="Bound">ùìû</a> <a id="17038" href="Demos.HSP.html#5142" class="Bound">ùì•</a> <a id="17040" class="Symbol">‚Üí</a> <a id="17042" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="17049" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="17051" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a> <a id="17054" class="Symbol">‚Üí</a> <a id="17056" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="17063" class="Symbol">_</a> <a id="17065" class="Symbol">_</a>

<a id="17068" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a>  <a id="17077" class="Symbol">(</a><a id="17078" href="Demos.HSP.html#17020" class="Function Operator">‚ü®</a> <a id="17080" href="Demos.HSP.html#17080" class="Bound">ùëÜ</a> <a id="17082" href="Demos.HSP.html#17020" class="Function Operator">‚ü©</a> <a id="17084" href="Demos.HSP.html#17084" class="Bound">Œæ</a><a id="17085" class="Symbol">)</a>                <a id="17102" class="Symbol">=</a> <a id="17104" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="17107" href="Demos.HSP.html#17107" class="Bound">f</a> <a id="17109" href="Data.Product.html#916" class="Function">‚àà</a> <a id="17111" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="17113" href="Demos.HSP.html#17080" class="Bound">ùëÜ</a> <a id="17115" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="17117" href="Data.Product.html#916" class="Function">]</a> <a id="17119" class="Symbol">(</a><a id="17120" href="Demos.HSP.html#7893" class="Function Operator">‚à•</a> <a id="17122" href="Demos.HSP.html#17080" class="Bound">ùëÜ</a> <a id="17124" href="Demos.HSP.html#7893" class="Function Operator">‚à•</a> <a id="17126" href="Demos.HSP.html#17107" class="Bound">f</a> <a id="17128" class="Symbol">‚Üí</a> <a id="17130" href="Demos.HSP.html#17084" class="Bound">Œæ</a> <a id="17132" class="Symbol">.</a><a id="17133" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a><a id="17140" class="Symbol">)</a>
<a id="17142" href="Demos.HSP.html#6930" class="Field Operator">_‚âàÀ¢_</a>     <a id="17151" class="Symbol">(</a><a id="17152" href="Demos.HSP.html#17020" class="Function Operator">‚ü®</a> <a id="17154" href="Demos.HSP.html#17154" class="Bound">ùëÜ</a> <a id="17156" href="Demos.HSP.html#17020" class="Function Operator">‚ü©</a> <a id="17158" href="Demos.HSP.html#17158" class="Bound">Œæ</a><a id="17159" class="Symbol">)(</a><a id="17161" href="Demos.HSP.html#17161" class="Bound">f</a> <a id="17163" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="17165" href="Demos.HSP.html#17165" class="Bound">u</a><a id="17166" class="Symbol">)(</a><a id="17168" href="Demos.HSP.html#17168" class="Bound">g</a> <a id="17170" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="17172" href="Demos.HSP.html#17172" class="Bound">v</a><a id="17173" class="Symbol">)</a>  <a id="17176" class="Symbol">=</a> <a id="17178" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="17181" href="Demos.HSP.html#17181" class="Bound">eqv</a> <a id="17185" href="Data.Product.html#916" class="Function">‚àà</a> <a id="17187" href="Demos.HSP.html#17161" class="Bound">f</a> <a id="17189" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">‚â°</a> <a id="17191" href="Demos.HSP.html#17168" class="Bound">g</a> <a id="17193" href="Data.Product.html#916" class="Function">]</a> <a id="17195" href="Demos.HSP.html#16571" class="Function">EqArgs</a><a id="17201" class="Symbol">{</a><a id="17202" class="Argument">Œæ</a> <a id="17204" class="Symbol">=</a> <a id="17206" href="Demos.HSP.html#17158" class="Bound">Œæ</a><a id="17207" class="Symbol">}</a> <a id="17209" href="Demos.HSP.html#17181" class="Bound">eqv</a> <a id="17213" href="Demos.HSP.html#17165" class="Bound">u</a> <a id="17215" href="Demos.HSP.html#17172" class="Bound">v</a>

<a id="17218" href="Demos.HSP.html#6526" class="Field">refl·µâ</a>   <a id="17226" class="Symbol">(</a><a id="17227" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="17241" class="Symbol">(</a><a id="17242" href="Demos.HSP.html#17020" class="Function Operator">‚ü®</a> <a id="17244" href="Demos.HSP.html#17244" class="Bound">ùëÜ</a> <a id="17246" href="Demos.HSP.html#17020" class="Function Operator">‚ü©</a> <a id="17248" href="Demos.HSP.html#17248" class="Bound">Œæ</a><a id="17249" class="Symbol">))</a>                           <a id="17278" class="Symbol">=</a> <a id="17280" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="17287" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="17289" class="Symbol">Œª</a> <a id="17291" href="Demos.HSP.html#17291" class="Bound">i</a> <a id="17293" class="Symbol">‚Üí</a> <a id="17295" href="Demos.HSP.html#6750" class="Function">reflÀ¢</a>   <a id="17303" href="Demos.HSP.html#17248" class="Bound">Œæ</a>
<a id="17305" href="Demos.HSP.html#6587" class="Field">sym·µâ</a>    <a id="17313" class="Symbol">(</a><a id="17314" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="17328" class="Symbol">(</a><a id="17329" href="Demos.HSP.html#17020" class="Function Operator">‚ü®</a> <a id="17331" href="Demos.HSP.html#17331" class="Bound">ùëÜ</a> <a id="17333" href="Demos.HSP.html#17020" class="Function Operator">‚ü©</a> <a id="17335" href="Demos.HSP.html#17335" class="Bound">Œæ</a><a id="17336" class="Symbol">))</a> <a id="17339" class="Symbol">(</a><a id="17340" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="17347" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="17349" href="Demos.HSP.html#17349" class="Bound">g</a><a id="17350" class="Symbol">)</a>              <a id="17365" class="Symbol">=</a> <a id="17367" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="17374" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="17376" class="Symbol">Œª</a> <a id="17378" href="Demos.HSP.html#17378" class="Bound">i</a> <a id="17380" class="Symbol">‚Üí</a> <a id="17382" href="Demos.HSP.html#6811" class="Function">symÀ¢</a>    <a id="17390" href="Demos.HSP.html#17335" class="Bound">Œæ</a> <a id="17392" class="Symbol">(</a><a id="17393" href="Demos.HSP.html#17349" class="Bound">g</a> <a id="17395" href="Demos.HSP.html#17378" class="Bound">i</a><a id="17396" class="Symbol">)</a>
<a id="17398" href="Demos.HSP.html#6648" class="Field">trans·µâ</a>  <a id="17406" class="Symbol">(</a><a id="17407" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="17421" class="Symbol">(</a><a id="17422" href="Demos.HSP.html#17020" class="Function Operator">‚ü®</a> <a id="17424" href="Demos.HSP.html#17424" class="Bound">ùëÜ</a> <a id="17426" href="Demos.HSP.html#17020" class="Function Operator">‚ü©</a> <a id="17428" href="Demos.HSP.html#17428" class="Bound">Œæ</a><a id="17429" class="Symbol">))</a> <a id="17432" class="Symbol">(</a><a id="17433" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="17440" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="17442" href="Demos.HSP.html#17442" class="Bound">g</a><a id="17443" class="Symbol">)(</a><a id="17445" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="17452" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="17454" href="Demos.HSP.html#17454" class="Bound">h</a><a id="17455" class="Symbol">)</a>  <a id="17458" class="Symbol">=</a> <a id="17460" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="17467" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="17469" class="Symbol">Œª</a> <a id="17471" href="Demos.HSP.html#17471" class="Bound">i</a> <a id="17473" class="Symbol">‚Üí</a> <a id="17475" href="Demos.HSP.html#6872" class="Function">transÀ¢</a>  <a id="17483" href="Demos.HSP.html#17428" class="Bound">Œæ</a> <a id="17485" class="Symbol">(</a><a id="17486" href="Demos.HSP.html#17442" class="Bound">g</a> <a id="17488" href="Demos.HSP.html#17471" class="Bound">i</a><a id="17489" class="Symbol">)</a> <a id="17491" class="Symbol">(</a><a id="17492" href="Demos.HSP.html#17454" class="Bound">h</a> <a id="17494" href="Demos.HSP.html#17471" class="Bound">i</a><a id="17495" class="Symbol">)</a>
</pre>


### <a id="algebras">Algebras</a>

An *algebraic structure* `ùë® = (A, F·¥¨)` *in the signature* `ùëÜ = (F, œÅ)`, or `ùëÜ`-*algebra*, consists of
*  a type `A`, called the *domain* of the algebra;
*  a collection `F·¥¨ := {f·¥¨ ‚à£ f ‚àà F, f·¥¨ : (œÅ f ‚Üí A) ‚Üí A}` of *operations* on `A`;
*  a (potentially empty) collection of *identities* satisfied by elements and operations of `ùë®`.
Our [Agda][] implementation represents algebras as inhabitants of a record type with two fields---a `Domain` setoid denoting the domain of the algebra, and an `Interp` function denoting the interpretation in the algebra of each operation symbol in `ùëÜ`. We postpone introducing identities until¬†¬ß[4](#equational-logic).

<pre class="Agda">

<a id="18210" class="Keyword">record</a> <a id="Algebra"></a><a id="18217" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="18225" href="Demos.HSP.html#18225" class="Bound">Œ±</a> <a id="18227" href="Demos.HSP.html#18227" class="Bound">œÅ</a> <a id="18229" class="Symbol">:</a> <a id="18231" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="18236" class="Symbol">(</a><a id="18237" href="Demos.HSP.html#5140" class="Bound">ùìû</a> <a id="18239" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="18241" href="Demos.HSP.html#5142" class="Bound">ùì•</a> <a id="18243" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="18245" href="Agda.Primitive.html#780" class="Primitive">lsuc</a> <a id="18250" class="Symbol">(</a><a id="18251" href="Demos.HSP.html#18225" class="Bound">Œ±</a> <a id="18253" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="18255" href="Demos.HSP.html#18227" class="Bound">œÅ</a><a id="18256" class="Symbol">))</a> <a id="18259" class="Keyword">where</a>
 <a id="18266" class="Keyword">field</a>  <a id="Algebra.Domain"></a><a id="18273" href="Demos.HSP.html#18273" class="Field">Domain</a>  <a id="18281" class="Symbol">:</a> <a id="18283" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="18290" href="Demos.HSP.html#18225" class="Bound">Œ±</a> <a id="18292" href="Demos.HSP.html#18227" class="Bound">œÅ</a>
        <a id="Algebra.Interp"></a><a id="18302" href="Demos.HSP.html#18302" class="Field">Interp</a>  <a id="18310" class="Symbol">:</a> <a id="18312" href="Demos.HSP.html#17020" class="Function Operator">‚ü®</a> <a id="18314" href="Demos.HSP.html#5126" class="Bound">ùëÜ</a> <a id="18316" href="Demos.HSP.html#17020" class="Function Operator">‚ü©</a> <a id="18318" href="Demos.HSP.html#18273" class="Field">Domain</a> <a id="18325" href="Demos.HSP.html#6322" class="Record Operator">‚ü∂</a> <a id="18327" href="Demos.HSP.html#18273" class="Field">Domain</a>

</pre>

Thus, for each operation symbol in `ùëÜ` we have a setoid function `f` whose domain is a power of `Domain` and whose codomain is `Domain`. Further, we define some syntactic sugar to make our formalizations easier to read and reason about. Specifically, if `ùë®` is an algebra, then
*  `ùîª[ ùë® ]` denotes the `Domain` setoid of `ùë®`,
*  `ùïå[ ùë® ]` is the underlying carrier of (the `Domain` setoid of) `ùë®`, and
*  `f ÃÇ ùë®` denotes the interpretation of the operation symbol `f` in the algebra `ùë®`.

<pre class="Agda">

<a id="18849" class="Keyword">open</a> <a id="18854" href="Demos.HSP.html#18217" class="Module">Algebra</a>
<a id="ùîª[_]"></a><a id="18862" href="Demos.HSP.html#18862" class="Function Operator">ùîª[_]</a> <a id="18867" class="Symbol">:</a> <a id="18869" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="18877" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="18879" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a> <a id="18882" class="Symbol">‚Üí</a>  <a id="18885" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="18892" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="18894" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a>
<a id="18897" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="18900" href="Demos.HSP.html#18900" class="Bound">ùë®</a> <a id="18902" href="Demos.HSP.html#18862" class="Function Operator">]</a> <a id="18904" class="Symbol">=</a> <a id="18906" href="Demos.HSP.html#18273" class="Field">Domain</a> <a id="18913" href="Demos.HSP.html#18900" class="Bound">ùë®</a>

<a id="ùïå[_]"></a><a id="18916" href="Demos.HSP.html#18916" class="Function Operator">ùïå[_]</a> <a id="18921" class="Symbol">:</a> <a id="18923" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="18931" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="18933" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a> <a id="18936" class="Symbol">‚Üí</a>  <a id="18939" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="18944" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a>
<a id="18946" href="Demos.HSP.html#18916" class="Function Operator">ùïå[</a> <a id="18949" href="Demos.HSP.html#18949" class="Bound">ùë®</a> <a id="18951" href="Demos.HSP.html#18916" class="Function Operator">]</a> <a id="18953" class="Symbol">=</a> <a id="18955" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="18963" class="Symbol">(</a><a id="18964" href="Demos.HSP.html#18273" class="Field">Domain</a> <a id="18971" href="Demos.HSP.html#18949" class="Bound">ùë®</a><a id="18972" class="Symbol">)</a>

<a id="_ÃÇ_"></a><a id="18975" href="Demos.HSP.html#18975" class="Function Operator">_ÃÇ_</a> <a id="18979" class="Symbol">:</a> <a id="18981" class="Symbol">(</a><a id="18982" href="Demos.HSP.html#18982" class="Bound">f</a> <a id="18984" class="Symbol">:</a> <a id="18986" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="18988" href="Demos.HSP.html#5126" class="Bound">ùëÜ</a> <a id="18990" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a><a id="18991" class="Symbol">)(</a><a id="18993" href="Demos.HSP.html#18993" class="Bound">ùë®</a> <a id="18995" class="Symbol">:</a> <a id="18997" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="19005" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="19007" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a><a id="19009" class="Symbol">)</a> <a id="19011" class="Symbol">‚Üí</a> <a id="19013" class="Symbol">(</a><a id="19014" href="Demos.HSP.html#7893" class="Function Operator">‚à•</a> <a id="19016" href="Demos.HSP.html#5126" class="Bound">ùëÜ</a> <a id="19018" href="Demos.HSP.html#7893" class="Function Operator">‚à•</a> <a id="19020" href="Demos.HSP.html#18982" class="Bound">f</a>  <a id="19023" class="Symbol">‚Üí</a>  <a id="19026" href="Demos.HSP.html#18916" class="Function Operator">ùïå[</a> <a id="19029" href="Demos.HSP.html#18993" class="Bound">ùë®</a> <a id="19031" href="Demos.HSP.html#18916" class="Function Operator">]</a><a id="19032" class="Symbol">)</a> <a id="19034" class="Symbol">‚Üí</a> <a id="19036" href="Demos.HSP.html#18916" class="Function Operator">ùïå[</a> <a id="19039" href="Demos.HSP.html#18993" class="Bound">ùë®</a> <a id="19041" href="Demos.HSP.html#18916" class="Function Operator">]</a>
<a id="19043" href="Demos.HSP.html#19043" class="Bound">f</a> <a id="19045" href="Demos.HSP.html#18975" class="Function Operator">ÃÇ</a> <a id="19047" href="Demos.HSP.html#19047" class="Bound">ùë®</a> <a id="19049" class="Symbol">=</a> <a id="19051" class="Symbol">Œª</a> <a id="19053" href="Demos.HSP.html#19053" class="Bound">a</a> <a id="19055" class="Symbol">‚Üí</a> <a id="19057" class="Symbol">(</a><a id="19058" href="Demos.HSP.html#18302" class="Field">Interp</a> <a id="19065" href="Demos.HSP.html#19047" class="Bound">ùë®</a><a id="19066" class="Symbol">)</a> <a id="19068" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="19072" class="Symbol">(</a><a id="19073" href="Demos.HSP.html#19043" class="Bound">f</a> <a id="19075" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="19077" href="Demos.HSP.html#19053" class="Bound">a</a><a id="19078" class="Symbol">)</a>
</pre>

### <a id="universe-levels-of-algebra-types">Universe levels of algebra types</a>

Types belong to *universes*, which are structured in [Agda][] as follows: 
`Type ‚Ñì : Type (suc ‚Ñì)`, `Type (suc ‚Ñì) : Type (suc (suc ‚Ñì))`.[^7] 
While this means that `Type ‚Ñì` has type `Type (suc ‚Ñì)`, it does *not* imply that `Type ‚Ñì` 
has type `Type (suc (suc ‚Ñì))`. In other words, [Agda][]'s universes are *non-cumulative*. 
This can be advantageous as it becomes possible to treat size issues more generally and precisely. 
However, dealing with explicit universe levels can be daunting, and the standard literature
(in which uniform smallness is typically assumed) offers little guidance. While in some settings, 
such as category theory, formalizing in [Agda][] works smoothly with respect to universe levels 
(see¬†[@agda-categories]), in universal algebra the terrain is bumpier. Thus, it seems worthwhile to 
explain how we make use of universe lifting and lowering functions, available in the 
[Agda Standard Library][], to develop domain-specific tools for dealing with [Agda][]'s non-cumulative 
universe hierarchy.

<!-- Let us be more concrete about what is at issue by considering a typical example. frequently encounters problems during the type-checking process and responds by printing a message like the following. Here informs us that it encountered universe level on line 498 of the HSP module, where it was expecting level ¬†¬†¬†¬†( ). In this case, we tried to use an algebra inhabiting the type whereas expected an inhabitant of the type ( ( )) . The operation of the standard library embeds a type into a higher universe. Specializing to our situation, we define a function ¬†with the following interface. -2mm . -->

The `Lift` operation of the standard library embeds a type into a higher universe. Specializing `Lift` to our situation, we define a function `Lift-Alg`.

<pre class="Agda">

<a id="20977" class="Keyword">module</a> <a id="20984" href="Demos.HSP.html#20984" class="Module">_</a> <a id="20986" class="Symbol">(</a><a id="20987" href="Demos.HSP.html#20987" class="Bound">ùë®</a> <a id="20989" class="Symbol">:</a> <a id="20991" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="20999" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="21001" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a><a id="21003" class="Symbol">)</a> <a id="21005" class="Keyword">where</a>
 <a id="21012" class="Keyword">open</a> <a id="21017" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="21024" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="21027" href="Demos.HSP.html#20987" class="Bound">ùë®</a> <a id="21029" href="Demos.HSP.html#18862" class="Function Operator">]</a> <a id="21031" class="Keyword">using</a> <a id="21037" class="Symbol">(</a> <a id="21039" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="21043" class="Symbol">;</a> <a id="21045" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="21050" class="Symbol">;</a> <a id="21052" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="21056" class="Symbol">;</a> <a id="21058" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="21064" class="Symbol">)</a> <a id="21066" class="Symbol">;</a> <a id="21068" class="Keyword">open</a> <a id="21073" href="Level.html" class="Module">Level</a>
 <a id="21080" href="Demos.HSP.html#21080" class="Function">Lift-AlgÀ°</a> <a id="21090" class="Symbol">:</a> <a id="21092" class="Symbol">(</a><a id="21093" href="Demos.HSP.html#21093" class="Bound">‚Ñì</a> <a id="21095" class="Symbol">:</a> <a id="21097" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="21102" class="Symbol">)</a> <a id="21104" class="Symbol">‚Üí</a> <a id="21106" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="21114" class="Symbol">(</a><a id="21115" href="Demos.HSP.html#20999" class="Bound">Œ±</a> <a id="21117" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="21119" href="Demos.HSP.html#21093" class="Bound">‚Ñì</a><a id="21120" class="Symbol">)</a> <a id="21122" href="Demos.HSP.html#21001" class="Bound">œÅ·µÉ</a>
 <a id="21126" href="Demos.HSP.html#18273" class="Field">Domain</a> <a id="21133" class="Symbol">(</a><a id="21134" href="Demos.HSP.html#21080" class="Function">Lift-AlgÀ°</a> <a id="21144" href="Demos.HSP.html#21144" class="Bound">‚Ñì</a><a id="21145" class="Symbol">)</a> <a id="21147" class="Symbol">=</a>
  <a id="21151" class="Keyword">record</a>  <a id="21159" class="Symbol">{</a> <a id="21161" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a>        <a id="21176" class="Symbol">=</a> <a id="21178" href="Level.html#400" class="Record">Lift</a> <a id="21183" href="Demos.HSP.html#21144" class="Bound">‚Ñì</a> <a id="21185" href="Demos.HSP.html#18916" class="Function Operator">ùïå[</a> <a id="21188" href="Demos.HSP.html#20987" class="Bound">ùë®</a> <a id="21190" href="Demos.HSP.html#18916" class="Function Operator">]</a>
          <a id="21202" class="Symbol">;</a> <a id="21204" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a>            <a id="21219" class="Symbol">=</a> <a id="21221" class="Symbol">Œª</a> <a id="21223" href="Demos.HSP.html#21223" class="Bound">x</a> <a id="21225" href="Demos.HSP.html#21225" class="Bound">y</a> <a id="21227" class="Symbol">‚Üí</a> <a id="21229" href="Level.html#470" class="Field">lower</a> <a id="21235" href="Demos.HSP.html#21223" class="Bound">x</a> <a id="21237" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a> <a id="21239" href="Level.html#470" class="Field">lower</a> <a id="21245" href="Demos.HSP.html#21225" class="Bound">y</a>
          <a id="21257" class="Symbol">;</a> <a id="21259" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a>  <a id="21274" class="Symbol">=</a> <a id="21276" class="Keyword">record</a> <a id="21283" class="Symbol">{</a> <a id="21285" href="Relation.Binary.Structures.html#1568" class="Field">refl</a> <a id="21290" class="Symbol">=</a> <a id="21292" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="21297" class="Symbol">;</a> <a id="21299" href="Relation.Binary.Structures.html#1594" class="Field">sym</a> <a id="21303" class="Symbol">=</a> <a id="21305" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="21309" class="Symbol">;</a> <a id="21311" href="Relation.Binary.Structures.html#1620" class="Field">trans</a> <a id="21317" class="Symbol">=</a> <a id="21319" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="21325" class="Symbol">}}</a>

 <a id="21330" href="Demos.HSP.html#18302" class="Field">Interp</a> <a id="21337" class="Symbol">(</a><a id="21338" href="Demos.HSP.html#21080" class="Function">Lift-AlgÀ°</a> <a id="21348" href="Demos.HSP.html#21348" class="Bound">‚Ñì</a><a id="21349" class="Symbol">)</a> <a id="21351" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="21355" class="Symbol">(</a><a id="21356" href="Demos.HSP.html#21356" class="Bound">f</a> <a id="21358" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="21360" href="Demos.HSP.html#21360" class="Bound">la</a><a id="21362" class="Symbol">)</a> <a id="21364" class="Symbol">=</a> <a id="21366" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="21371" class="Symbol">((</a><a id="21373" href="Demos.HSP.html#21356" class="Bound">f</a> <a id="21375" href="Demos.HSP.html#18975" class="Function Operator">ÃÇ</a> <a id="21377" href="Demos.HSP.html#20987" class="Bound">ùë®</a><a id="21378" class="Symbol">)</a> <a id="21380" class="Symbol">(</a><a id="21381" href="Level.html#470" class="Field">lower</a> <a id="21387" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="21389" href="Demos.HSP.html#21360" class="Bound">la</a><a id="21391" class="Symbol">))</a>
 <a id="21395" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="21400" class="Symbol">(</a><a id="21401" href="Demos.HSP.html#18302" class="Field">Interp</a> <a id="21408" class="Symbol">(</a><a id="21409" href="Demos.HSP.html#21080" class="Function">Lift-AlgÀ°</a> <a id="21419" href="Demos.HSP.html#21419" class="Bound">‚Ñì</a><a id="21420" class="Symbol">))</a> <a id="21423" class="Symbol">(</a><a id="21424" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="21431" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="21433" href="Demos.HSP.html#21433" class="Bound">lab</a><a id="21436" class="Symbol">)</a> <a id="21438" class="Symbol">=</a> <a id="21440" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="21445" class="Symbol">(</a><a id="21446" href="Demos.HSP.html#18302" class="Field">Interp</a> <a id="21453" href="Demos.HSP.html#20987" class="Bound">ùë®</a><a id="21454" class="Symbol">)</a> <a id="21456" class="Symbol">((</a><a id="21458" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="21465" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="21467" href="Demos.HSP.html#21433" class="Bound">lab</a><a id="21470" class="Symbol">))</a>

 <a id="21475" href="Demos.HSP.html#21475" class="Function">Lift-Alg ≥</a> <a id="21485" class="Symbol">:</a> <a id="21487" class="Symbol">(</a><a id="21488" href="Demos.HSP.html#21488" class="Bound">‚Ñì</a> <a id="21490" class="Symbol">:</a> <a id="21492" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="21497" class="Symbol">)</a> <a id="21499" class="Symbol">‚Üí</a> <a id="21501" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="21509" href="Demos.HSP.html#20999" class="Bound">Œ±</a> <a id="21511" class="Symbol">(</a><a id="21512" href="Demos.HSP.html#21001" class="Bound">œÅ·µÉ</a> <a id="21515" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="21517" href="Demos.HSP.html#21488" class="Bound">‚Ñì</a><a id="21518" class="Symbol">)</a>
 <a id="21521" href="Demos.HSP.html#18273" class="Field">Domain</a> <a id="21528" class="Symbol">(</a><a id="21529" href="Demos.HSP.html#21475" class="Function">Lift-Alg ≥</a> <a id="21539" href="Demos.HSP.html#21539" class="Bound">‚Ñì</a><a id="21540" class="Symbol">)</a> <a id="21542" class="Symbol">=</a>
  <a id="21546" class="Keyword">record</a>  <a id="21554" class="Symbol">{</a> <a id="21556" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a>        <a id="21571" class="Symbol">=</a> <a id="21573" href="Demos.HSP.html#18916" class="Function Operator">ùïå[</a> <a id="21576" href="Demos.HSP.html#20987" class="Bound">ùë®</a> <a id="21578" href="Demos.HSP.html#18916" class="Function Operator">]</a>
          <a id="21590" class="Symbol">;</a> <a id="21592" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a>            <a id="21607" class="Symbol">=</a> <a id="21609" class="Symbol">Œª</a> <a id="21611" href="Demos.HSP.html#21611" class="Bound">x</a> <a id="21613" href="Demos.HSP.html#21613" class="Bound">y</a> <a id="21615" class="Symbol">‚Üí</a> <a id="21617" href="Level.html#400" class="Record">Lift</a> <a id="21622" href="Demos.HSP.html#21539" class="Bound">‚Ñì</a> <a id="21624" class="Symbol">(</a><a id="21625" href="Demos.HSP.html#21611" class="Bound">x</a> <a id="21627" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a> <a id="21629" href="Demos.HSP.html#21613" class="Bound">y</a><a id="21630" class="Symbol">)</a>
          <a id="21642" class="Symbol">;</a> <a id="21644" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a>  <a id="21659" class="Symbol">=</a> <a id="21661" class="Keyword">record</a>  <a id="21669" class="Symbol">{</a> <a id="21671" href="Relation.Binary.Structures.html#1568" class="Field">refl</a>  <a id="21677" class="Symbol">=</a> <a id="21679" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="21684" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>
                                     <a id="21726" class="Symbol">;</a> <a id="21728" href="Relation.Binary.Structures.html#1594" class="Field">sym</a>   <a id="21734" class="Symbol">=</a> <a id="21736" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="21741" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="21743" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="21747" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="21749" href="Level.html#470" class="Field">lower</a>
                                     <a id="21792" class="Symbol">;</a> <a id="21794" href="Relation.Binary.Structures.html#1620" class="Field">trans</a> <a id="21800" class="Symbol">=</a> <a id="21802" class="Symbol">Œª</a> <a id="21804" href="Demos.HSP.html#21804" class="Bound">x</a> <a id="21806" href="Demos.HSP.html#21806" class="Bound">y</a> <a id="21808" class="Symbol">‚Üí</a> <a id="21810" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="21815" class="Symbol">(</a><a id="21816" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="21822" class="Symbol">(</a><a id="21823" href="Level.html#470" class="Field">lower</a> <a id="21829" href="Demos.HSP.html#21804" class="Bound">x</a><a id="21830" class="Symbol">)(</a><a id="21832" href="Level.html#470" class="Field">lower</a> <a id="21838" href="Demos.HSP.html#21806" class="Bound">y</a><a id="21839" class="Symbol">))</a> <a id="21842" class="Symbol">}}</a>

 <a id="21847" href="Demos.HSP.html#18302" class="Field">Interp</a> <a id="21854" class="Symbol">(</a><a id="21855" href="Demos.HSP.html#21475" class="Function">Lift-Alg ≥</a> <a id="21865" href="Demos.HSP.html#21865" class="Bound">‚Ñì</a> <a id="21867" class="Symbol">)</a> <a id="21869" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="21873" class="Symbol">(</a><a id="21874" href="Demos.HSP.html#21874" class="Bound">f</a> <a id="21876" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="21878" href="Demos.HSP.html#21878" class="Bound">la</a><a id="21880" class="Symbol">)</a> <a id="21882" class="Symbol">=</a> <a id="21884" class="Symbol">(</a><a id="21885" href="Demos.HSP.html#21874" class="Bound">f</a> <a id="21887" href="Demos.HSP.html#18975" class="Function Operator">ÃÇ</a> <a id="21889" href="Demos.HSP.html#20987" class="Bound">ùë®</a><a id="21890" class="Symbol">)</a> <a id="21892" href="Demos.HSP.html#21878" class="Bound">la</a>
 <a id="21896" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="21901" class="Symbol">(</a><a id="21902" href="Demos.HSP.html#18302" class="Field">Interp</a> <a id="21909" class="Symbol">(</a><a id="21910" href="Demos.HSP.html#21475" class="Function">Lift-Alg ≥</a> <a id="21920" href="Demos.HSP.html#21920" class="Bound">‚Ñì</a><a id="21921" class="Symbol">))(</a><a id="21924" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="21931" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="21933" href="Demos.HSP.html#21933" class="Bound">lab</a><a id="21936" class="Symbol">)</a> <a id="21938" class="Symbol">=</a> <a id="21940" href="Level.html#457" class="InductiveConstructor">lift</a><a id="21944" class="Symbol">(</a><a id="21945" href="Function.Bundles.html#1938" class="Field">cong</a><a id="21949" class="Symbol">(</a><a id="21950" href="Demos.HSP.html#18302" class="Field">Interp</a> <a id="21957" href="Demos.HSP.html#20987" class="Bound">ùë®</a><a id="21958" class="Symbol">)(</a><a id="21960" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="21967" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="21969" class="Symbol">Œª</a> <a id="21971" href="Demos.HSP.html#21971" class="Bound">i</a> <a id="21973" class="Symbol">‚Üí</a> <a id="21975" href="Level.html#470" class="Field">lower</a> <a id="21981" class="Symbol">(</a><a id="21982" href="Demos.HSP.html#21933" class="Bound">lab</a> <a id="21986" href="Demos.HSP.html#21971" class="Bound">i</a><a id="21987" class="Symbol">)))</a>

<a id="Lift-Alg"></a><a id="21992" href="Demos.HSP.html#21992" class="Function">Lift-Alg</a> <a id="22001" class="Symbol">:</a> <a id="22003" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="22011" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="22013" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a> <a id="22016" class="Symbol">‚Üí</a> <a id="22018" class="Symbol">(</a><a id="22019" href="Demos.HSP.html#22019" class="Bound">‚Ñì‚ÇÄ</a> <a id="22022" href="Demos.HSP.html#22022" class="Bound">‚Ñì‚ÇÅ</a> <a id="22025" class="Symbol">:</a> <a id="22027" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="22032" class="Symbol">)</a> <a id="22034" class="Symbol">‚Üí</a> <a id="22036" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="22044" class="Symbol">(</a><a id="22045" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="22047" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="22049" href="Demos.HSP.html#22019" class="Bound">‚Ñì‚ÇÄ</a><a id="22051" class="Symbol">)</a> <a id="22053" class="Symbol">(</a><a id="22054" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a> <a id="22057" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="22059" href="Demos.HSP.html#22022" class="Bound">‚Ñì‚ÇÅ</a><a id="22061" class="Symbol">)</a>
<a id="22063" href="Demos.HSP.html#21992" class="Function">Lift-Alg</a> <a id="22072" href="Demos.HSP.html#22072" class="Bound">ùë®</a> <a id="22074" href="Demos.HSP.html#22074" class="Bound">‚Ñì‚ÇÄ</a> <a id="22077" href="Demos.HSP.html#22077" class="Bound">‚Ñì‚ÇÅ</a> <a id="22080" class="Symbol">=</a> <a id="22082" href="Demos.HSP.html#21475" class="Function">Lift-Alg ≥</a> <a id="22092" class="Symbol">(</a><a id="22093" href="Demos.HSP.html#21080" class="Function">Lift-AlgÀ°</a> <a id="22103" href="Demos.HSP.html#22072" class="Bound">ùë®</a> <a id="22105" href="Demos.HSP.html#22074" class="Bound">‚Ñì‚ÇÄ</a><a id="22107" class="Symbol">)</a> <a id="22109" href="Demos.HSP.html#22077" class="Bound">‚Ñì‚ÇÅ</a>

</pre>

Recall that our `Algebra` type has two universe level parameters corresponding to those of the domain setoid.
Concretely, an algebra of type `Algebra Œ± œÅ·µÉ` has a `Domain` of type `Setoid Œ± œÅ·µÉ`. This packages a 
"carrier set" (`Carrier`), inhabiting `Type Œ±`, with an equality on `Carrier` of type `Rel Carrier œÅ·µÉ`.
`Lift-Alg` takes an algebra parametrized by levels `Œ±` and `œÅ·µÉ` and constructs a new algebra whose carrier 
inhabits `Type (Œ± ‚äî ‚Ñì‚ÇÄ)` and whose equivalence inhabits `Rel Carrier (œÅ·µÉ ‚äî ‚Ñì‚ÇÅ)`.
To be useful, this lifting operation should result in an algebra with the same semantic properties
as the one we started with. We will see in ¬ß[3.4](#lift-alg-is-an-algebraic-invariant) that this is indeed the case.


### <a id="product-algebras">Product Algebras</a>

We define the *product* of a family of algebras as follows. Let `Œπ` be a universe and
`I : Type Œπ` a type (the "indexing type"). Then `ùíú : I ‚Üí Algebra Œ± œÅ·µÉ` represents an *indexed family of algebras*. Denote by `‚®Ö ùíú` the *product of algebras* in `ùíú` (or *product algebra*), by which we mean the algebra 
whose domain is the Cartesian product `‚àè[i ‚àà I] ùîª[ ùíú i ]` of the domains of the algebras in `ùíú`, and
whose operations are those arising from the point-wise interpretation of the operation symbols in the obvious way: if `f` is a `J`-ary operation symbol and if `a : Œ†[ i ‚àà I ] J ‚Üí ùîª[ ùíú i ]` is, for each
`i : I`, a `J`-tuple of elements of the domain `ùîª[ ùíú i ]`, then we define the interpretation of `f` 
in `‚®Ö ùíú` by

`(f ÃÇ ‚®Ö ùíú) a := Œª (i : I) ‚Üí (f ÃÇ ùíú i)(a i)`.

Here is the formal definition of the product algebra type in [Agda][].

<pre class="Agda">

<a id="23751" class="Keyword">module</a> <a id="23758" href="Demos.HSP.html#23758" class="Module">_</a> <a id="23760" class="Symbol">{</a><a id="23761" href="Demos.HSP.html#23761" class="Bound">Œπ</a> <a id="23763" class="Symbol">:</a> <a id="23765" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="23770" class="Symbol">}{</a><a id="23772" href="Demos.HSP.html#23772" class="Bound">I</a> <a id="23774" class="Symbol">:</a> <a id="23776" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="23781" href="Demos.HSP.html#23761" class="Bound">Œπ</a> <a id="23783" class="Symbol">}</a> <a id="23785" class="Keyword">where</a>

 <a id="23793" href="Demos.HSP.html#23793" class="Function">‚®Ö</a> <a id="23795" class="Symbol">:</a> <a id="23797" class="Symbol">(</a><a id="23798" href="Demos.HSP.html#23798" class="Bound">ùíú</a> <a id="23800" class="Symbol">:</a> <a id="23802" href="Demos.HSP.html#23772" class="Bound">I</a> <a id="23804" class="Symbol">‚Üí</a> <a id="23806" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="23814" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="23816" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a><a id="23818" class="Symbol">)</a> <a id="23820" class="Symbol">‚Üí</a> <a id="23822" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="23830" class="Symbol">(</a><a id="23831" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="23833" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="23835" href="Demos.HSP.html#23761" class="Bound">Œπ</a><a id="23836" class="Symbol">)</a> <a id="23838" class="Symbol">(</a><a id="23839" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a> <a id="23842" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="23844" href="Demos.HSP.html#23761" class="Bound">Œπ</a><a id="23845" class="Symbol">)</a>

 <a id="23849" href="Demos.HSP.html#18273" class="Field">Domain</a> <a id="23856" class="Symbol">(</a><a id="23857" href="Demos.HSP.html#23793" class="Function">‚®Ö</a> <a id="23859" href="Demos.HSP.html#23859" class="Bound">ùíú</a><a id="23860" class="Symbol">)</a> <a id="23862" class="Symbol">=</a> <a id="23864" class="Keyword">record</a>  <a id="23872" class="Symbol">{</a> <a id="23874" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="23882" class="Symbol">=</a> <a id="23884" class="Symbol">‚àÄ</a> <a id="23886" href="Demos.HSP.html#23886" class="Bound">i</a> <a id="23888" class="Symbol">‚Üí</a> <a id="23890" href="Demos.HSP.html#18916" class="Function Operator">ùïå[</a> <a id="23893" href="Demos.HSP.html#23859" class="Bound">ùíú</a> <a id="23895" href="Demos.HSP.html#23886" class="Bound">i</a> <a id="23897" href="Demos.HSP.html#18916" class="Function Operator">]</a>
                        <a id="23923" class="Symbol">;</a> <a id="23925" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="23929" class="Symbol">=</a> <a id="23931" class="Symbol">Œª</a> <a id="23933" href="Demos.HSP.html#23933" class="Bound">a</a> <a id="23935" href="Demos.HSP.html#23935" class="Bound">b</a> <a id="23937" class="Symbol">‚Üí</a> <a id="23939" class="Symbol">‚àÄ</a> <a id="23941" href="Demos.HSP.html#23941" class="Bound">i</a> <a id="23943" class="Symbol">‚Üí</a> <a id="23945" class="Symbol">(</a><a id="23946" href="Demos.HSP.html#6930" class="Field Operator">_‚âàÀ¢_</a> <a id="23951" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="23954" href="Demos.HSP.html#23859" class="Bound">ùíú</a> <a id="23956" href="Demos.HSP.html#23941" class="Bound">i</a> <a id="23958" href="Demos.HSP.html#18862" class="Function Operator">]</a><a id="23959" class="Symbol">)</a> <a id="23961" class="Symbol">(</a><a id="23962" href="Demos.HSP.html#23933" class="Bound">a</a> <a id="23964" href="Demos.HSP.html#23941" class="Bound">i</a><a id="23965" class="Symbol">)(</a><a id="23967" href="Demos.HSP.html#23935" class="Bound">b</a> <a id="23969" href="Demos.HSP.html#23941" class="Bound">i</a><a id="23970" class="Symbol">)</a>
                        <a id="23996" class="Symbol">;</a> <a id="23998" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="24012" class="Symbol">=</a>
                           <a id="24041" class="Keyword">record</a>  <a id="24049" class="Symbol">{</a> <a id="24051" href="Relation.Binary.Structures.html#1568" class="Field">refl</a> <a id="24056" class="Symbol">=</a> <a id="24058" class="Symbol">Œª</a> <a id="24060" href="Demos.HSP.html#24060" class="Bound">i</a> <a id="24062" class="Symbol">‚Üí</a> <a id="24064" href="Demos.HSP.html#6526" class="Field">refl·µâ</a> <a id="24070" class="Symbol">(</a><a id="24071" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="24085" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="24088" href="Demos.HSP.html#23859" class="Bound">ùíú</a> <a id="24090" href="Demos.HSP.html#24060" class="Bound">i</a> <a id="24092" href="Demos.HSP.html#18862" class="Function Operator">]</a><a id="24093" class="Symbol">)</a>
                                   <a id="24130" class="Symbol">;</a> <a id="24132" href="Relation.Binary.Structures.html#1594" class="Field">sym</a> <a id="24136" class="Symbol">=</a> <a id="24138" class="Symbol">Œª</a> <a id="24140" href="Demos.HSP.html#24140" class="Bound">x</a> <a id="24142" href="Demos.HSP.html#24142" class="Bound">i</a> <a id="24144" class="Symbol">‚Üí</a> <a id="24146" href="Demos.HSP.html#6587" class="Field">sym·µâ</a> <a id="24151" class="Symbol">(</a><a id="24152" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="24166" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="24169" href="Demos.HSP.html#23859" class="Bound">ùíú</a> <a id="24171" href="Demos.HSP.html#24142" class="Bound">i</a> <a id="24173" href="Demos.HSP.html#18862" class="Function Operator">]</a><a id="24174" class="Symbol">)(</a><a id="24176" href="Demos.HSP.html#24140" class="Bound">x</a> <a id="24178" href="Demos.HSP.html#24142" class="Bound">i</a><a id="24179" class="Symbol">)</a>
                                   <a id="24216" class="Symbol">;</a> <a id="24218" href="Relation.Binary.Structures.html#1620" class="Field">trans</a> <a id="24224" class="Symbol">=</a> <a id="24226" class="Symbol">Œª</a> <a id="24228" href="Demos.HSP.html#24228" class="Bound">x</a> <a id="24230" href="Demos.HSP.html#24230" class="Bound">y</a> <a id="24232" href="Demos.HSP.html#24232" class="Bound">i</a> <a id="24234" class="Symbol">‚Üí</a> <a id="24236" href="Demos.HSP.html#6648" class="Field">trans·µâ</a> <a id="24243" class="Symbol">(</a><a id="24244" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="24258" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="24261" href="Demos.HSP.html#23859" class="Bound">ùíú</a> <a id="24263" href="Demos.HSP.html#24232" class="Bound">i</a> <a id="24265" href="Demos.HSP.html#18862" class="Function Operator">]</a><a id="24266" class="Symbol">)(</a><a id="24268" href="Demos.HSP.html#24228" class="Bound">x</a> <a id="24270" href="Demos.HSP.html#24232" class="Bound">i</a><a id="24271" class="Symbol">)(</a><a id="24273" href="Demos.HSP.html#24230" class="Bound">y</a> <a id="24275" href="Demos.HSP.html#24232" class="Bound">i</a><a id="24276" class="Symbol">)</a> <a id="24278" class="Symbol">}}</a>

 <a id="24283" href="Demos.HSP.html#18302" class="Field">Interp</a> <a id="24290" class="Symbol">(</a><a id="24291" href="Demos.HSP.html#23793" class="Function">‚®Ö</a> <a id="24293" href="Demos.HSP.html#24293" class="Bound">ùíú</a><a id="24294" class="Symbol">)</a> <a id="24296" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="24300" class="Symbol">(</a><a id="24301" href="Demos.HSP.html#24301" class="Bound">f</a> <a id="24303" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="24305" href="Demos.HSP.html#24305" class="Bound">a</a><a id="24306" class="Symbol">)</a> <a id="24308" class="Symbol">=</a> <a id="24310" class="Symbol">Œª</a> <a id="24312" href="Demos.HSP.html#24312" class="Bound">i</a> <a id="24314" class="Symbol">‚Üí</a> <a id="24316" class="Symbol">(</a><a id="24317" href="Demos.HSP.html#24301" class="Bound">f</a> <a id="24319" href="Demos.HSP.html#18975" class="Function Operator">ÃÇ</a> <a id="24321" class="Symbol">(</a><a id="24322" href="Demos.HSP.html#24293" class="Bound">ùíú</a> <a id="24324" href="Demos.HSP.html#24312" class="Bound">i</a><a id="24325" class="Symbol">))</a> <a id="24328" class="Symbol">(</a><a id="24329" href="Function.Base.html#1554" class="Function">flip</a> <a id="24334" href="Demos.HSP.html#24305" class="Bound">a</a> <a id="24336" href="Demos.HSP.html#24312" class="Bound">i</a><a id="24337" class="Symbol">)</a>
 <a id="24340" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="24345" class="Symbol">(</a><a id="24346" href="Demos.HSP.html#18302" class="Field">Interp</a> <a id="24353" class="Symbol">(</a><a id="24354" href="Demos.HSP.html#23793" class="Function">‚®Ö</a> <a id="24356" href="Demos.HSP.html#24356" class="Bound">ùíú</a><a id="24357" class="Symbol">))</a> <a id="24360" class="Symbol">(</a><a id="24361" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="24368" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="24370" href="Demos.HSP.html#24370" class="Bound">f=g</a> <a id="24374" class="Symbol">)</a> <a id="24376" class="Symbol">=</a> <a id="24378" class="Symbol">Œª</a> <a id="24380" href="Demos.HSP.html#24380" class="Bound">i</a> <a id="24382" class="Symbol">‚Üí</a> <a id="24384" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="24389" class="Symbol">(</a><a id="24390" href="Demos.HSP.html#18302" class="Field">Interp</a> <a id="24397" class="Symbol">(</a><a id="24398" href="Demos.HSP.html#24356" class="Bound">ùíú</a> <a id="24400" href="Demos.HSP.html#24380" class="Bound">i</a><a id="24401" class="Symbol">))</a> <a id="24404" class="Symbol">(</a><a id="24405" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="24412" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="24414" href="Function.Base.html#1554" class="Function">flip</a> <a id="24419" href="Demos.HSP.html#24370" class="Bound">f=g</a> <a id="24423" href="Demos.HSP.html#24380" class="Bound">i</a> <a id="24425" class="Symbol">)</a>

</pre>

Evidently, the carrier of the product algebra type is indeed the (dependent) product of the carriers in the indexed family. The rest of the definitions are the point-wise versions of the underlying ones.

### <a id="structure-preserving-maps-and-isomorphism">Structure preserving maps and isomorphism</a>

Throughout the rest of the paper, unless stated otherwise, `ùë®` and `ùë©` will denote `ùëÜ`-algebras inhabiting the types `Algebra Œ± œÅ·µÉ` and `Algebra Œ≤ œÅ·µá`, respectively.

A *homomorphism* (or "hom") from `ùë®` to `ùë©` is a setoid function `h : ùîª[ ùë® ] ‚ü∂ ùîª[ ùë© ]`
that is *compatible* with all basic operations; that is, for
every operation symbol `f : ‚à£ ùëÜ ‚à£` and all tuples `a : ‚à• ùëÜ ‚à• f ‚Üí ùïå[ ùë® ]`, we have 
`h ‚ü®$‚ü© (f ÃÇ ùë®) a ‚âà (f ÃÇ ùë©) Œª x ‚Üí h ‚ü®$‚ü© (a x)`.

It is convenient to first formalize "compatible" (`compatible-map-op`),
representing the assertion that a given setoid function
`h : ùîª[ ùë® ] ‚ü∂ ùîª[ ùë© ]` commutes with a given operation symbol `f`, and then generalize over 
operation symbols to yield the type (`compatible-map`) of compatible maps from (the domain of)
`ùë®` to (the domain of) `ùë©`.

<pre class="Agda">

<a id="25550" class="Keyword">module</a> <a id="25557" href="Demos.HSP.html#25557" class="Module">_</a> <a id="25559" class="Symbol">(</a><a id="25560" href="Demos.HSP.html#25560" class="Bound">ùë®</a> <a id="25562" class="Symbol">:</a> <a id="25564" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="25572" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="25574" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a><a id="25576" class="Symbol">)(</a><a id="25578" href="Demos.HSP.html#25578" class="Bound">ùë©</a> <a id="25580" class="Symbol">:</a> <a id="25582" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="25590" href="Demos.HSP.html#7261" class="Generalizable">Œ≤</a> <a id="25592" href="Demos.HSP.html#7263" class="Generalizable">œÅ·µá</a><a id="25594" class="Symbol">)</a> <a id="25596" class="Keyword">where</a>

 <a id="25604" href="Demos.HSP.html#25604" class="Function">compatible-map-op</a> <a id="25622" class="Symbol">:</a> <a id="25624" class="Symbol">(</a><a id="25625" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="25628" href="Demos.HSP.html#25560" class="Bound">ùë®</a> <a id="25630" href="Demos.HSP.html#18862" class="Function Operator">]</a> <a id="25632" href="Demos.HSP.html#6322" class="Record Operator">‚ü∂</a> <a id="25634" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="25637" href="Demos.HSP.html#25578" class="Bound">ùë©</a> <a id="25639" href="Demos.HSP.html#18862" class="Function Operator">]</a><a id="25640" class="Symbol">)</a> <a id="25642" class="Symbol">‚Üí</a> <a id="25644" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="25646" href="Demos.HSP.html#5126" class="Bound">ùëÜ</a> <a id="25648" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="25650" class="Symbol">‚Üí</a> <a id="25652" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="25657" class="Symbol">_</a>
 <a id="25660" href="Demos.HSP.html#25604" class="Function">compatible-map-op</a> <a id="25678" href="Demos.HSP.html#25678" class="Bound">h</a> <a id="25680" href="Demos.HSP.html#25680" class="Bound">f</a> <a id="25682" class="Symbol">=</a> <a id="25684" class="Symbol">‚àÄ</a> <a id="25686" class="Symbol">{</a><a id="25687" href="Demos.HSP.html#25687" class="Bound">a</a><a id="25688" class="Symbol">}</a> <a id="25690" class="Symbol">‚Üí</a> <a id="25692" href="Demos.HSP.html#25678" class="Bound">h</a> <a id="25694" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="25698" class="Symbol">(</a><a id="25699" href="Demos.HSP.html#25680" class="Bound">f</a> <a id="25701" href="Demos.HSP.html#18975" class="Function Operator">ÃÇ</a> <a id="25703" href="Demos.HSP.html#25560" class="Bound">ùë®</a><a id="25704" class="Symbol">)</a> <a id="25706" href="Demos.HSP.html#25687" class="Bound">a</a> <a id="25708" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a> <a id="25710" class="Symbol">(</a><a id="25711" href="Demos.HSP.html#25680" class="Bound">f</a> <a id="25713" href="Demos.HSP.html#18975" class="Function Operator">ÃÇ</a> <a id="25715" href="Demos.HSP.html#25578" class="Bound">ùë©</a><a id="25716" class="Symbol">)</a> <a id="25718" class="Symbol">Œª</a> <a id="25720" href="Demos.HSP.html#25720" class="Bound">x</a> <a id="25722" class="Symbol">‚Üí</a> <a id="25724" href="Demos.HSP.html#25678" class="Bound">h</a> <a id="25726" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="25730" class="Symbol">(</a><a id="25731" href="Demos.HSP.html#25687" class="Bound">a</a> <a id="25733" href="Demos.HSP.html#25720" class="Bound">x</a><a id="25734" class="Symbol">)</a>
  <a id="25738" class="Keyword">where</a> <a id="25744" class="Keyword">open</a> <a id="25749" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="25756" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="25759" href="Demos.HSP.html#25578" class="Bound">ùë©</a> <a id="25761" href="Demos.HSP.html#18862" class="Function Operator">]</a> <a id="25763" class="Keyword">using</a> <a id="25769" class="Symbol">(</a> <a id="25771" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="25775" class="Symbol">)</a>

 <a id="25779" href="Demos.HSP.html#25779" class="Function">compatible-map</a> <a id="25794" class="Symbol">:</a> <a id="25796" class="Symbol">(</a><a id="25797" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="25800" href="Demos.HSP.html#25560" class="Bound">ùë®</a> <a id="25802" href="Demos.HSP.html#18862" class="Function Operator">]</a> <a id="25804" href="Demos.HSP.html#6322" class="Record Operator">‚ü∂</a> <a id="25806" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="25809" href="Demos.HSP.html#25578" class="Bound">ùë©</a> <a id="25811" href="Demos.HSP.html#18862" class="Function Operator">]</a><a id="25812" class="Symbol">)</a> <a id="25814" class="Symbol">‚Üí</a> <a id="25816" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="25821" class="Symbol">_</a>
 <a id="25824" href="Demos.HSP.html#25779" class="Function">compatible-map</a> <a id="25839" href="Demos.HSP.html#25839" class="Bound">h</a> <a id="25841" class="Symbol">=</a> <a id="25843" class="Symbol">‚àÄ</a> <a id="25845" class="Symbol">{</a><a id="25846" href="Demos.HSP.html#25846" class="Bound">f</a><a id="25847" class="Symbol">}</a> <a id="25849" class="Symbol">‚Üí</a> <a id="25851" href="Demos.HSP.html#25604" class="Function">compatible-map-op</a> <a id="25869" href="Demos.HSP.html#25839" class="Bound">h</a> <a id="25871" href="Demos.HSP.html#25846" class="Bound">f</a>

</pre>

Using these we define the property (`IsHom`) of being a homomorphism, and
finally the type (`hom`) of homomorphisms from `ùë®` to `ùë©`.

<pre class="Agda">

 <a id="26035" class="Keyword">record</a> <a id="26042" href="Demos.HSP.html#26042" class="Record">IsHom</a> <a id="26048" class="Symbol">(</a><a id="26049" href="Demos.HSP.html#26049" class="Bound">h</a> <a id="26051" class="Symbol">:</a> <a id="26053" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="26056" href="Demos.HSP.html#25560" class="Bound">ùë®</a> <a id="26058" href="Demos.HSP.html#18862" class="Function Operator">]</a> <a id="26060" href="Demos.HSP.html#6322" class="Record Operator">‚ü∂</a> <a id="26062" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="26065" href="Demos.HSP.html#25578" class="Bound">ùë©</a> <a id="26067" href="Demos.HSP.html#18862" class="Function Operator">]</a><a id="26068" class="Symbol">)</a> <a id="26070" class="Symbol">:</a> <a id="26072" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="26077" class="Symbol">(</a><a id="26078" href="Demos.HSP.html#5140" class="Bound">ùìû</a> <a id="26080" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="26082" href="Demos.HSP.html#5142" class="Bound">ùì•</a> <a id="26084" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="26086" href="Demos.HSP.html#25572" class="Bound">Œ±</a> <a id="26088" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="26090" href="Demos.HSP.html#25592" class="Bound">œÅ·µá</a><a id="26092" class="Symbol">)</a> <a id="26094" class="Keyword">where</a>
  <a id="26102" class="Keyword">constructor</a>  <a id="26115" href="Demos.HSP.html#26115" class="InductiveConstructor">mkhom</a>
  <a id="26123" class="Keyword">field</a>        <a id="26136" href="Demos.HSP.html#26136" class="Field">compatible</a> <a id="26147" class="Symbol">:</a> <a id="26149" href="Demos.HSP.html#25779" class="Function">compatible-map</a> <a id="26164" href="Demos.HSP.html#26049" class="Bound">h</a>

 <a id="26168" href="Demos.HSP.html#26168" class="Function">hom</a> <a id="26172" class="Symbol">:</a> <a id="26174" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="26179" class="Symbol">_</a>
 <a id="26182" href="Demos.HSP.html#26168" class="Function">hom</a> <a id="26186" class="Symbol">=</a> <a id="26188" href="Agda.Builtin.Sigma.html#166" class="Record">Œ£</a> <a id="26190" class="Symbol">(</a><a id="26191" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a>¬†<a id="26194" href="Demos.HSP.html#25560" class="Bound">ùë®</a> <a id="26196" href="Demos.HSP.html#18862" class="Function Operator">]</a> <a id="26198" href="Demos.HSP.html#6322" class="Record Operator">‚ü∂</a> <a id="26200" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="26203" href="Demos.HSP.html#25578" class="Bound">ùë©</a> <a id="26205" href="Demos.HSP.html#18862" class="Function Operator">]</a><a id="26206" class="Symbol">)</a> <a id="26208" href="Demos.HSP.html#26042" class="Record">IsHom</a>

</pre>

Thus, an inhabitant of `hom ùë® ùë©` is a pair `(h , p)` consisting of a setoid function
`h`, from the domain of `ùë®` to that of `ùë©`, along with a proof `p` that `h` is a homomorphism.

A *monomorphism* (resp. *epimorphism*) is an injective (resp. surjective) homomorphism. The [agda-algebras][] 
library defines predicates and for these, as well as and for the corresponding types.

<pre class="Agda">

 <a id="26621" class="Keyword">record</a> <a id="26628" href="Demos.HSP.html#26628" class="Record">IsMon</a> <a id="26634" class="Symbol">(</a><a id="26635" href="Demos.HSP.html#26635" class="Bound">h</a> <a id="26637" class="Symbol">:</a> <a id="26639" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="26642" href="Demos.HSP.html#25560" class="Bound">ùë®</a> <a id="26644" href="Demos.HSP.html#18862" class="Function Operator">]</a> <a id="26646" href="Demos.HSP.html#6322" class="Record Operator">‚ü∂</a> <a id="26648" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="26651" href="Demos.HSP.html#25578" class="Bound">ùë©</a> <a id="26653" href="Demos.HSP.html#18862" class="Function Operator">]</a><a id="26654" class="Symbol">)</a> <a id="26656" class="Symbol">:</a> <a id="26658" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="26663" class="Symbol">(</a><a id="26664" href="Demos.HSP.html#5140" class="Bound">ùìû</a> <a id="26666" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="26668" href="Demos.HSP.html#5142" class="Bound">ùì•</a> <a id="26670" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="26672" href="Demos.HSP.html#25572" class="Bound">Œ±</a> <a id="26674" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="26676" href="Demos.HSP.html#25574" class="Bound">œÅ·µÉ</a> <a id="26679" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="26681" href="Demos.HSP.html#25592" class="Bound">œÅ·µá</a><a id="26683" class="Symbol">)</a> <a id="26685" class="Keyword">where</a>
  <a id="26693" class="Keyword">field</a>  <a id="26700" href="Demos.HSP.html#26700" class="Field">isHom</a> <a id="26706" class="Symbol">:</a> <a id="26708" href="Demos.HSP.html#26042" class="Record">IsHom</a> <a id="26714" href="Demos.HSP.html#26635" class="Bound">h</a>
         <a id="26725" href="Demos.HSP.html#26725" class="Field">isInjective</a> <a id="26737" class="Symbol">:</a> <a id="26739" href="Demos.HSP.html#12069" class="Function">IsInjective</a> <a id="26751" href="Demos.HSP.html#26635" class="Bound">h</a>
  <a id="26755" href="Demos.HSP.html#26755" class="Function">HomReduct</a> <a id="26765" class="Symbol">:</a> <a id="26767" href="Demos.HSP.html#26168" class="Function">hom</a>
  <a id="26773" href="Demos.HSP.html#26755" class="Function">HomReduct</a> <a id="26783" class="Symbol">=</a> <a id="26785" href="Demos.HSP.html#26635" class="Bound">h</a> <a id="26787" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="26789" href="Demos.HSP.html#26700" class="Field">isHom</a>

 <a id="26797" href="Demos.HSP.html#26797" class="Function">mon</a> <a id="26801" class="Symbol">:</a> <a id="26803" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="26808" class="Symbol">_</a>
 <a id="26811" href="Demos.HSP.html#26797" class="Function">mon</a> <a id="26815" class="Symbol">=</a> <a id="26817" href="Agda.Builtin.Sigma.html#166" class="Record">Œ£</a> <a id="26819" class="Symbol">(</a><a id="26820" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="26823" href="Demos.HSP.html#25560" class="Bound">ùë®</a> <a id="26825" href="Demos.HSP.html#18862" class="Function Operator">]</a> <a id="26827" href="Demos.HSP.html#6322" class="Record Operator">‚ü∂</a> <a id="26829" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="26832" href="Demos.HSP.html#25578" class="Bound">ùë©</a> <a id="26834" href="Demos.HSP.html#18862" class="Function Operator">]</a><a id="26835" class="Symbol">)</a> <a id="26837" href="Demos.HSP.html#26628" class="Record">IsMon</a>

</pre>

As with `hom`, the type `mon` is a dependent product type; each inhabitant is a pair
consisting of a setoid function, say, `h`, along with a proof that `h` is a monomorphism.

<pre class="Agda">

 <a id="27047" class="Keyword">record</a> <a id="27054" href="Demos.HSP.html#27054" class="Record">IsEpi</a> <a id="27060" class="Symbol">(</a><a id="27061" href="Demos.HSP.html#27061" class="Bound">h</a> <a id="27063" class="Symbol">:</a> <a id="27065" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="27068" href="Demos.HSP.html#25560" class="Bound">ùë®</a> <a id="27070" href="Demos.HSP.html#18862" class="Function Operator">]</a> <a id="27072" href="Demos.HSP.html#6322" class="Record Operator">‚ü∂</a> <a id="27074" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="27077" href="Demos.HSP.html#25578" class="Bound">ùë©</a> <a id="27079" href="Demos.HSP.html#18862" class="Function Operator">]</a><a id="27080" class="Symbol">)</a> <a id="27082" class="Symbol">:</a> <a id="27084" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="27089" class="Symbol">(</a><a id="27090" href="Demos.HSP.html#5140" class="Bound">ùìû</a> <a id="27092" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="27094" href="Demos.HSP.html#5142" class="Bound">ùì•</a> <a id="27096" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="27098" href="Demos.HSP.html#25572" class="Bound">Œ±</a> <a id="27100" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="27102" href="Demos.HSP.html#25590" class="Bound">Œ≤</a> <a id="27104" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="27106" href="Demos.HSP.html#25592" class="Bound">œÅ·µá</a><a id="27108" class="Symbol">)</a> <a id="27110" class="Keyword">where</a>
  <a id="27118" class="Keyword">field</a>  <a id="27125" href="Demos.HSP.html#27125" class="Field">isHom</a> <a id="27131" class="Symbol">:</a> <a id="27133" href="Demos.HSP.html#26042" class="Record">IsHom</a> <a id="27139" href="Demos.HSP.html#27061" class="Bound">h</a>
         <a id="27150" href="Demos.HSP.html#27150" class="Field">isSurjective</a> <a id="27163" class="Symbol">:</a> <a id="27165" href="Demos.HSP.html#12152" class="Function">IsSurjective</a> <a id="27178" href="Demos.HSP.html#27061" class="Bound">h</a>
  <a id="27182" href="Demos.HSP.html#27182" class="Function">HomReduct</a> <a id="27192" class="Symbol">:</a> <a id="27194" href="Demos.HSP.html#26168" class="Function">hom</a>
  <a id="27200" href="Demos.HSP.html#27182" class="Function">HomReduct</a> <a id="27210" class="Symbol">=</a> <a id="27212" href="Demos.HSP.html#27061" class="Bound">h</a> <a id="27214" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="27216" href="Demos.HSP.html#27125" class="Field">isHom</a>

 <a id="27224" href="Demos.HSP.html#27224" class="Function">epi</a> <a id="27228" class="Symbol">:</a> <a id="27230" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="27235" class="Symbol">_</a>
 <a id="27238" href="Demos.HSP.html#27224" class="Function">epi</a> <a id="27242" class="Symbol">=</a> <a id="27244" href="Agda.Builtin.Sigma.html#166" class="Record">Œ£</a> <a id="27246" class="Symbol">(</a><a id="27247" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="27250" href="Demos.HSP.html#25560" class="Bound">ùë®</a> <a id="27252" href="Demos.HSP.html#18862" class="Function Operator">]</a> <a id="27254" href="Demos.HSP.html#6322" class="Record Operator">‚ü∂</a> <a id="27256" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="27259" href="Demos.HSP.html#25578" class="Bound">ùë©</a> <a id="27261" href="Demos.HSP.html#18862" class="Function Operator">]</a><a id="27262" class="Symbol">)</a> <a id="27264" href="Demos.HSP.html#27054" class="Record">IsEpi</a>

</pre>

Here are two utilities that are useful for translating between types.

<pre class="Agda">

<a id="27368" class="Keyword">open</a> <a id="27373" href="Demos.HSP.html#26042" class="Module">IsHom</a> <a id="27379" class="Symbol">;</a> <a id="27381" class="Keyword">open</a> <a id="27386" href="Demos.HSP.html#26628" class="Module">IsMon</a> <a id="27392" class="Symbol">;</a> <a id="27394" class="Keyword">open</a> <a id="27399" href="Demos.HSP.html#27054" class="Module">IsEpi</a>
<a id="27405" class="Keyword">module</a> <a id="27412" href="Demos.HSP.html#27412" class="Module">_</a> <a id="27414" class="Symbol">(</a><a id="27415" href="Demos.HSP.html#27415" class="Bound">ùë®</a> <a id="27417" class="Symbol">:</a> <a id="27419" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="27427" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="27429" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a><a id="27431" class="Symbol">)(</a><a id="27433" href="Demos.HSP.html#27433" class="Bound">ùë©</a> <a id="27435" class="Symbol">:</a> <a id="27437" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="27445" href="Demos.HSP.html#7261" class="Generalizable">Œ≤</a> <a id="27447" href="Demos.HSP.html#7263" class="Generalizable">œÅ·µá</a><a id="27449" class="Symbol">)</a> <a id="27451" class="Keyword">where</a>
 <a id="27458" href="Demos.HSP.html#27458" class="Function">mon‚Üíintohom</a> <a id="27470" class="Symbol">:</a> <a id="27472" href="Demos.HSP.html#26797" class="Function">mon</a> <a id="27476" href="Demos.HSP.html#27415" class="Bound">ùë®</a> <a id="27478" href="Demos.HSP.html#27433" class="Bound">ùë©</a> <a id="27480" class="Symbol">‚Üí</a> <a id="27482" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="27485" href="Demos.HSP.html#27485" class="Bound">h</a> <a id="27487" href="Data.Product.html#916" class="Function">‚àà</a> <a id="27489" href="Demos.HSP.html#26168" class="Function">hom</a> <a id="27493" href="Demos.HSP.html#27415" class="Bound">ùë®</a> <a id="27495" href="Demos.HSP.html#27433" class="Bound">ùë©</a> <a id="27497" href="Data.Product.html#916" class="Function">]</a> <a id="27499" href="Demos.HSP.html#12069" class="Function">IsInjective</a> <a id="27511" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="27513" href="Demos.HSP.html#27485" class="Bound">h</a> <a id="27515" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a>
 <a id="27518" href="Demos.HSP.html#27458" class="Function">mon‚Üíintohom</a> <a id="27530" class="Symbol">(</a><a id="27531" href="Demos.HSP.html#27531" class="Bound">hh</a> <a id="27534" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="27536" href="Demos.HSP.html#27536" class="Bound">hhM</a><a id="27539" class="Symbol">)</a> <a id="27541" class="Symbol">=</a> <a id="27543" class="Symbol">(</a><a id="27544" href="Demos.HSP.html#27531" class="Bound">hh</a> <a id="27547" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="27549" href="Demos.HSP.html#26700" class="Field">isHom</a> <a id="27555" href="Demos.HSP.html#27536" class="Bound">hhM</a><a id="27558" class="Symbol">)</a> <a id="27560" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="27562" href="Demos.HSP.html#26725" class="Field">isInjective</a> <a id="27574" href="Demos.HSP.html#27536" class="Bound">hhM</a>

 <a id="27580" href="Demos.HSP.html#27580" class="Function">epi‚Üíontohom</a> <a id="27592" class="Symbol">:</a> <a id="27594" href="Demos.HSP.html#27224" class="Function">epi</a> <a id="27598" href="Demos.HSP.html#27415" class="Bound">ùë®</a> <a id="27600" href="Demos.HSP.html#27433" class="Bound">ùë©</a> <a id="27602" class="Symbol">‚Üí</a> <a id="27604" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="27607" href="Demos.HSP.html#27607" class="Bound">h</a> <a id="27609" href="Data.Product.html#916" class="Function">‚àà</a> <a id="27611" href="Demos.HSP.html#26168" class="Function">hom</a> <a id="27615" href="Demos.HSP.html#27415" class="Bound">ùë®</a> <a id="27617" href="Demos.HSP.html#27433" class="Bound">ùë©</a> <a id="27619" href="Data.Product.html#916" class="Function">]</a> <a id="27621" href="Demos.HSP.html#12152" class="Function">IsSurjective</a> <a id="27634" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="27636" href="Demos.HSP.html#27607" class="Bound">h</a> <a id="27638" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a>
 <a id="27641" href="Demos.HSP.html#27580" class="Function">epi‚Üíontohom</a> <a id="27653" class="Symbol">(</a><a id="27654" href="Demos.HSP.html#27654" class="Bound">hh</a> <a id="27657" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="27659" href="Demos.HSP.html#27659" class="Bound">hhE</a><a id="27662" class="Symbol">)</a> <a id="27664" class="Symbol">=</a> <a id="27666" class="Symbol">(</a><a id="27667" href="Demos.HSP.html#27654" class="Bound">hh</a> <a id="27670" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="27672" href="Demos.HSP.html#27125" class="Field">isHom</a> <a id="27678" href="Demos.HSP.html#27659" class="Bound">hhE</a><a id="27681" class="Symbol">)</a> <a id="27683" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="27685" href="Demos.HSP.html#27150" class="Field">isSurjective</a> <a id="27698" href="Demos.HSP.html#27659" class="Bound">hhE</a>
</pre>

#### <a id="composition-of-homomorphisms">Composition of homomorphisms</a>

The composition of homomorphisms is again a homomorphism, and similarly
for epimorphisms and monomorphisms. The proofs of these facts are
straightforward.

<pre class="Agda">

<a id="27960" class="Keyword">module</a> <a id="27967" href="Demos.HSP.html#27967" class="Module">_</a>  <a id="27970" class="Symbol">{</a><a id="27971" href="Demos.HSP.html#27971" class="Bound">ùë®</a> <a id="27973" class="Symbol">:</a> <a id="27975" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="27983" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="27985" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a><a id="27987" class="Symbol">}</a> <a id="27989" class="Symbol">{</a><a id="27990" href="Demos.HSP.html#27990" class="Bound">ùë©</a> <a id="27992" class="Symbol">:</a> <a id="27994" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="28002" href="Demos.HSP.html#7261" class="Generalizable">Œ≤</a> <a id="28004" href="Demos.HSP.html#7263" class="Generalizable">œÅ·µá</a><a id="28006" class="Symbol">}</a> <a id="28008" class="Symbol">{</a><a id="28009" href="Demos.HSP.html#28009" class="Bound">ùë™</a> <a id="28011" class="Symbol">:</a> <a id="28013" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="28021" href="Demos.HSP.html#7266" class="Generalizable">Œ≥</a> <a id="28023" href="Demos.HSP.html#7268" class="Generalizable">œÅ·∂ú</a><a id="28025" class="Symbol">}</a>
          <a id="28037" class="Symbol">{</a><a id="28038" href="Demos.HSP.html#28038" class="Bound">g</a> <a id="28040" class="Symbol">:</a> <a id="28042" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="28045" href="Demos.HSP.html#27971" class="Bound">ùë®</a> <a id="28047" href="Demos.HSP.html#18862" class="Function Operator">]</a> <a id="28049" href="Demos.HSP.html#6322" class="Record Operator">‚ü∂</a> <a id="28051" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="28054" href="Demos.HSP.html#27990" class="Bound">ùë©</a> <a id="28056" href="Demos.HSP.html#18862" class="Function Operator">]</a><a id="28057" class="Symbol">}{</a><a id="28059" href="Demos.HSP.html#28059" class="Bound">h</a> <a id="28061" class="Symbol">:</a> <a id="28063" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="28066" href="Demos.HSP.html#27990" class="Bound">ùë©</a> <a id="28068" href="Demos.HSP.html#18862" class="Function Operator">]</a> <a id="28070" href="Demos.HSP.html#6322" class="Record Operator">‚ü∂</a> <a id="28072" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="28075" href="Demos.HSP.html#28009" class="Bound">ùë™</a> <a id="28077" href="Demos.HSP.html#18862" class="Function Operator">]</a><a id="28078" class="Symbol">}</a> <a id="28080" class="Keyword">where</a>
  <a id="28088" class="Keyword">open</a> <a id="28093" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="28100" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="28103" href="Demos.HSP.html#28009" class="Bound">ùë™</a> <a id="28105" href="Demos.HSP.html#18862" class="Function Operator">]</a> <a id="28107" class="Keyword">using</a> <a id="28113" class="Symbol">(</a> <a id="28115" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="28121" class="Symbol">)</a>
  <a id="28125" href="Demos.HSP.html#28125" class="Function">‚àò-is-hom</a> <a id="28134" class="Symbol">:</a> <a id="28136" href="Demos.HSP.html#26042" class="Record">IsHom</a> <a id="28142" href="Demos.HSP.html#27971" class="Bound">ùë®</a> <a id="28144" href="Demos.HSP.html#27990" class="Bound">ùë©</a> <a id="28146" href="Demos.HSP.html#28038" class="Bound">g</a> <a id="28148" class="Symbol">‚Üí</a> <a id="28150" href="Demos.HSP.html#26042" class="Record">IsHom</a> <a id="28156" href="Demos.HSP.html#27990" class="Bound">ùë©</a> <a id="28158" href="Demos.HSP.html#28009" class="Bound">ùë™</a> <a id="28160" href="Demos.HSP.html#28059" class="Bound">h</a> <a id="28162" class="Symbol">‚Üí</a> <a id="28164" href="Demos.HSP.html#26042" class="Record">IsHom</a> <a id="28170" href="Demos.HSP.html#27971" class="Bound">ùë®</a> <a id="28172" href="Demos.HSP.html#28009" class="Bound">ùë™</a> <a id="28174" class="Symbol">(</a><a id="28175" href="Demos.HSP.html#28059" class="Bound">h</a> <a id="28177" href="Demos.HSP.html#9848" class="Function Operator">‚ü®‚àò‚ü©</a> <a id="28181" href="Demos.HSP.html#28038" class="Bound">g</a><a id="28182" class="Symbol">)</a>
  <a id="28186" href="Demos.HSP.html#28125" class="Function">‚àò-is-hom</a> <a id="28195" href="Demos.HSP.html#28195" class="Bound">ghom</a> <a id="28200" href="Demos.HSP.html#28200" class="Bound">hhom</a> <a id="28205" class="Symbol">=</a> <a id="28207" href="Demos.HSP.html#26115" class="InductiveConstructor">mkhom</a> <a id="28213" href="Demos.HSP.html#28224" class="Function">c</a> <a id="28215" class="Keyword">where</a>
   <a id="28224" href="Demos.HSP.html#28224" class="Function">c</a> <a id="28226" class="Symbol">:</a> <a id="28228" href="Demos.HSP.html#25779" class="Function">compatible-map</a> <a id="28243" href="Demos.HSP.html#27971" class="Bound">ùë®</a> <a id="28245" href="Demos.HSP.html#28009" class="Bound">ùë™</a> <a id="28247" class="Symbol">(</a><a id="28248" href="Demos.HSP.html#28059" class="Bound">h</a> <a id="28250" href="Demos.HSP.html#9848" class="Function Operator">‚ü®‚àò‚ü©</a> <a id="28254" href="Demos.HSP.html#28038" class="Bound">g</a><a id="28255" class="Symbol">)</a>
   <a id="28260" href="Demos.HSP.html#28224" class="Function">c</a> <a id="28262" class="Symbol">=</a> <a id="28264" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="28270" class="Symbol">(</a><a id="28271" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="28276" href="Demos.HSP.html#28059" class="Bound">h</a> <a id="28278" class="Symbol">(</a><a id="28279" href="Demos.HSP.html#26136" class="Field">compatible</a> <a id="28290" href="Demos.HSP.html#28195" class="Bound">ghom</a><a id="28294" class="Symbol">))</a> <a id="28297" class="Symbol">(</a><a id="28298" href="Demos.HSP.html#26136" class="Field">compatible</a> <a id="28309" href="Demos.HSP.html#28200" class="Bound">hhom</a><a id="28313" class="Symbol">)</a>

  <a id="28318" href="Demos.HSP.html#28318" class="Function">‚àò-is-epi</a> <a id="28327" class="Symbol">:</a> <a id="28329" href="Demos.HSP.html#27054" class="Record">IsEpi</a> <a id="28335" href="Demos.HSP.html#27971" class="Bound">ùë®</a> <a id="28337" href="Demos.HSP.html#27990" class="Bound">ùë©</a> <a id="28339" href="Demos.HSP.html#28038" class="Bound">g</a> <a id="28341" class="Symbol">‚Üí</a> <a id="28343" href="Demos.HSP.html#27054" class="Record">IsEpi</a> <a id="28349" href="Demos.HSP.html#27990" class="Bound">ùë©</a> <a id="28351" href="Demos.HSP.html#28009" class="Bound">ùë™</a> <a id="28353" href="Demos.HSP.html#28059" class="Bound">h</a> <a id="28355" class="Symbol">‚Üí</a> <a id="28357" href="Demos.HSP.html#27054" class="Record">IsEpi</a> <a id="28363" href="Demos.HSP.html#27971" class="Bound">ùë®</a> <a id="28365" href="Demos.HSP.html#28009" class="Bound">ùë™</a> <a id="28367" class="Symbol">(</a><a id="28368" href="Demos.HSP.html#28059" class="Bound">h</a> <a id="28370" href="Demos.HSP.html#9848" class="Function Operator">‚ü®‚àò‚ü©</a> <a id="28374" href="Demos.HSP.html#28038" class="Bound">g</a><a id="28375" class="Symbol">)</a>
  <a id="28379" href="Demos.HSP.html#28318" class="Function">‚àò-is-epi</a> <a id="28388" href="Demos.HSP.html#28388" class="Bound">gE</a> <a id="28391" href="Demos.HSP.html#28391" class="Bound">hE</a> <a id="28394" class="Symbol">=</a> <a id="28396" class="Keyword">record</a>  <a id="28404" class="Symbol">{</a> <a id="28406" href="Demos.HSP.html#27125" class="Field">isHom</a> <a id="28412" class="Symbol">=</a> <a id="28414" href="Demos.HSP.html#28125" class="Function">‚àò-is-hom</a> <a id="28423" class="Symbol">(</a><a id="28424" href="Demos.HSP.html#27125" class="Field">isHom</a> <a id="28430" href="Demos.HSP.html#28388" class="Bound">gE</a><a id="28432" class="Symbol">)</a> <a id="28434" class="Symbol">(</a><a id="28435" href="Demos.HSP.html#27125" class="Field">isHom</a> <a id="28441" href="Demos.HSP.html#28391" class="Bound">hE</a><a id="28443" class="Symbol">)</a>
                           <a id="28472" class="Symbol">;</a> <a id="28474" href="Demos.HSP.html#27150" class="Field">isSurjective</a> <a id="28487" class="Symbol">=</a> <a id="28489" href="Demos.HSP.html#12821" class="Function">‚àò-IsSurjective</a> <a id="28504" href="Demos.HSP.html#28038" class="Bound">g</a> <a id="28506" href="Demos.HSP.html#28059" class="Bound">h</a> <a id="28508" class="Symbol">(</a><a id="28509" href="Demos.HSP.html#27150" class="Field">isSurjective</a> <a id="28522" href="Demos.HSP.html#28388" class="Bound">gE</a><a id="28524" class="Symbol">)</a> <a id="28526" class="Symbol">(</a><a id="28527" href="Demos.HSP.html#27150" class="Field">isSurjective</a> <a id="28540" href="Demos.HSP.html#28391" class="Bound">hE</a><a id="28542" class="Symbol">)</a> <a id="28544" class="Symbol">}</a>

<a id="28547" class="Keyword">module</a> <a id="28554" href="Demos.HSP.html#28554" class="Module">_</a> <a id="28556" class="Symbol">{</a><a id="28557" href="Demos.HSP.html#28557" class="Bound">ùë®</a> <a id="28559" class="Symbol">:</a> <a id="28561" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="28569" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="28571" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a><a id="28573" class="Symbol">}</a> <a id="28575" class="Symbol">{</a><a id="28576" href="Demos.HSP.html#28576" class="Bound">ùë©</a> <a id="28578" class="Symbol">:</a> <a id="28580" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="28588" href="Demos.HSP.html#7261" class="Generalizable">Œ≤</a> <a id="28590" href="Demos.HSP.html#7263" class="Generalizable">œÅ·µá</a><a id="28592" class="Symbol">}</a> <a id="28594" class="Symbol">{</a><a id="28595" href="Demos.HSP.html#28595" class="Bound">ùë™</a> <a id="28597" class="Symbol">:</a> <a id="28599" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="28607" href="Demos.HSP.html#7266" class="Generalizable">Œ≥</a> <a id="28609" href="Demos.HSP.html#7268" class="Generalizable">œÅ·∂ú</a><a id="28611" class="Symbol">}</a> <a id="28613" class="Keyword">where</a>
  <a id="28621" href="Demos.HSP.html#28621" class="Function">‚àò-hom</a> <a id="28627" class="Symbol">:</a> <a id="28629" href="Demos.HSP.html#26168" class="Function">hom</a> <a id="28633" href="Demos.HSP.html#28557" class="Bound">ùë®</a> <a id="28635" href="Demos.HSP.html#28576" class="Bound">ùë©</a> <a id="28637" class="Symbol">‚Üí</a> <a id="28639" href="Demos.HSP.html#26168" class="Function">hom</a> <a id="28643" href="Demos.HSP.html#28576" class="Bound">ùë©</a> <a id="28645" href="Demos.HSP.html#28595" class="Bound">ùë™</a>  <a id="28648" class="Symbol">‚Üí</a> <a id="28650" href="Demos.HSP.html#26168" class="Function">hom</a> <a id="28654" href="Demos.HSP.html#28557" class="Bound">ùë®</a> <a id="28656" href="Demos.HSP.html#28595" class="Bound">ùë™</a>
  <a id="28660" href="Demos.HSP.html#28621" class="Function">‚àò-hom</a> <a id="28666" class="Symbol">(</a><a id="28667" href="Demos.HSP.html#28667" class="Bound">h</a> <a id="28669" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="28671" href="Demos.HSP.html#28671" class="Bound">hhom</a><a id="28675" class="Symbol">)</a> <a id="28677" class="Symbol">(</a><a id="28678" href="Demos.HSP.html#28678" class="Bound">g</a> <a id="28680" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="28682" href="Demos.HSP.html#28682" class="Bound">ghom</a><a id="28686" class="Symbol">)</a> <a id="28688" class="Symbol">=</a> <a id="28690" class="Symbol">(</a><a id="28691" href="Demos.HSP.html#28678" class="Bound">g</a> <a id="28693" href="Demos.HSP.html#9848" class="Function Operator">‚ü®‚àò‚ü©</a> <a id="28697" href="Demos.HSP.html#28667" class="Bound">h</a><a id="28698" class="Symbol">)</a> <a id="28700" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="28702" href="Demos.HSP.html#28125" class="Function">‚àò-is-hom</a> <a id="28711" href="Demos.HSP.html#28671" class="Bound">hhom</a> <a id="28716" href="Demos.HSP.html#28682" class="Bound">ghom</a>

  <a id="28724" href="Demos.HSP.html#28724" class="Function">‚àò-epi</a> <a id="28730" class="Symbol">:</a> <a id="28732" href="Demos.HSP.html#27224" class="Function">epi</a> <a id="28736" href="Demos.HSP.html#28557" class="Bound">ùë®</a> <a id="28738" href="Demos.HSP.html#28576" class="Bound">ùë©</a> <a id="28740" class="Symbol">‚Üí</a> <a id="28742" href="Demos.HSP.html#27224" class="Function">epi</a> <a id="28746" href="Demos.HSP.html#28576" class="Bound">ùë©</a> <a id="28748" href="Demos.HSP.html#28595" class="Bound">ùë™</a>  <a id="28751" class="Symbol">‚Üí</a> <a id="28753" href="Demos.HSP.html#27224" class="Function">epi</a> <a id="28757" href="Demos.HSP.html#28557" class="Bound">ùë®</a> <a id="28759" href="Demos.HSP.html#28595" class="Bound">ùë™</a>
  <a id="28763" href="Demos.HSP.html#28724" class="Function">‚àò-epi</a> <a id="28769" class="Symbol">(</a><a id="28770" href="Demos.HSP.html#28770" class="Bound">h</a> <a id="28772" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="28774" href="Demos.HSP.html#28774" class="Bound">hepi</a><a id="28778" class="Symbol">)</a> <a id="28780" class="Symbol">(</a><a id="28781" href="Demos.HSP.html#28781" class="Bound">g</a> <a id="28783" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="28785" href="Demos.HSP.html#28785" class="Bound">gepi</a><a id="28789" class="Symbol">)</a> <a id="28791" class="Symbol">=</a> <a id="28793" class="Symbol">(</a><a id="28794" href="Demos.HSP.html#28781" class="Bound">g</a> <a id="28796" href="Demos.HSP.html#9848" class="Function Operator">‚ü®‚àò‚ü©</a> <a id="28800" href="Demos.HSP.html#28770" class="Bound">h</a><a id="28801" class="Symbol">)</a> <a id="28803" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="28805" href="Demos.HSP.html#28318" class="Function">‚àò-is-epi</a> <a id="28814" href="Demos.HSP.html#28774" class="Bound">hepi</a> <a id="28819" href="Demos.HSP.html#28785" class="Bound">gepi</a>
</pre>

#### <a id="universe-lifting-of-homomorphisms">Universe lifting of homomorphisms</a>

Here we define the identity homomorphism for setoid algebras. Then we prove that the operations of lifting and lowering of a setoid algebra are homomorphisms.

<pre class="Agda">

<a id="ùíæùíπ"></a><a id="29096" href="Demos.HSP.html#29096" class="Function">ùíæùíπ</a> <a id="29099" class="Symbol">:</a> <a id="29101" class="Symbol">{</a><a id="29102" href="Demos.HSP.html#29102" class="Bound">ùë®</a> <a id="29104" class="Symbol">:</a> <a id="29106" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="29114" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="29116" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a><a id="29118" class="Symbol">}</a> <a id="29120" class="Symbol">‚Üí</a> <a id="29122" href="Demos.HSP.html#26168" class="Function">hom</a> <a id="29126" href="Demos.HSP.html#29102" class="Bound">ùë®</a> <a id="29128" href="Demos.HSP.html#29102" class="Bound">ùë®</a>
<a id="29130" href="Demos.HSP.html#29096" class="Function">ùíæùíπ</a> <a id="29133" class="Symbol">{</a><a id="29134" class="Argument">ùë®</a> <a id="29136" class="Symbol">=</a> <a id="29138" href="Demos.HSP.html#29138" class="Bound">ùë®</a><a id="29139" class="Symbol">}</a> <a id="29141" class="Symbol">=</a> <a id="29143" href="Demos.HSP.html#9777" class="Function">ùëñùëë</a> <a id="29146" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="29148" href="Demos.HSP.html#26115" class="InductiveConstructor">mkhom</a> <a id="29154" class="Symbol">(</a><a id="29155" href="Relation.Binary.Structures.html#1646" class="Function">reflexive</a> <a id="29165" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a><a id="29171" class="Symbol">)</a> <a id="29173" class="Keyword">where</a> <a id="29179" class="Keyword">open</a> <a id="29184" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="29191" class="Symbol">(</a> <a id="29193" href="Demos.HSP.html#18273" class="Field">Domain</a> <a id="29200" href="Demos.HSP.html#29138" class="Bound">ùë®</a> <a id="29202" class="Symbol">)</a> <a id="29204" class="Keyword">using</a> <a id="29210" class="Symbol">(</a> <a id="29212" href="Relation.Binary.Structures.html#1646" class="Function">reflexive</a> <a id="29222" class="Symbol">)</a>

<a id="29225" class="Keyword">module</a> <a id="29232" href="Demos.HSP.html#29232" class="Module">_</a> <a id="29234" class="Symbol">{</a><a id="29235" href="Demos.HSP.html#29235" class="Bound">ùë®</a> <a id="29237" class="Symbol">:</a> <a id="29239" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="29247" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="29249" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a><a id="29251" class="Symbol">}{</a><a id="29253" href="Demos.HSP.html#29253" class="Bound">‚Ñì</a> <a id="29255" class="Symbol">:</a> <a id="29257" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="29262" class="Symbol">}</a> <a id="29264" class="Keyword">where</a>
 <a id="29271" class="Keyword">open</a> <a id="29276" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="29283" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="29286" href="Demos.HSP.html#29235" class="Bound">ùë®</a> <a id="29288" href="Demos.HSP.html#18862" class="Function Operator">]</a>              <a id="29303" class="Keyword">using</a> <a id="29309" class="Symbol">(</a> <a id="29311" href="Relation.Binary.Structures.html#1646" class="Function">reflexive</a> <a id="29321" class="Symbol">)</a>  <a id="29324" class="Keyword">renaming</a> <a id="29333" class="Symbol">(</a> <a id="29335" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="29339" class="Symbol">to</a> <a id="29342" class="Field Operator">_‚âà‚ÇÅ_</a> <a id="29347" class="Symbol">;</a> <a id="29349" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="29354" class="Symbol">to</a> <a id="29357" class="Function">refl‚ÇÅ</a> <a id="29363" class="Symbol">)</a>
 <a id="29366" class="Keyword">open</a> <a id="29371" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="29378" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="29381" href="Demos.HSP.html#21080" class="Function">Lift-AlgÀ°</a> <a id="29391" href="Demos.HSP.html#29235" class="Bound">ùë®</a> <a id="29393" href="Demos.HSP.html#29253" class="Bound">‚Ñì</a> <a id="29395" href="Demos.HSP.html#18862" class="Function Operator">]</a>  <a id="29398" class="Keyword">using</a> <a id="29404" class="Symbol">()</a>             <a id="29419" class="Keyword">renaming</a> <a id="29428" class="Symbol">(</a> <a id="29430" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="29434" class="Symbol">to</a> <a id="29437" class="Field Operator">_‚âàÀ°_</a> <a id="29442" class="Symbol">;</a> <a id="29444" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="29449" class="Symbol">to</a> <a id="29452" class="Function">reflÀ°</a><a id="29457" class="Symbol">)</a>
 <a id="29460" class="Keyword">open</a> <a id="29465" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="29472" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="29475" href="Demos.HSP.html#21475" class="Function">Lift-Alg ≥</a> <a id="29485" href="Demos.HSP.html#29235" class="Bound">ùë®</a> <a id="29487" href="Demos.HSP.html#29253" class="Bound">‚Ñì</a> <a id="29489" href="Demos.HSP.html#18862" class="Function Operator">]</a>  <a id="29492" class="Keyword">using</a> <a id="29498" class="Symbol">()</a>             <a id="29513" class="Keyword">renaming</a> <a id="29522" class="Symbol">(</a> <a id="29524" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="29528" class="Symbol">to</a> <a id="29531" class="Field Operator">_‚âà ≥_</a> <a id="29536" class="Symbol">;</a> <a id="29538" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="29543" class="Symbol">to</a> <a id="29546" class="Function">refl ≥</a><a id="29551" class="Symbol">)</a>
 <a id="29554" class="Keyword">open</a> <a id="29559" href="Level.html" class="Module">Level</a>

 <a id="29567" href="Demos.HSP.html#29567" class="Function">ToLiftÀ°</a> <a id="29575" class="Symbol">:</a> <a id="29577" href="Demos.HSP.html#26168" class="Function">hom</a> <a id="29581" href="Demos.HSP.html#29235" class="Bound">ùë®</a> <a id="29583" class="Symbol">(</a><a id="29584" href="Demos.HSP.html#21080" class="Function">Lift-AlgÀ°</a> <a id="29594" href="Demos.HSP.html#29235" class="Bound">ùë®</a> <a id="29596" href="Demos.HSP.html#29253" class="Bound">‚Ñì</a><a id="29597" class="Symbol">)</a>
 <a id="29600" href="Demos.HSP.html#29567" class="Function">ToLiftÀ°</a> <a id="29608" class="Symbol">=</a> <a id="29610" class="Keyword">record</a> <a id="29617" class="Symbol">{</a> <a id="29619" href="Function.Bundles.html#1919" class="Field">f</a> <a id="29621" class="Symbol">=</a> <a id="29623" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="29628" class="Symbol">;</a> <a id="29630" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="29635" class="Symbol">=</a> <a id="29637" href="Function.Base.html#615" class="Function">id</a> <a id="29640" class="Symbol">}</a> <a id="29642" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="29644" href="Demos.HSP.html#26115" class="InductiveConstructor">mkhom</a> <a id="29650" class="Symbol">(</a><a id="29651" href="Relation.Binary.Structures.html#1646" class="Function">reflexive</a> <a id="29661" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a><a id="29667" class="Symbol">)</a>

 <a id="29671" href="Demos.HSP.html#29671" class="Function">FromLiftÀ°</a> <a id="29681" class="Symbol">:</a> <a id="29683" href="Demos.HSP.html#26168" class="Function">hom</a> <a id="29687" class="Symbol">(</a><a id="29688" href="Demos.HSP.html#21080" class="Function">Lift-AlgÀ°</a> <a id="29698" href="Demos.HSP.html#29235" class="Bound">ùë®</a> <a id="29700" href="Demos.HSP.html#29253" class="Bound">‚Ñì</a><a id="29701" class="Symbol">)</a> <a id="29703" href="Demos.HSP.html#29235" class="Bound">ùë®</a>
 <a id="29706" href="Demos.HSP.html#29671" class="Function">FromLiftÀ°</a> <a id="29716" class="Symbol">=</a> <a id="29718" class="Keyword">record</a> <a id="29725" class="Symbol">{</a> <a id="29727" href="Function.Bundles.html#1919" class="Field">f</a> <a id="29729" class="Symbol">=</a> <a id="29731" href="Level.html#470" class="Field">lower</a> <a id="29737" class="Symbol">;</a> <a id="29739" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="29744" class="Symbol">=</a> <a id="29746" href="Function.Base.html#615" class="Function">id</a> <a id="29749" class="Symbol">}</a> <a id="29751" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="29753" href="Demos.HSP.html#26115" class="InductiveConstructor">mkhom</a> <a id="29759" href="Demos.HSP.html#29452" class="Function">reflÀ°</a>

 <a id="29767" href="Demos.HSP.html#29767" class="Function">ToFromLiftÀ°</a> <a id="29779" class="Symbol">:</a> <a id="29781" class="Symbol">‚àÄ</a> <a id="29783" href="Demos.HSP.html#29783" class="Bound">b</a> <a id="29785" class="Symbol">‚Üí</a>  <a id="29788" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="29790" href="Demos.HSP.html#29567" class="Function">ToLiftÀ°</a> <a id="29798" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="29800" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="29804" class="Symbol">(</a><a id="29805" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="29807" href="Demos.HSP.html#29671" class="Function">FromLiftÀ°</a> <a id="29817" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="29819" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="29823" href="Demos.HSP.html#29783" class="Bound">b</a><a id="29824" class="Symbol">)</a> <a id="29826" href="Demos.HSP.html#29437" class="Function Operator">‚âàÀ°</a> <a id="29829" href="Demos.HSP.html#29783" class="Bound">b</a>
 <a id="29832" href="Demos.HSP.html#29767" class="Function">ToFromLiftÀ°</a> <a id="29844" href="Demos.HSP.html#29844" class="Bound">b</a> <a id="29846" class="Symbol">=</a> <a id="29848" href="Demos.HSP.html#29357" class="Function">refl‚ÇÅ</a>

 <a id="29856" href="Demos.HSP.html#29856" class="Function">FromToLiftÀ°</a> <a id="29868" class="Symbol">:</a> <a id="29870" class="Symbol">‚àÄ</a> <a id="29872" href="Demos.HSP.html#29872" class="Bound">a</a> <a id="29874" class="Symbol">‚Üí</a> <a id="29876" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="29878" href="Demos.HSP.html#29671" class="Function">FromLiftÀ°</a> <a id="29888" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="29890" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="29894" class="Symbol">(</a><a id="29895" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="29897" href="Demos.HSP.html#29567" class="Function">ToLiftÀ°</a> <a id="29905" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="29907" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="29911" href="Demos.HSP.html#29872" class="Bound">a</a><a id="29912" class="Symbol">)</a> <a id="29914" href="Demos.HSP.html#29342" class="Function Operator">‚âà‚ÇÅ</a> <a id="29917" href="Demos.HSP.html#29872" class="Bound">a</a>
 <a id="29920" href="Demos.HSP.html#29856" class="Function">FromToLiftÀ°</a> <a id="29932" href="Demos.HSP.html#29932" class="Bound">a</a> <a id="29934" class="Symbol">=</a> <a id="29936" href="Demos.HSP.html#29357" class="Function">refl‚ÇÅ</a>

 <a id="29944" href="Demos.HSP.html#29944" class="Function">ToLift ≥</a> <a id="29952" class="Symbol">:</a> <a id="29954" href="Demos.HSP.html#26168" class="Function">hom</a> <a id="29958" href="Demos.HSP.html#29235" class="Bound">ùë®</a> <a id="29960" class="Symbol">(</a><a id="29961" href="Demos.HSP.html#21475" class="Function">Lift-Alg ≥</a> <a id="29971" href="Demos.HSP.html#29235" class="Bound">ùë®</a> <a id="29973" href="Demos.HSP.html#29253" class="Bound">‚Ñì</a><a id="29974" class="Symbol">)</a>
 <a id="29977" href="Demos.HSP.html#29944" class="Function">ToLift ≥</a> <a id="29985" class="Symbol">=</a> <a id="29987" class="Keyword">record</a> <a id="29994" class="Symbol">{</a> <a id="29996" href="Function.Bundles.html#1919" class="Field">f</a> <a id="29998" class="Symbol">=</a> <a id="30000" href="Function.Base.html#615" class="Function">id</a> <a id="30003" class="Symbol">;</a> <a id="30005" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="30010" class="Symbol">=</a> <a id="30012" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="30017" class="Symbol">}</a> <a id="30019" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="30021" href="Demos.HSP.html#26115" class="InductiveConstructor">mkhom</a> <a id="30027" class="Symbol">(</a><a id="30028" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="30033" class="Symbol">(</a><a id="30034" href="Relation.Binary.Structures.html#1646" class="Function">reflexive</a> <a id="30044" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a><a id="30050" class="Symbol">))</a>

 <a id="30055" href="Demos.HSP.html#30055" class="Function">FromLift ≥</a> <a id="30065" class="Symbol">:</a> <a id="30067" href="Demos.HSP.html#26168" class="Function">hom</a> <a id="30071" class="Symbol">(</a><a id="30072" href="Demos.HSP.html#21475" class="Function">Lift-Alg ≥</a> <a id="30082" href="Demos.HSP.html#29235" class="Bound">ùë®</a> <a id="30084" href="Demos.HSP.html#29253" class="Bound">‚Ñì</a><a id="30085" class="Symbol">)</a> <a id="30087" href="Demos.HSP.html#29235" class="Bound">ùë®</a>
 <a id="30090" href="Demos.HSP.html#30055" class="Function">FromLift ≥</a> <a id="30100" class="Symbol">=</a> <a id="30102" class="Keyword">record</a> <a id="30109" class="Symbol">{</a> <a id="30111" href="Function.Bundles.html#1919" class="Field">f</a> <a id="30113" class="Symbol">=</a> <a id="30115" href="Function.Base.html#615" class="Function">id</a> <a id="30118" class="Symbol">;</a> <a id="30120" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="30125" class="Symbol">=</a> <a id="30127" href="Level.html#470" class="Field">lower</a> <a id="30133" class="Symbol">}</a> <a id="30135" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="30137" href="Demos.HSP.html#26115" class="InductiveConstructor">mkhom</a> <a id="30143" href="Demos.HSP.html#29452" class="Function">reflÀ°</a>

 <a id="30151" href="Demos.HSP.html#30151" class="Function">ToFromLift ≥</a> <a id="30163" class="Symbol">:</a> <a id="30165" class="Symbol">‚àÄ</a> <a id="30167" href="Demos.HSP.html#30167" class="Bound">b</a> <a id="30169" class="Symbol">‚Üí</a> <a id="30171" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="30173" href="Demos.HSP.html#29944" class="Function">ToLift ≥</a> <a id="30181" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="30183" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="30187" class="Symbol">(</a><a id="30188" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="30190" href="Demos.HSP.html#30055" class="Function">FromLift ≥</a> <a id="30200" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="30202" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="30206" href="Demos.HSP.html#30167" class="Bound">b</a><a id="30207" class="Symbol">)</a> <a id="30209" href="Demos.HSP.html#29531" class="Function Operator">‚âà ≥</a> <a id="30212" href="Demos.HSP.html#30167" class="Bound">b</a>
 <a id="30215" href="Demos.HSP.html#30151" class="Function">ToFromLift ≥</a> <a id="30227" href="Demos.HSP.html#30227" class="Bound">b</a> <a id="30229" class="Symbol">=</a> <a id="30231" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="30236" href="Demos.HSP.html#29357" class="Function">refl‚ÇÅ</a>

 <a id="30244" href="Demos.HSP.html#30244" class="Function">FromToLift ≥</a> <a id="30256" class="Symbol">:</a> <a id="30258" class="Symbol">‚àÄ</a> <a id="30260" href="Demos.HSP.html#30260" class="Bound">a</a> <a id="30262" class="Symbol">‚Üí</a> <a id="30264" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="30266" href="Demos.HSP.html#30055" class="Function">FromLift ≥</a> <a id="30276" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="30278" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="30282" class="Symbol">(</a><a id="30283" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="30285" href="Demos.HSP.html#29944" class="Function">ToLift ≥</a> <a id="30293" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="30295" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="30299" href="Demos.HSP.html#30260" class="Bound">a</a><a id="30300" class="Symbol">)</a> <a id="30302" href="Demos.HSP.html#29342" class="Function Operator">‚âà‚ÇÅ</a> <a id="30305" href="Demos.HSP.html#30260" class="Bound">a</a>
 <a id="30308" href="Demos.HSP.html#30244" class="Function">FromToLift ≥</a> <a id="30320" href="Demos.HSP.html#30320" class="Bound">a</a> <a id="30322" class="Symbol">=</a> <a id="30324" href="Demos.HSP.html#29357" class="Function">refl‚ÇÅ</a>


<a id="30332" class="Keyword">module</a> <a id="30339" href="Demos.HSP.html#30339" class="Module">_</a> <a id="30341" class="Symbol">{</a><a id="30342" href="Demos.HSP.html#30342" class="Bound">ùë®</a> <a id="30344" class="Symbol">:</a> <a id="30346" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="30354" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="30356" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a><a id="30358" class="Symbol">}{</a><a id="30360" href="Demos.HSP.html#30360" class="Bound">‚Ñì</a> <a id="30362" href="Demos.HSP.html#30362" class="Bound">r</a> <a id="30364" class="Symbol">:</a> <a id="30366" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="30371" class="Symbol">}</a> <a id="30373" class="Keyword">where</a>
 <a id="30380" class="Keyword">open</a>  <a id="30386" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="30393" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="30396" href="Demos.HSP.html#30342" class="Bound">ùë®</a> <a id="30398" href="Demos.HSP.html#18862" class="Function Operator">]</a>               <a id="30414" class="Keyword">using</a> <a id="30420" class="Symbol">(</a> <a id="30422" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="30427" class="Symbol">)</a>
 <a id="30430" class="Keyword">open</a>  <a id="30436" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="30443" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="30446" href="Demos.HSP.html#21992" class="Function">Lift-Alg</a> <a id="30455" href="Demos.HSP.html#30342" class="Bound">ùë®</a> <a id="30457" href="Demos.HSP.html#30360" class="Bound">‚Ñì</a> <a id="30459" href="Demos.HSP.html#30362" class="Bound">r</a> <a id="30461" href="Demos.HSP.html#18862" class="Function Operator">]</a>  <a id="30464" class="Keyword">using</a> <a id="30470" class="Symbol">(</a> <a id="30472" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="30476" class="Symbol">)</a>
 <a id="30479" class="Keyword">open</a>  <a id="30485" href="Level.html" class="Module">Level</a>
 <a id="30492" href="Demos.HSP.html#30492" class="Function">ToLift</a> <a id="30499" class="Symbol">:</a> <a id="30501" href="Demos.HSP.html#26168" class="Function">hom</a> <a id="30505" href="Demos.HSP.html#30342" class="Bound">ùë®</a> <a id="30507" class="Symbol">(</a><a id="30508" href="Demos.HSP.html#21992" class="Function">Lift-Alg</a> <a id="30517" href="Demos.HSP.html#30342" class="Bound">ùë®</a> <a id="30519" href="Demos.HSP.html#30360" class="Bound">‚Ñì</a> <a id="30521" href="Demos.HSP.html#30362" class="Bound">r</a><a id="30522" class="Symbol">)</a>
 <a id="30525" href="Demos.HSP.html#30492" class="Function">ToLift</a> <a id="30532" class="Symbol">=</a> <a id="30534" href="Demos.HSP.html#28621" class="Function">‚àò-hom</a> <a id="30540" href="Demos.HSP.html#29567" class="Function">ToLiftÀ°</a> <a id="30548" href="Demos.HSP.html#29944" class="Function">ToLift ≥</a>

 <a id="30558" href="Demos.HSP.html#30558" class="Function">FromLift</a> <a id="30567" class="Symbol">:</a> <a id="30569" href="Demos.HSP.html#26168" class="Function">hom</a> <a id="30573" class="Symbol">(</a><a id="30574" href="Demos.HSP.html#21992" class="Function">Lift-Alg</a> <a id="30583" href="Demos.HSP.html#30342" class="Bound">ùë®</a> <a id="30585" href="Demos.HSP.html#30360" class="Bound">‚Ñì</a> <a id="30587" href="Demos.HSP.html#30362" class="Bound">r</a><a id="30588" class="Symbol">)</a> <a id="30590" href="Demos.HSP.html#30342" class="Bound">ùë®</a>
 <a id="30593" href="Demos.HSP.html#30558" class="Function">FromLift</a> <a id="30602" class="Symbol">=</a> <a id="30604" href="Demos.HSP.html#28621" class="Function">‚àò-hom</a> <a id="30610" href="Demos.HSP.html#30055" class="Function">FromLift ≥</a> <a id="30620" href="Demos.HSP.html#29671" class="Function">FromLiftÀ°</a>

 <a id="30632" href="Demos.HSP.html#30632" class="Function">ToFromLift</a> <a id="30643" class="Symbol">:</a> <a id="30645" class="Symbol">‚àÄ</a> <a id="30647" href="Demos.HSP.html#30647" class="Bound">b</a> <a id="30649" class="Symbol">‚Üí</a> <a id="30651" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="30653" href="Demos.HSP.html#30492" class="Function">ToLift</a> <a id="30660" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="30662" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="30666" class="Symbol">(</a><a id="30667" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="30669" href="Demos.HSP.html#30558" class="Function">FromLift</a> <a id="30678" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="30680" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="30684" href="Demos.HSP.html#30647" class="Bound">b</a><a id="30685" class="Symbol">)</a> <a id="30687" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a> <a id="30689" href="Demos.HSP.html#30647" class="Bound">b</a>
 <a id="30692" href="Demos.HSP.html#30632" class="Function">ToFromLift</a> <a id="30703" href="Demos.HSP.html#30703" class="Bound">b</a> <a id="30705" class="Symbol">=</a> <a id="30707" href="Level.html#457" class="InductiveConstructor">lift</a> <a id="30712" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>

 <a id="30719" href="Demos.HSP.html#30719" class="Function">ToLift-epi</a> <a id="30730" class="Symbol">:</a> <a id="30732" href="Demos.HSP.html#27224" class="Function">epi</a> <a id="30736" href="Demos.HSP.html#30342" class="Bound">ùë®</a> <a id="30738" class="Symbol">(</a><a id="30739" href="Demos.HSP.html#21992" class="Function">Lift-Alg</a> <a id="30748" href="Demos.HSP.html#30342" class="Bound">ùë®</a> <a id="30750" href="Demos.HSP.html#30360" class="Bound">‚Ñì</a> <a id="30752" href="Demos.HSP.html#30362" class="Bound">r</a><a id="30753" class="Symbol">)</a>
 <a id="30756" href="Demos.HSP.html#30719" class="Function">ToLift-epi</a> <a id="30767" class="Symbol">=</a> <a id="30769" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="30771" href="Demos.HSP.html#30492" class="Function">ToLift</a> <a id="30778" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="30780" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a>  <a id="30783" class="Keyword">record</a> <a id="30790" class="Symbol">{</a> <a id="30792" href="Demos.HSP.html#27125" class="Field">isHom</a> <a id="30798" class="Symbol">=</a> <a id="30800" href="Demos.HSP.html#7893" class="Function Operator">‚à•</a> <a id="30802" href="Demos.HSP.html#30492" class="Function">ToLift</a> <a id="30809" href="Demos.HSP.html#7893" class="Function Operator">‚à•</a>
                            <a id="30839" class="Symbol">;</a> <a id="30841" href="Demos.HSP.html#27150" class="Field">isSurjective</a> <a id="30854" class="Symbol">=</a> <a id="30856" class="Symbol">Œª</a> <a id="30858" class="Symbol">{</a><a id="30859" href="Demos.HSP.html#30859" class="Bound">y</a><a id="30860" class="Symbol">}</a> <a id="30862" class="Symbol">‚Üí</a> <a id="30864" href="Demos.HSP.html#10381" class="InductiveConstructor">eq</a> <a id="30867" class="Symbol">(</a><a id="30868" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="30870" href="Demos.HSP.html#30558" class="Function">FromLift</a> <a id="30879" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="30881" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="30885" href="Demos.HSP.html#30859" class="Bound">y</a><a id="30886" class="Symbol">)</a> <a id="30888" class="Symbol">(</a><a id="30889" href="Demos.HSP.html#30632" class="Function">ToFromLift</a> <a id="30900" href="Demos.HSP.html#30859" class="Bound">y</a><a id="30901" class="Symbol">)</a> <a id="30903" class="Symbol">}</a>
</pre>


#### <a id="homomorphisms-of-product-algebras">Homomorphisms of product algebras</a>

Suppose we have an algebra `ùë®`, a type `I : Type ùìò`, and a family `‚Ñ¨ : I ‚Üí Algebra Œ≤ œÅ·µá` of algebras.
We sometimes refer to the inhabitants of `I` as *indices*, and call `‚Ñ¨` an
*indexed family of algebras*. If in addition we have a family `ùíΩ : (i : I) ‚Üí hom ùë® (‚Ñ¨ i)` of homomorphisms, 
then we can construct a homomorphism from `ùë®` to the product `‚®Ö ‚Ñ¨` in the natural way.  We codify the 
latter in dependent type theory as follows.

<pre class="Agda">

<a id="31452" class="Keyword">module</a> <a id="31459" href="Demos.HSP.html#31459" class="Module">_</a> <a id="31461" class="Symbol">{</a><a id="31462" href="Demos.HSP.html#31462" class="Bound">Œπ</a> <a id="31464" class="Symbol">:</a> <a id="31466" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="31471" class="Symbol">}{</a><a id="31473" href="Demos.HSP.html#31473" class="Bound">I</a> <a id="31475" class="Symbol">:</a> <a id="31477" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="31482" href="Demos.HSP.html#31462" class="Bound">Œπ</a><a id="31483" class="Symbol">}{</a><a id="31485" href="Demos.HSP.html#31485" class="Bound">ùë®</a> <a id="31487" class="Symbol">:</a> <a id="31489" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="31497" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="31499" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a><a id="31501" class="Symbol">}(</a><a id="31503" href="Demos.HSP.html#31503" class="Bound">‚Ñ¨</a> <a id="31505" class="Symbol">:</a> <a id="31507" href="Demos.HSP.html#31473" class="Bound">I</a> <a id="31509" class="Symbol">‚Üí</a> <a id="31511" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="31519" href="Demos.HSP.html#7261" class="Generalizable">Œ≤</a> <a id="31521" href="Demos.HSP.html#7263" class="Generalizable">œÅ·µá</a><a id="31523" class="Symbol">)</a> <a id="31525" class="Keyword">where</a>
 <a id="31532" href="Demos.HSP.html#31532" class="Function">‚®Ö-hom-co</a> <a id="31541" class="Symbol">:</a> <a id="31543" class="Symbol">(‚àÄ(</a><a id="31546" href="Demos.HSP.html#31546" class="Bound">i</a> <a id="31548" class="Symbol">:</a> <a id="31550" href="Demos.HSP.html#31473" class="Bound">I</a><a id="31551" class="Symbol">)</a> <a id="31553" class="Symbol">‚Üí</a> <a id="31555" href="Demos.HSP.html#26168" class="Function">hom</a> <a id="31559" href="Demos.HSP.html#31485" class="Bound">ùë®</a> <a id="31561" class="Symbol">(</a><a id="31562" href="Demos.HSP.html#31503" class="Bound">‚Ñ¨</a> <a id="31564" href="Demos.HSP.html#31546" class="Bound">i</a><a id="31565" class="Symbol">))</a> <a id="31568" class="Symbol">‚Üí</a> <a id="31570" href="Demos.HSP.html#26168" class="Function">hom</a> <a id="31574" href="Demos.HSP.html#31485" class="Bound">ùë®</a> <a id="31576" class="Symbol">(</a><a id="31577" href="Demos.HSP.html#23793" class="Function">‚®Ö</a> <a id="31579" href="Demos.HSP.html#31503" class="Bound">‚Ñ¨</a><a id="31580" class="Symbol">)</a>
 <a id="31583" href="Demos.HSP.html#31532" class="Function">‚®Ö-hom-co</a> <a id="31592" href="Demos.HSP.html#31592" class="Bound">ùíΩ</a> <a id="31594" class="Symbol">=</a> <a id="31596" href="Demos.HSP.html#31612" class="Function">h</a> <a id="31598" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="31600" href="Demos.HSP.html#31784" class="Function">hhom</a> <a id="31605" class="Keyword">where</a>  <a id="31612" href="Demos.HSP.html#31612" class="Function">h</a> <a id="31614" class="Symbol">:</a> <a id="31616" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="31619" href="Demos.HSP.html#31485" class="Bound">ùë®</a> <a id="31621" href="Demos.HSP.html#18862" class="Function Operator">]</a> <a id="31623" href="Demos.HSP.html#6322" class="Record Operator">‚ü∂</a> <a id="31625" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="31628" href="Demos.HSP.html#23793" class="Function">‚®Ö</a> <a id="31630" href="Demos.HSP.html#31503" class="Bound">‚Ñ¨</a> <a id="31632" href="Demos.HSP.html#18862" class="Function Operator">]</a>
                              <a id="31664" href="Demos.HSP.html#31612" class="Function">h</a> <a id="31666" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="31670" href="Demos.HSP.html#31670" class="Bound">a</a> <a id="31672" class="Symbol">=</a> <a id="31674" class="Symbol">Œª</a> <a id="31676" href="Demos.HSP.html#31676" class="Bound">i</a> <a id="31678" class="Symbol">‚Üí</a> <a id="31680" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="31682" href="Demos.HSP.html#31592" class="Bound">ùíΩ</a> <a id="31684" href="Demos.HSP.html#31676" class="Bound">i</a> <a id="31686" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="31688" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="31692" href="Demos.HSP.html#31670" class="Bound">a</a>
                              <a id="31724" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="31729" href="Demos.HSP.html#31612" class="Function">h</a> <a id="31731" href="Demos.HSP.html#31731" class="Bound">xy</a> <a id="31734" href="Demos.HSP.html#31734" class="Bound">i</a> <a id="31736" class="Symbol">=</a> <a id="31738" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="31743" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="31745" href="Demos.HSP.html#31592" class="Bound">ùíΩ</a> <a id="31747" href="Demos.HSP.html#31734" class="Bound">i</a> <a id="31749" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="31751" href="Demos.HSP.html#31731" class="Bound">xy</a>
                              <a id="31784" href="Demos.HSP.html#31784" class="Function">hhom</a> <a id="31789" class="Symbol">:</a> <a id="31791" href="Demos.HSP.html#26042" class="Record">IsHom</a> <a id="31797" href="Demos.HSP.html#31485" class="Bound">ùë®</a> <a id="31799" class="Symbol">(</a><a id="31800" href="Demos.HSP.html#23793" class="Function">‚®Ö</a> <a id="31802" href="Demos.HSP.html#31503" class="Bound">‚Ñ¨</a><a id="31803" class="Symbol">)</a> <a id="31805" href="Demos.HSP.html#31612" class="Function">h</a>
                              <a id="31837" href="Demos.HSP.html#26136" class="Field">compatible</a> <a id="31848" href="Demos.HSP.html#31784" class="Function">hhom</a> <a id="31853" class="Symbol">=</a> <a id="31855" class="Symbol">Œª</a> <a id="31857" href="Demos.HSP.html#31857" class="Bound">i</a> <a id="31859" class="Symbol">‚Üí</a> <a id="31861" href="Demos.HSP.html#26136" class="Field">compatible</a> <a id="31872" href="Demos.HSP.html#7893" class="Function Operator">‚à•</a> <a id="31874" href="Demos.HSP.html#31592" class="Bound">ùíΩ</a> <a id="31876" href="Demos.HSP.html#31857" class="Bound">i</a> <a id="31878" href="Demos.HSP.html#7893" class="Function Operator">‚à•</a>
</pre>

Two structures are *isomorphic* provided there are homomorphisms from each to the other that compose to the identity. We define the following record type to represent this concept. Note that the definition, shown below,
includes a proof of the fact that the maps `to` and `from` are bijective, which makes this fact more accessible.

<pre class="Agda">

<a id="32240" class="Keyword">module</a> <a id="32247" href="Demos.HSP.html#32247" class="Module">_</a> <a id="32249" class="Symbol">(</a><a id="32250" href="Demos.HSP.html#32250" class="Bound">ùë®</a> <a id="32252" class="Symbol">:</a> <a id="32254" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="32262" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="32264" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a><a id="32266" class="Symbol">)</a> <a id="32268" class="Symbol">(</a><a id="32269" href="Demos.HSP.html#32269" class="Bound">ùë©</a> <a id="32271" class="Symbol">:</a> <a id="32273" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="32281" href="Demos.HSP.html#7261" class="Generalizable">Œ≤</a> <a id="32283" href="Demos.HSP.html#7263" class="Generalizable">œÅ·µá</a><a id="32285" class="Symbol">)</a> <a id="32287" class="Keyword">where</a>
 <a id="32294" class="Keyword">open</a> <a id="32299" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="32306" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="32309" href="Demos.HSP.html#32250" class="Bound">ùë®</a> <a id="32311" href="Demos.HSP.html#18862" class="Function Operator">]</a>  <a id="32314" class="Keyword">using</a> <a id="32320" class="Symbol">()</a>  <a id="32324" class="Keyword">renaming</a> <a id="32333" class="Symbol">(</a> <a id="32335" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="32339" class="Symbol">to</a> <a id="32342" class="Field Operator">_‚âà·¥¨_</a> <a id="32347" class="Symbol">)</a>
 <a id="32350" class="Keyword">open</a> <a id="32355" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="32362" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="32365" href="Demos.HSP.html#32269" class="Bound">ùë©</a> <a id="32367" href="Demos.HSP.html#18862" class="Function Operator">]</a>  <a id="32370" class="Keyword">using</a> <a id="32376" class="Symbol">()</a>  <a id="32380" class="Keyword">renaming</a> <a id="32389" class="Symbol">(</a> <a id="32391" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="32395" class="Symbol">to</a> <a id="32398" class="Field Operator">_‚âà·¥Æ_</a> <a id="32403" class="Symbol">)</a>

 <a id="32407" class="Keyword">record</a> <a id="32414" href="Demos.HSP.html#32414" class="Record Operator">_‚âÖ_</a> <a id="32418" class="Symbol">:</a> <a id="32420" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="32425" class="Symbol">(</a><a id="32426" href="Demos.HSP.html#5140" class="Bound">ùìû</a> <a id="32428" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="32430" href="Demos.HSP.html#5142" class="Bound">ùì•</a> <a id="32432" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="32434" href="Demos.HSP.html#32262" class="Bound">Œ±</a> <a id="32436" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="32438" href="Demos.HSP.html#32264" class="Bound">œÅ·µÉ</a> <a id="32441" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="32443" href="Demos.HSP.html#32281" class="Bound">Œ≤</a> <a id="32445" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="32447" href="Demos.HSP.html#32283" class="Bound">œÅ·µá</a> <a id="32450" class="Symbol">)</a> <a id="32452" class="Keyword">where</a>
  <a id="32460" class="Keyword">constructor</a>  <a id="32473" href="Demos.HSP.html#32473" class="InductiveConstructor">mkiso</a>
  <a id="32481" class="Keyword">field</a>        <a id="32494" href="Demos.HSP.html#32494" class="Field">to</a>    <a id="32500" class="Symbol">:</a> <a id="32502" href="Demos.HSP.html#26168" class="Function">hom</a> <a id="32506" href="Demos.HSP.html#32250" class="Bound">ùë®</a> <a id="32508" href="Demos.HSP.html#32269" class="Bound">ùë©</a>
               <a id="32525" href="Demos.HSP.html#32525" class="Field">from</a>  <a id="32531" class="Symbol">:</a> <a id="32533" href="Demos.HSP.html#26168" class="Function">hom</a> <a id="32537" href="Demos.HSP.html#32269" class="Bound">ùë©</a> <a id="32539" href="Demos.HSP.html#32250" class="Bound">ùë®</a>
               <a id="32556" href="Demos.HSP.html#32556" class="Field">to‚àºfrom</a> <a id="32564" class="Symbol">:</a> <a id="32566" class="Symbol">‚àÄ</a> <a id="32568" href="Demos.HSP.html#32568" class="Bound">b</a> <a id="32570" class="Symbol">‚Üí</a> <a id="32572" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="32574" href="Demos.HSP.html#32494" class="Field">to</a> <a id="32577" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a>    <a id="32582" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="32586" class="Symbol">(</a><a id="32587" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="32589" href="Demos.HSP.html#32525" class="Field">from</a> <a id="32594" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a>  <a id="32597" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="32601" href="Demos.HSP.html#32568" class="Bound">b</a><a id="32602" class="Symbol">)</a>  <a id="32605" href="Demos.HSP.html#32398" class="Function Operator">‚âà·¥Æ</a> <a id="32608" href="Demos.HSP.html#32568" class="Bound">b</a>
               <a id="32625" href="Demos.HSP.html#32625" class="Field">from‚àºto</a> <a id="32633" class="Symbol">:</a> <a id="32635" class="Symbol">‚àÄ</a> <a id="32637" href="Demos.HSP.html#32637" class="Bound">a</a> <a id="32639" class="Symbol">‚Üí</a> <a id="32641" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="32643" href="Demos.HSP.html#32525" class="Field">from</a> <a id="32648" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a>  <a id="32651" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="32655" class="Symbol">(</a><a id="32656" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="32658" href="Demos.HSP.html#32494" class="Field">to</a> <a id="32661" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a>    <a id="32666" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="32670" href="Demos.HSP.html#32637" class="Bound">a</a><a id="32671" class="Symbol">)</a>  <a id="32674" href="Demos.HSP.html#32342" class="Function Operator">‚âà·¥¨</a> <a id="32677" href="Demos.HSP.html#32637" class="Bound">a</a>

  <a id="32682" href="Demos.HSP.html#32682" class="Function">toIsInjective</a> <a id="32696" class="Symbol">:</a> <a id="32698" href="Demos.HSP.html#12069" class="Function">IsInjective</a> <a id="32710" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="32712" href="Demos.HSP.html#32494" class="Field">to</a> <a id="32715" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a>
  <a id="32719" href="Demos.HSP.html#32682" class="Function">toIsInjective</a> <a id="32733" class="Symbol">{</a><a id="32734" href="Demos.HSP.html#32734" class="Bound">x</a><a id="32735" class="Symbol">}{</a><a id="32737" href="Demos.HSP.html#32737" class="Bound">y</a><a id="32738" class="Symbol">}</a> <a id="32740" href="Demos.HSP.html#32740" class="Bound">xy</a> <a id="32743" class="Symbol">=</a> <a id="32745" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="32751" class="Symbol">(</a><a id="32752" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="32756" class="Symbol">(</a><a id="32757" href="Demos.HSP.html#32625" class="Field">from‚àºto</a> <a id="32765" href="Demos.HSP.html#32734" class="Bound">x</a><a id="32766" class="Symbol">))</a> <a id="32769" class="Symbol">(</a><a id="32770" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="32776" href="Demos.HSP.html#32852" class="Function">Œæ</a> <a id="32778" class="Symbol">(</a><a id="32779" href="Demos.HSP.html#32625" class="Field">from‚àºto</a> <a id="32787" href="Demos.HSP.html#32737" class="Bound">y</a><a id="32788" class="Symbol">))</a>
   <a id="32794" class="Keyword">where</a>  <a id="32801" class="Keyword">open</a> <a id="32806" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="32813" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="32816" href="Demos.HSP.html#32250" class="Bound">ùë®</a> <a id="32818" href="Demos.HSP.html#18862" class="Function Operator">]</a> <a id="32820" class="Keyword">using</a> <a id="32826" class="Symbol">(</a> <a id="32828" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="32832" class="Symbol">;</a> <a id="32834" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="32840" class="Symbol">)</a>
          <a id="32852" href="Demos.HSP.html#32852" class="Function">Œæ</a> <a id="32854" class="Symbol">:</a> <a id="32856" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="32858" href="Demos.HSP.html#32525" class="Field">from</a> <a id="32863" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="32865" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="32869" class="Symbol">(</a><a id="32870" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="32872" href="Demos.HSP.html#32494" class="Field">to</a> <a id="32875" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="32877" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="32881" href="Demos.HSP.html#32734" class="Bound">x</a><a id="32882" class="Symbol">)</a> <a id="32884" href="Demos.HSP.html#32342" class="Function Operator">‚âà·¥¨</a> <a id="32887" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="32889" href="Demos.HSP.html#32525" class="Field">from</a> <a id="32894" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="32896" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="32900" class="Symbol">(</a><a id="32901" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="32903" href="Demos.HSP.html#32494" class="Field">to</a> <a id="32906" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="32908" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="32912" href="Demos.HSP.html#32737" class="Bound">y</a><a id="32913" class="Symbol">)</a>
          <a id="32925" href="Demos.HSP.html#32852" class="Function">Œæ</a> <a id="32927" class="Symbol">=</a> <a id="32929" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="32934" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="32936" href="Demos.HSP.html#32525" class="Field">from</a> <a id="32941" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="32943" href="Demos.HSP.html#32740" class="Bound">xy</a>

  <a id="32949" href="Demos.HSP.html#32949" class="Function">fromIsSurjective</a> <a id="32966" class="Symbol">:</a> <a id="32968" href="Demos.HSP.html#12152" class="Function">IsSurjective</a> <a id="32981" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="32983" href="Demos.HSP.html#32525" class="Field">from</a> <a id="32988" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a>
  <a id="32992" href="Demos.HSP.html#32949" class="Function">fromIsSurjective</a> <a id="33009" class="Symbol">{</a><a id="33010" href="Demos.HSP.html#33010" class="Bound">x</a><a id="33011" class="Symbol">}</a> <a id="33013" class="Symbol">=</a> <a id="33015" href="Demos.HSP.html#10381" class="InductiveConstructor">eq</a> <a id="33018" class="Symbol">(</a><a id="33019" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="33021" href="Demos.HSP.html#32494" class="Field">to</a> <a id="33024" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="33026" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="33030" href="Demos.HSP.html#33010" class="Bound">x</a><a id="33031" class="Symbol">)</a> <a id="33033" class="Symbol">(</a><a id="33034" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="33038" class="Symbol">(</a><a id="33039" href="Demos.HSP.html#32625" class="Field">from‚àºto</a> <a id="33047" href="Demos.HSP.html#33010" class="Bound">x</a><a id="33048" class="Symbol">))</a>
   <a id="33054" class="Keyword">where</a> <a id="33060" class="Keyword">open</a> <a id="33065" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="33072" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="33075" href="Demos.HSP.html#32250" class="Bound">ùë®</a> <a id="33077" href="Demos.HSP.html#18862" class="Function Operator">]</a> <a id="33079" class="Keyword">using</a> <a id="33085" class="Symbol">(</a> <a id="33087" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="33091" class="Symbol">)</a>

<a id="33094" class="Keyword">open</a> <a id="33099" href="Demos.HSP.html#32414" class="Module Operator">_‚âÖ_</a>

</pre>

It is easy to prove that \ar{\au{}‚âÖ\au{}} is an equivalence relation, as follows.

<pre class="Agda">

<a id="‚âÖ-refl"></a><a id="33213" href="Demos.HSP.html#33213" class="Function">‚âÖ-refl</a> <a id="33220" class="Symbol">:</a> <a id="33222" href="Relation.Binary.Definitions.html#1339" class="Function">Reflexive</a> <a id="33232" class="Symbol">(</a><a id="33233" href="Demos.HSP.html#32414" class="Record Operator">_‚âÖ_</a> <a id="33237" class="Symbol">{</a><a id="33238" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a><a id="33239" class="Symbol">}{</a><a id="33241" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a><a id="33243" class="Symbol">})</a>
<a id="33246" href="Demos.HSP.html#33213" class="Function">‚âÖ-refl</a> <a id="33253" class="Symbol">{</a><a id="33254" href="Demos.HSP.html#33254" class="Bound">Œ±</a><a id="33255" class="Symbol">}{</a><a id="33257" href="Demos.HSP.html#33257" class="Bound">œÅ·µÉ</a><a id="33259" class="Symbol">}{</a><a id="33261" href="Demos.HSP.html#33261" class="Bound">ùë®</a><a id="33262" class="Symbol">}</a> <a id="33264" class="Symbol">=</a> <a id="33266" href="Demos.HSP.html#32473" class="InductiveConstructor">mkiso</a> <a id="33272" href="Demos.HSP.html#29096" class="Function">ùíæùíπ</a> <a id="33275" href="Demos.HSP.html#29096" class="Function">ùíæùíπ</a> <a id="33278" class="Symbol">(Œª</a> <a id="33281" href="Demos.HSP.html#33281" class="Bound">b</a> <a id="33283" class="Symbol">‚Üí</a> <a id="33285" href="Relation.Binary.Structures.html#1568" class="Function">refl</a><a id="33289" class="Symbol">)</a> <a id="33291" class="Symbol">Œª</a> <a id="33293" href="Demos.HSP.html#33293" class="Bound">a</a> <a id="33295" class="Symbol">‚Üí</a> <a id="33297" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="33302" class="Keyword">where</a> <a id="33308" class="Keyword">open</a> <a id="33313" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="33320" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="33323" href="Demos.HSP.html#33261" class="Bound">ùë®</a> <a id="33325" href="Demos.HSP.html#18862" class="Function Operator">]</a> <a id="33327" class="Keyword">using</a> <a id="33333" class="Symbol">(</a> <a id="33335" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="33340" class="Symbol">)</a>
<a id="‚âÖ-sym"></a><a id="33342" href="Demos.HSP.html#33342" class="Function">‚âÖ-sym</a> <a id="33348" class="Symbol">:</a> <a id="33350" href="Relation.Binary.Definitions.html#1424" class="Function">Sym</a> <a id="33354" class="Symbol">(</a><a id="33355" href="Demos.HSP.html#32414" class="Record Operator">_‚âÖ_</a><a id="33358" class="Symbol">{</a><a id="33359" href="Demos.HSP.html#7261" class="Generalizable">Œ≤</a><a id="33360" class="Symbol">}{</a><a id="33362" href="Demos.HSP.html#7263" class="Generalizable">œÅ·µá</a><a id="33364" class="Symbol">})</a> <a id="33367" class="Symbol">(</a><a id="33368" href="Demos.HSP.html#32414" class="Record Operator">_‚âÖ_</a><a id="33371" class="Symbol">{</a><a id="33372" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a><a id="33373" class="Symbol">}{</a><a id="33375" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a><a id="33377" class="Symbol">})</a>
<a id="33380" href="Demos.HSP.html#33342" class="Function">‚âÖ-sym</a> <a id="33386" href="Demos.HSP.html#33386" class="Bound">œÜ</a> <a id="33388" class="Symbol">=</a> <a id="33390" href="Demos.HSP.html#32473" class="InductiveConstructor">mkiso</a> <a id="33396" class="Symbol">(</a><a id="33397" href="Demos.HSP.html#32525" class="Field">from</a> <a id="33402" href="Demos.HSP.html#33386" class="Bound">œÜ</a><a id="33403" class="Symbol">)</a> <a id="33405" class="Symbol">(</a><a id="33406" href="Demos.HSP.html#32494" class="Field">to</a> <a id="33409" href="Demos.HSP.html#33386" class="Bound">œÜ</a><a id="33410" class="Symbol">)</a> <a id="33412" class="Symbol">(</a><a id="33413" href="Demos.HSP.html#32625" class="Field">from‚àºto</a> <a id="33421" href="Demos.HSP.html#33386" class="Bound">œÜ</a><a id="33422" class="Symbol">)</a> <a id="33424" class="Symbol">(</a><a id="33425" href="Demos.HSP.html#32556" class="Field">to‚àºfrom</a> <a id="33433" href="Demos.HSP.html#33386" class="Bound">œÜ</a><a id="33434" class="Symbol">)</a>

<a id="‚âÖ-trans"></a><a id="33437" href="Demos.HSP.html#33437" class="Function">‚âÖ-trans</a> <a id="33445" class="Symbol">:</a> <a id="33447" href="Relation.Binary.Definitions.html#1585" class="Function">Trans</a> <a id="33453" class="Symbol">(</a><a id="33454" href="Demos.HSP.html#32414" class="Record Operator">_‚âÖ_</a> <a id="33458" class="Symbol">{</a><a id="33459" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a><a id="33460" class="Symbol">}{</a><a id="33462" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a><a id="33464" class="Symbol">})</a> <a id="33467" class="Symbol">(</a><a id="33468" href="Demos.HSP.html#32414" class="Record Operator">_‚âÖ_</a><a id="33471" class="Symbol">{</a><a id="33472" href="Demos.HSP.html#7261" class="Generalizable">Œ≤</a><a id="33473" class="Symbol">}{</a><a id="33475" href="Demos.HSP.html#7263" class="Generalizable">œÅ·µá</a><a id="33477" class="Symbol">})</a> <a id="33480" class="Symbol">(</a><a id="33481" href="Demos.HSP.html#32414" class="Record Operator">_‚âÖ_</a><a id="33484" class="Symbol">{</a><a id="33485" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a><a id="33486" class="Symbol">}{</a><a id="33488" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a><a id="33490" class="Symbol">}{</a><a id="33492" href="Demos.HSP.html#7266" class="Generalizable">Œ≥</a><a id="33493" class="Symbol">}{</a><a id="33495" href="Demos.HSP.html#7268" class="Generalizable">œÅ·∂ú</a><a id="33497" class="Symbol">})</a>
<a id="33500" href="Demos.HSP.html#33437" class="Function">‚âÖ-trans</a> <a id="33508" class="Symbol">{</a><a id="33509" class="Argument">œÅ·∂ú</a> <a id="33512" class="Symbol">=</a> <a id="33514" href="Demos.HSP.html#33514" class="Bound">œÅ·∂ú</a><a id="33516" class="Symbol">}{</a><a id="33518" href="Demos.HSP.html#33518" class="Bound">ùë®</a><a id="33519" class="Symbol">}{</a><a id="33521" href="Demos.HSP.html#33521" class="Bound">ùë©</a><a id="33522" class="Symbol">}{</a><a id="33524" href="Demos.HSP.html#33524" class="Bound">ùë™</a><a id="33525" class="Symbol">}</a> <a id="33527" href="Demos.HSP.html#33527" class="Bound">ab</a> <a id="33530" href="Demos.HSP.html#33530" class="Bound">bc</a> <a id="33533" class="Symbol">=</a> <a id="33535" href="Demos.HSP.html#32473" class="InductiveConstructor">mkiso</a> <a id="33541" href="Demos.HSP.html#33557" class="Function">f</a> <a id="33543" href="Demos.HSP.html#33587" class="Function">g</a> <a id="33545" href="Demos.HSP.html#33780" class="Function">œÑ</a> <a id="33547" href="Demos.HSP.html#33902" class="Function">ŒΩ</a> <a id="33549" class="Keyword">where</a>
  <a id="33557" href="Demos.HSP.html#33557" class="Function">f</a> <a id="33559" class="Symbol">:</a> <a id="33561" href="Demos.HSP.html#26168" class="Function">hom</a> <a id="33565" href="Demos.HSP.html#33518" class="Bound">ùë®</a> <a id="33567" href="Demos.HSP.html#33524" class="Bound">ùë™</a>                <a id="33584" class="Symbol">;</a>  <a id="33587" href="Demos.HSP.html#33587" class="Function">g</a> <a id="33589" class="Symbol">:</a> <a id="33591" href="Demos.HSP.html#26168" class="Function">hom</a> <a id="33595" href="Demos.HSP.html#33524" class="Bound">ùë™</a> <a id="33597" href="Demos.HSP.html#33518" class="Bound">ùë®</a>
  <a id="33601" href="Demos.HSP.html#33557" class="Function">f</a> <a id="33603" class="Symbol">=</a> <a id="33605" href="Demos.HSP.html#28621" class="Function">‚àò-hom</a> <a id="33611" class="Symbol">(</a><a id="33612" href="Demos.HSP.html#32494" class="Field">to</a> <a id="33615" href="Demos.HSP.html#33527" class="Bound">ab</a><a id="33617" class="Symbol">)</a> <a id="33619" class="Symbol">(</a><a id="33620" href="Demos.HSP.html#32494" class="Field">to</a> <a id="33623" href="Demos.HSP.html#33530" class="Bound">bc</a><a id="33625" class="Symbol">)</a>  <a id="33628" class="Symbol">;</a>  <a id="33631" href="Demos.HSP.html#33587" class="Function">g</a> <a id="33633" class="Symbol">=</a> <a id="33635" href="Demos.HSP.html#28621" class="Function">‚àò-hom</a> <a id="33641" class="Symbol">(</a><a id="33642" href="Demos.HSP.html#32525" class="Field">from</a> <a id="33647" href="Demos.HSP.html#33530" class="Bound">bc</a><a id="33649" class="Symbol">)</a> <a id="33651" class="Symbol">(</a><a id="33652" href="Demos.HSP.html#32525" class="Field">from</a> <a id="33657" href="Demos.HSP.html#33527" class="Bound">ab</a><a id="33659" class="Symbol">)</a>

  <a id="33664" class="Keyword">open</a> <a id="33669" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="33676" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="33679" href="Demos.HSP.html#33518" class="Bound">ùë®</a> <a id="33681" href="Demos.HSP.html#18862" class="Function Operator">]</a> <a id="33683" class="Keyword">using</a> <a id="33689" class="Symbol">(</a> <a id="33691" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="33695" class="Symbol">;</a> <a id="33697" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="33703" class="Symbol">)</a>
  <a id="33707" class="Keyword">open</a> <a id="33712" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="33719" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="33722" href="Demos.HSP.html#33524" class="Bound">ùë™</a> <a id="33724" href="Demos.HSP.html#18862" class="Function Operator">]</a> <a id="33726" class="Keyword">using</a> <a id="33732" class="Symbol">()</a> <a id="33735" class="Keyword">renaming</a> <a id="33744" class="Symbol">(</a> <a id="33746" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="33750" class="Symbol">to</a> <a id="33753" class="Field Operator">_‚âà·∂ú_</a> <a id="33758" class="Symbol">;</a> <a id="33760" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="33766" class="Symbol">to</a> <a id="33769" class="Function">trans·∂ú</a> <a id="33776" class="Symbol">)</a>
  <a id="33780" href="Demos.HSP.html#33780" class="Function">œÑ</a> <a id="33782" class="Symbol">:</a> <a id="33784" class="Symbol">‚àÄ</a> <a id="33786" href="Demos.HSP.html#33786" class="Bound">b</a> <a id="33788" class="Symbol">‚Üí</a> <a id="33790" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="33792" href="Demos.HSP.html#33557" class="Function">f</a> <a id="33794" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="33796" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="33800" class="Symbol">(</a><a id="33801" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="33803" href="Demos.HSP.html#33587" class="Function">g</a> <a id="33805" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="33807" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="33811" href="Demos.HSP.html#33786" class="Bound">b</a><a id="33812" class="Symbol">)</a> <a id="33814" href="Demos.HSP.html#33753" class="Function Operator">‚âà·∂ú</a> <a id="33817" href="Demos.HSP.html#33786" class="Bound">b</a>
  <a id="33821" href="Demos.HSP.html#33780" class="Function">œÑ</a> <a id="33823" href="Demos.HSP.html#33823" class="Bound">b</a> <a id="33825" class="Symbol">=</a> <a id="33827" href="Demos.HSP.html#33769" class="Function">trans·∂ú</a> <a id="33834" class="Symbol">(</a><a id="33835" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="33840" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="33842" href="Demos.HSP.html#32494" class="Field">to</a> <a id="33845" href="Demos.HSP.html#33530" class="Bound">bc</a> <a id="33848" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="33850" class="Symbol">(</a><a id="33851" href="Demos.HSP.html#32556" class="Field">to‚àºfrom</a> <a id="33859" href="Demos.HSP.html#33527" class="Bound">ab</a> <a id="33862" class="Symbol">(</a><a id="33863" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="33865" href="Demos.HSP.html#32525" class="Field">from</a> <a id="33870" href="Demos.HSP.html#33530" class="Bound">bc</a> <a id="33873" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="33875" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="33879" href="Demos.HSP.html#33823" class="Bound">b</a><a id="33880" class="Symbol">)))</a> <a id="33884" class="Symbol">(</a><a id="33885" href="Demos.HSP.html#32556" class="Field">to‚àºfrom</a> <a id="33893" href="Demos.HSP.html#33530" class="Bound">bc</a> <a id="33896" href="Demos.HSP.html#33823" class="Bound">b</a><a id="33897" class="Symbol">)</a>

  <a id="33902" href="Demos.HSP.html#33902" class="Function">ŒΩ</a> <a id="33904" class="Symbol">:</a> <a id="33906" class="Symbol">‚àÄ</a> <a id="33908" href="Demos.HSP.html#33908" class="Bound">a</a> <a id="33910" class="Symbol">‚Üí</a> <a id="33912" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="33914" href="Demos.HSP.html#33587" class="Function">g</a> <a id="33916" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="33918" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="33922" class="Symbol">(</a><a id="33923" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="33925" href="Demos.HSP.html#33557" class="Function">f</a> <a id="33927" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="33929" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="33933" href="Demos.HSP.html#33908" class="Bound">a</a><a id="33934" class="Symbol">)</a> <a id="33936" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a> <a id="33938" href="Demos.HSP.html#33908" class="Bound">a</a>
  <a id="33942" href="Demos.HSP.html#33902" class="Function">ŒΩ</a> <a id="33944" href="Demos.HSP.html#33944" class="Bound">a</a> <a id="33946" class="Symbol">=</a> <a id="33948" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="33954" class="Symbol">(</a><a id="33955" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="33960" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="33962" href="Demos.HSP.html#32525" class="Field">from</a> <a id="33967" href="Demos.HSP.html#33527" class="Bound">ab</a> <a id="33970" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="33972" class="Symbol">(</a><a id="33973" href="Demos.HSP.html#32625" class="Field">from‚àºto</a> <a id="33981" href="Demos.HSP.html#33530" class="Bound">bc</a> <a id="33984" class="Symbol">(</a><a id="33985" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="33987" href="Demos.HSP.html#32494" class="Field">to</a> <a id="33990" href="Demos.HSP.html#33527" class="Bound">ab</a> <a id="33993" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="33995" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="33999" href="Demos.HSP.html#33944" class="Bound">a</a><a id="34000" class="Symbol">)))</a> <a id="34004" class="Symbol">(</a><a id="34005" href="Demos.HSP.html#32625" class="Field">from‚àºto</a> <a id="34013" href="Demos.HSP.html#33527" class="Bound">ab</a> <a id="34016" href="Demos.HSP.html#33944" class="Bound">a</a><a id="34017" class="Symbol">)</a>
</pre>

#### <a id="homomorphic-images">Homomorphic images</a>

We have found that a useful way to encode the concept of *homomorphic image* is to produce a witness, that is, a surjective hom. Thus we define the type of surjective homs and also record the fact that an algebra is its own homomorphic image via the identity hom.

<pre class="Agda">

<a id="ov"></a><a id="34366" href="Demos.HSP.html#34366" class="Function">ov</a> <a id="34369" class="Symbol">:</a> <a id="34371" href="Agda.Primitive.html#597" class="Postulate">Level</a> <a id="34377" class="Symbol">‚Üí</a> <a id="34379" href="Agda.Primitive.html#597" class="Postulate">Level</a>         <a id="34393" class="Comment">-- shorthand for a common level transformation</a>
<a id="34440" href="Demos.HSP.html#34366" class="Function">ov</a> <a id="34443" href="Demos.HSP.html#34443" class="Bound">Œ±</a> <a id="34445" class="Symbol">=</a> <a id="34447" href="Demos.HSP.html#5140" class="Bound">ùìû</a> <a id="34449" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="34451" href="Demos.HSP.html#5142" class="Bound">ùì•</a> <a id="34453" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="34455" href="Agda.Primitive.html#780" class="Primitive">lsuc</a> <a id="34460" href="Demos.HSP.html#34443" class="Bound">Œ±</a>

<a id="_IsHomImageOf_"></a><a id="34463" href="Demos.HSP.html#34463" class="Function Operator">_IsHomImageOf_</a> <a id="34478" class="Symbol">:</a> <a id="34480" class="Symbol">(</a><a id="34481" href="Demos.HSP.html#34481" class="Bound">ùë©</a> <a id="34483" class="Symbol">:</a> <a id="34485" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="34493" href="Demos.HSP.html#7261" class="Generalizable">Œ≤</a> <a id="34495" href="Demos.HSP.html#7263" class="Generalizable">œÅ·µá</a><a id="34497" class="Symbol">)(</a><a id="34499" href="Demos.HSP.html#34499" class="Bound">ùë®</a> <a id="34501" class="Symbol">:</a> <a id="34503" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="34511" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="34513" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a><a id="34515" class="Symbol">)</a> <a id="34517" class="Symbol">‚Üí</a> <a id="34519" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="34524" class="Symbol">_</a>
<a id="34526" href="Demos.HSP.html#34526" class="Bound">ùë©</a> <a id="34528" href="Demos.HSP.html#34463" class="Function Operator">IsHomImageOf</a> <a id="34541" href="Demos.HSP.html#34541" class="Bound">ùë®</a> <a id="34543" class="Symbol">=</a> <a id="34545" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="34548" href="Demos.HSP.html#34548" class="Bound">œÜ</a> <a id="34550" href="Data.Product.html#916" class="Function">‚àà</a> <a id="34552" href="Demos.HSP.html#26168" class="Function">hom</a> <a id="34556" href="Demos.HSP.html#34541" class="Bound">ùë®</a> <a id="34558" href="Demos.HSP.html#34526" class="Bound">ùë©</a> <a id="34560" href="Data.Product.html#916" class="Function">]</a> <a id="34562" href="Demos.HSP.html#12152" class="Function">IsSurjective</a> <a id="34575" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="34577" href="Demos.HSP.html#34548" class="Bound">œÜ</a> <a id="34579" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a>

<a id="IdHomImage"></a><a id="34582" href="Demos.HSP.html#34582" class="Function">IdHomImage</a> <a id="34593" class="Symbol">:</a> <a id="34595" class="Symbol">{</a><a id="34596" href="Demos.HSP.html#34596" class="Bound">ùë®</a> <a id="34598" class="Symbol">:</a> <a id="34600" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="34608" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="34610" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a><a id="34612" class="Symbol">}</a> <a id="34614" class="Symbol">‚Üí</a> <a id="34616" href="Demos.HSP.html#34596" class="Bound">ùë®</a> <a id="34618" href="Demos.HSP.html#34463" class="Function Operator">IsHomImageOf</a> <a id="34631" href="Demos.HSP.html#34596" class="Bound">ùë®</a>
<a id="34633" href="Demos.HSP.html#34582" class="Function">IdHomImage</a> <a id="34644" class="Symbol">{</a><a id="34645" class="Argument">Œ±</a> <a id="34647" class="Symbol">=</a> <a id="34649" href="Demos.HSP.html#34649" class="Bound">Œ±</a><a id="34650" class="Symbol">}{</a><a id="34652" class="Argument">ùë®</a> <a id="34654" class="Symbol">=</a> <a id="34656" href="Demos.HSP.html#34656" class="Bound">ùë®</a><a id="34657" class="Symbol">}</a> <a id="34659" class="Symbol">=</a> <a id="34661" href="Demos.HSP.html#29096" class="Function">ùíæùíπ</a> <a id="34664" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="34666" class="Symbol">Œª</a> <a id="34668" class="Symbol">{</a><a id="34669" href="Demos.HSP.html#34669" class="Bound">y</a><a id="34670" class="Symbol">}</a> <a id="34672" class="Symbol">‚Üí</a> <a id="34674" href="Demos.HSP.html#10381" class="InductiveConstructor">Image_‚àã_.eq</a> <a id="34686" href="Demos.HSP.html#34669" class="Bound">y</a> <a id="34688" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>
 <a id="34694" class="Keyword">where</a> <a id="34700" class="Keyword">open</a> <a id="34705" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="34712" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="34715" href="Demos.HSP.html#34656" class="Bound">ùë®</a> <a id="34717" href="Demos.HSP.html#18862" class="Function Operator">]</a> <a id="34719" class="Keyword">using</a> <a id="34725" class="Symbol">(</a> <a id="34727" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="34732" class="Symbol">)</a>
</pre>


#### <a id="factorization-of-homomorphisms">Factorization of homomorphisms</a>

Another theorem in the [agda-algebras][] library, called `HomFactor`, formalizes the following
factorization result: if `g : hom ùë® ùë©`, `h : hom ùë® ùë™`, `h` is surjective, and `ker h ‚äÜ ker g`, then
there exists `œÜ : hom ùë™ ùë©` such that `g = œÜ ‚àò h`. A special case of this result that we
use below is the fact that the setoid function factorization we saw
above lifts to factorization of homomorphisms. Moreover, we associate a
homomorphism `h` with its image---which is (the domain of) a subalgebra of
the codomain of `h`---using the function `HomIm` defined below.[^8]

<pre class="Agda">

<a id="35408" class="Keyword">module</a> <a id="35415" href="Demos.HSP.html#35415" class="Module">_</a> <a id="35417" class="Symbol">{</a><a id="35418" href="Demos.HSP.html#35418" class="Bound">ùë®</a> <a id="35420" class="Symbol">:</a> <a id="35422" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="35430" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="35432" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a><a id="35434" class="Symbol">}{</a><a id="35436" href="Demos.HSP.html#35436" class="Bound">ùë©</a> <a id="35438" class="Symbol">:</a> <a id="35440" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="35448" href="Demos.HSP.html#7261" class="Generalizable">Œ≤</a> <a id="35450" href="Demos.HSP.html#7263" class="Generalizable">œÅ·µá</a><a id="35452" class="Symbol">}</a> <a id="35454" class="Keyword">where</a>

 <a id="35462" href="Demos.HSP.html#35462" class="Function">HomIm</a> <a id="35468" class="Symbol">:</a> <a id="35470" class="Symbol">(</a><a id="35471" href="Demos.HSP.html#35471" class="Bound">h</a> <a id="35473" class="Symbol">:</a> <a id="35475" href="Demos.HSP.html#26168" class="Function">hom</a> <a id="35479" href="Demos.HSP.html#35418" class="Bound">ùë®</a> <a id="35481" href="Demos.HSP.html#35436" class="Bound">ùë©</a><a id="35482" class="Symbol">)</a> <a id="35484" class="Symbol">‚Üí</a> <a id="35486" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="35494" class="Symbol">_</a> <a id="35496" class="Symbol">_</a>
 <a id="35499" href="Demos.HSP.html#18273" class="Field">Domain</a> <a id="35506" class="Symbol">(</a><a id="35507" href="Demos.HSP.html#35462" class="Function">HomIm</a> <a id="35513" href="Demos.HSP.html#35513" class="Bound">h</a><a id="35514" class="Symbol">)</a> <a id="35516" class="Symbol">=</a> <a id="35518" href="Demos.HSP.html#13471" class="Function">Im</a> <a id="35521" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="35523" href="Demos.HSP.html#35513" class="Bound">h</a> <a id="35525" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a>
 <a id="35528" href="Demos.HSP.html#18302" class="Field">Interp</a> <a id="35535" class="Symbol">(</a><a id="35536" href="Demos.HSP.html#35462" class="Function">HomIm</a> <a id="35542" href="Demos.HSP.html#35542" class="Bound">h</a><a id="35543" class="Symbol">)</a> <a id="35545" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="35549" class="Symbol">(</a><a id="35550" href="Demos.HSP.html#35550" class="Bound">f</a> <a id="35552" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="35554" href="Demos.HSP.html#35554" class="Bound">la</a><a id="35556" class="Symbol">)</a> <a id="35558" class="Symbol">=</a> <a id="35560" class="Symbol">(</a><a id="35561" href="Demos.HSP.html#35550" class="Bound">f</a> <a id="35563" href="Demos.HSP.html#18975" class="Function Operator">ÃÇ</a> <a id="35565" href="Demos.HSP.html#35418" class="Bound">ùë®</a><a id="35566" class="Symbol">)</a> <a id="35568" href="Demos.HSP.html#35554" class="Bound">la</a>
 <a id="35572" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="35577" class="Symbol">(</a><a id="35578" href="Demos.HSP.html#18302" class="Field">Interp</a> <a id="35585" class="Symbol">(</a><a id="35586" href="Demos.HSP.html#35462" class="Function">HomIm</a> <a id="35592" href="Demos.HSP.html#35592" class="Bound">h</a><a id="35593" class="Symbol">))</a> <a id="35596" class="Symbol">{</a><a id="35597" href="Demos.HSP.html#35597" class="Bound">x1</a> <a id="35600" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="35602" href="Demos.HSP.html#35602" class="Bound">x2</a><a id="35604" class="Symbol">}</a> <a id="35606" class="Symbol">{</a><a id="35607" class="DottedPattern Symbol">.</a><a id="35608" href="Demos.HSP.html#35597" class="DottedPattern Bound">x1</a> <a id="35611" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="35613" href="Demos.HSP.html#35613" class="Bound">y2</a><a id="35615" class="Symbol">}</a> <a id="35617" class="Symbol">(</a><a id="35618" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="35625" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="35627" href="Demos.HSP.html#35627" class="Bound">e</a><a id="35628" class="Symbol">)</a> <a id="35630" class="Symbol">=</a>
  <a id="35634" href="Relation.Binary.Reasoning.Base.Single.html#1916" class="Function Operator">begin</a>
      <a id="35646" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="35648" href="Demos.HSP.html#35592" class="Bound">h</a> <a id="35650" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a>  <a id="35653" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a>         <a id="35665" class="Symbol">(</a><a id="35666" href="Demos.HSP.html#18302" class="Field">Interp</a> <a id="35673" href="Demos.HSP.html#35418" class="Bound">ùë®</a>  <a id="35676" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="35680" class="Symbol">(</a><a id="35681" href="Demos.HSP.html#35597" class="Bound">x1</a> <a id="35684" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="35686" href="Demos.HSP.html#35602" class="Bound">x2</a><a id="35688" class="Symbol">))</a>  <a id="35692" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a> <a id="35695" href="Demos.HSP.html#36065" class="Function">h-compatible</a>                  <a id="35725" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
   <a id="35730" href="Demos.HSP.html#18302" class="Field">Interp</a> <a id="35737" href="Demos.HSP.html#35436" class="Bound">ùë©</a>  <a id="35740" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="35744" class="Symbol">(</a><a id="35745" href="Demos.HSP.html#35597" class="Bound">x1</a> <a id="35748" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="35750" class="Symbol">Œª</a> <a id="35752" href="Demos.HSP.html#35752" class="Bound">x</a> <a id="35754" class="Symbol">‚Üí</a> <a id="35756" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="35758" href="Demos.HSP.html#35592" class="Bound">h</a> <a id="35760" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a>  <a id="35763" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="35767" href="Demos.HSP.html#35602" class="Bound">x2</a> <a id="35770" href="Demos.HSP.html#35752" class="Bound">x</a><a id="35771" class="Symbol">)</a>       <a id="35779" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a> <a id="35782" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="35787" class="Symbol">(</a><a id="35788" href="Demos.HSP.html#18302" class="Field">Interp</a> <a id="35795" href="Demos.HSP.html#35436" class="Bound">ùë©</a><a id="35796" class="Symbol">)</a> <a id="35798" class="Symbol">(</a><a id="35799" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="35806" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="35808" href="Demos.HSP.html#35627" class="Bound">e</a><a id="35809" class="Symbol">)</a>  <a id="35812" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
   <a id="35817" href="Demos.HSP.html#18302" class="Field">Interp</a> <a id="35824" href="Demos.HSP.html#35436" class="Bound">ùë©</a>  <a id="35827" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="35831" class="Symbol">(</a><a id="35832" href="Demos.HSP.html#35597" class="Bound">x1</a> <a id="35835" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="35837" class="Symbol">Œª</a> <a id="35839" href="Demos.HSP.html#35839" class="Bound">x</a> <a id="35841" class="Symbol">‚Üí</a> <a id="35843" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="35845" href="Demos.HSP.html#35592" class="Bound">h</a> <a id="35847" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a>  <a id="35850" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="35854" href="Demos.HSP.html#35613" class="Bound">y2</a> <a id="35857" href="Demos.HSP.html#35839" class="Bound">x</a><a id="35858" class="Symbol">)</a>       <a id="35866" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚âàÀò‚ü®</a> <a id="35870" href="Demos.HSP.html#36065" class="Function">h-compatible</a>                 <a id="35899" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚ü©</a>
      <a id="35907" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="35909" href="Demos.HSP.html#35592" class="Bound">h</a> <a id="35911" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a>  <a id="35914" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a>         <a id="35926" class="Symbol">(</a><a id="35927" href="Demos.HSP.html#18302" class="Field">Interp</a> <a id="35934" href="Demos.HSP.html#35418" class="Bound">ùë®</a>  <a id="35937" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="35941" class="Symbol">(</a><a id="35942" href="Demos.HSP.html#35597" class="Bound">x1</a> <a id="35945" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="35947" href="Demos.HSP.html#35613" class="Bound">y2</a><a id="35949" class="Symbol">))</a>  <a id="35953" href="Relation.Binary.Reasoning.Base.Single.html#2555" class="Function Operator">‚àé</a>
   <a id="35958" class="Keyword">where</a>  <a id="35965" class="Keyword">open</a> <a id="35970" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="35977" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="35980" href="Demos.HSP.html#35436" class="Bound">ùë©</a> <a id="35982" href="Demos.HSP.html#18862" class="Function Operator">]</a> <a id="35984" class="Symbol">;</a> <a id="35986" class="Keyword">open</a> <a id="35991" href="Relation.Binary.Reasoning.Setoid.html" class="Module">SetoidReasoning</a> <a id="36007" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="36010" href="Demos.HSP.html#35436" class="Bound">ùë©</a> <a id="36012" href="Demos.HSP.html#18862" class="Function Operator">]</a>
          <a id="36024" class="Keyword">open</a> <a id="36029" href="Demos.HSP.html#26042" class="Module">IsHom</a> <a id="36035" href="Demos.HSP.html#7893" class="Function Operator">‚à•</a> <a id="36037" href="Demos.HSP.html#35592" class="Bound">h</a> <a id="36039" href="Demos.HSP.html#7893" class="Function Operator">‚à•</a> <a id="36041" class="Keyword">renaming</a> <a id="36050" class="Symbol">(</a><a id="36051" href="Demos.HSP.html#26136" class="Field">compatible</a> <a id="36062" class="Symbol">to</a> <a id="36065" class="Field">h-compatible</a><a id="36077" class="Symbol">)</a>

 <a id="36081" href="Demos.HSP.html#36081" class="Function">toHomIm</a> <a id="36089" class="Symbol">:</a> <a id="36091" class="Symbol">(</a><a id="36092" href="Demos.HSP.html#36092" class="Bound">h</a> <a id="36094" class="Symbol">:</a> <a id="36096" href="Demos.HSP.html#26168" class="Function">hom</a> <a id="36100" href="Demos.HSP.html#35418" class="Bound">ùë®</a> <a id="36102" href="Demos.HSP.html#35436" class="Bound">ùë©</a><a id="36103" class="Symbol">)</a> <a id="36105" class="Symbol">‚Üí</a> <a id="36107" href="Demos.HSP.html#26168" class="Function">hom</a> <a id="36111" href="Demos.HSP.html#35418" class="Bound">ùë®</a> <a id="36113" class="Symbol">(</a><a id="36114" href="Demos.HSP.html#35462" class="Function">HomIm</a> <a id="36120" href="Demos.HSP.html#36092" class="Bound">h</a><a id="36121" class="Symbol">)</a>
 <a id="36124" href="Demos.HSP.html#36081" class="Function">toHomIm</a> <a id="36132" href="Demos.HSP.html#36132" class="Bound">h</a> <a id="36134" class="Symbol">=</a> <a id="36136" href="Demos.HSP.html#13689" class="Function">toIm</a> <a id="36141" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="36143" href="Demos.HSP.html#36132" class="Bound">h</a> <a id="36145" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="36147" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="36149" href="Demos.HSP.html#26115" class="InductiveConstructor">mkhom</a> <a id="36155" class="Symbol">(</a><a id="36156" href="Demos.HSP.html#6750" class="Function">reflÀ¢</a> <a id="36162" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="36165" href="Demos.HSP.html#35436" class="Bound">ùë©</a> <a id="36167" href="Demos.HSP.html#18862" class="Function Operator">]</a><a id="36168" class="Symbol">)</a>

 <a id="36172" href="Demos.HSP.html#36172" class="Function">fromHomIm</a> <a id="36182" class="Symbol">:</a> <a id="36184" class="Symbol">(</a><a id="36185" href="Demos.HSP.html#36185" class="Bound">h</a> <a id="36187" class="Symbol">:</a> <a id="36189" href="Demos.HSP.html#26168" class="Function">hom</a> <a id="36193" href="Demos.HSP.html#35418" class="Bound">ùë®</a> <a id="36195" href="Demos.HSP.html#35436" class="Bound">ùë©</a><a id="36196" class="Symbol">)</a> <a id="36198" class="Symbol">‚Üí</a> <a id="36200" href="Demos.HSP.html#26168" class="Function">hom</a> <a id="36204" class="Symbol">(</a><a id="36205" href="Demos.HSP.html#35462" class="Function">HomIm</a> <a id="36211" href="Demos.HSP.html#36185" class="Bound">h</a><a id="36212" class="Symbol">)</a> <a id="36214" href="Demos.HSP.html#35436" class="Bound">ùë©</a>
 <a id="36217" href="Demos.HSP.html#36172" class="Function">fromHomIm</a> <a id="36227" href="Demos.HSP.html#36227" class="Bound">h</a> <a id="36229" class="Symbol">=</a> <a id="36231" href="Demos.HSP.html#13765" class="Function">fromIm</a> <a id="36238" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="36240" href="Demos.HSP.html#36227" class="Bound">h</a> <a id="36242" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="36244" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="36246" href="Demos.HSP.html#26115" class="InductiveConstructor">mkhom</a> <a id="36252" class="Symbol">(</a><a id="36253" href="Demos.HSP.html#26136" class="Field">IsHom.compatible</a> <a id="36270" href="Demos.HSP.html#7893" class="Function Operator">‚à•</a> <a id="36272" href="Demos.HSP.html#36227" class="Bound">h</a> <a id="36274" href="Demos.HSP.html#7893" class="Function Operator">‚à•</a><a id="36275" class="Symbol">)</a>
</pre>


#### <a id="lift-alg-is-an-algebraic-invariant">Lift-Alg is an algebraic invariant</a>

The `Lift-Alg` operation neatly resolves the technical problem of universe non-cumulativity because isomorphism classes of algebras are closed under `Lift-Alg`.

<pre class="Agda">

<a id="36554" class="Keyword">module</a> <a id="36561" href="Demos.HSP.html#36561" class="Module">_</a> <a id="36563" class="Symbol">{</a><a id="36564" href="Demos.HSP.html#36564" class="Bound">ùë®</a> <a id="36566" class="Symbol">:</a> <a id="36568" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="36576" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="36578" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a><a id="36580" class="Symbol">}{</a><a id="36582" href="Demos.HSP.html#36582" class="Bound">‚Ñì</a> <a id="36584" class="Symbol">:</a> <a id="36586" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="36591" class="Symbol">}</a> <a id="36593" class="Keyword">where</a>
 <a id="36600" href="Demos.HSP.html#36600" class="Function">Lift-‚âÖÀ°</a> <a id="36608" class="Symbol">:</a> <a id="36610" href="Demos.HSP.html#36564" class="Bound">ùë®</a> <a id="36612" href="Demos.HSP.html#32414" class="Record Operator">‚âÖ</a> <a id="36614" class="Symbol">(</a><a id="36615" href="Demos.HSP.html#21080" class="Function">Lift-AlgÀ°</a> <a id="36625" href="Demos.HSP.html#36564" class="Bound">ùë®</a> <a id="36627" href="Demos.HSP.html#36582" class="Bound">‚Ñì</a><a id="36628" class="Symbol">)</a>
 <a id="36631" href="Demos.HSP.html#36600" class="Function">Lift-‚âÖÀ°</a> <a id="36639" class="Symbol">=</a> <a id="36641" href="Demos.HSP.html#32473" class="InductiveConstructor">mkiso</a> <a id="36647" href="Demos.HSP.html#29567" class="Function">ToLiftÀ°</a> <a id="36655" href="Demos.HSP.html#29671" class="Function">FromLiftÀ°</a> <a id="36665" class="Symbol">(</a><a id="36666" href="Demos.HSP.html#29767" class="Function">ToFromLiftÀ°</a><a id="36677" class="Symbol">{</a><a id="36678" class="Argument">ùë®</a> <a id="36680" class="Symbol">=</a> <a id="36682" href="Demos.HSP.html#36564" class="Bound">ùë®</a><a id="36683" class="Symbol">})</a> <a id="36686" class="Symbol">(</a><a id="36687" href="Demos.HSP.html#29856" class="Function">FromToLiftÀ°</a><a id="36698" class="Symbol">{</a><a id="36699" class="Argument">ùë®</a> <a id="36701" class="Symbol">=</a> <a id="36703" href="Demos.HSP.html#36564" class="Bound">ùë®</a><a id="36704" class="Symbol">}{</a><a id="36706" href="Demos.HSP.html#36582" class="Bound">‚Ñì</a><a id="36707" class="Symbol">})</a>
 <a id="36711" href="Demos.HSP.html#36711" class="Function">Lift-‚âÖ ≥</a> <a id="36719" class="Symbol">:</a> <a id="36721" href="Demos.HSP.html#36564" class="Bound">ùë®</a> <a id="36723" href="Demos.HSP.html#32414" class="Record Operator">‚âÖ</a> <a id="36725" class="Symbol">(</a><a id="36726" href="Demos.HSP.html#21475" class="Function">Lift-Alg ≥</a> <a id="36736" href="Demos.HSP.html#36564" class="Bound">ùë®</a> <a id="36738" href="Demos.HSP.html#36582" class="Bound">‚Ñì</a><a id="36739" class="Symbol">)</a>
 <a id="36742" href="Demos.HSP.html#36711" class="Function">Lift-‚âÖ ≥</a> <a id="36750" class="Symbol">=</a> <a id="36752" href="Demos.HSP.html#32473" class="InductiveConstructor">mkiso</a> <a id="36758" href="Demos.HSP.html#29944" class="Function">ToLift ≥</a> <a id="36766" href="Demos.HSP.html#30055" class="Function">FromLift ≥</a> <a id="36776" class="Symbol">(</a><a id="36777" href="Demos.HSP.html#30151" class="Function">ToFromLift ≥</a><a id="36788" class="Symbol">{</a><a id="36789" class="Argument">ùë®</a> <a id="36791" class="Symbol">=</a> <a id="36793" href="Demos.HSP.html#36564" class="Bound">ùë®</a><a id="36794" class="Symbol">})</a> <a id="36797" class="Symbol">(</a><a id="36798" href="Demos.HSP.html#30244" class="Function">FromToLift ≥</a><a id="36809" class="Symbol">{</a><a id="36810" class="Argument">ùë®</a> <a id="36812" class="Symbol">=</a> <a id="36814" href="Demos.HSP.html#36564" class="Bound">ùë®</a><a id="36815" class="Symbol">}{</a><a id="36817" href="Demos.HSP.html#36582" class="Bound">‚Ñì</a><a id="36818" class="Symbol">})</a>

<a id="Lift-‚âÖ"></a><a id="36822" href="Demos.HSP.html#36822" class="Function">Lift-‚âÖ</a> <a id="36829" class="Symbol">:</a> <a id="36831" class="Symbol">{</a><a id="36832" href="Demos.HSP.html#36832" class="Bound">ùë®</a> <a id="36834" class="Symbol">:</a> <a id="36836" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="36844" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="36846" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a><a id="36848" class="Symbol">}{</a><a id="36850" href="Demos.HSP.html#36850" class="Bound">‚Ñì</a> <a id="36852" href="Demos.HSP.html#36852" class="Bound">œÅ</a> <a id="36854" class="Symbol">:</a> <a id="36856" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="36861" class="Symbol">}</a> <a id="36863" class="Symbol">‚Üí</a> <a id="36865" href="Demos.HSP.html#36832" class="Bound">ùë®</a> <a id="36867" href="Demos.HSP.html#32414" class="Record Operator">‚âÖ</a> <a id="36869" class="Symbol">(</a><a id="36870" href="Demos.HSP.html#21992" class="Function">Lift-Alg</a> <a id="36879" href="Demos.HSP.html#36832" class="Bound">ùë®</a> <a id="36881" href="Demos.HSP.html#36850" class="Bound">‚Ñì</a> <a id="36883" href="Demos.HSP.html#36852" class="Bound">œÅ</a><a id="36884" class="Symbol">)</a>
<a id="36886" href="Demos.HSP.html#36822" class="Function">Lift-‚âÖ</a> <a id="36893" class="Symbol">=</a> <a id="36895" href="Demos.HSP.html#33437" class="Function">‚âÖ-trans</a> <a id="36903" href="Demos.HSP.html#36600" class="Function">Lift-‚âÖÀ°</a> <a id="36911" href="Demos.HSP.html#36711" class="Function">Lift-‚âÖ ≥</a>
</pre>


### <a id="subalgebras">Subalgebras</a>

We say that `ùë®` is a *subalgebra* of `ùë©` and write `ùë® ‚â§ ùë©` just in case `ùë®` can be *homomorphically
embedded* in `ùë©`; in other terms, `ùë® ‚â§ ùë©` iff there exists an injective hom from `ùë®` to `ùë©`.

<pre class="Agda">

<a id="_‚â§_"></a><a id="37181" href="Demos.HSP.html#37181" class="Function Operator">_‚â§_</a> <a id="37185" class="Symbol">:</a> <a id="37187" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="37195" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="37197" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a> <a id="37200" class="Symbol">‚Üí</a> <a id="37202" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="37210" href="Demos.HSP.html#7261" class="Generalizable">Œ≤</a> <a id="37212" href="Demos.HSP.html#7263" class="Generalizable">œÅ·µá</a> <a id="37215" class="Symbol">‚Üí</a> <a id="37217" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="37222" class="Symbol">_</a>
<a id="37224" href="Demos.HSP.html#37224" class="Bound">ùë®</a> <a id="37226" href="Demos.HSP.html#37181" class="Function Operator">‚â§</a> <a id="37228" href="Demos.HSP.html#37228" class="Bound">ùë©</a> <a id="37230" class="Symbol">=</a> <a id="37232" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="37235" href="Demos.HSP.html#37235" class="Bound">h</a> <a id="37237" href="Data.Product.html#916" class="Function">‚àà</a> <a id="37239" href="Demos.HSP.html#26168" class="Function">hom</a> <a id="37243" href="Demos.HSP.html#37224" class="Bound">ùë®</a> <a id="37245" href="Demos.HSP.html#37228" class="Bound">ùë©</a> <a id="37247" href="Data.Product.html#916" class="Function">]</a> <a id="37249" href="Demos.HSP.html#12069" class="Function">IsInjective</a> <a id="37261" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="37263" href="Demos.HSP.html#37235" class="Bound">h</a> <a id="37265" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a>

</pre>
The subalgebra relation is reflexive, by the identity monomorphism (and transitive by composition of monomorphisms, hence, a *preorder*, though we won't need this fact here).

<pre class="Agda">

<a id="‚â§-reflexive"></a><a id="37469" href="Demos.HSP.html#37469" class="Function">‚â§-reflexive</a>   <a id="37483" class="Symbol">:</a>  <a id="37486" class="Symbol">{</a><a id="37487" href="Demos.HSP.html#37487" class="Bound">ùë®</a> <a id="37489" class="Symbol">:</a> <a id="37491" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="37499" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="37501" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a><a id="37503" class="Symbol">}</a> <a id="37505" class="Symbol">‚Üí</a> <a id="37507" href="Demos.HSP.html#37487" class="Bound">ùë®</a> <a id="37509" href="Demos.HSP.html#37181" class="Function Operator">‚â§</a> <a id="37511" href="Demos.HSP.html#37487" class="Bound">ùë®</a>
<a id="37513" href="Demos.HSP.html#37469" class="Function">‚â§-reflexive</a> <a id="37525" class="Symbol">=</a> <a id="37527" href="Demos.HSP.html#29096" class="Function">ùíæùíπ</a> <a id="37530" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="37532" href="Function.Base.html#615" class="Function">id</a>

</pre>

<!-- If `ùíú : I ‚Üí Algebra Œ± œÅ·µÉ`, `‚Ñ¨ : I ‚Üí Algebra Œ≤ œÅ·µá` (families of -algebras) and if `‚Ñ¨ i ‚â§ ùíú i` for all `i : I`, then `‚®Ö ‚Ñ¨` is a subalgebra of `‚®Ö ùíú`. Below we will use to denote this fact. -->

We conclude this section with an easy fact that will be useful later; it simply converts a monomorphism into a proof of a subalgebra relationship.

<pre class="Agda">

<a id="mon‚Üí‚â§"></a><a id="37906" href="Demos.HSP.html#37906" class="Function">mon‚Üí‚â§</a> <a id="37912" class="Symbol">:</a> <a id="37914" class="Symbol">{</a><a id="37915" href="Demos.HSP.html#37915" class="Bound">ùë®</a> <a id="37917" class="Symbol">:</a> <a id="37919" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="37927" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="37929" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a><a id="37931" class="Symbol">}{</a><a id="37933" href="Demos.HSP.html#37933" class="Bound">ùë©</a> <a id="37935" class="Symbol">:</a> <a id="37937" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="37945" href="Demos.HSP.html#7261" class="Generalizable">Œ≤</a> <a id="37947" href="Demos.HSP.html#7263" class="Generalizable">œÅ·µá</a><a id="37949" class="Symbol">}</a> <a id="37951" class="Symbol">‚Üí</a> <a id="37953" href="Demos.HSP.html#26797" class="Function">mon</a> <a id="37957" href="Demos.HSP.html#37915" class="Bound">ùë®</a> <a id="37959" href="Demos.HSP.html#37933" class="Bound">ùë©</a> <a id="37961" class="Symbol">‚Üí</a> <a id="37963" href="Demos.HSP.html#37915" class="Bound">ùë®</a> <a id="37965" href="Demos.HSP.html#37181" class="Function Operator">‚â§</a> <a id="37967" href="Demos.HSP.html#37933" class="Bound">ùë©</a>
<a id="37969" href="Demos.HSP.html#37906" class="Function">mon‚Üí‚â§</a> <a id="37975" class="Symbol">{</a><a id="37976" class="Argument">ùë®</a> <a id="37978" class="Symbol">=</a> <a id="37980" href="Demos.HSP.html#37980" class="Bound">ùë®</a><a id="37981" class="Symbol">}{</a><a id="37983" href="Demos.HSP.html#37983" class="Bound">ùë©</a><a id="37984" class="Symbol">}</a> <a id="37986" href="Demos.HSP.html#37986" class="Bound">x</a> <a id="37988" class="Symbol">=</a> <a id="37990" href="Demos.HSP.html#27458" class="Function">mon‚Üíintohom</a> <a id="38002" href="Demos.HSP.html#37980" class="Bound">ùë®</a> <a id="38004" href="Demos.HSP.html#37983" class="Bound">ùë©</a> <a id="38006" href="Demos.HSP.html#37986" class="Bound">x</a>
</pre>


### <a id="terms">Terms</a>

Fix a signature `ùëÜ` and let `X` denote an arbitrary nonempty collection of variable symbols. Such a collection is called a *context*. Assume the symbols in `X` are distinct from the operation symbols of `ùëÜ`, that is `X ‚à© ‚à£ ùëÜ ‚à£ = ‚àÖ`. A *word* in the language of `ùëÜ` is a finite sequence of members of `X ‚à™ ‚à£ ùëÜ ‚à£`. We denote the
concatenation of such sequences by simple juxtaposition. Let `S‚ÇÄ` denote the set of nullary operation symbols of `ùëÜ`. We define by induction on `n` the sets `T‚Çô` of *words* over `X ‚à™ ‚à£ ùëÜ ‚à£` as follows: `T‚ÇÄ := X ‚à™ S‚ÇÄ` and 
`T‚Çô‚Çä‚ÇÅ := T‚Çô ‚à™ ùíØ‚Çô`, where `ùíØ‚Çô` is the collection of all `f t` such that `f : ‚à£ ùëÜ ‚à£` and `t : ‚à• ùëÜ ‚à• f ‚Üí ùëá‚Çô`.
(Recall, `‚à• ùëÜ ‚à• f` is the arity of the operation symbol `f`.)
An `ùëÜ`-*term* is a term in the language of `ùëÜ` and the collection of all `ùëÜ`-terms in the context `X` is `Term X := ‚ãÉ‚Çô T‚Çô`.

In type theory, this translates to two cases: variable injection and applying an operation symbol to a tuple of terms. This represents each term as a tree with an operation symbol at each `node` and a variable symbol at
each leaf `‚Ñä`; hence the constructor names (`‚Ñä` for "generator" and `node` for "node") in the following inductively defined type.

<pre class="Agda">

<a id="39258" class="Keyword">data</a> <a id="Term"></a><a id="39263" href="Demos.HSP.html#39263" class="Datatype">Term</a> <a id="39268" class="Symbol">(</a><a id="39269" href="Demos.HSP.html#39269" class="Bound">X</a> <a id="39271" class="Symbol">:</a> <a id="39273" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="39278" href="Demos.HSP.html#7278" class="Generalizable">œá</a><a id="39279" class="Symbol">)</a> <a id="39281" class="Symbol">:</a> <a id="39283" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="39288" class="Symbol">(</a><a id="39289" href="Demos.HSP.html#34366" class="Function">ov</a> <a id="39292" href="Demos.HSP.html#39278" class="Bound">œá</a><a id="39293" class="Symbol">)</a>  <a id="39296" class="Keyword">where</a>
 <a id="Term.‚Ñä"></a><a id="39303" href="Demos.HSP.html#39303" class="InductiveConstructor">‚Ñä</a> <a id="39305" class="Symbol">:</a> <a id="39307" href="Demos.HSP.html#39269" class="Bound">X</a> <a id="39309" class="Symbol">‚Üí</a> <a id="39311" href="Demos.HSP.html#39263" class="Datatype">Term</a> <a id="39316" href="Demos.HSP.html#39269" class="Bound">X</a>
 <a id="Term.node"></a><a id="39319" href="Demos.HSP.html#39319" class="InductiveConstructor">node</a> <a id="39324" class="Symbol">:</a> <a id="39326" class="Symbol">(</a><a id="39327" href="Demos.HSP.html#39327" class="Bound">f</a> <a id="39329" class="Symbol">:</a> <a id="39331" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="39333" href="Demos.HSP.html#5126" class="Bound">ùëÜ</a> <a id="39335" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a><a id="39336" class="Symbol">)(</a><a id="39338" href="Demos.HSP.html#39338" class="Bound">t</a> <a id="39340" class="Symbol">:</a> <a id="39342" href="Demos.HSP.html#7893" class="Function Operator">‚à•</a> <a id="39344" href="Demos.HSP.html#5126" class="Bound">ùëÜ</a> <a id="39346" href="Demos.HSP.html#7893" class="Function Operator">‚à•</a> <a id="39348" href="Demos.HSP.html#39327" class="Bound">f</a> <a id="39350" class="Symbol">‚Üí</a> <a id="39352" href="Demos.HSP.html#39263" class="Datatype">Term</a> <a id="39357" href="Demos.HSP.html#39269" class="Bound">X</a><a id="39358" class="Symbol">)</a> <a id="39360" class="Symbol">‚Üí</a> <a id="39362" href="Demos.HSP.html#39263" class="Datatype">Term</a> <a id="39367" href="Demos.HSP.html#39269" class="Bound">X</a>
</pre>


#### <a id="the-term-algebra">The term algebra</a>

We enrich the `Term` type to a setoid of `ùëÜ`-terms, which will ultimately be the domain of an algebra, called the *term algebra in the signature* `ùëÜ`. For this we need an equivalence relation on terms.

<pre class="Agda">

<a id="39651" class="Keyword">module</a> <a id="39658" href="Demos.HSP.html#39658" class="Module">_</a> <a id="39660" class="Symbol">{</a><a id="39661" href="Demos.HSP.html#39661" class="Bound">X</a> <a id="39663" class="Symbol">:</a> <a id="39665" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="39670" href="Demos.HSP.html#7278" class="Generalizable">œá</a> <a id="39672" class="Symbol">}</a> <a id="39674" class="Keyword">where</a>

 <a id="39682" class="Keyword">data</a> <a id="39687" href="Demos.HSP.html#39687" class="Datatype Operator">_‚âÉ_</a> <a id="39691" class="Symbol">:</a> <a id="39693" href="Demos.HSP.html#39263" class="Datatype">Term</a> <a id="39698" href="Demos.HSP.html#39661" class="Bound">X</a> <a id="39700" class="Symbol">‚Üí</a> <a id="39702" href="Demos.HSP.html#39263" class="Datatype">Term</a> <a id="39707" href="Demos.HSP.html#39661" class="Bound">X</a> <a id="39709" class="Symbol">‚Üí</a> <a id="39711" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="39716" class="Symbol">(</a><a id="39717" href="Demos.HSP.html#34366" class="Function">ov</a> <a id="39720" href="Demos.HSP.html#39670" class="Bound">œá</a><a id="39721" class="Symbol">)</a> <a id="39723" class="Keyword">where</a>
  <a id="39731" href="Demos.HSP.html#39731" class="InductiveConstructor">rfl</a> <a id="39735" class="Symbol">:</a> <a id="39737" class="Symbol">{</a><a id="39738" href="Demos.HSP.html#39738" class="Bound">x</a> <a id="39740" href="Demos.HSP.html#39740" class="Bound">y</a> <a id="39742" class="Symbol">:</a> <a id="39744" href="Demos.HSP.html#39661" class="Bound">X</a><a id="39745" class="Symbol">}</a> <a id="39747" class="Symbol">‚Üí</a> <a id="39749" href="Demos.HSP.html#39738" class="Bound">x</a> <a id="39751" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">‚â°</a> <a id="39753" href="Demos.HSP.html#39740" class="Bound">y</a> <a id="39755" class="Symbol">‚Üí</a> <a id="39757" class="Symbol">(</a><a id="39758" href="Demos.HSP.html#39303" class="InductiveConstructor">‚Ñä</a> <a id="39760" href="Demos.HSP.html#39738" class="Bound">x</a><a id="39761" class="Symbol">)</a> <a id="39763" href="Demos.HSP.html#39687" class="Datatype Operator">‚âÉ</a> <a id="39765" class="Symbol">(</a><a id="39766" href="Demos.HSP.html#39303" class="InductiveConstructor">‚Ñä</a> <a id="39768" href="Demos.HSP.html#39740" class="Bound">y</a><a id="39769" class="Symbol">)</a>
  <a id="39773" href="Demos.HSP.html#39773" class="InductiveConstructor">gnl</a> <a id="39777" class="Symbol">:</a> <a id="39779" class="Symbol">‚àÄ</a> <a id="39781" class="Symbol">{</a><a id="39782" href="Demos.HSP.html#39782" class="Bound">f</a><a id="39783" class="Symbol">}{</a><a id="39785" href="Demos.HSP.html#39785" class="Bound">s</a> <a id="39787" href="Demos.HSP.html#39787" class="Bound">t</a> <a id="39789" class="Symbol">:</a> <a id="39791" href="Demos.HSP.html#7893" class="Function Operator">‚à•</a> <a id="39793" href="Demos.HSP.html#5126" class="Bound">ùëÜ</a> <a id="39795" href="Demos.HSP.html#7893" class="Function Operator">‚à•</a> <a id="39797" href="Demos.HSP.html#39782" class="Bound">f</a> <a id="39799" class="Symbol">‚Üí</a> <a id="39801" href="Demos.HSP.html#39263" class="Datatype">Term</a> <a id="39806" href="Demos.HSP.html#39661" class="Bound">X</a><a id="39807" class="Symbol">}</a> <a id="39809" class="Symbol">‚Üí</a> <a id="39811" class="Symbol">(‚àÄ</a> <a id="39814" href="Demos.HSP.html#39814" class="Bound">i</a> <a id="39816" class="Symbol">‚Üí</a> <a id="39818" class="Symbol">(</a><a id="39819" href="Demos.HSP.html#39785" class="Bound">s</a> <a id="39821" href="Demos.HSP.html#39814" class="Bound">i</a><a id="39822" class="Symbol">)</a> <a id="39824" href="Demos.HSP.html#39687" class="Datatype Operator">‚âÉ</a> <a id="39826" class="Symbol">(</a><a id="39827" href="Demos.HSP.html#39787" class="Bound">t</a> <a id="39829" href="Demos.HSP.html#39814" class="Bound">i</a><a id="39830" class="Symbol">))</a> <a id="39833" class="Symbol">‚Üí</a> <a id="39835" class="Symbol">(</a><a id="39836" href="Demos.HSP.html#39319" class="InductiveConstructor">node</a> <a id="39841" href="Demos.HSP.html#39782" class="Bound">f</a> <a id="39843" href="Demos.HSP.html#39785" class="Bound">s</a><a id="39844" class="Symbol">)</a> <a id="39846" href="Demos.HSP.html#39687" class="Datatype Operator">‚âÉ</a> <a id="39848" class="Symbol">(</a><a id="39849" href="Demos.HSP.html#39319" class="InductiveConstructor">node</a> <a id="39854" href="Demos.HSP.html#39782" class="Bound">f</a> <a id="39856" href="Demos.HSP.html#39787" class="Bound">t</a><a id="39857" class="Symbol">)</a>

</pre>

It is easy to show that `_‚âÉ_` is an equivalence relation as follows.

<pre class="Agda">

 <a id="39957" href="Demos.HSP.html#39957" class="Function">‚âÉ-isRefl</a>   <a id="39968" class="Symbol">:</a> <a id="39970" href="Relation.Binary.Definitions.html#1339" class="Function">Reflexive</a>      <a id="39985" href="Demos.HSP.html#39687" class="Datatype Operator">_‚âÉ_</a>
 <a id="39990" href="Demos.HSP.html#39957" class="Function">‚âÉ-isRefl</a> <a id="39999" class="Symbol">{</a><a id="40000" href="Demos.HSP.html#39303" class="InductiveConstructor">‚Ñä</a> <a id="40002" class="Symbol">_}</a> <a id="40005" class="Symbol">=</a> <a id="40007" href="Demos.HSP.html#39731" class="InductiveConstructor">rfl</a> <a id="40011" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a>
 <a id="40019" href="Demos.HSP.html#39957" class="Function">‚âÉ-isRefl</a> <a id="40028" class="Symbol">{</a><a id="40029" href="Demos.HSP.html#39319" class="InductiveConstructor">node</a> <a id="40034" class="Symbol">_</a> <a id="40036" class="Symbol">_}</a> <a id="40039" class="Symbol">=</a> <a id="40041" href="Demos.HSP.html#39773" class="InductiveConstructor">gnl</a> <a id="40045" class="Symbol">Œª</a> <a id="40047" href="Demos.HSP.html#40047" class="Bound">_</a> <a id="40049" class="Symbol">‚Üí</a> <a id="40051" href="Demos.HSP.html#39957" class="Function">‚âÉ-isRefl</a>

 <a id="40062" href="Demos.HSP.html#40062" class="Function">‚âÉ-isSym</a>    <a id="40073" class="Symbol">:</a> <a id="40075" href="Relation.Binary.Definitions.html#1498" class="Function">Symmetric</a>      <a id="40090" href="Demos.HSP.html#39687" class="Datatype Operator">_‚âÉ_</a>
 <a id="40095" href="Demos.HSP.html#40062" class="Function">‚âÉ-isSym</a> <a id="40103" class="Symbol">(</a><a id="40104" href="Demos.HSP.html#39731" class="InductiveConstructor">rfl</a> <a id="40108" href="Demos.HSP.html#40108" class="Bound">x</a><a id="40109" class="Symbol">)</a> <a id="40111" class="Symbol">=</a> <a id="40113" href="Demos.HSP.html#39731" class="InductiveConstructor">rfl</a> <a id="40117" class="Symbol">(</a><a id="40118" href="Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">‚â°.sym</a> <a id="40124" href="Demos.HSP.html#40108" class="Bound">x</a><a id="40125" class="Symbol">)</a>
 <a id="40128" href="Demos.HSP.html#40062" class="Function">‚âÉ-isSym</a> <a id="40136" class="Symbol">(</a><a id="40137" href="Demos.HSP.html#39773" class="InductiveConstructor">gnl</a> <a id="40141" href="Demos.HSP.html#40141" class="Bound">x</a><a id="40142" class="Symbol">)</a> <a id="40144" class="Symbol">=</a> <a id="40146" href="Demos.HSP.html#39773" class="InductiveConstructor">gnl</a> <a id="40150" class="Symbol">Œª</a> <a id="40152" href="Demos.HSP.html#40152" class="Bound">i</a> <a id="40154" class="Symbol">‚Üí</a> <a id="40156" href="Demos.HSP.html#40062" class="Function">‚âÉ-isSym</a> <a id="40164" class="Symbol">(</a><a id="40165" href="Demos.HSP.html#40141" class="Bound">x</a> <a id="40167" href="Demos.HSP.html#40152" class="Bound">i</a><a id="40168" class="Symbol">)</a>

 <a id="40172" href="Demos.HSP.html#40172" class="Function">‚âÉ-isTrans</a>  <a id="40183" class="Symbol">:</a> <a id="40185" href="Relation.Binary.Definitions.html#1978" class="Function">Transitive</a>     <a id="40200" href="Demos.HSP.html#39687" class="Datatype Operator">_‚âÉ_</a>
 <a id="40205" href="Demos.HSP.html#40172" class="Function">‚âÉ-isTrans</a> <a id="40215" class="Symbol">(</a><a id="40216" href="Demos.HSP.html#39731" class="InductiveConstructor">rfl</a> <a id="40220" href="Demos.HSP.html#40220" class="Bound">x</a><a id="40221" class="Symbol">)</a> <a id="40223" class="Symbol">(</a><a id="40224" href="Demos.HSP.html#39731" class="InductiveConstructor">rfl</a> <a id="40228" href="Demos.HSP.html#40228" class="Bound">y</a><a id="40229" class="Symbol">)</a> <a id="40231" class="Symbol">=</a> <a id="40233" href="Demos.HSP.html#39731" class="InductiveConstructor">rfl</a> <a id="40237" class="Symbol">(</a><a id="40238" href="Relation.Binary.PropositionalEquality.Core.html#1729" class="Function">‚â°.trans</a> <a id="40246" href="Demos.HSP.html#40220" class="Bound">x</a> <a id="40248" href="Demos.HSP.html#40228" class="Bound">y</a><a id="40249" class="Symbol">)</a>
 <a id="40252" href="Demos.HSP.html#40172" class="Function">‚âÉ-isTrans</a> <a id="40262" class="Symbol">(</a><a id="40263" href="Demos.HSP.html#39773" class="InductiveConstructor">gnl</a> <a id="40267" href="Demos.HSP.html#40267" class="Bound">x</a><a id="40268" class="Symbol">)</a> <a id="40270" class="Symbol">(</a><a id="40271" href="Demos.HSP.html#39773" class="InductiveConstructor">gnl</a> <a id="40275" href="Demos.HSP.html#40275" class="Bound">y</a><a id="40276" class="Symbol">)</a> <a id="40278" class="Symbol">=</a> <a id="40280" href="Demos.HSP.html#39773" class="InductiveConstructor">gnl</a> <a id="40284" class="Symbol">Œª</a> <a id="40286" href="Demos.HSP.html#40286" class="Bound">i</a> <a id="40288" class="Symbol">‚Üí</a> <a id="40290" href="Demos.HSP.html#40172" class="Function">‚âÉ-isTrans</a> <a id="40300" class="Symbol">(</a><a id="40301" href="Demos.HSP.html#40267" class="Bound">x</a> <a id="40303" href="Demos.HSP.html#40286" class="Bound">i</a><a id="40304" class="Symbol">)</a> <a id="40306" class="Symbol">(</a><a id="40307" href="Demos.HSP.html#40275" class="Bound">y</a> <a id="40309" href="Demos.HSP.html#40286" class="Bound">i</a><a id="40310" class="Symbol">)</a>

 <a id="40314" href="Demos.HSP.html#40314" class="Function">‚âÉ-isEquiv</a>  <a id="40325" class="Symbol">:</a> <a id="40327" href="Relation.Binary.Structures.html#1522" class="Record">IsEquivalence</a>  <a id="40342" href="Demos.HSP.html#39687" class="Datatype Operator">_‚âÉ_</a>
 <a id="40347" href="Demos.HSP.html#40314" class="Function">‚âÉ-isEquiv</a> <a id="40357" class="Symbol">=</a> <a id="40359" class="Keyword">record</a> <a id="40366" class="Symbol">{</a> <a id="40368" href="Relation.Binary.Structures.html#1568" class="Field">refl</a> <a id="40373" class="Symbol">=</a> <a id="40375" href="Demos.HSP.html#39957" class="Function">‚âÉ-isRefl</a> <a id="40384" class="Symbol">;</a> <a id="40386" href="Relation.Binary.Structures.html#1594" class="Field">sym</a> <a id="40390" class="Symbol">=</a> <a id="40392" href="Demos.HSP.html#40062" class="Function">‚âÉ-isSym</a> <a id="40400" class="Symbol">;</a> <a id="40402" href="Relation.Binary.Structures.html#1620" class="Field">trans</a> <a id="40408" class="Symbol">=</a> <a id="40410" href="Demos.HSP.html#40172" class="Function">‚âÉ-isTrans</a> <a id="40420" class="Symbol">}</a>
</pre>

For a given signature `ùëÜ` and context `X`, we define the algebra `ùëª X`, known as the *term algebra in* 
`ùëÜ` *over* `X`. The domain of `ùëª X` is `Term X` and, for each operation symbol `f : ‚à£ ùëÜ ‚à£`, we define 
`f ÃÇ ùëª X` to be the operation which maps each tuple `t : ‚à• ùëÜ ‚à• f ‚Üí Term X` of terms to the formal
term `f t`.

<pre class="Agda">

<a id="TermSetoid"></a><a id="40766" href="Demos.HSP.html#40766" class="Function">TermSetoid</a> <a id="40777" class="Symbol">:</a> <a id="40779" class="Symbol">(</a><a id="40780" href="Demos.HSP.html#40780" class="Bound">X</a> <a id="40782" class="Symbol">:</a> <a id="40784" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="40789" href="Demos.HSP.html#7278" class="Generalizable">œá</a><a id="40790" class="Symbol">)</a> <a id="40792" class="Symbol">‚Üí</a> <a id="40794" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="40801" class="Symbol">_</a> <a id="40803" class="Symbol">_</a>
<a id="40805" href="Demos.HSP.html#40766" class="Function">TermSetoid</a> <a id="40816" href="Demos.HSP.html#40816" class="Bound">X</a> <a id="40818" class="Symbol">=</a> <a id="40820" class="Keyword">record</a> <a id="40827" class="Symbol">{</a> <a id="40829" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="40837" class="Symbol">=</a> <a id="40839" href="Demos.HSP.html#39263" class="Datatype">Term</a> <a id="40844" href="Demos.HSP.html#40816" class="Bound">X</a> <a id="40846" class="Symbol">;</a> <a id="40848" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="40852" class="Symbol">=</a> <a id="40854" href="Demos.HSP.html#39687" class="Datatype Operator">_‚âÉ_</a> <a id="40858" class="Symbol">;</a> <a id="40860" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="40874" class="Symbol">=</a> <a id="40876" href="Demos.HSP.html#40314" class="Function">‚âÉ-isEquiv</a> <a id="40886" class="Symbol">}</a>

<a id="ùëª"></a><a id="40889" href="Demos.HSP.html#40889" class="Function">ùëª</a> <a id="40891" class="Symbol">:</a> <a id="40893" class="Symbol">(</a><a id="40894" href="Demos.HSP.html#40894" class="Bound">X</a> <a id="40896" class="Symbol">:</a> <a id="40898" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="40903" href="Demos.HSP.html#7278" class="Generalizable">œá</a><a id="40904" class="Symbol">)</a> <a id="40906" class="Symbol">‚Üí</a> <a id="40908" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="40916" class="Symbol">(</a><a id="40917" href="Demos.HSP.html#34366" class="Function">ov</a> <a id="40920" href="Demos.HSP.html#7278" class="Generalizable">œá</a><a id="40921" class="Symbol">)</a> <a id="40923" class="Symbol">(</a><a id="40924" href="Demos.HSP.html#34366" class="Function">ov</a> <a id="40927" href="Demos.HSP.html#7278" class="Generalizable">œá</a><a id="40928" class="Symbol">)</a>
<a id="40930" href="Demos.HSP.html#18273" class="Field">Algebra.Domain</a> <a id="40945" class="Symbol">(</a><a id="40946" href="Demos.HSP.html#40889" class="Function">ùëª</a> <a id="40948" href="Demos.HSP.html#40948" class="Bound">X</a><a id="40949" class="Symbol">)</a> <a id="40951" class="Symbol">=</a> <a id="40953" href="Demos.HSP.html#40766" class="Function">TermSetoid</a> <a id="40964" href="Demos.HSP.html#40948" class="Bound">X</a>
<a id="40966" href="Demos.HSP.html#18302" class="Field">Algebra.Interp</a> <a id="40981" class="Symbol">(</a><a id="40982" href="Demos.HSP.html#40889" class="Function">ùëª</a> <a id="40984" href="Demos.HSP.html#40984" class="Bound">X</a><a id="40985" class="Symbol">)</a> <a id="40987" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="40991" class="Symbol">(</a><a id="40992" href="Demos.HSP.html#40992" class="Bound">f</a> <a id="40994" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="40996" href="Demos.HSP.html#40996" class="Bound">ts</a><a id="40998" class="Symbol">)</a> <a id="41000" class="Symbol">=</a> <a id="41002" href="Demos.HSP.html#39319" class="InductiveConstructor">node</a> <a id="41007" href="Demos.HSP.html#40992" class="Bound">f</a> <a id="41009" href="Demos.HSP.html#40996" class="Bound">ts</a>
<a id="41012" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="41017" class="Symbol">(</a><a id="41018" href="Demos.HSP.html#18302" class="Field">Algebra.Interp</a> <a id="41033" class="Symbol">(</a><a id="41034" href="Demos.HSP.html#40889" class="Function">ùëª</a> <a id="41036" href="Demos.HSP.html#41036" class="Bound">X</a><a id="41037" class="Symbol">))</a> <a id="41040" class="Symbol">(</a><a id="41041" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="41048" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="41050" href="Demos.HSP.html#41050" class="Bound">ss‚âÉts</a><a id="41055" class="Symbol">)</a> <a id="41057" class="Symbol">=</a> <a id="41059" href="Demos.HSP.html#39773" class="InductiveConstructor">gnl</a> <a id="41063" href="Demos.HSP.html#41050" class="Bound">ss‚âÉts</a>
</pre>



#### <a id="environments-and-interpretation-of-terms">Environments and interpretation of terms</a>

Fix a signature `ùëÜ` and a context `X`. An *environment* for `ùë®` and `X` is a setoid whose carrier
is a mapping from the variable symbols `X` to the domain `ùïå[ ùê¥ ]` and whose equivalence relation is 
point-wise equality. Our formalization of this concept is the same as that of¬†[@Abel:2021], which 
Abel uses to formalize Birkhoff's completeness theorem.

<pre class="Agda">

<a id="41552" class="Keyword">module</a> <a id="Environment"></a><a id="41559" href="Demos.HSP.html#41559" class="Module">Environment</a> <a id="41571" class="Symbol">(</a><a id="41572" href="Demos.HSP.html#41572" class="Bound">ùë®</a> <a id="41574" class="Symbol">:</a> <a id="41576" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="41584" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="41586" href="Demos.HSP.html#7280" class="Generalizable">‚Ñì</a><a id="41587" class="Symbol">)</a> <a id="41589" class="Keyword">where</a>
 <a id="41596" class="Keyword">open</a> <a id="41601" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="41608" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="41611" href="Demos.HSP.html#41572" class="Bound">ùë®</a> <a id="41613" href="Demos.HSP.html#18862" class="Function Operator">]</a> <a id="41615" class="Keyword">using</a> <a id="41621" class="Symbol">(</a> <a id="41623" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="41627" class="Symbol">;</a> <a id="41629" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="41634" class="Symbol">;</a> <a id="41636" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="41640" class="Symbol">;</a> <a id="41642" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="41648" class="Symbol">)</a>

 <a id="Environment.Env"></a><a id="41652" href="Demos.HSP.html#41652" class="Function">Env</a> <a id="41656" class="Symbol">:</a> <a id="41658" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="41663" href="Demos.HSP.html#7278" class="Generalizable">œá</a> <a id="41665" class="Symbol">‚Üí</a> <a id="41667" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="41674" class="Symbol">_</a> <a id="41676" class="Symbol">_</a>
 <a id="41679" href="Demos.HSP.html#41652" class="Function">Env</a> <a id="41683" href="Demos.HSP.html#41683" class="Bound">X</a> <a id="41685" class="Symbol">=</a> <a id="41687" class="Keyword">record</a>  <a id="41695" class="Symbol">{</a> <a id="41697" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="41705" class="Symbol">=</a> <a id="41707" href="Demos.HSP.html#41683" class="Bound">X</a> <a id="41709" class="Symbol">‚Üí</a> <a id="41711" href="Demos.HSP.html#18916" class="Function Operator">ùïå[</a> <a id="41714" href="Demos.HSP.html#41572" class="Bound">ùë®</a> <a id="41716" href="Demos.HSP.html#18916" class="Function Operator">]</a>
                 <a id="41735" class="Symbol">;</a> <a id="41737" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="41741" class="Symbol">=</a> <a id="41743" class="Symbol">Œª</a> <a id="41745" href="Demos.HSP.html#41745" class="Bound">œÅ</a> <a id="41747" href="Demos.HSP.html#41747" class="Bound">œÑ</a> <a id="41749" class="Symbol">‚Üí</a> <a id="41751" class="Symbol">(</a><a id="41752" href="Demos.HSP.html#41752" class="Bound">x</a> <a id="41754" class="Symbol">:</a> <a id="41756" href="Demos.HSP.html#41683" class="Bound">X</a><a id="41757" class="Symbol">)</a> <a id="41759" class="Symbol">‚Üí</a> <a id="41761" href="Demos.HSP.html#41745" class="Bound">œÅ</a> <a id="41763" href="Demos.HSP.html#41752" class="Bound">x</a> <a id="41765" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a> <a id="41767" href="Demos.HSP.html#41747" class="Bound">œÑ</a> <a id="41769" href="Demos.HSP.html#41752" class="Bound">x</a>
                 <a id="41788" class="Symbol">;</a> <a id="41790" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="41804" class="Symbol">=</a> <a id="41806" class="Keyword">record</a>  <a id="41814" class="Symbol">{</a> <a id="41816" href="Relation.Binary.Structures.html#1568" class="Field">refl</a>   <a id="41823" class="Symbol">=</a> <a id="41825" class="Symbol">Œª</a> <a id="41827" href="Demos.HSP.html#41827" class="Bound">_</a>      <a id="41834" class="Symbol">‚Üí</a> <a id="41836" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>
                                           <a id="41884" class="Symbol">;</a> <a id="41886" href="Relation.Binary.Structures.html#1594" class="Field">sym</a>    <a id="41893" class="Symbol">=</a> <a id="41895" class="Symbol">Œª</a> <a id="41897" href="Demos.HSP.html#41897" class="Bound">h</a> <a id="41899" href="Demos.HSP.html#41899" class="Bound">x</a>    <a id="41904" class="Symbol">‚Üí</a> <a id="41906" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="41910" class="Symbol">(</a><a id="41911" href="Demos.HSP.html#41897" class="Bound">h</a> <a id="41913" href="Demos.HSP.html#41899" class="Bound">x</a><a id="41914" class="Symbol">)</a>
                                           <a id="41959" class="Symbol">;</a> <a id="41961" href="Relation.Binary.Structures.html#1620" class="Field">trans</a>  <a id="41968" class="Symbol">=</a> <a id="41970" class="Symbol">Œª</a> <a id="41972" href="Demos.HSP.html#41972" class="Bound">g</a> <a id="41974" href="Demos.HSP.html#41974" class="Bound">h</a> <a id="41976" href="Demos.HSP.html#41976" class="Bound">x</a>  <a id="41979" class="Symbol">‚Üí</a> <a id="41981" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="41987" class="Symbol">(</a><a id="41988" href="Demos.HSP.html#41972" class="Bound">g</a> <a id="41990" href="Demos.HSP.html#41976" class="Bound">x</a><a id="41991" class="Symbol">)(</a><a id="41993" href="Demos.HSP.html#41974" class="Bound">h</a> <a id="41995" href="Demos.HSP.html#41976" class="Bound">x</a><a id="41996" class="Symbol">)</a> <a id="41998" class="Symbol">}}</a>

</pre>
The *interpretation* of a term *evaluated* in a particular environment is defined as follows.

<pre class="Agda">

 <a id="Environment.‚ü¶_‚üß"></a><a id="42123" href="Demos.HSP.html#42123" class="Function Operator">‚ü¶_‚üß</a> <a id="42127" class="Symbol">:</a> <a id="42129" class="Symbol">{</a><a id="42130" href="Demos.HSP.html#42130" class="Bound">X</a> <a id="42132" class="Symbol">:</a> <a id="42134" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="42139" href="Demos.HSP.html#7278" class="Generalizable">œá</a><a id="42140" class="Symbol">}(</a><a id="42142" href="Demos.HSP.html#42142" class="Bound">t</a> <a id="42144" class="Symbol">:</a> <a id="42146" href="Demos.HSP.html#39263" class="Datatype">Term</a> <a id="42151" href="Demos.HSP.html#42130" class="Bound">X</a><a id="42152" class="Symbol">)</a> <a id="42154" class="Symbol">‚Üí</a> <a id="42156" class="Symbol">(</a><a id="42157" href="Demos.HSP.html#41652" class="Function">Env</a> <a id="42161" href="Demos.HSP.html#42130" class="Bound">X</a><a id="42162" class="Symbol">)</a> <a id="42164" href="Demos.HSP.html#6322" class="Record Operator">‚ü∂</a> <a id="42166" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="42169" href="Demos.HSP.html#41572" class="Bound">ùë®</a> <a id="42171" href="Demos.HSP.html#18862" class="Function Operator">]</a>
 <a id="42174" href="Demos.HSP.html#42123" class="Function Operator">‚ü¶</a> <a id="42176" href="Demos.HSP.html#39303" class="InductiveConstructor">‚Ñä</a> <a id="42178" href="Demos.HSP.html#42178" class="Bound">x</a> <a id="42180" href="Demos.HSP.html#42123" class="Function Operator">‚üß</a>          <a id="42191" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="42195" href="Demos.HSP.html#42195" class="Bound">œÅ</a>    <a id="42200" class="Symbol">=</a> <a id="42202" href="Demos.HSP.html#42195" class="Bound">œÅ</a> <a id="42204" href="Demos.HSP.html#42178" class="Bound">x</a>
 <a id="42207" href="Demos.HSP.html#42123" class="Function Operator">‚ü¶</a> <a id="42209" href="Demos.HSP.html#39319" class="InductiveConstructor">node</a> <a id="42214" href="Demos.HSP.html#42214" class="Bound">f</a> <a id="42216" href="Demos.HSP.html#42216" class="Bound">args</a> <a id="42221" href="Demos.HSP.html#42123" class="Function Operator">‚üß</a>  <a id="42224" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="42228" href="Demos.HSP.html#42228" class="Bound">œÅ</a>    <a id="42233" class="Symbol">=</a> <a id="42235" class="Symbol">(</a><a id="42236" href="Demos.HSP.html#18302" class="Field">Interp</a> <a id="42243" href="Demos.HSP.html#41572" class="Bound">ùë®</a><a id="42244" class="Symbol">)</a> <a id="42246" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="42250" class="Symbol">(</a><a id="42251" href="Demos.HSP.html#42214" class="Bound">f</a> <a id="42253" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="42255" class="Symbol">Œª</a> <a id="42257" href="Demos.HSP.html#42257" class="Bound">i</a> <a id="42259" class="Symbol">‚Üí</a> <a id="42261" href="Demos.HSP.html#42123" class="Function Operator">‚ü¶</a> <a id="42263" href="Demos.HSP.html#42216" class="Bound">args</a> <a id="42268" href="Demos.HSP.html#42257" class="Bound">i</a> <a id="42270" href="Demos.HSP.html#42123" class="Function Operator">‚üß</a> <a id="42272" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="42276" href="Demos.HSP.html#42228" class="Bound">œÅ</a><a id="42277" class="Symbol">)</a>
 <a id="42280" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="42285" href="Demos.HSP.html#42123" class="Function Operator">‚ü¶</a> <a id="42287" href="Demos.HSP.html#39303" class="InductiveConstructor">‚Ñä</a> <a id="42289" href="Demos.HSP.html#42289" class="Bound">x</a> <a id="42291" href="Demos.HSP.html#42123" class="Function Operator">‚üß</a> <a id="42293" href="Demos.HSP.html#42293" class="Bound">u‚âàv</a>          <a id="42306" class="Symbol">=</a> <a id="42308" href="Demos.HSP.html#42293" class="Bound">u‚âàv</a> <a id="42312" href="Demos.HSP.html#42289" class="Bound">x</a>
 <a id="42315" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="42320" href="Demos.HSP.html#42123" class="Function Operator">‚ü¶</a> <a id="42322" href="Demos.HSP.html#39319" class="InductiveConstructor">node</a> <a id="42327" href="Demos.HSP.html#42327" class="Bound">f</a> <a id="42329" href="Demos.HSP.html#42329" class="Bound">args</a> <a id="42334" href="Demos.HSP.html#42123" class="Function Operator">‚üß</a> <a id="42336" href="Demos.HSP.html#42336" class="Bound">x‚âày</a>  <a id="42341" class="Symbol">=</a> <a id="42343" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="42348" class="Symbol">(</a><a id="42349" href="Demos.HSP.html#18302" class="Field">Interp</a> <a id="42356" href="Demos.HSP.html#41572" class="Bound">ùë®</a><a id="42357" class="Symbol">)(</a><a id="42359" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="42366" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="42368" class="Symbol">Œª</a> <a id="42370" href="Demos.HSP.html#42370" class="Bound">i</a> <a id="42372" class="Symbol">‚Üí</a> <a id="42374" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="42379" href="Demos.HSP.html#42123" class="Function Operator">‚ü¶</a> <a id="42381" href="Demos.HSP.html#42329" class="Bound">args</a> <a id="42386" href="Demos.HSP.html#42370" class="Bound">i</a> <a id="42388" href="Demos.HSP.html#42123" class="Function Operator">‚üß</a> <a id="42390" href="Demos.HSP.html#42336" class="Bound">x‚âày</a> <a id="42394" class="Symbol">)</a>

</pre>
Two terms are proclaimed *equal* if they are equal for all environments.

<pre class="Agda">

 <a id="Environment.Equal"></a><a id="42497" href="Demos.HSP.html#42497" class="Function">Equal</a> <a id="42503" class="Symbol">:</a> <a id="42505" class="Symbol">{</a><a id="42506" href="Demos.HSP.html#42506" class="Bound">X</a> <a id="42508" class="Symbol">:</a> <a id="42510" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="42515" href="Demos.HSP.html#7278" class="Generalizable">œá</a><a id="42516" class="Symbol">}(</a><a id="42518" href="Demos.HSP.html#42518" class="Bound">s</a> <a id="42520" href="Demos.HSP.html#42520" class="Bound">t</a> <a id="42522" class="Symbol">:</a> <a id="42524" href="Demos.HSP.html#39263" class="Datatype">Term</a> <a id="42529" href="Demos.HSP.html#42506" class="Bound">X</a><a id="42530" class="Symbol">)</a> <a id="42532" class="Symbol">‚Üí</a> <a id="42534" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="42539" class="Symbol">_</a>
 <a id="42542" href="Demos.HSP.html#42497" class="Function">Equal</a> <a id="42548" class="Symbol">{</a><a id="42549" class="Argument">X</a> <a id="42551" class="Symbol">=</a> <a id="42553" href="Demos.HSP.html#42553" class="Bound">X</a><a id="42554" class="Symbol">}</a> <a id="42556" href="Demos.HSP.html#42556" class="Bound">s</a> <a id="42558" href="Demos.HSP.html#42558" class="Bound">t</a> <a id="42560" class="Symbol">=</a> <a id="42562" class="Symbol">‚àÄ</a> <a id="42564" class="Symbol">(</a><a id="42565" href="Demos.HSP.html#42565" class="Bound">œÅ</a> <a id="42567" class="Symbol">:</a> <a id="42569" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="42577" class="Symbol">(</a><a id="42578" href="Demos.HSP.html#41652" class="Function">Env</a> <a id="42582" href="Demos.HSP.html#42553" class="Bound">X</a><a id="42583" class="Symbol">))</a> <a id="42586" class="Symbol">‚Üí</a> <a id="42588" href="Demos.HSP.html#42123" class="Function Operator">‚ü¶</a> <a id="42590" href="Demos.HSP.html#42556" class="Bound">s</a> <a id="42592" href="Demos.HSP.html#42123" class="Function Operator">‚üß</a> <a id="42594" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="42598" href="Demos.HSP.html#42565" class="Bound">œÅ</a> <a id="42600" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a> <a id="42602" href="Demos.HSP.html#42123" class="Function Operator">‚ü¶</a> <a id="42604" href="Demos.HSP.html#42558" class="Bound">t</a> <a id="42606" href="Demos.HSP.html#42123" class="Function Operator">‚üß</a> <a id="42608" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="42612" href="Demos.HSP.html#42565" class="Bound">œÅ</a>

</pre>
Proof that `Equal` is an equivalence relation, and that the implication `s ‚âÉ t ‚Üí Equal s t` holds for all terms `s` and `t`, are also found in¬†[@Abel:2021]. We reproduce them here to keep the presentation self-contained.

<pre class="Agda">

 <a id="Environment.‚âÉ‚ÜíEqual"></a><a id="42863" href="Demos.HSP.html#42863" class="Function">‚âÉ‚ÜíEqual</a> <a id="42871" class="Symbol">:</a> <a id="42873" class="Symbol">{</a><a id="42874" href="Demos.HSP.html#42874" class="Bound">X</a> <a id="42876" class="Symbol">:</a> <a id="42878" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="42883" href="Demos.HSP.html#7278" class="Generalizable">œá</a><a id="42884" class="Symbol">}(</a><a id="42886" href="Demos.HSP.html#42886" class="Bound">s</a> <a id="42888" href="Demos.HSP.html#42888" class="Bound">t</a> <a id="42890" class="Symbol">:</a> <a id="42892" href="Demos.HSP.html#39263" class="Datatype">Term</a> <a id="42897" href="Demos.HSP.html#42874" class="Bound">X</a><a id="42898" class="Symbol">)</a> <a id="42900" class="Symbol">‚Üí</a> <a id="42902" href="Demos.HSP.html#42886" class="Bound">s</a> <a id="42904" href="Demos.HSP.html#39687" class="Datatype Operator">‚âÉ</a> <a id="42906" href="Demos.HSP.html#42888" class="Bound">t</a> <a id="42908" class="Symbol">‚Üí</a> <a id="42910" href="Demos.HSP.html#42497" class="Function">Equal</a> <a id="42916" href="Demos.HSP.html#42886" class="Bound">s</a> <a id="42918" href="Demos.HSP.html#42888" class="Bound">t</a>
 <a id="42921" href="Demos.HSP.html#42863" class="Function">‚âÉ‚ÜíEqual</a> <a id="42929" class="DottedPattern Symbol">.(</a><a id="42931" href="Demos.HSP.html#39303" class="DottedPattern InductiveConstructor">‚Ñä</a> <a id="42933" class="DottedPattern Symbol">_)</a> <a id="42936" class="DottedPattern Symbol">.(</a><a id="42938" href="Demos.HSP.html#39303" class="DottedPattern InductiveConstructor">‚Ñä</a> <a id="42940" class="DottedPattern Symbol">_)</a> <a id="42943" class="Symbol">(</a><a id="42944" href="Demos.HSP.html#39731" class="InductiveConstructor">rfl</a> <a id="42948" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a><a id="42954" class="Symbol">)</a> <a id="42956" class="Symbol">=</a> <a id="42958" class="Symbol">Œª</a> <a id="42960" href="Demos.HSP.html#42960" class="Bound">_</a> <a id="42962" class="Symbol">‚Üí</a> <a id="42964" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>
 <a id="42970" href="Demos.HSP.html#42863" class="Function">‚âÉ‚ÜíEqual</a> <a id="42978" class="Symbol">(</a><a id="42979" href="Demos.HSP.html#39319" class="InductiveConstructor">node</a> <a id="42984" class="Symbol">_</a> <a id="42986" href="Demos.HSP.html#42986" class="Bound">s</a><a id="42987" class="Symbol">)(</a><a id="42989" href="Demos.HSP.html#39319" class="InductiveConstructor">node</a> <a id="42994" class="Symbol">_</a> <a id="42996" href="Demos.HSP.html#42996" class="Bound">t</a><a id="42997" class="Symbol">)(</a><a id="42999" href="Demos.HSP.html#39773" class="InductiveConstructor">gnl</a> <a id="43003" href="Demos.HSP.html#43003" class="Bound">x</a><a id="43004" class="Symbol">)</a> <a id="43006" class="Symbol">=</a>
  <a id="43010" class="Symbol">Œª</a> <a id="43012" href="Demos.HSP.html#43012" class="Bound">œÅ</a> <a id="43014" class="Symbol">‚Üí</a> <a id="43016" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="43021" class="Symbol">(</a><a id="43022" href="Demos.HSP.html#18302" class="Field">Interp</a> <a id="43029" href="Demos.HSP.html#41572" class="Bound">ùë®</a><a id="43030" class="Symbol">)(</a><a id="43032" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="43039" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="43041" class="Symbol">Œª</a> <a id="43043" href="Demos.HSP.html#43043" class="Bound">i</a> <a id="43045" class="Symbol">‚Üí</a> <a id="43047" href="Demos.HSP.html#42863" class="Function">‚âÉ‚ÜíEqual</a><a id="43054" class="Symbol">(</a><a id="43055" href="Demos.HSP.html#42986" class="Bound">s</a> <a id="43057" href="Demos.HSP.html#43043" class="Bound">i</a><a id="43058" class="Symbol">)(</a><a id="43060" href="Demos.HSP.html#42996" class="Bound">t</a> <a id="43062" href="Demos.HSP.html#43043" class="Bound">i</a><a id="43063" class="Symbol">)(</a><a id="43065" href="Demos.HSP.html#43003" class="Bound">x</a> <a id="43067" href="Demos.HSP.html#43043" class="Bound">i</a><a id="43068" class="Symbol">)</a><a id="43069" href="Demos.HSP.html#43012" class="Bound">œÅ</a> <a id="43071" class="Symbol">)</a>

 <a id="Environment.EqualIsEquiv"></a><a id="43075" href="Demos.HSP.html#43075" class="Function">EqualIsEquiv</a> <a id="43088" class="Symbol">:</a> <a id="43090" class="Symbol">{</a><a id="43091" href="Demos.HSP.html#43091" class="Bound">Œì</a> <a id="43093" class="Symbol">:</a> <a id="43095" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="43100" href="Demos.HSP.html#7278" class="Generalizable">œá</a><a id="43101" class="Symbol">}</a> <a id="43103" class="Symbol">‚Üí</a> <a id="43105" href="Relation.Binary.Structures.html#1522" class="Record">IsEquivalence</a> <a id="43119" class="Symbol">(</a><a id="43120" href="Demos.HSP.html#42497" class="Function">Equal</a> <a id="43126" class="Symbol">{</a><a id="43127" class="Argument">X</a> <a id="43129" class="Symbol">=</a> <a id="43131" href="Demos.HSP.html#43091" class="Bound">Œì</a><a id="43132" class="Symbol">})</a>
 <a id="43136" href="Demos.HSP.html#6526" class="Field">refl·µâ</a>   <a id="43144" href="Demos.HSP.html#43075" class="Function">EqualIsEquiv</a> <a id="43157" class="Symbol">=</a> <a id="43159" class="Symbol">Œª</a> <a id="43161" href="Demos.HSP.html#43161" class="Bound">_</a>        <a id="43170" class="Symbol">‚Üí</a> <a id="43172" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>
 <a id="43178" href="Demos.HSP.html#6587" class="Field">sym·µâ</a>    <a id="43186" href="Demos.HSP.html#43075" class="Function">EqualIsEquiv</a> <a id="43199" class="Symbol">=</a> <a id="43201" class="Symbol">Œª</a> <a id="43203" href="Demos.HSP.html#43203" class="Bound">x=y</a> <a id="43207" href="Demos.HSP.html#43207" class="Bound">œÅ</a>    <a id="43212" class="Symbol">‚Üí</a> <a id="43214" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="43218" class="Symbol">(</a><a id="43219" href="Demos.HSP.html#43203" class="Bound">x=y</a> <a id="43223" href="Demos.HSP.html#43207" class="Bound">œÅ</a><a id="43224" class="Symbol">)</a>
 <a id="43227" href="Demos.HSP.html#6648" class="Field">trans·µâ</a>  <a id="43235" href="Demos.HSP.html#43075" class="Function">EqualIsEquiv</a> <a id="43248" class="Symbol">=</a> <a id="43250" class="Symbol">Œª</a> <a id="43252" href="Demos.HSP.html#43252" class="Bound">ij</a> <a id="43255" href="Demos.HSP.html#43255" class="Bound">jk</a> <a id="43258" href="Demos.HSP.html#43258" class="Bound">œÅ</a>  <a id="43261" class="Symbol">‚Üí</a> <a id="43263" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="43269" class="Symbol">(</a><a id="43270" href="Demos.HSP.html#43252" class="Bound">ij</a> <a id="43273" href="Demos.HSP.html#43258" class="Bound">œÅ</a><a id="43274" class="Symbol">)</a> <a id="43276" class="Symbol">(</a><a id="43277" href="Demos.HSP.html#43255" class="Bound">jk</a> <a id="43280" href="Demos.HSP.html#43258" class="Bound">œÅ</a><a id="43281" class="Symbol">)</a>
</pre>



#### <a id="compatibility-of-terms">Compatibility of terms</a>

We need to formalize two more concepts involving terms.
The first (`comm-hom-term`) is the assertion that every term commutes with every homomorphism, and
the second (`interp-prod`) is the interpretation of a term in a product algebra.

<pre class="Agda">

<a id="43612" class="Keyword">module</a> <a id="43619" href="Demos.HSP.html#43619" class="Module">_</a> <a id="43621" class="Symbol">{</a><a id="43622" href="Demos.HSP.html#43622" class="Bound">X</a> <a id="43624" class="Symbol">:</a> <a id="43626" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="43631" href="Demos.HSP.html#7278" class="Generalizable">œá</a><a id="43632" class="Symbol">}{</a><a id="43634" href="Demos.HSP.html#43634" class="Bound">ùë®</a> <a id="43636" class="Symbol">:</a> <a id="43638" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="43646" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="43648" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a><a id="43650" class="Symbol">}{</a><a id="43652" href="Demos.HSP.html#43652" class="Bound">ùë©</a> <a id="43654" class="Symbol">:</a> <a id="43656" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="43664" href="Demos.HSP.html#7261" class="Generalizable">Œ≤</a> <a id="43666" href="Demos.HSP.html#7263" class="Generalizable">œÅ·µá</a><a id="43668" class="Symbol">}(</a><a id="43670" href="Demos.HSP.html#43670" class="Bound">hh</a> <a id="43673" class="Symbol">:</a> <a id="43675" href="Demos.HSP.html#26168" class="Function">hom</a> <a id="43679" href="Demos.HSP.html#43634" class="Bound">ùë®</a> <a id="43681" href="Demos.HSP.html#43652" class="Bound">ùë©</a><a id="43682" class="Symbol">)</a> <a id="43684" class="Keyword">where</a>
 <a id="43691" class="Keyword">open</a> <a id="43696" href="Demos.HSP.html#41559" class="Module">Environment</a> <a id="43708" href="Demos.HSP.html#43634" class="Bound">ùë®</a>  <a id="43711" class="Keyword">using</a> <a id="43717" class="Symbol">(</a> <a id="43719" href="Demos.HSP.html#42123" class="Function Operator">‚ü¶_‚üß</a> <a id="43723" class="Symbol">)</a>
 <a id="43726" class="Keyword">open</a> <a id="43731" href="Demos.HSP.html#41559" class="Module">Environment</a> <a id="43743" href="Demos.HSP.html#43652" class="Bound">ùë©</a>  <a id="43746" class="Keyword">using</a> <a id="43752" class="Symbol">()</a> <a id="43755" class="Keyword">renaming</a> <a id="43764" class="Symbol">(</a> <a id="43766" href="Demos.HSP.html#42123" class="Function Operator">‚ü¶_‚üß</a> <a id="43770" class="Symbol">to</a> <a id="43773" class="Function Operator">‚ü¶_‚üß·¥Æ</a> <a id="43778" class="Symbol">)</a>
 <a id="43781" class="Keyword">open</a> <a id="43786" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="43793" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="43796" href="Demos.HSP.html#43652" class="Bound">ùë©</a> <a id="43798" href="Demos.HSP.html#18862" class="Function Operator">]</a>  <a id="43801" class="Keyword">using</a> <a id="43807" class="Symbol">(</a> <a id="43809" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="43813" class="Symbol">;</a> <a id="43815" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>  <a id="43821" class="Symbol">)</a>
 <a id="43824" class="Keyword">private</a> <a id="43832" href="Demos.HSP.html#43832" class="Function">hfunc</a> <a id="43838" class="Symbol">=</a> <a id="43840" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="43842" href="Demos.HSP.html#43670" class="Bound">hh</a> <a id="43845" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="43847" class="Symbol">;</a> <a id="43849" href="Demos.HSP.html#43849" class="Function">h</a> <a id="43851" class="Symbol">=</a> <a id="43853" href="Demos.HSP.html#6424" class="Field Operator">_‚ü®$‚ü©_</a> <a id="43859" href="Demos.HSP.html#43832" class="Function">hfunc</a>

 <a id="43867" href="Demos.HSP.html#43867" class="Function">comm-hom-term</a> <a id="43881" class="Symbol">:</a> <a id="43883" class="Symbol">(</a><a id="43884" href="Demos.HSP.html#43884" class="Bound">t</a> <a id="43886" class="Symbol">:</a> <a id="43888" href="Demos.HSP.html#39263" class="Datatype">Term</a> <a id="43893" href="Demos.HSP.html#43622" class="Bound">X</a><a id="43894" class="Symbol">)</a> <a id="43896" class="Symbol">(</a><a id="43897" href="Demos.HSP.html#43897" class="Bound">a</a> <a id="43899" class="Symbol">:</a> <a id="43901" href="Demos.HSP.html#43622" class="Bound">X</a> <a id="43903" class="Symbol">‚Üí</a> <a id="43905" href="Demos.HSP.html#18916" class="Function Operator">ùïå[</a> <a id="43908" href="Demos.HSP.html#43634" class="Bound">ùë®</a> <a id="43910" href="Demos.HSP.html#18916" class="Function Operator">]</a><a id="43911" class="Symbol">)</a> <a id="43913" class="Symbol">‚Üí</a> <a id="43915" href="Demos.HSP.html#43849" class="Function">h</a> <a id="43917" class="Symbol">(</a><a id="43918" href="Demos.HSP.html#42123" class="Function Operator">‚ü¶</a> <a id="43920" href="Demos.HSP.html#43884" class="Bound">t</a> <a id="43922" href="Demos.HSP.html#42123" class="Function Operator">‚üß</a> <a id="43924" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="43928" href="Demos.HSP.html#43897" class="Bound">a</a><a id="43929" class="Symbol">)</a> <a id="43931" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a> <a id="43933" href="Demos.HSP.html#43773" class="Function Operator">‚ü¶</a> <a id="43935" href="Demos.HSP.html#43884" class="Bound">t</a> <a id="43937" href="Demos.HSP.html#43773" class="Function Operator">‚üß·¥Æ</a> <a id="43940" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="43944" class="Symbol">(</a><a id="43945" href="Demos.HSP.html#43849" class="Function">h</a> <a id="43947" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="43949" href="Demos.HSP.html#43897" class="Bound">a</a><a id="43950" class="Symbol">)</a>
 <a id="43953" href="Demos.HSP.html#43867" class="Function">comm-hom-term</a> <a id="43967" class="Symbol">(</a><a id="43968" href="Demos.HSP.html#39303" class="InductiveConstructor">‚Ñä</a> <a id="43970" href="Demos.HSP.html#43970" class="Bound">x</a><a id="43971" class="Symbol">)</a> <a id="43973" href="Demos.HSP.html#43973" class="Bound">a</a> <a id="43975" class="Symbol">=</a> <a id="43977" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>
 <a id="43983" href="Demos.HSP.html#43867" class="Function">comm-hom-term</a> <a id="43997" class="Symbol">(</a><a id="43998" href="Demos.HSP.html#39319" class="InductiveConstructor">node</a> <a id="44003" href="Demos.HSP.html#44003" class="Bound">f</a> <a id="44005" href="Demos.HSP.html#44005" class="Bound">t</a><a id="44006" class="Symbol">)</a> <a id="44008" href="Demos.HSP.html#44008" class="Bound">a</a> <a id="44010" class="Symbol">=</a>  <a id="44013" href="Relation.Binary.Reasoning.Base.Single.html#1916" class="Function Operator">begin</a>
   <a id="44022" href="Demos.HSP.html#43849" class="Function">h</a><a id="44023" class="Symbol">(</a><a id="44024" href="Demos.HSP.html#42123" class="Function Operator">‚ü¶</a> <a id="44026" href="Demos.HSP.html#39319" class="InductiveConstructor">node</a> <a id="44031" href="Demos.HSP.html#44003" class="Bound">f</a> <a id="44033" href="Demos.HSP.html#44005" class="Bound">t</a> <a id="44035" href="Demos.HSP.html#42123" class="Function Operator">‚üß</a> <a id="44037" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="44041" href="Demos.HSP.html#44008" class="Bound">a</a><a id="44042" class="Symbol">)</a>            <a id="44055" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a> <a id="44058" href="Demos.HSP.html#26136" class="Field">compatible</a> <a id="44069" href="Demos.HSP.html#7893" class="Function Operator">‚à•</a> <a id="44071" href="Demos.HSP.html#43670" class="Bound">hh</a> <a id="44074" href="Demos.HSP.html#7893" class="Function Operator">‚à•</a> <a id="44076" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
   <a id="44081" class="Symbol">(</a><a id="44082" href="Demos.HSP.html#44003" class="Bound">f</a> <a id="44084" href="Demos.HSP.html#18975" class="Function Operator">ÃÇ</a> <a id="44086" href="Demos.HSP.html#43652" class="Bound">ùë©</a><a id="44087" class="Symbol">)(Œª</a> <a id="44091" href="Demos.HSP.html#44091" class="Bound">i</a> <a id="44093" class="Symbol">‚Üí</a> <a id="44095" href="Demos.HSP.html#43849" class="Function">h</a><a id="44096" class="Symbol">(</a><a id="44097" href="Demos.HSP.html#42123" class="Function Operator">‚ü¶</a> <a id="44099" href="Demos.HSP.html#44005" class="Bound">t</a> <a id="44101" href="Demos.HSP.html#44091" class="Bound">i</a> <a id="44103" href="Demos.HSP.html#42123" class="Function Operator">‚üß</a> <a id="44105" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="44109" href="Demos.HSP.html#44008" class="Bound">a</a><a id="44110" class="Symbol">))</a>  <a id="44114" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a> <a id="44117" href="Function.Bundles.html#1938" class="Field">cong</a><a id="44121" class="Symbol">(</a><a id="44122" href="Demos.HSP.html#18302" class="Field">Interp</a> <a id="44129" href="Demos.HSP.html#43652" class="Bound">ùë©</a><a id="44130" class="Symbol">)(</a><a id="44132" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="44139" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="44141" class="Symbol">Œª</a> <a id="44143" href="Demos.HSP.html#44143" class="Bound">i</a> <a id="44145" class="Symbol">‚Üí</a> <a id="44147" href="Demos.HSP.html#43867" class="Function">comm-hom-term</a><a id="44160" class="Symbol">(</a><a id="44161" href="Demos.HSP.html#44005" class="Bound">t</a> <a id="44163" href="Demos.HSP.html#44143" class="Bound">i</a><a id="44164" class="Symbol">)</a> <a id="44166" href="Demos.HSP.html#44008" class="Bound">a</a><a id="44167" class="Symbol">)</a> <a id="44169" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
   <a id="44174" href="Demos.HSP.html#43773" class="Function Operator">‚ü¶</a> <a id="44176" href="Demos.HSP.html#39319" class="InductiveConstructor">node</a> <a id="44181" href="Demos.HSP.html#44003" class="Bound">f</a> <a id="44183" href="Demos.HSP.html#44005" class="Bound">t</a> <a id="44185" href="Demos.HSP.html#43773" class="Function Operator">‚üß·¥Æ</a> <a id="44188" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="44192" class="Symbol">(</a><a id="44193" href="Demos.HSP.html#43849" class="Function">h</a> <a id="44195" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="44197" href="Demos.HSP.html#44008" class="Bound">a</a><a id="44198" class="Symbol">)</a>   <a id="44202" href="Relation.Binary.Reasoning.Base.Single.html#2555" class="Function Operator">‚àé</a> <a id="44204" class="Keyword">where</a> <a id="44210" class="Keyword">open</a> <a id="44215" href="Relation.Binary.Reasoning.Setoid.html" class="Module">SetoidReasoning</a> <a id="44231" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="44234" href="Demos.HSP.html#43652" class="Bound">ùë©</a> <a id="44236" href="Demos.HSP.html#18862" class="Function Operator">]</a>

<a id="44239" class="Keyword">module</a> <a id="44246" href="Demos.HSP.html#44246" class="Module">_</a> <a id="44248" class="Symbol">{</a><a id="44249" href="Demos.HSP.html#44249" class="Bound">X</a> <a id="44251" class="Symbol">:</a> <a id="44253" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="44258" href="Demos.HSP.html#7278" class="Generalizable">œá</a><a id="44259" class="Symbol">}{</a><a id="44261" href="Demos.HSP.html#44261" class="Bound">Œπ</a> <a id="44263" class="Symbol">:</a> <a id="44265" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="44270" class="Symbol">}</a> <a id="44272" class="Symbol">{</a><a id="44273" href="Demos.HSP.html#44273" class="Bound">I</a> <a id="44275" class="Symbol">:</a> <a id="44277" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="44282" href="Demos.HSP.html#44261" class="Bound">Œπ</a><a id="44283" class="Symbol">}</a> <a id="44285" class="Symbol">(</a><a id="44286" href="Demos.HSP.html#44286" class="Bound">ùíú</a> <a id="44288" class="Symbol">:</a> <a id="44290" href="Demos.HSP.html#44273" class="Bound">I</a> <a id="44292" class="Symbol">‚Üí</a> <a id="44294" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="44302" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="44304" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a><a id="44306" class="Symbol">)</a> <a id="44308" class="Keyword">where</a>
 <a id="44315" class="Keyword">open</a> <a id="44320" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="44327" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="44330" href="Demos.HSP.html#23793" class="Function">‚®Ö</a> <a id="44332" href="Demos.HSP.html#44286" class="Bound">ùíú</a> <a id="44334" href="Demos.HSP.html#18862" class="Function Operator">]</a>  <a id="44337" class="Keyword">using</a> <a id="44343" class="Symbol">(</a> <a id="44345" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="44349" class="Symbol">)</a>
 <a id="44352" class="Keyword">open</a> <a id="44357" href="Demos.HSP.html#41559" class="Module">Environment</a>      <a id="44374" class="Keyword">using</a> <a id="44380" class="Symbol">(</a> <a id="44382" href="Demos.HSP.html#42123" class="Function Operator">‚ü¶_‚üß</a> <a id="44386" class="Symbol">;</a> <a id="44388" href="Demos.HSP.html#42863" class="Function">‚âÉ‚ÜíEqual</a> <a id="44396" class="Symbol">)</a>

 <a id="44400" href="Demos.HSP.html#44400" class="Function">interp-prod</a> <a id="44412" class="Symbol">:</a> <a id="44414" class="Symbol">(</a><a id="44415" href="Demos.HSP.html#44415" class="Bound">p</a> <a id="44417" class="Symbol">:</a> <a id="44419" href="Demos.HSP.html#39263" class="Datatype">Term</a> <a id="44424" href="Demos.HSP.html#44249" class="Bound">X</a><a id="44425" class="Symbol">)</a> <a id="44427" class="Symbol">‚Üí</a> <a id="44429" class="Symbol">‚àÄ</a> <a id="44431" href="Demos.HSP.html#44431" class="Bound">œÅ</a> <a id="44433" class="Symbol">‚Üí</a>  <a id="44436" class="Symbol">(</a><a id="44437" href="Demos.HSP.html#42123" class="Function Operator">‚ü¶</a> <a id="44439" href="Demos.HSP.html#23793" class="Function">‚®Ö</a> <a id="44441" href="Demos.HSP.html#44286" class="Bound">ùíú</a> <a id="44443" href="Demos.HSP.html#42123" class="Function Operator">‚üß</a> <a id="44445" href="Demos.HSP.html#44415" class="Bound">p</a><a id="44446" class="Symbol">)</a> <a id="44448" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="44452" href="Demos.HSP.html#44431" class="Bound">œÅ</a>   <a id="44456" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a>   <a id="44460" class="Symbol">Œª</a> <a id="44462" href="Demos.HSP.html#44462" class="Bound">i</a> <a id="44464" class="Symbol">‚Üí</a> <a id="44466" class="Symbol">(</a><a id="44467" href="Demos.HSP.html#42123" class="Function Operator">‚ü¶</a> <a id="44469" href="Demos.HSP.html#44286" class="Bound">ùíú</a> <a id="44471" href="Demos.HSP.html#44462" class="Bound">i</a> <a id="44473" href="Demos.HSP.html#42123" class="Function Operator">‚üß</a> <a id="44475" href="Demos.HSP.html#44415" class="Bound">p</a><a id="44476" class="Symbol">)</a> <a id="44478" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="44482" class="Symbol">Œª</a> <a id="44484" href="Demos.HSP.html#44484" class="Bound">x</a> <a id="44486" class="Symbol">‚Üí</a> <a id="44488" class="Symbol">(</a><a id="44489" href="Demos.HSP.html#44431" class="Bound">œÅ</a> <a id="44491" href="Demos.HSP.html#44484" class="Bound">x</a><a id="44492" class="Symbol">)</a> <a id="44494" href="Demos.HSP.html#44462" class="Bound">i</a>
 <a id="44497" href="Demos.HSP.html#44400" class="Function">interp-prod</a> <a id="44509" class="Symbol">(</a><a id="44510" href="Demos.HSP.html#39303" class="InductiveConstructor">‚Ñä</a> <a id="44512" href="Demos.HSP.html#44512" class="Bound">x</a><a id="44513" class="Symbol">)</a>       <a id="44521" class="Symbol">=</a> <a id="44523" class="Symbol">Œª</a> <a id="44525" href="Demos.HSP.html#44525" class="Bound">œÅ</a> <a id="44527" href="Demos.HSP.html#44527" class="Bound">i</a>  <a id="44530" class="Symbol">‚Üí</a> <a id="44532" href="Demos.HSP.html#42863" class="Function">‚âÉ‚ÜíEqual</a> <a id="44540" class="Symbol">(</a><a id="44541" href="Demos.HSP.html#44286" class="Bound">ùíú</a> <a id="44543" href="Demos.HSP.html#44527" class="Bound">i</a><a id="44544" class="Symbol">)</a> <a id="44546" class="Symbol">(</a><a id="44547" href="Demos.HSP.html#39303" class="InductiveConstructor">‚Ñä</a> <a id="44549" href="Demos.HSP.html#44512" class="Bound">x</a><a id="44550" class="Symbol">)</a> <a id="44552" class="Symbol">(</a><a id="44553" href="Demos.HSP.html#39303" class="InductiveConstructor">‚Ñä</a> <a id="44555" href="Demos.HSP.html#44512" class="Bound">x</a><a id="44556" class="Symbol">)</a> <a id="44558" href="Demos.HSP.html#39957" class="Function">‚âÉ-isRefl</a> <a id="44567" class="Symbol">Œª</a> <a id="44569" href="Demos.HSP.html#44569" class="Bound">_</a> <a id="44571" class="Symbol">‚Üí</a> <a id="44573" class="Symbol">(</a><a id="44574" href="Demos.HSP.html#44525" class="Bound">œÅ</a> <a id="44576" href="Demos.HSP.html#44512" class="Bound">x</a><a id="44577" class="Symbol">)</a> <a id="44579" href="Demos.HSP.html#44527" class="Bound">i</a>
 <a id="44582" href="Demos.HSP.html#44400" class="Function">interp-prod</a> <a id="44594" class="Symbol">(</a><a id="44595" href="Demos.HSP.html#39319" class="InductiveConstructor">node</a> <a id="44600" href="Demos.HSP.html#44600" class="Bound">f</a> <a id="44602" href="Demos.HSP.html#44602" class="Bound">t</a><a id="44603" class="Symbol">)</a>  <a id="44606" class="Symbol">=</a> <a id="44608" class="Symbol">Œª</a> <a id="44610" href="Demos.HSP.html#44610" class="Bound">œÅ</a>    <a id="44615" class="Symbol">‚Üí</a> <a id="44617" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="44622" class="Symbol">(</a><a id="44623" href="Demos.HSP.html#18302" class="Field">Interp</a> <a id="44630" class="Symbol">(</a><a id="44631" href="Demos.HSP.html#23793" class="Function">‚®Ö</a> <a id="44633" href="Demos.HSP.html#44286" class="Bound">ùíú</a><a id="44634" class="Symbol">))</a> <a id="44637" class="Symbol">(</a> <a id="44639" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="44646" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="44648" class="Symbol">Œª</a> <a id="44650" href="Demos.HSP.html#44650" class="Bound">j</a> <a id="44652" href="Demos.HSP.html#44652" class="Bound">k</a> <a id="44654" class="Symbol">‚Üí</a> <a id="44656" href="Demos.HSP.html#44400" class="Function">interp-prod</a> <a id="44668" class="Symbol">(</a><a id="44669" href="Demos.HSP.html#44602" class="Bound">t</a> <a id="44671" href="Demos.HSP.html#44650" class="Bound">j</a><a id="44672" class="Symbol">)</a> <a id="44674" href="Demos.HSP.html#44610" class="Bound">œÅ</a> <a id="44676" href="Demos.HSP.html#44652" class="Bound">k</a> <a id="44678" class="Symbol">)</a>
</pre>

-------------------------------------------------------------------------------

## <a id="equational-logic">Equational Logic</a>

### <a id="term-identities-equational-theories-and-the-relation">Term identities, equational theories, and the ‚äß relation</a>

An `ùëÜ`-*term equation* (or `ùëÜ`-*term identity*) is an ordered pair `(p , q)` of `ùëÜ`-terms, also denoted by `p ‚âà q`. They are often simply called *equations* or *identities*, especially when the signature `ùëÜ` is evident.
We define an *equational theory* (or *algebraic theory*) to be a pair `T = (ùëÜ , ‚Ñ∞)` consisting of a signature `ùëÜ` and a collection `‚Ñ∞` of `ùëÜ`-term equations.[^9]

We say that the algebra `ùë®` *models* the identity `p ‚âà q` and we write `ùë® ‚äß p ‚âà q`
if for all `œÅ : X ‚Üí ùîª[ ùë® ]` we have `‚ü¶ p ‚üß ‚ü®$‚ü© œÅ ‚âà ‚ü¶ q ‚üß ‚ü®$‚ü© œÅ`.
In other words, when interpreted in the algebra `ùë®`, the terms `p` and `q` are equal no matter what values are assigned to variable symbols occurring in `p` and `q`.

If `ùí¶` is a class of algebras of a given signature, then we write `ùí¶ ‚ä´ p ‚âà q` and say that `ùí¶` *models* the identity `p ‚âà q` provided `ùë® ‚äß p ‚âà q` for every `ùë® ‚àà ùí¶`.

<pre class="Agda">

<a id="45828" class="Keyword">module</a> <a id="45835" href="Demos.HSP.html#45835" class="Module">_</a> <a id="45837" class="Symbol">{</a><a id="45838" href="Demos.HSP.html#45838" class="Bound">X</a> <a id="45840" class="Symbol">:</a> <a id="45842" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="45847" href="Demos.HSP.html#7278" class="Generalizable">œá</a><a id="45848" class="Symbol">}</a> <a id="45850" class="Keyword">where</a>
 <a id="45857" href="Demos.HSP.html#45857" class="Function Operator">_‚äß_‚âà_</a> <a id="45863" class="Symbol">:</a> <a id="45865" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="45873" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="45875" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a> <a id="45878" class="Symbol">‚Üí</a> <a id="45880" href="Demos.HSP.html#39263" class="Datatype">Term</a> <a id="45885" href="Demos.HSP.html#45838" class="Bound">X</a> <a id="45887" class="Symbol">‚Üí</a> <a id="45889" href="Demos.HSP.html#39263" class="Datatype">Term</a> <a id="45894" href="Demos.HSP.html#45838" class="Bound">X</a> <a id="45896" class="Symbol">‚Üí</a> <a id="45898" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="45903" class="Symbol">_</a>
 <a id="45906" href="Demos.HSP.html#45906" class="Bound">ùë®</a> <a id="45908" href="Demos.HSP.html#45857" class="Function Operator">‚äß</a> <a id="45910" href="Demos.HSP.html#45910" class="Bound">p</a> <a id="45912" href="Demos.HSP.html#45857" class="Function Operator">‚âà</a> <a id="45914" href="Demos.HSP.html#45914" class="Bound">q</a> <a id="45916" class="Symbol">=</a> <a id="45918" href="Demos.HSP.html#42497" class="Function">Equal</a> <a id="45924" href="Demos.HSP.html#45910" class="Bound">p</a> <a id="45926" href="Demos.HSP.html#45914" class="Bound">q</a> <a id="45928" class="Keyword">where</a> <a id="45934" class="Keyword">open</a> <a id="45939" href="Demos.HSP.html#41559" class="Module">Environment</a> <a id="45951" href="Demos.HSP.html#45906" class="Bound">ùë®</a>

 <a id="45955" href="Demos.HSP.html#45955" class="Function Operator">_‚ä´_‚âà_</a> <a id="45961" class="Symbol">:</a> <a id="45963" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="45968" class="Symbol">(</a><a id="45969" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="45977" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="45979" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a><a id="45981" class="Symbol">)</a> <a id="45983" href="Demos.HSP.html#7280" class="Generalizable">‚Ñì</a> <a id="45985" class="Symbol">‚Üí</a> <a id="45987" href="Demos.HSP.html#39263" class="Datatype">Term</a> <a id="45992" href="Demos.HSP.html#45838" class="Bound">X</a> <a id="45994" class="Symbol">‚Üí</a> <a id="45996" href="Demos.HSP.html#39263" class="Datatype">Term</a> <a id="46001" href="Demos.HSP.html#45838" class="Bound">X</a> <a id="46003" class="Symbol">‚Üí</a> <a id="46005" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="46010" class="Symbol">_</a>
 <a id="46013" href="Demos.HSP.html#46013" class="Bound">ùí¶</a> <a id="46015" href="Demos.HSP.html#45955" class="Function Operator">‚ä´</a> <a id="46017" href="Demos.HSP.html#46017" class="Bound">p</a> <a id="46019" href="Demos.HSP.html#45955" class="Function Operator">‚âà</a> <a id="46021" href="Demos.HSP.html#46021" class="Bound">q</a> <a id="46023" class="Symbol">=</a> <a id="46025" class="Symbol">‚àÄ</a> <a id="46027" href="Demos.HSP.html#46027" class="Bound">ùë®</a> <a id="46029" class="Symbol">‚Üí</a> <a id="46031" href="Demos.HSP.html#46013" class="Bound">ùí¶</a> <a id="46033" href="Demos.HSP.html#46027" class="Bound">ùë®</a> <a id="46035" class="Symbol">‚Üí</a> <a id="46037" href="Demos.HSP.html#46027" class="Bound">ùë®</a> <a id="46039" href="Demos.HSP.html#45857" class="Function Operator">‚äß</a> <a id="46041" href="Demos.HSP.html#46017" class="Bound">p</a> <a id="46043" href="Demos.HSP.html#45857" class="Function Operator">‚âà</a> <a id="46045" href="Demos.HSP.html#46021" class="Bound">q</a>

</pre>
We represent a set of term identities as a predicate over pairs of terms, say, `‚Ñ∞ :  Pred(Term X √ó Term X)`, and we denote by `ùë® ‚ä® ‚Ñ∞` the assertion that `ùë®` models `p ‚âà q` for all `(p, q) ‚àà ‚Ñ∞`.

<pre class="Agda">

 <a id="46269" href="Demos.HSP.html#46269" class="Function Operator">_‚ä®_</a> <a id="46273" class="Symbol">:</a> <a id="46275" class="Symbol">(</a><a id="46276" href="Demos.HSP.html#46276" class="Bound">ùë®</a> <a id="46278" class="Symbol">:</a> <a id="46280" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="46288" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="46290" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a><a id="46292" class="Symbol">)</a> <a id="46294" class="Symbol">‚Üí</a> <a id="46296" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="46300" class="Symbol">(</a><a id="46301" href="Demos.HSP.html#39263" class="Datatype">Term</a> <a id="46306" href="Demos.HSP.html#45838" class="Bound">X</a> <a id="46308" href="Data.Product.html#1167" class="Function Operator">√ó</a> <a id="46310" href="Demos.HSP.html#39263" class="Datatype">Term</a> <a id="46315" href="Demos.HSP.html#45838" class="Bound">X</a><a id="46316" class="Symbol">)(</a><a id="46318" href="Demos.HSP.html#34366" class="Function">ov</a> <a id="46321" href="Demos.HSP.html#45847" class="Bound">œá</a><a id="46322" class="Symbol">)</a> <a id="46324" class="Symbol">‚Üí</a> <a id="46326" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="46331" class="Symbol">_</a>
 <a id="46334" href="Demos.HSP.html#46334" class="Bound">ùë®</a> <a id="46336" href="Demos.HSP.html#46269" class="Function Operator">‚ä®</a> <a id="46338" href="Demos.HSP.html#46338" class="Bound">‚Ñ∞</a> <a id="46340" class="Symbol">=</a> <a id="46342" class="Symbol">‚àÄ</a> <a id="46344" class="Symbol">{</a><a id="46345" href="Demos.HSP.html#46345" class="Bound">p</a> <a id="46347" href="Demos.HSP.html#46347" class="Bound">q</a><a id="46348" class="Symbol">}</a> <a id="46350" class="Symbol">‚Üí</a> <a id="46352" class="Symbol">(</a><a id="46353" href="Demos.HSP.html#46345" class="Bound">p</a> <a id="46355" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="46357" href="Demos.HSP.html#46347" class="Bound">q</a><a id="46358" class="Symbol">)</a> <a id="46360" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="46362" href="Demos.HSP.html#46338" class="Bound">‚Ñ∞</a> <a id="46364" class="Symbol">‚Üí</a> <a id="46366" href="Demos.HSP.html#42497" class="Function">Equal</a> <a id="46372" href="Demos.HSP.html#46345" class="Bound">p</a> <a id="46374" href="Demos.HSP.html#46347" class="Bound">q</a> <a id="46376" class="Keyword">where</a> <a id="46382" class="Keyword">open</a> <a id="46387" href="Demos.HSP.html#41559" class="Module">Environment</a> <a id="46399" href="Demos.HSP.html#46334" class="Bound">ùë®</a>

</pre>
(The symbol `‚ä®` is a stretched version of the models symbol `‚äß`,
so [Agda][] can distinguish between the two and parse expressions involving the types
`_‚ä®_` and `_‚äß_‚âà_`. In Emacs `agda2-mode`, the symbol `‚ä®` is produced by typing
`\|=`, while `‚äß` is produced with `\models`.)

An important property of the binary relation `‚äß` is *algebraic invariance* (i.e.,
invariance under isomorphism).  We formalize this property as follows.

<pre class="Agda">

<a id="46858" class="Keyword">module</a> <a id="46865" href="Demos.HSP.html#46865" class="Module">_</a> <a id="46867" class="Symbol">{</a><a id="46868" href="Demos.HSP.html#46868" class="Bound">X</a> <a id="46870" class="Symbol">:</a> <a id="46872" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="46877" href="Demos.HSP.html#7278" class="Generalizable">œá</a><a id="46878" class="Symbol">}{</a><a id="46880" href="Demos.HSP.html#46880" class="Bound">ùë®</a> <a id="46882" class="Symbol">:</a> <a id="46884" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="46892" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="46894" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a><a id="46896" class="Symbol">}(</a><a id="46898" href="Demos.HSP.html#46898" class="Bound">ùë©</a> <a id="46900" class="Symbol">:</a> <a id="46902" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="46910" href="Demos.HSP.html#7261" class="Generalizable">Œ≤</a> <a id="46912" href="Demos.HSP.html#7263" class="Generalizable">œÅ·µá</a><a id="46914" class="Symbol">)(</a><a id="46916" href="Demos.HSP.html#46916" class="Bound">p</a> <a id="46918" href="Demos.HSP.html#46918" class="Bound">q</a> <a id="46920" class="Symbol">:</a> <a id="46922" href="Demos.HSP.html#39263" class="Datatype">Term</a> <a id="46927" href="Demos.HSP.html#46868" class="Bound">X</a><a id="46928" class="Symbol">)</a> <a id="46930" class="Keyword">where</a>
 <a id="46937" href="Demos.HSP.html#46937" class="Function">‚äß-I-invar</a> <a id="46947" class="Symbol">:</a> <a id="46949" href="Demos.HSP.html#46880" class="Bound">ùë®</a> <a id="46951" href="Demos.HSP.html#45857" class="Function Operator">‚äß</a> <a id="46953" href="Demos.HSP.html#46916" class="Bound">p</a> <a id="46955" href="Demos.HSP.html#45857" class="Function Operator">‚âà</a> <a id="46957" href="Demos.HSP.html#46918" class="Bound">q</a>  <a id="46960" class="Symbol">‚Üí</a>  <a id="46963" href="Demos.HSP.html#46880" class="Bound">ùë®</a> <a id="46965" href="Demos.HSP.html#32414" class="Record Operator">‚âÖ</a> <a id="46967" href="Demos.HSP.html#46898" class="Bound">ùë©</a>  <a id="46970" class="Symbol">‚Üí</a>  <a id="46973" href="Demos.HSP.html#46898" class="Bound">ùë©</a> <a id="46975" href="Demos.HSP.html#45857" class="Function Operator">‚äß</a> <a id="46977" href="Demos.HSP.html#46916" class="Bound">p</a> <a id="46979" href="Demos.HSP.html#45857" class="Function Operator">‚âà</a> <a id="46981" href="Demos.HSP.html#46918" class="Bound">q</a>
 <a id="46984" href="Demos.HSP.html#46937" class="Function">‚äß-I-invar</a> <a id="46994" href="Demos.HSP.html#46994" class="Bound">Apq</a> <a id="46998" class="Symbol">(</a><a id="46999" href="Demos.HSP.html#32473" class="InductiveConstructor">mkiso</a> <a id="47005" href="Demos.HSP.html#47005" class="Bound">fh</a> <a id="47008" href="Demos.HSP.html#47008" class="Bound">gh</a> <a id="47011" href="Demos.HSP.html#47011" class="Bound">f‚àºg</a> <a id="47015" href="Demos.HSP.html#47015" class="Bound">g‚àºf</a><a id="47018" class="Symbol">)</a> <a id="47020" href="Demos.HSP.html#47020" class="Bound">œÅ</a> <a id="47022" class="Symbol">=</a> <a id="47024" href="Relation.Binary.Reasoning.Base.Single.html#1916" class="Function Operator">begin</a>
  <a id="47032" href="Demos.HSP.html#42123" class="Function Operator">‚ü¶</a> <a id="47034" href="Demos.HSP.html#46916" class="Bound">p</a> <a id="47036" href="Demos.HSP.html#42123" class="Function Operator">‚üß</a>     <a id="47042" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a>             <a id="47058" href="Demos.HSP.html#47020" class="Bound">œÅ</a>    <a id="47063" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚âàÀò‚ü®</a>  <a id="47068" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="47073" href="Demos.HSP.html#42123" class="Function Operator">‚ü¶</a> <a id="47075" href="Demos.HSP.html#46916" class="Bound">p</a> <a id="47077" href="Demos.HSP.html#42123" class="Function Operator">‚üß</a> <a id="47079" class="Symbol">(</a><a id="47080" href="Demos.HSP.html#47011" class="Bound">f‚àºg</a> <a id="47084" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="47086" href="Demos.HSP.html#47020" class="Bound">œÅ</a><a id="47087" class="Symbol">)</a>        <a id="47096" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚ü©</a>
  <a id="47100" href="Demos.HSP.html#42123" class="Function Operator">‚ü¶</a> <a id="47102" href="Demos.HSP.html#46916" class="Bound">p</a> <a id="47104" href="Demos.HSP.html#42123" class="Function Operator">‚üß</a>     <a id="47110" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="47114" class="Symbol">(</a><a id="47115" href="Demos.HSP.html#47422" class="Function">f</a> <a id="47117" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="47120" class="Symbol">(</a><a id="47121" href="Demos.HSP.html#47441" class="Function">g</a> <a id="47123" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="47126" href="Demos.HSP.html#47020" class="Bound">œÅ</a><a id="47127" class="Symbol">))</a>  <a id="47131" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚âàÀò‚ü®</a>  <a id="47136" href="Demos.HSP.html#43867" class="Function">comm-hom-term</a> <a id="47150" href="Demos.HSP.html#47005" class="Bound">fh</a> <a id="47153" href="Demos.HSP.html#46916" class="Bound">p</a> <a id="47155" class="Symbol">(</a><a id="47156" href="Demos.HSP.html#47441" class="Function">g</a> <a id="47158" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="47160" href="Demos.HSP.html#47020" class="Bound">œÅ</a><a id="47161" class="Symbol">)</a>  <a id="47164" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚ü©</a>
  <a id="47168" href="Demos.HSP.html#47422" class="Function">f</a><a id="47169" class="Symbol">(</a><a id="47170" href="Demos.HSP.html#47514" class="Function Operator">‚ü¶</a> <a id="47172" href="Demos.HSP.html#46916" class="Bound">p</a> <a id="47174" href="Demos.HSP.html#47514" class="Function Operator">‚üß·¥¨</a>  <a id="47178" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a>       <a id="47188" class="Symbol">(</a><a id="47189" href="Demos.HSP.html#47441" class="Function">g</a> <a id="47191" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="47194" href="Demos.HSP.html#47020" class="Bound">œÅ</a><a id="47195" class="Symbol">))</a>  <a id="47199" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a>   <a id="47204" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="47209" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="47211" href="Demos.HSP.html#47005" class="Bound">fh</a> <a id="47214" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="47216" class="Symbol">(</a><a id="47217" href="Demos.HSP.html#46994" class="Bound">Apq</a> <a id="47221" class="Symbol">(</a><a id="47222" href="Demos.HSP.html#47441" class="Function">g</a> <a id="47224" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="47226" href="Demos.HSP.html#47020" class="Bound">œÅ</a><a id="47227" class="Symbol">))</a>   <a id="47232" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
  <a id="47236" href="Demos.HSP.html#47422" class="Function">f</a><a id="47237" class="Symbol">(</a><a id="47238" href="Demos.HSP.html#47514" class="Function Operator">‚ü¶</a> <a id="47240" href="Demos.HSP.html#46918" class="Bound">q</a> <a id="47242" href="Demos.HSP.html#47514" class="Function Operator">‚üß·¥¨</a>  <a id="47246" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a>       <a id="47256" class="Symbol">(</a><a id="47257" href="Demos.HSP.html#47441" class="Function">g</a> <a id="47259" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="47262" href="Demos.HSP.html#47020" class="Bound">œÅ</a><a id="47263" class="Symbol">))</a>  <a id="47267" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a>   <a id="47272" href="Demos.HSP.html#43867" class="Function">comm-hom-term</a> <a id="47286" href="Demos.HSP.html#47005" class="Bound">fh</a> <a id="47289" href="Demos.HSP.html#46918" class="Bound">q</a> <a id="47291" class="Symbol">(</a><a id="47292" href="Demos.HSP.html#47441" class="Function">g</a> <a id="47294" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="47296" href="Demos.HSP.html#47020" class="Bound">œÅ</a><a id="47297" class="Symbol">)</a>  <a id="47300" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
  <a id="47304" href="Demos.HSP.html#42123" class="Function Operator">‚ü¶</a> <a id="47306" href="Demos.HSP.html#46918" class="Bound">q</a> <a id="47308" href="Demos.HSP.html#42123" class="Function Operator">‚üß</a>     <a id="47314" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="47318" class="Symbol">(</a><a id="47319" href="Demos.HSP.html#47422" class="Function">f</a> <a id="47321" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="47324" class="Symbol">(</a><a id="47325" href="Demos.HSP.html#47441" class="Function">g</a> <a id="47327" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="47330" href="Demos.HSP.html#47020" class="Bound">œÅ</a><a id="47331" class="Symbol">))</a>  <a id="47335" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a>   <a id="47340" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="47345" href="Demos.HSP.html#42123" class="Function Operator">‚ü¶</a> <a id="47347" href="Demos.HSP.html#46918" class="Bound">q</a> <a id="47349" href="Demos.HSP.html#42123" class="Function Operator">‚üß</a> <a id="47351" class="Symbol">(</a><a id="47352" href="Demos.HSP.html#47011" class="Bound">f‚àºg</a> <a id="47356" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="47358" href="Demos.HSP.html#47020" class="Bound">œÅ</a><a id="47359" class="Symbol">)</a>        <a id="47368" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
  <a id="47372" href="Demos.HSP.html#42123" class="Function Operator">‚ü¶</a> <a id="47374" href="Demos.HSP.html#46918" class="Bound">q</a> <a id="47376" href="Demos.HSP.html#42123" class="Function Operator">‚üß</a>     <a id="47382" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a>             <a id="47398" href="Demos.HSP.html#47020" class="Bound">œÅ</a>    <a id="47403" href="Relation.Binary.Reasoning.Base.Single.html#2555" class="Function Operator">‚àé</a>
  <a id="47407" class="Keyword">where</a>  <a id="47414" class="Keyword">private</a> <a id="47422" href="Demos.HSP.html#47422" class="Function">f</a> <a id="47424" class="Symbol">=</a> <a id="47426" href="Demos.HSP.html#6424" class="Field Operator">_‚ü®$‚ü©_</a> <a id="47432" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="47434" href="Demos.HSP.html#47005" class="Bound">fh</a> <a id="47437" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="47439" class="Symbol">;</a> <a id="47441" href="Demos.HSP.html#47441" class="Function">g</a> <a id="47443" class="Symbol">=</a> <a id="47445" href="Demos.HSP.html#6424" class="Field Operator">_‚ü®$‚ü©_</a> <a id="47451" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="47453" href="Demos.HSP.html#47008" class="Bound">gh</a> <a id="47456" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a>
         <a id="47467" class="Keyword">open</a> <a id="47472" href="Demos.HSP.html#41559" class="Module">Environment</a> <a id="47484" href="Demos.HSP.html#46880" class="Bound">ùë®</a>  <a id="47487" class="Keyword">using</a> <a id="47493" class="Symbol">()</a> <a id="47496" class="Keyword">renaming</a> <a id="47505" class="Symbol">(</a> <a id="47507" href="Demos.HSP.html#42123" class="Function Operator">‚ü¶_‚üß</a> <a id="47511" class="Symbol">to</a> <a id="47514" class="Function Operator">‚ü¶_‚üß·¥¨</a> <a id="47519" class="Symbol">)</a>
         <a id="47530" class="Keyword">open</a> <a id="47535" href="Demos.HSP.html#41559" class="Module">Environment</a> <a id="47547" href="Demos.HSP.html#46898" class="Bound">ùë©</a>  <a id="47550" class="Keyword">using</a> <a id="47556" class="Symbol">(</a> <a id="47558" href="Demos.HSP.html#42123" class="Function Operator">‚ü¶_‚üß</a> <a id="47562" class="Symbol">)</a> <a id="47564" class="Symbol">;</a> <a id="47566" class="Keyword">open</a> <a id="47571" href="Relation.Binary.Reasoning.Setoid.html" class="Module">SetoidReasoning</a> <a id="47587" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="47590" href="Demos.HSP.html#46898" class="Bound">ùë©</a> <a id="47592" href="Demos.HSP.html#18862" class="Function Operator">]</a>

</pre>
If `ùí¶` is a class of `ùëÜ`-algebras, the set of identities modeled by `ùí¶`, denoted `Th ùí¶`, is called the *equational theory* of `ùí¶`. If `‚Ñ∞` is a set of `ùëÜ`-term identities,
the class of algebras modeling `‚Ñ∞`, denoted `Mod ‚Ñ∞`, is called the *equational class axiomatized* by `‚Ñ∞`. We codify these notions in the next two definitions.

<pre class="Agda">

<a id="Th"></a><a id="47951" href="Demos.HSP.html#47951" class="Function">Th</a> <a id="47954" class="Symbol">:</a> <a id="47956" class="Symbol">{</a><a id="47957" href="Demos.HSP.html#47957" class="Bound">X</a> <a id="47959" class="Symbol">:</a> <a id="47961" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="47966" href="Demos.HSP.html#7278" class="Generalizable">œá</a><a id="47967" class="Symbol">}</a> <a id="47969" class="Symbol">‚Üí</a> <a id="47971" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="47976" class="Symbol">(</a><a id="47977" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="47985" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="47987" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a><a id="47989" class="Symbol">)</a> <a id="47991" href="Demos.HSP.html#7280" class="Generalizable">‚Ñì</a> <a id="47993" class="Symbol">‚Üí</a> <a id="47995" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="47999" class="Symbol">(</a><a id="48000" href="Demos.HSP.html#39263" class="Datatype">Term</a> <a id="48005" href="Demos.HSP.html#47957" class="Bound">X</a> <a id="48007" href="Data.Product.html#1167" class="Function Operator">√ó</a> <a id="48009" href="Demos.HSP.html#39263" class="Datatype">Term</a> <a id="48014" href="Demos.HSP.html#47957" class="Bound">X</a><a id="48015" class="Symbol">)</a> <a id="48017" class="Symbol">_</a>
<a id="48019" href="Demos.HSP.html#47951" class="Function">Th</a> <a id="48022" href="Demos.HSP.html#48022" class="Bound">ùí¶</a> <a id="48024" class="Symbol">=</a> <a id="48026" class="Symbol">Œª</a> <a id="48028" class="Symbol">(</a><a id="48029" href="Demos.HSP.html#48029" class="Bound">p</a> <a id="48031" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="48033" href="Demos.HSP.html#48033" class="Bound">q</a><a id="48034" class="Symbol">)</a> <a id="48036" class="Symbol">‚Üí</a> <a id="48038" href="Demos.HSP.html#48022" class="Bound">ùí¶</a> <a id="48040" href="Demos.HSP.html#45955" class="Function Operator">‚ä´</a> <a id="48042" href="Demos.HSP.html#48029" class="Bound">p</a> <a id="48044" href="Demos.HSP.html#45955" class="Function Operator">‚âà</a> <a id="48046" href="Demos.HSP.html#48033" class="Bound">q</a>

<a id="Mod"></a><a id="48049" href="Demos.HSP.html#48049" class="Function">Mod</a> <a id="48053" class="Symbol">:</a> <a id="48055" class="Symbol">{</a><a id="48056" href="Demos.HSP.html#48056" class="Bound">X</a> <a id="48058" class="Symbol">:</a> <a id="48060" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="48065" href="Demos.HSP.html#7278" class="Generalizable">œá</a><a id="48066" class="Symbol">}</a> <a id="48068" class="Symbol">‚Üí</a> <a id="48070" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="48074" class="Symbol">(</a><a id="48075" href="Demos.HSP.html#39263" class="Datatype">Term</a> <a id="48080" href="Demos.HSP.html#48056" class="Bound">X</a> <a id="48082" href="Data.Product.html#1167" class="Function Operator">√ó</a> <a id="48084" href="Demos.HSP.html#39263" class="Datatype">Term</a> <a id="48089" href="Demos.HSP.html#48056" class="Bound">X</a><a id="48090" class="Symbol">)</a> <a id="48092" href="Demos.HSP.html#7280" class="Generalizable">‚Ñì</a> <a id="48094" class="Symbol">‚Üí</a> <a id="48096" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="48101" class="Symbol">(</a><a id="48102" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="48110" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="48112" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a><a id="48114" class="Symbol">)</a> <a id="48116" class="Symbol">_</a>
<a id="48118" href="Demos.HSP.html#48049" class="Function">Mod</a> <a id="48122" href="Demos.HSP.html#48122" class="Bound">‚Ñ∞</a> <a id="48124" href="Demos.HSP.html#48124" class="Bound">ùë®</a> <a id="48126" class="Symbol">=</a> <a id="48128" class="Symbol">‚àÄ</a> <a id="48130" class="Symbol">{</a><a id="48131" href="Demos.HSP.html#48131" class="Bound">p</a> <a id="48133" href="Demos.HSP.html#48133" class="Bound">q</a><a id="48134" class="Symbol">}</a> <a id="48136" class="Symbol">‚Üí</a> <a id="48138" class="Symbol">(</a><a id="48139" href="Demos.HSP.html#48131" class="Bound">p</a> <a id="48141" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="48143" href="Demos.HSP.html#48133" class="Bound">q</a><a id="48144" class="Symbol">)</a> <a id="48146" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="48148" href="Demos.HSP.html#48122" class="Bound">‚Ñ∞</a> <a id="48150" class="Symbol">‚Üí</a> <a id="48152" href="Demos.HSP.html#42497" class="Function">Equal</a> <a id="48158" href="Demos.HSP.html#48131" class="Bound">p</a> <a id="48160" href="Demos.HSP.html#48133" class="Bound">q</a> <a id="48162" class="Keyword">where</a> <a id="48168" class="Keyword">open</a> <a id="48173" href="Demos.HSP.html#41559" class="Module">Environment</a> <a id="48185" href="Demos.HSP.html#48124" class="Bound">ùë®</a>
</pre>

### <a id="the-closure-operators-h-s-p-and-v">The Closure Operators H, S, P and V</a>

Fix a signature `ùëÜ`, let `ùí¶` be a class of `ùëÜ`-algebras, and define
* `H ùí¶` := the class of all homomorphic images of members of `ùí¶`;
* `S ùí¶` := the class of all subalgebras of members of `ùí¶`;
* `P ùí¶` := the class of all products of members of `ùí¶`.

`H`, `S`, and `P` are *closure operators* (expansive, monotone, and idempotent).  
A class `ùí¶` of `ùëÜ`-algebras is said to be *closed under the taking of homomorphic images* 
provided `H ùí¶ ‚äÜ ùí¶`. Similarly, `ùí¶` is *closed under the taking of subalgebras* (resp., *arbitrary products*) provided `S ùí¶ ‚äÜ ùí¶` (resp., `P ùí¶ ‚äÜ ùí¶`). The operators `H`, `S`, and `P` can be composed with one another repeatedly, forming yet more closure operators. We represent these three closure operators in type theory as follows.

<pre class="Agda">

<a id="49056" class="Keyword">module</a> <a id="49063" href="Demos.HSP.html#49063" class="Module">_</a> <a id="49065" class="Symbol">{</a><a id="49066" href="Demos.HSP.html#49066" class="Bound">Œ±</a> <a id="49068" href="Demos.HSP.html#49068" class="Bound">œÅ·µÉ</a> <a id="49071" href="Demos.HSP.html#49071" class="Bound">Œ≤</a> <a id="49073" href="Demos.HSP.html#49073" class="Bound">œÅ·µá</a> <a id="49076" class="Symbol">:</a> <a id="49078" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="49083" class="Symbol">}</a> <a id="49085" class="Keyword">where</a>
 <a id="49092" class="Keyword">private</a> <a id="49100" href="Demos.HSP.html#49100" class="Function">a</a> <a id="49102" class="Symbol">=</a> <a id="49104" href="Demos.HSP.html#49066" class="Bound">Œ±</a> <a id="49106" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="49108" href="Demos.HSP.html#49068" class="Bound">œÅ·µÉ</a>
 <a id="49112" href="Demos.HSP.html#49112" class="Function">H</a> <a id="49114" class="Symbol">:</a> <a id="49116" class="Symbol">‚àÄ</a> <a id="49118" href="Demos.HSP.html#49118" class="Bound">‚Ñì</a> <a id="49120" class="Symbol">‚Üí</a> <a id="49122" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="49126" class="Symbol">(</a><a id="49127" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="49135" href="Demos.HSP.html#49066" class="Bound">Œ±</a> <a id="49137" href="Demos.HSP.html#49068" class="Bound">œÅ·µÉ</a><a id="49139" class="Symbol">)</a> <a id="49141" class="Symbol">(</a><a id="49142" href="Demos.HSP.html#49100" class="Function">a</a> <a id="49144" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="49146" href="Demos.HSP.html#34366" class="Function">ov</a> <a id="49149" href="Demos.HSP.html#49118" class="Bound">‚Ñì</a><a id="49150" class="Symbol">)</a> <a id="49152" class="Symbol">‚Üí</a> <a id="49154" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="49158" class="Symbol">(</a><a id="49159" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="49167" href="Demos.HSP.html#49071" class="Bound">Œ≤</a> <a id="49169" href="Demos.HSP.html#49073" class="Bound">œÅ·µá</a><a id="49171" class="Symbol">)</a> <a id="49173" class="Symbol">_</a>
 <a id="49176" href="Demos.HSP.html#49112" class="Function">H</a> <a id="49178" class="Symbol">_</a> <a id="49180" href="Demos.HSP.html#49180" class="Bound">ùí¶</a> <a id="49182" href="Demos.HSP.html#49182" class="Bound">ùë©</a> <a id="49184" class="Symbol">=</a> <a id="49186" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="49189" href="Demos.HSP.html#49189" class="Bound">ùë®</a> <a id="49191" href="Data.Product.html#916" class="Function">‚àà</a> <a id="49193" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="49201" href="Demos.HSP.html#49066" class="Bound">Œ±</a> <a id="49203" href="Demos.HSP.html#49068" class="Bound">œÅ·µÉ</a> <a id="49206" href="Data.Product.html#916" class="Function">]</a> <a id="49208" href="Demos.HSP.html#49189" class="Bound">ùë®</a> <a id="49210" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="49212" href="Demos.HSP.html#49180" class="Bound">ùí¶</a> <a id="49214" href="Data.Product.html#1167" class="Function Operator">√ó</a> <a id="49216" href="Demos.HSP.html#49182" class="Bound">ùë©</a> <a id="49218" href="Demos.HSP.html#34463" class="Function Operator">IsHomImageOf</a> <a id="49231" href="Demos.HSP.html#49189" class="Bound">ùë®</a>

 <a id="49235" href="Demos.HSP.html#49235" class="Function">S</a> <a id="49237" class="Symbol">:</a> <a id="49239" class="Symbol">‚àÄ</a> <a id="49241" href="Demos.HSP.html#49241" class="Bound">‚Ñì</a> <a id="49243" class="Symbol">‚Üí</a> <a id="49245" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="49249" class="Symbol">(</a><a id="49250" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="49258" href="Demos.HSP.html#49066" class="Bound">Œ±</a> <a id="49260" href="Demos.HSP.html#49068" class="Bound">œÅ·µÉ</a><a id="49262" class="Symbol">)</a> <a id="49264" class="Symbol">(</a><a id="49265" href="Demos.HSP.html#49100" class="Function">a</a> <a id="49267" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="49269" href="Demos.HSP.html#34366" class="Function">ov</a> <a id="49272" href="Demos.HSP.html#49241" class="Bound">‚Ñì</a><a id="49273" class="Symbol">)</a> <a id="49275" class="Symbol">‚Üí</a> <a id="49277" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="49281" class="Symbol">(</a><a id="49282" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="49290" href="Demos.HSP.html#49071" class="Bound">Œ≤</a> <a id="49292" href="Demos.HSP.html#49073" class="Bound">œÅ·µá</a><a id="49294" class="Symbol">)</a> <a id="49296" class="Symbol">_</a>
 <a id="49299" href="Demos.HSP.html#49235" class="Function">S</a> <a id="49301" class="Symbol">_</a> <a id="49303" href="Demos.HSP.html#49303" class="Bound">ùí¶</a> <a id="49305" href="Demos.HSP.html#49305" class="Bound">ùë©</a> <a id="49307" class="Symbol">=</a> <a id="49309" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="49312" href="Demos.HSP.html#49312" class="Bound">ùë®</a> <a id="49314" href="Data.Product.html#916" class="Function">‚àà</a> <a id="49316" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="49324" href="Demos.HSP.html#49066" class="Bound">Œ±</a> <a id="49326" href="Demos.HSP.html#49068" class="Bound">œÅ·µÉ</a> <a id="49329" href="Data.Product.html#916" class="Function">]</a> <a id="49331" href="Demos.HSP.html#49312" class="Bound">ùë®</a> <a id="49333" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="49335" href="Demos.HSP.html#49303" class="Bound">ùí¶</a> <a id="49337" href="Data.Product.html#1167" class="Function Operator">√ó</a> <a id="49339" href="Demos.HSP.html#49305" class="Bound">ùë©</a> <a id="49341" href="Demos.HSP.html#37181" class="Function Operator">‚â§</a> <a id="49343" href="Demos.HSP.html#49312" class="Bound">ùë®</a>

 <a id="49347" href="Demos.HSP.html#49347" class="Function">P</a> <a id="49349" class="Symbol">:</a> <a id="49351" class="Symbol">‚àÄ</a> <a id="49353" href="Demos.HSP.html#49353" class="Bound">‚Ñì</a> <a id="49355" href="Demos.HSP.html#49355" class="Bound">Œπ</a> <a id="49357" class="Symbol">‚Üí</a> <a id="49359" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="49363" class="Symbol">(</a><a id="49364" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="49372" href="Demos.HSP.html#49066" class="Bound">Œ±</a> <a id="49374" href="Demos.HSP.html#49068" class="Bound">œÅ·µÉ</a><a id="49376" class="Symbol">)</a> <a id="49378" class="Symbol">(</a><a id="49379" href="Demos.HSP.html#49100" class="Function">a</a> <a id="49381" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="49383" href="Demos.HSP.html#34366" class="Function">ov</a> <a id="49386" href="Demos.HSP.html#49353" class="Bound">‚Ñì</a><a id="49387" class="Symbol">)</a> <a id="49389" class="Symbol">‚Üí</a> <a id="49391" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="49395" class="Symbol">(</a><a id="49396" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="49404" href="Demos.HSP.html#49071" class="Bound">Œ≤</a> <a id="49406" href="Demos.HSP.html#49073" class="Bound">œÅ·µá</a><a id="49408" class="Symbol">)</a> <a id="49410" class="Symbol">_</a>
 <a id="49413" href="Demos.HSP.html#49347" class="Function">P</a> <a id="49415" class="Symbol">_</a> <a id="49417" href="Demos.HSP.html#49417" class="Bound">Œπ</a> <a id="49419" href="Demos.HSP.html#49419" class="Bound">ùí¶</a> <a id="49421" href="Demos.HSP.html#49421" class="Bound">ùë©</a> <a id="49423" class="Symbol">=</a> <a id="49425" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="49428" href="Demos.HSP.html#49428" class="Bound">I</a> <a id="49430" href="Data.Product.html#916" class="Function">‚àà</a> <a id="49432" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="49437" href="Demos.HSP.html#49417" class="Bound">Œπ</a> <a id="49439" href="Data.Product.html#916" class="Function">]</a> <a id="49441" class="Symbol">(</a><a id="49442" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="49445" href="Demos.HSP.html#49445" class="Bound">ùíú</a> <a id="49447" href="Data.Product.html#916" class="Function">‚àà</a> <a id="49449" class="Symbol">(</a><a id="49450" href="Demos.HSP.html#49428" class="Bound">I</a> <a id="49452" class="Symbol">‚Üí</a> <a id="49454" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="49462" href="Demos.HSP.html#49066" class="Bound">Œ±</a> <a id="49464" href="Demos.HSP.html#49068" class="Bound">œÅ·µÉ</a><a id="49466" class="Symbol">)</a> <a id="49468" href="Data.Product.html#916" class="Function">]</a> <a id="49470" class="Symbol">(‚àÄ</a> <a id="49473" href="Demos.HSP.html#49473" class="Bound">i</a> <a id="49475" class="Symbol">‚Üí</a> <a id="49477" href="Demos.HSP.html#49445" class="Bound">ùíú</a> <a id="49479" href="Demos.HSP.html#49473" class="Bound">i</a> <a id="49481" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="49483" href="Demos.HSP.html#49419" class="Bound">ùí¶</a><a id="49484" class="Symbol">)</a> <a id="49486" href="Data.Product.html#1167" class="Function Operator">√ó</a> <a id="49488" class="Symbol">(</a><a id="49489" href="Demos.HSP.html#49421" class="Bound">ùë©</a> <a id="49491" href="Demos.HSP.html#32414" class="Record Operator">‚âÖ</a> <a id="49493" href="Demos.HSP.html#23793" class="Function">‚®Ö</a> <a id="49495" href="Demos.HSP.html#49445" class="Bound">ùíú</a><a id="49496" class="Symbol">))</a>

</pre>
Identities modeled by an algebra `ùë®` are also modeled by every homomorphic image of
`ùë®` and by every subalgebra of `ùë®`. These facts are formalized in [Agda][] as follows.

<pre class="Agda">

<a id="49697" class="Keyword">module</a> <a id="49704" href="Demos.HSP.html#49704" class="Module">_</a> <a id="49706" class="Symbol">{</a><a id="49707" href="Demos.HSP.html#49707" class="Bound">X</a> <a id="49709" class="Symbol">:</a> <a id="49711" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="49716" href="Demos.HSP.html#7278" class="Generalizable">œá</a><a id="49717" class="Symbol">}{</a><a id="49719" href="Demos.HSP.html#49719" class="Bound">ùë®</a> <a id="49721" class="Symbol">:</a> <a id="49723" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="49731" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="49733" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a><a id="49735" class="Symbol">}{</a><a id="49737" href="Demos.HSP.html#49737" class="Bound">ùë©</a> <a id="49739" class="Symbol">:</a> <a id="49741" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="49749" href="Demos.HSP.html#7261" class="Generalizable">Œ≤</a> <a id="49751" href="Demos.HSP.html#7263" class="Generalizable">œÅ·µá</a><a id="49753" class="Symbol">}{</a><a id="49755" href="Demos.HSP.html#49755" class="Bound">p</a> <a id="49757" href="Demos.HSP.html#49757" class="Bound">q</a> <a id="49759" class="Symbol">:</a> <a id="49761" href="Demos.HSP.html#39263" class="Datatype">Term</a> <a id="49766" href="Demos.HSP.html#49707" class="Bound">X</a><a id="49767" class="Symbol">}</a> <a id="49769" class="Keyword">where</a>
 <a id="49776" href="Demos.HSP.html#49776" class="Function">‚äß-H-invar</a> <a id="49786" class="Symbol">:</a> <a id="49788" href="Demos.HSP.html#49719" class="Bound">ùë®</a> <a id="49790" href="Demos.HSP.html#45857" class="Function Operator">‚äß</a> <a id="49792" href="Demos.HSP.html#49755" class="Bound">p</a> <a id="49794" href="Demos.HSP.html#45857" class="Function Operator">‚âà</a> <a id="49796" href="Demos.HSP.html#49757" class="Bound">q</a> <a id="49798" class="Symbol">‚Üí</a> <a id="49800" href="Demos.HSP.html#49737" class="Bound">ùë©</a> <a id="49802" href="Demos.HSP.html#34463" class="Function Operator">IsHomImageOf</a> <a id="49815" href="Demos.HSP.html#49719" class="Bound">ùë®</a> <a id="49817" class="Symbol">‚Üí</a> <a id="49819" href="Demos.HSP.html#49737" class="Bound">ùë©</a> <a id="49821" href="Demos.HSP.html#45857" class="Function Operator">‚äß</a> <a id="49823" href="Demos.HSP.html#49755" class="Bound">p</a> <a id="49825" href="Demos.HSP.html#45857" class="Function Operator">‚âà</a> <a id="49827" href="Demos.HSP.html#49757" class="Bound">q</a>
 <a id="49830" href="Demos.HSP.html#49776" class="Function">‚äß-H-invar</a> <a id="49840" href="Demos.HSP.html#49840" class="Bound">Apq</a> <a id="49844" class="Symbol">(</a><a id="49845" href="Demos.HSP.html#49845" class="Bound">œÜh</a> <a id="49848" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="49850" href="Demos.HSP.html#49850" class="Bound">œÜE</a><a id="49852" class="Symbol">)</a> <a id="49854" href="Demos.HSP.html#49854" class="Bound">œÅ</a> <a id="49856" class="Symbol">=</a> <a id="49858" href="Relation.Binary.Reasoning.Base.Single.html#1916" class="Function Operator">begin</a>
       <a id="49871" href="Demos.HSP.html#42123" class="Function Operator">‚ü¶</a> <a id="49873" href="Demos.HSP.html#49755" class="Bound">p</a> <a id="49875" href="Demos.HSP.html#42123" class="Function Operator">‚üß</a>   <a id="49879" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a>               <a id="49897" href="Demos.HSP.html#49854" class="Bound">œÅ</a>    <a id="49902" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚âàÀò‚ü®</a>  <a id="49907" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="49912" href="Demos.HSP.html#42123" class="Function Operator">‚ü¶</a> <a id="49914" href="Demos.HSP.html#49755" class="Bound">p</a> <a id="49916" href="Demos.HSP.html#42123" class="Function Operator">‚üß</a><a id="49917" class="Symbol">(Œª</a> <a id="49920" href="Demos.HSP.html#49920" class="Bound">_</a> <a id="49922" class="Symbol">‚Üí</a> <a id="49924" href="Demos.HSP.html#10927" class="Function">InvIsInverse ≥</a> <a id="49938" href="Demos.HSP.html#49850" class="Bound">œÜE</a><a id="49940" class="Symbol">)</a>  <a id="49943" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚ü©</a>
       <a id="49952" href="Demos.HSP.html#42123" class="Function Operator">‚ü¶</a> <a id="49954" href="Demos.HSP.html#49755" class="Bound">p</a> <a id="49956" href="Demos.HSP.html#42123" class="Function Operator">‚üß</a>   <a id="49960" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="49964" class="Symbol">(</a><a id="49965" href="Demos.HSP.html#50378" class="Function">œÜ</a> <a id="49967" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="49970" href="Demos.HSP.html#50318" class="Function">œÜ‚Åª¬π</a>  <a id="49975" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="49978" href="Demos.HSP.html#49854" class="Bound">œÅ</a><a id="49979" class="Symbol">)</a>   <a id="49983" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚âàÀò‚ü®</a>  <a id="49988" href="Demos.HSP.html#43867" class="Function">comm-hom-term</a> <a id="50002" href="Demos.HSP.html#49845" class="Bound">œÜh</a> <a id="50005" href="Demos.HSP.html#49755" class="Bound">p</a> <a id="50007" class="Symbol">(</a><a id="50008" href="Demos.HSP.html#50318" class="Function">œÜ‚Åª¬π</a> <a id="50012" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="50014" href="Demos.HSP.html#49854" class="Bound">œÅ</a><a id="50015" class="Symbol">)</a>        <a id="50024" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚ü©</a>
   <a id="50029" href="Demos.HSP.html#50378" class="Function">œÜ</a><a id="50030" class="Symbol">(</a>  <a id="50033" href="Demos.HSP.html#50447" class="Function Operator">‚ü¶</a> <a id="50035" href="Demos.HSP.html#49755" class="Bound">p</a> <a id="50037" href="Demos.HSP.html#50447" class="Function Operator">‚üß·¥¨</a>  <a id="50041" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="50045" class="Symbol">(</a>     <a id="50051" href="Demos.HSP.html#50318" class="Function">œÜ‚Åª¬π</a>  <a id="50056" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="50059" href="Demos.HSP.html#49854" class="Bound">œÅ</a><a id="50060" class="Symbol">))</a>  <a id="50064" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a>   <a id="50069" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="50074" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="50076" href="Demos.HSP.html#49845" class="Bound">œÜh</a> <a id="50079" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="50081" class="Symbol">(</a><a id="50082" href="Demos.HSP.html#49840" class="Bound">Apq</a> <a id="50086" class="Symbol">(</a><a id="50087" href="Demos.HSP.html#50318" class="Function">œÜ‚Åª¬π</a> <a id="50091" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="50093" href="Demos.HSP.html#49854" class="Bound">œÅ</a><a id="50094" class="Symbol">))</a>         <a id="50105" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
   <a id="50110" href="Demos.HSP.html#50378" class="Function">œÜ</a><a id="50111" class="Symbol">(</a>  <a id="50114" href="Demos.HSP.html#50447" class="Function Operator">‚ü¶</a> <a id="50116" href="Demos.HSP.html#49757" class="Bound">q</a> <a id="50118" href="Demos.HSP.html#50447" class="Function Operator">‚üß·¥¨</a>  <a id="50122" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="50126" class="Symbol">(</a>     <a id="50132" href="Demos.HSP.html#50318" class="Function">œÜ‚Åª¬π</a>  <a id="50137" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="50140" href="Demos.HSP.html#49854" class="Bound">œÅ</a><a id="50141" class="Symbol">))</a>  <a id="50145" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a>   <a id="50150" href="Demos.HSP.html#43867" class="Function">comm-hom-term</a> <a id="50164" href="Demos.HSP.html#49845" class="Bound">œÜh</a> <a id="50167" href="Demos.HSP.html#49757" class="Bound">q</a> <a id="50169" class="Symbol">(</a><a id="50170" href="Demos.HSP.html#50318" class="Function">œÜ‚Åª¬π</a> <a id="50174" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="50176" href="Demos.HSP.html#49854" class="Bound">œÅ</a><a id="50177" class="Symbol">)</a>        <a id="50186" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
       <a id="50195" href="Demos.HSP.html#42123" class="Function Operator">‚ü¶</a> <a id="50197" href="Demos.HSP.html#49757" class="Bound">q</a> <a id="50199" href="Demos.HSP.html#42123" class="Function Operator">‚üß</a>   <a id="50203" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="50207" class="Symbol">(</a><a id="50208" href="Demos.HSP.html#50378" class="Function">œÜ</a> <a id="50210" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="50213" href="Demos.HSP.html#50318" class="Function">œÜ‚Åª¬π</a>  <a id="50218" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="50221" href="Demos.HSP.html#49854" class="Bound">œÅ</a><a id="50222" class="Symbol">)</a>   <a id="50226" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a>   <a id="50231" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="50236" href="Demos.HSP.html#42123" class="Function Operator">‚ü¶</a> <a id="50238" href="Demos.HSP.html#49757" class="Bound">q</a> <a id="50240" href="Demos.HSP.html#42123" class="Function Operator">‚üß</a><a id="50241" class="Symbol">(Œª</a> <a id="50244" href="Demos.HSP.html#50244" class="Bound">_</a> <a id="50246" class="Symbol">‚Üí</a> <a id="50248" href="Demos.HSP.html#10927" class="Function">InvIsInverse ≥</a> <a id="50262" href="Demos.HSP.html#49850" class="Bound">œÜE</a><a id="50264" class="Symbol">)</a>  <a id="50267" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
       <a id="50276" href="Demos.HSP.html#42123" class="Function Operator">‚ü¶</a> <a id="50278" href="Demos.HSP.html#49757" class="Bound">q</a> <a id="50280" href="Demos.HSP.html#42123" class="Function Operator">‚üß</a>   <a id="50284" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a>               <a id="50302" href="Demos.HSP.html#49854" class="Bound">œÅ</a>    <a id="50307" href="Relation.Binary.Reasoning.Base.Single.html#2555" class="Function Operator">‚àé</a> <a id="50309" class="Keyword">where</a>
   <a id="50318" href="Demos.HSP.html#50318" class="Function">œÜ‚Åª¬π</a> <a id="50322" class="Symbol">:</a> <a id="50324" href="Demos.HSP.html#18916" class="Function Operator">ùïå[</a> <a id="50327" href="Demos.HSP.html#49737" class="Bound">ùë©</a> <a id="50329" href="Demos.HSP.html#18916" class="Function Operator">]</a> <a id="50331" class="Symbol">‚Üí</a> <a id="50333" href="Demos.HSP.html#18916" class="Function Operator">ùïå[</a> <a id="50336" href="Demos.HSP.html#49719" class="Bound">ùë®</a> <a id="50338" href="Demos.HSP.html#18916" class="Function Operator">]</a>
   <a id="50343" href="Demos.HSP.html#50318" class="Function">œÜ‚Åª¬π</a> <a id="50347" class="Symbol">=</a> <a id="50349" href="Demos.HSP.html#12236" class="Function">SurjInv</a> <a id="50357" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="50359" href="Demos.HSP.html#49845" class="Bound">œÜh</a> <a id="50362" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="50364" href="Demos.HSP.html#49850" class="Bound">œÜE</a>
   <a id="50370" class="Keyword">private</a> <a id="50378" href="Demos.HSP.html#50378" class="Function">œÜ</a> <a id="50380" class="Symbol">=</a> <a id="50382" class="Symbol">(</a><a id="50383" href="Demos.HSP.html#6424" class="Field Operator">_‚ü®$‚ü©_</a> <a id="50389" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="50391" href="Demos.HSP.html#49845" class="Bound">œÜh</a> <a id="50394" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a><a id="50395" class="Symbol">)</a>
   <a id="50400" class="Keyword">open</a> <a id="50405" href="Demos.HSP.html#41559" class="Module">Environment</a> <a id="50417" href="Demos.HSP.html#49719" class="Bound">ùë®</a>  <a id="50420" class="Keyword">using</a> <a id="50426" class="Symbol">()</a> <a id="50429" class="Keyword">renaming</a> <a id="50438" class="Symbol">(</a> <a id="50440" href="Demos.HSP.html#42123" class="Function Operator">‚ü¶_‚üß</a> <a id="50444" class="Symbol">to</a> <a id="50447" class="Function Operator">‚ü¶_‚üß·¥¨</a><a id="50451" class="Symbol">)</a>
   <a id="50456" class="Keyword">open</a> <a id="50461" href="Demos.HSP.html#41559" class="Module">Environment</a> <a id="50473" href="Demos.HSP.html#49737" class="Bound">ùë©</a>  <a id="50476" class="Keyword">using</a> <a id="50482" class="Symbol">(</a> <a id="50484" href="Demos.HSP.html#42123" class="Function Operator">‚ü¶_‚üß</a> <a id="50488" class="Symbol">)</a> <a id="50490" class="Symbol">;</a> <a id="50492" class="Keyword">open</a> <a id="50497" href="Relation.Binary.Reasoning.Setoid.html" class="Module">SetoidReasoning</a> <a id="50513" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="50516" href="Demos.HSP.html#49737" class="Bound">ùë©</a> <a id="50518" href="Demos.HSP.html#18862" class="Function Operator">]</a>

 <a id="50522" href="Demos.HSP.html#50522" class="Function">‚äß-S-invar</a> <a id="50532" class="Symbol">:</a> <a id="50534" href="Demos.HSP.html#49719" class="Bound">ùë®</a> <a id="50536" href="Demos.HSP.html#45857" class="Function Operator">‚äß</a> <a id="50538" href="Demos.HSP.html#49755" class="Bound">p</a> <a id="50540" href="Demos.HSP.html#45857" class="Function Operator">‚âà</a> <a id="50542" href="Demos.HSP.html#49757" class="Bound">q</a> <a id="50544" class="Symbol">‚Üí</a> <a id="50546" href="Demos.HSP.html#49737" class="Bound">ùë©</a> <a id="50548" href="Demos.HSP.html#37181" class="Function Operator">‚â§</a> <a id="50550" href="Demos.HSP.html#49719" class="Bound">ùë®</a> <a id="50552" class="Symbol">‚Üí</a> <a id="50554" href="Demos.HSP.html#49737" class="Bound">ùë©</a> <a id="50556" href="Demos.HSP.html#45857" class="Function Operator">‚äß</a> <a id="50558" href="Demos.HSP.html#49755" class="Bound">p</a> <a id="50560" href="Demos.HSP.html#45857" class="Function Operator">‚âà</a> <a id="50562" href="Demos.HSP.html#49757" class="Bound">q</a>
 <a id="50565" href="Demos.HSP.html#50522" class="Function">‚äß-S-invar</a> <a id="50575" href="Demos.HSP.html#50575" class="Bound">Apq</a> <a id="50579" href="Demos.HSP.html#50579" class="Bound">B‚â§A</a> <a id="50583" href="Demos.HSP.html#50583" class="Bound">b</a> <a id="50585" class="Symbol">=</a> <a id="50587" href="Demos.HSP.html#7893" class="Function Operator">‚à•</a> <a id="50589" href="Demos.HSP.html#50579" class="Bound">B‚â§A</a> <a id="50593" href="Demos.HSP.html#7893" class="Function Operator">‚à•</a>
  <a id="50597" class="Symbol">(</a> <a id="50599" href="Relation.Binary.Reasoning.Base.Single.html#1916" class="Function Operator">begin</a>
    <a id="50609" href="Demos.HSP.html#51011" class="Function">h</a> <a id="50611" class="Symbol">(</a>  <a id="50614" href="Demos.HSP.html#42123" class="Function Operator">‚ü¶</a> <a id="50616" href="Demos.HSP.html#49755" class="Bound">p</a> <a id="50618" href="Demos.HSP.html#42123" class="Function Operator">‚üß</a>   <a id="50622" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a>       <a id="50632" href="Demos.HSP.html#50583" class="Bound">b</a><a id="50633" class="Symbol">)</a>  <a id="50636" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a>   <a id="50641" href="Demos.HSP.html#43867" class="Function">comm-hom-term</a> <a id="50655" href="Demos.HSP.html#50996" class="Function">hh</a> <a id="50658" href="Demos.HSP.html#49755" class="Bound">p</a> <a id="50660" href="Demos.HSP.html#50583" class="Bound">b</a>  <a id="50663" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
         <a id="50674" href="Demos.HSP.html#50943" class="Function Operator">‚ü¶</a> <a id="50676" href="Demos.HSP.html#49755" class="Bound">p</a> <a id="50678" href="Demos.HSP.html#50943" class="Function Operator">‚üß·¥¨</a>  <a id="50682" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="50686" class="Symbol">(</a><a id="50687" href="Demos.HSP.html#51011" class="Function">h</a> <a id="50689" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="50692" href="Demos.HSP.html#50583" class="Bound">b</a><a id="50693" class="Symbol">)</a>  <a id="50696" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a>   <a id="50701" href="Demos.HSP.html#50575" class="Bound">Apq</a> <a id="50705" class="Symbol">(</a><a id="50706" href="Demos.HSP.html#51011" class="Function">h</a> <a id="50708" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="50710" href="Demos.HSP.html#50583" class="Bound">b</a><a id="50711" class="Symbol">)</a>           <a id="50723" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
         <a id="50734" href="Demos.HSP.html#50943" class="Function Operator">‚ü¶</a> <a id="50736" href="Demos.HSP.html#49757" class="Bound">q</a> <a id="50738" href="Demos.HSP.html#50943" class="Function Operator">‚üß·¥¨</a>  <a id="50742" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="50746" class="Symbol">(</a><a id="50747" href="Demos.HSP.html#51011" class="Function">h</a> <a id="50749" href="Function.Base.html#1031" class="Function Operator">‚àò</a>  <a id="50752" href="Demos.HSP.html#50583" class="Bound">b</a><a id="50753" class="Symbol">)</a>  <a id="50756" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚âàÀò‚ü®</a>  <a id="50761" href="Demos.HSP.html#43867" class="Function">comm-hom-term</a> <a id="50775" href="Demos.HSP.html#50996" class="Function">hh</a> <a id="50778" href="Demos.HSP.html#49757" class="Bound">q</a> <a id="50780" href="Demos.HSP.html#50583" class="Bound">b</a>  <a id="50783" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚ü©</a>
    <a id="50789" href="Demos.HSP.html#51011" class="Function">h</a> <a id="50791" class="Symbol">(</a>  <a id="50794" href="Demos.HSP.html#42123" class="Function Operator">‚ü¶</a> <a id="50796" href="Demos.HSP.html#49757" class="Bound">q</a> <a id="50798" href="Demos.HSP.html#42123" class="Function Operator">‚üß</a>   <a id="50802" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a>       <a id="50812" href="Demos.HSP.html#50583" class="Bound">b</a><a id="50813" class="Symbol">)</a>  <a id="50816" href="Relation.Binary.Reasoning.Base.Single.html#2555" class="Function Operator">‚àé</a> <a id="50818" class="Symbol">)</a>
  <a id="50822" class="Keyword">where</a>
  <a id="50830" class="Keyword">open</a> <a id="50835" href="Relation.Binary.Reasoning.Setoid.html" class="Module">SetoidReasoning</a> <a id="50851" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="50854" href="Demos.HSP.html#49719" class="Bound">ùë®</a> <a id="50856" href="Demos.HSP.html#18862" class="Function Operator">]</a>
  <a id="50860" class="Keyword">open</a> <a id="50865" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="50872" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="50875" href="Demos.HSP.html#49719" class="Bound">ùë®</a> <a id="50877" href="Demos.HSP.html#18862" class="Function Operator">]</a>  <a id="50880" class="Keyword">using</a> <a id="50886" class="Symbol">(</a> <a id="50888" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="50892" class="Symbol">)</a>
  <a id="50896" class="Keyword">open</a> <a id="50901" href="Demos.HSP.html#41559" class="Module">Environment</a> <a id="50913" href="Demos.HSP.html#49719" class="Bound">ùë®</a>  <a id="50916" class="Keyword">using</a> <a id="50922" class="Symbol">()</a> <a id="50925" class="Keyword">renaming</a> <a id="50934" class="Symbol">(</a> <a id="50936" href="Demos.HSP.html#42123" class="Function Operator">‚ü¶_‚üß</a> <a id="50940" class="Symbol">to</a> <a id="50943" class="Function Operator">‚ü¶_‚üß·¥¨</a> <a id="50948" class="Symbol">)</a>
  <a id="50952" class="Keyword">open</a> <a id="50957" href="Demos.HSP.html#41559" class="Module">Environment</a> <a id="50969" href="Demos.HSP.html#49737" class="Bound">ùë©</a>  <a id="50972" class="Keyword">using</a> <a id="50978" class="Symbol">(</a> <a id="50980" href="Demos.HSP.html#42123" class="Function Operator">‚ü¶_‚üß</a> <a id="50984" class="Symbol">)</a>
  <a id="50988" class="Keyword">private</a> <a id="50996" href="Demos.HSP.html#50996" class="Function">hh</a> <a id="50999" class="Symbol">=</a> <a id="51001" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="51003" href="Demos.HSP.html#50579" class="Bound">B‚â§A</a> <a id="51007" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="51009" class="Symbol">;</a> <a id="51011" href="Demos.HSP.html#51011" class="Function">h</a> <a id="51013" class="Symbol">=</a> <a id="51015" href="Demos.HSP.html#6424" class="Field Operator">_‚ü®$‚ü©_</a> <a id="51021" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="51023" href="Demos.HSP.html#50996" class="Function">hh</a> <a id="51026" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a>

</pre>
An identity satisfied by all algebras in an indexed collection is also satisfied by the product of algebras in the collection.

<pre class="Agda">

<a id="51182" class="Keyword">module</a> <a id="51189" href="Demos.HSP.html#51189" class="Module">_</a> <a id="51191" class="Symbol">{</a><a id="51192" href="Demos.HSP.html#51192" class="Bound">X</a> <a id="51194" class="Symbol">:</a> <a id="51196" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="51201" href="Demos.HSP.html#7278" class="Generalizable">œá</a><a id="51202" class="Symbol">}{</a><a id="51204" href="Demos.HSP.html#51204" class="Bound">I</a> <a id="51206" class="Symbol">:</a> <a id="51208" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="51213" href="Demos.HSP.html#7280" class="Generalizable">‚Ñì</a><a id="51214" class="Symbol">}(</a><a id="51216" href="Demos.HSP.html#51216" class="Bound">ùíú</a> <a id="51218" class="Symbol">:</a> <a id="51220" href="Demos.HSP.html#51204" class="Bound">I</a> <a id="51222" class="Symbol">‚Üí</a> <a id="51224" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="51232" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="51234" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a><a id="51236" class="Symbol">){</a><a id="51238" href="Demos.HSP.html#51238" class="Bound">p</a> <a id="51240" href="Demos.HSP.html#51240" class="Bound">q</a> <a id="51242" class="Symbol">:</a> <a id="51244" href="Demos.HSP.html#39263" class="Datatype">Term</a> <a id="51249" href="Demos.HSP.html#51192" class="Bound">X</a><a id="51250" class="Symbol">}</a> <a id="51252" class="Keyword">where</a>
 <a id="51259" href="Demos.HSP.html#51259" class="Function">‚äß-P-invar</a> <a id="51269" class="Symbol">:</a> <a id="51271" class="Symbol">(‚àÄ</a> <a id="51274" href="Demos.HSP.html#51274" class="Bound">i</a> <a id="51276" class="Symbol">‚Üí</a> <a id="51278" href="Demos.HSP.html#51216" class="Bound">ùíú</a> <a id="51280" href="Demos.HSP.html#51274" class="Bound">i</a> <a id="51282" href="Demos.HSP.html#45857" class="Function Operator">‚äß</a> <a id="51284" href="Demos.HSP.html#51238" class="Bound">p</a> <a id="51286" href="Demos.HSP.html#45857" class="Function Operator">‚âà</a> <a id="51288" href="Demos.HSP.html#51240" class="Bound">q</a><a id="51289" class="Symbol">)</a> <a id="51291" class="Symbol">‚Üí</a> <a id="51293" href="Demos.HSP.html#23793" class="Function">‚®Ö</a> <a id="51295" href="Demos.HSP.html#51216" class="Bound">ùíú</a> <a id="51297" href="Demos.HSP.html#45857" class="Function Operator">‚äß</a> <a id="51299" href="Demos.HSP.html#51238" class="Bound">p</a> <a id="51301" href="Demos.HSP.html#45857" class="Function Operator">‚âà</a> <a id="51303" href="Demos.HSP.html#51240" class="Bound">q</a>
 <a id="51306" href="Demos.HSP.html#51259" class="Function">‚äß-P-invar</a> <a id="51316" href="Demos.HSP.html#51316" class="Bound">ùíúpq</a> <a id="51320" href="Demos.HSP.html#51320" class="Bound">a</a> <a id="51322" class="Symbol">=</a> <a id="51324" href="Relation.Binary.Reasoning.Base.Single.html#1916" class="Function Operator">begin</a>
   <a id="51333" href="Demos.HSP.html#51683" class="Function Operator">‚ü¶</a> <a id="51335" href="Demos.HSP.html#51238" class="Bound">p</a> <a id="51337" href="Demos.HSP.html#51683" class="Function Operator">‚üß‚ÇÅ</a>               <a id="51354" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a>  <a id="51359" href="Demos.HSP.html#51320" class="Bound">a</a>                <a id="51376" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a>   <a id="51381" href="Demos.HSP.html#44400" class="Function">interp-prod</a> <a id="51393" href="Demos.HSP.html#51216" class="Bound">ùíú</a> <a id="51395" href="Demos.HSP.html#51238" class="Bound">p</a> <a id="51397" href="Demos.HSP.html#51320" class="Bound">a</a>            <a id="51410" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
   <a id="51415" class="Symbol">(</a> <a id="51417" class="Symbol">Œª</a> <a id="51419" href="Demos.HSP.html#51419" class="Bound">i</a> <a id="51421" class="Symbol">‚Üí</a> <a id="51423" class="Symbol">(</a><a id="51424" href="Demos.HSP.html#42123" class="Function Operator">‚ü¶</a> <a id="51426" href="Demos.HSP.html#51216" class="Bound">ùíú</a> <a id="51428" href="Demos.HSP.html#51419" class="Bound">i</a> <a id="51430" href="Demos.HSP.html#42123" class="Function Operator">‚üß</a> <a id="51432" href="Demos.HSP.html#51238" class="Bound">p</a><a id="51433" class="Symbol">)</a>  <a id="51436" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a>  <a id="51441" class="Symbol">Œª</a> <a id="51443" href="Demos.HSP.html#51443" class="Bound">x</a> <a id="51445" class="Symbol">‚Üí</a> <a id="51447" class="Symbol">(</a><a id="51448" href="Demos.HSP.html#51320" class="Bound">a</a> <a id="51450" href="Demos.HSP.html#51443" class="Bound">x</a><a id="51451" class="Symbol">)</a> <a id="51453" href="Demos.HSP.html#51419" class="Bound">i</a> <a id="51455" class="Symbol">)</a>  <a id="51458" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a> <a id="51461" class="Symbol">(Œª</a> <a id="51464" href="Demos.HSP.html#51464" class="Bound">i</a> <a id="51466" class="Symbol">‚Üí</a> <a id="51468" href="Demos.HSP.html#51316" class="Bound">ùíúpq</a> <a id="51472" href="Demos.HSP.html#51464" class="Bound">i</a> <a id="51474" class="Symbol">(Œª</a> <a id="51477" href="Demos.HSP.html#51477" class="Bound">x</a> <a id="51479" class="Symbol">‚Üí</a> <a id="51481" class="Symbol">(</a><a id="51482" href="Demos.HSP.html#51320" class="Bound">a</a> <a id="51484" href="Demos.HSP.html#51477" class="Bound">x</a><a id="51485" class="Symbol">)</a> <a id="51487" href="Demos.HSP.html#51464" class="Bound">i</a><a id="51488" class="Symbol">))</a>  <a id="51492" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
   <a id="51497" class="Symbol">(</a> <a id="51499" class="Symbol">Œª</a> <a id="51501" href="Demos.HSP.html#51501" class="Bound">i</a> <a id="51503" class="Symbol">‚Üí</a> <a id="51505" class="Symbol">(</a><a id="51506" href="Demos.HSP.html#42123" class="Function Operator">‚ü¶</a> <a id="51508" href="Demos.HSP.html#51216" class="Bound">ùíú</a> <a id="51510" href="Demos.HSP.html#51501" class="Bound">i</a> <a id="51512" href="Demos.HSP.html#42123" class="Function Operator">‚üß</a> <a id="51514" href="Demos.HSP.html#51240" class="Bound">q</a><a id="51515" class="Symbol">)</a>  <a id="51518" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a>  <a id="51523" class="Symbol">Œª</a> <a id="51525" href="Demos.HSP.html#51525" class="Bound">x</a> <a id="51527" class="Symbol">‚Üí</a> <a id="51529" class="Symbol">(</a><a id="51530" href="Demos.HSP.html#51320" class="Bound">a</a> <a id="51532" href="Demos.HSP.html#51525" class="Bound">x</a><a id="51533" class="Symbol">)</a> <a id="51535" href="Demos.HSP.html#51501" class="Bound">i</a> <a id="51537" class="Symbol">)</a>  <a id="51540" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚âàÀò‚ü®</a>  <a id="51545" href="Demos.HSP.html#44400" class="Function">interp-prod</a> <a id="51557" href="Demos.HSP.html#51216" class="Bound">ùíú</a> <a id="51559" href="Demos.HSP.html#51240" class="Bound">q</a> <a id="51561" href="Demos.HSP.html#51320" class="Bound">a</a>            <a id="51574" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚ü©</a>
   <a id="51579" href="Demos.HSP.html#51683" class="Function Operator">‚ü¶</a> <a id="51581" href="Demos.HSP.html#51240" class="Bound">q</a> <a id="51583" href="Demos.HSP.html#51683" class="Function Operator">‚üß‚ÇÅ</a>               <a id="51600" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a>  <a id="51605" href="Demos.HSP.html#51320" class="Bound">a</a>                <a id="51622" href="Relation.Binary.Reasoning.Base.Single.html#2555" class="Function Operator">‚àé</a> <a id="51624" class="Keyword">where</a>
  <a id="51632" class="Keyword">open</a> <a id="51637" href="Demos.HSP.html#41559" class="Module">Environment</a> <a id="51649" class="Symbol">(</a><a id="51650" href="Demos.HSP.html#23793" class="Function">‚®Ö</a> <a id="51652" href="Demos.HSP.html#51216" class="Bound">ùíú</a><a id="51653" class="Symbol">)</a>  <a id="51656" class="Keyword">using</a> <a id="51662" class="Symbol">()</a> <a id="51665" class="Keyword">renaming</a> <a id="51674" class="Symbol">(</a> <a id="51676" href="Demos.HSP.html#42123" class="Function Operator">‚ü¶_‚üß</a> <a id="51680" class="Symbol">to</a> <a id="51683" class="Function Operator">‚ü¶_‚üß‚ÇÅ</a> <a id="51688" class="Symbol">)</a>
  <a id="51692" class="Keyword">open</a> <a id="51697" href="Demos.HSP.html#41559" class="Module">Environment</a>        <a id="51716" class="Keyword">using</a> <a id="51722" class="Symbol">(</a> <a id="51724" href="Demos.HSP.html#42123" class="Function Operator">‚ü¶_‚üß</a> <a id="51728" class="Symbol">)</a>
  <a id="51732" class="Keyword">open</a> <a id="51737" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="51744" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="51747" href="Demos.HSP.html#23793" class="Function">‚®Ö</a> <a id="51749" href="Demos.HSP.html#51216" class="Bound">ùíú</a> <a id="51751" href="Demos.HSP.html#18862" class="Function Operator">]</a>    <a id="51756" class="Keyword">using</a> <a id="51762" class="Symbol">(</a> <a id="51764" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="51768" class="Symbol">)</a>
  <a id="51772" class="Keyword">open</a> <a id="51777" href="Relation.Binary.Reasoning.Setoid.html" class="Module">SetoidReasoning</a> <a id="51793" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="51796" href="Demos.HSP.html#23793" class="Function">‚®Ö</a> <a id="51798" href="Demos.HSP.html#51216" class="Bound">ùíú</a> <a id="51800" href="Demos.HSP.html#18862" class="Function Operator">]</a>

</pre>

A *variety* is a class of `ùëÜ`-algebras that is closed under the taking of homomorphic images, subalgebras, and arbitrary products. If we define `V ùí¶ := H (S (P ùí¶))`, then `ùí¶` is a variety iff `V ùí¶  ‚äÜ ùí¶`.
(The converse inclusion holds by virtue of the fact that `V` is a composition of closure operators.)
The class `V ùí¶` is called the *varietal closure* of `ùí¶`. Here is how we define `V` in type theory.
(The explicit universe level declarations that appear in the definition are needed for disambiguation.)

<pre class="Agda">

<a id="52338" class="Keyword">module</a> <a id="52345" href="Demos.HSP.html#52345" class="Module">_</a>  <a id="52348" class="Symbol">{</a><a id="52349" href="Demos.HSP.html#52349" class="Bound">Œ±</a> <a id="52351" href="Demos.HSP.html#52351" class="Bound">œÅ·µÉ</a> <a id="52354" href="Demos.HSP.html#52354" class="Bound">Œ≤</a> <a id="52356" href="Demos.HSP.html#52356" class="Bound">œÅ·µá</a> <a id="52359" href="Demos.HSP.html#52359" class="Bound">Œ≥</a> <a id="52361" href="Demos.HSP.html#52361" class="Bound">œÅ·∂ú</a> <a id="52364" href="Demos.HSP.html#52364" class="Bound">Œ¥</a> <a id="52366" href="Demos.HSP.html#52366" class="Bound">œÅ·µà</a> <a id="52369" class="Symbol">:</a> <a id="52371" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="52376" class="Symbol">}</a> <a id="52378" class="Keyword">where</a>
 <a id="52385" class="Keyword">private</a> <a id="52393" href="Demos.HSP.html#52393" class="Function">a</a> <a id="52395" class="Symbol">=</a> <a id="52397" href="Demos.HSP.html#52349" class="Bound">Œ±</a> <a id="52399" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="52401" href="Demos.HSP.html#52351" class="Bound">œÅ·µÉ</a> <a id="52404" class="Symbol">;</a> <a id="52406" href="Demos.HSP.html#52406" class="Function">b</a> <a id="52408" class="Symbol">=</a> <a id="52410" href="Demos.HSP.html#52354" class="Bound">Œ≤</a> <a id="52412" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="52414" href="Demos.HSP.html#52356" class="Bound">œÅ·µá</a>
 <a id="52418" href="Demos.HSP.html#52418" class="Function">V</a> <a id="52420" class="Symbol">:</a> <a id="52422" class="Symbol">‚àÄ</a> <a id="52424" href="Demos.HSP.html#52424" class="Bound">‚Ñì</a> <a id="52426" href="Demos.HSP.html#52426" class="Bound">Œπ</a> <a id="52428" class="Symbol">‚Üí</a> <a id="52430" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="52434" class="Symbol">(</a><a id="52435" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="52443" href="Demos.HSP.html#52349" class="Bound">Œ±</a> <a id="52445" href="Demos.HSP.html#52351" class="Bound">œÅ·µÉ</a><a id="52447" class="Symbol">)</a> <a id="52449" class="Symbol">(</a><a id="52450" href="Demos.HSP.html#52393" class="Function">a</a> <a id="52452" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="52454" href="Demos.HSP.html#34366" class="Function">ov</a> <a id="52457" href="Demos.HSP.html#52424" class="Bound">‚Ñì</a><a id="52458" class="Symbol">)</a> <a id="52460" class="Symbol">‚Üí</a>  <a id="52463" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="52467" class="Symbol">(</a><a id="52468" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="52476" href="Demos.HSP.html#52364" class="Bound">Œ¥</a> <a id="52478" href="Demos.HSP.html#52366" class="Bound">œÅ·µà</a><a id="52480" class="Symbol">)</a> <a id="52482" class="Symbol">_</a>
 <a id="52485" href="Demos.HSP.html#52418" class="Function">V</a> <a id="52487" href="Demos.HSP.html#52487" class="Bound">‚Ñì</a> <a id="52489" href="Demos.HSP.html#52489" class="Bound">Œπ</a> <a id="52491" href="Demos.HSP.html#52491" class="Bound">ùí¶</a> <a id="52493" class="Symbol">=</a> <a id="52495" href="Demos.HSP.html#49112" class="Function">H</a><a id="52496" class="Symbol">{</a><a id="52497" href="Demos.HSP.html#52359" class="Bound">Œ≥</a><a id="52498" class="Symbol">}{</a><a id="52500" href="Demos.HSP.html#52361" class="Bound">œÅ·∂ú</a><a id="52502" class="Symbol">}{</a><a id="52504" href="Demos.HSP.html#52364" class="Bound">Œ¥</a><a id="52505" class="Symbol">}{</a><a id="52507" href="Demos.HSP.html#52366" class="Bound">œÅ·µà</a><a id="52509" class="Symbol">}</a> <a id="52511" class="Symbol">(</a><a id="52512" href="Demos.HSP.html#52393" class="Function">a</a> <a id="52514" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="52516" href="Demos.HSP.html#52406" class="Function">b</a> <a id="52518" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="52520" href="Demos.HSP.html#52487" class="Bound">‚Ñì</a> <a id="52522" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="52524" href="Demos.HSP.html#52489" class="Bound">Œπ</a><a id="52525" class="Symbol">)</a> <a id="52527" class="Symbol">(</a><a id="52528" href="Demos.HSP.html#49235" class="Function">S</a><a id="52529" class="Symbol">{</a><a id="52530" href="Demos.HSP.html#52354" class="Bound">Œ≤</a><a id="52531" class="Symbol">}{</a><a id="52533" href="Demos.HSP.html#52356" class="Bound">œÅ·µá</a><a id="52535" class="Symbol">}</a> <a id="52537" class="Symbol">(</a><a id="52538" href="Demos.HSP.html#52393" class="Function">a</a> <a id="52540" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="52542" href="Demos.HSP.html#52487" class="Bound">‚Ñì</a> <a id="52544" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="52546" href="Demos.HSP.html#52489" class="Bound">Œπ</a><a id="52547" class="Symbol">)</a> <a id="52549" class="Symbol">(</a><a id="52550" href="Demos.HSP.html#49347" class="Function">P</a> <a id="52552" href="Demos.HSP.html#52487" class="Bound">‚Ñì</a> <a id="52554" href="Demos.HSP.html#52489" class="Bound">Œπ</a> <a id="52556" href="Demos.HSP.html#52491" class="Bound">ùí¶</a><a id="52557" class="Symbol">))</a>

</pre>

The classes `H ùí¶`, `S ùí¶`, `P ùí¶`, and `V ùí¶` all satisfy the
same term identities.  We will only use a subset of the inclusions needed to prove this
assertion. (The others are included in the `Setoid.Varieties.Preservation` module of the [agda-algebras][] library.) First, the closure operator `H` preserves the identities modeled by the given class; this follows almost immediately from the invariance lemma `‚äß-H-invar`.

<pre class="Agda">

<a id="53008" class="Keyword">module</a> <a id="53015" href="Demos.HSP.html#53015" class="Module">_</a>  <a id="53018" class="Symbol">{</a><a id="53019" href="Demos.HSP.html#53019" class="Bound">X</a> <a id="53021" class="Symbol">:</a> <a id="53023" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="53028" href="Demos.HSP.html#7278" class="Generalizable">œá</a><a id="53029" class="Symbol">}{</a><a id="53031" href="Demos.HSP.html#53031" class="Bound">ùí¶</a> <a id="53033" class="Symbol">:</a> <a id="53035" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="53039" class="Symbol">(</a><a id="53040" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="53048" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="53050" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a><a id="53052" class="Symbol">)</a> <a id="53054" class="Symbol">(</a><a id="53055" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="53057" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="53059" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a> <a id="53062" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="53064" href="Demos.HSP.html#34366" class="Function">ov</a> <a id="53067" href="Demos.HSP.html#7280" class="Generalizable">‚Ñì</a><a id="53068" class="Symbol">)}{</a><a id="53071" href="Demos.HSP.html#53071" class="Bound">p</a> <a id="53073" href="Demos.HSP.html#53073" class="Bound">q</a> <a id="53075" class="Symbol">:</a> <a id="53077" href="Demos.HSP.html#39263" class="Datatype">Term</a> <a id="53082" href="Demos.HSP.html#53019" class="Bound">X</a><a id="53083" class="Symbol">}</a> <a id="53085" class="Keyword">where</a>
 <a id="53092" href="Demos.HSP.html#53092" class="Function">H-id1</a> <a id="53098" class="Symbol">:</a> <a id="53100" href="Demos.HSP.html#53031" class="Bound">ùí¶</a> <a id="53102" href="Demos.HSP.html#45955" class="Function Operator">‚ä´</a> <a id="53104" href="Demos.HSP.html#53071" class="Bound">p</a> <a id="53106" href="Demos.HSP.html#45955" class="Function Operator">‚âà</a> <a id="53108" href="Demos.HSP.html#53073" class="Bound">q</a> <a id="53110" class="Symbol">‚Üí</a> <a id="53112" href="Demos.HSP.html#49112" class="Function">H</a><a id="53113" class="Symbol">{</a><a id="53114" class="Argument">Œ≤</a> <a id="53116" class="Symbol">=</a> <a id="53118" href="Demos.HSP.html#53048" class="Bound">Œ±</a><a id="53119" class="Symbol">}{</a><a id="53121" href="Demos.HSP.html#53050" class="Bound">œÅ·µÉ</a><a id="53123" class="Symbol">}</a><a id="53124" href="Demos.HSP.html#53067" class="Bound">‚Ñì</a> <a id="53126" href="Demos.HSP.html#53031" class="Bound">ùí¶</a> <a id="53128" href="Demos.HSP.html#45955" class="Function Operator">‚ä´</a> <a id="53130" href="Demos.HSP.html#53071" class="Bound">p</a> <a id="53132" href="Demos.HSP.html#45955" class="Function Operator">‚âà</a> <a id="53134" href="Demos.HSP.html#53073" class="Bound">q</a>
 <a id="53137" href="Demos.HSP.html#53092" class="Function">H-id1</a> <a id="53143" href="Demos.HSP.html#53143" class="Bound">œÉ</a> <a id="53145" href="Demos.HSP.html#53145" class="Bound">ùë©</a> <a id="53147" class="Symbol">(</a><a id="53148" href="Demos.HSP.html#53148" class="Bound">ùë®</a> <a id="53150" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="53152" href="Demos.HSP.html#53152" class="Bound">kA</a> <a id="53155" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="53157" href="Demos.HSP.html#53157" class="Bound">BimgA</a><a id="53162" class="Symbol">)</a> <a id="53164" class="Symbol">=</a> <a id="53166" href="Demos.HSP.html#49776" class="Function">‚äß-H-invar</a><a id="53175" class="Symbol">{</a><a id="53176" class="Argument">p</a> <a id="53178" class="Symbol">=</a> <a id="53180" href="Demos.HSP.html#53071" class="Bound">p</a><a id="53181" class="Symbol">}{</a><a id="53183" href="Demos.HSP.html#53073" class="Bound">q</a><a id="53184" class="Symbol">}</a> <a id="53186" class="Symbol">(</a><a id="53187" href="Demos.HSP.html#53143" class="Bound">œÉ</a> <a id="53189" href="Demos.HSP.html#53148" class="Bound">ùë®</a> <a id="53191" href="Demos.HSP.html#53152" class="Bound">kA</a><a id="53193" class="Symbol">)</a> <a id="53195" href="Demos.HSP.html#53157" class="Bound">BimgA</a>

</pre>
The analogous preservation result for `S` is a consequence of the invariance lemma `‚äß-S-invar`; the converse, which we call `S-id2`, has an equally straightforward proof.

<pre class="Agda">

 <a id="53400" href="Demos.HSP.html#53400" class="Function">S-id1</a> <a id="53406" class="Symbol">:</a> <a id="53408" href="Demos.HSP.html#53031" class="Bound">ùí¶</a> <a id="53410" href="Demos.HSP.html#45955" class="Function Operator">‚ä´</a> <a id="53412" href="Demos.HSP.html#53071" class="Bound">p</a> <a id="53414" href="Demos.HSP.html#45955" class="Function Operator">‚âà</a> <a id="53416" href="Demos.HSP.html#53073" class="Bound">q</a> <a id="53418" class="Symbol">‚Üí</a> <a id="53420" href="Demos.HSP.html#49235" class="Function">S</a><a id="53421" class="Symbol">{</a><a id="53422" class="Argument">Œ≤</a> <a id="53424" class="Symbol">=</a> <a id="53426" href="Demos.HSP.html#53048" class="Bound">Œ±</a><a id="53427" class="Symbol">}{</a><a id="53429" href="Demos.HSP.html#53050" class="Bound">œÅ·µÉ</a><a id="53431" class="Symbol">}</a><a id="53432" href="Demos.HSP.html#53067" class="Bound">‚Ñì</a> <a id="53434" href="Demos.HSP.html#53031" class="Bound">ùí¶</a> <a id="53436" href="Demos.HSP.html#45955" class="Function Operator">‚ä´</a> <a id="53438" href="Demos.HSP.html#53071" class="Bound">p</a> <a id="53440" href="Demos.HSP.html#45955" class="Function Operator">‚âà</a> <a id="53442" href="Demos.HSP.html#53073" class="Bound">q</a>
 <a id="53445" href="Demos.HSP.html#53400" class="Function">S-id1</a> <a id="53451" href="Demos.HSP.html#53451" class="Bound">œÉ</a> <a id="53453" href="Demos.HSP.html#53453" class="Bound">ùë©</a> <a id="53455" class="Symbol">(</a><a id="53456" href="Demos.HSP.html#53456" class="Bound">ùë®</a> <a id="53458" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="53460" href="Demos.HSP.html#53460" class="Bound">kA</a> <a id="53463" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="53465" href="Demos.HSP.html#53465" class="Bound">B‚â§A</a><a id="53468" class="Symbol">)</a> <a id="53470" class="Symbol">=</a> <a id="53472" href="Demos.HSP.html#50522" class="Function">‚äß-S-invar</a><a id="53481" class="Symbol">{</a><a id="53482" class="Argument">p</a> <a id="53484" class="Symbol">=</a> <a id="53486" href="Demos.HSP.html#53071" class="Bound">p</a><a id="53487" class="Symbol">}{</a><a id="53489" href="Demos.HSP.html#53073" class="Bound">q</a><a id="53490" class="Symbol">}</a> <a id="53492" class="Symbol">(</a><a id="53493" href="Demos.HSP.html#53451" class="Bound">œÉ</a> <a id="53495" href="Demos.HSP.html#53456" class="Bound">ùë®</a> <a id="53497" href="Demos.HSP.html#53460" class="Bound">kA</a><a id="53499" class="Symbol">)</a> <a id="53501" href="Demos.HSP.html#53465" class="Bound">B‚â§A</a>

 <a id="53507" href="Demos.HSP.html#53507" class="Function">S-id2</a> <a id="53513" class="Symbol">:</a> <a id="53515" href="Demos.HSP.html#49235" class="Function">S</a> <a id="53517" href="Demos.HSP.html#53067" class="Bound">‚Ñì</a> <a id="53519" href="Demos.HSP.html#53031" class="Bound">ùí¶</a> <a id="53521" href="Demos.HSP.html#45955" class="Function Operator">‚ä´</a> <a id="53523" href="Demos.HSP.html#53071" class="Bound">p</a> <a id="53525" href="Demos.HSP.html#45955" class="Function Operator">‚âà</a> <a id="53527" href="Demos.HSP.html#53073" class="Bound">q</a> <a id="53529" class="Symbol">‚Üí</a> <a id="53531" href="Demos.HSP.html#53031" class="Bound">ùí¶</a> <a id="53533" href="Demos.HSP.html#45955" class="Function Operator">‚ä´</a> <a id="53535" href="Demos.HSP.html#53071" class="Bound">p</a> <a id="53537" href="Demos.HSP.html#45955" class="Function Operator">‚âà</a> <a id="53539" href="Demos.HSP.html#53073" class="Bound">q</a>
 <a id="53542" href="Demos.HSP.html#53507" class="Function">S-id2</a> <a id="53548" href="Demos.HSP.html#53548" class="Bound">Spq</a> <a id="53552" href="Demos.HSP.html#53552" class="Bound">ùë®</a> <a id="53554" href="Demos.HSP.html#53554" class="Bound">kA</a> <a id="53557" class="Symbol">=</a> <a id="53559" href="Demos.HSP.html#53548" class="Bound">Spq</a> <a id="53563" href="Demos.HSP.html#53552" class="Bound">ùë®</a> <a id="53565" class="Symbol">(</a><a id="53566" href="Demos.HSP.html#53552" class="Bound">ùë®</a> <a id="53568" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="53570" class="Symbol">(</a><a id="53571" href="Demos.HSP.html#53554" class="Bound">kA</a> <a id="53574" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="53576" href="Demos.HSP.html#37469" class="Function">‚â§-reflexive</a><a id="53587" class="Symbol">))</a>

</pre>
The [agda-algebras][] library includes analogous pairs of implications for `P`, `H`, and `V`, called `P-id1`, `P-id2`, `H-id1`, etc. Here we only need the first implication in each case, so we omit the others.

<pre class="Agda">

 <a id="53828" href="Demos.HSP.html#53828" class="Function">P-id1</a> <a id="53834" class="Symbol">:</a> <a id="53836" class="Symbol">‚àÄ{</a><a id="53838" href="Demos.HSP.html#53838" class="Bound">Œπ</a><a id="53839" class="Symbol">}</a> <a id="53841" class="Symbol">‚Üí</a> <a id="53843" href="Demos.HSP.html#53031" class="Bound">ùí¶</a> <a id="53845" href="Demos.HSP.html#45955" class="Function Operator">‚ä´</a> <a id="53847" href="Demos.HSP.html#53071" class="Bound">p</a> <a id="53849" href="Demos.HSP.html#45955" class="Function Operator">‚âà</a> <a id="53851" href="Demos.HSP.html#53073" class="Bound">q</a> <a id="53853" class="Symbol">‚Üí</a> <a id="53855" href="Demos.HSP.html#49347" class="Function">P</a><a id="53856" class="Symbol">{</a><a id="53857" class="Argument">Œ≤</a> <a id="53859" class="Symbol">=</a> <a id="53861" href="Demos.HSP.html#53048" class="Bound">Œ±</a><a id="53862" class="Symbol">}{</a><a id="53864" href="Demos.HSP.html#53050" class="Bound">œÅ·µÉ</a><a id="53866" class="Symbol">}</a><a id="53867" href="Demos.HSP.html#53067" class="Bound">‚Ñì</a> <a id="53869" href="Demos.HSP.html#53838" class="Bound">Œπ</a> <a id="53871" href="Demos.HSP.html#53031" class="Bound">ùí¶</a> <a id="53873" href="Demos.HSP.html#45955" class="Function Operator">‚ä´</a> <a id="53875" href="Demos.HSP.html#53071" class="Bound">p</a> <a id="53877" href="Demos.HSP.html#45955" class="Function Operator">‚âà</a> <a id="53879" href="Demos.HSP.html#53073" class="Bound">q</a>
 <a id="53882" href="Demos.HSP.html#53828" class="Function">P-id1</a> <a id="53888" href="Demos.HSP.html#53888" class="Bound">œÉ</a> <a id="53890" href="Demos.HSP.html#53890" class="Bound">ùë®</a> <a id="53892" class="Symbol">(</a><a id="53893" href="Demos.HSP.html#53893" class="Bound">I</a> <a id="53895" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="53897" href="Demos.HSP.html#53897" class="Bound">ùíú</a> <a id="53899" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="53901" href="Demos.HSP.html#53901" class="Bound">kA</a> <a id="53904" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="53906" href="Demos.HSP.html#53906" class="Bound">A‚âÖ‚®ÖA</a><a id="53910" class="Symbol">)</a> <a id="53912" class="Symbol">=</a> <a id="53914" href="Demos.HSP.html#46937" class="Function">‚äß-I-invar</a> <a id="53924" href="Demos.HSP.html#53890" class="Bound">ùë®</a> <a id="53926" href="Demos.HSP.html#53071" class="Bound">p</a> <a id="53928" href="Demos.HSP.html#53073" class="Bound">q</a> <a id="53930" href="Demos.HSP.html#53954" class="Function">IH</a> <a id="53933" class="Symbol">(</a><a id="53934" href="Demos.HSP.html#33342" class="Function">‚âÖ-sym</a> <a id="53940" href="Demos.HSP.html#53906" class="Bound">A‚âÖ‚®ÖA</a><a id="53944" class="Symbol">)</a> <a id="53946" class="Keyword">where</a>
  <a id="53954" href="Demos.HSP.html#53954" class="Function">IH</a> <a id="53957" class="Symbol">:</a> <a id="53959" href="Demos.HSP.html#23793" class="Function">‚®Ö</a> <a id="53961" href="Demos.HSP.html#53897" class="Bound">ùíú</a> <a id="53963" href="Demos.HSP.html#45857" class="Function Operator">‚äß</a> <a id="53965" href="Demos.HSP.html#53071" class="Bound">p</a> <a id="53967" href="Demos.HSP.html#45857" class="Function Operator">‚âà</a> <a id="53969" href="Demos.HSP.html#53073" class="Bound">q</a>
  <a id="53973" href="Demos.HSP.html#53954" class="Function">IH</a> <a id="53976" class="Symbol">=</a> <a id="53978" href="Demos.HSP.html#51259" class="Function">‚äß-P-invar</a> <a id="53988" href="Demos.HSP.html#53897" class="Bound">ùíú</a> <a id="53990" class="Symbol">{</a><a id="53991" href="Demos.HSP.html#53071" class="Bound">p</a><a id="53992" class="Symbol">}{</a><a id="53994" href="Demos.HSP.html#53073" class="Bound">q</a><a id="53995" class="Symbol">}</a> <a id="53997" class="Symbol">Œª</a> <a id="53999" href="Demos.HSP.html#53999" class="Bound">i</a> <a id="54001" class="Symbol">‚Üí</a> <a id="54003" href="Demos.HSP.html#53888" class="Bound">œÉ</a> <a id="54005" class="Symbol">(</a><a id="54006" href="Demos.HSP.html#53897" class="Bound">ùíú</a> <a id="54008" href="Demos.HSP.html#53999" class="Bound">i</a><a id="54009" class="Symbol">)</a> <a id="54011" class="Symbol">(</a><a id="54012" href="Demos.HSP.html#53901" class="Bound">kA</a> <a id="54015" href="Demos.HSP.html#53999" class="Bound">i</a><a id="54016" class="Symbol">)</a>

<a id="54019" class="Keyword">module</a> <a id="54026" href="Demos.HSP.html#54026" class="Module">_</a> <a id="54028" class="Symbol">{</a><a id="54029" href="Demos.HSP.html#54029" class="Bound">X</a> <a id="54031" class="Symbol">:</a> <a id="54033" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="54038" href="Demos.HSP.html#7278" class="Generalizable">œá</a><a id="54039" class="Symbol">}{</a><a id="54041" href="Demos.HSP.html#54041" class="Bound">Œπ</a> <a id="54043" class="Symbol">:</a> <a id="54045" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="54050" class="Symbol">}(</a><a id="54052" href="Demos.HSP.html#54052" class="Bound">‚Ñì</a> <a id="54054" class="Symbol">:</a> <a id="54056" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="54061" class="Symbol">){</a><a id="54063" href="Demos.HSP.html#54063" class="Bound">ùí¶</a> <a id="54065" class="Symbol">:</a> <a id="54067" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="54071" class="Symbol">(</a><a id="54072" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="54080" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="54082" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a><a id="54084" class="Symbol">)(</a><a id="54086" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="54088" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="54090" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a> <a id="54093" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="54095" href="Demos.HSP.html#34366" class="Function">ov</a> <a id="54098" href="Demos.HSP.html#54052" class="Bound">‚Ñì</a><a id="54099" class="Symbol">)}{</a><a id="54102" href="Demos.HSP.html#54102" class="Bound">p</a> <a id="54104" href="Demos.HSP.html#54104" class="Bound">q</a> <a id="54106" class="Symbol">:</a> <a id="54108" href="Demos.HSP.html#39263" class="Datatype">Term</a> <a id="54113" href="Demos.HSP.html#54029" class="Bound">X</a><a id="54114" class="Symbol">}</a> <a id="54116" class="Keyword">where</a>
 <a id="54123" class="Keyword">private</a> <a id="54131" href="Demos.HSP.html#54131" class="Function">a‚ÑìŒπ</a> <a id="54135" class="Symbol">=</a> <a id="54137" href="Demos.HSP.html#54080" class="Bound">Œ±</a> <a id="54139" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="54141" href="Demos.HSP.html#54082" class="Bound">œÅ·µÉ</a> <a id="54144" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="54146" href="Demos.HSP.html#54052" class="Bound">‚Ñì</a> <a id="54148" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="54150" href="Demos.HSP.html#54041" class="Bound">Œπ</a>
 <a id="54153" href="Demos.HSP.html#54153" class="Function">V-id1</a> <a id="54159" class="Symbol">:</a> <a id="54161" href="Demos.HSP.html#54063" class="Bound">ùí¶</a> <a id="54163" href="Demos.HSP.html#45955" class="Function Operator">‚ä´</a> <a id="54165" href="Demos.HSP.html#54102" class="Bound">p</a> <a id="54167" href="Demos.HSP.html#45955" class="Function Operator">‚âà</a> <a id="54169" href="Demos.HSP.html#54104" class="Bound">q</a> <a id="54171" class="Symbol">‚Üí</a> <a id="54173" href="Demos.HSP.html#52418" class="Function">V</a> <a id="54175" href="Demos.HSP.html#54052" class="Bound">‚Ñì</a> <a id="54177" href="Demos.HSP.html#54041" class="Bound">Œπ</a> <a id="54179" href="Demos.HSP.html#54063" class="Bound">ùí¶</a> <a id="54181" href="Demos.HSP.html#45955" class="Function Operator">‚ä´</a> <a id="54183" href="Demos.HSP.html#54102" class="Bound">p</a> <a id="54185" href="Demos.HSP.html#45955" class="Function Operator">‚âà</a> <a id="54187" href="Demos.HSP.html#54104" class="Bound">q</a>
 <a id="54190" href="Demos.HSP.html#54153" class="Function">V-id1</a> <a id="54196" href="Demos.HSP.html#54196" class="Bound">œÉ</a> <a id="54198" href="Demos.HSP.html#54198" class="Bound">ùë©</a> <a id="54200" class="Symbol">(</a><a id="54201" href="Demos.HSP.html#54201" class="Bound">ùë®</a> <a id="54203" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="54205" class="Symbol">(</a><a id="54206" href="Demos.HSP.html#54206" class="Bound">‚®ÖA</a> <a id="54209" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="54211" href="Demos.HSP.html#54211" class="Bound">p‚®ÖA</a> <a id="54215" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="54217" href="Demos.HSP.html#54217" class="Bound">A‚â§‚®ÖA</a><a id="54221" class="Symbol">)</a> <a id="54223" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="54225" href="Demos.HSP.html#54225" class="Bound">BimgA</a><a id="54230" class="Symbol">)</a> <a id="54232" class="Symbol">=</a>
  <a id="54236" href="Demos.HSP.html#53092" class="Function">H-id1</a><a id="54241" class="Symbol">{</a><a id="54242" class="Argument">‚Ñì</a> <a id="54244" class="Symbol">=</a> <a id="54246" href="Demos.HSP.html#54131" class="Function">a‚ÑìŒπ</a><a id="54249" class="Symbol">}{</a><a id="54251" class="Argument">ùí¶</a> <a id="54253" class="Symbol">=</a> <a id="54255" href="Demos.HSP.html#49235" class="Function">S</a> <a id="54257" href="Demos.HSP.html#54131" class="Function">a‚ÑìŒπ</a> <a id="54261" class="Symbol">(</a><a id="54262" href="Demos.HSP.html#49347" class="Function">P</a> <a id="54264" class="Symbol">{</a><a id="54265" class="Argument">Œ≤</a> <a id="54267" class="Symbol">=</a> <a id="54269" href="Demos.HSP.html#54080" class="Bound">Œ±</a><a id="54270" class="Symbol">}{</a><a id="54272" href="Demos.HSP.html#54082" class="Bound">œÅ·µÉ</a><a id="54274" class="Symbol">}</a><a id="54275" href="Demos.HSP.html#54052" class="Bound">‚Ñì</a> <a id="54277" href="Demos.HSP.html#54041" class="Bound">Œπ</a> <a id="54279" href="Demos.HSP.html#54063" class="Bound">ùí¶</a><a id="54280" class="Symbol">)}{</a><a id="54283" class="Argument">p</a> <a id="54285" class="Symbol">=</a> <a id="54287" href="Demos.HSP.html#54102" class="Bound">p</a><a id="54288" class="Symbol">}{</a><a id="54290" href="Demos.HSP.html#54104" class="Bound">q</a><a id="54291" class="Symbol">}</a> <a id="54293" href="Demos.HSP.html#54398" class="Function">spK‚äßpq</a> <a id="54300" href="Demos.HSP.html#54198" class="Bound">ùë©</a> <a id="54302" class="Symbol">(</a><a id="54303" href="Demos.HSP.html#54201" class="Bound">ùë®</a> <a id="54305" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="54307" class="Symbol">(</a><a id="54308" href="Demos.HSP.html#54331" class="Function">spA</a> <a id="54312" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="54314" href="Demos.HSP.html#54225" class="Bound">BimgA</a><a id="54319" class="Symbol">))</a> <a id="54322" class="Keyword">where</a>
   <a id="54331" href="Demos.HSP.html#54331" class="Function">spA</a> <a id="54335" class="Symbol">:</a> <a id="54337" href="Demos.HSP.html#54201" class="Bound">ùë®</a> <a id="54339" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="54341" href="Demos.HSP.html#49235" class="Function">S</a> <a id="54343" href="Demos.HSP.html#54131" class="Function">a‚ÑìŒπ</a> <a id="54347" class="Symbol">(</a><a id="54348" href="Demos.HSP.html#49347" class="Function">P</a> <a id="54350" class="Symbol">{</a><a id="54351" class="Argument">Œ≤</a> <a id="54353" class="Symbol">=</a> <a id="54355" href="Demos.HSP.html#54080" class="Bound">Œ±</a><a id="54356" class="Symbol">}{</a><a id="54358" href="Demos.HSP.html#54082" class="Bound">œÅ·µÉ</a><a id="54360" class="Symbol">}</a><a id="54361" href="Demos.HSP.html#54052" class="Bound">‚Ñì</a> <a id="54363" href="Demos.HSP.html#54041" class="Bound">Œπ</a> <a id="54365" href="Demos.HSP.html#54063" class="Bound">ùí¶</a><a id="54366" class="Symbol">)</a>
   <a id="54371" href="Demos.HSP.html#54331" class="Function">spA</a> <a id="54375" class="Symbol">=</a> <a id="54377" href="Demos.HSP.html#54206" class="Bound">‚®ÖA</a> <a id="54380" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="54382" class="Symbol">(</a><a id="54383" href="Demos.HSP.html#54211" class="Bound">p‚®ÖA</a> <a id="54387" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="54389" href="Demos.HSP.html#54217" class="Bound">A‚â§‚®ÖA</a><a id="54393" class="Symbol">)</a>
   <a id="54398" href="Demos.HSP.html#54398" class="Function">spK‚äßpq</a> <a id="54405" class="Symbol">:</a> <a id="54407" href="Demos.HSP.html#49235" class="Function">S</a> <a id="54409" href="Demos.HSP.html#54131" class="Function">a‚ÑìŒπ</a> <a id="54413" class="Symbol">(</a><a id="54414" href="Demos.HSP.html#49347" class="Function">P</a> <a id="54416" href="Demos.HSP.html#54052" class="Bound">‚Ñì</a> <a id="54418" href="Demos.HSP.html#54041" class="Bound">Œπ</a> <a id="54420" href="Demos.HSP.html#54063" class="Bound">ùí¶</a><a id="54421" class="Symbol">)</a> <a id="54423" href="Demos.HSP.html#45955" class="Function Operator">‚ä´</a> <a id="54425" href="Demos.HSP.html#54102" class="Bound">p</a> <a id="54427" href="Demos.HSP.html#45955" class="Function Operator">‚âà</a> <a id="54429" href="Demos.HSP.html#54104" class="Bound">q</a>
   <a id="54434" href="Demos.HSP.html#54398" class="Function">spK‚äßpq</a> <a id="54441" class="Symbol">=</a> <a id="54443" href="Demos.HSP.html#53400" class="Function">S-id1</a><a id="54448" class="Symbol">{</a><a id="54449" class="Argument">‚Ñì</a> <a id="54451" class="Symbol">=</a> <a id="54453" href="Demos.HSP.html#54131" class="Function">a‚ÑìŒπ</a><a id="54456" class="Symbol">}{</a><a id="54458" class="Argument">p</a> <a id="54460" class="Symbol">=</a> <a id="54462" href="Demos.HSP.html#54102" class="Bound">p</a><a id="54463" class="Symbol">}{</a><a id="54465" href="Demos.HSP.html#54104" class="Bound">q</a><a id="54466" class="Symbol">}</a> <a id="54468" class="Symbol">(</a><a id="54469" href="Demos.HSP.html#53828" class="Function">P-id1</a><a id="54474" class="Symbol">{</a><a id="54475" class="Argument">‚Ñì</a> <a id="54477" class="Symbol">=</a> <a id="54479" href="Demos.HSP.html#54052" class="Bound">‚Ñì</a><a id="54480" class="Symbol">}</a> <a id="54482" class="Symbol">{</a><a id="54483" class="Argument">ùí¶</a> <a id="54485" class="Symbol">=</a> <a id="54487" href="Demos.HSP.html#54063" class="Bound">ùí¶</a><a id="54488" class="Symbol">}{</a><a id="54490" class="Argument">p</a> <a id="54492" class="Symbol">=</a> <a id="54494" href="Demos.HSP.html#54102" class="Bound">p</a><a id="54495" class="Symbol">}{</a><a id="54497" href="Demos.HSP.html#54104" class="Bound">q</a><a id="54498" class="Symbol">}</a> <a id="54500" href="Demos.HSP.html#54196" class="Bound">œÉ</a><a id="54501" class="Symbol">)</a>
</pre>


## <a id="free-algebras">Free Algebras</a>

### <a id="the-absolutely-free-algebra">The absolutely free algebra</a>

The term algebra `ùëª X` is the *absolutely free* `ùëÜ`-algebra over `X`.
That is, for every `ùëÜ`-algebra `ùë®`, the following hold.
* Every function from `X` to `ùïå[ ùë® ]` lifts to a homomorphism from `ùëª X` to `ùë®`.
* That homomorphism is unique.
Here we formalize the first of these properties by defining the lifting function `free-lift`
and its setoid analog `free-lift-func`, and then proving the latter is a homomorphism.
(For the proof of uniqueness, see the `Setoid.Terms.Properties` module of the [agda-algebras][] library.)

<pre class="Agda">

<a id="55172" class="Keyword">module</a> <a id="55179" href="Demos.HSP.html#55179" class="Module">_</a> <a id="55181" class="Symbol">{</a><a id="55182" href="Demos.HSP.html#55182" class="Bound">X</a> <a id="55184" class="Symbol">:</a> <a id="55186" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="55191" href="Demos.HSP.html#7278" class="Generalizable">œá</a><a id="55192" class="Symbol">}{</a><a id="55194" href="Demos.HSP.html#55194" class="Bound">ùë®</a> <a id="55196" class="Symbol">:</a> <a id="55198" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="55206" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="55208" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a><a id="55210" class="Symbol">}(</a><a id="55212" href="Demos.HSP.html#55212" class="Bound">h</a> <a id="55214" class="Symbol">:</a> <a id="55216" href="Demos.HSP.html#55182" class="Bound">X</a> <a id="55218" class="Symbol">‚Üí</a> <a id="55220" href="Demos.HSP.html#18916" class="Function Operator">ùïå[</a> <a id="55223" href="Demos.HSP.html#55194" class="Bound">ùë®</a> <a id="55225" href="Demos.HSP.html#18916" class="Function Operator">]</a><a id="55226" class="Symbol">)</a> <a id="55228" class="Keyword">where</a>
 <a id="55235" href="Demos.HSP.html#55235" class="Function">free-lift</a> <a id="55245" class="Symbol">:</a> <a id="55247" href="Demos.HSP.html#18916" class="Function Operator">ùïå[</a> <a id="55250" href="Demos.HSP.html#40889" class="Function">ùëª</a> <a id="55252" href="Demos.HSP.html#55182" class="Bound">X</a> <a id="55254" href="Demos.HSP.html#18916" class="Function Operator">]</a> <a id="55256" class="Symbol">‚Üí</a> <a id="55258" href="Demos.HSP.html#18916" class="Function Operator">ùïå[</a> <a id="55261" href="Demos.HSP.html#55194" class="Bound">ùë®</a> <a id="55263" href="Demos.HSP.html#18916" class="Function Operator">]</a>
 <a id="55266" href="Demos.HSP.html#55235" class="Function">free-lift</a> <a id="55276" class="Symbol">(</a><a id="55277" href="Demos.HSP.html#39303" class="InductiveConstructor">‚Ñä</a> <a id="55279" href="Demos.HSP.html#55279" class="Bound">x</a><a id="55280" class="Symbol">)</a>       <a id="55288" class="Symbol">=</a> <a id="55290" href="Demos.HSP.html#55212" class="Bound">h</a> <a id="55292" href="Demos.HSP.html#55279" class="Bound">x</a>
 <a id="55295" href="Demos.HSP.html#55235" class="Function">free-lift</a> <a id="55305" class="Symbol">(</a><a id="55306" href="Demos.HSP.html#39319" class="InductiveConstructor">node</a> <a id="55311" href="Demos.HSP.html#55311" class="Bound">f</a> <a id="55313" href="Demos.HSP.html#55313" class="Bound">t</a><a id="55314" class="Symbol">)</a>  <a id="55317" class="Symbol">=</a> <a id="55319" class="Symbol">(</a><a id="55320" href="Demos.HSP.html#55311" class="Bound">f</a> <a id="55322" href="Demos.HSP.html#18975" class="Function Operator">ÃÇ</a> <a id="55324" href="Demos.HSP.html#55194" class="Bound">ùë®</a><a id="55325" class="Symbol">)</a> <a id="55327" class="Symbol">Œª</a> <a id="55329" href="Demos.HSP.html#55329" class="Bound">i</a> <a id="55331" class="Symbol">‚Üí</a> <a id="55333" href="Demos.HSP.html#55235" class="Function">free-lift</a> <a id="55343" class="Symbol">(</a><a id="55344" href="Demos.HSP.html#55313" class="Bound">t</a> <a id="55346" href="Demos.HSP.html#55329" class="Bound">i</a><a id="55347" class="Symbol">)</a>

 <a id="55351" href="Demos.HSP.html#55351" class="Function">free-lift-func</a> <a id="55366" class="Symbol">:</a> <a id="55368" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="55371" href="Demos.HSP.html#40889" class="Function">ùëª</a> <a id="55373" href="Demos.HSP.html#55182" class="Bound">X</a> <a id="55375" href="Demos.HSP.html#18862" class="Function Operator">]</a> <a id="55377" href="Demos.HSP.html#6322" class="Record Operator">‚ü∂</a> <a id="55379" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="55382" href="Demos.HSP.html#55194" class="Bound">ùë®</a> <a id="55384" href="Demos.HSP.html#18862" class="Function Operator">]</a>
 <a id="55387" href="Demos.HSP.html#55351" class="Function">free-lift-func</a> <a id="55402" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="55406" href="Demos.HSP.html#55406" class="Bound">x</a> <a id="55408" class="Symbol">=</a> <a id="55410" href="Demos.HSP.html#55235" class="Function">free-lift</a> <a id="55420" href="Demos.HSP.html#55406" class="Bound">x</a>
 <a id="55423" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="55428" href="Demos.HSP.html#55351" class="Function">free-lift-func</a> <a id="55443" class="Symbol">=</a> <a id="55445" href="Demos.HSP.html#55532" class="Function">flcong</a> <a id="55452" class="Keyword">where</a>
  <a id="55460" class="Keyword">open</a> <a id="55465" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="55472" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="55475" href="Demos.HSP.html#55194" class="Bound">ùë®</a> <a id="55477" href="Demos.HSP.html#18862" class="Function Operator">]</a> <a id="55479" class="Keyword">using</a> <a id="55485" class="Symbol">(</a> <a id="55487" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="55491" class="Symbol">)</a> <a id="55493" class="Keyword">renaming</a> <a id="55502" class="Symbol">(</a> <a id="55504" href="Relation.Binary.Structures.html#1646" class="Function">reflexive</a> <a id="55514" class="Symbol">to</a> <a id="55517" class="Function">reflexive·¥¨</a> <a id="55528" class="Symbol">)</a>
  <a id="55532" href="Demos.HSP.html#55532" class="Function">flcong</a> <a id="55539" class="Symbol">:</a> <a id="55541" class="Symbol">‚àÄ</a> <a id="55543" class="Symbol">{</a><a id="55544" href="Demos.HSP.html#55544" class="Bound">s</a> <a id="55546" href="Demos.HSP.html#55546" class="Bound">t</a><a id="55547" class="Symbol">}</a> <a id="55549" class="Symbol">‚Üí</a> <a id="55551" href="Demos.HSP.html#55544" class="Bound">s</a> <a id="55553" href="Demos.HSP.html#39687" class="Datatype Operator">‚âÉ</a> <a id="55555" href="Demos.HSP.html#55546" class="Bound">t</a> <a id="55557" class="Symbol">‚Üí</a> <a id="55559" href="Demos.HSP.html#55235" class="Function">free-lift</a> <a id="55569" href="Demos.HSP.html#55544" class="Bound">s</a> <a id="55571" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a> <a id="55573" href="Demos.HSP.html#55235" class="Function">free-lift</a> <a id="55583" href="Demos.HSP.html#55546" class="Bound">t</a>
  <a id="55587" href="Demos.HSP.html#55532" class="Function">flcong</a> <a id="55594" class="Symbol">(</a><a id="55595" href="Demos.HSP.html#39731" class="InductiveConstructor">_‚âÉ_.rfl</a> <a id="55603" href="Demos.HSP.html#55603" class="Bound">x</a><a id="55604" class="Symbol">)</a> <a id="55606" class="Symbol">=</a> <a id="55608" href="Demos.HSP.html#55517" class="Function">reflexive·¥¨</a> <a id="55619" class="Symbol">(</a><a id="55620" href="Relation.Binary.PropositionalEquality.Core.html#1130" class="Function">‚â°.cong</a> <a id="55627" href="Demos.HSP.html#55212" class="Bound">h</a> <a id="55629" href="Demos.HSP.html#55603" class="Bound">x</a><a id="55630" class="Symbol">)</a>
  <a id="55634" href="Demos.HSP.html#55532" class="Function">flcong</a> <a id="55641" class="Symbol">(</a><a id="55642" href="Demos.HSP.html#39773" class="InductiveConstructor">_‚âÉ_.gnl</a> <a id="55650" href="Demos.HSP.html#55650" class="Bound">x</a><a id="55651" class="Symbol">)</a> <a id="55653" class="Symbol">=</a> <a id="55655" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="55660" class="Symbol">(</a><a id="55661" href="Demos.HSP.html#18302" class="Field">Interp</a> <a id="55668" href="Demos.HSP.html#55194" class="Bound">ùë®</a><a id="55669" class="Symbol">)</a> <a id="55671" class="Symbol">(</a><a id="55672" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="55679" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="55681" class="Symbol">Œª</a> <a id="55683" href="Demos.HSP.html#55683" class="Bound">i</a> <a id="55685" class="Symbol">‚Üí</a> <a id="55687" href="Demos.HSP.html#55532" class="Function">flcong</a> <a id="55694" class="Symbol">(</a><a id="55695" href="Demos.HSP.html#55650" class="Bound">x</a> <a id="55697" href="Demos.HSP.html#55683" class="Bound">i</a><a id="55698" class="Symbol">))</a>

 <a id="55703" href="Demos.HSP.html#55703" class="Function">lift-hom</a> <a id="55712" class="Symbol">:</a> <a id="55714" href="Demos.HSP.html#26168" class="Function">hom</a> <a id="55718" class="Symbol">(</a><a id="55719" href="Demos.HSP.html#40889" class="Function">ùëª</a> <a id="55721" href="Demos.HSP.html#55182" class="Bound">X</a><a id="55722" class="Symbol">)</a> <a id="55724" href="Demos.HSP.html#55194" class="Bound">ùë®</a>
 <a id="55727" href="Demos.HSP.html#55703" class="Function">lift-hom</a> <a id="55736" class="Symbol">=</a> <a id="55738" href="Demos.HSP.html#55351" class="Function">free-lift-func</a> <a id="55753" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a>
   <a id="55758" href="Demos.HSP.html#26115" class="InductiveConstructor">mkhom</a> <a id="55764" class="Symbol">Œª{</a><a id="55766" href="Demos.HSP.html#55766" class="Bound">_</a><a id="55767" class="Symbol">}{</a><a id="55769" href="Demos.HSP.html#55769" class="Bound">a</a><a id="55770" class="Symbol">}</a> <a id="55772" class="Symbol">‚Üí</a> <a id="55774" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="55779" class="Symbol">(</a><a id="55780" href="Demos.HSP.html#18302" class="Field">Interp</a> <a id="55787" href="Demos.HSP.html#55194" class="Bound">ùë®</a><a id="55788" class="Symbol">)</a> <a id="55790" class="Symbol">(</a><a id="55791" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="55798" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="55800" class="Symbol">Œª</a> <a id="55802" href="Demos.HSP.html#55802" class="Bound">i</a> <a id="55804" class="Symbol">‚Üí</a> <a id="55806" class="Symbol">(</a><a id="55807" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="55812" href="Demos.HSP.html#55351" class="Function">free-lift-func</a><a id="55826" class="Symbol">){</a><a id="55828" href="Demos.HSP.html#55769" class="Bound">a</a> <a id="55830" href="Demos.HSP.html#55802" class="Bound">i</a><a id="55831" class="Symbol">}</a> <a id="55833" href="Demos.HSP.html#39957" class="Function">‚âÉ-isRefl</a><a id="55841" class="Symbol">)</a>

</pre>

It turns out that the interpretation of a term `p` in an environment `Œ∑` is the same
as the free lift of `Œ∑` evaluated at `p`. We apply this fact a number of times in the sequel.

<pre class="Agda">

<a id="56050" class="Keyword">module</a> <a id="56057" href="Demos.HSP.html#56057" class="Module">_</a>  <a id="56060" class="Symbol">{</a><a id="56061" href="Demos.HSP.html#56061" class="Bound">X</a> <a id="56063" class="Symbol">:</a> <a id="56065" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="56070" href="Demos.HSP.html#7278" class="Generalizable">œá</a><a id="56071" class="Symbol">}</a> <a id="56073" class="Symbol">{</a><a id="56074" href="Demos.HSP.html#56074" class="Bound">ùë®</a> <a id="56076" class="Symbol">:</a> <a id="56078" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="56086" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="56088" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a><a id="56090" class="Symbol">}</a>   <a id="56094" class="Keyword">where</a>
 <a id="56101" class="Keyword">open</a> <a id="56106" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="56113" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="56116" href="Demos.HSP.html#56074" class="Bound">ùë®</a> <a id="56118" href="Demos.HSP.html#18862" class="Function Operator">]</a>  <a id="56121" class="Keyword">using</a> <a id="56127" class="Symbol">(</a> <a id="56129" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="56133" class="Symbol">;</a> <a id="56135" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="56140" class="Symbol">)</a>
 <a id="56143" class="Keyword">open</a> <a id="56148" href="Demos.HSP.html#41559" class="Module">Environment</a> <a id="56160" href="Demos.HSP.html#56074" class="Bound">ùë®</a>  <a id="56163" class="Keyword">using</a> <a id="56169" class="Symbol">(</a> <a id="56171" href="Demos.HSP.html#42123" class="Function Operator">‚ü¶_‚üß</a> <a id="56175" class="Symbol">)</a>

 <a id="56179" href="Demos.HSP.html#56179" class="Function">free-lift-interp</a> <a id="56196" class="Symbol">:</a> <a id="56198" class="Symbol">(</a><a id="56199" href="Demos.HSP.html#56199" class="Bound">Œ∑</a> <a id="56201" class="Symbol">:</a> <a id="56203" href="Demos.HSP.html#56061" class="Bound">X</a> <a id="56205" class="Symbol">‚Üí</a> <a id="56207" href="Demos.HSP.html#18916" class="Function Operator">ùïå[</a> <a id="56210" href="Demos.HSP.html#56074" class="Bound">ùë®</a> <a id="56212" href="Demos.HSP.html#18916" class="Function Operator">]</a><a id="56213" class="Symbol">)(</a><a id="56215" href="Demos.HSP.html#56215" class="Bound">p</a> <a id="56217" class="Symbol">:</a> <a id="56219" href="Demos.HSP.html#39263" class="Datatype">Term</a> <a id="56224" href="Demos.HSP.html#56061" class="Bound">X</a><a id="56225" class="Symbol">)</a> <a id="56227" class="Symbol">‚Üí</a> <a id="56229" href="Demos.HSP.html#42123" class="Function Operator">‚ü¶</a> <a id="56231" href="Demos.HSP.html#56215" class="Bound">p</a> <a id="56233" href="Demos.HSP.html#42123" class="Function Operator">‚üß</a> <a id="56235" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="56239" href="Demos.HSP.html#56199" class="Bound">Œ∑</a> <a id="56241" href="Relation.Binary.Bundles.html#1098" class="Function Operator">‚âà</a> <a id="56243" class="Symbol">(</a><a id="56244" href="Demos.HSP.html#55235" class="Function">free-lift</a><a id="56253" class="Symbol">{</a><a id="56254" class="Argument">ùë®</a> <a id="56256" class="Symbol">=</a> <a id="56258" href="Demos.HSP.html#56074" class="Bound">ùë®</a><a id="56259" class="Symbol">}</a> <a id="56261" href="Demos.HSP.html#56199" class="Bound">Œ∑</a><a id="56262" class="Symbol">)</a> <a id="56264" href="Demos.HSP.html#56215" class="Bound">p</a>
 <a id="56267" href="Demos.HSP.html#56179" class="Function">free-lift-interp</a> <a id="56284" href="Demos.HSP.html#56284" class="Bound">Œ∑</a> <a id="56286" class="Symbol">(</a><a id="56287" href="Demos.HSP.html#39303" class="InductiveConstructor">‚Ñä</a> <a id="56289" href="Demos.HSP.html#56289" class="Bound">x</a><a id="56290" class="Symbol">)</a>       <a id="56298" class="Symbol">=</a> <a id="56300" href="Relation.Binary.Structures.html#1568" class="Function">refl</a>
 <a id="56306" href="Demos.HSP.html#56179" class="Function">free-lift-interp</a> <a id="56323" href="Demos.HSP.html#56323" class="Bound">Œ∑</a> <a id="56325" class="Symbol">(</a><a id="56326" href="Demos.HSP.html#39319" class="InductiveConstructor">node</a> <a id="56331" href="Demos.HSP.html#56331" class="Bound">f</a> <a id="56333" href="Demos.HSP.html#56333" class="Bound">t</a><a id="56334" class="Symbol">)</a>  <a id="56337" class="Symbol">=</a> <a id="56339" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="56344" class="Symbol">(</a><a id="56345" href="Demos.HSP.html#18302" class="Field">Interp</a> <a id="56352" href="Demos.HSP.html#56074" class="Bound">ùë®</a><a id="56353" class="Symbol">)</a> <a id="56355" class="Symbol">(</a><a id="56356" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">‚â°.refl</a> <a id="56363" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="56365" class="Symbol">(</a><a id="56366" href="Demos.HSP.html#56179" class="Function">free-lift-interp</a> <a id="56383" href="Demos.HSP.html#56323" class="Bound">Œ∑</a><a id="56384" class="Symbol">)</a> <a id="56386" href="Function.Base.html#1031" class="Function Operator">‚àò</a> <a id="56388" href="Demos.HSP.html#56333" class="Bound">t</a><a id="56389" class="Symbol">)</a>
</pre>

#### <a id="the-relatively-free-algebra">The relatively free algebra</a>
Given an arbitrary class `ùí¶` of `ùëÜ`-algebras, we cannot expect that `ùëª X` belongs to `ùí¶`.
Indeed, there may be no free algebra in `ùí¶`.
Nonetheless, it is always possible to construct an algebra that is free for `ùí¶` and belongs to the class `S (P ùí¶`).
Such an algebra is called a *relatively free algebra over* `X` (relative to `ùí¶`).
There are several informal approaches to defining this algebra.
We now describe the approach on which our formal construction is based and then we present the formalization.

Let `ùîΩ[ X ]` denote the relatively free algebra over `X`.  We represent `ùîΩ[ X ]` as the quotient `ùëª X / ‚âà` where `x ‚âà y` if and only if `h x = h y` for every homomorphism `h` from `ùëª X` into a member of `ùí¶`.
More precisely, if `ùë® ‚àà ùí¶` and `h : hom (ùëª X) ùë®`, then `h` factors as `ùëª X ‚Üí HomIm h  ‚Üí ùë®` and `ùëª X / ker h ‚âÖ HomIm h ‚â§ ùë®`; that is, `ùëª X / ker h` is (isomorphic to) an algebra in `S ùí¶`. Letting

`‚âà := ‚ãÇ \{Œ∏ ‚àà Con(ùëª X) ‚à£ ùëª X / Œ∏ ‚àà S ùí¶\}`,

observe that `ùîΩ[ X ] := ùëª X / ‚âà` is a subdirect product of the algebras `ùëª X / ker h`
as `h` ranges over all homomorphisms from `ùëª X` to algebras in `ùí¶`.  Thus, `ùîΩ[ X ] ‚àà P (S ùí¶) ‚äÜ S (P ùí¶)`.
As we have seen, every map `œÅ : X ‚Üí ùïå[ ùë® ]` extends uniquely to a homomorphism `h : hom (ùëª X) ùë®` and `h`
factors through the natural projection `ùëª X ‚Üí ùîΩ[ X ]` (since `‚âà ‚äÜ ker h`) yielding a unique homomorphism from `ùîΩ[ X ]` to `ùë®` extending `œÅ`.

In [Agda][] we construct `ùîΩ[ X ]` as a homomorphic image of `ùëª X` in the following way.
First, given `X` we define `ùë™` as the product of pairs `(ùë®, œÅ)` of
algebras `ùë® ‚àà ùí¶` along with environments `œÅ : X ‚Üí ùïå[ ùë® ]`.
To do so, we contrive an index type for the product; each index is a triple `(ùë®, p, œÅ)` where `ùë®` is an algebra, `p` is proof of `ùë® ‚àà ùí¶`, and `œÅ : X ‚Üí ùïå[ ùë® ]` is an arbitrary environment.

<pre class="Agda">

<a id="58287" class="Keyword">module</a> <a id="FreeAlgebra"></a><a id="58294" href="Demos.HSP.html#58294" class="Module">FreeAlgebra</a> <a id="58306" class="Symbol">(</a><a id="58307" href="Demos.HSP.html#58307" class="Bound">ùí¶</a> <a id="58309" class="Symbol">:</a> <a id="58311" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="58316" class="Symbol">(</a><a id="58317" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="58325" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="58327" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a><a id="58329" class="Symbol">)</a> <a id="58331" href="Demos.HSP.html#7280" class="Generalizable">‚Ñì</a><a id="58332" class="Symbol">)</a> <a id="58334" class="Keyword">where</a>
 <a id="58341" class="Keyword">private</a> <a id="FreeAlgebra.c"></a><a id="58349" href="Demos.HSP.html#58349" class="Function">c</a> <a id="58351" class="Symbol">=</a> <a id="58353" href="Demos.HSP.html#58325" class="Bound">Œ±</a> <a id="58355" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="58357" href="Demos.HSP.html#58327" class="Bound">œÅ·µÉ</a> <a id="58360" class="Symbol">;</a> <a id="FreeAlgebra.Œπ"></a><a id="58362" href="Demos.HSP.html#58362" class="Function">Œπ</a> <a id="58364" class="Symbol">=</a> <a id="58366" href="Demos.HSP.html#34366" class="Function">ov</a> <a id="58369" href="Demos.HSP.html#58349" class="Function">c</a> <a id="58371" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="58373" href="Demos.HSP.html#58331" class="Bound">‚Ñì</a>
 <a id="FreeAlgebra.‚Ñë"></a><a id="58376" href="Demos.HSP.html#58376" class="Function">‚Ñë</a> <a id="58378" class="Symbol">:</a> <a id="58380" class="Symbol">{</a><a id="58381" href="Demos.HSP.html#58381" class="Bound">œá</a> <a id="58383" class="Symbol">:</a> <a id="58385" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="58390" class="Symbol">}</a> <a id="58392" class="Symbol">‚Üí</a> <a id="58394" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="58399" href="Demos.HSP.html#58381" class="Bound">œá</a> <a id="58401" class="Symbol">‚Üí</a> <a id="58403" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="58408" class="Symbol">(</a><a id="58409" href="Demos.HSP.html#58362" class="Function">Œπ</a> <a id="58411" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="58413" href="Demos.HSP.html#58381" class="Bound">œá</a><a id="58414" class="Symbol">)</a>
 <a id="58417" href="Demos.HSP.html#58376" class="Function">‚Ñë</a> <a id="58419" href="Demos.HSP.html#58419" class="Bound">X</a> <a id="58421" class="Symbol">=</a> <a id="58423" href="Data.Product.html#916" class="Function">Œ£[</a> <a id="58426" href="Demos.HSP.html#58426" class="Bound">ùë®</a> <a id="58428" href="Data.Product.html#916" class="Function">‚àà</a> <a id="58430" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="58438" href="Demos.HSP.html#58325" class="Bound">Œ±</a> <a id="58440" href="Demos.HSP.html#58327" class="Bound">œÅ·µÉ</a> <a id="58443" href="Data.Product.html#916" class="Function">]</a> <a id="58445" href="Demos.HSP.html#58426" class="Bound">ùë®</a> <a id="58447" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="58449" href="Demos.HSP.html#58307" class="Bound">ùí¶</a> <a id="58451" href="Data.Product.html#1167" class="Function Operator">√ó</a> <a id="58453" class="Symbol">(</a><a id="58454" href="Demos.HSP.html#58419" class="Bound">X</a> <a id="58456" class="Symbol">‚Üí</a> <a id="58458" href="Demos.HSP.html#18916" class="Function Operator">ùïå[</a> <a id="58461" href="Demos.HSP.html#58426" class="Bound">ùë®</a> <a id="58463" href="Demos.HSP.html#18916" class="Function Operator">]</a><a id="58464" class="Symbol">)</a>

 <a id="FreeAlgebra.ùë™"></a><a id="58468" href="Demos.HSP.html#58468" class="Function">ùë™</a> <a id="58470" class="Symbol">:</a> <a id="58472" class="Symbol">{</a><a id="58473" href="Demos.HSP.html#58473" class="Bound">œá</a> <a id="58475" class="Symbol">:</a> <a id="58477" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="58482" class="Symbol">}</a> <a id="58484" class="Symbol">‚Üí</a> <a id="58486" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="58491" href="Demos.HSP.html#58473" class="Bound">œá</a> <a id="58493" class="Symbol">‚Üí</a> <a id="58495" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="58503" class="Symbol">(</a><a id="58504" href="Demos.HSP.html#58362" class="Function">Œπ</a> <a id="58506" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="58508" href="Demos.HSP.html#58473" class="Bound">œá</a><a id="58509" class="Symbol">)(</a><a id="58511" href="Demos.HSP.html#58362" class="Function">Œπ</a> <a id="58513" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="58515" href="Demos.HSP.html#58473" class="Bound">œá</a><a id="58516" class="Symbol">)</a>
 <a id="58519" href="Demos.HSP.html#58468" class="Function">ùë™</a> <a id="58521" href="Demos.HSP.html#58521" class="Bound">X</a> <a id="58523" class="Symbol">=</a> <a id="58525" href="Demos.HSP.html#23793" class="Function">‚®Ö</a> <a id="58527" class="Symbol">{</a><a id="58528" class="Argument">I</a> <a id="58530" class="Symbol">=</a> <a id="58532" href="Demos.HSP.html#58376" class="Function">‚Ñë</a> <a id="58534" href="Demos.HSP.html#58521" class="Bound">X</a><a id="58535" class="Symbol">}</a> <a id="58537" href="Demos.HSP.html#7856" class="Function Operator">‚à£_‚à£</a>

</pre>
We then define `ùîΩ[ X ]` to be the image of a homomorphism from `ùëª X` to `ùë™` as follows.

<pre class="Agda">

 <a id="FreeAlgebra.homC"></a><a id="58657" href="Demos.HSP.html#58657" class="Function">homC</a> <a id="58662" class="Symbol">:</a> <a id="58664" class="Symbol">(</a><a id="58665" href="Demos.HSP.html#58665" class="Bound">X</a> <a id="58667" class="Symbol">:</a> <a id="58669" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="58674" href="Demos.HSP.html#7278" class="Generalizable">œá</a><a id="58675" class="Symbol">)</a> <a id="58677" class="Symbol">‚Üí</a> <a id="58679" href="Demos.HSP.html#26168" class="Function">hom</a> <a id="58683" class="Symbol">(</a><a id="58684" href="Demos.HSP.html#40889" class="Function">ùëª</a> <a id="58686" href="Demos.HSP.html#58665" class="Bound">X</a><a id="58687" class="Symbol">)</a> <a id="58689" class="Symbol">(</a><a id="58690" href="Demos.HSP.html#58468" class="Function">ùë™</a> <a id="58692" href="Demos.HSP.html#58665" class="Bound">X</a><a id="58693" class="Symbol">)</a>
 <a id="58696" href="Demos.HSP.html#58657" class="Function">homC</a> <a id="58701" href="Demos.HSP.html#58701" class="Bound">X</a> <a id="58703" class="Symbol">=</a> <a id="58705" href="Demos.HSP.html#31532" class="Function">‚®Ö-hom-co</a> <a id="58714" class="Symbol">_</a> <a id="58716" class="Symbol">(Œª</a> <a id="58719" href="Demos.HSP.html#58719" class="Bound">i</a> <a id="58721" class="Symbol">‚Üí</a> <a id="58723" href="Demos.HSP.html#55703" class="Function">lift-hom</a> <a id="58732" class="Symbol">(</a><a id="58733" href="Demos.HSP.html#6261" class="Field">snd</a> <a id="58737" href="Demos.HSP.html#7893" class="Function Operator">‚à•</a> <a id="58739" href="Demos.HSP.html#58719" class="Bound">i</a> <a id="58741" href="Demos.HSP.html#7893" class="Function Operator">‚à•</a><a id="58742" class="Symbol">))</a>

 <a id="FreeAlgebra.ùîΩ[_]"></a><a id="58747" href="Demos.HSP.html#58747" class="Function Operator">ùîΩ[_]</a> <a id="58752" class="Symbol">:</a> <a id="58754" class="Symbol">{</a><a id="58755" href="Demos.HSP.html#58755" class="Bound">œá</a> <a id="58757" class="Symbol">:</a> <a id="58759" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="58764" class="Symbol">}</a> <a id="58766" class="Symbol">‚Üí</a> <a id="58768" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="58773" href="Demos.HSP.html#58755" class="Bound">œá</a> <a id="58775" class="Symbol">‚Üí</a> <a id="58777" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="58785" class="Symbol">(</a><a id="58786" href="Demos.HSP.html#34366" class="Function">ov</a> <a id="58789" href="Demos.HSP.html#58755" class="Bound">œá</a><a id="58790" class="Symbol">)</a> <a id="58792" class="Symbol">(</a><a id="58793" href="Demos.HSP.html#58362" class="Function">Œπ</a> <a id="58795" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="58797" href="Demos.HSP.html#58755" class="Bound">œá</a><a id="58798" class="Symbol">)</a>
 <a id="58801" href="Demos.HSP.html#58747" class="Function Operator">ùîΩ[</a> <a id="58804" href="Demos.HSP.html#58804" class="Bound">X</a> <a id="58806" href="Demos.HSP.html#58747" class="Function Operator">]</a> <a id="58808" class="Symbol">=</a> <a id="58810" href="Demos.HSP.html#35462" class="Function">HomIm</a> <a id="58816" class="Symbol">(</a><a id="58817" href="Demos.HSP.html#58657" class="Function">homC</a> <a id="58822" href="Demos.HSP.html#58804" class="Bound">X</a><a id="58823" class="Symbol">)</a>

</pre>
Observe that if the identity `p ‚âà q` holds in all `ùë® ‚àà ùí¶` (for all environments), then `p ‚âà q` holds in `ùîΩ[ X ]`; equivalently, the pair `(p , q)` belongs to the kernel of the natural homomorphism from `ùëª X` onto `ùîΩ[ X ]`. This natural epimorphism from `ùëª X` onto `ùîΩ[ X ]`
is defined as follows.

<pre class="Agda">

<a id="59148" class="Keyword">module</a> <a id="FreeHom"></a><a id="59155" href="Demos.HSP.html#59155" class="Module">FreeHom</a> <a id="59163" class="Symbol">{</a><a id="59164" href="Demos.HSP.html#59164" class="Bound">ùí¶</a> <a id="59166" class="Symbol">:</a> <a id="59168" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="59172" class="Symbol">(</a><a id="59173" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="59181" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="59183" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a><a id="59185" class="Symbol">)</a> <a id="59187" class="Symbol">(</a><a id="59188" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="59190" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="59192" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a> <a id="59195" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="59197" href="Demos.HSP.html#34366" class="Function">ov</a> <a id="59200" href="Demos.HSP.html#7280" class="Generalizable">‚Ñì</a><a id="59201" class="Symbol">)}</a> <a id="59204" class="Keyword">where</a>
 <a id="59211" class="Keyword">private</a> <a id="FreeHom.c"></a><a id="59219" href="Demos.HSP.html#59219" class="Function">c</a> <a id="59221" class="Symbol">=</a> <a id="59223" href="Demos.HSP.html#59181" class="Bound">Œ±</a> <a id="59225" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="59227" href="Demos.HSP.html#59183" class="Bound">œÅ·µÉ</a> <a id="59230" class="Symbol">;</a> <a id="FreeHom.Œπ"></a><a id="59232" href="Demos.HSP.html#59232" class="Function">Œπ</a> <a id="59234" class="Symbol">=</a> <a id="59236" href="Demos.HSP.html#34366" class="Function">ov</a> <a id="59239" href="Demos.HSP.html#59219" class="Function">c</a> <a id="59241" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="59243" href="Demos.HSP.html#59200" class="Bound">‚Ñì</a>
 <a id="59246" class="Keyword">open</a> <a id="59251" href="Demos.HSP.html#58294" class="Module">FreeAlgebra</a> <a id="59263" href="Demos.HSP.html#59164" class="Bound">ùí¶</a> <a id="59265" class="Keyword">using</a> <a id="59271" class="Symbol">(</a> <a id="59273" href="Demos.HSP.html#58747" class="Function Operator">ùîΩ[_]</a> <a id="59278" class="Symbol">;</a> <a id="59280" href="Demos.HSP.html#58657" class="Function">homC</a> <a id="59285" class="Symbol">)</a>

 <a id="FreeHom.epiF[_]"></a><a id="59289" href="Demos.HSP.html#59289" class="Function Operator">epiF[_]</a> <a id="59297" class="Symbol">:</a> <a id="59299" class="Symbol">(</a><a id="59300" href="Demos.HSP.html#59300" class="Bound">X</a> <a id="59302" class="Symbol">:</a> <a id="59304" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="59309" href="Demos.HSP.html#59219" class="Function">c</a><a id="59310" class="Symbol">)</a> <a id="59312" class="Symbol">‚Üí</a> <a id="59314" href="Demos.HSP.html#27224" class="Function">epi</a> <a id="59318" class="Symbol">(</a><a id="59319" href="Demos.HSP.html#40889" class="Function">ùëª</a> <a id="59321" href="Demos.HSP.html#59300" class="Bound">X</a><a id="59322" class="Symbol">)</a> <a id="59324" href="Demos.HSP.html#58747" class="Function Operator">ùîΩ[</a> <a id="59327" href="Demos.HSP.html#59300" class="Bound">X</a> <a id="59329" href="Demos.HSP.html#58747" class="Function Operator">]</a>
 <a id="59332" href="Demos.HSP.html#59289" class="Function Operator">epiF[</a> <a id="59338" href="Demos.HSP.html#59338" class="Bound">X</a> <a id="59340" href="Demos.HSP.html#59289" class="Function Operator">]</a> <a id="59342" class="Symbol">=</a> <a id="59344" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="59346" href="Demos.HSP.html#36081" class="Function">toHomIm</a> <a id="59354" class="Symbol">(</a><a id="59355" href="Demos.HSP.html#58657" class="Function">homC</a> <a id="59360" href="Demos.HSP.html#59338" class="Bound">X</a><a id="59361" class="Symbol">)</a> <a id="59363" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="59365" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="59367" class="Keyword">record</a>  <a id="59375" class="Symbol">{</a> <a id="59377" href="Demos.HSP.html#27125" class="Field">isHom</a> <a id="59383" class="Symbol">=</a> <a id="59385" href="Demos.HSP.html#7893" class="Function Operator">‚à•</a> <a id="59387" href="Demos.HSP.html#36081" class="Function">toHomIm</a> <a id="59395" class="Symbol">(</a><a id="59396" href="Demos.HSP.html#58657" class="Function">homC</a> <a id="59401" href="Demos.HSP.html#59338" class="Bound">X</a><a id="59402" class="Symbol">)</a> <a id="59404" href="Demos.HSP.html#7893" class="Function Operator">‚à•</a>
                                            <a id="59450" class="Symbol">;</a> <a id="59452" href="Demos.HSP.html#27150" class="Field">isSurjective</a> <a id="59465" class="Symbol">=</a> <a id="59467" href="Demos.HSP.html#13923" class="Function">toIm-surj</a> <a id="59477" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="59479" href="Demos.HSP.html#58657" class="Function">homC</a> <a id="59484" href="Demos.HSP.html#59338" class="Bound">X</a> <a id="59486" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="59488" class="Symbol">}</a>

 <a id="FreeHom.homF[_]"></a><a id="59492" href="Demos.HSP.html#59492" class="Function Operator">homF[_]</a> <a id="59500" class="Symbol">:</a> <a id="59502" class="Symbol">(</a><a id="59503" href="Demos.HSP.html#59503" class="Bound">X</a> <a id="59505" class="Symbol">:</a> <a id="59507" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="59512" href="Demos.HSP.html#59219" class="Function">c</a><a id="59513" class="Symbol">)</a> <a id="59515" class="Symbol">‚Üí</a> <a id="59517" href="Demos.HSP.html#26168" class="Function">hom</a> <a id="59521" class="Symbol">(</a><a id="59522" href="Demos.HSP.html#40889" class="Function">ùëª</a> <a id="59524" href="Demos.HSP.html#59503" class="Bound">X</a><a id="59525" class="Symbol">)</a> <a id="59527" href="Demos.HSP.html#58747" class="Function Operator">ùîΩ[</a> <a id="59530" href="Demos.HSP.html#59503" class="Bound">X</a> <a id="59532" href="Demos.HSP.html#58747" class="Function Operator">]</a>
 <a id="59535" href="Demos.HSP.html#59492" class="Function Operator">homF[</a> <a id="59541" href="Demos.HSP.html#59541" class="Bound">X</a> <a id="59543" href="Demos.HSP.html#59492" class="Function Operator">]</a> <a id="59545" class="Symbol">=</a> <a id="59547" href="Demos.HSP.html#27182" class="Function">IsEpi.HomReduct</a> <a id="59563" href="Demos.HSP.html#7893" class="Function Operator">‚à•</a> <a id="59565" href="Demos.HSP.html#59289" class="Function Operator">epiF[</a> <a id="59571" href="Demos.HSP.html#59541" class="Bound">X</a> <a id="59573" href="Demos.HSP.html#59289" class="Function Operator">]</a> <a id="59575" href="Demos.HSP.html#7893" class="Function Operator">‚à•</a>

</pre>

Before formalizing the HSP theorem in the next section, we need to prove the following important property of the relatively free algebra: For every algebra `ùë®`, if `ùë® ‚ä® Th (V ùí¶)`,
then there exists an epimorphism from `ùîΩ[ A ]` onto `ùë®`, where `A` denotes the carrier of `ùë®`.

<pre class="Agda">

<a id="59880" class="Keyword">module</a> <a id="59887" href="Demos.HSP.html#59887" class="Module">_</a> <a id="59889" class="Symbol">{</a><a id="59890" href="Demos.HSP.html#59890" class="Bound">ùë®</a> <a id="59892" class="Symbol">:</a> <a id="59894" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="59902" class="Symbol">(</a><a id="59903" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="59905" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="59907" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a> <a id="59910" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="59912" href="Demos.HSP.html#7280" class="Generalizable">‚Ñì</a><a id="59913" class="Symbol">)(</a><a id="59915" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="59917" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="59919" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a> <a id="59922" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="59924" href="Demos.HSP.html#7280" class="Generalizable">‚Ñì</a><a id="59925" class="Symbol">)}{</a><a id="59928" href="Demos.HSP.html#59928" class="Bound">ùí¶</a> <a id="59930" class="Symbol">:</a> <a id="59932" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="59936" class="Symbol">(</a><a id="59937" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="59945" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="59947" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a><a id="59949" class="Symbol">)(</a><a id="59951" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="59953" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="59955" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a> <a id="59958" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="59960" href="Demos.HSP.html#34366" class="Function">ov</a> <a id="59963" href="Demos.HSP.html#7280" class="Generalizable">‚Ñì</a><a id="59964" class="Symbol">)}</a> <a id="59967" class="Keyword">where</a>
 <a id="59974" class="Keyword">private</a> <a id="59982" href="Demos.HSP.html#59982" class="Function">c</a> <a id="59984" class="Symbol">=</a> <a id="59986" href="Demos.HSP.html#59903" class="Bound">Œ±</a> <a id="59988" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="59990" href="Demos.HSP.html#59907" class="Bound">œÅ·µÉ</a> <a id="59993" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="59995" href="Demos.HSP.html#59912" class="Bound">‚Ñì</a> <a id="59997" class="Symbol">;</a> <a id="59999" href="Demos.HSP.html#59999" class="Function">Œπ</a> <a id="60001" class="Symbol">=</a> <a id="60003" href="Demos.HSP.html#34366" class="Function">ov</a> <a id="60006" href="Demos.HSP.html#59982" class="Function">c</a>
 <a id="60009" class="Keyword">open</a> <a id="60014" href="Demos.HSP.html#58294" class="Module">FreeAlgebra</a> <a id="60026" href="Demos.HSP.html#59928" class="Bound">ùí¶</a> <a id="60028" class="Keyword">using</a> <a id="60034" class="Symbol">(</a> <a id="60036" href="Demos.HSP.html#58747" class="Function Operator">ùîΩ[_]</a> <a id="60041" class="Symbol">;</a> <a id="60043" href="Demos.HSP.html#58468" class="Function">ùë™</a> <a id="60045" class="Symbol">)</a>
 <a id="60048" class="Keyword">open</a> <a id="60053" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="60060" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="60063" href="Demos.HSP.html#59890" class="Bound">ùë®</a> <a id="60065" href="Demos.HSP.html#18862" class="Function Operator">]</a> <a id="60067" class="Keyword">using</a> <a id="60073" class="Symbol">(</a> <a id="60075" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="60080" class="Symbol">;</a> <a id="60082" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="60086" class="Symbol">;</a> <a id="60088" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="60094" class="Symbol">)</a> <a id="60096" class="Keyword">renaming</a> <a id="60105" class="Symbol">(</a> <a id="60107" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="60115" class="Symbol">to</a> <a id="60118" class="Field">A</a> <a id="60120" class="Symbol">;</a> <a id="60122" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_‚âà_</a> <a id="60126" class="Symbol">to</a> <a id="60129" class="Field Operator">_‚âà·¥¨_</a> <a id="60134" class="Symbol">)</a>

 <a id="60138" href="Demos.HSP.html#60138" class="Function">F-ModTh-epi</a> <a id="60150" class="Symbol">:</a> <a id="60152" href="Demos.HSP.html#59890" class="Bound">ùë®</a> <a id="60154" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="60156" href="Demos.HSP.html#48049" class="Function">Mod</a> <a id="60160" class="Symbol">(</a><a id="60161" href="Demos.HSP.html#47951" class="Function">Th</a> <a id="60164" href="Demos.HSP.html#59928" class="Bound">ùí¶</a><a id="60165" class="Symbol">)</a> <a id="60167" class="Symbol">‚Üí</a> <a id="60169" href="Demos.HSP.html#27224" class="Function">epi</a> <a id="60173" href="Demos.HSP.html#58747" class="Function Operator">ùîΩ[</a> <a id="60176" href="Demos.HSP.html#60118" class="Function">A</a> <a id="60178" href="Demos.HSP.html#58747" class="Function Operator">]</a>  <a id="60181" href="Demos.HSP.html#59890" class="Bound">ùë®</a>
 <a id="60184" href="Demos.HSP.html#60138" class="Function">F-ModTh-epi</a> <a id="60196" href="Demos.HSP.html#60196" class="Bound">A‚ààModThK</a> <a id="60205" class="Symbol">=</a> <a id="60207" href="Demos.HSP.html#60226" class="Function">œÜ</a> <a id="60209" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="60211" href="Demos.HSP.html#60974" class="Function">isEpi</a> <a id="60217" class="Keyword">where</a>

  <a id="60226" href="Demos.HSP.html#60226" class="Function">œÜ</a> <a id="60228" class="Symbol">:</a> <a id="60230" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="60233" href="Demos.HSP.html#58747" class="Function Operator">ùîΩ[</a> <a id="60236" href="Demos.HSP.html#60118" class="Function">A</a> <a id="60238" href="Demos.HSP.html#58747" class="Function Operator">]</a> <a id="60240" href="Demos.HSP.html#18862" class="Function Operator">]</a> <a id="60242" href="Demos.HSP.html#6322" class="Record Operator">‚ü∂</a> <a id="60244" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="60247" href="Demos.HSP.html#59890" class="Bound">ùë®</a> <a id="60249" href="Demos.HSP.html#18862" class="Function Operator">]</a>
  <a id="60253" href="Demos.HSP.html#6424" class="Field Operator">_‚ü®$‚ü©_</a> <a id="60259" href="Demos.HSP.html#60226" class="Function">œÜ</a>            <a id="60272" class="Symbol">=</a> <a id="60274" href="Demos.HSP.html#55235" class="Function">free-lift</a><a id="60283" class="Symbol">{</a><a id="60284" class="Argument">ùë®</a> <a id="60286" class="Symbol">=</a> <a id="60288" href="Demos.HSP.html#59890" class="Bound">ùë®</a><a id="60289" class="Symbol">}</a> <a id="60291" href="Function.Base.html#615" class="Function">id</a>
  <a id="60296" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="60301" href="Demos.HSP.html#60226" class="Function">œÜ</a> <a id="60303" class="Symbol">{</a><a id="60304" href="Demos.HSP.html#60304" class="Bound">p</a><a id="60305" class="Symbol">}</a> <a id="60307" class="Symbol">{</a><a id="60308" href="Demos.HSP.html#60308" class="Bound">q</a><a id="60309" class="Symbol">}</a> <a id="60311" href="Demos.HSP.html#60311" class="Bound">pq</a>  <a id="60315" class="Symbol">=</a> <a id="60317" href="Demos.HSP.html#60645" class="Function">Goal</a>
   <a id="60325" class="Keyword">where</a>
   <a id="60334" href="Demos.HSP.html#60334" class="Function">lift-pq</a> <a id="60342" class="Symbol">:</a> <a id="60344" class="Symbol">(</a><a id="60345" href="Demos.HSP.html#60304" class="Bound">p</a> <a id="60347" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="60349" href="Demos.HSP.html#60308" class="Bound">q</a><a id="60350" class="Symbol">)</a> <a id="60352" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="60354" href="Demos.HSP.html#47951" class="Function">Th</a> <a id="60357" href="Demos.HSP.html#59928" class="Bound">ùí¶</a>
   <a id="60362" href="Demos.HSP.html#60334" class="Function">lift-pq</a> <a id="60370" href="Demos.HSP.html#60370" class="Bound">ùë©</a> <a id="60372" href="Demos.HSP.html#60372" class="Bound">x</a> <a id="60374" href="Demos.HSP.html#60374" class="Bound">œÅ</a> <a id="60376" class="Symbol">=</a> <a id="60378" href="Relation.Binary.Reasoning.Base.Single.html#1916" class="Function Operator">begin</a>
    <a id="60388" href="Demos.HSP.html#42123" class="Function Operator">‚ü¶</a> <a id="60390" href="Demos.HSP.html#60304" class="Bound">p</a> <a id="60392" href="Demos.HSP.html#42123" class="Function Operator">‚üß</a> <a id="60394" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="60398" href="Demos.HSP.html#60374" class="Bound">œÅ</a>    <a id="60403" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a> <a id="60406" href="Demos.HSP.html#56179" class="Function">free-lift-interp</a> <a id="60423" class="Symbol">{</a><a id="60424" class="Argument">ùë®</a> <a id="60426" class="Symbol">=</a> <a id="60428" href="Demos.HSP.html#60370" class="Bound">ùë©</a><a id="60429" class="Symbol">}</a> <a id="60431" href="Demos.HSP.html#60374" class="Bound">œÅ</a> <a id="60433" href="Demos.HSP.html#60304" class="Bound">p</a>  <a id="60436" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
    <a id="60442" href="Demos.HSP.html#55235" class="Function">free-lift</a> <a id="60452" href="Demos.HSP.html#60374" class="Bound">œÅ</a> <a id="60454" href="Demos.HSP.html#60304" class="Bound">p</a>  <a id="60457" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a> <a id="60460" href="Demos.HSP.html#60311" class="Bound">pq</a> <a id="60463" class="Symbol">(</a><a id="60464" href="Demos.HSP.html#60370" class="Bound">ùë©</a> <a id="60466" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="60468" href="Demos.HSP.html#60372" class="Bound">x</a> <a id="60470" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="60472" href="Demos.HSP.html#60374" class="Bound">œÅ</a><a id="60473" class="Symbol">)</a>                <a id="60490" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
    <a id="60496" href="Demos.HSP.html#55235" class="Function">free-lift</a> <a id="60506" href="Demos.HSP.html#60374" class="Bound">œÅ</a> <a id="60508" href="Demos.HSP.html#60308" class="Bound">q</a>  <a id="60511" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚âàÀò‚ü®</a> <a id="60515" href="Demos.HSP.html#56179" class="Function">free-lift-interp</a><a id="60531" class="Symbol">{</a><a id="60532" class="Argument">ùë®</a> <a id="60534" class="Symbol">=</a> <a id="60536" href="Demos.HSP.html#60370" class="Bound">ùë©</a><a id="60537" class="Symbol">}</a> <a id="60539" href="Demos.HSP.html#60374" class="Bound">œÅ</a> <a id="60541" href="Demos.HSP.html#60308" class="Bound">q</a>  <a id="60544" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚ü©</a>
    <a id="60550" href="Demos.HSP.html#42123" class="Function Operator">‚ü¶</a> <a id="60552" href="Demos.HSP.html#60308" class="Bound">q</a> <a id="60554" href="Demos.HSP.html#42123" class="Function Operator">‚üß</a> <a id="60556" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="60560" href="Demos.HSP.html#60374" class="Bound">œÅ</a>    <a id="60565" href="Relation.Binary.Reasoning.Base.Single.html#2555" class="Function Operator">‚àé</a>
     <a id="60572" class="Keyword">where</a> <a id="60578" class="Keyword">open</a> <a id="60583" href="Relation.Binary.Reasoning.Setoid.html" class="Module">SetoidReasoning</a> <a id="60599" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="60602" href="Demos.HSP.html#60370" class="Bound">ùë©</a> <a id="60604" href="Demos.HSP.html#18862" class="Function Operator">]</a> <a id="60606" class="Symbol">;</a> <a id="60608" class="Keyword">open</a> <a id="60613" href="Demos.HSP.html#41559" class="Module">Environment</a> <a id="60625" href="Demos.HSP.html#60370" class="Bound">ùë©</a> <a id="60627" class="Keyword">using</a> <a id="60633" class="Symbol">(</a> <a id="60635" href="Demos.HSP.html#42123" class="Function Operator">‚ü¶_‚üß</a> <a id="60639" class="Symbol">)</a>

   <a id="60645" href="Demos.HSP.html#60645" class="Function">Goal</a> <a id="60650" class="Symbol">:</a> <a id="60652" href="Demos.HSP.html#55235" class="Function">free-lift</a> <a id="60662" href="Function.Base.html#615" class="Function">id</a> <a id="60665" href="Demos.HSP.html#60304" class="Bound">p</a> <a id="60667" href="Demos.HSP.html#60129" class="Function Operator">‚âà·¥¨</a> <a id="60670" href="Demos.HSP.html#55235" class="Function">free-lift</a> <a id="60680" href="Function.Base.html#615" class="Function">id</a> <a id="60683" href="Demos.HSP.html#60308" class="Bound">q</a>
   <a id="60688" href="Demos.HSP.html#60645" class="Function">Goal</a> <a id="60693" class="Symbol">=</a> <a id="60695" href="Relation.Binary.Reasoning.Base.Single.html#1916" class="Function Operator">begin</a>
    <a id="60705" href="Demos.HSP.html#55235" class="Function">free-lift</a> <a id="60715" href="Function.Base.html#615" class="Function">id</a> <a id="60718" href="Demos.HSP.html#60304" class="Bound">p</a>  <a id="60721" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚âàÀò‚ü®</a> <a id="60725" href="Demos.HSP.html#56179" class="Function">free-lift-interp</a> <a id="60742" class="Symbol">{</a><a id="60743" class="Argument">ùë®</a> <a id="60745" class="Symbol">=</a> <a id="60747" href="Demos.HSP.html#59890" class="Bound">ùë®</a><a id="60748" class="Symbol">}</a> <a id="60750" href="Function.Base.html#615" class="Function">id</a> <a id="60753" href="Demos.HSP.html#60304" class="Bound">p</a>   <a id="60757" href="Relation.Binary.Reasoning.Setoid.html#1153" class="Function">‚ü©</a>
    <a id="60763" href="Demos.HSP.html#42123" class="Function Operator">‚ü¶</a> <a id="60765" href="Demos.HSP.html#60304" class="Bound">p</a> <a id="60767" href="Demos.HSP.html#42123" class="Function Operator">‚üß</a> <a id="60769" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="60773" href="Function.Base.html#615" class="Function">id</a>    <a id="60779" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a> <a id="60782" href="Demos.HSP.html#60196" class="Bound">A‚ààModThK</a> <a id="60791" class="Symbol">{</a><a id="60792" class="Argument">p</a> <a id="60794" class="Symbol">=</a> <a id="60796" href="Demos.HSP.html#60304" class="Bound">p</a><a id="60797" class="Symbol">}</a> <a id="60799" class="Symbol">{</a><a id="60800" href="Demos.HSP.html#60308" class="Bound">q</a><a id="60801" class="Symbol">}</a> <a id="60803" href="Demos.HSP.html#60334" class="Function">lift-pq</a> <a id="60811" href="Function.Base.html#615" class="Function">id</a>  <a id="60815" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
    <a id="60821" href="Demos.HSP.html#42123" class="Function Operator">‚ü¶</a> <a id="60823" href="Demos.HSP.html#60308" class="Bound">q</a> <a id="60825" href="Demos.HSP.html#42123" class="Function Operator">‚üß</a> <a id="60827" href="Demos.HSP.html#6424" class="Field Operator">‚ü®$‚ü©</a> <a id="60831" href="Function.Base.html#615" class="Function">id</a>    <a id="60837" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚âà‚ü®</a> <a id="60840" href="Demos.HSP.html#56179" class="Function">free-lift-interp</a> <a id="60857" class="Symbol">{</a><a id="60858" class="Argument">ùë®</a> <a id="60860" class="Symbol">=</a> <a id="60862" href="Demos.HSP.html#59890" class="Bound">ùë®</a><a id="60863" class="Symbol">}</a> <a id="60865" href="Function.Base.html#615" class="Function">id</a> <a id="60868" href="Demos.HSP.html#60308" class="Bound">q</a>    <a id="60873" href="Relation.Binary.Reasoning.Setoid.html#1052" class="Function">‚ü©</a>
    <a id="60879" href="Demos.HSP.html#55235" class="Function">free-lift</a> <a id="60889" href="Function.Base.html#615" class="Function">id</a> <a id="60892" href="Demos.HSP.html#60308" class="Bound">q</a>  <a id="60895" href="Relation.Binary.Reasoning.Base.Single.html#2555" class="Function Operator">‚àé</a>
     <a id="60902" class="Keyword">where</a> <a id="60908" class="Keyword">open</a> <a id="60913" href="Relation.Binary.Reasoning.Setoid.html" class="Module">SetoidReasoning</a> <a id="60929" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="60932" href="Demos.HSP.html#59890" class="Bound">ùë®</a> <a id="60934" href="Demos.HSP.html#18862" class="Function Operator">]</a> <a id="60936" class="Symbol">;</a> <a id="60938" class="Keyword">open</a> <a id="60943" href="Demos.HSP.html#41559" class="Module">Environment</a> <a id="60955" href="Demos.HSP.html#59890" class="Bound">ùë®</a> <a id="60957" class="Keyword">using</a> <a id="60963" class="Symbol">(</a> <a id="60965" href="Demos.HSP.html#42123" class="Function Operator">‚ü¶_‚üß</a> <a id="60969" class="Symbol">)</a>

  <a id="60974" href="Demos.HSP.html#60974" class="Function">isEpi</a> <a id="60980" class="Symbol">:</a> <a id="60982" href="Demos.HSP.html#27054" class="Record">IsEpi</a> <a id="60988" href="Demos.HSP.html#58747" class="Function Operator">ùîΩ[</a> <a id="60991" href="Demos.HSP.html#60118" class="Function">A</a> <a id="60993" href="Demos.HSP.html#58747" class="Function Operator">]</a> <a id="60995" href="Demos.HSP.html#59890" class="Bound">ùë®</a> <a id="60997" href="Demos.HSP.html#60226" class="Function">œÜ</a>
  <a id="61001" href="Demos.HSP.html#60974" class="Function">isEpi</a> <a id="61007" class="Symbol">=</a> <a id="61009" class="Keyword">record</a> <a id="61016" class="Symbol">{</a> <a id="61018" href="Demos.HSP.html#27125" class="Field">isHom</a> <a id="61024" class="Symbol">=</a> <a id="61026" href="Demos.HSP.html#26115" class="InductiveConstructor">mkhom</a> <a id="61032" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="61037" class="Symbol">;</a> <a id="61039" href="Demos.HSP.html#27150" class="Field">isSurjective</a> <a id="61052" class="Symbol">=</a> <a id="61054" href="Demos.HSP.html#10381" class="InductiveConstructor">eq</a> <a id="61057" class="Symbol">(</a><a id="61058" href="Demos.HSP.html#39303" class="InductiveConstructor">‚Ñä</a> <a id="61060" class="Symbol">_)</a> <a id="61063" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="61068" class="Symbol">}</a>

 <a id="61072" href="Demos.HSP.html#61072" class="Function">F-ModThV-epi</a> <a id="61085" class="Symbol">:</a> <a id="61087" href="Demos.HSP.html#59890" class="Bound">ùë®</a> <a id="61089" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="61091" href="Demos.HSP.html#48049" class="Function">Mod</a> <a id="61095" class="Symbol">(</a><a id="61096" href="Demos.HSP.html#47951" class="Function">Th</a> <a id="61099" class="Symbol">(</a><a id="61100" href="Demos.HSP.html#52418" class="Function">V</a> <a id="61102" href="Demos.HSP.html#59912" class="Bound">‚Ñì</a> <a id="61104" href="Demos.HSP.html#59999" class="Function">Œπ</a> <a id="61106" href="Demos.HSP.html#59928" class="Bound">ùí¶</a><a id="61107" class="Symbol">))</a> <a id="61110" class="Symbol">‚Üí</a> <a id="61112" href="Demos.HSP.html#27224" class="Function">epi</a> <a id="61116" href="Demos.HSP.html#58747" class="Function Operator">ùîΩ[</a> <a id="61119" href="Demos.HSP.html#60118" class="Function">A</a> <a id="61121" href="Demos.HSP.html#58747" class="Function Operator">]</a>  <a id="61124" href="Demos.HSP.html#59890" class="Bound">ùë®</a>
 <a id="61127" href="Demos.HSP.html#61072" class="Function">F-ModThV-epi</a> <a id="61140" href="Demos.HSP.html#61140" class="Bound">A‚ààModThVK</a> <a id="61150" class="Symbol">=</a> <a id="61152" href="Demos.HSP.html#60138" class="Function">F-ModTh-epi</a> <a id="61164" class="Symbol">Œª</a> <a id="61166" class="Symbol">{</a><a id="61167" href="Demos.HSP.html#61167" class="Bound">p</a><a id="61168" class="Symbol">}{</a><a id="61170" href="Demos.HSP.html#61170" class="Bound">q</a><a id="61171" class="Symbol">}</a> <a id="61173" class="Symbol">‚Üí</a> <a id="61175" href="Demos.HSP.html#61197" class="Function">Goal</a> <a id="61180" class="Symbol">{</a><a id="61181" href="Demos.HSP.html#61167" class="Bound">p</a><a id="61182" class="Symbol">}{</a><a id="61184" href="Demos.HSP.html#61170" class="Bound">q</a><a id="61185" class="Symbol">}</a>
  <a id="61189" class="Keyword">where</a>
  <a id="61197" href="Demos.HSP.html#61197" class="Function">Goal</a> <a id="61202" class="Symbol">:</a> <a id="61204" href="Demos.HSP.html#59890" class="Bound">ùë®</a> <a id="61206" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="61208" href="Demos.HSP.html#48049" class="Function">Mod</a> <a id="61212" class="Symbol">(</a><a id="61213" href="Demos.HSP.html#47951" class="Function">Th</a> <a id="61216" href="Demos.HSP.html#59928" class="Bound">ùí¶</a><a id="61217" class="Symbol">)</a>
  <a id="61221" href="Demos.HSP.html#61197" class="Function">Goal</a> <a id="61226" class="Symbol">{</a><a id="61227" href="Demos.HSP.html#61227" class="Bound">p</a><a id="61228" class="Symbol">}{</a><a id="61230" href="Demos.HSP.html#61230" class="Bound">q</a><a id="61231" class="Symbol">}</a> <a id="61233" href="Demos.HSP.html#61233" class="Bound">x</a> <a id="61235" href="Demos.HSP.html#61235" class="Bound">œÅ</a> <a id="61237" class="Symbol">=</a> <a id="61239" href="Demos.HSP.html#61140" class="Bound">A‚ààModThVK</a><a id="61248" class="Symbol">{</a><a id="61249" href="Demos.HSP.html#61227" class="Bound">p</a><a id="61250" class="Symbol">}{</a><a id="61252" href="Demos.HSP.html#61230" class="Bound">q</a><a id="61253" class="Symbol">}</a> <a id="61255" class="Symbol">(</a><a id="61256" href="Demos.HSP.html#54153" class="Function">V-id1</a> <a id="61262" href="Demos.HSP.html#59912" class="Bound">‚Ñì</a> <a id="61264" class="Symbol">{</a><a id="61265" class="Argument">p</a> <a id="61267" class="Symbol">=</a> <a id="61269" href="Demos.HSP.html#61227" class="Bound">p</a><a id="61270" class="Symbol">}{</a><a id="61272" href="Demos.HSP.html#61230" class="Bound">q</a><a id="61273" class="Symbol">}</a> <a id="61275" href="Demos.HSP.html#61233" class="Bound">x</a><a id="61276" class="Symbol">)</a> <a id="61278" href="Demos.HSP.html#61235" class="Bound">œÅ</a>

</pre>
Actually, we will need the following lifted version of this result.

<pre class="Agda">

 <a id="61376" href="Demos.HSP.html#61376" class="Function">F-ModTh-epi-lift</a> <a id="61393" class="Symbol">:</a> <a id="61395" href="Demos.HSP.html#59890" class="Bound">ùë®</a> <a id="61397" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="61399" href="Demos.HSP.html#48049" class="Function">Mod</a> <a id="61403" class="Symbol">(</a><a id="61404" href="Demos.HSP.html#47951" class="Function">Th</a> <a id="61407" class="Symbol">(</a><a id="61408" href="Demos.HSP.html#52418" class="Function">V</a> <a id="61410" href="Demos.HSP.html#59912" class="Bound">‚Ñì</a> <a id="61412" href="Demos.HSP.html#59999" class="Function">Œπ</a> <a id="61414" href="Demos.HSP.html#59928" class="Bound">ùí¶</a><a id="61415" class="Symbol">))</a> <a id="61418" class="Symbol">‚Üí</a> <a id="61420" href="Demos.HSP.html#27224" class="Function">epi</a> <a id="61424" href="Demos.HSP.html#58747" class="Function Operator">ùîΩ[</a> <a id="61427" href="Demos.HSP.html#60118" class="Function">A</a> <a id="61429" href="Demos.HSP.html#58747" class="Function Operator">]</a> <a id="61431" class="Symbol">(</a><a id="61432" href="Demos.HSP.html#21992" class="Function">Lift-Alg</a> <a id="61441" href="Demos.HSP.html#59890" class="Bound">ùë®</a> <a id="61443" href="Demos.HSP.html#59999" class="Function">Œπ</a> <a id="61445" href="Demos.HSP.html#59999" class="Function">Œπ</a><a id="61446" class="Symbol">)</a>
 <a id="61449" href="Demos.HSP.html#61376" class="Function">F-ModTh-epi-lift</a> <a id="61466" href="Demos.HSP.html#61466" class="Bound">A‚ààModThK</a> <a id="61475" class="Symbol">=</a> <a id="61477" href="Demos.HSP.html#28724" class="Function">‚àò-epi</a> <a id="61483" class="Symbol">(</a><a id="61484" href="Demos.HSP.html#61072" class="Function">F-ModThV-epi</a> <a id="61497" class="Symbol">Œª</a> <a id="61499" class="Symbol">{</a><a id="61500" href="Demos.HSP.html#61500" class="Bound">p</a> <a id="61502" href="Demos.HSP.html#61502" class="Bound">q</a><a id="61503" class="Symbol">}</a> <a id="61505" class="Symbol">‚Üí</a> <a id="61507" href="Demos.HSP.html#61466" class="Bound">A‚ààModThK</a><a id="61515" class="Symbol">{</a><a id="61516" class="Argument">p</a> <a id="61518" class="Symbol">=</a> <a id="61520" href="Demos.HSP.html#61500" class="Bound">p</a><a id="61521" class="Symbol">}{</a><a id="61523" href="Demos.HSP.html#61502" class="Bound">q</a><a id="61524" class="Symbol">}</a> <a id="61526" class="Symbol">)</a> <a id="61528" href="Demos.HSP.html#30719" class="Function">ToLift-epi</a>
</pre>


## <a id="birkhoffs-variety-theorem">Birkhoff's Variety Theorem</a>

Let `ùí¶` be a class of algebras and recall that `ùí¶` is a *variety* provided
it is closed under homomorphisms, subalgebras and products; equivalently,
`V ùí¶ ‚äÜ ùí¶`.
(Observe that `ùí¶ ‚äÜ V ùí¶` holds for all `ùí¶` since `V` is a closure operator.)
We call `ùí¶` an *equational class* if it is the class of all models of some set of identities.

Birkhoff's variety theorem, also known as the HSP theorem, asserts that `ùí¶` is an equational class if and only if it is a variety.  In this section, we present the statement and proof of this theorem---first in a style similar to what one finds in textbooks (e.g.,¬†[@Bergman:2012 Theorem 4.41]), and then formally in the language of [MLTT][].


### <a id="informal-proof">Informal proof</a>

(‚áí) *Every equational class is a variety*. Indeed, suppose `ùí¶` is an equational class axiomatized by term identities `‚Ñ∞`; that is, `ùë® ‚àà ùí¶` iff `ùë® ‚ä® ‚Ñ∞`. Since the classes `H ùí¶`, `S ùí¶`, `P ùí¶` and `ùí¶` all satisfy the same set of equations, we have `V ùí¶ ‚ä´ p ‚âà q` for all `(p , q) ‚àà ‚Ñ∞`, so `V ùí¶ ‚äÜ ùí¶`.

(‚áê) *Every variety is an equational class*.[^10] Let `ùí¶` be an arbitrary variety.  We will describe a set of equations that axiomatizes `ùí¶`.  A natural choice is to take `Th ùí¶` and try to prove that `ùí¶ = Mod (Th ùí¶)`. Clearly, `ùí¶ ‚äÜ Mod (Th ùí¶)`.  To prove the converse inclusion, let `ùë® ‚àà Mod (Th ùí¶)`. It suffices to find an algebra `ùë≠ ‚àà S (P ùí¶)` such that `ùë®` is a homomorphic image of `ùë≠`, as this will show that `ùë® ‚àà H (S (P ùí¶)) = ùí¶`.

Let `X` be such that there exists a surjective environment `œÅ : X ‚Üí ùïå[ ùë® ]`.[^11]
By the `lift-hom` lemma, there is an epimorphism `h : ùëª X ‚Üí ùïå[ ùë® ]` that extends `œÅ`. Put  `ùîΩ[ X ] := ùëª X / ‚âà` and let `g : ùëª X  ‚Üí ùîΩ[ X ]` be the natural epimorphism with kernel `‚âà`. We claim `ker g ‚äÜ ker h`. 
If the claim is true, then there is a map `f : ùîΩ[ X ] ‚Üí ùë®` such that `f ‚àò g = h`, and since `h`
is surjective so is `f`. Therefore, `ùë® ‚àà ùñß (ùîΩ[ X ]) ‚äÜ Mod (Th ùí¶)` completing the proof.

It remains to prove the claim `ker g ‚äÜ ker h`. Let `u`, `v` be terms and assume `g u = g v`. Since `ùëª X` is generated by `X`, there are terms `p`, `q` such that `u = ‚ü¶ ùëª X ‚üß p` and `v = ‚ü¶ ùëª X ‚üß q`.[^12]
Therefore, `‚ü¶ ùîΩ[ X ] ‚üß p = g (‚ü¶ ùëª X ‚üß p) = g u = g v = g (‚ü¶ ùëª X ‚üß q) = ‚ü¶ ùîΩ[ X ]‚üß q`,
so `ùí¶ ‚ä´ p ‚âà q`; thus, `(p , q) ‚àà Th ùí¶`. Since `ùë® ‚àà Mod (Th ùí¶)`, we obtain `ùë® ‚äß p ‚âà q`, which implies
that `h u = (‚ü¶ ùë® ‚üß p) ‚ü®$‚ü© œÅ = (‚ü¶ ùë® ‚üß q) ‚ü®$‚ü© œÅ = h v`, as desired.

### <a id="formal-proof">Formal proof</a>

(‚áí) *Every equational class is a variety*.
We need an arbitrary equational class, which we obtain by starting with an arbitrary collection `‚Ñ∞` of equations and then defining `ùí¶ = Mod ‚Ñ∞`, the class axiomatized by `‚Ñ∞`. We prove that `ùí¶` is a variety by showing that `ùí¶ = V ùí¶`. The inclusion `ùí¶ ‚äÜ V ùí¶`, which holds for all classes `ùí¶`, is called the *expansive* property of `V`.

<pre class="Agda">

<a id="64445" class="Keyword">module</a> <a id="64452" href="Demos.HSP.html#64452" class="Module">_</a> <a id="64454" class="Symbol">(</a><a id="64455" href="Demos.HSP.html#64455" class="Bound">ùí¶</a> <a id="64457" class="Symbol">:</a> <a id="64459" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="64463" class="Symbol">(</a><a id="64464" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="64472" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="64474" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a><a id="64476" class="Symbol">)</a> <a id="64478" class="Symbol">(</a><a id="64479" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="64481" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="64483" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a> <a id="64486" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="64488" href="Demos.HSP.html#34366" class="Function">ov</a> <a id="64491" href="Demos.HSP.html#7280" class="Generalizable">‚Ñì</a><a id="64492" class="Symbol">))</a> <a id="64495" class="Keyword">where</a>
 <a id="64502" href="Demos.HSP.html#64502" class="Function">V-expa</a> <a id="64509" class="Symbol">:</a> <a id="64511" href="Demos.HSP.html#64455" class="Bound">ùí¶</a> <a id="64513" href="Relation.Unary.html#1742" class="Function Operator">‚äÜ</a> <a id="64515" href="Demos.HSP.html#52418" class="Function">V</a> <a id="64517" href="Demos.HSP.html#64491" class="Bound">‚Ñì</a> <a id="64519" class="Symbol">(</a><a id="64520" href="Demos.HSP.html#34366" class="Function">ov</a> <a id="64523" class="Symbol">(</a><a id="64524" href="Demos.HSP.html#64472" class="Bound">Œ±</a> <a id="64526" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="64528" href="Demos.HSP.html#64474" class="Bound">œÅ·µÉ</a> <a id="64531" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="64533" href="Demos.HSP.html#64491" class="Bound">‚Ñì</a><a id="64534" class="Symbol">))</a> <a id="64537" href="Demos.HSP.html#64455" class="Bound">ùí¶</a>
 <a id="64540" href="Demos.HSP.html#64502" class="Function">V-expa</a> <a id="64547" class="Symbol">{</a><a id="64548" class="Argument">x</a> <a id="64550" class="Symbol">=</a> <a id="64552" href="Demos.HSP.html#64552" class="Bound">ùë®</a><a id="64553" class="Symbol">}</a><a id="64554" href="Demos.HSP.html#64554" class="Bound">kA</a> <a id="64557" class="Symbol">=</a> <a id="64559" href="Demos.HSP.html#64552" class="Bound">ùë®</a> <a id="64561" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="64563" class="Symbol">(</a><a id="64564" href="Demos.HSP.html#64552" class="Bound">ùë®</a> <a id="64566" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="64568" class="Symbol">(</a><a id="64569" href="Data.Unit.Polymorphic.Base.html#480" class="Function">‚ä§</a> <a id="64571" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="64573" class="Symbol">(Œª</a> <a id="64576" href="Demos.HSP.html#64576" class="Bound">_</a> <a id="64578" class="Symbol">‚Üí</a> <a id="64580" href="Demos.HSP.html#64552" class="Bound">ùë®</a><a id="64581" class="Symbol">)</a><a id="64582" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="64584" class="Symbol">(Œª</a> <a id="64587" href="Demos.HSP.html#64587" class="Bound">_</a> <a id="64589" class="Symbol">‚Üí</a> <a id="64591" href="Demos.HSP.html#64554" class="Bound">kA</a><a id="64593" class="Symbol">)</a><a id="64594" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="64596" href="Demos.HSP.html#64958" class="Function">Goal</a><a id="64600" class="Symbol">)</a><a id="64601" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="64603" href="Demos.HSP.html#37469" class="Function">‚â§-reflexive</a><a id="64614" class="Symbol">)</a><a id="64615" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="64617" href="Demos.HSP.html#34582" class="Function">IdHomImage</a>
  <a id="64630" class="Keyword">where</a>
  <a id="64638" class="Keyword">open</a> <a id="64643" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="64650" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="64653" href="Demos.HSP.html#64552" class="Bound">ùë®</a> <a id="64655" href="Demos.HSP.html#18862" class="Function Operator">]</a>            <a id="64668" class="Keyword">using</a> <a id="64674" class="Symbol">(</a> <a id="64676" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="64681" class="Symbol">)</a>
  <a id="64685" class="Keyword">open</a> <a id="64690" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="64697" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="64700" href="Demos.HSP.html#23793" class="Function">‚®Ö</a> <a id="64702" class="Symbol">(Œª</a> <a id="64705" href="Demos.HSP.html#64705" class="Bound">_</a> <a id="64707" class="Symbol">‚Üí</a> <a id="64709" href="Demos.HSP.html#64552" class="Bound">ùë®</a><a id="64710" class="Symbol">)</a> <a id="64712" href="Demos.HSP.html#18862" class="Function Operator">]</a>  <a id="64715" class="Keyword">using</a> <a id="64721" class="Symbol">()</a> <a id="64724" class="Keyword">renaming</a> <a id="64733" class="Symbol">(</a> <a id="64735" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="64740" class="Symbol">to</a> <a id="64743" class="Function">refl‚®Ö</a> <a id="64749" class="Symbol">)</a>
  <a id="64753" href="Demos.HSP.html#64753" class="Function">to‚®Ö</a>    <a id="64760" class="Symbol">:</a> <a id="64762" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="64765" href="Demos.HSP.html#64552" class="Bound">ùë®</a> <a id="64767" href="Demos.HSP.html#18862" class="Function Operator">]</a>            <a id="64780" href="Demos.HSP.html#6322" class="Record Operator">‚ü∂</a> <a id="64782" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="64785" href="Demos.HSP.html#23793" class="Function">‚®Ö</a> <a id="64787" class="Symbol">(Œª</a> <a id="64790" href="Demos.HSP.html#64790" class="Bound">_</a> <a id="64792" class="Symbol">‚Üí</a> <a id="64794" href="Demos.HSP.html#64552" class="Bound">ùë®</a><a id="64795" class="Symbol">)</a> <a id="64797" href="Demos.HSP.html#18862" class="Function Operator">]</a>
  <a id="64801" href="Demos.HSP.html#64753" class="Function">to‚®Ö</a>    <a id="64808" class="Symbol">=</a> <a id="64810" class="Keyword">record</a> <a id="64817" class="Symbol">{</a> <a id="64819" href="Function.Bundles.html#1919" class="Field">f</a> <a id="64821" class="Symbol">=</a> <a id="64823" class="Symbol">Œª</a> <a id="64825" href="Demos.HSP.html#64825" class="Bound">x</a> <a id="64827" href="Demos.HSP.html#64827" class="Bound">_</a> <a id="64829" class="Symbol">‚Üí</a> <a id="64831" href="Demos.HSP.html#64825" class="Bound">x</a>   <a id="64835" class="Symbol">;</a> <a id="64837" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="64842" class="Symbol">=</a> <a id="64844" class="Symbol">Œª</a> <a id="64846" href="Demos.HSP.html#64846" class="Bound">xy</a> <a id="64849" href="Demos.HSP.html#64849" class="Bound">_</a> <a id="64851" class="Symbol">‚Üí</a> <a id="64853" href="Demos.HSP.html#64846" class="Bound">xy</a> <a id="64856" class="Symbol">}</a>
  <a id="64860" href="Demos.HSP.html#64860" class="Function">from‚®Ö</a>  <a id="64867" class="Symbol">:</a> <a id="64869" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="64872" href="Demos.HSP.html#23793" class="Function">‚®Ö</a> <a id="64874" class="Symbol">(Œª</a> <a id="64877" href="Demos.HSP.html#64877" class="Bound">_</a> <a id="64879" class="Symbol">‚Üí</a> <a id="64881" href="Demos.HSP.html#64552" class="Bound">ùë®</a><a id="64882" class="Symbol">)</a> <a id="64884" href="Demos.HSP.html#18862" class="Function Operator">]</a>  <a id="64887" href="Demos.HSP.html#6322" class="Record Operator">‚ü∂</a> <a id="64889" href="Demos.HSP.html#18862" class="Function Operator">ùîª[</a> <a id="64892" href="Demos.HSP.html#64552" class="Bound">ùë®</a> <a id="64894" href="Demos.HSP.html#18862" class="Function Operator">]</a>
  <a id="64898" href="Demos.HSP.html#64860" class="Function">from‚®Ö</a>  <a id="64905" class="Symbol">=</a> <a id="64907" class="Keyword">record</a> <a id="64914" class="Symbol">{</a> <a id="64916" href="Function.Bundles.html#1919" class="Field">f</a> <a id="64918" class="Symbol">=</a> <a id="64920" class="Symbol">Œª</a> <a id="64922" href="Demos.HSP.html#64922" class="Bound">x</a> <a id="64924" class="Symbol">‚Üí</a> <a id="64926" href="Demos.HSP.html#64922" class="Bound">x</a> <a id="64928" href="Data.Unit.Polymorphic.Base.html#524" class="Function">tt</a>  <a id="64932" class="Symbol">;</a> <a id="64934" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="64939" class="Symbol">=</a> <a id="64941" class="Symbol">Œª</a> <a id="64943" href="Demos.HSP.html#64943" class="Bound">xy</a> <a id="64946" class="Symbol">‚Üí</a> <a id="64948" href="Demos.HSP.html#64943" class="Bound">xy</a> <a id="64951" href="Data.Unit.Polymorphic.Base.html#524" class="Function">tt</a> <a id="64954" class="Symbol">}</a>
  <a id="64958" href="Demos.HSP.html#64958" class="Function">Goal</a>   <a id="64965" class="Symbol">:</a> <a id="64967" href="Demos.HSP.html#64552" class="Bound">ùë®</a> <a id="64969" href="Demos.HSP.html#32414" class="Record Operator">‚âÖ</a> <a id="64971" href="Demos.HSP.html#23793" class="Function">‚®Ö</a> <a id="64973" class="Symbol">(Œª</a> <a id="64976" href="Demos.HSP.html#64976" class="Bound">x</a> <a id="64978" class="Symbol">‚Üí</a> <a id="64980" href="Demos.HSP.html#64552" class="Bound">ùë®</a><a id="64981" class="Symbol">)</a>
  <a id="64985" href="Demos.HSP.html#64958" class="Function">Goal</a>   <a id="64992" class="Symbol">=</a> <a id="64994" href="Demos.HSP.html#32473" class="InductiveConstructor">mkiso</a> <a id="65000" class="Symbol">(</a><a id="65001" href="Demos.HSP.html#64753" class="Function">to‚®Ö</a> <a id="65005" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="65007" href="Demos.HSP.html#26115" class="InductiveConstructor">mkhom</a> <a id="65013" href="Demos.HSP.html#64743" class="Function">refl‚®Ö</a><a id="65018" class="Symbol">)</a> <a id="65020" class="Symbol">(</a><a id="65021" href="Demos.HSP.html#64860" class="Function">from‚®Ö</a> <a id="65027" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="65029" href="Demos.HSP.html#26115" class="InductiveConstructor">mkhom</a> <a id="65035" href="Relation.Binary.Structures.html#1568" class="Function">refl</a><a id="65039" class="Symbol">)</a> <a id="65041" class="Symbol">(Œª</a> <a id="65044" href="Demos.HSP.html#65044" class="Bound">_</a> <a id="65046" href="Demos.HSP.html#65046" class="Bound">_</a> <a id="65048" class="Symbol">‚Üí</a> <a id="65050" href="Relation.Binary.Structures.html#1568" class="Function">refl</a><a id="65054" class="Symbol">)</a> <a id="65056" class="Symbol">(Œª</a> <a id="65059" href="Demos.HSP.html#65059" class="Bound">_</a> <a id="65061" class="Symbol">‚Üí</a> <a id="65063" href="Relation.Binary.Structures.html#1568" class="Function">refl</a><a id="65067" class="Symbol">)</a>

</pre>
Observe how `ùë®` is expressed as (isomorphic to) a product with just one factor (itself), that is, the product
`‚®Ö (Œª x ‚Üí ùë®)` indexed over the one-element type `‚ä§`.

For the inclusion `V ùí¶ ‚äÜ ùí¶`, recall lemma `V-id1` which asserts that `ùí¶ ‚ä´ p ‚âà q` implies
`V ‚Ñì Œπ ùí¶ ‚ä´ p ‚âà q`; whence, if `ùí¶` is an equational class, then `V ùí¶ ‚äÜ ùí¶`, as we now confirm.

<pre class="Agda">

<a id="65442" class="Keyword">module</a> <a id="65449" href="Demos.HSP.html#65449" class="Module">_</a> <a id="65451" class="Symbol">{</a><a id="65452" href="Demos.HSP.html#65452" class="Bound">‚Ñì</a> <a id="65454" class="Symbol">:</a> <a id="65456" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="65461" class="Symbol">}{</a><a id="65463" href="Demos.HSP.html#65463" class="Bound">X</a> <a id="65465" class="Symbol">:</a> <a id="65467" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="65472" href="Demos.HSP.html#65452" class="Bound">‚Ñì</a><a id="65473" class="Symbol">}{</a><a id="65475" href="Demos.HSP.html#65475" class="Bound">‚Ñ∞</a> <a id="65477" class="Symbol">:</a> <a id="65479" class="Symbol">{</a><a id="65480" href="Demos.HSP.html#65480" class="Bound">Y</a> <a id="65482" class="Symbol">:</a> <a id="65484" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="65489" href="Demos.HSP.html#65452" class="Bound">‚Ñì</a><a id="65490" class="Symbol">}</a> <a id="65492" class="Symbol">‚Üí</a> <a id="65494" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="65499" class="Symbol">(</a><a id="65500" href="Demos.HSP.html#39263" class="Datatype">Term</a> <a id="65505" href="Demos.HSP.html#65480" class="Bound">Y</a> <a id="65507" href="Data.Product.html#1167" class="Function Operator">√ó</a> <a id="65509" href="Demos.HSP.html#39263" class="Datatype">Term</a> <a id="65514" href="Demos.HSP.html#65480" class="Bound">Y</a><a id="65515" class="Symbol">)</a> <a id="65517" class="Symbol">(</a><a id="65518" href="Demos.HSP.html#34366" class="Function">ov</a> <a id="65521" href="Demos.HSP.html#65452" class="Bound">‚Ñì</a><a id="65522" class="Symbol">)}</a> <a id="65525" class="Keyword">where</a>
 <a id="65532" class="Keyword">private</a> <a id="65540" href="Demos.HSP.html#65540" class="Function">ùí¶</a> <a id="65542" class="Symbol">=</a> <a id="65544" href="Demos.HSP.html#48049" class="Function">Mod</a><a id="65547" class="Symbol">{</a><a id="65548" class="Argument">Œ±</a> <a id="65550" class="Symbol">=</a> <a id="65552" href="Demos.HSP.html#65452" class="Bound">‚Ñì</a><a id="65553" class="Symbol">}{</a><a id="65555" href="Demos.HSP.html#65452" class="Bound">‚Ñì</a><a id="65556" class="Symbol">}{</a><a id="65558" href="Demos.HSP.html#65463" class="Bound">X</a><a id="65559" class="Symbol">}</a> <a id="65561" href="Demos.HSP.html#65475" class="Bound">‚Ñ∞</a>     <a id="65567" class="Comment">-- an arbitrary equational class</a>

 <a id="65602" href="Demos.HSP.html#65602" class="Function">EqCl‚áíVar</a> <a id="65611" class="Symbol">:</a> <a id="65613" href="Demos.HSP.html#52418" class="Function">V</a> <a id="65615" href="Demos.HSP.html#65452" class="Bound">‚Ñì</a> <a id="65617" class="Symbol">(</a><a id="65618" href="Demos.HSP.html#34366" class="Function">ov</a> <a id="65621" href="Demos.HSP.html#65452" class="Bound">‚Ñì</a><a id="65622" class="Symbol">)</a> <a id="65624" href="Demos.HSP.html#65540" class="Function">ùí¶</a> <a id="65626" href="Relation.Unary.html#1742" class="Function Operator">‚äÜ</a> <a id="65628" href="Demos.HSP.html#65540" class="Function">ùí¶</a>
 <a id="65631" href="Demos.HSP.html#65602" class="Function">EqCl‚áíVar</a> <a id="65640" class="Symbol">{</a><a id="65641" href="Demos.HSP.html#65641" class="Bound">ùë®</a><a id="65642" class="Symbol">}</a> <a id="65644" href="Demos.HSP.html#65644" class="Bound">vA</a> <a id="65647" class="Symbol">{</a><a id="65648" href="Demos.HSP.html#65648" class="Bound">p</a><a id="65649" class="Symbol">}</a> <a id="65651" class="Symbol">{</a><a id="65652" href="Demos.HSP.html#65652" class="Bound">q</a><a id="65653" class="Symbol">}</a> <a id="65655" href="Demos.HSP.html#65655" class="Bound">p‚Ñ∞q</a> <a id="65659" href="Demos.HSP.html#65659" class="Bound">œÅ</a> <a id="65661" class="Symbol">=</a> <a id="65663" href="Demos.HSP.html#54153" class="Function">V-id1</a> <a id="65669" href="Demos.HSP.html#65452" class="Bound">‚Ñì</a> <a id="65671" class="Symbol">{</a><a id="65672" href="Demos.HSP.html#65540" class="Function">ùí¶</a><a id="65673" class="Symbol">}</a> <a id="65675" class="Symbol">{</a><a id="65676" href="Demos.HSP.html#65648" class="Bound">p</a><a id="65677" class="Symbol">}</a> <a id="65679" class="Symbol">{</a><a id="65680" href="Demos.HSP.html#65652" class="Bound">q</a><a id="65681" class="Symbol">}</a> <a id="65683" class="Symbol">(Œª</a> <a id="65686" href="Demos.HSP.html#65686" class="Bound">_</a> <a id="65688" href="Demos.HSP.html#65688" class="Bound">x</a> <a id="65690" href="Demos.HSP.html#65690" class="Bound">œÑ</a> <a id="65692" class="Symbol">‚Üí</a> <a id="65694" href="Demos.HSP.html#65688" class="Bound">x</a> <a id="65696" href="Demos.HSP.html#65655" class="Bound">p‚Ñ∞q</a> <a id="65700" href="Demos.HSP.html#65690" class="Bound">œÑ</a><a id="65701" class="Symbol">)</a> <a id="65703" href="Demos.HSP.html#65641" class="Bound">ùë®</a> <a id="65705" href="Demos.HSP.html#65644" class="Bound">vA</a> <a id="65708" href="Demos.HSP.html#65659" class="Bound">œÅ</a>

</pre>
By `V-expa` and `Eqcl‚áíVar`, every equational class is a variety.

(‚áê) *Every variety is an equational class*.
To fix an arbitrary variety, start with an arbitrary class `ùí¶` of `ùëÜ`-algebras and take the *varietal closure*, `V ùí¶`. We prove that `V ùí¶` is precisely the collection of algebras that model `Th (V ùí¶)`; that is, `V ùí¶ = Mod (Th (V ùí¶))`.  The inclusion `V ùí¶ ‚äÜ Mod (Th (V ùí¶))` is a consequence of the fact that `Mod Th` is a closure operator.

<pre class="Agda">

<a id="66186" class="Keyword">module</a> <a id="66193" href="Demos.HSP.html#66193" class="Module">_</a> <a id="66195" class="Symbol">(</a><a id="66196" href="Demos.HSP.html#66196" class="Bound">ùí¶</a> <a id="66198" class="Symbol">:</a> <a id="66200" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="66204" class="Symbol">(</a><a id="66205" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="66213" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="66215" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a><a id="66217" class="Symbol">)</a> <a id="66219" class="Symbol">(</a><a id="66220" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="66222" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="66224" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a> <a id="66227" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="66229" href="Demos.HSP.html#34366" class="Function">ov</a> <a id="66232" href="Demos.HSP.html#7280" class="Generalizable">‚Ñì</a><a id="66233" class="Symbol">)){</a><a id="66236" href="Demos.HSP.html#66236" class="Bound">X</a> <a id="66238" class="Symbol">:</a> <a id="66240" href="Demos.HSP.html#6057" class="Primitive">Type</a> <a id="66245" class="Symbol">(</a><a id="66246" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="66248" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="66250" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a> <a id="66253" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="66255" href="Demos.HSP.html#7280" class="Generalizable">‚Ñì</a><a id="66256" class="Symbol">)}</a> <a id="66259" class="Keyword">where</a>
 <a id="66266" class="Keyword">private</a> <a id="66274" href="Demos.HSP.html#66274" class="Function">c</a> <a id="66276" class="Symbol">=</a> <a id="66278" href="Demos.HSP.html#66213" class="Bound">Œ±</a> <a id="66280" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="66282" href="Demos.HSP.html#66215" class="Bound">œÅ·µÉ</a> <a id="66285" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="66287" href="Demos.HSP.html#66232" class="Bound">‚Ñì</a> <a id="66289" class="Symbol">;</a> <a id="66291" href="Demos.HSP.html#66291" class="Function">Œπ</a> <a id="66293" class="Symbol">=</a> <a id="66295" href="Demos.HSP.html#34366" class="Function">ov</a> <a id="66298" href="Demos.HSP.html#66274" class="Function">c</a>

 <a id="66302" href="Demos.HSP.html#66302" class="Function">ModTh-closure</a> <a id="66316" class="Symbol">:</a> <a id="66318" href="Demos.HSP.html#52418" class="Function">V</a><a id="66319" class="Symbol">{</a><a id="66320" class="Argument">Œ≤</a> <a id="66322" class="Symbol">=</a> <a id="66324" href="Demos.HSP.html#7261" class="Generalizable">Œ≤</a><a id="66325" class="Symbol">}{</a><a id="66327" href="Demos.HSP.html#7263" class="Generalizable">œÅ·µá</a><a id="66329" class="Symbol">}{</a><a id="66331" href="Demos.HSP.html#7266" class="Generalizable">Œ≥</a><a id="66332" class="Symbol">}{</a><a id="66334" href="Demos.HSP.html#7268" class="Generalizable">œÅ·∂ú</a><a id="66336" class="Symbol">}{</a><a id="66338" href="Demos.HSP.html#7271" class="Generalizable">Œ¥</a><a id="66339" class="Symbol">}{</a><a id="66341" href="Demos.HSP.html#7273" class="Generalizable">œÅ·µà</a><a id="66343" class="Symbol">}</a> <a id="66345" href="Demos.HSP.html#66232" class="Bound">‚Ñì</a> <a id="66347" href="Demos.HSP.html#66291" class="Function">Œπ</a> <a id="66349" href="Demos.HSP.html#66196" class="Bound">ùí¶</a> <a id="66351" href="Relation.Unary.html#1742" class="Function Operator">‚äÜ</a> <a id="66353" href="Demos.HSP.html#48049" class="Function">Mod</a><a id="66356" class="Symbol">{</a><a id="66357" class="Argument">X</a> <a id="66359" class="Symbol">=</a> <a id="66361" href="Demos.HSP.html#66236" class="Bound">X</a><a id="66362" class="Symbol">}</a> <a id="66364" class="Symbol">(</a><a id="66365" href="Demos.HSP.html#47951" class="Function">Th</a> <a id="66368" class="Symbol">(</a><a id="66369" href="Demos.HSP.html#52418" class="Function">V</a> <a id="66371" href="Demos.HSP.html#66232" class="Bound">‚Ñì</a> <a id="66373" href="Demos.HSP.html#66291" class="Function">Œπ</a> <a id="66375" href="Demos.HSP.html#66196" class="Bound">ùí¶</a><a id="66376" class="Symbol">))</a>
 <a id="66380" href="Demos.HSP.html#66302" class="Function">ModTh-closure</a> <a id="66394" class="Symbol">{</a><a id="66395" class="Argument">x</a> <a id="66397" class="Symbol">=</a> <a id="66399" href="Demos.HSP.html#66399" class="Bound">ùë®</a><a id="66400" class="Symbol">}</a> <a id="66402" href="Demos.HSP.html#66402" class="Bound">vA</a> <a id="66405" class="Symbol">{</a><a id="66406" href="Demos.HSP.html#66406" class="Bound">p</a><a id="66407" class="Symbol">}</a> <a id="66409" class="Symbol">{</a><a id="66410" href="Demos.HSP.html#66410" class="Bound">q</a><a id="66411" class="Symbol">}</a> <a id="66413" href="Demos.HSP.html#66413" class="Bound">x</a> <a id="66415" href="Demos.HSP.html#66415" class="Bound">œÅ</a> <a id="66417" class="Symbol">=</a> <a id="66419" href="Demos.HSP.html#66413" class="Bound">x</a> <a id="66421" href="Demos.HSP.html#66399" class="Bound">ùë®</a> <a id="66423" href="Demos.HSP.html#66402" class="Bound">vA</a> <a id="66426" href="Demos.HSP.html#66415" class="Bound">œÅ</a>

</pre>

Our proof of the inclusion `Mod( Th( V ùí¶)) ‚äÜ V ùí¶` is carried out in two steps.

* Prove  `ùîΩ[ X ] ‚â§ ùë™ X`.
* Prove that every algebra in `Mod (Th (V ùí¶))` is a homomorphic image of `ùîΩ[ X ]`.

From the first item we have `ùîΩ[ X ] ‚àà S( P ùí¶))`, since `ùë™ X` is a product of algebras in `ùí¶`. From this and the second item will follow `Mod (Th (V ùí¶)) ‚äÜ H (S (P ùí¶))` (= `V ùí¶`), as desired.

To prove `ùîΩ[ X ] ‚â§ ùë™ X`, we construct a homomorphism from `ùîΩ[ X ]` to `ùë™ X` and then show it is injective,
so `ùîΩ[ X ]` is (isomorphic to) a subalgebra of `ùë™ X`.

<pre class="Agda">

 <a id="66998" class="Keyword">open</a> <a id="67003" href="Demos.HSP.html#59155" class="Module">FreeHom</a> <a id="67011" class="Symbol">{</a><a id="67012" class="Argument">‚Ñì</a> <a id="67014" class="Symbol">=</a> <a id="67016" href="Demos.HSP.html#66232" class="Bound">‚Ñì</a><a id="67017" class="Symbol">}{</a><a id="67019" href="Demos.HSP.html#66196" class="Bound">ùí¶</a><a id="67020" class="Symbol">}</a>
 <a id="67023" class="Keyword">open</a> <a id="67028" href="Demos.HSP.html#58294" class="Module">FreeAlgebra</a> <a id="67040" href="Demos.HSP.html#66196" class="Bound">ùí¶</a> <a id="67042" class="Keyword">using</a> <a id="67048" class="Symbol">(</a><a id="67049" href="Demos.HSP.html#58657" class="Function">homC</a> <a id="67054" class="Symbol">;</a>  <a id="67057" href="Demos.HSP.html#58747" class="Function Operator">ùîΩ[_]</a> <a id="67062" class="Symbol">;</a> <a id="67064" href="Demos.HSP.html#58468" class="Function">ùë™</a> <a id="67066" class="Symbol">)</a>
 <a id="67069" href="Demos.HSP.html#67069" class="Function">homFC</a> <a id="67075" class="Symbol">:</a> <a id="67077" href="Demos.HSP.html#26168" class="Function">hom</a> <a id="67081" href="Demos.HSP.html#58747" class="Function Operator">ùîΩ[</a> <a id="67084" href="Demos.HSP.html#66236" class="Bound">X</a> <a id="67086" href="Demos.HSP.html#58747" class="Function Operator">]</a> <a id="67088" class="Symbol">(</a><a id="67089" href="Demos.HSP.html#58468" class="Function">ùë™</a> <a id="67091" href="Demos.HSP.html#66236" class="Bound">X</a><a id="67092" class="Symbol">)</a>
 <a id="67095" href="Demos.HSP.html#67069" class="Function">homFC</a> <a id="67101" class="Symbol">=</a> <a id="67103" href="Demos.HSP.html#36172" class="Function">fromHomIm</a> <a id="67113" class="Symbol">(</a><a id="67114" href="Demos.HSP.html#58657" class="Function">homC</a> <a id="67119" href="Demos.HSP.html#66236" class="Bound">X</a><a id="67120" class="Symbol">)</a>

 <a id="67124" href="Demos.HSP.html#67124" class="Function">monFC</a> <a id="67130" class="Symbol">:</a> <a id="67132" href="Demos.HSP.html#26797" class="Function">mon</a> <a id="67136" href="Demos.HSP.html#58747" class="Function Operator">ùîΩ[</a> <a id="67139" href="Demos.HSP.html#66236" class="Bound">X</a> <a id="67141" href="Demos.HSP.html#58747" class="Function Operator">]</a> <a id="67143" class="Symbol">(</a><a id="67144" href="Demos.HSP.html#58468" class="Function">ùë™</a> <a id="67146" href="Demos.HSP.html#66236" class="Bound">X</a><a id="67147" class="Symbol">)</a>
 <a id="67150" href="Demos.HSP.html#67124" class="Function">monFC</a> <a id="67156" class="Symbol">=</a> <a id="67158" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="67160" href="Demos.HSP.html#67069" class="Function">homFC</a> <a id="67166" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="67168" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="67170" class="Keyword">record</a> <a id="67177" class="Symbol">{</a> <a id="67179" href="Demos.HSP.html#26700" class="Field">isHom</a> <a id="67185" class="Symbol">=</a> <a id="67187" href="Demos.HSP.html#7893" class="Function Operator">‚à•</a> <a id="67189" href="Demos.HSP.html#67069" class="Function">homFC</a> <a id="67195" href="Demos.HSP.html#7893" class="Function Operator">‚à•</a>
                            <a id="67225" class="Symbol">;</a> <a id="67227" href="Demos.HSP.html#26725" class="Field">isInjective</a> <a id="67239" class="Symbol">=</a>  <a id="67242" class="Symbol">Œª</a> <a id="67244" class="Symbol">{</a><a id="67245" href="Demos.HSP.html#67245" class="Bound">x</a><a id="67246" class="Symbol">}{</a><a id="67248" href="Demos.HSP.html#67248" class="Bound">y</a><a id="67249" class="Symbol">}‚Üí</a> <a id="67252" href="Demos.HSP.html#13852" class="Function">fromIm-inj</a> <a id="67263" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="67265" href="Demos.HSP.html#58657" class="Function">homC</a> <a id="67270" href="Demos.HSP.html#66236" class="Bound">X</a> <a id="67272" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="67274" class="Symbol">{</a><a id="67275" href="Demos.HSP.html#67245" class="Bound">x</a><a id="67276" class="Symbol">}{</a><a id="67278" href="Demos.HSP.html#67248" class="Bound">y</a><a id="67279" class="Symbol">}</a>   <a id="67283" class="Symbol">}</a>
 <a id="67286" href="Demos.HSP.html#67286" class="Function">F‚â§C</a> <a id="67290" class="Symbol">:</a> <a id="67292" href="Demos.HSP.html#58747" class="Function Operator">ùîΩ[</a> <a id="67295" href="Demos.HSP.html#66236" class="Bound">X</a> <a id="67297" href="Demos.HSP.html#58747" class="Function Operator">]</a> <a id="67299" href="Demos.HSP.html#37181" class="Function Operator">‚â§</a> <a id="67301" href="Demos.HSP.html#58468" class="Function">ùë™</a> <a id="67303" href="Demos.HSP.html#66236" class="Bound">X</a>
 <a id="67306" href="Demos.HSP.html#67286" class="Function">F‚â§C</a> <a id="67310" class="Symbol">=</a> <a id="67312" href="Demos.HSP.html#37906" class="Function">mon‚Üí‚â§</a> <a id="67318" href="Demos.HSP.html#67124" class="Function">monFC</a>

 <a id="67326" class="Keyword">open</a> <a id="67331" href="Demos.HSP.html#58294" class="Module">FreeAlgebra</a> <a id="67343" href="Demos.HSP.html#66196" class="Bound">ùí¶</a> <a id="67345" class="Keyword">using</a> <a id="67351" class="Symbol">(</a> <a id="67353" href="Demos.HSP.html#58376" class="Function">‚Ñë</a> <a id="67355" class="Symbol">)</a>

 <a id="67359" href="Demos.HSP.html#67359" class="Function">SPF</a> <a id="67363" class="Symbol">:</a> <a id="67365" href="Demos.HSP.html#58747" class="Function Operator">ùîΩ[</a> <a id="67368" href="Demos.HSP.html#66236" class="Bound">X</a> <a id="67370" href="Demos.HSP.html#58747" class="Function Operator">]</a> <a id="67372" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="67374" href="Demos.HSP.html#49235" class="Function">S</a> <a id="67376" href="Demos.HSP.html#66291" class="Function">Œπ</a> <a id="67378" class="Symbol">(</a><a id="67379" href="Demos.HSP.html#49347" class="Function">P</a> <a id="67381" href="Demos.HSP.html#66232" class="Bound">‚Ñì</a> <a id="67383" href="Demos.HSP.html#66291" class="Function">Œπ</a> <a id="67385" href="Demos.HSP.html#66196" class="Bound">ùí¶</a><a id="67386" class="Symbol">)</a>
 <a id="67389" href="Demos.HSP.html#67359" class="Function">SPF</a> <a id="67393" class="Symbol">=</a> <a id="67395" href="Demos.HSP.html#58468" class="Function">ùë™</a> <a id="67397" href="Demos.HSP.html#66236" class="Bound">X</a> <a id="67399" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="67401" class="Symbol">((</a><a id="67403" href="Demos.HSP.html#58376" class="Function">‚Ñë</a> <a id="67405" href="Demos.HSP.html#66236" class="Bound">X</a><a id="67406" class="Symbol">)</a> <a id="67408" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="67410" class="Symbol">(</a><a id="67411" href="Demos.HSP.html#7856" class="Function Operator">‚à£_‚à£</a> <a id="67415" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="67417" class="Symbol">((Œª</a> <a id="67421" href="Demos.HSP.html#67421" class="Bound">i</a> <a id="67423" class="Symbol">‚Üí</a> <a id="67425" href="Demos.HSP.html#6159" class="Field">fst</a> <a id="67429" href="Demos.HSP.html#7893" class="Function Operator">‚à•</a> <a id="67431" href="Demos.HSP.html#67421" class="Bound">i</a> <a id="67433" href="Demos.HSP.html#7893" class="Function Operator">‚à•</a><a id="67434" class="Symbol">)</a> <a id="67436" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="67438" href="Demos.HSP.html#33213" class="Function">‚âÖ-refl</a><a id="67444" class="Symbol">)))</a> <a id="67448" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a>  <a id="67451" href="Demos.HSP.html#67286" class="Function">F‚â§C</a>
</pre>

Next we prove that every algebra in `Mod (Th (V ùí¶))` is a homomorphic image of `ùîΩ[ X ]`. Indeed,

<pre class="Agda">

<a id="67579" class="Keyword">module</a> <a id="67586" href="Demos.HSP.html#67586" class="Module">_</a> <a id="67588" class="Symbol">{</a><a id="67589" href="Demos.HSP.html#67589" class="Bound">ùí¶</a> <a id="67591" class="Symbol">:</a> <a id="67593" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="67597" class="Symbol">(</a><a id="67598" href="Demos.HSP.html#18217" class="Record">Algebra</a> <a id="67606" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="67608" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a><a id="67610" class="Symbol">)</a> <a id="67612" class="Symbol">(</a><a id="67613" href="Demos.HSP.html#7256" class="Generalizable">Œ±</a> <a id="67615" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="67617" href="Demos.HSP.html#7258" class="Generalizable">œÅ·µÉ</a> <a id="67620" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="67622" href="Demos.HSP.html#34366" class="Function">ov</a> <a id="67625" href="Demos.HSP.html#7280" class="Generalizable">‚Ñì</a><a id="67626" class="Symbol">)}</a> <a id="67629" class="Keyword">where</a>
 <a id="67636" class="Keyword">private</a> <a id="67644" href="Demos.HSP.html#67644" class="Function">c</a> <a id="67646" class="Symbol">=</a> <a id="67648" href="Demos.HSP.html#67606" class="Bound">Œ±</a> <a id="67650" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="67652" href="Demos.HSP.html#67608" class="Bound">œÅ·µÉ</a> <a id="67655" href="Agda.Primitive.html#810" class="Primitive Operator">‚äî</a> <a id="67657" href="Demos.HSP.html#67625" class="Bound">‚Ñì</a> <a id="67659" class="Symbol">;</a> <a id="67661" href="Demos.HSP.html#67661" class="Function">Œπ</a> <a id="67663" class="Symbol">=</a> <a id="67665" href="Demos.HSP.html#34366" class="Function">ov</a> <a id="67668" href="Demos.HSP.html#67644" class="Function">c</a>

 <a id="67672" href="Demos.HSP.html#67672" class="Function">Var‚áíEqCl</a> <a id="67681" class="Symbol">:</a> <a id="67683" class="Symbol">‚àÄ</a> <a id="67685" href="Demos.HSP.html#67685" class="Bound">ùë®</a> <a id="67687" class="Symbol">‚Üí</a> <a id="67689" href="Demos.HSP.html#67685" class="Bound">ùë®</a> <a id="67691" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="67693" href="Demos.HSP.html#48049" class="Function">Mod</a> <a id="67697" class="Symbol">(</a><a id="67698" href="Demos.HSP.html#47951" class="Function">Th</a> <a id="67701" class="Symbol">(</a><a id="67702" href="Demos.HSP.html#52418" class="Function">V</a> <a id="67704" href="Demos.HSP.html#67625" class="Bound">‚Ñì</a> <a id="67706" href="Demos.HSP.html#67661" class="Function">Œπ</a> <a id="67708" href="Demos.HSP.html#67589" class="Bound">ùí¶</a><a id="67709" class="Symbol">))</a> <a id="67712" class="Symbol">‚Üí</a> <a id="67714" href="Demos.HSP.html#67685" class="Bound">ùë®</a> <a id="67716" href="Relation.Unary.html#1523" class="Function Operator">‚àà</a> <a id="67718" href="Demos.HSP.html#52418" class="Function">V</a> <a id="67720" href="Demos.HSP.html#67625" class="Bound">‚Ñì</a> <a id="67722" href="Demos.HSP.html#67661" class="Function">Œπ</a> <a id="67724" href="Demos.HSP.html#67589" class="Bound">ùí¶</a>
 <a id="67727" href="Demos.HSP.html#67672" class="Function">Var‚áíEqCl</a> <a id="67736" href="Demos.HSP.html#67736" class="Bound">ùë®</a> <a id="67738" href="Demos.HSP.html#67738" class="Bound">ModThA</a> <a id="67745" class="Symbol">=</a> <a id="67747" href="Demos.HSP.html#58747" class="Function Operator">ùîΩ[</a> <a id="67750" href="Demos.HSP.html#18916" class="Function Operator">ùïå[</a> <a id="67753" href="Demos.HSP.html#67736" class="Bound">ùë®</a> <a id="67755" href="Demos.HSP.html#18916" class="Function Operator">]</a> <a id="67757" href="Demos.HSP.html#58747" class="Function Operator">]</a> <a id="67759" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="67761" class="Symbol">(</a><a id="67762" href="Demos.HSP.html#67359" class="Function">SPF</a><a id="67765" class="Symbol">{</a><a id="67766" class="Argument">‚Ñì</a> <a id="67768" class="Symbol">=</a> <a id="67770" href="Demos.HSP.html#67625" class="Bound">‚Ñì</a><a id="67771" class="Symbol">}</a> <a id="67773" href="Demos.HSP.html#67589" class="Bound">ùí¶</a> <a id="67775" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="67777" href="Demos.HSP.html#68036" class="Function">Aim</a><a id="67780" class="Symbol">)</a>
  <a id="67784" class="Keyword">where</a>
  <a id="67792" class="Keyword">open</a> <a id="67797" href="Demos.HSP.html#58294" class="Module">FreeAlgebra</a> <a id="67809" href="Demos.HSP.html#67589" class="Bound">ùí¶</a> <a id="67811" class="Keyword">using</a> <a id="67817" class="Symbol">(</a> <a id="67819" href="Demos.HSP.html#58747" class="Function Operator">ùîΩ[_]</a> <a id="67824" class="Symbol">)</a>
  <a id="67828" href="Demos.HSP.html#67828" class="Function">epiFlA</a> <a id="67835" class="Symbol">:</a> <a id="67837" href="Demos.HSP.html#27224" class="Function">epi</a> <a id="67841" href="Demos.HSP.html#58747" class="Function Operator">ùîΩ[</a> <a id="67844" href="Demos.HSP.html#18916" class="Function Operator">ùïå[</a> <a id="67847" href="Demos.HSP.html#67736" class="Bound">ùë®</a> <a id="67849" href="Demos.HSP.html#18916" class="Function Operator">]</a> <a id="67851" href="Demos.HSP.html#58747" class="Function Operator">]</a> <a id="67853" class="Symbol">(</a><a id="67854" href="Demos.HSP.html#21992" class="Function">Lift-Alg</a> <a id="67863" href="Demos.HSP.html#67736" class="Bound">ùë®</a> <a id="67865" href="Demos.HSP.html#67661" class="Function">Œπ</a> <a id="67867" href="Demos.HSP.html#67661" class="Function">Œπ</a><a id="67868" class="Symbol">)</a>
  <a id="67872" href="Demos.HSP.html#67828" class="Function">epiFlA</a> <a id="67879" class="Symbol">=</a> <a id="67881" href="Demos.HSP.html#61376" class="Function">F-ModTh-epi-lift</a><a id="67897" class="Symbol">{</a><a id="67898" class="Argument">‚Ñì</a> <a id="67900" class="Symbol">=</a> <a id="67902" href="Demos.HSP.html#67625" class="Bound">‚Ñì</a><a id="67903" class="Symbol">}</a> <a id="67905" class="Symbol">Œª</a> <a id="67907" class="Symbol">{</a><a id="67908" href="Demos.HSP.html#67908" class="Bound">p</a> <a id="67910" href="Demos.HSP.html#67910" class="Bound">q</a><a id="67911" class="Symbol">}</a> <a id="67913" class="Symbol">‚Üí</a> <a id="67915" href="Demos.HSP.html#67738" class="Bound">ModThA</a><a id="67921" class="Symbol">{</a><a id="67922" class="Argument">p</a> <a id="67924" class="Symbol">=</a> <a id="67926" href="Demos.HSP.html#67908" class="Bound">p</a><a id="67927" class="Symbol">}{</a><a id="67929" href="Demos.HSP.html#67910" class="Bound">q</a><a id="67930" class="Symbol">}</a>

  <a id="67935" href="Demos.HSP.html#67935" class="Function">œÜ</a> <a id="67937" class="Symbol">:</a> <a id="67939" href="Demos.HSP.html#21992" class="Function">Lift-Alg</a> <a id="67948" href="Demos.HSP.html#67736" class="Bound">ùë®</a> <a id="67950" href="Demos.HSP.html#67661" class="Function">Œπ</a> <a id="67952" href="Demos.HSP.html#67661" class="Function">Œπ</a> <a id="67954" href="Demos.HSP.html#34463" class="Function Operator">IsHomImageOf</a> <a id="67967" href="Demos.HSP.html#58747" class="Function Operator">ùîΩ[</a> <a id="67970" href="Demos.HSP.html#18916" class="Function Operator">ùïå[</a> <a id="67973" href="Demos.HSP.html#67736" class="Bound">ùë®</a> <a id="67975" href="Demos.HSP.html#18916" class="Function Operator">]</a> <a id="67977" href="Demos.HSP.html#58747" class="Function Operator">]</a>
  <a id="67981" href="Demos.HSP.html#67935" class="Function">œÜ</a> <a id="67983" class="Symbol">=</a> <a id="67985" href="Demos.HSP.html#27580" class="Function">epi‚Üíontohom</a> <a id="67997" href="Demos.HSP.html#58747" class="Function Operator">ùîΩ[</a> <a id="68000" href="Demos.HSP.html#18916" class="Function Operator">ùïå[</a> <a id="68003" href="Demos.HSP.html#67736" class="Bound">ùë®</a> <a id="68005" href="Demos.HSP.html#18916" class="Function Operator">]</a> <a id="68007" href="Demos.HSP.html#58747" class="Function Operator">]</a> <a id="68009" class="Symbol">(</a><a id="68010" href="Demos.HSP.html#21992" class="Function">Lift-Alg</a> <a id="68019" href="Demos.HSP.html#67736" class="Bound">ùë®</a> <a id="68021" href="Demos.HSP.html#67661" class="Function">Œπ</a> <a id="68023" href="Demos.HSP.html#67661" class="Function">Œπ</a><a id="68024" class="Symbol">)</a> <a id="68026" href="Demos.HSP.html#67828" class="Function">epiFlA</a>

  <a id="68036" href="Demos.HSP.html#68036" class="Function">Aim</a> <a id="68040" class="Symbol">:</a> <a id="68042" href="Demos.HSP.html#67736" class="Bound">ùë®</a> <a id="68044" href="Demos.HSP.html#34463" class="Function Operator">IsHomImageOf</a> <a id="68057" href="Demos.HSP.html#58747" class="Function Operator">ùîΩ[</a> <a id="68060" href="Demos.HSP.html#18916" class="Function Operator">ùïå[</a> <a id="68063" href="Demos.HSP.html#67736" class="Bound">ùë®</a> <a id="68065" href="Demos.HSP.html#18916" class="Function Operator">]</a> <a id="68067" href="Demos.HSP.html#58747" class="Function Operator">]</a>
  <a id="68071" href="Demos.HSP.html#68036" class="Function">Aim</a> <a id="68075" class="Symbol">=</a> <a id="68077" href="Demos.HSP.html#28621" class="Function">‚àò-hom</a> <a id="68083" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a> <a id="68085" href="Demos.HSP.html#67935" class="Function">œÜ</a> <a id="68087" href="Demos.HSP.html#7856" class="Function Operator">‚à£</a><a id="68088" class="Symbol">(</a><a id="68089" href="Demos.HSP.html#32525" class="Field">from</a> <a id="68094" href="Demos.HSP.html#36822" class="Function">Lift-‚âÖ</a><a id="68100" class="Symbol">)</a><a id="68101" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="68103" href="Demos.HSP.html#12821" class="Function">‚àò-IsSurjective</a> <a id="68118" class="Symbol">_</a> <a id="68120" class="Symbol">_</a> <a id="68122" href="Demos.HSP.html#7893" class="Function Operator">‚à•</a> <a id="68124" href="Demos.HSP.html#67935" class="Function">œÜ</a> <a id="68126" href="Demos.HSP.html#7893" class="Function Operator">‚à•</a><a id="68127" class="Symbol">(</a><a id="68128" href="Demos.HSP.html#32949" class="Function">fromIsSurjective</a><a id="68144" class="Symbol">(</a><a id="68145" href="Demos.HSP.html#36822" class="Function">Lift-‚âÖ</a><a id="68151" class="Symbol">{</a><a id="68152" class="Argument">ùë®</a> <a id="68154" class="Symbol">=</a> <a id="68156" href="Demos.HSP.html#67736" class="Bound">ùë®</a><a id="68157" class="Symbol">}))</a>

</pre>
By `ModTh-closure` and `Var‚áíEqCl`, we have `V ùí¶ = Mod (Th (V ùí¶))` for every class `ùí¶` of `ùëÜ`-algebras.
Thus, every variety is an equational class.

This completes the formal proof of Birkhoff's variety theorem. ‚àé

--------------------------------------------------------------------------

## <a id="discussion">Discussion</a>

How do we differ from the classical, set-theoretic approach? Most noticeable is our avoidance of all *size* issues. By using universe levels and level polymorphism, we always make sure we are in a *large enough* universe. So we can easily talk about "all algebras such that..." because these are always taken from a bounded (but arbitrary) universe.

Our use of setoids introduces nothing new: all the equivalence relations we use were already present in the classical proofs. The only "new" material is that we have to prove that functions respect those equivalences.

Our first attempt to formalize Birkhoff's theorem was not sufficiently careful in its handling of variable symbols `X`. Specifically, this type was unconstrained; it is meant to represent the informal notion of a "sufficiently large" collection of variable symbols. Consequently, we postulated surjections from `X` onto the domains of all algebras in the class under consideration. But then, given a signature `ùë∫` and a one-element `ùëÜ`-algebra `ùë®`, by choosing `X` to be the empty type `‚ä•`, our surjectivity postulate gives a map from `‚ä•` onto the singleton domain of `ùë®`. (For details, see the [Demos.ContraX](https://github.com/ualib/agda-algebras/blob/master/src/Demos/ContraX.lagda) module which constructs the counterexample in [Agda][].)

--------------------------------------------------------------------------

## <a id="related-work">Related work</a>

There have been a number of efforts to formalize parts of universal algebra in type theory besides ours. The Coq proof assistant, based on the Calculus of Inductive Constructions, was used by Capretta, in¬†[@Capretta:1999], and Spitters and Van der Weegen, in¬†[@Spitters:2011], to formalized the basics of universal algebra and some classical algebraic structures. In¬†[@Gunther:2018] Gunther et al developed what seemed (prior to the library) the most extensive libraryof formalized universal algebra to date. Like ,¬†[@Gunther:2018] is based on dependent type theory, is programmed in , and goes beyond the basic isomorphism theorems to include some equational logic. Although their coverage is less extensive than that of , Gunther et al do treat *multi-sorted* algebras, whereas is currently limited to single-sorted structures.

As noted by Abel¬†[@Abel:2021], Amato et al, in [@Amato:2021], have formalized multi-sorted algebras with finitary operators in UniMath. The restriction to finitary operations was due to limitations of the UniMath type theory, which does not have W-types nor user-defined inductive types. Abel also notes that Lynge and Spitters, in¬†[@Lynge:2019], formalize multi-sorted algebras with finitary operators in *Homotopy type theory* ([@HoTT]) using Coq. HoTT's higher inductive types enable them to define quotients as types, without the need for setoids. Lynge and Spitters prove three isomorphism theorems concerning subalgebras and quotient algebras, but do not formalize universal algebras nor varieties. Finally, in¬†[@Abel:2021], Abel gives a new formal proof of the soundness and completeness theorem for multi-sorted algebraic structures.


---------------------------------------------------------------------------------

## <a id="footnotes">Footnotes</a>

[^1]: An alternative formalization based on classical set-theory was achieved in¬†[@birkhoff-in-mizar:1999].

[^2]: See the [Birkhoff.lagda](https://github.com/ualib/ualib.github.io/blob/71f173858701398d56224dd79d152c380c0c2b5e/src/lagda/UALib/Birkhoff.lagda) file in the [ualib/ualib.gitlab.io](https://github.com/ualib/ualib.github.io) repository ([15 Jan 2021 commit 71f1738](https://github.com/ualib/ualib.github.io/commit/71f173858701398d56224dd79d152c380c0c2b5e))¬†[@ualib_v1.0.0].

[^3]: [src/Demos/HSP.lagda](https://github.com/ualib/agda-algebras/blob/master/src/Demos/HSP.lagda) in the [agda-algebras][] repository: [github.com/ualib/agda-algebras](https://github.com/ualib/agda-algebras).

[^4]: the axiom asserting that two point-wise equal functions are equal

[^5]: All submodules of the module in the library are also fully constructive in this sense.

[^6]: The code in this paragraph was suggested by an anonymous referee.

[^7]: `suc ‚Ñì` denotes the successor of `‚Ñì` in the universe hierarchy.

[^8]: The definition of was provided by an anonymous referee; it is indeed simpler than trying to apply the general `HomFactor` theorem found in the [agda-algebras][] library.

[^9]: Some authors reserve the term for a *deductively closed* set of equations, that is, a set of equations that is closed under entailment.

[^10]: The proof we present here is based on¬†[@Bergman:2012 Theorem 4.41].

[^11]: Informally, this is done by assuming `X` has cardinality at least `max(| ùïå[ ùë® ] |, œâ)`. Later we will see how to construct an `X` with the required property in type theory.

[^12]: `‚ü¶ ùë® ‚üß t` denotes the interpretation of the term `t` in the algebra `ùë®`.

---------------------------------------------------

## <a id="references">References</a>

<div id="refs"></div>

--------------------------------

{% include UALib.Links.md %}

