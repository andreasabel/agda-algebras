---
layout: default
title : "Base.Relations.Continuous module (The Agda Universal Algebra Library)"
date : "2021-02-28"
author: "[agda-algebras development team][]"
---

### <a id="continuous-relations">Continuous Relations</a>

This is the [Base.Relations.Continuous][] module of the [Agda Universal Algebra Library][].

<pre class="Agda">

<a id="337" class="Symbol">{-#</a> <a id="341" class="Keyword">OPTIONS</a> <a id="349" class="Pragma">--without-K</a> <a id="361" class="Pragma">--exact-split</a> <a id="375" class="Pragma">--safe</a> <a id="382" class="Symbol">#-}</a>

<a id="387" class="Keyword">module</a> <a id="394" href="Base.Relations.Continuous.html" class="Module">Base.Relations.Continuous</a> <a id="420" class="Keyword">where</a>

<a id="427" class="Comment">-- Imports from Agda and the Agda Standard Library -------------------------------</a>
<a id="510" class="Keyword">open</a> <a id="515" class="Keyword">import</a> <a id="522" href="Agda.Primitive.html" class="Module">Agda.Primitive</a>  <a id="538" class="Keyword">using</a> <a id="544" class="Symbol">()</a> <a id="547" class="Keyword">renaming</a> <a id="556" class="Symbol">(</a> <a id="558" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="562" class="Symbol">to</a> <a id="565" class="Primitive">Type</a> <a id="570" class="Symbol">)</a>
<a id="572" class="Keyword">open</a> <a id="577" class="Keyword">import</a> <a id="584" href="Level.html" class="Module">Level</a>           <a id="600" class="Keyword">using</a> <a id="606" class="Symbol">(</a> <a id="608" href="Agda.Primitive.html#810" class="Primitive Operator">_⊔_</a> <a id="612" class="Symbol">;</a> <a id="614" href="Agda.Primitive.html#780" class="Primitive">suc</a> <a id="618" class="Symbol">;</a> <a id="620" href="Agda.Primitive.html#597" class="Postulate">Level</a>  <a id="627" class="Symbol">)</a>

<a id="630" class="Comment">-- Imports from agda-algebras ----------------------------------------------------</a>
<a id="713" class="Keyword">open</a> <a id="718" class="Keyword">import</a> <a id="725" href="Overture.html" class="Module">Overture</a>        <a id="741" class="Keyword">using</a> <a id="747" class="Symbol">(</a> <a id="749" href="Overture.Basic.html#5909" class="Function">Π</a> <a id="751" class="Symbol">;</a> <a id="753" href="Overture.Basic.html#5989" class="Function">Π-syntax</a> <a id="762" class="Symbol">;</a> <a id="764" href="Overture.Operations.html#1395" class="Function">Op</a> <a id="767" class="Symbol">;</a> <a id="769" href="Overture.Operations.html#1584" class="Function Operator">arity[_]</a> <a id="778" class="Symbol">)</a>

<a id="781" class="Keyword">private</a> <a id="789" class="Keyword">variable</a> <a id="798" href="Base.Relations.Continuous.html#798" class="Generalizable">α</a> <a id="800" href="Base.Relations.Continuous.html#800" class="Generalizable">ρ</a> <a id="802" class="Symbol">:</a> <a id="804" href="Agda.Primitive.html#597" class="Postulate">Level</a>

</pre>

#### <a id="motivation">Motivation</a>

In set theory, an n-ary relation on a set `A` is simply a subset of the n-fold product `A × A × ⋯ × A`.  As such, we could model these as predicates over the type `A × A × ⋯ × A`, or as relations of type `A → A → ⋯ → A → Type β` (for some universe β).  To implement such a relation in type theory, we would need to know the arity in advance, and then somehow form an n-fold arrow →.  It's easier and more general to instead define an arity type `I : Type 𝓥`, and define the type representing `I`-ary relations on `A` as the function type `(I → A) → Type β`.  Then, if we are specifically interested in an n-ary relation for some natural number `n`, we could take `I` to be a finite set (e.g., of type `Fin n`).

Below we define `Rel` to be the type `(I → A) → Type β` and we call this the type of *continuous relations*.  This generalizes "discrete" relations (i.e., relations of finite arity---unary, binary, etc), defined in the standard library since inhabitants of the continuous relation type can have arbitrary arity.

The relations of type `Rel` not completely general, however, since they are defined over a single type. Said another way, they are *single-sorted* relations. We will remove this limitation when we define the type of *dependent continuous relations* later in the module. Just as `Rel A β` is the single-sorted special case of the multisorted `REL A B β` in the standard library, so too is our continuous version, `Rel I A β`, the single-sorted special case of a completely general type of relations. The latter represents relations that not only have arbitrary arities, but also are defined over arbitrary families of types.

Concretely, given an arbitrary family `A : I → Type α` of types, we may have a relation from `A i` to `A j` to `A k` to …, where the collection represented by the "indexing" type `I` might not even be enumerable.

We refer to such relations as *dependent continuous relations* (or *dependent relations* for short) because the definition of a type that represents them requires depedent types.  The `REL` type that we define [below](Base.Relations.Continuous.html#dependent-relations) manifests this completely general notion of relation.

**Warning**! The type of binary relations in the standard library's `Relation.Binary` module is also called `Rel`.  Therefore, to use both the discrete binary relation from the standard library, and our continuous relation type, we recommend renaming the former when importing with a line like this

`open import Relation.Binary  renaming ( REL to BinREL ; Rel to BinRel )`



#### <a id="continuous-and-dependent-relations">Continuous and dependent relations</a>

Here we define the types `Rel` and `REL`. The first of these represents predicates of arbitrary arity over a single type `A`. As noted above, we call these *continuous relations*.
The definition of `REL` goes even further and exploits the full power of dependent types resulting in a completely general relation type, which we call the type of *dependent relations*.

Here, the tuples of a relation of type `REL I 𝒜 β` inhabit the dependent function type `𝒜 : I → Type α` (where the codomain may depend on the input coordinate `i : I` of the domain). Heuristically, we can think of an inhabitant of type `REL I 𝒜 β` as a relation from `𝒜 i` to `𝒜 j` to `𝒜 k` to …. (This is only a rough heuristic since `I` could denote an uncountable collection.)  See the discussion below for a more detailed explanation.

<pre class="Agda">

<a id="4339" class="Keyword">module</a> <a id="4346" href="Base.Relations.Continuous.html#4346" class="Module">_</a> <a id="4348" class="Symbol">{</a><a id="4349" href="Base.Relations.Continuous.html#4349" class="Bound">𝓥</a> <a id="4351" class="Symbol">:</a> <a id="4353" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="4358" class="Symbol">}</a> <a id="4360" class="Keyword">where</a>
 <a id="4367" href="Base.Relations.Continuous.html#4367" class="Function">ar</a> <a id="4370" class="Symbol">:</a> <a id="4372" href="Base.Relations.Continuous.html#565" class="Primitive">Type</a> <a id="4377" class="Symbol">(</a><a id="4378" href="Agda.Primitive.html#780" class="Primitive">suc</a> <a id="4382" href="Base.Relations.Continuous.html#4349" class="Bound">𝓥</a><a id="4383" class="Symbol">)</a>
 <a id="4386" href="Base.Relations.Continuous.html#4367" class="Function">ar</a> <a id="4389" class="Symbol">=</a> <a id="4391" href="Base.Relations.Continuous.html#565" class="Primitive">Type</a> <a id="4396" href="Base.Relations.Continuous.html#4349" class="Bound">𝓥</a>

<a id="4399" class="Comment">-- Relations of arbitrary arity over a single sort.</a>
 <a id="4452" href="Base.Relations.Continuous.html#4452" class="Function">Rel</a> <a id="4456" class="Symbol">:</a> <a id="4458" href="Base.Relations.Continuous.html#565" class="Primitive">Type</a> <a id="4463" href="Base.Relations.Continuous.html#798" class="Generalizable">α</a> <a id="4465" class="Symbol">→</a> <a id="4467" href="Base.Relations.Continuous.html#4367" class="Function">ar</a> <a id="4470" class="Symbol">→</a> <a id="4472" class="Symbol">{</a><a id="4473" href="Base.Relations.Continuous.html#4473" class="Bound">ρ</a> <a id="4475" class="Symbol">:</a> <a id="4477" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="4482" class="Symbol">}</a> <a id="4484" class="Symbol">→</a> <a id="4486" href="Base.Relations.Continuous.html#565" class="Primitive">Type</a> <a id="4491" class="Symbol">(</a><a id="4492" href="Base.Relations.Continuous.html#798" class="Generalizable">α</a> <a id="4494" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="4496" href="Base.Relations.Continuous.html#4349" class="Bound">𝓥</a> <a id="4498" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="4500" href="Agda.Primitive.html#780" class="Primitive">suc</a> <a id="4504" href="Base.Relations.Continuous.html#4473" class="Bound">ρ</a><a id="4505" class="Symbol">)</a>
 <a id="4508" href="Base.Relations.Continuous.html#4452" class="Function">Rel</a> <a id="4512" href="Base.Relations.Continuous.html#4512" class="Bound">A</a> <a id="4514" href="Base.Relations.Continuous.html#4514" class="Bound">I</a> <a id="4516" class="Symbol">{</a><a id="4517" href="Base.Relations.Continuous.html#4517" class="Bound">ρ</a><a id="4518" class="Symbol">}</a> <a id="4520" class="Symbol">=</a> <a id="4522" class="Symbol">(</a><a id="4523" href="Base.Relations.Continuous.html#4514" class="Bound">I</a> <a id="4525" class="Symbol">→</a> <a id="4527" href="Base.Relations.Continuous.html#4512" class="Bound">A</a><a id="4528" class="Symbol">)</a> <a id="4530" class="Symbol">→</a> <a id="4532" href="Base.Relations.Continuous.html#565" class="Primitive">Type</a> <a id="4537" href="Base.Relations.Continuous.html#4517" class="Bound">ρ</a>

 <a id="4541" href="Base.Relations.Continuous.html#4541" class="Function">Rel-syntax</a> <a id="4552" class="Symbol">:</a> <a id="4554" href="Base.Relations.Continuous.html#565" class="Primitive">Type</a> <a id="4559" href="Base.Relations.Continuous.html#798" class="Generalizable">α</a> <a id="4561" class="Symbol">→</a> <a id="4563" href="Base.Relations.Continuous.html#4367" class="Function">ar</a> <a id="4566" class="Symbol">→</a> <a id="4568" class="Symbol">(</a><a id="4569" href="Base.Relations.Continuous.html#4569" class="Bound">ρ</a> <a id="4571" class="Symbol">:</a> <a id="4573" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="4578" class="Symbol">)</a> <a id="4580" class="Symbol">→</a> <a id="4582" href="Base.Relations.Continuous.html#565" class="Primitive">Type</a> <a id="4587" class="Symbol">(</a><a id="4588" href="Base.Relations.Continuous.html#4349" class="Bound">𝓥</a> <a id="4590" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="4592" href="Base.Relations.Continuous.html#798" class="Generalizable">α</a> <a id="4594" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="4596" href="Agda.Primitive.html#780" class="Primitive">suc</a> <a id="4600" href="Base.Relations.Continuous.html#4569" class="Bound">ρ</a><a id="4601" class="Symbol">)</a>
 <a id="4604" href="Base.Relations.Continuous.html#4541" class="Function">Rel-syntax</a> <a id="4615" href="Base.Relations.Continuous.html#4615" class="Bound">A</a> <a id="4617" href="Base.Relations.Continuous.html#4617" class="Bound">I</a> <a id="4619" href="Base.Relations.Continuous.html#4619" class="Bound">ρ</a> <a id="4621" class="Symbol">=</a> <a id="4623" href="Base.Relations.Continuous.html#4452" class="Function">Rel</a> <a id="4627" href="Base.Relations.Continuous.html#4615" class="Bound">A</a> <a id="4629" href="Base.Relations.Continuous.html#4617" class="Bound">I</a> <a id="4631" class="Symbol">{</a><a id="4632" href="Base.Relations.Continuous.html#4619" class="Bound">ρ</a><a id="4633" class="Symbol">}</a>

 <a id="4637" class="Keyword">syntax</a> <a id="4644" href="Base.Relations.Continuous.html#4541" class="Function">Rel-syntax</a> <a id="4655" class="Bound">A</a> <a id="4657" class="Bound">I</a> <a id="4659" class="Bound">ρ</a> <a id="4661" class="Symbol">=</a> <a id="4663" class="Function">Rel[</a> <a id="4668" class="Bound">A</a> <a id="4670" class="Function">^</a> <a id="4672" class="Bound">I</a> <a id="4674" class="Function">]</a> <a id="4676" class="Bound">ρ</a>
 <a id="4679" class="Keyword">infix</a> <a id="4685" class="Number">6</a> <a id="4687" href="Base.Relations.Continuous.html#4541" class="Function">Rel-syntax</a>

 <a id="4700" class="Comment">-- The type of arbitrarily multisorted relations of arbitrary arity</a>
 <a id="4769" href="Base.Relations.Continuous.html#4769" class="Function">REL</a> <a id="4773" class="Symbol">:</a> <a id="4775" class="Symbol">(</a><a id="4776" href="Base.Relations.Continuous.html#4776" class="Bound">I</a> <a id="4778" class="Symbol">:</a> <a id="4780" href="Base.Relations.Continuous.html#4367" class="Function">ar</a><a id="4782" class="Symbol">)</a> <a id="4784" class="Symbol">→</a> <a id="4786" class="Symbol">(</a><a id="4787" href="Base.Relations.Continuous.html#4776" class="Bound">I</a> <a id="4789" class="Symbol">→</a> <a id="4791" href="Base.Relations.Continuous.html#565" class="Primitive">Type</a> <a id="4796" href="Base.Relations.Continuous.html#798" class="Generalizable">α</a><a id="4797" class="Symbol">)</a> <a id="4799" class="Symbol">→</a> <a id="4801" class="Symbol">{</a><a id="4802" href="Base.Relations.Continuous.html#4802" class="Bound">ρ</a> <a id="4804" class="Symbol">:</a> <a id="4806" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="4811" class="Symbol">}</a> <a id="4813" class="Symbol">→</a> <a id="4815" href="Base.Relations.Continuous.html#565" class="Primitive">Type</a> <a id="4820" class="Symbol">(</a><a id="4821" href="Base.Relations.Continuous.html#4349" class="Bound">𝓥</a> <a id="4823" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="4825" href="Base.Relations.Continuous.html#798" class="Generalizable">α</a> <a id="4827" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="4829" href="Agda.Primitive.html#780" class="Primitive">suc</a> <a id="4833" href="Base.Relations.Continuous.html#4802" class="Bound">ρ</a><a id="4834" class="Symbol">)</a>
 <a id="4837" href="Base.Relations.Continuous.html#4769" class="Function">REL</a> <a id="4841" href="Base.Relations.Continuous.html#4841" class="Bound">I</a> <a id="4843" href="Base.Relations.Continuous.html#4843" class="Bound">𝒜</a> <a id="4845" class="Symbol">{</a><a id="4846" href="Base.Relations.Continuous.html#4846" class="Bound">ρ</a><a id="4847" class="Symbol">}</a> <a id="4849" class="Symbol">=</a> <a id="4851" class="Symbol">((</a><a id="4853" href="Base.Relations.Continuous.html#4853" class="Bound">i</a> <a id="4855" class="Symbol">:</a> <a id="4857" href="Base.Relations.Continuous.html#4841" class="Bound">I</a><a id="4858" class="Symbol">)</a> <a id="4860" class="Symbol">→</a> <a id="4862" href="Base.Relations.Continuous.html#4843" class="Bound">𝒜</a> <a id="4864" href="Base.Relations.Continuous.html#4853" class="Bound">i</a><a id="4865" class="Symbol">)</a> <a id="4867" class="Symbol">→</a> <a id="4869" href="Base.Relations.Continuous.html#565" class="Primitive">Type</a> <a id="4874" href="Base.Relations.Continuous.html#4846" class="Bound">ρ</a>

 <a id="4878" href="Base.Relations.Continuous.html#4878" class="Function">REL-syntax</a> <a id="4889" class="Symbol">:</a> <a id="4891" class="Symbol">(</a><a id="4892" href="Base.Relations.Continuous.html#4892" class="Bound">I</a> <a id="4894" class="Symbol">:</a> <a id="4896" href="Base.Relations.Continuous.html#4367" class="Function">ar</a><a id="4898" class="Symbol">)</a> <a id="4900" class="Symbol">→</a> <a id="4902" class="Symbol">(</a><a id="4903" href="Base.Relations.Continuous.html#4892" class="Bound">I</a> <a id="4905" class="Symbol">→</a> <a id="4907" href="Base.Relations.Continuous.html#565" class="Primitive">Type</a> <a id="4912" href="Base.Relations.Continuous.html#798" class="Generalizable">α</a><a id="4913" class="Symbol">)</a> <a id="4915" class="Symbol">→</a> <a id="4917" class="Symbol">{</a><a id="4918" href="Base.Relations.Continuous.html#4918" class="Bound">ρ</a> <a id="4920" class="Symbol">:</a> <a id="4922" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="4927" class="Symbol">}</a> <a id="4929" class="Symbol">→</a> <a id="4931" href="Base.Relations.Continuous.html#565" class="Primitive">Type</a> <a id="4936" class="Symbol">(</a><a id="4937" href="Base.Relations.Continuous.html#4349" class="Bound">𝓥</a> <a id="4939" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="4941" href="Base.Relations.Continuous.html#798" class="Generalizable">α</a> <a id="4943" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="4945" href="Agda.Primitive.html#780" class="Primitive">suc</a> <a id="4949" href="Base.Relations.Continuous.html#4918" class="Bound">ρ</a><a id="4950" class="Symbol">)</a>
 <a id="4953" href="Base.Relations.Continuous.html#4878" class="Function">REL-syntax</a> <a id="4964" href="Base.Relations.Continuous.html#4964" class="Bound">I</a> <a id="4966" href="Base.Relations.Continuous.html#4966" class="Bound">𝒜</a> <a id="4968" class="Symbol">{</a><a id="4969" href="Base.Relations.Continuous.html#4969" class="Bound">ρ</a><a id="4970" class="Symbol">}</a> <a id="4972" class="Symbol">=</a> <a id="4974" href="Base.Relations.Continuous.html#4769" class="Function">REL</a> <a id="4978" href="Base.Relations.Continuous.html#4964" class="Bound">I</a> <a id="4980" href="Base.Relations.Continuous.html#4966" class="Bound">𝒜</a> <a id="4982" class="Symbol">{</a><a id="4983" href="Base.Relations.Continuous.html#4969" class="Bound">ρ</a><a id="4984" class="Symbol">}</a>

 <a id="4988" class="Keyword">syntax</a> <a id="4995" href="Base.Relations.Continuous.html#4878" class="Function">REL-syntax</a> <a id="5006" class="Bound">I</a> <a id="5008" class="Symbol">(λ</a> <a id="5011" class="Bound">i</a> <a id="5013" class="Symbol">→</a> <a id="5015" class="Bound">𝒜</a><a id="5016" class="Symbol">)</a> <a id="5018" class="Symbol">=</a> <a id="5020" class="Function">REL[</a> <a id="5025" class="Bound">i</a> <a id="5027" class="Function">∈</a> <a id="5029" class="Bound">I</a> <a id="5031" class="Function">]</a> <a id="5033" class="Bound">𝒜</a>
 <a id="5036" class="Keyword">infix</a> <a id="5042" class="Number">6</a> <a id="5044" href="Base.Relations.Continuous.html#4878" class="Function">REL-syntax</a>

</pre>

#### <a id="compatibility-with-general-relations">Compatibility with general relations</a>

<pre class="Agda">

 <a id="5175" class="Comment">-- Lift a relation of tuples up to a relation on tuples of tuples.</a>
 <a id="5243" href="Base.Relations.Continuous.html#5243" class="Function">eval-Rel</a> <a id="5252" class="Symbol">:</a> <a id="5254" class="Symbol">{</a><a id="5255" href="Base.Relations.Continuous.html#5255" class="Bound">I</a> <a id="5257" class="Symbol">:</a> <a id="5259" href="Base.Relations.Continuous.html#4367" class="Function">ar</a><a id="5261" class="Symbol">}{</a><a id="5263" href="Base.Relations.Continuous.html#5263" class="Bound">A</a> <a id="5265" class="Symbol">:</a> <a id="5267" href="Base.Relations.Continuous.html#565" class="Primitive">Type</a> <a id="5272" href="Base.Relations.Continuous.html#798" class="Generalizable">α</a><a id="5273" class="Symbol">}</a> <a id="5275" class="Symbol">→</a> <a id="5277" href="Base.Relations.Continuous.html#4452" class="Function">Rel</a> <a id="5281" href="Base.Relations.Continuous.html#5263" class="Bound">A</a> <a id="5283" href="Base.Relations.Continuous.html#5255" class="Bound">I</a><a id="5284" class="Symbol">{</a><a id="5285" href="Base.Relations.Continuous.html#800" class="Generalizable">ρ</a><a id="5286" class="Symbol">}</a> <a id="5288" class="Symbol">→</a> <a id="5290" class="Symbol">(</a><a id="5291" href="Base.Relations.Continuous.html#5291" class="Bound">J</a> <a id="5293" class="Symbol">:</a> <a id="5295" href="Base.Relations.Continuous.html#4367" class="Function">ar</a><a id="5297" class="Symbol">)</a> <a id="5299" class="Symbol">→</a> <a id="5301" class="Symbol">(</a><a id="5302" href="Base.Relations.Continuous.html#5255" class="Bound">I</a> <a id="5304" class="Symbol">→</a> <a id="5306" href="Base.Relations.Continuous.html#5291" class="Bound">J</a> <a id="5308" class="Symbol">→</a> <a id="5310" href="Base.Relations.Continuous.html#5263" class="Bound">A</a><a id="5311" class="Symbol">)</a> <a id="5313" class="Symbol">→</a> <a id="5315" href="Base.Relations.Continuous.html#565" class="Primitive">Type</a> <a id="5320" class="Symbol">(</a><a id="5321" href="Base.Relations.Continuous.html#4349" class="Bound">𝓥</a> <a id="5323" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="5325" href="Base.Relations.Continuous.html#800" class="Generalizable">ρ</a><a id="5326" class="Symbol">)</a>
 <a id="5329" href="Base.Relations.Continuous.html#5243" class="Function">eval-Rel</a> <a id="5338" href="Base.Relations.Continuous.html#5338" class="Bound">R</a> <a id="5340" href="Base.Relations.Continuous.html#5340" class="Bound">J</a> <a id="5342" href="Base.Relations.Continuous.html#5342" class="Bound">t</a> <a id="5344" class="Symbol">=</a> <a id="5346" class="Symbol">∀</a> <a id="5348" class="Symbol">(</a><a id="5349" href="Base.Relations.Continuous.html#5349" class="Bound">j</a> <a id="5351" class="Symbol">:</a> <a id="5353" href="Base.Relations.Continuous.html#5340" class="Bound">J</a><a id="5354" class="Symbol">)</a> <a id="5356" class="Symbol">→</a> <a id="5358" href="Base.Relations.Continuous.html#5338" class="Bound">R</a> <a id="5360" class="Symbol">λ</a> <a id="5362" href="Base.Relations.Continuous.html#5362" class="Bound">i</a> <a id="5364" class="Symbol">→</a> <a id="5366" href="Base.Relations.Continuous.html#5342" class="Bound">t</a> <a id="5368" href="Base.Relations.Continuous.html#5362" class="Bound">i</a> <a id="5370" href="Base.Relations.Continuous.html#5349" class="Bound">j</a>

</pre>

A relation `R` is compatible with an operation `f` if for every tuple `t` of tuples
belonging to `R`, the tuple whose elements are the result of applying `f` to
sections of `t` also belongs to `R`.

<pre class="Agda">

 <a id="5599" href="Base.Relations.Continuous.html#5599" class="Function">compatible-Rel</a> <a id="5614" class="Symbol">:</a> <a id="5616" class="Symbol">{</a><a id="5617" href="Base.Relations.Continuous.html#5617" class="Bound">I</a> <a id="5619" href="Base.Relations.Continuous.html#5619" class="Bound">J</a> <a id="5621" class="Symbol">:</a> <a id="5623" href="Base.Relations.Continuous.html#4367" class="Function">ar</a><a id="5625" class="Symbol">}{</a><a id="5627" href="Base.Relations.Continuous.html#5627" class="Bound">A</a> <a id="5629" class="Symbol">:</a> <a id="5631" href="Base.Relations.Continuous.html#565" class="Primitive">Type</a> <a id="5636" href="Base.Relations.Continuous.html#798" class="Generalizable">α</a><a id="5637" class="Symbol">}</a> <a id="5639" class="Symbol">→</a> <a id="5641" href="Overture.Operations.html#1395" class="Function">Op</a><a id="5643" class="Symbol">(</a><a id="5644" href="Base.Relations.Continuous.html#5627" class="Bound">A</a><a id="5645" class="Symbol">)</a> <a id="5647" href="Base.Relations.Continuous.html#5619" class="Bound">J</a> <a id="5649" class="Symbol">→</a> <a id="5651" href="Base.Relations.Continuous.html#4452" class="Function">Rel</a> <a id="5655" href="Base.Relations.Continuous.html#5627" class="Bound">A</a> <a id="5657" href="Base.Relations.Continuous.html#5617" class="Bound">I</a><a id="5658" class="Symbol">{</a><a id="5659" href="Base.Relations.Continuous.html#800" class="Generalizable">ρ</a><a id="5660" class="Symbol">}</a> <a id="5662" class="Symbol">→</a> <a id="5664" href="Base.Relations.Continuous.html#565" class="Primitive">Type</a> <a id="5669" class="Symbol">(</a><a id="5670" href="Base.Relations.Continuous.html#4349" class="Bound">𝓥</a> <a id="5672" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="5674" href="Base.Relations.Continuous.html#798" class="Generalizable">α</a> <a id="5676" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="5678" href="Base.Relations.Continuous.html#800" class="Generalizable">ρ</a><a id="5679" class="Symbol">)</a>
 <a id="5682" href="Base.Relations.Continuous.html#5599" class="Function">compatible-Rel</a> <a id="5697" href="Base.Relations.Continuous.html#5697" class="Bound">f</a> <a id="5699" href="Base.Relations.Continuous.html#5699" class="Bound">R</a>  <a id="5702" class="Symbol">=</a> <a id="5704" class="Symbol">∀</a> <a id="5706" href="Base.Relations.Continuous.html#5706" class="Bound">t</a> <a id="5708" class="Symbol">→</a> <a id="5710" href="Base.Relations.Continuous.html#5243" class="Function">eval-Rel</a> <a id="5719" href="Base.Relations.Continuous.html#5699" class="Bound">R</a> <a id="5721" href="Overture.Operations.html#1584" class="Function Operator">arity[</a> <a id="5728" href="Base.Relations.Continuous.html#5697" class="Bound">f</a> <a id="5730" href="Overture.Operations.html#1584" class="Function Operator">]</a> <a id="5732" href="Base.Relations.Continuous.html#5706" class="Bound">t</a> <a id="5734" class="Symbol">→</a> <a id="5736" href="Base.Relations.Continuous.html#5699" class="Bound">R</a> <a id="5738" class="Symbol">λ</a> <a id="5740" href="Base.Relations.Continuous.html#5740" class="Bound">i</a> <a id="5742" class="Symbol">→</a> <a id="5744" href="Base.Relations.Continuous.html#5697" class="Bound">f</a> <a id="5746" class="Symbol">(</a><a id="5747" href="Base.Relations.Continuous.html#5706" class="Bound">t</a> <a id="5749" href="Base.Relations.Continuous.html#5740" class="Bound">i</a><a id="5750" class="Symbol">)</a>
 <a id="5753" class="Comment">-- (inferred type of t is I → J → A)</a>

</pre>


#### <a id="compatibility-of-operations-with-dependent-relations">Compatibility of operations with dependent relations</a>

<pre class="Agda">

 <a id="5943" href="Base.Relations.Continuous.html#5943" class="Function">eval-REL</a> <a id="5952" class="Symbol">:</a>  <a id="5955" class="Symbol">{</a><a id="5956" href="Base.Relations.Continuous.html#5956" class="Bound">I</a> <a id="5958" href="Base.Relations.Continuous.html#5958" class="Bound">J</a> <a id="5960" class="Symbol">:</a> <a id="5962" href="Base.Relations.Continuous.html#4367" class="Function">ar</a><a id="5964" class="Symbol">}{</a><a id="5966" href="Base.Relations.Continuous.html#5966" class="Bound">𝒜</a> <a id="5968" class="Symbol">:</a> <a id="5970" href="Base.Relations.Continuous.html#5956" class="Bound">I</a> <a id="5972" class="Symbol">→</a> <a id="5974" href="Base.Relations.Continuous.html#565" class="Primitive">Type</a> <a id="5979" href="Base.Relations.Continuous.html#798" class="Generalizable">α</a><a id="5980" class="Symbol">}</a>
  <a id="5984" class="Symbol">→</a>          <a id="5995" href="Base.Relations.Continuous.html#4769" class="Function">REL</a> <a id="5999" href="Base.Relations.Continuous.html#5956" class="Bound">I</a> <a id="6001" href="Base.Relations.Continuous.html#5966" class="Bound">𝒜</a> <a id="6003" class="Symbol">{</a><a id="6004" href="Base.Relations.Continuous.html#800" class="Generalizable">ρ</a><a id="6005" class="Symbol">}</a>          <a id="6016" class="Comment">-- the relation type: subsets of Π[ i ∈ I ] 𝒜 i</a>
                                  <a id="6098" class="Comment">-- (where Π[ i ∈ I ] 𝒜 i is a type of dependent functions or &quot;tuples&quot;)</a>
  <a id="6171" class="Symbol">→</a>          <a id="6182" class="Symbol">((</a><a id="6184" href="Base.Relations.Continuous.html#6184" class="Bound">i</a> <a id="6186" class="Symbol">:</a> <a id="6188" href="Base.Relations.Continuous.html#5956" class="Bound">I</a><a id="6189" class="Symbol">)</a> <a id="6191" class="Symbol">→</a> <a id="6193" href="Base.Relations.Continuous.html#5958" class="Bound">J</a> <a id="6195" class="Symbol">→</a> <a id="6197" href="Base.Relations.Continuous.html#5966" class="Bound">𝒜</a> <a id="6199" href="Base.Relations.Continuous.html#6184" class="Bound">i</a><a id="6200" class="Symbol">)</a>  <a id="6203" class="Comment">-- an I-tuple of (𝒥 i)-tuples</a>
  <a id="6235" class="Symbol">→</a>          <a id="6246" href="Base.Relations.Continuous.html#565" class="Primitive">Type</a> <a id="6251" class="Symbol">(</a><a id="6252" href="Base.Relations.Continuous.html#4349" class="Bound">𝓥</a> <a id="6254" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="6256" href="Base.Relations.Continuous.html#800" class="Generalizable">ρ</a><a id="6257" class="Symbol">)</a>

 <a id="6261" href="Base.Relations.Continuous.html#5943" class="Function">eval-REL</a><a id="6269" class="Symbol">{</a><a id="6270" class="Argument">I</a> <a id="6272" class="Symbol">=</a> <a id="6274" href="Base.Relations.Continuous.html#6274" class="Bound">I</a><a id="6275" class="Symbol">}{</a><a id="6277" href="Base.Relations.Continuous.html#6277" class="Bound">J</a><a id="6278" class="Symbol">}{</a><a id="6280" href="Base.Relations.Continuous.html#6280" class="Bound">𝒜</a><a id="6281" class="Symbol">}</a> <a id="6283" href="Base.Relations.Continuous.html#6283" class="Bound">R</a> <a id="6285" href="Base.Relations.Continuous.html#6285" class="Bound">t</a> <a id="6287" class="Symbol">=</a> <a id="6289" class="Symbol">∀</a> <a id="6291" href="Base.Relations.Continuous.html#6291" class="Bound">j</a> <a id="6293" class="Symbol">→</a> <a id="6295" href="Base.Relations.Continuous.html#6283" class="Bound">R</a> <a id="6297" class="Symbol">λ</a> <a id="6299" href="Base.Relations.Continuous.html#6299" class="Bound">i</a> <a id="6301" class="Symbol">→</a> <a id="6303" class="Symbol">(</a><a id="6304" href="Base.Relations.Continuous.html#6285" class="Bound">t</a> <a id="6306" href="Base.Relations.Continuous.html#6299" class="Bound">i</a><a id="6307" class="Symbol">)</a> <a id="6309" href="Base.Relations.Continuous.html#6291" class="Bound">j</a>

 <a id="6313" href="Base.Relations.Continuous.html#6313" class="Function">compatible-REL</a> <a id="6328" class="Symbol">:</a>  <a id="6331" class="Symbol">{</a><a id="6332" href="Base.Relations.Continuous.html#6332" class="Bound">I</a> <a id="6334" href="Base.Relations.Continuous.html#6334" class="Bound">J</a> <a id="6336" class="Symbol">:</a> <a id="6338" href="Base.Relations.Continuous.html#4367" class="Function">ar</a><a id="6340" class="Symbol">}{</a><a id="6342" href="Base.Relations.Continuous.html#6342" class="Bound">𝒜</a> <a id="6344" class="Symbol">:</a> <a id="6346" href="Base.Relations.Continuous.html#6332" class="Bound">I</a> <a id="6348" class="Symbol">→</a> <a id="6350" href="Base.Relations.Continuous.html#565" class="Primitive">Type</a> <a id="6355" href="Base.Relations.Continuous.html#798" class="Generalizable">α</a><a id="6356" class="Symbol">}</a>
  <a id="6360" class="Symbol">→</a>                <a id="6377" class="Symbol">(∀</a> <a id="6380" href="Base.Relations.Continuous.html#6380" class="Bound">i</a> <a id="6382" class="Symbol">→</a> <a id="6384" href="Overture.Operations.html#1395" class="Function">Op</a> <a id="6387" class="Symbol">(</a><a id="6388" href="Base.Relations.Continuous.html#6342" class="Bound">𝒜</a> <a id="6390" href="Base.Relations.Continuous.html#6380" class="Bound">i</a><a id="6391" class="Symbol">)</a> <a id="6393" href="Base.Relations.Continuous.html#6334" class="Bound">J</a><a id="6394" class="Symbol">)</a>  <a id="6397" class="Comment">-- for each i : I, an operation of type  Op(𝒜 i){J} = (J → 𝒜 i) → 𝒜 i</a>
  <a id="6469" class="Symbol">→</a>                <a id="6486" href="Base.Relations.Continuous.html#4769" class="Function">REL</a> <a id="6490" href="Base.Relations.Continuous.html#6332" class="Bound">I</a> <a id="6492" href="Base.Relations.Continuous.html#6342" class="Bound">𝒜</a> <a id="6494" class="Symbol">{</a><a id="6495" href="Base.Relations.Continuous.html#800" class="Generalizable">ρ</a><a id="6496" class="Symbol">}</a>         <a id="6506" class="Comment">-- a subset of Π[ i ∈ I ] 𝒜 i</a>
                                       <a id="6575" class="Comment">-- (where Π[ i ∈ I ] 𝒜 i is a type of dependent functions or &quot;tuples&quot;)</a>
  <a id="6648" class="Symbol">→</a>                <a id="6665" href="Base.Relations.Continuous.html#565" class="Primitive">Type</a> <a id="6670" class="Symbol">(</a><a id="6671" href="Base.Relations.Continuous.html#4349" class="Bound">𝓥</a> <a id="6673" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="6675" href="Base.Relations.Continuous.html#798" class="Generalizable">α</a> <a id="6677" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="6679" href="Base.Relations.Continuous.html#800" class="Generalizable">ρ</a><a id="6680" class="Symbol">)</a>
 <a id="6683" href="Base.Relations.Continuous.html#6313" class="Function">compatible-REL</a> <a id="6698" class="Symbol">{</a><a id="6699" class="Argument">I</a> <a id="6701" class="Symbol">=</a> <a id="6703" href="Base.Relations.Continuous.html#6703" class="Bound">I</a><a id="6704" class="Symbol">}{</a><a id="6706" href="Base.Relations.Continuous.html#6706" class="Bound">J</a><a id="6707" class="Symbol">}{</a><a id="6709" href="Base.Relations.Continuous.html#6709" class="Bound">𝒜</a><a id="6710" class="Symbol">}</a> <a id="6712" href="Base.Relations.Continuous.html#6712" class="Bound">𝑓</a> <a id="6714" href="Base.Relations.Continuous.html#6714" class="Bound">R</a>  <a id="6717" class="Symbol">=</a> <a id="6719" href="Overture.Basic.html#5989" class="Function">Π[</a> <a id="6722" href="Base.Relations.Continuous.html#6722" class="Bound">t</a> <a id="6724" href="Overture.Basic.html#5989" class="Function">∈</a> <a id="6726" class="Symbol">((</a><a id="6728" href="Base.Relations.Continuous.html#6728" class="Bound">i</a> <a id="6730" class="Symbol">:</a> <a id="6732" href="Base.Relations.Continuous.html#6703" class="Bound">I</a><a id="6733" class="Symbol">)</a> <a id="6735" class="Symbol">→</a> <a id="6737" href="Base.Relations.Continuous.html#6706" class="Bound">J</a> <a id="6739" class="Symbol">→</a> <a id="6741" href="Base.Relations.Continuous.html#6709" class="Bound">𝒜</a> <a id="6743" href="Base.Relations.Continuous.html#6728" class="Bound">i</a><a id="6744" class="Symbol">)</a> <a id="6746" href="Overture.Basic.html#5989" class="Function">]</a> <a id="6748" href="Base.Relations.Continuous.html#5943" class="Function">eval-REL</a> <a id="6757" href="Base.Relations.Continuous.html#6714" class="Bound">R</a> <a id="6759" href="Base.Relations.Continuous.html#6722" class="Bound">t</a>

</pre>

The definition `eval-REL` denotes an *evaluation* function which lifts an `I`-ary relation to an `(I → J)`-ary relation.
The lifted relation will relate an `I`-tuple of `J`-tuples when the `I`-slices (or rows) of the `J`-tuples belong
to the original relation. The second definition, compatible-REL,  denotes compatibility of an operation with a continuous relation.


#### <a id="detailed-explanation-of-the-dependent-relation-type">Detailed explanation of the dependent relation type</a>

The last two definitions above may be hard to comprehend at first, so perhaps a more detailed explanation of the semantics of these deifnitions would help.

First, one should internalize the fact that `𝒶 : I → J → A` denotes an `I`-tuple of `J`-tuples of inhabitants of `A`.

Next, recall that a continuous relation `R` denotes a certain collection of `I`-tuples (if `x : I → A`, then `R x` asserts that `x` belongs to `R`).
For such `R`, the type `eval-REL R` represents a certain collection of `I`-tuples of `J`-tuples, namely, the tuples `𝒶 : I → J → A` for which `eval-REL R 𝒶` holds.

For simplicity, pretend for a moment that `J` is a finite set, say, `{1, 2, ..., J}`, so that we can write down a couple of the `J`-tuples as columns.
For example, here are the i-th and k-th columns (for some `i k : I`).

```
𝒶 i 1      𝒶 k 1
𝒶 i 2      𝒶 k 2  <-- (a row of I such columns forms an I-tuple)
  ⋮          ⋮
𝒶 i J      𝒶 k J
```

Now `eval-REL R 𝒶` is defined by `∀ j → R (λ i → 𝒶 i j)` which asserts that each row of the `I` columns shown above belongs to the original relation `R`.
Finally, `compatible-REL` takes

*  an `I`-tuple (`λ i → (𝑓 i)`) of `J`-ary operations, where for each i the type of `𝑓 i` is `(J → 𝒜 i) → 𝒜 i`, and
*  an `I`-tuple (`𝒶 : I → J → A`) of `J`-tuples
and determines whether the `I`-tuple `λ i → (𝑓 i) (𝑎 i)` belongs to `R`.

--------------------------------------

<span style="float:left;">[← Base.Relations.Discrete](Base.Relations.Discrete.html)</span>
<span style="float:right;">[Base.Relations.Properties →](Base.Relations.Properties.html)</span>

{% include UALib.Links.md %}

[agda-algebras development team]: https://github.com/ualib/agda-algebras#the-agda-algebras-development-team
