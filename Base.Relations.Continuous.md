---
layout: default
title : "Base.Relations.Continuous module (The Agda Universal Algebra Library)"
date : "2021-02-28"
author: "[agda-algebras development team][]"
---

### <a id="continuous-relations">Continuous Relations</a>

This is the [Base.Relations.Continuous][] module of the [Agda Universal Algebra Library][].

<pre class="Agda">

<a id="337" class="Symbol">{-#</a> <a id="341" class="Keyword">OPTIONS</a> <a id="349" class="Pragma">--without-K</a> <a id="361" class="Pragma">--exact-split</a> <a id="375" class="Pragma">--safe</a> <a id="382" class="Symbol">#-}</a>

<a id="387" class="Keyword">module</a> <a id="394" href="Base.Relations.Continuous.html" class="Module">Base.Relations.Continuous</a> <a id="420" class="Keyword">where</a>

<a id="427" class="Comment">-- Imports from Agda and the Agda Standard Library -------------------------------</a>
<a id="510" class="Keyword">open</a> <a id="515" class="Keyword">import</a> <a id="522" href="Agda.Primitive.html" class="Module">Agda.Primitive</a> <a id="537" class="Keyword">using</a> <a id="543" class="Symbol">(</a> <a id="545" href="Agda.Primitive.html#810" class="Primitive Operator">_⊔_</a> <a id="549" class="Symbol">;</a> <a id="551" href="Agda.Primitive.html#780" class="Primitive">lsuc</a> <a id="556" class="Symbol">;</a> <a id="558" href="Agda.Primitive.html#597" class="Postulate">Level</a> <a id="564" class="Symbol">)</a> <a id="566" class="Keyword">renaming</a> <a id="575" class="Symbol">(</a> <a id="577" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="581" class="Symbol">to</a> <a id="584" class="Primitive">Type</a> <a id="589" class="Symbol">)</a>

<a id="592" class="Comment">-- Imports from agda-algebras ----------------------------------------------------</a>
<a id="675" class="Keyword">open</a> <a id="680" class="Keyword">import</a> <a id="687" href="Base.Overture.Preliminaries.html" class="Module">Base.Overture.Preliminaries</a> <a id="715" class="Keyword">using</a> <a id="721" class="Symbol">(</a> <a id="723" href="Base.Overture.Preliminaries.html#6010" class="Function">Π</a> <a id="725" class="Symbol">;</a> <a id="727" href="Base.Overture.Preliminaries.html#6090" class="Function">Π-syntax</a> <a id="736" class="Symbol">)</a>
<a id="738" class="Keyword">open</a> <a id="743" class="Keyword">import</a> <a id="750" href="Base.Relations.Discrete.html" class="Module">Base.Relations.Discrete</a>     <a id="778" class="Keyword">using</a> <a id="784" class="Symbol">(</a> <a id="786" href="Base.Relations.Discrete.html#6089" class="Function">Op</a> <a id="789" class="Symbol">;</a> <a id="791" href="Base.Relations.Discrete.html#6278" class="Function Operator">arity[_]</a> <a id="800" class="Symbol">)</a>

<a id="803" class="Keyword">private</a> <a id="811" class="Keyword">variable</a> <a id="820" href="Base.Relations.Continuous.html#820" class="Generalizable">α</a> <a id="822" href="Base.Relations.Continuous.html#822" class="Generalizable">ρ</a> <a id="824" class="Symbol">:</a> <a id="826" href="Agda.Primitive.html#597" class="Postulate">Level</a>

</pre>

#### <a id="motivation">Motivation</a>

In set theory, an n-ary relation on a set `A` is simply a subset of the n-fold product `A × A × ⋯ × A`.  As such, we could model these as predicates over the type `A × A × ⋯ × A`, or as relations of type `A → A → ⋯ → A → Type β` (for some universe β).  To implement such a relation in type theory, we would need to know the arity in advance, and then somehow form an n-fold arrow →.  It's easier and more general to instead define an arity type `I : Type 𝓥`, and define the type representing `I`-ary relations on `A` as the function type `(I → A) → Type β`.  Then, if we are specifically interested in an n-ary relation for some natural number `n`, we could take `I` to be a finite set (e.g., of type `Fin n`).

Below we define `Rel` to be the type `(I → A) → Type β` and we call this the type of *continuous relations*.  This generalizes "discrete" relations (i.e., relations of finite arity---unary, binary, etc), defined in the standard library since inhabitants of the continuous relation type can have arbitrary arity.

The relations of type `Rel` not completely general, however, since they are defined over a single type. Said another way, they are *single-sorted* relations. We will remove this limitation when we define the type of *dependent continuous relations* later in the module. Just as `Rel A β` is the single-sorted special case of the multisorted `REL A B β` in the standard library, so too is our continuous version, `Rel I A β`, the single-sorted special case of a completely general type of relations. The latter represents relations that not only have arbitrary arities, but also are defined over arbitrary families of types.

Concretely, given an arbitrary family `A : I → Type α` of types, we may have a relation from `A i` to `A j` to `A k` to …, where the collection represented by the "indexing" type `I` might not even be enumerable.

We refer to such relations as *dependent continuous relations* (or *dependent relations* for short) because the definition of a type that represents them requires depedent types.  The `REL` type that we define [below](Base.Relations.Continuous.html#dependent-relations) manifests this completely general notion of relation.

**Warning**! The type of binary relations in the standard library's `Relation.Binary` module is also called `Rel`.  Therefore, to use both the discrete binary relation from the standard library, and our continuous relation type, we recommend renaming the former when importing with a line like this

`open import Relation.Binary  renaming ( REL to BinREL ; Rel to BinRel )`



#### <a id="continuous-and-dependent-relations">Continuous and dependent relations</a>

Here we define the types `Rel` and `REL`. The first of these represents predicates of arbitrary arity over a single type `A`. As noted above, we call these *continuous relations*.
The definition of `REL` goes even further and exploits the full power of dependent types resulting in a completely general relation type, which we call the type of *dependent relations*.

Here, the tuples of a relation of type `REL I 𝒜 β` inhabit the dependent function type `𝒜 : I → Type α` (where the codomain may depend on the input coordinate `i : I` of the domain). Heuristically, we can think of an inhabitant of type `REL I 𝒜 β` as a relation from `𝒜 i` to `𝒜 j` to `𝒜 k` to …. (This is only a rough heuristic since `I` could denote an uncountable collection.)  See the discussion below for a more detailed explanation.

<pre class="Agda">

<a id="4361" class="Keyword">module</a> <a id="4368" href="Base.Relations.Continuous.html#4368" class="Module">_</a> <a id="4370" class="Symbol">{</a><a id="4371" href="Base.Relations.Continuous.html#4371" class="Bound">𝓥</a> <a id="4373" class="Symbol">:</a> <a id="4375" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="4380" class="Symbol">}</a> <a id="4382" class="Keyword">where</a>

 <a id="4390" href="Base.Relations.Continuous.html#4390" class="Function">ar</a> <a id="4393" class="Symbol">:</a> <a id="4395" href="Base.Relations.Continuous.html#584" class="Primitive">Type</a> <a id="4400" class="Symbol">(</a><a id="4401" href="Agda.Primitive.html#780" class="Primitive">lsuc</a> <a id="4406" href="Base.Relations.Continuous.html#4371" class="Bound">𝓥</a><a id="4407" class="Symbol">)</a>
 <a id="4410" href="Base.Relations.Continuous.html#4390" class="Function">ar</a> <a id="4413" class="Symbol">=</a> <a id="4415" href="Base.Relations.Continuous.html#584" class="Primitive">Type</a> <a id="4420" href="Base.Relations.Continuous.html#4371" class="Bound">𝓥</a>

<a id="4423" class="Comment">-- Relations of arbitrary arity over a single sort.</a>
 <a id="4476" href="Base.Relations.Continuous.html#4476" class="Function">Rel</a> <a id="4480" class="Symbol">:</a> <a id="4482" href="Base.Relations.Continuous.html#584" class="Primitive">Type</a> <a id="4487" href="Base.Relations.Continuous.html#820" class="Generalizable">α</a> <a id="4489" class="Symbol">→</a> <a id="4491" href="Base.Relations.Continuous.html#4390" class="Function">ar</a> <a id="4494" class="Symbol">→</a> <a id="4496" class="Symbol">{</a><a id="4497" href="Base.Relations.Continuous.html#4497" class="Bound">ρ</a> <a id="4499" class="Symbol">:</a> <a id="4501" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="4506" class="Symbol">}</a> <a id="4508" class="Symbol">→</a> <a id="4510" href="Base.Relations.Continuous.html#584" class="Primitive">Type</a> <a id="4515" class="Symbol">(</a><a id="4516" href="Base.Relations.Continuous.html#820" class="Generalizable">α</a> <a id="4518" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="4520" href="Base.Relations.Continuous.html#4371" class="Bound">𝓥</a> <a id="4522" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="4524" href="Agda.Primitive.html#780" class="Primitive">lsuc</a> <a id="4529" href="Base.Relations.Continuous.html#4497" class="Bound">ρ</a><a id="4530" class="Symbol">)</a>
 <a id="4533" href="Base.Relations.Continuous.html#4476" class="Function">Rel</a> <a id="4537" href="Base.Relations.Continuous.html#4537" class="Bound">A</a> <a id="4539" href="Base.Relations.Continuous.html#4539" class="Bound">I</a> <a id="4541" class="Symbol">{</a><a id="4542" href="Base.Relations.Continuous.html#4542" class="Bound">ρ</a><a id="4543" class="Symbol">}</a> <a id="4545" class="Symbol">=</a> <a id="4547" class="Symbol">(</a><a id="4548" href="Base.Relations.Continuous.html#4539" class="Bound">I</a> <a id="4550" class="Symbol">→</a> <a id="4552" href="Base.Relations.Continuous.html#4537" class="Bound">A</a><a id="4553" class="Symbol">)</a> <a id="4555" class="Symbol">→</a> <a id="4557" href="Base.Relations.Continuous.html#584" class="Primitive">Type</a> <a id="4562" href="Base.Relations.Continuous.html#4542" class="Bound">ρ</a>

 <a id="4566" href="Base.Relations.Continuous.html#4566" class="Function">Rel-syntax</a> <a id="4577" class="Symbol">:</a> <a id="4579" href="Base.Relations.Continuous.html#584" class="Primitive">Type</a> <a id="4584" href="Base.Relations.Continuous.html#820" class="Generalizable">α</a> <a id="4586" class="Symbol">→</a> <a id="4588" href="Base.Relations.Continuous.html#4390" class="Function">ar</a> <a id="4591" class="Symbol">→</a> <a id="4593" class="Symbol">(</a><a id="4594" href="Base.Relations.Continuous.html#4594" class="Bound">ρ</a> <a id="4596" class="Symbol">:</a> <a id="4598" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="4603" class="Symbol">)</a> <a id="4605" class="Symbol">→</a> <a id="4607" href="Base.Relations.Continuous.html#584" class="Primitive">Type</a> <a id="4612" class="Symbol">(</a><a id="4613" href="Base.Relations.Continuous.html#4371" class="Bound">𝓥</a> <a id="4615" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="4617" href="Base.Relations.Continuous.html#820" class="Generalizable">α</a> <a id="4619" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="4621" href="Agda.Primitive.html#780" class="Primitive">lsuc</a> <a id="4626" href="Base.Relations.Continuous.html#4594" class="Bound">ρ</a><a id="4627" class="Symbol">)</a>
 <a id="4630" href="Base.Relations.Continuous.html#4566" class="Function">Rel-syntax</a> <a id="4641" href="Base.Relations.Continuous.html#4641" class="Bound">A</a> <a id="4643" href="Base.Relations.Continuous.html#4643" class="Bound">I</a> <a id="4645" href="Base.Relations.Continuous.html#4645" class="Bound">ρ</a> <a id="4647" class="Symbol">=</a> <a id="4649" href="Base.Relations.Continuous.html#4476" class="Function">Rel</a> <a id="4653" href="Base.Relations.Continuous.html#4641" class="Bound">A</a> <a id="4655" href="Base.Relations.Continuous.html#4643" class="Bound">I</a> <a id="4657" class="Symbol">{</a><a id="4658" href="Base.Relations.Continuous.html#4645" class="Bound">ρ</a><a id="4659" class="Symbol">}</a>

 <a id="4663" class="Keyword">syntax</a> <a id="4670" href="Base.Relations.Continuous.html#4566" class="Function">Rel-syntax</a> <a id="4681" class="Bound">A</a> <a id="4683" class="Bound">I</a> <a id="4685" class="Bound">ρ</a> <a id="4687" class="Symbol">=</a> <a id="4689" class="Function">Rel[</a> <a id="4694" class="Bound">A</a> <a id="4696" class="Function">^</a> <a id="4698" class="Bound">I</a> <a id="4700" class="Function">]</a> <a id="4702" class="Bound">ρ</a>
 <a id="4705" class="Keyword">infix</a> <a id="4711" class="Number">6</a> <a id="4713" href="Base.Relations.Continuous.html#4566" class="Function">Rel-syntax</a>

 <a id="4726" class="Comment">-- The type of arbitrarily multisorted relations of arbitrary arity</a>
 <a id="4795" href="Base.Relations.Continuous.html#4795" class="Function">REL</a> <a id="4799" class="Symbol">:</a> <a id="4801" class="Symbol">(</a><a id="4802" href="Base.Relations.Continuous.html#4802" class="Bound">I</a> <a id="4804" class="Symbol">:</a> <a id="4806" href="Base.Relations.Continuous.html#4390" class="Function">ar</a><a id="4808" class="Symbol">)</a> <a id="4810" class="Symbol">→</a> <a id="4812" class="Symbol">(</a><a id="4813" href="Base.Relations.Continuous.html#4802" class="Bound">I</a> <a id="4815" class="Symbol">→</a> <a id="4817" href="Base.Relations.Continuous.html#584" class="Primitive">Type</a> <a id="4822" href="Base.Relations.Continuous.html#820" class="Generalizable">α</a><a id="4823" class="Symbol">)</a> <a id="4825" class="Symbol">→</a> <a id="4827" class="Symbol">{</a><a id="4828" href="Base.Relations.Continuous.html#4828" class="Bound">ρ</a> <a id="4830" class="Symbol">:</a> <a id="4832" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="4837" class="Symbol">}</a> <a id="4839" class="Symbol">→</a> <a id="4841" href="Base.Relations.Continuous.html#584" class="Primitive">Type</a> <a id="4846" class="Symbol">(</a><a id="4847" href="Base.Relations.Continuous.html#4371" class="Bound">𝓥</a> <a id="4849" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="4851" href="Base.Relations.Continuous.html#820" class="Generalizable">α</a> <a id="4853" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="4855" href="Agda.Primitive.html#780" class="Primitive">lsuc</a> <a id="4860" href="Base.Relations.Continuous.html#4828" class="Bound">ρ</a><a id="4861" class="Symbol">)</a>
 <a id="4864" href="Base.Relations.Continuous.html#4795" class="Function">REL</a> <a id="4868" href="Base.Relations.Continuous.html#4868" class="Bound">I</a> <a id="4870" href="Base.Relations.Continuous.html#4870" class="Bound">𝒜</a> <a id="4872" class="Symbol">{</a><a id="4873" href="Base.Relations.Continuous.html#4873" class="Bound">ρ</a><a id="4874" class="Symbol">}</a> <a id="4876" class="Symbol">=</a> <a id="4878" class="Symbol">((</a><a id="4880" href="Base.Relations.Continuous.html#4880" class="Bound">i</a> <a id="4882" class="Symbol">:</a> <a id="4884" href="Base.Relations.Continuous.html#4868" class="Bound">I</a><a id="4885" class="Symbol">)</a> <a id="4887" class="Symbol">→</a> <a id="4889" href="Base.Relations.Continuous.html#4870" class="Bound">𝒜</a> <a id="4891" href="Base.Relations.Continuous.html#4880" class="Bound">i</a><a id="4892" class="Symbol">)</a> <a id="4894" class="Symbol">→</a> <a id="4896" href="Base.Relations.Continuous.html#584" class="Primitive">Type</a> <a id="4901" href="Base.Relations.Continuous.html#4873" class="Bound">ρ</a>

 <a id="4905" href="Base.Relations.Continuous.html#4905" class="Function">REL-syntax</a> <a id="4916" class="Symbol">:</a> <a id="4918" class="Symbol">(</a><a id="4919" href="Base.Relations.Continuous.html#4919" class="Bound">I</a> <a id="4921" class="Symbol">:</a> <a id="4923" href="Base.Relations.Continuous.html#4390" class="Function">ar</a><a id="4925" class="Symbol">)</a> <a id="4927" class="Symbol">→</a> <a id="4929" class="Symbol">(</a><a id="4930" href="Base.Relations.Continuous.html#4919" class="Bound">I</a> <a id="4932" class="Symbol">→</a> <a id="4934" href="Base.Relations.Continuous.html#584" class="Primitive">Type</a> <a id="4939" href="Base.Relations.Continuous.html#820" class="Generalizable">α</a><a id="4940" class="Symbol">)</a> <a id="4942" class="Symbol">→</a> <a id="4944" class="Symbol">{</a><a id="4945" href="Base.Relations.Continuous.html#4945" class="Bound">ρ</a> <a id="4947" class="Symbol">:</a> <a id="4949" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="4954" class="Symbol">}</a> <a id="4956" class="Symbol">→</a> <a id="4958" href="Base.Relations.Continuous.html#584" class="Primitive">Type</a> <a id="4963" class="Symbol">(</a><a id="4964" href="Base.Relations.Continuous.html#4371" class="Bound">𝓥</a> <a id="4966" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="4968" href="Base.Relations.Continuous.html#820" class="Generalizable">α</a> <a id="4970" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="4972" href="Agda.Primitive.html#780" class="Primitive">lsuc</a> <a id="4977" href="Base.Relations.Continuous.html#4945" class="Bound">ρ</a><a id="4978" class="Symbol">)</a>
 <a id="4981" href="Base.Relations.Continuous.html#4905" class="Function">REL-syntax</a> <a id="4992" href="Base.Relations.Continuous.html#4992" class="Bound">I</a> <a id="4994" href="Base.Relations.Continuous.html#4994" class="Bound">𝒜</a> <a id="4996" class="Symbol">{</a><a id="4997" href="Base.Relations.Continuous.html#4997" class="Bound">ρ</a><a id="4998" class="Symbol">}</a> <a id="5000" class="Symbol">=</a> <a id="5002" href="Base.Relations.Continuous.html#4795" class="Function">REL</a> <a id="5006" href="Base.Relations.Continuous.html#4992" class="Bound">I</a> <a id="5008" href="Base.Relations.Continuous.html#4994" class="Bound">𝒜</a> <a id="5010" class="Symbol">{</a><a id="5011" href="Base.Relations.Continuous.html#4997" class="Bound">ρ</a><a id="5012" class="Symbol">}</a>

 <a id="5016" class="Keyword">syntax</a> <a id="5023" href="Base.Relations.Continuous.html#4905" class="Function">REL-syntax</a> <a id="5034" class="Bound">I</a> <a id="5036" class="Symbol">(λ</a> <a id="5039" class="Bound">i</a> <a id="5041" class="Symbol">→</a> <a id="5043" class="Bound">𝒜</a><a id="5044" class="Symbol">)</a> <a id="5046" class="Symbol">=</a> <a id="5048" class="Function">REL[</a> <a id="5053" class="Bound">i</a> <a id="5055" class="Function">∈</a> <a id="5057" class="Bound">I</a> <a id="5059" class="Function">]</a> <a id="5061" class="Bound">𝒜</a>
 <a id="5064" class="Keyword">infix</a> <a id="5070" class="Number">6</a> <a id="5072" href="Base.Relations.Continuous.html#4905" class="Function">REL-syntax</a>

</pre>

#### <a id="compatibility-with-general-relations">Compatibility with general relations</a>

<pre class="Agda">

 <a id="5203" class="Comment">-- Lift a relation of tuples up to a relation on tuples of tuples.</a>
 <a id="5271" href="Base.Relations.Continuous.html#5271" class="Function">eval-Rel</a> <a id="5280" class="Symbol">:</a> <a id="5282" class="Symbol">{</a><a id="5283" href="Base.Relations.Continuous.html#5283" class="Bound">I</a> <a id="5285" class="Symbol">:</a> <a id="5287" href="Base.Relations.Continuous.html#4390" class="Function">ar</a><a id="5289" class="Symbol">}{</a><a id="5291" href="Base.Relations.Continuous.html#5291" class="Bound">A</a> <a id="5293" class="Symbol">:</a> <a id="5295" href="Base.Relations.Continuous.html#584" class="Primitive">Type</a> <a id="5300" href="Base.Relations.Continuous.html#820" class="Generalizable">α</a><a id="5301" class="Symbol">}</a> <a id="5303" class="Symbol">→</a> <a id="5305" href="Base.Relations.Continuous.html#4476" class="Function">Rel</a> <a id="5309" href="Base.Relations.Continuous.html#5291" class="Bound">A</a> <a id="5311" href="Base.Relations.Continuous.html#5283" class="Bound">I</a><a id="5312" class="Symbol">{</a><a id="5313" href="Base.Relations.Continuous.html#822" class="Generalizable">ρ</a><a id="5314" class="Symbol">}</a> <a id="5316" class="Symbol">→</a> <a id="5318" class="Symbol">(</a><a id="5319" href="Base.Relations.Continuous.html#5319" class="Bound">J</a> <a id="5321" class="Symbol">:</a> <a id="5323" href="Base.Relations.Continuous.html#4390" class="Function">ar</a><a id="5325" class="Symbol">)</a> <a id="5327" class="Symbol">→</a> <a id="5329" class="Symbol">(</a><a id="5330" href="Base.Relations.Continuous.html#5283" class="Bound">I</a> <a id="5332" class="Symbol">→</a> <a id="5334" href="Base.Relations.Continuous.html#5319" class="Bound">J</a> <a id="5336" class="Symbol">→</a> <a id="5338" href="Base.Relations.Continuous.html#5291" class="Bound">A</a><a id="5339" class="Symbol">)</a> <a id="5341" class="Symbol">→</a> <a id="5343" href="Base.Relations.Continuous.html#584" class="Primitive">Type</a> <a id="5348" class="Symbol">(</a><a id="5349" href="Base.Relations.Continuous.html#4371" class="Bound">𝓥</a> <a id="5351" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="5353" href="Base.Relations.Continuous.html#822" class="Generalizable">ρ</a><a id="5354" class="Symbol">)</a>
 <a id="5357" href="Base.Relations.Continuous.html#5271" class="Function">eval-Rel</a> <a id="5366" href="Base.Relations.Continuous.html#5366" class="Bound">R</a> <a id="5368" href="Base.Relations.Continuous.html#5368" class="Bound">J</a> <a id="5370" href="Base.Relations.Continuous.html#5370" class="Bound">t</a> <a id="5372" class="Symbol">=</a> <a id="5374" class="Symbol">∀</a> <a id="5376" class="Symbol">(</a><a id="5377" href="Base.Relations.Continuous.html#5377" class="Bound">j</a> <a id="5379" class="Symbol">:</a> <a id="5381" href="Base.Relations.Continuous.html#5368" class="Bound">J</a><a id="5382" class="Symbol">)</a> <a id="5384" class="Symbol">→</a> <a id="5386" href="Base.Relations.Continuous.html#5366" class="Bound">R</a> <a id="5388" class="Symbol">λ</a> <a id="5390" href="Base.Relations.Continuous.html#5390" class="Bound">i</a> <a id="5392" class="Symbol">→</a> <a id="5394" href="Base.Relations.Continuous.html#5370" class="Bound">t</a> <a id="5396" href="Base.Relations.Continuous.html#5390" class="Bound">i</a> <a id="5398" href="Base.Relations.Continuous.html#5377" class="Bound">j</a>

</pre>

A relation `R` is compatible with an operation `f` if for every tuple `t` of tuples
belonging to `R`, the tuple whose elements are the result of applying `f` to
sections of `t` also belongs to `R`.

<pre class="Agda">

 <a id="5627" href="Base.Relations.Continuous.html#5627" class="Function">compatible-Rel</a> <a id="5642" class="Symbol">:</a> <a id="5644" class="Symbol">{</a><a id="5645" href="Base.Relations.Continuous.html#5645" class="Bound">I</a> <a id="5647" href="Base.Relations.Continuous.html#5647" class="Bound">J</a> <a id="5649" class="Symbol">:</a> <a id="5651" href="Base.Relations.Continuous.html#4390" class="Function">ar</a><a id="5653" class="Symbol">}{</a><a id="5655" href="Base.Relations.Continuous.html#5655" class="Bound">A</a> <a id="5657" class="Symbol">:</a> <a id="5659" href="Base.Relations.Continuous.html#584" class="Primitive">Type</a> <a id="5664" href="Base.Relations.Continuous.html#820" class="Generalizable">α</a><a id="5665" class="Symbol">}</a> <a id="5667" class="Symbol">→</a> <a id="5669" href="Base.Relations.Discrete.html#6089" class="Function">Op</a><a id="5671" class="Symbol">(</a><a id="5672" href="Base.Relations.Continuous.html#5655" class="Bound">A</a><a id="5673" class="Symbol">)</a> <a id="5675" href="Base.Relations.Continuous.html#5647" class="Bound">J</a> <a id="5677" class="Symbol">→</a> <a id="5679" href="Base.Relations.Continuous.html#4476" class="Function">Rel</a> <a id="5683" href="Base.Relations.Continuous.html#5655" class="Bound">A</a> <a id="5685" href="Base.Relations.Continuous.html#5645" class="Bound">I</a><a id="5686" class="Symbol">{</a><a id="5687" href="Base.Relations.Continuous.html#822" class="Generalizable">ρ</a><a id="5688" class="Symbol">}</a> <a id="5690" class="Symbol">→</a> <a id="5692" href="Base.Relations.Continuous.html#584" class="Primitive">Type</a> <a id="5697" class="Symbol">(</a><a id="5698" href="Base.Relations.Continuous.html#4371" class="Bound">𝓥</a> <a id="5700" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="5702" href="Base.Relations.Continuous.html#820" class="Generalizable">α</a> <a id="5704" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="5706" href="Base.Relations.Continuous.html#822" class="Generalizable">ρ</a><a id="5707" class="Symbol">)</a>
 <a id="5710" href="Base.Relations.Continuous.html#5627" class="Function">compatible-Rel</a> <a id="5725" href="Base.Relations.Continuous.html#5725" class="Bound">f</a> <a id="5727" href="Base.Relations.Continuous.html#5727" class="Bound">R</a>  <a id="5730" class="Symbol">=</a> <a id="5732" class="Symbol">∀</a> <a id="5734" href="Base.Relations.Continuous.html#5734" class="Bound">t</a> <a id="5736" class="Symbol">→</a> <a id="5738" href="Base.Relations.Continuous.html#5271" class="Function">eval-Rel</a> <a id="5747" href="Base.Relations.Continuous.html#5727" class="Bound">R</a> <a id="5749" href="Base.Relations.Discrete.html#6278" class="Function Operator">arity[</a> <a id="5756" href="Base.Relations.Continuous.html#5725" class="Bound">f</a> <a id="5758" href="Base.Relations.Discrete.html#6278" class="Function Operator">]</a> <a id="5760" href="Base.Relations.Continuous.html#5734" class="Bound">t</a> <a id="5762" class="Symbol">→</a> <a id="5764" href="Base.Relations.Continuous.html#5727" class="Bound">R</a> <a id="5766" class="Symbol">λ</a> <a id="5768" href="Base.Relations.Continuous.html#5768" class="Bound">i</a> <a id="5770" class="Symbol">→</a> <a id="5772" href="Base.Relations.Continuous.html#5725" class="Bound">f</a> <a id="5774" class="Symbol">(</a><a id="5775" href="Base.Relations.Continuous.html#5734" class="Bound">t</a> <a id="5777" href="Base.Relations.Continuous.html#5768" class="Bound">i</a><a id="5778" class="Symbol">)</a>
 <a id="5781" class="Comment">-- (inferred type of t is I → J → A)</a>

</pre>


#### <a id="compatibility-of-operations-with-dependent-relations">Compatibility of operations with dependent relations</a>

<pre class="Agda">

 <a id="5971" href="Base.Relations.Continuous.html#5971" class="Function">eval-REL</a> <a id="5980" class="Symbol">:</a>  <a id="5983" class="Symbol">{</a><a id="5984" href="Base.Relations.Continuous.html#5984" class="Bound">I</a> <a id="5986" href="Base.Relations.Continuous.html#5986" class="Bound">J</a> <a id="5988" class="Symbol">:</a> <a id="5990" href="Base.Relations.Continuous.html#4390" class="Function">ar</a><a id="5992" class="Symbol">}{</a><a id="5994" href="Base.Relations.Continuous.html#5994" class="Bound">𝒜</a> <a id="5996" class="Symbol">:</a> <a id="5998" href="Base.Relations.Continuous.html#5984" class="Bound">I</a> <a id="6000" class="Symbol">→</a> <a id="6002" href="Base.Relations.Continuous.html#584" class="Primitive">Type</a> <a id="6007" href="Base.Relations.Continuous.html#820" class="Generalizable">α</a><a id="6008" class="Symbol">}</a>
  <a id="6012" class="Symbol">→</a>          <a id="6023" href="Base.Relations.Continuous.html#4795" class="Function">REL</a> <a id="6027" href="Base.Relations.Continuous.html#5984" class="Bound">I</a> <a id="6029" href="Base.Relations.Continuous.html#5994" class="Bound">𝒜</a> <a id="6031" class="Symbol">{</a><a id="6032" href="Base.Relations.Continuous.html#822" class="Generalizable">ρ</a><a id="6033" class="Symbol">}</a>          <a id="6044" class="Comment">-- the relation type: subsets of Π[ i ∈ I ] 𝒜 i</a>
                                  <a id="6126" class="Comment">-- (where Π[ i ∈ I ] 𝒜 i is a type of dependent functions or &quot;tuples&quot;)</a>
  <a id="6199" class="Symbol">→</a>          <a id="6210" class="Symbol">((</a><a id="6212" href="Base.Relations.Continuous.html#6212" class="Bound">i</a> <a id="6214" class="Symbol">:</a> <a id="6216" href="Base.Relations.Continuous.html#5984" class="Bound">I</a><a id="6217" class="Symbol">)</a> <a id="6219" class="Symbol">→</a> <a id="6221" href="Base.Relations.Continuous.html#5986" class="Bound">J</a> <a id="6223" class="Symbol">→</a> <a id="6225" href="Base.Relations.Continuous.html#5994" class="Bound">𝒜</a> <a id="6227" href="Base.Relations.Continuous.html#6212" class="Bound">i</a><a id="6228" class="Symbol">)</a>  <a id="6231" class="Comment">-- an I-tuple of (𝒥 i)-tuples</a>
  <a id="6263" class="Symbol">→</a>          <a id="6274" href="Base.Relations.Continuous.html#584" class="Primitive">Type</a> <a id="6279" class="Symbol">(</a><a id="6280" href="Base.Relations.Continuous.html#4371" class="Bound">𝓥</a> <a id="6282" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="6284" href="Base.Relations.Continuous.html#822" class="Generalizable">ρ</a><a id="6285" class="Symbol">)</a>
 <a id="6288" href="Base.Relations.Continuous.html#5971" class="Function">eval-REL</a><a id="6296" class="Symbol">{</a><a id="6297" class="Argument">I</a> <a id="6299" class="Symbol">=</a> <a id="6301" href="Base.Relations.Continuous.html#6301" class="Bound">I</a><a id="6302" class="Symbol">}{</a><a id="6304" href="Base.Relations.Continuous.html#6304" class="Bound">J</a><a id="6305" class="Symbol">}{</a><a id="6307" href="Base.Relations.Continuous.html#6307" class="Bound">𝒜</a><a id="6308" class="Symbol">}</a> <a id="6310" href="Base.Relations.Continuous.html#6310" class="Bound">R</a> <a id="6312" href="Base.Relations.Continuous.html#6312" class="Bound">t</a> <a id="6314" class="Symbol">=</a> <a id="6316" class="Symbol">∀</a> <a id="6318" href="Base.Relations.Continuous.html#6318" class="Bound">j</a> <a id="6320" class="Symbol">→</a> <a id="6322" href="Base.Relations.Continuous.html#6310" class="Bound">R</a> <a id="6324" class="Symbol">λ</a> <a id="6326" href="Base.Relations.Continuous.html#6326" class="Bound">i</a> <a id="6328" class="Symbol">→</a> <a id="6330" class="Symbol">(</a><a id="6331" href="Base.Relations.Continuous.html#6312" class="Bound">t</a> <a id="6333" href="Base.Relations.Continuous.html#6326" class="Bound">i</a><a id="6334" class="Symbol">)</a> <a id="6336" href="Base.Relations.Continuous.html#6318" class="Bound">j</a>

 <a id="6340" href="Base.Relations.Continuous.html#6340" class="Function">compatible-REL</a> <a id="6355" class="Symbol">:</a>  <a id="6358" class="Symbol">{</a><a id="6359" href="Base.Relations.Continuous.html#6359" class="Bound">I</a> <a id="6361" href="Base.Relations.Continuous.html#6361" class="Bound">J</a> <a id="6363" class="Symbol">:</a> <a id="6365" href="Base.Relations.Continuous.html#4390" class="Function">ar</a><a id="6367" class="Symbol">}{</a><a id="6369" href="Base.Relations.Continuous.html#6369" class="Bound">𝒜</a> <a id="6371" class="Symbol">:</a> <a id="6373" href="Base.Relations.Continuous.html#6359" class="Bound">I</a> <a id="6375" class="Symbol">→</a> <a id="6377" href="Base.Relations.Continuous.html#584" class="Primitive">Type</a> <a id="6382" href="Base.Relations.Continuous.html#820" class="Generalizable">α</a><a id="6383" class="Symbol">}</a>
  <a id="6387" class="Symbol">→</a>                <a id="6404" class="Symbol">(∀</a> <a id="6407" href="Base.Relations.Continuous.html#6407" class="Bound">i</a> <a id="6409" class="Symbol">→</a> <a id="6411" href="Base.Relations.Discrete.html#6089" class="Function">Op</a> <a id="6414" class="Symbol">(</a><a id="6415" href="Base.Relations.Continuous.html#6369" class="Bound">𝒜</a> <a id="6417" href="Base.Relations.Continuous.html#6407" class="Bound">i</a><a id="6418" class="Symbol">)</a> <a id="6420" href="Base.Relations.Continuous.html#6361" class="Bound">J</a><a id="6421" class="Symbol">)</a>  <a id="6424" class="Comment">-- for each i : I, an operation of type  Op(𝒜 i){J} = (J → 𝒜 i) → 𝒜 i</a>
  <a id="6496" class="Symbol">→</a>                <a id="6513" href="Base.Relations.Continuous.html#4795" class="Function">REL</a> <a id="6517" href="Base.Relations.Continuous.html#6359" class="Bound">I</a> <a id="6519" href="Base.Relations.Continuous.html#6369" class="Bound">𝒜</a> <a id="6521" class="Symbol">{</a><a id="6522" href="Base.Relations.Continuous.html#822" class="Generalizable">ρ</a><a id="6523" class="Symbol">}</a>         <a id="6533" class="Comment">-- a subset of Π[ i ∈ I ] 𝒜 i</a>
                                       <a id="6602" class="Comment">-- (where Π[ i ∈ I ] 𝒜 i is a type of dependent functions or &quot;tuples&quot;)</a>
  <a id="6675" class="Symbol">→</a>                <a id="6692" href="Base.Relations.Continuous.html#584" class="Primitive">Type</a> <a id="6697" class="Symbol">(</a><a id="6698" href="Base.Relations.Continuous.html#4371" class="Bound">𝓥</a> <a id="6700" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="6702" href="Base.Relations.Continuous.html#820" class="Generalizable">α</a> <a id="6704" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="6706" href="Base.Relations.Continuous.html#822" class="Generalizable">ρ</a><a id="6707" class="Symbol">)</a>
 <a id="6710" href="Base.Relations.Continuous.html#6340" class="Function">compatible-REL</a> <a id="6725" class="Symbol">{</a><a id="6726" class="Argument">I</a> <a id="6728" class="Symbol">=</a> <a id="6730" href="Base.Relations.Continuous.html#6730" class="Bound">I</a><a id="6731" class="Symbol">}{</a><a id="6733" href="Base.Relations.Continuous.html#6733" class="Bound">J</a><a id="6734" class="Symbol">}{</a><a id="6736" href="Base.Relations.Continuous.html#6736" class="Bound">𝒜</a><a id="6737" class="Symbol">}</a> <a id="6739" href="Base.Relations.Continuous.html#6739" class="Bound">𝑓</a> <a id="6741" href="Base.Relations.Continuous.html#6741" class="Bound">R</a>  <a id="6744" class="Symbol">=</a> <a id="6746" href="Base.Overture.Preliminaries.html#6090" class="Function">Π[</a> <a id="6749" href="Base.Relations.Continuous.html#6749" class="Bound">t</a> <a id="6751" href="Base.Overture.Preliminaries.html#6090" class="Function">∈</a> <a id="6753" class="Symbol">((</a><a id="6755" href="Base.Relations.Continuous.html#6755" class="Bound">i</a> <a id="6757" class="Symbol">:</a> <a id="6759" href="Base.Relations.Continuous.html#6730" class="Bound">I</a><a id="6760" class="Symbol">)</a> <a id="6762" class="Symbol">→</a> <a id="6764" href="Base.Relations.Continuous.html#6733" class="Bound">J</a> <a id="6766" class="Symbol">→</a> <a id="6768" href="Base.Relations.Continuous.html#6736" class="Bound">𝒜</a> <a id="6770" href="Base.Relations.Continuous.html#6755" class="Bound">i</a><a id="6771" class="Symbol">)</a> <a id="6773" href="Base.Overture.Preliminaries.html#6090" class="Function">]</a> <a id="6775" href="Base.Relations.Continuous.html#5971" class="Function">eval-REL</a> <a id="6784" href="Base.Relations.Continuous.html#6741" class="Bound">R</a> <a id="6786" href="Base.Relations.Continuous.html#6749" class="Bound">t</a>

</pre>

The definition `eval-REL` denotes an *evaluation* function which lifts an `I`-ary relation to an `(I → J)`-ary relation.
The lifted relation will relate an `I`-tuple of `J`-tuples when the `I`-slices (or rows) of the `J`-tuples belong
to the original relation. The second definition, compatible-REL,  denotes compatibility of an operation with a continuous relation.


#### <a id="detailed-explanation-of-the-dependent-relation-type">Detailed explanation of the dependent relation type</a>

The last two definitions above may be hard to comprehend at first, so perhaps a more detailed explanation of the semantics of these deifnitions would help.

First, one should internalize the fact that `𝒶 : I → J → A` denotes an `I`-tuple of `J`-tuples of inhabitants of `A`.

Next, recall that a continuous relation `R` denotes a certain collection of `I`-tuples (if `x : I → A`, then `R x` asserts that `x` belongs to `R`).
For such `R`, the type `eval-REL R` represents a certain collection of `I`-tuples of `J`-tuples, namely, the tuples `𝒶 : I → J → A` for which `eval-REL R 𝒶` holds.

For simplicity, pretend for a moment that `J` is a finite set, say, `{1, 2, ..., J}`, so that we can write down a couple of the `J`-tuples as columns.
For example, here are the i-th and k-th columns (for some `i k : I`).

```
𝒶 i 1      𝒶 k 1
𝒶 i 2      𝒶 k 2  <-- (a row of I such columns forms an I-tuple)
  ⋮          ⋮
𝒶 i J      𝒶 k J
```

Now `eval-REL R 𝒶` is defined by `∀ j → R (λ i → 𝒶 i j)` which asserts that each row of the `I` columns shown above belongs to the original relation `R`.
Finally, `compatible-REL` takes

*  an `I`-tuple (`λ i → (𝑓 i)`) of `J`-ary operations, where for each i the type of `𝑓 i` is `(J → 𝒜 i) → 𝒜 i`, and
*  an `I`-tuple (`𝒶 : I → J → A`) of `J`-tuples
and determines whether the `I`-tuple `λ i → (𝑓 i) (𝑎 i)` belongs to `R`.

--------------------------------------

<span style="float:left;">[← Base.Relations.Discrete](Base.Relations.Discrete.html)</span>
<span style="float:right;">[Base.Relations.Properties →](Base.Relations.Properties.html)</span>

{% include UALib.Links.md %}

[agda-algebras development team]: https://github.com/ualib/agda-algebras#the-agda-algebras-development-team
