---
layout: default
title : "Setoid.Varieties.Preservation (The Agda Universal Algebra Library)"
date : "2021-09-24"
author: "agda-algebras development team"
---

### <a id="Equation preservation">Equation preservation for setoid algebras</a>

This is the [Setoid.Varieties.Preservation][] module of the [Agda Universal Algebra Library][] where we show
that the classes \af H \ab{𝒦}, \af S \ab{𝒦}, \af P \ab{𝒦}, and \af V \ab{𝒦} all satisfy the
same identities.

<pre class="Agda">

<a id="478" class="Symbol">{-#</a> <a id="482" class="Keyword">OPTIONS</a> <a id="490" class="Pragma">--without-K</a> <a id="502" class="Pragma">--exact-split</a> <a id="516" class="Pragma">--safe</a> <a id="523" class="Symbol">#-}</a>

<a id="528" class="Keyword">open</a> <a id="533" class="Keyword">import</a> <a id="540" href="Base.Algebras.Basic.html" class="Module">Base.Algebras.Basic</a> <a id="560" class="Keyword">using</a> <a id="566" class="Symbol">(</a> <a id="568" href="Base.Algebras.Basic.html#1162" class="Generalizable">𝓞</a> <a id="570" class="Symbol">;</a> <a id="572" href="Base.Algebras.Basic.html#1164" class="Generalizable">𝓥</a> <a id="574" class="Symbol">;</a> <a id="576" href="Base.Algebras.Basic.html#3890" class="Function">Signature</a> <a id="586" class="Symbol">)</a>

<a id="589" class="Keyword">module</a> <a id="596" href="Setoid.Varieties.Preservation.html" class="Module">Setoid.Varieties.Preservation</a> <a id="626" class="Symbol">{</a><a id="627" href="Setoid.Varieties.Preservation.html#627" class="Bound">𝑆</a> <a id="629" class="Symbol">:</a> <a id="631" href="Base.Algebras.Basic.html#3890" class="Function">Signature</a> <a id="641" href="Base.Algebras.Basic.html#1162" class="Generalizable">𝓞</a> <a id="643" href="Base.Algebras.Basic.html#1164" class="Generalizable">𝓥</a><a id="644" class="Symbol">}</a> <a id="646" class="Keyword">where</a>

<a id="653" class="Comment">-- Imports from Agda and the Agda Standard Library -----------------------------------------------</a>
<a id="752" class="Keyword">open</a> <a id="757" class="Keyword">import</a> <a id="764" href="Agda.Primitive.html" class="Module">Agda.Primitive</a>         <a id="787" class="Keyword">using</a> <a id="793" class="Symbol">(</a> <a id="795" href="Agda.Primitive.html#597" class="Postulate">Level</a> <a id="801" class="Symbol">;</a> <a id="803" href="Agda.Primitive.html#810" class="Primitive Operator">_⊔_</a> <a id="807" class="Symbol">;</a> <a id="809" href="Agda.Primitive.html#780" class="Primitive">lsuc</a> <a id="814" class="Symbol">)</a>  <a id="817" class="Keyword">renaming</a> <a id="826" class="Symbol">(</a> <a id="828" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="832" class="Symbol">to</a> <a id="835" class="Primitive">Type</a> <a id="840" class="Symbol">)</a>
<a id="842" class="Keyword">open</a> <a id="847" class="Keyword">import</a> <a id="854" href="Data.Product.html" class="Module">Data.Product</a>           <a id="877" class="Keyword">using</a> <a id="883" class="Symbol">(</a> <a id="885" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">_,_</a> <a id="889" class="Symbol">)</a>                 <a id="907" class="Keyword">renaming</a> <a id="916" class="Symbol">(</a> <a id="918" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="924" class="Symbol">to</a> <a id="927" class="Field">fst</a> <a id="931" class="Symbol">;</a> <a id="933" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="939" class="Symbol">to</a> <a id="942" class="Field">snd</a> <a id="946" class="Symbol">)</a>
<a id="948" class="Keyword">open</a> <a id="953" class="Keyword">import</a> <a id="960" href="Data.Unit.Polymorphic.html" class="Module">Data.Unit.Polymorphic</a>  <a id="983" class="Keyword">using</a> <a id="989" class="Symbol">(</a> <a id="991" href="Data.Unit.Polymorphic.Base.html#480" class="Function">⊤</a> <a id="993" class="Symbol">)</a>
<a id="995" class="Keyword">open</a> <a id="1000" class="Keyword">import</a> <a id="1007" href="Function.html" class="Module">Function</a>               <a id="1030" class="Keyword">using</a> <a id="1036" class="Symbol">(</a> <a id="1038" href="Function.Base.html#1031" class="Function Operator">_∘_</a> <a id="1042" class="Symbol">)</a>
<a id="1044" class="Keyword">open</a> <a id="1049" class="Keyword">import</a> <a id="1056" href="Function.Bundles.html" class="Module">Function.Bundles</a>       <a id="1079" class="Keyword">using</a> <a id="1085" class="Symbol">()</a>                      <a id="1109" class="Keyword">renaming</a> <a id="1118" class="Symbol">(</a> <a id="1120" href="Function.Bundles.html#1868" class="Record">Func</a> <a id="1125" class="Symbol">to</a> <a id="1128" class="Record">_⟶_</a> <a id="1132" class="Symbol">)</a>
<a id="1134" class="Keyword">open</a> <a id="1139" class="Keyword">import</a> <a id="1146" href="Relation.Binary.html" class="Module">Relation.Binary</a>        <a id="1169" class="Keyword">using</a> <a id="1175" class="Symbol">(</a> <a id="1177" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="1184" class="Symbol">)</a>
<a id="1186" class="Keyword">open</a> <a id="1191" class="Keyword">import</a> <a id="1198" href="Relation.Unary.html" class="Module">Relation.Unary</a>         <a id="1221" class="Keyword">using</a> <a id="1227" class="Symbol">(</a> <a id="1229" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="1234" class="Symbol">;</a> <a id="1236" href="Relation.Unary.html#1742" class="Function Operator">_⊆_</a> <a id="1240" class="Symbol">;</a> <a id="1242" href="Relation.Unary.html#1523" class="Function Operator">_∈_</a> <a id="1246" class="Symbol">)</a>
<a id="1248" class="Keyword">import</a> <a id="1255" href="Relation.Binary.Reasoning.Setoid.html" class="Module">Relation.Binary.Reasoning.Setoid</a> <a id="1288" class="Symbol">as</a> <a id="1291" class="Module">SetoidReasoning</a>

<a id="1308" class="Comment">-- Imports from the Agda Universal Algebra Library ---------------------------------------------</a>
<a id="1405" class="Keyword">open</a> <a id="1410" class="Keyword">import</a> <a id="1417" href="Base.Overture.Preliminaries.html" class="Module">Base.Overture.Preliminaries</a>                      <a id="1466" class="Keyword">using</a> <a id="1472" class="Symbol">(</a> <a id="1474" href="Base.Overture.Preliminaries.html#4402" class="Function Operator">∣_∣</a> <a id="1478" class="Symbol">;</a> <a id="1480" href="Base.Overture.Preliminaries.html#4440" class="Function Operator">∥_∥</a> <a id="1484" class="Symbol">)</a>
<a id="1486" class="Keyword">open</a> <a id="1491" class="Keyword">import</a> <a id="1498" href="Base.Terms.Basic.html" class="Module">Base.Terms.Basic</a>                        <a id="1538" class="Symbol">{</a><a id="1539" class="Argument">𝑆</a> <a id="1541" class="Symbol">=</a> <a id="1543" href="Setoid.Varieties.Preservation.html#627" class="Bound">𝑆</a><a id="1544" class="Symbol">}</a>  <a id="1547" class="Keyword">using</a> <a id="1553" class="Symbol">(</a> <a id="1555" href="Base.Terms.Basic.html#2021" class="Datatype">Term</a> <a id="1560" class="Symbol">)</a>
<a id="1562" class="Keyword">open</a> <a id="1567" class="Keyword">import</a> <a id="1574" href="Setoid.Overture.Surjective.html" class="Module">Setoid.Overture.Surjective</a>                       <a id="1623" class="Keyword">using</a> <a id="1629" class="Symbol">(</a> <a id="1631" href="Setoid.Overture.Surjective.html#2049" class="Function">IsSurjective</a> <a id="1644" class="Symbol">;</a> <a id="1646" href="Setoid.Overture.Surjective.html#3153" class="Function">SurjInv</a> <a id="1654" class="Symbol">)</a>
                                                             <a id="1717" class="Keyword">using</a> <a id="1723" class="Symbol">(</a> <a id="1725" href="Setoid.Overture.Surjective.html#3422" class="Function">SurjInvIsInverseʳ</a> <a id="1743" class="Symbol">)</a>
<a id="1745" class="Keyword">open</a> <a id="1750" class="Keyword">import</a> <a id="1757" href="Setoid.Algebras.Basic.html" class="Module">Setoid.Algebras.Basic</a>                   <a id="1797" class="Symbol">{</a><a id="1798" class="Argument">𝑆</a> <a id="1800" class="Symbol">=</a> <a id="1802" href="Setoid.Varieties.Preservation.html#627" class="Bound">𝑆</a><a id="1803" class="Symbol">}</a>  <a id="1806" class="Keyword">using</a> <a id="1812" class="Symbol">(</a> <a id="1814" href="Setoid.Algebras.Basic.html#2890" class="Record">Algebra</a> <a id="1822" class="Symbol">;</a> <a id="1824" href="Setoid.Algebras.Basic.html#1187" class="Function">ov</a> <a id="1827" class="Symbol">;</a> <a id="1829" href="Setoid.Algebras.Basic.html#3636" class="Function Operator">𝕌[_]</a> <a id="1834" class="Symbol">;</a> <a id="1836" href="Setoid.Algebras.Basic.html#5633" class="Function">Lift-Alg</a> <a id="1845" class="Symbol">)</a>
<a id="1847" class="Keyword">open</a> <a id="1852" class="Keyword">import</a> <a id="1859" href="Setoid.Algebras.Products.html" class="Module">Setoid.Algebras.Products</a>                <a id="1899" class="Symbol">{</a><a id="1900" class="Argument">𝑆</a> <a id="1902" class="Symbol">=</a> <a id="1904" href="Setoid.Varieties.Preservation.html#627" class="Bound">𝑆</a><a id="1905" class="Symbol">}</a>  <a id="1908" class="Keyword">using</a> <a id="1914" class="Symbol">(</a> <a id="1916" href="Setoid.Algebras.Products.html#1792" class="Function">⨅</a> <a id="1918" class="Symbol">)</a>
<a id="1920" class="Keyword">open</a> <a id="1925" class="Keyword">import</a> <a id="1932" href="Setoid.Homomorphisms.Basic.html" class="Module">Setoid.Homomorphisms.Basic</a>              <a id="1972" class="Symbol">{</a><a id="1973" class="Argument">𝑆</a> <a id="1975" class="Symbol">=</a> <a id="1977" href="Setoid.Varieties.Preservation.html#627" class="Bound">𝑆</a><a id="1978" class="Symbol">}</a>  <a id="1981" class="Keyword">using</a> <a id="1987" class="Symbol">(</a> <a id="1989" href="Setoid.Homomorphisms.Basic.html#1980" class="Function">hom</a> <a id="1993" class="Symbol">)</a>
<a id="1995" class="Keyword">open</a> <a id="2000" class="Keyword">import</a> <a id="2007" href="Setoid.Homomorphisms.Isomorphisms.html" class="Module">Setoid.Homomorphisms.Isomorphisms</a>       <a id="2047" class="Symbol">{</a><a id="2048" class="Argument">𝑆</a> <a id="2050" class="Symbol">=</a> <a id="2052" href="Setoid.Varieties.Preservation.html#627" class="Bound">𝑆</a><a id="2053" class="Symbol">}</a>  <a id="2056" class="Keyword">using</a> <a id="2062" class="Symbol">(</a> <a id="2064" href="Setoid.Homomorphisms.Isomorphisms.html#16207" class="Function">≅⨅⁺-refl</a> <a id="2073" class="Symbol">;</a> <a id="2075" href="Setoid.Homomorphisms.Isomorphisms.html#4324" class="Function">≅-refl</a> <a id="2082" class="Symbol">;</a> <a id="2084" href="Setoid.Homomorphisms.Isomorphisms.html#4459" class="Function">≅-sym</a> <a id="2090" class="Symbol">)</a>
                                                             <a id="2153" class="Keyword">using</a> <a id="2159" class="Symbol">(</a> <a id="2161" href="Setoid.Homomorphisms.Isomorphisms.html#3114" class="Record Operator">_≅_</a> <a id="2165" class="Symbol">;</a> <a id="2167" href="Setoid.Homomorphisms.Isomorphisms.html#4554" class="Function">≅-trans</a> <a id="2175" class="Symbol">;</a> <a id="2177" href="Setoid.Homomorphisms.Isomorphisms.html#6469" class="Function">Lift-≅</a> <a id="2184" class="Symbol">)</a>
<a id="2186" class="Keyword">open</a> <a id="2191" class="Keyword">import</a> <a id="2198" href="Setoid.Homomorphisms.HomomorphicImages.html" class="Module">Setoid.Homomorphisms.HomomorphicImages</a>  <a id="2238" class="Symbol">{</a><a id="2239" class="Argument">𝑆</a> <a id="2241" class="Symbol">=</a> <a id="2243" href="Setoid.Varieties.Preservation.html#627" class="Bound">𝑆</a><a id="2244" class="Symbol">}</a>  <a id="2247" class="Keyword">using</a> <a id="2253" class="Symbol">(</a> <a id="2255" href="Setoid.Homomorphisms.HomomorphicImages.html#2748" class="Function">IdHomImage</a> <a id="2266" class="Symbol">)</a>
<a id="2268" class="Keyword">open</a> <a id="2273" class="Keyword">import</a> <a id="2280" href="Setoid.Terms.Basic.html" class="Module">Setoid.Terms.Basic</a>                      <a id="2320" class="Symbol">{</a><a id="2321" class="Argument">𝑆</a> <a id="2323" class="Symbol">=</a> <a id="2325" href="Setoid.Varieties.Preservation.html#627" class="Bound">𝑆</a><a id="2326" class="Symbol">}</a>  <a id="2329" class="Keyword">using</a> <a id="2335" class="Symbol">(</a> <a id="2337" class="Keyword">module</a> <a id="2344" href="Setoid.Terms.Basic.html#3906" class="Module">Environment</a><a id="2355" class="Symbol">)</a>
<a id="2357" class="Keyword">open</a> <a id="2362" class="Keyword">import</a> <a id="2369" href="Setoid.Terms.Operations.html" class="Module">Setoid.Terms.Operations</a>                 <a id="2409" class="Symbol">{</a><a id="2410" class="Argument">𝑆</a> <a id="2412" class="Symbol">=</a> <a id="2414" href="Setoid.Varieties.Preservation.html#627" class="Bound">𝑆</a><a id="2415" class="Symbol">}</a>  <a id="2418" class="Keyword">using</a> <a id="2424" class="Symbol">(</a> <a id="2426" href="Setoid.Terms.Operations.html#4539" class="Function">comm-hom-term</a> <a id="2440" class="Symbol">)</a>
<a id="2442" class="Keyword">open</a> <a id="2447" class="Keyword">import</a> <a id="2454" href="Setoid.Subalgebras.Subalgebras.html" class="Module">Setoid.Subalgebras.Subalgebras</a>          <a id="2494" class="Symbol">{</a><a id="2495" class="Argument">𝑆</a> <a id="2497" class="Symbol">=</a> <a id="2499" href="Setoid.Varieties.Preservation.html#627" class="Bound">𝑆</a><a id="2500" class="Symbol">}</a>  <a id="2503" class="Keyword">using</a> <a id="2509" class="Symbol">(</a> <a id="2511" href="Setoid.Subalgebras.Subalgebras.html#1646" class="Function Operator">_≤_</a> <a id="2515" class="Symbol">;</a> <a id="2517" href="Setoid.Subalgebras.Subalgebras.html#3426" class="Function Operator">_≤c_</a> <a id="2522" class="Symbol">)</a>
<a id="2524" class="Keyword">open</a> <a id="2529" class="Keyword">import</a> <a id="2536" href="Setoid.Subalgebras.Properties.html" class="Module">Setoid.Subalgebras.Properties</a>           <a id="2576" class="Symbol">{</a><a id="2577" class="Argument">𝑆</a> <a id="2579" class="Symbol">=</a> <a id="2581" href="Setoid.Varieties.Preservation.html#627" class="Bound">𝑆</a><a id="2582" class="Symbol">}</a>  <a id="2585" class="Keyword">using</a> <a id="2591" class="Symbol">(</a> <a id="2593" href="Setoid.Subalgebras.Properties.html#6961" class="Function">⨅-≤</a> <a id="2597" class="Symbol">;</a> <a id="2599" href="Setoid.Subalgebras.Properties.html#3434" class="Function">≅-trans-≤</a> <a id="2609" class="Symbol">;</a> <a id="2611" href="Setoid.Subalgebras.Properties.html#2741" class="Function">≤-reflexive</a> <a id="2623" class="Symbol">)</a>
<a id="2625" class="Keyword">open</a> <a id="2630" class="Keyword">import</a> <a id="2637" href="Setoid.Varieties.Closure.html" class="Module">Setoid.Varieties.Closure</a>                <a id="2677" class="Symbol">{</a><a id="2678" class="Argument">𝑆</a> <a id="2680" class="Symbol">=</a> <a id="2682" href="Setoid.Varieties.Preservation.html#627" class="Bound">𝑆</a><a id="2683" class="Symbol">}</a>  <a id="2686" class="Keyword">using</a> <a id="2692" class="Symbol">(</a> <a id="2694" href="Setoid.Varieties.Closure.html#2853" class="Function">H</a> <a id="2696" class="Symbol">;</a> <a id="2698" href="Setoid.Varieties.Closure.html#2990" class="Function">S</a> <a id="2700" class="Symbol">;</a> <a id="2702" href="Setoid.Varieties.Closure.html#3116" class="Function">P</a> <a id="2704" class="Symbol">;</a> <a id="2706" href="Setoid.Varieties.Closure.html#3595" class="Function">V</a> <a id="2708" class="Symbol">;</a> <a id="2710" href="Setoid.Varieties.Closure.html#5721" class="Function">S-expa</a> <a id="2717" class="Symbol">;</a> <a id="2719" href="Setoid.Varieties.Closure.html#5611" class="Function">H-expa</a> <a id="2726" class="Symbol">)</a>
                                                             <a id="2789" class="Keyword">using</a> <a id="2795" class="Symbol">(</a> <a id="2797" href="Setoid.Varieties.Closure.html#6056" class="Function">P-expa</a> <a id="2804" class="Symbol">;</a> <a id="2806" href="Setoid.Varieties.Closure.html#6810" class="Function">V-expa</a> <a id="2813" class="Symbol">;</a> <a id="2815" href="Setoid.Varieties.Closure.html#2417" class="Function">Level-closure</a> <a id="2829" class="Symbol">)</a>
<a id="2831" class="Keyword">open</a> <a id="2836" class="Keyword">import</a> <a id="2843" href="Setoid.Varieties.Properties.html" class="Module">Setoid.Varieties.Properties</a>             <a id="2883" class="Symbol">{</a><a id="2884" class="Argument">𝑆</a> <a id="2886" class="Symbol">=</a> <a id="2888" href="Setoid.Varieties.Preservation.html#627" class="Bound">𝑆</a><a id="2889" class="Symbol">}</a>  <a id="2892" class="Keyword">using</a> <a id="2898" class="Symbol">(</a> <a id="2900" href="Setoid.Varieties.Properties.html#5154" class="Function">⊧-H-invar</a> <a id="2910" class="Symbol">;</a> <a id="2912" href="Setoid.Varieties.Properties.html#6452" class="Function">⊧-S-invar</a> <a id="2922" class="Symbol">)</a>
                                                             <a id="2985" class="Keyword">using</a> <a id="2991" class="Symbol">(</a> <a id="2993" href="Setoid.Varieties.Properties.html#7730" class="Function">⊧-P-invar</a> <a id="3003" class="Symbol">;</a> <a id="3005" href="Setoid.Varieties.Properties.html#3646" class="Function">⊧-I-invar</a> <a id="3015" class="Symbol">)</a>
<a id="3017" class="Keyword">open</a> <a id="3022" class="Keyword">import</a> <a id="3029" href="Setoid.Varieties.SoundAndComplete.html" class="Module">Setoid.Varieties.SoundAndComplete</a>        <a id="3070" class="Symbol">{</a><a id="3071" class="Argument">𝑆</a> <a id="3073" class="Symbol">=</a> <a id="3075" href="Setoid.Varieties.Preservation.html#627" class="Bound">𝑆</a><a id="3076" class="Symbol">}</a> <a id="3078" class="Keyword">using</a> <a id="3084" class="Symbol">(</a> <a id="3086" href="Setoid.Varieties.SoundAndComplete.html#2265" class="Function Operator">_⊧_</a> <a id="3090" class="Symbol">;</a> <a id="3092" href="Setoid.Varieties.SoundAndComplete.html#2676" class="Function Operator">_⊨_</a> <a id="3096" class="Symbol">;</a> <a id="3098" href="Setoid.Varieties.SoundAndComplete.html#2373" class="Function Operator">_⊫_</a> <a id="3102" class="Symbol">;</a> <a id="3104" href="Setoid.Varieties.SoundAndComplete.html#2057" class="Record">Eq</a> <a id="3107" class="Symbol">;</a> <a id="3109" href="Setoid.Varieties.SoundAndComplete.html#2093" class="InductiveConstructor Operator">_≈̇_</a> <a id="3114" class="Symbol">)</a>
                                                             <a id="3177" class="Keyword">using</a> <a id="3183" class="Symbol">(</a> <a id="3185" href="Setoid.Varieties.SoundAndComplete.html#2124" class="Field">lhs</a> <a id="3189" class="Symbol">;</a> <a id="3191" href="Setoid.Varieties.SoundAndComplete.html#2143" class="Field">rhs</a> <a id="3195" class="Symbol">;</a> <a id="3197" href="Setoid.Varieties.SoundAndComplete.html#4181" class="Datatype Operator">_⊢_▹_≈_</a> <a id="3205" class="Symbol">;</a> <a id="3207" href="Setoid.Varieties.SoundAndComplete.html#3308" class="Function">Th</a><a id="3209" class="Symbol">)</a>

<a id="3212" class="Keyword">open</a> <a id="3217" href="Setoid.Varieties.Preservation.html#1128" class="Module">_⟶_</a>      <a id="3226" class="Keyword">using</a> <a id="3232" class="Symbol">(</a> <a id="3234" href="Function.Bundles.html#1938" class="Field">cong</a> <a id="3239" class="Symbol">)</a> <a id="3241" class="Keyword">renaming</a> <a id="3250" class="Symbol">(</a> <a id="3252" href="Function.Bundles.html#1919" class="Field">f</a> <a id="3254" class="Symbol">to</a> <a id="3257" class="Field">_⟨$⟩_</a> <a id="3263" class="Symbol">)</a>
<a id="3265" class="Keyword">open</a> <a id="3270" href="Setoid.Algebras.Basic.html#2890" class="Module">Algebra</a>  <a id="3279" class="Keyword">using</a> <a id="3285" class="Symbol">(</a> <a id="3287" href="Setoid.Algebras.Basic.html#2947" class="Field">Domain</a> <a id="3294" class="Symbol">)</a>

</pre>



#### <a id="closure-properties">Closure properties</a>

The types defined above represent operators with useful closure properties. We now prove a handful of such properties that we need later.

The next lemma would be too obvious to care about were it not for the fact that we'll need it later, so it too must be formalized.

<pre class="Agda">

<a id="3652" class="Keyword">module</a> <a id="3659" href="Setoid.Varieties.Preservation.html#3659" class="Module">_</a>  <a id="3662" class="Symbol">{</a><a id="3663" href="Setoid.Varieties.Preservation.html#3663" class="Bound">α</a> <a id="3665" href="Setoid.Varieties.Preservation.html#3665" class="Bound">ρᵃ</a> <a id="3668" href="Setoid.Varieties.Preservation.html#3668" class="Bound">ℓ</a> <a id="3670" class="Symbol">:</a> <a id="3672" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="3677" class="Symbol">}{</a><a id="3679" href="Setoid.Varieties.Preservation.html#3679" class="Bound">𝒦</a> <a id="3681" class="Symbol">:</a> <a id="3683" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="3687" class="Symbol">(</a><a id="3688" href="Setoid.Algebras.Basic.html#2890" class="Record">Algebra</a> <a id="3696" href="Setoid.Varieties.Preservation.html#3663" class="Bound">α</a> <a id="3698" href="Setoid.Varieties.Preservation.html#3665" class="Bound">ρᵃ</a><a id="3700" class="Symbol">)</a> <a id="3702" class="Symbol">(</a><a id="3703" href="Setoid.Varieties.Preservation.html#3663" class="Bound">α</a> <a id="3705" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="3707" href="Setoid.Varieties.Preservation.html#3665" class="Bound">ρᵃ</a> <a id="3710" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="3712" href="Setoid.Algebras.Basic.html#1187" class="Function">ov</a> <a id="3715" href="Setoid.Varieties.Preservation.html#3668" class="Bound">ℓ</a><a id="3716" class="Symbol">)}</a> <a id="3719" class="Keyword">where</a>

 <a id="3727" class="Keyword">private</a>
  <a id="3737" href="Setoid.Varieties.Preservation.html#3737" class="Function">a</a> <a id="3739" class="Symbol">=</a> <a id="3741" href="Setoid.Varieties.Preservation.html#3663" class="Bound">α</a> <a id="3743" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="3745" href="Setoid.Varieties.Preservation.html#3665" class="Bound">ρᵃ</a>
  <a id="3750" href="Setoid.Varieties.Preservation.html#3750" class="Function">oaℓ</a> <a id="3754" class="Symbol">=</a> <a id="3756" href="Setoid.Algebras.Basic.html#1187" class="Function">ov</a> <a id="3759" class="Symbol">(</a><a id="3760" href="Setoid.Varieties.Preservation.html#3737" class="Function">a</a> <a id="3762" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="3764" href="Setoid.Varieties.Preservation.html#3668" class="Bound">ℓ</a><a id="3765" class="Symbol">)</a>

 <a id="3769" href="Setoid.Varieties.Preservation.html#3769" class="Function">S⊆SP</a> <a id="3774" class="Symbol">:</a> <a id="3776" class="Symbol">∀{</a><a id="3778" href="Setoid.Varieties.Preservation.html#3778" class="Bound">ι</a><a id="3779" class="Symbol">}</a> <a id="3781" class="Symbol">→</a> <a id="3783" href="Setoid.Varieties.Closure.html#2990" class="Function">S</a> <a id="3785" href="Setoid.Varieties.Preservation.html#3668" class="Bound">ℓ</a> <a id="3787" href="Setoid.Varieties.Preservation.html#3679" class="Bound">𝒦</a> <a id="3789" href="Relation.Unary.html#1742" class="Function Operator">⊆</a> <a id="3791" href="Setoid.Varieties.Closure.html#2990" class="Function">S</a> <a id="3793" class="Symbol">{</a><a id="3794" class="Argument">β</a> <a id="3796" class="Symbol">=</a> <a id="3798" href="Setoid.Varieties.Preservation.html#3663" class="Bound">α</a><a id="3799" class="Symbol">}{</a><a id="3801" href="Setoid.Varieties.Preservation.html#3665" class="Bound">ρᵃ</a><a id="3803" class="Symbol">}</a> <a id="3805" class="Symbol">(</a><a id="3806" href="Setoid.Varieties.Preservation.html#3737" class="Function">a</a> <a id="3808" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="3810" href="Setoid.Varieties.Preservation.html#3668" class="Bound">ℓ</a> <a id="3812" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="3814" href="Setoid.Varieties.Preservation.html#3778" class="Bound">ι</a><a id="3815" class="Symbol">)</a> <a id="3817" class="Symbol">(</a><a id="3818" href="Setoid.Varieties.Closure.html#3116" class="Function">P</a> <a id="3820" class="Symbol">{</a><a id="3821" class="Argument">β</a> <a id="3823" class="Symbol">=</a> <a id="3825" href="Setoid.Varieties.Preservation.html#3663" class="Bound">α</a><a id="3826" class="Symbol">}{</a><a id="3828" href="Setoid.Varieties.Preservation.html#3665" class="Bound">ρᵃ</a><a id="3830" class="Symbol">}</a> <a id="3832" href="Setoid.Varieties.Preservation.html#3668" class="Bound">ℓ</a> <a id="3834" href="Setoid.Varieties.Preservation.html#3778" class="Bound">ι</a> <a id="3836" href="Setoid.Varieties.Preservation.html#3679" class="Bound">𝒦</a><a id="3837" class="Symbol">)</a>
 <a id="3840" href="Setoid.Varieties.Preservation.html#3769" class="Function">S⊆SP</a> <a id="3845" class="Symbol">{</a><a id="3846" href="Setoid.Varieties.Preservation.html#3846" class="Bound">ι</a><a id="3847" class="Symbol">}</a> <a id="3849" class="Symbol">(</a><a id="3850" href="Setoid.Varieties.Preservation.html#3850" class="Bound">𝑨</a> <a id="3852" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3854" class="Symbol">(</a><a id="3855" href="Setoid.Varieties.Preservation.html#3855" class="Bound">kA</a> <a id="3858" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3860" href="Setoid.Varieties.Preservation.html#3860" class="Bound">B≤A</a> <a id="3864" class="Symbol">))</a> <a id="3867" class="Symbol">=</a> <a id="3869" href="Setoid.Varieties.Preservation.html#3850" class="Bound">𝑨</a> <a id="3871" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3873" class="Symbol">(</a><a id="3874" href="Setoid.Varieties.Preservation.html#3894" class="Function">pA</a> <a id="3877" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3879" href="Setoid.Varieties.Preservation.html#3860" class="Bound">B≤A</a><a id="3882" class="Symbol">)</a>
  <a id="3886" class="Keyword">where</a>
  <a id="3894" href="Setoid.Varieties.Preservation.html#3894" class="Function">pA</a> <a id="3897" class="Symbol">:</a> <a id="3899" href="Setoid.Varieties.Preservation.html#3850" class="Bound">𝑨</a> <a id="3901" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="3903" href="Setoid.Varieties.Closure.html#3116" class="Function">P</a> <a id="3905" href="Setoid.Varieties.Preservation.html#3668" class="Bound">ℓ</a> <a id="3907" href="Setoid.Varieties.Preservation.html#3846" class="Bound">ι</a> <a id="3909" href="Setoid.Varieties.Preservation.html#3679" class="Bound">𝒦</a>
  <a id="3913" href="Setoid.Varieties.Preservation.html#3894" class="Function">pA</a> <a id="3916" class="Symbol">=</a> <a id="3918" href="Data.Unit.Polymorphic.Base.html#480" class="Function">⊤</a> <a id="3920" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3922" class="Symbol">(λ</a> <a id="3925" href="Setoid.Varieties.Preservation.html#3925" class="Bound">_</a> <a id="3927" class="Symbol">→</a> <a id="3929" href="Setoid.Varieties.Preservation.html#3850" class="Bound">𝑨</a><a id="3930" class="Symbol">)</a> <a id="3932" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3934" class="Symbol">(λ</a> <a id="3937" href="Setoid.Varieties.Preservation.html#3937" class="Bound">_</a> <a id="3939" class="Symbol">→</a> <a id="3941" href="Setoid.Varieties.Preservation.html#3855" class="Bound">kA</a><a id="3943" class="Symbol">)</a> <a id="3945" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3947" href="Setoid.Homomorphisms.Isomorphisms.html#16207" class="Function">≅⨅⁺-refl</a>

</pre>


#### <a id="PS-in-SP">PS(𝒦) ⊆ SP(𝒦)</a>


#### <a id="more-class-inclusions">More class inclusions</a>

We conclude this subsection with three more inclusion relations that will have bit parts to play later (e.g., in the formal proof of Birkhoff's Theorem).

<pre class="Agda">

 <a id="4244" href="Setoid.Varieties.Preservation.html#4244" class="Function">P⊆SP</a> <a id="4249" class="Symbol">:</a> <a id="4251" class="Symbol">∀{</a><a id="4253" href="Setoid.Varieties.Preservation.html#4253" class="Bound">ι</a><a id="4254" class="Symbol">}</a> <a id="4256" class="Symbol">→</a> <a id="4258" href="Setoid.Varieties.Closure.html#3116" class="Function">P</a> <a id="4260" href="Setoid.Varieties.Preservation.html#3668" class="Bound">ℓ</a> <a id="4262" href="Setoid.Varieties.Preservation.html#4253" class="Bound">ι</a> <a id="4264" href="Setoid.Varieties.Preservation.html#3679" class="Bound">𝒦</a> <a id="4266" href="Relation.Unary.html#1742" class="Function Operator">⊆</a> <a id="4268" href="Setoid.Varieties.Closure.html#2990" class="Function">S</a> <a id="4270" class="Symbol">(</a><a id="4271" href="Setoid.Varieties.Preservation.html#3737" class="Function">a</a> <a id="4273" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="4275" href="Setoid.Varieties.Preservation.html#3668" class="Bound">ℓ</a> <a id="4277" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="4279" href="Setoid.Varieties.Preservation.html#4253" class="Bound">ι</a><a id="4280" class="Symbol">)</a> <a id="4282" class="Symbol">(</a><a id="4283" href="Setoid.Varieties.Closure.html#3116" class="Function">P</a> <a id="4285" class="Symbol">{</a><a id="4286" class="Argument">β</a> <a id="4288" class="Symbol">=</a> <a id="4290" href="Setoid.Varieties.Preservation.html#3663" class="Bound">α</a><a id="4291" class="Symbol">}{</a><a id="4293" href="Setoid.Varieties.Preservation.html#3665" class="Bound">ρᵃ</a><a id="4295" class="Symbol">}</a><a id="4296" href="Setoid.Varieties.Preservation.html#3668" class="Bound">ℓ</a> <a id="4298" href="Setoid.Varieties.Preservation.html#4253" class="Bound">ι</a> <a id="4300" href="Setoid.Varieties.Preservation.html#3679" class="Bound">𝒦</a><a id="4301" class="Symbol">)</a>
 <a id="4304" href="Setoid.Varieties.Preservation.html#4244" class="Function">P⊆SP</a> <a id="4309" class="Symbol">{</a><a id="4310" href="Setoid.Varieties.Preservation.html#4310" class="Bound">ι</a><a id="4311" class="Symbol">}</a> <a id="4313" href="Setoid.Varieties.Preservation.html#4313" class="Bound">x</a> <a id="4315" class="Symbol">=</a> <a id="4317" href="Setoid.Varieties.Closure.html#5721" class="Function">S-expa</a><a id="4323" class="Symbol">{</a><a id="4324" class="Argument">ℓ</a> <a id="4326" class="Symbol">=</a> <a id="4328" href="Setoid.Varieties.Preservation.html#3737" class="Function">a</a> <a id="4330" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="4332" href="Setoid.Varieties.Preservation.html#3668" class="Bound">ℓ</a> <a id="4334" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="4336" href="Setoid.Varieties.Preservation.html#4310" class="Bound">ι</a><a id="4337" class="Symbol">}</a> <a id="4339" href="Setoid.Varieties.Preservation.html#4313" class="Bound">x</a>


 <a id="4344" href="Setoid.Varieties.Preservation.html#4344" class="Function">P⊆HSP</a> <a id="4350" class="Symbol">:</a> <a id="4352" class="Symbol">∀{</a><a id="4354" href="Setoid.Varieties.Preservation.html#4354" class="Bound">ι</a><a id="4355" class="Symbol">}</a> <a id="4357" class="Symbol">→</a> <a id="4359" href="Setoid.Varieties.Closure.html#3116" class="Function">P</a> <a id="4361" class="Symbol">{</a><a id="4362" class="Argument">β</a> <a id="4364" class="Symbol">=</a> <a id="4366" href="Setoid.Varieties.Preservation.html#3663" class="Bound">α</a><a id="4367" class="Symbol">}{</a><a id="4369" href="Setoid.Varieties.Preservation.html#3665" class="Bound">ρᵃ</a><a id="4371" class="Symbol">}</a> <a id="4373" href="Setoid.Varieties.Preservation.html#3668" class="Bound">ℓ</a> <a id="4375" href="Setoid.Varieties.Preservation.html#4354" class="Bound">ι</a> <a id="4377" href="Setoid.Varieties.Preservation.html#3679" class="Bound">𝒦</a>
                <a id="4395" href="Relation.Unary.html#1742" class="Function Operator">⊆</a> <a id="4397" href="Setoid.Varieties.Closure.html#2853" class="Function">H</a> <a id="4399" class="Symbol">(</a><a id="4400" href="Setoid.Varieties.Preservation.html#3737" class="Function">a</a> <a id="4402" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="4404" href="Setoid.Varieties.Preservation.html#3668" class="Bound">ℓ</a> <a id="4406" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="4408" href="Setoid.Varieties.Preservation.html#4354" class="Bound">ι</a><a id="4409" class="Symbol">)</a> <a id="4411" class="Symbol">(</a><a id="4412" href="Setoid.Varieties.Closure.html#2990" class="Function">S</a> <a id="4414" class="Symbol">{</a><a id="4415" class="Argument">β</a> <a id="4417" class="Symbol">=</a> <a id="4419" href="Setoid.Varieties.Preservation.html#3663" class="Bound">α</a><a id="4420" class="Symbol">}{</a><a id="4422" href="Setoid.Varieties.Preservation.html#3665" class="Bound">ρᵃ</a><a id="4424" class="Symbol">}(</a><a id="4426" href="Setoid.Varieties.Preservation.html#3737" class="Function">a</a> <a id="4428" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="4430" href="Setoid.Varieties.Preservation.html#3668" class="Bound">ℓ</a> <a id="4432" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="4434" href="Setoid.Varieties.Preservation.html#4354" class="Bound">ι</a><a id="4435" class="Symbol">)</a> <a id="4437" class="Symbol">(</a><a id="4438" href="Setoid.Varieties.Closure.html#3116" class="Function">P</a> <a id="4440" class="Symbol">{</a><a id="4441" class="Argument">β</a> <a id="4443" class="Symbol">=</a> <a id="4445" href="Setoid.Varieties.Preservation.html#3663" class="Bound">α</a><a id="4446" class="Symbol">}{</a><a id="4448" href="Setoid.Varieties.Preservation.html#3665" class="Bound">ρᵃ</a><a id="4450" class="Symbol">}</a><a id="4451" href="Setoid.Varieties.Preservation.html#3668" class="Bound">ℓ</a> <a id="4453" href="Setoid.Varieties.Preservation.html#4354" class="Bound">ι</a> <a id="4455" href="Setoid.Varieties.Preservation.html#3679" class="Bound">𝒦</a><a id="4456" class="Symbol">))</a>
 <a id="4460" href="Setoid.Varieties.Preservation.html#4344" class="Function">P⊆HSP</a> <a id="4466" class="Symbol">{</a><a id="4467" href="Setoid.Varieties.Preservation.html#4467" class="Bound">ι</a><a id="4468" class="Symbol">}</a> <a id="4470" href="Setoid.Varieties.Preservation.html#4470" class="Bound">x</a> <a id="4472" class="Symbol">=</a> <a id="4474" href="Setoid.Varieties.Closure.html#5611" class="Function">H-expa</a><a id="4480" class="Symbol">{</a><a id="4481" class="Argument">ℓ</a> <a id="4483" class="Symbol">=</a> <a id="4485" href="Setoid.Varieties.Preservation.html#3737" class="Function">a</a> <a id="4487" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="4489" href="Setoid.Varieties.Preservation.html#3668" class="Bound">ℓ</a> <a id="4491" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="4493" href="Setoid.Varieties.Preservation.html#4467" class="Bound">ι</a><a id="4494" class="Symbol">}</a>  <a id="4497" class="Symbol">(</a><a id="4498" href="Setoid.Varieties.Closure.html#5721" class="Function">S-expa</a><a id="4504" class="Symbol">{</a><a id="4505" class="Argument">ℓ</a> <a id="4507" class="Symbol">=</a> <a id="4509" href="Setoid.Varieties.Preservation.html#3737" class="Function">a</a> <a id="4511" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="4513" href="Setoid.Varieties.Preservation.html#3668" class="Bound">ℓ</a> <a id="4515" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="4517" href="Setoid.Varieties.Preservation.html#4467" class="Bound">ι</a><a id="4518" class="Symbol">}</a> <a id="4520" href="Setoid.Varieties.Preservation.html#4470" class="Bound">x</a><a id="4521" class="Symbol">)</a>

 <a id="4525" href="Setoid.Varieties.Preservation.html#4525" class="Function">P⊆V</a> <a id="4529" class="Symbol">:</a> <a id="4531" class="Symbol">∀{</a><a id="4533" href="Setoid.Varieties.Preservation.html#4533" class="Bound">ι</a><a id="4534" class="Symbol">}</a> <a id="4536" class="Symbol">→</a> <a id="4538" href="Setoid.Varieties.Closure.html#3116" class="Function">P</a> <a id="4540" href="Setoid.Varieties.Preservation.html#3668" class="Bound">ℓ</a> <a id="4542" href="Setoid.Varieties.Preservation.html#4533" class="Bound">ι</a> <a id="4544" href="Setoid.Varieties.Preservation.html#3679" class="Bound">𝒦</a> <a id="4546" href="Relation.Unary.html#1742" class="Function Operator">⊆</a> <a id="4548" href="Setoid.Varieties.Closure.html#3595" class="Function">V</a> <a id="4550" href="Setoid.Varieties.Preservation.html#3668" class="Bound">ℓ</a> <a id="4552" href="Setoid.Varieties.Preservation.html#4533" class="Bound">ι</a> <a id="4554" href="Setoid.Varieties.Preservation.html#3679" class="Bound">𝒦</a>
 <a id="4557" href="Setoid.Varieties.Preservation.html#4525" class="Function">P⊆V</a> <a id="4561" class="Symbol">=</a> <a id="4563" href="Setoid.Varieties.Preservation.html#4344" class="Function">P⊆HSP</a>

 <a id="4571" href="Setoid.Varieties.Preservation.html#4571" class="Function">SP⊆V</a> <a id="4576" class="Symbol">:</a> <a id="4578" class="Symbol">∀{</a><a id="4580" href="Setoid.Varieties.Preservation.html#4580" class="Bound">ι</a><a id="4581" class="Symbol">}</a> <a id="4583" class="Symbol">→</a> <a id="4585" href="Setoid.Varieties.Closure.html#2990" class="Function">S</a><a id="4586" class="Symbol">{</a><a id="4587" class="Argument">β</a> <a id="4589" class="Symbol">=</a> <a id="4591" href="Setoid.Varieties.Preservation.html#3663" class="Bound">α</a><a id="4592" class="Symbol">}{</a><a id="4594" class="Argument">ρᵇ</a> <a id="4597" class="Symbol">=</a> <a id="4599" href="Setoid.Varieties.Preservation.html#3665" class="Bound">ρᵃ</a><a id="4601" class="Symbol">}</a> <a id="4603" class="Symbol">(</a><a id="4604" href="Setoid.Varieties.Preservation.html#3737" class="Function">a</a> <a id="4606" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="4608" href="Setoid.Varieties.Preservation.html#3668" class="Bound">ℓ</a> <a id="4610" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="4612" href="Setoid.Varieties.Preservation.html#4580" class="Bound">ι</a><a id="4613" class="Symbol">)</a> <a id="4615" class="Symbol">(</a><a id="4616" href="Setoid.Varieties.Closure.html#3116" class="Function">P</a> <a id="4618" class="Symbol">{</a><a id="4619" class="Argument">β</a> <a id="4621" class="Symbol">=</a> <a id="4623" href="Setoid.Varieties.Preservation.html#3663" class="Bound">α</a><a id="4624" class="Symbol">}{</a><a id="4626" href="Setoid.Varieties.Preservation.html#3665" class="Bound">ρᵃ</a><a id="4628" class="Symbol">}</a> <a id="4630" href="Setoid.Varieties.Preservation.html#3668" class="Bound">ℓ</a> <a id="4632" href="Setoid.Varieties.Preservation.html#4580" class="Bound">ι</a> <a id="4634" href="Setoid.Varieties.Preservation.html#3679" class="Bound">𝒦</a><a id="4635" class="Symbol">)</a> <a id="4637" href="Relation.Unary.html#1742" class="Function Operator">⊆</a> <a id="4639" href="Setoid.Varieties.Closure.html#3595" class="Function">V</a> <a id="4641" href="Setoid.Varieties.Preservation.html#3668" class="Bound">ℓ</a> <a id="4643" href="Setoid.Varieties.Preservation.html#4580" class="Bound">ι</a> <a id="4645" href="Setoid.Varieties.Preservation.html#3679" class="Bound">𝒦</a>
 <a id="4648" href="Setoid.Varieties.Preservation.html#4571" class="Function">SP⊆V</a> <a id="4653" class="Symbol">{</a><a id="4654" href="Setoid.Varieties.Preservation.html#4654" class="Bound">ι</a><a id="4655" class="Symbol">}</a> <a id="4657" href="Setoid.Varieties.Preservation.html#4657" class="Bound">x</a> <a id="4659" class="Symbol">=</a> <a id="4661" href="Setoid.Varieties.Closure.html#5611" class="Function">H-expa</a><a id="4667" class="Symbol">{</a><a id="4668" class="Argument">ℓ</a> <a id="4670" class="Symbol">=</a> <a id="4672" href="Setoid.Varieties.Preservation.html#3737" class="Function">a</a> <a id="4674" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="4676" href="Setoid.Varieties.Preservation.html#3668" class="Bound">ℓ</a> <a id="4678" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="4680" href="Setoid.Varieties.Preservation.html#4654" class="Bound">ι</a><a id="4681" class="Symbol">}</a> <a id="4683" href="Setoid.Varieties.Preservation.html#4657" class="Bound">x</a>

</pre>

Finally, we are in a position to prove that a product of subalgebras of algebras in a class 𝒦 is a subalgebra of a product of algebras in 𝒦.

<pre class="Agda">

 <a id="4855" href="Setoid.Varieties.Preservation.html#4855" class="Function">PS⊆SP</a> <a id="4861" class="Symbol">:</a> <a id="4863" href="Setoid.Varieties.Closure.html#3116" class="Function">P</a> <a id="4865" class="Symbol">(</a><a id="4866" href="Setoid.Varieties.Preservation.html#3737" class="Function">a</a> <a id="4868" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="4870" href="Setoid.Varieties.Preservation.html#3668" class="Bound">ℓ</a><a id="4871" class="Symbol">)</a> <a id="4873" href="Setoid.Varieties.Preservation.html#3750" class="Function">oaℓ</a> <a id="4877" class="Symbol">(</a><a id="4878" href="Setoid.Varieties.Closure.html#2990" class="Function">S</a><a id="4879" class="Symbol">{</a><a id="4880" class="Argument">β</a> <a id="4882" class="Symbol">=</a> <a id="4884" href="Setoid.Varieties.Preservation.html#3663" class="Bound">α</a><a id="4885" class="Symbol">}{</a><a id="4887" href="Setoid.Varieties.Preservation.html#3665" class="Bound">ρᵃ</a><a id="4889" class="Symbol">}</a> <a id="4891" href="Setoid.Varieties.Preservation.html#3668" class="Bound">ℓ</a> <a id="4893" href="Setoid.Varieties.Preservation.html#3679" class="Bound">𝒦</a><a id="4894" class="Symbol">)</a> <a id="4896" href="Relation.Unary.html#1742" class="Function Operator">⊆</a> <a id="4898" href="Setoid.Varieties.Closure.html#2990" class="Function">S</a> <a id="4900" href="Setoid.Varieties.Preservation.html#3750" class="Function">oaℓ</a> <a id="4904" class="Symbol">(</a><a id="4905" href="Setoid.Varieties.Closure.html#3116" class="Function">P</a> <a id="4907" href="Setoid.Varieties.Preservation.html#3668" class="Bound">ℓ</a> <a id="4909" href="Setoid.Varieties.Preservation.html#3750" class="Function">oaℓ</a> <a id="4913" href="Setoid.Varieties.Preservation.html#3679" class="Bound">𝒦</a><a id="4914" class="Symbol">)</a>

 <a id="4918" href="Setoid.Varieties.Preservation.html#4855" class="Function">PS⊆SP</a> <a id="4924" class="Symbol">{</a><a id="4925" href="Setoid.Varieties.Preservation.html#4925" class="Bound">𝑩</a><a id="4926" class="Symbol">}</a> <a id="4928" class="Symbol">(</a><a id="4929" href="Setoid.Varieties.Preservation.html#4929" class="Bound">I</a> <a id="4931" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4933" class="Symbol">(</a> <a id="4935" href="Setoid.Varieties.Preservation.html#4935" class="Bound">𝒜</a> <a id="4937" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4939" href="Setoid.Varieties.Preservation.html#4939" class="Bound">sA</a> <a id="4942" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4944" href="Setoid.Varieties.Preservation.html#4944" class="Bound">B≅⨅A</a> <a id="4949" class="Symbol">))</a> <a id="4952" class="Symbol">=</a> <a id="4954" href="Setoid.Varieties.Preservation.html#5110" class="Function">Goal</a>
  <a id="4961" class="Keyword">where</a>
  <a id="4969" href="Setoid.Varieties.Preservation.html#4969" class="Function">ℬ</a> <a id="4971" class="Symbol">:</a> <a id="4973" href="Setoid.Varieties.Preservation.html#4929" class="Bound">I</a> <a id="4975" class="Symbol">→</a> <a id="4977" href="Setoid.Algebras.Basic.html#2890" class="Record">Algebra</a> <a id="4985" href="Setoid.Varieties.Preservation.html#3663" class="Bound">α</a> <a id="4987" href="Setoid.Varieties.Preservation.html#3665" class="Bound">ρᵃ</a>
  <a id="4992" href="Setoid.Varieties.Preservation.html#4969" class="Function">ℬ</a> <a id="4994" href="Setoid.Varieties.Preservation.html#4994" class="Bound">i</a> <a id="4996" class="Symbol">=</a> <a id="4998" href="Base.Overture.Preliminaries.html#4402" class="Function Operator">∣</a> <a id="5000" href="Setoid.Varieties.Preservation.html#4939" class="Bound">sA</a> <a id="5003" href="Setoid.Varieties.Preservation.html#4994" class="Bound">i</a> <a id="5005" href="Base.Overture.Preliminaries.html#4402" class="Function Operator">∣</a>
  <a id="5009" href="Setoid.Varieties.Preservation.html#5009" class="Function">kB</a> <a id="5012" class="Symbol">:</a> <a id="5014" class="Symbol">(</a><a id="5015" href="Setoid.Varieties.Preservation.html#5015" class="Bound">i</a> <a id="5017" class="Symbol">:</a> <a id="5019" href="Setoid.Varieties.Preservation.html#4929" class="Bound">I</a><a id="5020" class="Symbol">)</a> <a id="5022" class="Symbol">→</a> <a id="5024" href="Setoid.Varieties.Preservation.html#4969" class="Function">ℬ</a> <a id="5026" href="Setoid.Varieties.Preservation.html#5015" class="Bound">i</a> <a id="5028" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="5030" href="Setoid.Varieties.Preservation.html#3679" class="Bound">𝒦</a>
  <a id="5034" href="Setoid.Varieties.Preservation.html#5009" class="Function">kB</a> <a id="5037" href="Setoid.Varieties.Preservation.html#5037" class="Bound">i</a> <a id="5039" class="Symbol">=</a>  <a id="5042" href="Setoid.Varieties.Preservation.html#927" class="Field">fst</a> <a id="5046" href="Base.Overture.Preliminaries.html#4440" class="Function Operator">∥</a> <a id="5048" href="Setoid.Varieties.Preservation.html#4939" class="Bound">sA</a> <a id="5051" href="Setoid.Varieties.Preservation.html#5037" class="Bound">i</a> <a id="5053" href="Base.Overture.Preliminaries.html#4440" class="Function Operator">∥</a>
  <a id="5057" href="Setoid.Varieties.Preservation.html#5057" class="Function">⨅A≤⨅B</a> <a id="5063" class="Symbol">:</a> <a id="5065" href="Setoid.Algebras.Products.html#1792" class="Function">⨅</a> <a id="5067" href="Setoid.Varieties.Preservation.html#4935" class="Bound">𝒜</a> <a id="5069" href="Setoid.Subalgebras.Subalgebras.html#1646" class="Function Operator">≤</a> <a id="5071" href="Setoid.Algebras.Products.html#1792" class="Function">⨅</a> <a id="5073" href="Setoid.Varieties.Preservation.html#4969" class="Function">ℬ</a>
  <a id="5077" href="Setoid.Varieties.Preservation.html#5057" class="Function">⨅A≤⨅B</a> <a id="5083" class="Symbol">=</a> <a id="5085" href="Setoid.Subalgebras.Properties.html#6961" class="Function">⨅-≤</a> <a id="5089" class="Symbol">λ</a> <a id="5091" href="Setoid.Varieties.Preservation.html#5091" class="Bound">i</a> <a id="5093" class="Symbol">→</a> <a id="5095" href="Setoid.Varieties.Preservation.html#942" class="Field">snd</a> <a id="5099" href="Base.Overture.Preliminaries.html#4440" class="Function Operator">∥</a> <a id="5101" href="Setoid.Varieties.Preservation.html#4939" class="Bound">sA</a> <a id="5104" href="Setoid.Varieties.Preservation.html#5091" class="Bound">i</a> <a id="5106" href="Base.Overture.Preliminaries.html#4440" class="Function Operator">∥</a>
  <a id="5110" href="Setoid.Varieties.Preservation.html#5110" class="Function">Goal</a> <a id="5115" class="Symbol">:</a> <a id="5117" href="Setoid.Varieties.Preservation.html#4925" class="Bound">𝑩</a> <a id="5119" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="5121" href="Setoid.Varieties.Closure.html#2990" class="Function">S</a><a id="5122" class="Symbol">{</a><a id="5123" class="Argument">β</a> <a id="5125" class="Symbol">=</a> <a id="5127" href="Setoid.Varieties.Preservation.html#3750" class="Function">oaℓ</a><a id="5130" class="Symbol">}{</a><a id="5132" href="Setoid.Varieties.Preservation.html#3750" class="Function">oaℓ</a><a id="5135" class="Symbol">}</a><a id="5136" href="Setoid.Varieties.Preservation.html#3750" class="Function">oaℓ</a> <a id="5140" class="Symbol">(</a><a id="5141" href="Setoid.Varieties.Closure.html#3116" class="Function">P</a> <a id="5143" class="Symbol">{</a><a id="5144" class="Argument">β</a> <a id="5146" class="Symbol">=</a> <a id="5148" href="Setoid.Varieties.Preservation.html#3750" class="Function">oaℓ</a><a id="5151" class="Symbol">}{</a><a id="5153" href="Setoid.Varieties.Preservation.html#3750" class="Function">oaℓ</a><a id="5156" class="Symbol">}</a> <a id="5158" href="Setoid.Varieties.Preservation.html#3668" class="Bound">ℓ</a> <a id="5160" href="Setoid.Varieties.Preservation.html#3750" class="Function">oaℓ</a> <a id="5164" href="Setoid.Varieties.Preservation.html#3679" class="Bound">𝒦</a><a id="5165" class="Symbol">)</a>
  <a id="5169" href="Setoid.Varieties.Preservation.html#5110" class="Function">Goal</a> <a id="5174" class="Symbol">=</a> <a id="5176" href="Setoid.Algebras.Products.html#1792" class="Function">⨅</a> <a id="5178" href="Setoid.Varieties.Preservation.html#4969" class="Function">ℬ</a> <a id="5180" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5182" class="Symbol">(</a><a id="5183" href="Setoid.Varieties.Preservation.html#4929" class="Bound">I</a> <a id="5185" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5187" class="Symbol">(</a><a id="5188" href="Setoid.Varieties.Preservation.html#4969" class="Function">ℬ</a> <a id="5190" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5192" class="Symbol">(</a><a id="5193" href="Setoid.Varieties.Preservation.html#5009" class="Function">kB</a> <a id="5196" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5198" href="Setoid.Homomorphisms.Isomorphisms.html#4324" class="Function">≅-refl</a><a id="5204" class="Symbol">)))</a> <a id="5208" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5210" class="Symbol">(</a><a id="5211" href="Setoid.Subalgebras.Properties.html#3434" class="Function">≅-trans-≤</a> <a id="5221" href="Setoid.Varieties.Preservation.html#4944" class="Bound">B≅⨅A</a> <a id="5226" href="Setoid.Varieties.Preservation.html#5057" class="Function">⨅A≤⨅B</a><a id="5231" class="Symbol">)</a>

</pre>

#### <a id="h-preserves-identities">H preserves identities</a>

First we prove that the closure operator H is compatible with identities that hold in the given class.

<pre class="Agda">

<a id="5428" class="Keyword">module</a> <a id="5435" href="Setoid.Varieties.Preservation.html#5435" class="Module">_</a>  <a id="5438" class="Symbol">{</a><a id="5439" href="Setoid.Varieties.Preservation.html#5439" class="Bound">α</a> <a id="5441" href="Setoid.Varieties.Preservation.html#5441" class="Bound">ρᵃ</a> <a id="5444" href="Setoid.Varieties.Preservation.html#5444" class="Bound">ℓ</a> <a id="5446" href="Setoid.Varieties.Preservation.html#5446" class="Bound">χ</a> <a id="5448" class="Symbol">:</a> <a id="5450" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="5455" class="Symbol">}</a>
          <a id="5467" class="Symbol">{</a><a id="5468" href="Setoid.Varieties.Preservation.html#5468" class="Bound">𝒦</a> <a id="5470" class="Symbol">:</a> <a id="5472" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="5476" class="Symbol">(</a><a id="5477" href="Setoid.Algebras.Basic.html#2890" class="Record">Algebra</a> <a id="5485" href="Setoid.Varieties.Preservation.html#5439" class="Bound">α</a> <a id="5487" href="Setoid.Varieties.Preservation.html#5441" class="Bound">ρᵃ</a><a id="5489" class="Symbol">)</a> <a id="5491" class="Symbol">(</a><a id="5492" href="Setoid.Varieties.Preservation.html#5439" class="Bound">α</a> <a id="5494" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="5496" href="Setoid.Varieties.Preservation.html#5441" class="Bound">ρᵃ</a> <a id="5499" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="5501" href="Setoid.Algebras.Basic.html#1187" class="Function">ov</a> <a id="5504" href="Setoid.Varieties.Preservation.html#5444" class="Bound">ℓ</a><a id="5505" class="Symbol">)}</a>
          <a id="5518" class="Symbol">{</a><a id="5519" href="Setoid.Varieties.Preservation.html#5519" class="Bound">X</a> <a id="5521" class="Symbol">:</a> <a id="5523" href="Setoid.Varieties.Preservation.html#835" class="Primitive">Type</a> <a id="5528" href="Setoid.Varieties.Preservation.html#5446" class="Bound">χ</a><a id="5529" class="Symbol">}</a>
          <a id="5541" class="Symbol">{</a><a id="5542" href="Setoid.Varieties.Preservation.html#5542" class="Bound">p</a> <a id="5544" href="Setoid.Varieties.Preservation.html#5544" class="Bound">q</a> <a id="5546" class="Symbol">:</a> <a id="5548" href="Base.Terms.Basic.html#2021" class="Datatype">Term</a> <a id="5553" href="Setoid.Varieties.Preservation.html#5519" class="Bound">X</a><a id="5554" class="Symbol">}</a>
          <a id="5566" class="Keyword">where</a>

 <a id="5574" href="Setoid.Varieties.Preservation.html#5574" class="Function">H-id1</a> <a id="5580" class="Symbol">:</a> <a id="5582" href="Setoid.Varieties.Preservation.html#5468" class="Bound">𝒦</a> <a id="5584" href="Setoid.Varieties.SoundAndComplete.html#2373" class="Function Operator">⊫</a> <a id="5586" class="Symbol">(</a><a id="5587" href="Setoid.Varieties.Preservation.html#5542" class="Bound">p</a> <a id="5589" href="Setoid.Varieties.SoundAndComplete.html#2093" class="InductiveConstructor Operator">≈̇</a> <a id="5592" href="Setoid.Varieties.Preservation.html#5544" class="Bound">q</a><a id="5593" class="Symbol">)</a> <a id="5595" class="Symbol">→</a> <a id="5597" href="Setoid.Varieties.Closure.html#2853" class="Function">H</a> <a id="5599" class="Symbol">{</a><a id="5600" class="Argument">β</a> <a id="5602" class="Symbol">=</a> <a id="5604" href="Setoid.Varieties.Preservation.html#5439" class="Bound">α</a><a id="5605" class="Symbol">}{</a><a id="5607" href="Setoid.Varieties.Preservation.html#5441" class="Bound">ρᵃ</a><a id="5609" class="Symbol">}</a><a id="5610" href="Setoid.Varieties.Preservation.html#5444" class="Bound">ℓ</a> <a id="5612" href="Setoid.Varieties.Preservation.html#5468" class="Bound">𝒦</a> <a id="5614" href="Setoid.Varieties.SoundAndComplete.html#2373" class="Function Operator">⊫</a> <a id="5616" class="Symbol">(</a><a id="5617" href="Setoid.Varieties.Preservation.html#5542" class="Bound">p</a> <a id="5619" href="Setoid.Varieties.SoundAndComplete.html#2093" class="InductiveConstructor Operator">≈̇</a> <a id="5622" href="Setoid.Varieties.Preservation.html#5544" class="Bound">q</a><a id="5623" class="Symbol">)</a>
 <a id="5626" href="Setoid.Varieties.Preservation.html#5574" class="Function">H-id1</a> <a id="5632" href="Setoid.Varieties.Preservation.html#5632" class="Bound">σ</a> <a id="5634" href="Setoid.Varieties.Preservation.html#5634" class="Bound">𝑩</a> <a id="5636" class="Symbol">(</a><a id="5637" href="Setoid.Varieties.Preservation.html#5637" class="Bound">𝑨</a> <a id="5639" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5641" href="Setoid.Varieties.Preservation.html#5641" class="Bound">kA</a> <a id="5644" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5646" href="Setoid.Varieties.Preservation.html#5646" class="Bound">BimgA</a><a id="5651" class="Symbol">)</a> <a id="5653" class="Symbol">=</a> <a id="5655" href="Setoid.Varieties.Properties.html#5154" class="Function">⊧-H-invar</a><a id="5664" class="Symbol">{</a><a id="5665" class="Argument">p</a> <a id="5667" class="Symbol">=</a> <a id="5669" href="Setoid.Varieties.Preservation.html#5542" class="Bound">p</a><a id="5670" class="Symbol">}{</a><a id="5672" href="Setoid.Varieties.Preservation.html#5544" class="Bound">q</a><a id="5673" class="Symbol">}</a> <a id="5675" class="Symbol">(</a><a id="5676" href="Setoid.Varieties.Preservation.html#5632" class="Bound">σ</a> <a id="5678" href="Setoid.Varieties.Preservation.html#5637" class="Bound">𝑨</a> <a id="5680" href="Setoid.Varieties.Preservation.html#5641" class="Bound">kA</a><a id="5682" class="Symbol">)</a> <a id="5684" href="Setoid.Varieties.Preservation.html#5646" class="Bound">BimgA</a>

</pre>

The converse of the foregoing result is almost too obvious to bother with. Nonetheless, we formalize it for completeness.

<pre class="Agda">

 <a id="5841" href="Setoid.Varieties.Preservation.html#5841" class="Function">H-id2</a> <a id="5847" class="Symbol">:</a> <a id="5849" href="Setoid.Varieties.Closure.html#2853" class="Function">H</a> <a id="5851" href="Setoid.Varieties.Preservation.html#5444" class="Bound">ℓ</a> <a id="5853" href="Setoid.Varieties.Preservation.html#5468" class="Bound">𝒦</a> <a id="5855" href="Setoid.Varieties.SoundAndComplete.html#2373" class="Function Operator">⊫</a> <a id="5857" class="Symbol">(</a><a id="5858" href="Setoid.Varieties.Preservation.html#5542" class="Bound">p</a> <a id="5860" href="Setoid.Varieties.SoundAndComplete.html#2093" class="InductiveConstructor Operator">≈̇</a> <a id="5863" href="Setoid.Varieties.Preservation.html#5544" class="Bound">q</a><a id="5864" class="Symbol">)</a> <a id="5866" class="Symbol">→</a> <a id="5868" href="Setoid.Varieties.Preservation.html#5468" class="Bound">𝒦</a> <a id="5870" href="Setoid.Varieties.SoundAndComplete.html#2373" class="Function Operator">⊫</a> <a id="5872" class="Symbol">(</a><a id="5873" href="Setoid.Varieties.Preservation.html#5542" class="Bound">p</a> <a id="5875" href="Setoid.Varieties.SoundAndComplete.html#2093" class="InductiveConstructor Operator">≈̇</a> <a id="5878" href="Setoid.Varieties.Preservation.html#5544" class="Bound">q</a><a id="5879" class="Symbol">)</a>
 <a id="5882" href="Setoid.Varieties.Preservation.html#5841" class="Function">H-id2</a> <a id="5888" href="Setoid.Varieties.Preservation.html#5888" class="Bound">Hpq</a> <a id="5892" href="Setoid.Varieties.Preservation.html#5892" class="Bound">𝑨</a> <a id="5894" href="Setoid.Varieties.Preservation.html#5894" class="Bound">kA</a> <a id="5897" class="Symbol">=</a> <a id="5899" href="Setoid.Varieties.Preservation.html#5888" class="Bound">Hpq</a> <a id="5903" href="Setoid.Varieties.Preservation.html#5892" class="Bound">𝑨</a> <a id="5905" class="Symbol">(</a><a id="5906" href="Setoid.Varieties.Preservation.html#5892" class="Bound">𝑨</a> <a id="5908" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5910" class="Symbol">(</a><a id="5911" href="Setoid.Varieties.Preservation.html#5894" class="Bound">kA</a> <a id="5914" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5916" href="Setoid.Homomorphisms.HomomorphicImages.html#2748" class="Function">IdHomImage</a><a id="5926" class="Symbol">))</a>

</pre>


#### <a id="s-preserves-identities">S preserves identities</a>

<pre class="Agda">

 <a id="6022" href="Setoid.Varieties.Preservation.html#6022" class="Function">S-id1</a> <a id="6028" class="Symbol">:</a> <a id="6030" href="Setoid.Varieties.Preservation.html#5468" class="Bound">𝒦</a> <a id="6032" href="Setoid.Varieties.SoundAndComplete.html#2373" class="Function Operator">⊫</a> <a id="6034" class="Symbol">(</a><a id="6035" href="Setoid.Varieties.Preservation.html#5542" class="Bound">p</a> <a id="6037" href="Setoid.Varieties.SoundAndComplete.html#2093" class="InductiveConstructor Operator">≈̇</a> <a id="6040" href="Setoid.Varieties.Preservation.html#5544" class="Bound">q</a><a id="6041" class="Symbol">)</a> <a id="6043" class="Symbol">→</a> <a id="6045" class="Symbol">(</a><a id="6046" href="Setoid.Varieties.Closure.html#2990" class="Function">S</a> <a id="6048" class="Symbol">{</a><a id="6049" class="Argument">β</a> <a id="6051" class="Symbol">=</a> <a id="6053" href="Setoid.Varieties.Preservation.html#5439" class="Bound">α</a><a id="6054" class="Symbol">}{</a><a id="6056" href="Setoid.Varieties.Preservation.html#5441" class="Bound">ρᵃ</a><a id="6058" class="Symbol">}</a> <a id="6060" href="Setoid.Varieties.Preservation.html#5444" class="Bound">ℓ</a> <a id="6062" href="Setoid.Varieties.Preservation.html#5468" class="Bound">𝒦</a><a id="6063" class="Symbol">)</a> <a id="6065" href="Setoid.Varieties.SoundAndComplete.html#2373" class="Function Operator">⊫</a> <a id="6067" class="Symbol">(</a><a id="6068" href="Setoid.Varieties.Preservation.html#5542" class="Bound">p</a> <a id="6070" href="Setoid.Varieties.SoundAndComplete.html#2093" class="InductiveConstructor Operator">≈̇</a> <a id="6073" href="Setoid.Varieties.Preservation.html#5544" class="Bound">q</a><a id="6074" class="Symbol">)</a>
 <a id="6077" href="Setoid.Varieties.Preservation.html#6022" class="Function">S-id1</a> <a id="6083" href="Setoid.Varieties.Preservation.html#6083" class="Bound">σ</a> <a id="6085" href="Setoid.Varieties.Preservation.html#6085" class="Bound">𝑩</a> <a id="6087" class="Symbol">(</a><a id="6088" href="Setoid.Varieties.Preservation.html#6088" class="Bound">𝑨</a> <a id="6090" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="6092" href="Setoid.Varieties.Preservation.html#6092" class="Bound">kA</a> <a id="6095" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="6097" href="Setoid.Varieties.Preservation.html#6097" class="Bound">B≤A</a><a id="6100" class="Symbol">)</a> <a id="6102" class="Symbol">=</a> <a id="6104" href="Setoid.Varieties.Properties.html#6452" class="Function">⊧-S-invar</a><a id="6113" class="Symbol">{</a><a id="6114" class="Argument">p</a> <a id="6116" class="Symbol">=</a> <a id="6118" href="Setoid.Varieties.Preservation.html#5542" class="Bound">p</a><a id="6119" class="Symbol">}{</a><a id="6121" href="Setoid.Varieties.Preservation.html#5544" class="Bound">q</a><a id="6122" class="Symbol">}</a> <a id="6124" class="Symbol">(</a><a id="6125" href="Setoid.Varieties.Preservation.html#6083" class="Bound">σ</a> <a id="6127" href="Setoid.Varieties.Preservation.html#6088" class="Bound">𝑨</a> <a id="6129" href="Setoid.Varieties.Preservation.html#6092" class="Bound">kA</a><a id="6131" class="Symbol">)</a> <a id="6133" href="Setoid.Varieties.Preservation.html#6097" class="Bound">B≤A</a>

 <a id="6139" href="Setoid.Varieties.Preservation.html#6139" class="Function">S-id2</a> <a id="6145" class="Symbol">:</a> <a id="6147" href="Setoid.Varieties.Closure.html#2990" class="Function">S</a> <a id="6149" href="Setoid.Varieties.Preservation.html#5444" class="Bound">ℓ</a> <a id="6151" href="Setoid.Varieties.Preservation.html#5468" class="Bound">𝒦</a> <a id="6153" href="Setoid.Varieties.SoundAndComplete.html#2373" class="Function Operator">⊫</a> <a id="6155" class="Symbol">(</a><a id="6156" href="Setoid.Varieties.Preservation.html#5542" class="Bound">p</a> <a id="6158" href="Setoid.Varieties.SoundAndComplete.html#2093" class="InductiveConstructor Operator">≈̇</a> <a id="6161" href="Setoid.Varieties.Preservation.html#5544" class="Bound">q</a><a id="6162" class="Symbol">)</a> <a id="6164" class="Symbol">→</a> <a id="6166" href="Setoid.Varieties.Preservation.html#5468" class="Bound">𝒦</a> <a id="6168" href="Setoid.Varieties.SoundAndComplete.html#2373" class="Function Operator">⊫</a> <a id="6170" class="Symbol">(</a><a id="6171" href="Setoid.Varieties.Preservation.html#5542" class="Bound">p</a> <a id="6173" href="Setoid.Varieties.SoundAndComplete.html#2093" class="InductiveConstructor Operator">≈̇</a> <a id="6176" href="Setoid.Varieties.Preservation.html#5544" class="Bound">q</a><a id="6177" class="Symbol">)</a>
 <a id="6180" href="Setoid.Varieties.Preservation.html#6139" class="Function">S-id2</a> <a id="6186" href="Setoid.Varieties.Preservation.html#6186" class="Bound">Spq</a> <a id="6190" href="Setoid.Varieties.Preservation.html#6190" class="Bound">𝑨</a> <a id="6192" href="Setoid.Varieties.Preservation.html#6192" class="Bound">kA</a> <a id="6195" class="Symbol">=</a> <a id="6197" href="Setoid.Varieties.Preservation.html#6186" class="Bound">Spq</a> <a id="6201" href="Setoid.Varieties.Preservation.html#6190" class="Bound">𝑨</a> <a id="6203" class="Symbol">(</a><a id="6204" href="Setoid.Varieties.Preservation.html#6190" class="Bound">𝑨</a> <a id="6206" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="6208" class="Symbol">(</a><a id="6209" href="Setoid.Varieties.Preservation.html#6192" class="Bound">kA</a> <a id="6212" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="6214" href="Setoid.Subalgebras.Properties.html#2741" class="Function">≤-reflexive</a><a id="6225" class="Symbol">))</a>


</pre>



#### <a id="p-preserves-identities">P preserves identities</a>

<pre class="Agda">

 <a id="6323" href="Setoid.Varieties.Preservation.html#6323" class="Function">P-id1</a> <a id="6329" class="Symbol">:</a> <a id="6331" class="Symbol">∀{</a><a id="6333" href="Setoid.Varieties.Preservation.html#6333" class="Bound">ι</a><a id="6334" class="Symbol">}</a> <a id="6336" class="Symbol">→</a> <a id="6338" href="Setoid.Varieties.Preservation.html#5468" class="Bound">𝒦</a> <a id="6340" href="Setoid.Varieties.SoundAndComplete.html#2373" class="Function Operator">⊫</a> <a id="6342" class="Symbol">(</a><a id="6343" href="Setoid.Varieties.Preservation.html#5542" class="Bound">p</a> <a id="6345" href="Setoid.Varieties.SoundAndComplete.html#2093" class="InductiveConstructor Operator">≈̇</a> <a id="6348" href="Setoid.Varieties.Preservation.html#5544" class="Bound">q</a><a id="6349" class="Symbol">)</a> <a id="6351" class="Symbol">→</a> <a id="6353" href="Setoid.Varieties.Closure.html#3116" class="Function">P</a> <a id="6355" class="Symbol">{</a><a id="6356" class="Argument">β</a> <a id="6358" class="Symbol">=</a> <a id="6360" href="Setoid.Varieties.Preservation.html#5439" class="Bound">α</a><a id="6361" class="Symbol">}{</a><a id="6363" href="Setoid.Varieties.Preservation.html#5441" class="Bound">ρᵃ</a><a id="6365" class="Symbol">}</a><a id="6366" href="Setoid.Varieties.Preservation.html#5444" class="Bound">ℓ</a> <a id="6368" href="Setoid.Varieties.Preservation.html#6333" class="Bound">ι</a> <a id="6370" href="Setoid.Varieties.Preservation.html#5468" class="Bound">𝒦</a> <a id="6372" href="Setoid.Varieties.SoundAndComplete.html#2373" class="Function Operator">⊫</a> <a id="6374" class="Symbol">(</a><a id="6375" href="Setoid.Varieties.Preservation.html#5542" class="Bound">p</a> <a id="6377" href="Setoid.Varieties.SoundAndComplete.html#2093" class="InductiveConstructor Operator">≈̇</a> <a id="6380" href="Setoid.Varieties.Preservation.html#5544" class="Bound">q</a><a id="6381" class="Symbol">)</a>
 <a id="6384" href="Setoid.Varieties.Preservation.html#6323" class="Function">P-id1</a> <a id="6390" href="Setoid.Varieties.Preservation.html#6390" class="Bound">σ</a> <a id="6392" href="Setoid.Varieties.Preservation.html#6392" class="Bound">𝑨</a> <a id="6394" class="Symbol">(</a><a id="6395" href="Setoid.Varieties.Preservation.html#6395" class="Bound">I</a> <a id="6397" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="6399" href="Setoid.Varieties.Preservation.html#6399" class="Bound">𝒜</a> <a id="6401" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="6403" href="Setoid.Varieties.Preservation.html#6403" class="Bound">kA</a> <a id="6406" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="6408" href="Setoid.Varieties.Preservation.html#6408" class="Bound">A≅⨅A</a><a id="6412" class="Symbol">)</a> <a id="6414" class="Symbol">=</a> <a id="6416" href="Setoid.Varieties.Properties.html#3646" class="Function">⊧-I-invar</a> <a id="6426" href="Setoid.Varieties.Preservation.html#6392" class="Bound">𝑨</a> <a id="6428" href="Setoid.Varieties.Preservation.html#5542" class="Bound">p</a> <a id="6430" href="Setoid.Varieties.Preservation.html#5544" class="Bound">q</a> <a id="6432" href="Setoid.Varieties.Preservation.html#6510" class="Function">IH</a> <a id="6435" class="Symbol">(</a><a id="6436" href="Setoid.Homomorphisms.Isomorphisms.html#4459" class="Function">≅-sym</a> <a id="6442" href="Setoid.Varieties.Preservation.html#6408" class="Bound">A≅⨅A</a><a id="6446" class="Symbol">)</a>
  <a id="6450" class="Keyword">where</a>
  <a id="6458" href="Setoid.Varieties.Preservation.html#6458" class="Function">ih</a> <a id="6461" class="Symbol">:</a> <a id="6463" class="Symbol">∀</a> <a id="6465" href="Setoid.Varieties.Preservation.html#6465" class="Bound">i</a> <a id="6467" class="Symbol">→</a> <a id="6469" href="Setoid.Varieties.Preservation.html#6399" class="Bound">𝒜</a> <a id="6471" href="Setoid.Varieties.Preservation.html#6465" class="Bound">i</a> <a id="6473" href="Setoid.Varieties.SoundAndComplete.html#2265" class="Function Operator">⊧</a> <a id="6475" class="Symbol">(</a><a id="6476" href="Setoid.Varieties.Preservation.html#5542" class="Bound">p</a> <a id="6478" href="Setoid.Varieties.SoundAndComplete.html#2093" class="InductiveConstructor Operator">≈̇</a> <a id="6481" href="Setoid.Varieties.Preservation.html#5544" class="Bound">q</a><a id="6482" class="Symbol">)</a>
  <a id="6486" href="Setoid.Varieties.Preservation.html#6458" class="Function">ih</a> <a id="6489" href="Setoid.Varieties.Preservation.html#6489" class="Bound">i</a> <a id="6491" class="Symbol">=</a> <a id="6493" href="Setoid.Varieties.Preservation.html#6390" class="Bound">σ</a> <a id="6495" class="Symbol">(</a><a id="6496" href="Setoid.Varieties.Preservation.html#6399" class="Bound">𝒜</a> <a id="6498" href="Setoid.Varieties.Preservation.html#6489" class="Bound">i</a><a id="6499" class="Symbol">)</a> <a id="6501" class="Symbol">(</a><a id="6502" href="Setoid.Varieties.Preservation.html#6403" class="Bound">kA</a> <a id="6505" href="Setoid.Varieties.Preservation.html#6489" class="Bound">i</a><a id="6506" class="Symbol">)</a>
  <a id="6510" href="Setoid.Varieties.Preservation.html#6510" class="Function">IH</a> <a id="6513" class="Symbol">:</a> <a id="6515" href="Setoid.Algebras.Products.html#1792" class="Function">⨅</a> <a id="6517" href="Setoid.Varieties.Preservation.html#6399" class="Bound">𝒜</a> <a id="6519" href="Setoid.Varieties.SoundAndComplete.html#2265" class="Function Operator">⊧</a> <a id="6521" class="Symbol">(</a><a id="6522" href="Setoid.Varieties.Preservation.html#5542" class="Bound">p</a> <a id="6524" href="Setoid.Varieties.SoundAndComplete.html#2093" class="InductiveConstructor Operator">≈̇</a> <a id="6527" href="Setoid.Varieties.Preservation.html#5544" class="Bound">q</a><a id="6528" class="Symbol">)</a>
  <a id="6532" href="Setoid.Varieties.Preservation.html#6510" class="Function">IH</a> <a id="6535" class="Symbol">=</a> <a id="6537" href="Setoid.Varieties.Properties.html#7730" class="Function">⊧-P-invar</a> <a id="6547" class="Symbol">{</a><a id="6548" class="Argument">p</a> <a id="6550" class="Symbol">=</a> <a id="6552" href="Setoid.Varieties.Preservation.html#5542" class="Bound">p</a><a id="6553" class="Symbol">}{</a><a id="6555" href="Setoid.Varieties.Preservation.html#5544" class="Bound">q</a><a id="6556" class="Symbol">}</a> <a id="6558" href="Setoid.Varieties.Preservation.html#6399" class="Bound">𝒜</a> <a id="6560" href="Setoid.Varieties.Preservation.html#6458" class="Function">ih</a>

 <a id="6565" href="Setoid.Varieties.Preservation.html#6565" class="Function">P-id2</a> <a id="6571" class="Symbol">:</a> <a id="6573" class="Symbol">∀{</a><a id="6575" href="Setoid.Varieties.Preservation.html#6575" class="Bound">ι</a><a id="6576" class="Symbol">}</a> <a id="6578" class="Symbol">→</a> <a id="6580" href="Setoid.Varieties.Closure.html#3116" class="Function">P</a> <a id="6582" href="Setoid.Varieties.Preservation.html#5444" class="Bound">ℓ</a> <a id="6584" href="Setoid.Varieties.Preservation.html#6575" class="Bound">ι</a> <a id="6586" href="Setoid.Varieties.Preservation.html#5468" class="Bound">𝒦</a> <a id="6588" href="Setoid.Varieties.SoundAndComplete.html#2373" class="Function Operator">⊫</a> <a id="6590" class="Symbol">(</a><a id="6591" href="Setoid.Varieties.Preservation.html#5542" class="Bound">p</a> <a id="6593" href="Setoid.Varieties.SoundAndComplete.html#2093" class="InductiveConstructor Operator">≈̇</a> <a id="6596" href="Setoid.Varieties.Preservation.html#5544" class="Bound">q</a><a id="6597" class="Symbol">)</a> <a id="6599" class="Symbol">→</a> <a id="6601" href="Setoid.Varieties.Preservation.html#5468" class="Bound">𝒦</a> <a id="6603" href="Setoid.Varieties.SoundAndComplete.html#2373" class="Function Operator">⊫</a> <a id="6605" class="Symbol">(</a><a id="6606" href="Setoid.Varieties.Preservation.html#5542" class="Bound">p</a> <a id="6608" href="Setoid.Varieties.SoundAndComplete.html#2093" class="InductiveConstructor Operator">≈̇</a> <a id="6611" href="Setoid.Varieties.Preservation.html#5544" class="Bound">q</a><a id="6612" class="Symbol">)</a>
 <a id="6615" href="Setoid.Varieties.Preservation.html#6565" class="Function">P-id2</a><a id="6620" class="Symbol">{</a><a id="6621" href="Setoid.Varieties.Preservation.html#6621" class="Bound">ι</a><a id="6622" class="Symbol">}</a> <a id="6624" href="Setoid.Varieties.Preservation.html#6624" class="Bound">PKpq</a> <a id="6629" href="Setoid.Varieties.Preservation.html#6629" class="Bound">𝑨</a> <a id="6631" href="Setoid.Varieties.Preservation.html#6631" class="Bound">kA</a> <a id="6634" class="Symbol">=</a> <a id="6636" href="Setoid.Varieties.Preservation.html#6624" class="Bound">PKpq</a> <a id="6641" href="Setoid.Varieties.Preservation.html#6629" class="Bound">𝑨</a> <a id="6643" class="Symbol">(</a><a id="6644" href="Setoid.Varieties.Closure.html#6056" class="Function">P-expa</a> <a id="6651" class="Symbol">{</a><a id="6652" class="Argument">ℓ</a> <a id="6654" class="Symbol">=</a> <a id="6656" href="Setoid.Varieties.Preservation.html#5444" class="Bound">ℓ</a><a id="6657" class="Symbol">}{</a><a id="6659" href="Setoid.Varieties.Preservation.html#6621" class="Bound">ι</a><a id="6660" class="Symbol">}</a> <a id="6662" href="Setoid.Varieties.Preservation.html#6631" class="Bound">kA</a><a id="6664" class="Symbol">)</a>

</pre>


#### <a id="v-preserves-identities">V preserves identities</a>

Finally, we prove the analogous preservation lemmas for the closure operator `V`.

<pre class="Agda">

<a id="6841" class="Keyword">module</a> <a id="6848" href="Setoid.Varieties.Preservation.html#6848" class="Module">_</a>  <a id="6851" class="Symbol">{</a><a id="6852" href="Setoid.Varieties.Preservation.html#6852" class="Bound">α</a> <a id="6854" href="Setoid.Varieties.Preservation.html#6854" class="Bound">ρᵃ</a> <a id="6857" href="Setoid.Varieties.Preservation.html#6857" class="Bound">ℓ</a> <a id="6859" href="Setoid.Varieties.Preservation.html#6859" class="Bound">ι</a> <a id="6861" href="Setoid.Varieties.Preservation.html#6861" class="Bound">χ</a> <a id="6863" class="Symbol">:</a> <a id="6865" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="6870" class="Symbol">}</a>
          <a id="6882" class="Symbol">{</a><a id="6883" href="Setoid.Varieties.Preservation.html#6883" class="Bound">𝒦</a> <a id="6885" class="Symbol">:</a> <a id="6887" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="6891" class="Symbol">(</a><a id="6892" href="Setoid.Algebras.Basic.html#2890" class="Record">Algebra</a> <a id="6900" href="Setoid.Varieties.Preservation.html#6852" class="Bound">α</a> <a id="6902" href="Setoid.Varieties.Preservation.html#6854" class="Bound">ρᵃ</a><a id="6904" class="Symbol">)</a> <a id="6906" class="Symbol">(</a><a id="6907" href="Setoid.Varieties.Preservation.html#6852" class="Bound">α</a> <a id="6909" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="6911" href="Setoid.Varieties.Preservation.html#6854" class="Bound">ρᵃ</a> <a id="6914" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="6916" href="Setoid.Algebras.Basic.html#1187" class="Function">ov</a> <a id="6919" href="Setoid.Varieties.Preservation.html#6857" class="Bound">ℓ</a><a id="6920" class="Symbol">)}</a>
          <a id="6933" class="Symbol">{</a><a id="6934" href="Setoid.Varieties.Preservation.html#6934" class="Bound">X</a> <a id="6936" class="Symbol">:</a> <a id="6938" href="Setoid.Varieties.Preservation.html#835" class="Primitive">Type</a> <a id="6943" href="Setoid.Varieties.Preservation.html#6861" class="Bound">χ</a><a id="6944" class="Symbol">}</a>
          <a id="6956" class="Symbol">{</a><a id="6957" href="Setoid.Varieties.Preservation.html#6957" class="Bound">p</a> <a id="6959" href="Setoid.Varieties.Preservation.html#6959" class="Bound">q</a> <a id="6961" class="Symbol">:</a> <a id="6963" href="Base.Terms.Basic.html#2021" class="Datatype">Term</a> <a id="6968" href="Setoid.Varieties.Preservation.html#6934" class="Bound">X</a><a id="6969" class="Symbol">}</a> <a id="6971" class="Keyword">where</a>

 <a id="6979" class="Keyword">private</a>
  <a id="6989" href="Setoid.Varieties.Preservation.html#6989" class="Function">aℓι</a> <a id="6993" class="Symbol">=</a> <a id="6995" href="Setoid.Varieties.Preservation.html#6852" class="Bound">α</a> <a id="6997" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="6999" href="Setoid.Varieties.Preservation.html#6854" class="Bound">ρᵃ</a> <a id="7002" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="7004" href="Setoid.Varieties.Preservation.html#6857" class="Bound">ℓ</a> <a id="7006" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="7008" href="Setoid.Varieties.Preservation.html#6859" class="Bound">ι</a>

 <a id="7012" href="Setoid.Varieties.Preservation.html#7012" class="Function">V-id1</a> <a id="7018" class="Symbol">:</a> <a id="7020" href="Setoid.Varieties.Preservation.html#6883" class="Bound">𝒦</a> <a id="7022" href="Setoid.Varieties.SoundAndComplete.html#2373" class="Function Operator">⊫</a> <a id="7024" class="Symbol">(</a><a id="7025" href="Setoid.Varieties.Preservation.html#6957" class="Bound">p</a> <a id="7027" href="Setoid.Varieties.SoundAndComplete.html#2093" class="InductiveConstructor Operator">≈̇</a> <a id="7030" href="Setoid.Varieties.Preservation.html#6959" class="Bound">q</a><a id="7031" class="Symbol">)</a> <a id="7033" class="Symbol">→</a> <a id="7035" href="Setoid.Varieties.Closure.html#3595" class="Function">V</a> <a id="7037" href="Setoid.Varieties.Preservation.html#6857" class="Bound">ℓ</a> <a id="7039" href="Setoid.Varieties.Preservation.html#6859" class="Bound">ι</a> <a id="7041" href="Setoid.Varieties.Preservation.html#6883" class="Bound">𝒦</a> <a id="7043" href="Setoid.Varieties.SoundAndComplete.html#2373" class="Function Operator">⊫</a> <a id="7045" class="Symbol">(</a><a id="7046" href="Setoid.Varieties.Preservation.html#6957" class="Bound">p</a> <a id="7048" href="Setoid.Varieties.SoundAndComplete.html#2093" class="InductiveConstructor Operator">≈̇</a> <a id="7051" href="Setoid.Varieties.Preservation.html#6959" class="Bound">q</a><a id="7052" class="Symbol">)</a>
 <a id="7055" href="Setoid.Varieties.Preservation.html#7012" class="Function">V-id1</a> <a id="7061" href="Setoid.Varieties.Preservation.html#7061" class="Bound">σ</a> <a id="7063" href="Setoid.Varieties.Preservation.html#7063" class="Bound">𝑩</a> <a id="7065" class="Symbol">(</a><a id="7066" href="Setoid.Varieties.Preservation.html#7066" class="Bound">𝑨</a> <a id="7068" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="7070" class="Symbol">(</a><a id="7071" href="Setoid.Varieties.Preservation.html#7071" class="Bound">⨅A</a> <a id="7074" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="7076" href="Setoid.Varieties.Preservation.html#7076" class="Bound">p⨅A</a> <a id="7080" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="7082" href="Setoid.Varieties.Preservation.html#7082" class="Bound">A≤⨅A</a><a id="7086" class="Symbol">)</a> <a id="7088" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="7090" href="Setoid.Varieties.Preservation.html#7090" class="Bound">BimgA</a><a id="7095" class="Symbol">)</a> <a id="7097" class="Symbol">=</a>
  <a id="7101" href="Setoid.Varieties.Preservation.html#5574" class="Function">H-id1</a><a id="7106" class="Symbol">{</a><a id="7107" class="Argument">ℓ</a> <a id="7109" class="Symbol">=</a> <a id="7111" href="Setoid.Varieties.Preservation.html#6989" class="Function">aℓι</a><a id="7114" class="Symbol">}{</a><a id="7116" class="Argument">𝒦</a> <a id="7118" class="Symbol">=</a> <a id="7120" href="Setoid.Varieties.Closure.html#2990" class="Function">S</a> <a id="7122" href="Setoid.Varieties.Preservation.html#6989" class="Function">aℓι</a> <a id="7126" class="Symbol">(</a><a id="7127" href="Setoid.Varieties.Closure.html#3116" class="Function">P</a> <a id="7129" class="Symbol">{</a><a id="7130" class="Argument">β</a> <a id="7132" class="Symbol">=</a> <a id="7134" href="Setoid.Varieties.Preservation.html#6852" class="Bound">α</a><a id="7135" class="Symbol">}{</a><a id="7137" href="Setoid.Varieties.Preservation.html#6854" class="Bound">ρᵃ</a><a id="7139" class="Symbol">}</a><a id="7140" href="Setoid.Varieties.Preservation.html#6857" class="Bound">ℓ</a> <a id="7142" href="Setoid.Varieties.Preservation.html#6859" class="Bound">ι</a> <a id="7144" href="Setoid.Varieties.Preservation.html#6883" class="Bound">𝒦</a><a id="7145" class="Symbol">)}{</a><a id="7148" class="Argument">p</a> <a id="7150" class="Symbol">=</a> <a id="7152" href="Setoid.Varieties.Preservation.html#6957" class="Bound">p</a><a id="7153" class="Symbol">}{</a><a id="7155" href="Setoid.Varieties.Preservation.html#6959" class="Bound">q</a><a id="7156" class="Symbol">}</a> <a id="7158" href="Setoid.Varieties.Preservation.html#7266" class="Function">spK⊧pq</a> <a id="7165" href="Setoid.Varieties.Preservation.html#7063" class="Bound">𝑩</a> <a id="7167" class="Symbol">(</a><a id="7168" href="Setoid.Varieties.Preservation.html#7066" class="Bound">𝑨</a> <a id="7170" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="7172" class="Symbol">(</a><a id="7173" href="Setoid.Varieties.Preservation.html#7199" class="Function">spA</a> <a id="7177" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="7179" href="Setoid.Varieties.Preservation.html#7090" class="Bound">BimgA</a><a id="7184" class="Symbol">))</a>
   <a id="7190" class="Keyword">where</a>
   <a id="7199" href="Setoid.Varieties.Preservation.html#7199" class="Function">spA</a> <a id="7203" class="Symbol">:</a> <a id="7205" href="Setoid.Varieties.Preservation.html#7066" class="Bound">𝑨</a> <a id="7207" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="7209" href="Setoid.Varieties.Closure.html#2990" class="Function">S</a> <a id="7211" href="Setoid.Varieties.Preservation.html#6989" class="Function">aℓι</a> <a id="7215" class="Symbol">(</a><a id="7216" href="Setoid.Varieties.Closure.html#3116" class="Function">P</a> <a id="7218" class="Symbol">{</a><a id="7219" class="Argument">β</a> <a id="7221" class="Symbol">=</a> <a id="7223" href="Setoid.Varieties.Preservation.html#6852" class="Bound">α</a><a id="7224" class="Symbol">}{</a><a id="7226" href="Setoid.Varieties.Preservation.html#6854" class="Bound">ρᵃ</a><a id="7228" class="Symbol">}</a><a id="7229" href="Setoid.Varieties.Preservation.html#6857" class="Bound">ℓ</a> <a id="7231" href="Setoid.Varieties.Preservation.html#6859" class="Bound">ι</a> <a id="7233" href="Setoid.Varieties.Preservation.html#6883" class="Bound">𝒦</a><a id="7234" class="Symbol">)</a>
   <a id="7239" href="Setoid.Varieties.Preservation.html#7199" class="Function">spA</a> <a id="7243" class="Symbol">=</a> <a id="7245" href="Setoid.Varieties.Preservation.html#7071" class="Bound">⨅A</a> <a id="7248" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="7250" class="Symbol">(</a><a id="7251" href="Setoid.Varieties.Preservation.html#7076" class="Bound">p⨅A</a> <a id="7255" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="7257" href="Setoid.Varieties.Preservation.html#7082" class="Bound">A≤⨅A</a><a id="7261" class="Symbol">)</a>
   <a id="7266" href="Setoid.Varieties.Preservation.html#7266" class="Function">spK⊧pq</a> <a id="7273" class="Symbol">:</a> <a id="7275" href="Setoid.Varieties.Closure.html#2990" class="Function">S</a> <a id="7277" href="Setoid.Varieties.Preservation.html#6989" class="Function">aℓι</a> <a id="7281" class="Symbol">(</a><a id="7282" href="Setoid.Varieties.Closure.html#3116" class="Function">P</a> <a id="7284" href="Setoid.Varieties.Preservation.html#6857" class="Bound">ℓ</a> <a id="7286" href="Setoid.Varieties.Preservation.html#6859" class="Bound">ι</a> <a id="7288" href="Setoid.Varieties.Preservation.html#6883" class="Bound">𝒦</a><a id="7289" class="Symbol">)</a> <a id="7291" href="Setoid.Varieties.SoundAndComplete.html#2373" class="Function Operator">⊫</a> <a id="7293" class="Symbol">(</a><a id="7294" href="Setoid.Varieties.Preservation.html#6957" class="Bound">p</a> <a id="7296" href="Setoid.Varieties.SoundAndComplete.html#2093" class="InductiveConstructor Operator">≈̇</a> <a id="7299" href="Setoid.Varieties.Preservation.html#6959" class="Bound">q</a><a id="7300" class="Symbol">)</a>
   <a id="7305" href="Setoid.Varieties.Preservation.html#7266" class="Function">spK⊧pq</a> <a id="7312" class="Symbol">=</a> <a id="7314" href="Setoid.Varieties.Preservation.html#6022" class="Function">S-id1</a><a id="7319" class="Symbol">{</a><a id="7320" class="Argument">ℓ</a> <a id="7322" class="Symbol">=</a> <a id="7324" href="Setoid.Varieties.Preservation.html#6989" class="Function">aℓι</a><a id="7327" class="Symbol">}{</a><a id="7329" class="Argument">p</a> <a id="7331" class="Symbol">=</a> <a id="7333" href="Setoid.Varieties.Preservation.html#6957" class="Bound">p</a><a id="7334" class="Symbol">}{</a><a id="7336" href="Setoid.Varieties.Preservation.html#6959" class="Bound">q</a><a id="7337" class="Symbol">}</a> <a id="7339" class="Symbol">(</a><a id="7340" href="Setoid.Varieties.Preservation.html#6323" class="Function">P-id1</a><a id="7345" class="Symbol">{</a><a id="7346" class="Argument">ℓ</a> <a id="7348" class="Symbol">=</a> <a id="7350" href="Setoid.Varieties.Preservation.html#6857" class="Bound">ℓ</a><a id="7351" class="Symbol">}</a> <a id="7353" class="Symbol">{</a><a id="7354" class="Argument">𝒦</a> <a id="7356" class="Symbol">=</a> <a id="7358" href="Setoid.Varieties.Preservation.html#6883" class="Bound">𝒦</a><a id="7359" class="Symbol">}{</a><a id="7361" class="Argument">p</a> <a id="7363" class="Symbol">=</a> <a id="7365" href="Setoid.Varieties.Preservation.html#6957" class="Bound">p</a><a id="7366" class="Symbol">}{</a><a id="7368" href="Setoid.Varieties.Preservation.html#6959" class="Bound">q</a><a id="7369" class="Symbol">}</a> <a id="7371" href="Setoid.Varieties.Preservation.html#7061" class="Bound">σ</a><a id="7372" class="Symbol">)</a>

 <a id="7376" href="Setoid.Varieties.Preservation.html#7376" class="Function">V-id2</a> <a id="7382" class="Symbol">:</a> <a id="7384" href="Setoid.Varieties.Closure.html#3595" class="Function">V</a> <a id="7386" href="Setoid.Varieties.Preservation.html#6857" class="Bound">ℓ</a> <a id="7388" href="Setoid.Varieties.Preservation.html#6859" class="Bound">ι</a> <a id="7390" href="Setoid.Varieties.Preservation.html#6883" class="Bound">𝒦</a> <a id="7392" href="Setoid.Varieties.SoundAndComplete.html#2373" class="Function Operator">⊫</a> <a id="7394" class="Symbol">(</a><a id="7395" href="Setoid.Varieties.Preservation.html#6957" class="Bound">p</a> <a id="7397" href="Setoid.Varieties.SoundAndComplete.html#2093" class="InductiveConstructor Operator">≈̇</a> <a id="7400" href="Setoid.Varieties.Preservation.html#6959" class="Bound">q</a><a id="7401" class="Symbol">)</a> <a id="7403" class="Symbol">→</a> <a id="7405" href="Setoid.Varieties.Preservation.html#6883" class="Bound">𝒦</a> <a id="7407" href="Setoid.Varieties.SoundAndComplete.html#2373" class="Function Operator">⊫</a> <a id="7409" class="Symbol">(</a><a id="7410" href="Setoid.Varieties.Preservation.html#6957" class="Bound">p</a> <a id="7412" href="Setoid.Varieties.SoundAndComplete.html#2093" class="InductiveConstructor Operator">≈̇</a> <a id="7415" href="Setoid.Varieties.Preservation.html#6959" class="Bound">q</a><a id="7416" class="Symbol">)</a>
 <a id="7419" href="Setoid.Varieties.Preservation.html#7376" class="Function">V-id2</a> <a id="7425" href="Setoid.Varieties.Preservation.html#7425" class="Bound">Vpq</a> <a id="7429" href="Setoid.Varieties.Preservation.html#7429" class="Bound">𝑨</a> <a id="7431" href="Setoid.Varieties.Preservation.html#7431" class="Bound">kA</a> <a id="7434" class="Symbol">=</a> <a id="7436" href="Setoid.Varieties.Preservation.html#7425" class="Bound">Vpq</a> <a id="7440" href="Setoid.Varieties.Preservation.html#7429" class="Bound">𝑨</a> <a id="7442" class="Symbol">(</a><a id="7443" href="Setoid.Varieties.Closure.html#6810" class="Function">V-expa</a> <a id="7450" href="Setoid.Varieties.Preservation.html#6857" class="Bound">ℓ</a> <a id="7452" href="Setoid.Varieties.Preservation.html#6859" class="Bound">ι</a> <a id="7454" href="Setoid.Varieties.Preservation.html#7431" class="Bound">kA</a><a id="7456" class="Symbol">)</a>


 <a id="7461" href="Setoid.Varieties.Preservation.html#7461" class="Function">Lift-id1</a> <a id="7470" class="Symbol">:</a> <a id="7472" class="Symbol">∀{</a><a id="7474" href="Setoid.Varieties.Preservation.html#7474" class="Bound">β</a> <a id="7476" href="Setoid.Varieties.Preservation.html#7476" class="Bound">ρᵇ</a><a id="7478" class="Symbol">}</a> <a id="7480" class="Symbol">→</a> <a id="7482" href="Setoid.Varieties.Preservation.html#6883" class="Bound">𝒦</a> <a id="7484" href="Setoid.Varieties.SoundAndComplete.html#2373" class="Function Operator">⊫</a> <a id="7486" class="Symbol">(</a><a id="7487" href="Setoid.Varieties.Preservation.html#6957" class="Bound">p</a> <a id="7489" href="Setoid.Varieties.SoundAndComplete.html#2093" class="InductiveConstructor Operator">≈̇</a> <a id="7492" href="Setoid.Varieties.Preservation.html#6959" class="Bound">q</a><a id="7493" class="Symbol">)</a> <a id="7495" class="Symbol">→</a> <a id="7497" href="Setoid.Varieties.Closure.html#2417" class="Function">Level-closure</a><a id="7510" class="Symbol">{</a><a id="7511" href="Setoid.Varieties.Preservation.html#6852" class="Bound">α</a><a id="7512" class="Symbol">}{</a><a id="7514" href="Setoid.Varieties.Preservation.html#6854" class="Bound">ρᵃ</a><a id="7516" class="Symbol">}{</a><a id="7518" href="Setoid.Varieties.Preservation.html#7474" class="Bound">β</a><a id="7519" class="Symbol">}{</a><a id="7521" href="Setoid.Varieties.Preservation.html#7476" class="Bound">ρᵇ</a><a id="7523" class="Symbol">}</a> <a id="7525" href="Setoid.Varieties.Preservation.html#6857" class="Bound">ℓ</a> <a id="7527" href="Setoid.Varieties.Preservation.html#6883" class="Bound">𝒦</a> <a id="7529" href="Setoid.Varieties.SoundAndComplete.html#2373" class="Function Operator">⊫</a> <a id="7531" class="Symbol">(</a><a id="7532" href="Setoid.Varieties.Preservation.html#6957" class="Bound">p</a> <a id="7534" href="Setoid.Varieties.SoundAndComplete.html#2093" class="InductiveConstructor Operator">≈̇</a> <a id="7537" href="Setoid.Varieties.Preservation.html#6959" class="Bound">q</a><a id="7538" class="Symbol">)</a>
 <a id="7541" href="Setoid.Varieties.Preservation.html#7461" class="Function">Lift-id1</a> <a id="7550" href="Setoid.Varieties.Preservation.html#7550" class="Bound">pKq</a> <a id="7554" href="Setoid.Varieties.Preservation.html#7554" class="Bound">𝑨</a> <a id="7556" class="Symbol">(</a><a id="7557" href="Setoid.Varieties.Preservation.html#7557" class="Bound">𝑩</a> <a id="7559" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="7561" href="Setoid.Varieties.Preservation.html#7561" class="Bound">kB</a> <a id="7564" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="7566" href="Setoid.Varieties.Preservation.html#7566" class="Bound">B≅A</a><a id="7569" class="Symbol">)</a> <a id="7571" href="Setoid.Varieties.Preservation.html#7571" class="Bound">ρ</a> <a id="7573" class="Symbol">=</a> <a id="7575" href="Setoid.Varieties.Preservation.html#7648" class="Function">Goal</a>
  <a id="7582" class="Keyword">where</a>
  <a id="7590" class="Keyword">open</a> <a id="7595" href="Setoid.Terms.Basic.html#3906" class="Module">Environment</a> <a id="7607" href="Setoid.Varieties.Preservation.html#7554" class="Bound">𝑨</a>
  <a id="7611" class="Keyword">open</a> <a id="7616" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="7623" class="Symbol">(</a><a id="7624" href="Setoid.Algebras.Basic.html#2947" class="Field">Domain</a> <a id="7631" href="Setoid.Varieties.Preservation.html#7554" class="Bound">𝑨</a><a id="7632" class="Symbol">)</a> <a id="7634" class="Keyword">using</a> <a id="7640" class="Symbol">(</a><a id="7641" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_≈_</a><a id="7644" class="Symbol">)</a>
  <a id="7648" href="Setoid.Varieties.Preservation.html#7648" class="Function">Goal</a> <a id="7653" class="Symbol">:</a> <a id="7655" href="Setoid.Terms.Basic.html#4953" class="Function Operator">⟦</a> <a id="7657" href="Setoid.Varieties.Preservation.html#6957" class="Bound">p</a> <a id="7659" href="Setoid.Terms.Basic.html#4953" class="Function Operator">⟧</a> <a id="7661" href="Setoid.Varieties.Preservation.html#3257" class="Field Operator">⟨$⟩</a> <a id="7665" href="Setoid.Varieties.Preservation.html#7571" class="Bound">ρ</a> <a id="7667" href="Relation.Binary.Bundles.html#1098" class="Function Operator">≈</a> <a id="7669" href="Setoid.Terms.Basic.html#4953" class="Function Operator">⟦</a> <a id="7671" href="Setoid.Varieties.Preservation.html#6959" class="Bound">q</a> <a id="7673" href="Setoid.Terms.Basic.html#4953" class="Function Operator">⟧</a> <a id="7675" href="Setoid.Varieties.Preservation.html#3257" class="Field Operator">⟨$⟩</a> <a id="7679" href="Setoid.Varieties.Preservation.html#7571" class="Bound">ρ</a>
  <a id="7683" href="Setoid.Varieties.Preservation.html#7648" class="Function">Goal</a> <a id="7688" class="Symbol">=</a> <a id="7690" href="Setoid.Varieties.Properties.html#3646" class="Function">⊧-I-invar</a> <a id="7700" href="Setoid.Varieties.Preservation.html#7554" class="Bound">𝑨</a> <a id="7702" href="Setoid.Varieties.Preservation.html#6957" class="Bound">p</a> <a id="7704" href="Setoid.Varieties.Preservation.html#6959" class="Bound">q</a> <a id="7706" class="Symbol">(</a><a id="7707" href="Setoid.Varieties.Preservation.html#7550" class="Bound">pKq</a> <a id="7711" href="Setoid.Varieties.Preservation.html#7557" class="Bound">𝑩</a> <a id="7713" href="Setoid.Varieties.Preservation.html#7561" class="Bound">kB</a><a id="7715" class="Symbol">)</a> <a id="7717" href="Setoid.Varieties.Preservation.html#7566" class="Bound">B≅A</a> <a id="7721" href="Setoid.Varieties.Preservation.html#7571" class="Bound">ρ</a>

</pre>


#### <a id="class-identities">Class identities</a>

From `V-id1` it follows that if 𝒦 is a class of structures, then the set of identities modeled by all structures in `𝒦` is equivalent to the set of identities modeled by all structures in `V 𝒦`.  In other terms, `Th (V 𝒦)` is precisely the set of identities modeled by `𝒦`.   We formalize this observation as follows.

<pre class="Agda">

 <a id="8123" href="Setoid.Varieties.Preservation.html#8123" class="Function">classIds-⊆-VIds</a> <a id="8139" class="Symbol">:</a> <a id="8141" href="Setoid.Varieties.Preservation.html#6883" class="Bound">𝒦</a> <a id="8143" href="Setoid.Varieties.SoundAndComplete.html#2373" class="Function Operator">⊫</a> <a id="8145" class="Symbol">(</a><a id="8146" href="Setoid.Varieties.Preservation.html#6957" class="Bound">p</a> <a id="8148" href="Setoid.Varieties.SoundAndComplete.html#2093" class="InductiveConstructor Operator">≈̇</a> <a id="8151" href="Setoid.Varieties.Preservation.html#6959" class="Bound">q</a><a id="8152" class="Symbol">)</a>  <a id="8155" class="Symbol">→</a> <a id="8157" class="Symbol">(</a><a id="8158" href="Setoid.Varieties.Preservation.html#6957" class="Bound">p</a> <a id="8160" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="8162" href="Setoid.Varieties.Preservation.html#6959" class="Bound">q</a><a id="8163" class="Symbol">)</a> <a id="8165" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="8167" href="Setoid.Varieties.SoundAndComplete.html#3308" class="Function">Th</a> <a id="8170" class="Symbol">(</a><a id="8171" href="Setoid.Varieties.Closure.html#3595" class="Function">V</a> <a id="8173" href="Setoid.Varieties.Preservation.html#6857" class="Bound">ℓ</a> <a id="8175" href="Setoid.Varieties.Preservation.html#6859" class="Bound">ι</a> <a id="8177" href="Setoid.Varieties.Preservation.html#6883" class="Bound">𝒦</a><a id="8178" class="Symbol">)</a>
 <a id="8181" href="Setoid.Varieties.Preservation.html#8123" class="Function">classIds-⊆-VIds</a> <a id="8197" href="Setoid.Varieties.Preservation.html#8197" class="Bound">pKq</a> <a id="8201" href="Setoid.Varieties.Preservation.html#8201" class="Bound">𝑨</a> <a id="8203" class="Symbol">=</a> <a id="8205" href="Setoid.Varieties.Preservation.html#7012" class="Function">V-id1</a> <a id="8211" href="Setoid.Varieties.Preservation.html#8197" class="Bound">pKq</a> <a id="8215" href="Setoid.Varieties.Preservation.html#8201" class="Bound">𝑨</a>

 <a id="8219" href="Setoid.Varieties.Preservation.html#8219" class="Function">VIds-⊆-classIds</a> <a id="8235" class="Symbol">:</a> <a id="8237" class="Symbol">(</a><a id="8238" href="Setoid.Varieties.Preservation.html#6957" class="Bound">p</a> <a id="8240" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="8242" href="Setoid.Varieties.Preservation.html#6959" class="Bound">q</a><a id="8243" class="Symbol">)</a> <a id="8245" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="8247" href="Setoid.Varieties.SoundAndComplete.html#3308" class="Function">Th</a> <a id="8250" class="Symbol">(</a><a id="8251" href="Setoid.Varieties.Closure.html#3595" class="Function">V</a> <a id="8253" href="Setoid.Varieties.Preservation.html#6857" class="Bound">ℓ</a> <a id="8255" href="Setoid.Varieties.Preservation.html#6859" class="Bound">ι</a> <a id="8257" href="Setoid.Varieties.Preservation.html#6883" class="Bound">𝒦</a><a id="8258" class="Symbol">)</a> <a id="8260" class="Symbol">→</a> <a id="8262" href="Setoid.Varieties.Preservation.html#6883" class="Bound">𝒦</a> <a id="8264" href="Setoid.Varieties.SoundAndComplete.html#2373" class="Function Operator">⊫</a> <a id="8266" class="Symbol">(</a><a id="8267" href="Setoid.Varieties.Preservation.html#6957" class="Bound">p</a> <a id="8269" href="Setoid.Varieties.SoundAndComplete.html#2093" class="InductiveConstructor Operator">≈̇</a> <a id="8272" href="Setoid.Varieties.Preservation.html#6959" class="Bound">q</a><a id="8273" class="Symbol">)</a>
 <a id="8276" href="Setoid.Varieties.Preservation.html#8219" class="Function">VIds-⊆-classIds</a> <a id="8292" href="Setoid.Varieties.Preservation.html#8292" class="Bound">Thpq</a> <a id="8297" href="Setoid.Varieties.Preservation.html#8297" class="Bound">𝑨</a> <a id="8299" href="Setoid.Varieties.Preservation.html#8299" class="Bound">kA</a> <a id="8302" class="Symbol">=</a> <a id="8304" href="Setoid.Varieties.Preservation.html#7376" class="Function">V-id2</a> <a id="8310" href="Setoid.Varieties.Preservation.html#8292" class="Bound">Thpq</a> <a id="8315" href="Setoid.Varieties.Preservation.html#8297" class="Bound">𝑨</a> <a id="8317" href="Setoid.Varieties.Preservation.html#8299" class="Bound">kA</a>

</pre>

----------------------------

<span style="float:left;">[← Setoid.Varieties.Properties](Setoid.Varieties.Properties.html)</span>
<span style="float:right;">[Setoid.Varieties.FreeAlgebras →](Setoid.Varieties.FreeAlgebras.html)</span>

{% include UALib.Links.md %}


