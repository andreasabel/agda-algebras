---
layout: default
title : "Setoid.Varieties.HSP module (Agda Universal Algebra Library)"
date : "2021-10-16"
author: "agda-algebras development team"
---

#### <a id="the-hsp-theorem">The HSP Theorem</a>

<pre class="Agda">

<a id="222" class="Symbol">{-#</a> <a id="226" class="Keyword">OPTIONS</a> <a id="234" class="Pragma">--without-K</a> <a id="246" class="Pragma">--exact-split</a> <a id="260" class="Pragma">--safe</a> <a id="267" class="Symbol">#-}</a>

<a id="272" class="Keyword">open</a> <a id="277" class="Keyword">import</a> <a id="284" href="Overture.html" class="Module">Overture</a> <a id="293" class="Keyword">using</a> <a id="299" class="Symbol">(</a><a id="300" href="Overture.Signatures.html#648" class="Generalizable">𝓞</a> <a id="302" class="Symbol">;</a> <a id="304" href="Overture.Signatures.html#650" class="Generalizable">𝓥</a> <a id="306" class="Symbol">;</a> <a id="308" href="Overture.Signatures.html#3291" class="Function">Signature</a><a id="317" class="Symbol">)</a>

<a id="320" class="Keyword">module</a> <a id="327" href="Setoid.Varieties.HSP.html" class="Module">Setoid.Varieties.HSP</a> <a id="348" class="Symbol">{</a><a id="349" href="Setoid.Varieties.HSP.html#349" class="Bound">𝑆</a> <a id="351" class="Symbol">:</a> <a id="353" href="Overture.Signatures.html#3291" class="Function">Signature</a> <a id="363" href="Overture.Signatures.html#648" class="Generalizable">𝓞</a> <a id="365" href="Overture.Signatures.html#650" class="Generalizable">𝓥</a><a id="366" class="Symbol">}</a> <a id="368" class="Keyword">where</a>

<a id="375" class="Comment">-- Imports from Agda and the Agda Standard Library -------------------------------</a>
<a id="458" class="Keyword">open</a> <a id="463" class="Keyword">import</a> <a id="470" href="Agda.Primitive.html" class="Module">Agda.Primitive</a>   <a id="487" class="Keyword">using</a> <a id="493" class="Symbol">()</a> <a id="496" class="Keyword">renaming</a> <a id="505" class="Symbol">(</a> <a id="507" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="511" class="Symbol">to</a> <a id="514" class="Primitive">Type</a> <a id="519" class="Symbol">)</a>
<a id="521" class="Keyword">open</a> <a id="526" class="Keyword">import</a> <a id="533" href="Data.Product.html" class="Module">Data.Product</a>     <a id="550" class="Keyword">using</a> <a id="556" class="Symbol">(</a> <a id="558" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">_,_</a> <a id="562" class="Symbol">;</a> <a id="564" href="Data.Product.html#916" class="Function">Σ-syntax</a> <a id="573" class="Symbol">;</a> <a id="575" href="Data.Product.html#1167" class="Function Operator">_×_</a> <a id="579" class="Symbol">)</a>
                             <a id="610" class="Keyword">renaming</a> <a id="619" class="Symbol">(</a> <a id="621" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="627" class="Symbol">to</a> <a id="630" class="Field">fst</a> <a id="634" class="Symbol">;</a> <a id="636" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="642" class="Symbol">to</a> <a id="645" class="Field">snd</a> <a id="649" class="Symbol">)</a>
<a id="651" class="Keyword">open</a> <a id="656" class="Keyword">import</a> <a id="663" href="Function.html" class="Module">Function</a>         <a id="680" class="Keyword">using</a> <a id="686" class="Symbol">()</a> <a id="689" class="Keyword">renaming</a> <a id="698" class="Symbol">(</a> <a id="700" href="Function.Bundles.html#1868" class="Record">Func</a> <a id="705" class="Symbol">to</a> <a id="708" class="Record">_⟶_</a> <a id="712" class="Symbol">)</a>
<a id="714" class="Keyword">open</a> <a id="719" class="Keyword">import</a> <a id="726" href="Level.html" class="Module">Level</a>            <a id="743" class="Keyword">using</a> <a id="749" class="Symbol">(</a> <a id="751" href="Agda.Primitive.html#597" class="Postulate">Level</a> <a id="757" class="Symbol">;</a> <a id="759" href="Agda.Primitive.html#810" class="Primitive Operator">_⊔_</a> <a id="763" class="Symbol">)</a>
<a id="765" class="Keyword">open</a> <a id="770" class="Keyword">import</a> <a id="777" href="Relation.Binary.html" class="Module">Relation.Binary</a>  <a id="794" class="Keyword">using</a> <a id="800" class="Symbol">(</a> <a id="802" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="809" class="Symbol">)</a>
<a id="811" class="Keyword">open</a> <a id="816" class="Keyword">import</a> <a id="823" href="Relation.Unary.html" class="Module">Relation.Unary</a>   <a id="840" class="Keyword">using</a> <a id="846" class="Symbol">(</a> <a id="848" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="853" class="Symbol">;</a> <a id="855" href="Relation.Unary.html#1523" class="Function Operator">_∈_</a> <a id="859" class="Symbol">;</a> <a id="861" href="Relation.Unary.html#1742" class="Function Operator">_⊆_</a> <a id="865" class="Symbol">)</a>

<a id="868" class="Comment">-- -- Imports from the Agda Universal Algebra Library ----------------------------</a>
<a id="951" class="Keyword">open</a>  <a id="957" class="Keyword">import</a> <a id="964" href="Overture.html" class="Module">Overture</a>          <a id="982" class="Keyword">using</a> <a id="988" class="Symbol">(</a> <a id="990" href="Overture.Basic.html#4326" class="Function Operator">∣_∣</a> <a id="994" class="Symbol">;</a> <a id="996" href="Overture.Basic.html#4364" class="Function Operator">∥_∥</a> <a id="1000" class="Symbol">)</a>
<a id="1002" class="Keyword">open</a>  <a id="1008" class="Keyword">import</a> <a id="1015" href="Setoid.Relations.html" class="Module">Setoid.Relations</a>  <a id="1033" class="Keyword">using</a> <a id="1039" class="Symbol">(</a> <a id="1041" href="Setoid.Relations.Discrete.html#2433" class="Function">fkerPred</a> <a id="1050" class="Symbol">)</a>

<a id="1053" class="Keyword">open</a>  <a id="1059" class="Keyword">import</a> <a id="1066" href="Setoid.Algebras.html" class="Module">Setoid.Algebras</a> <a id="1082" class="Symbol">{</a><a id="1083" class="Argument">𝑆</a> <a id="1085" class="Symbol">=</a> <a id="1087" href="Setoid.Varieties.HSP.html#349" class="Bound">𝑆</a><a id="1088" class="Symbol">}</a>     <a id="1094" class="Keyword">using</a> <a id="1100" class="Symbol">(</a> <a id="1102" href="Setoid.Algebras.Basic.html#2837" class="Record">Algebra</a> <a id="1110" class="Symbol">;</a> <a id="1112" href="Setoid.Algebras.Basic.html#1068" class="Function">ov</a> <a id="1115" class="Symbol">;</a> <a id="1117" href="Setoid.Algebras.Basic.html#5877" class="Function">Lift-Alg</a> <a id="1126" class="Symbol">;</a> <a id="1128" href="Setoid.Algebras.Products.html#1634" class="Function">⨅</a> <a id="1130" class="Symbol">)</a>
<a id="1132" class="Keyword">open</a>  <a id="1138" class="Keyword">import</a> <a id="1145" href="Setoid.Subalgebras.html" class="Module">Setoid.Subalgebras</a> <a id="1164" class="Symbol">{</a><a id="1165" class="Argument">𝑆</a> <a id="1167" class="Symbol">=</a> <a id="1169" href="Setoid.Varieties.HSP.html#349" class="Bound">𝑆</a><a id="1170" class="Symbol">}</a>  <a id="1173" class="Keyword">using</a> <a id="1179" class="Symbol">(</a> <a id="1181" href="Setoid.Subalgebras.Subalgebras.html#1518" class="Function Operator">_≤_</a> <a id="1185" class="Symbol">;</a> <a id="1187" href="Setoid.Subalgebras.Subalgebras.html#1802" class="Function">mon→≤</a> <a id="1193" class="Symbol">)</a>
<a id="1195" class="Keyword">open</a>  <a id="1201" class="Keyword">import</a> <a id="1208" href="Setoid.Homomorphisms.html" class="Module">Setoid.Homomorphisms</a> <a id="1229" class="Symbol">{</a><a id="1230" class="Argument">𝑆</a> <a id="1232" class="Symbol">=</a> <a id="1234" href="Setoid.Varieties.HSP.html#349" class="Bound">𝑆</a><a id="1235" class="Symbol">}</a>
      <a id="1243" class="Keyword">using</a>  <a id="1250" class="Symbol">(</a> <a id="1252" href="Setoid.Homomorphisms.Basic.html#1918" class="Function">hom</a> <a id="1256" class="Symbol">;</a> <a id="1258" href="Setoid.Homomorphisms.Basic.html#2253" class="Function">mon</a> <a id="1262" class="Symbol">;</a> <a id="1264" href="Setoid.Homomorphisms.Basic.html#2093" class="Record">IsMon</a> <a id="1270" class="Symbol">;</a> <a id="1272" href="Setoid.Homomorphisms.Basic.html#1825" class="Record">IsHom</a> <a id="1278" class="Symbol">;</a> <a id="1280" href="Setoid.Homomorphisms.Basic.html#2541" class="Function">epi</a> <a id="1284" class="Symbol">;</a> <a id="1286" href="Setoid.Homomorphisms.Basic.html#2859" class="Function">epi→ontohom</a> <a id="1298" class="Symbol">;</a> <a id="1300" href="Setoid.Homomorphisms.Products.html#1962" class="Function">⨅-hom-co</a>
             <a id="1322" class="Symbol">;</a> <a id="1324" href="Setoid.Homomorphisms.Factor.html#2603" class="Function">HomFactor</a> <a id="1334" class="Symbol">;</a> <a id="1336" href="Setoid.Homomorphisms.Isomorphisms.html#3930" class="Function">≅-refl</a> <a id="1343" class="Symbol">;</a> <a id="1345" href="Setoid.Homomorphisms.HomomorphicImages.html#2132" class="Function Operator">_IsHomImageOf_</a> <a id="1360" class="Symbol">)</a>

<a id="1363" class="Keyword">open</a>  <a id="1369" class="Keyword">import</a> <a id="1376" href="Setoid.Terms.html" class="Module">Setoid.Terms</a> <a id="1389" class="Symbol">{</a><a id="1390" class="Argument">𝑆</a> <a id="1392" class="Symbol">=</a> <a id="1394" href="Setoid.Varieties.HSP.html#349" class="Bound">𝑆</a><a id="1395" class="Symbol">}</a>
      <a id="1403" class="Keyword">using</a> <a id="1409" class="Symbol">(</a> <a id="1411" class="Keyword">module</a> <a id="1418" href="Setoid.Terms.Basic.html#3846" class="Module">Environment</a> <a id="1430" class="Symbol">;</a> <a id="1432" href="Setoid.Terms.Basic.html#2876" class="Function">𝑻</a> <a id="1434" class="Symbol">;</a> <a id="1436" href="Setoid.Terms.Properties.html#3767" class="Function">lift-hom</a> <a id="1445" class="Symbol">;</a> <a id="1447" href="Setoid.Terms.Properties.html#2572" class="Function">free-lift</a> <a id="1457" class="Symbol">;</a> <a id="1459" href="Setoid.Terms.Operations.html#2204" class="Function">free-lift-interp</a> <a id="1476" class="Symbol">)</a>

<a id="1479" class="Keyword">open</a>  <a id="1485" class="Keyword">import</a> <a id="1492" href="Setoid.Varieties.Closure.html" class="Module">Setoid.Varieties.Closure</a> <a id="1517" class="Symbol">{</a><a id="1518" class="Argument">𝑆</a> <a id="1520" class="Symbol">=</a> <a id="1522" href="Setoid.Varieties.HSP.html#349" class="Bound">𝑆</a><a id="1523" class="Symbol">}</a>
      <a id="1531" class="Keyword">using</a> <a id="1537" class="Symbol">(</a> <a id="1539" href="Setoid.Varieties.Closure.html#2475" class="Function">S</a> <a id="1541" class="Symbol">;</a> <a id="1543" href="Setoid.Varieties.Closure.html#3078" class="Function">V</a> <a id="1545" class="Symbol">;</a> <a id="1547" href="Setoid.Varieties.Closure.html#2601" class="Function">P</a> <a id="1549" class="Symbol">;</a> <a id="1551" href="Setoid.Varieties.Closure.html#4603" class="Function">S-idem</a> <a id="1558" class="Symbol">;</a> <a id="1560" href="Setoid.Varieties.Closure.html#7438" class="Function">V-≅-lc</a> <a id="1567" class="Symbol">)</a>

<a id="1570" class="Keyword">open</a>  <a id="1576" class="Keyword">import</a> <a id="1583" href="Setoid.Varieties.Preservation.html" class="Module">Setoid.Varieties.Preservation</a> <a id="1613" class="Symbol">{</a><a id="1614" class="Argument">𝑆</a> <a id="1616" class="Symbol">=</a> <a id="1618" href="Setoid.Varieties.HSP.html#349" class="Bound">𝑆</a><a id="1619" class="Symbol">}</a>
      <a id="1627" class="Keyword">using</a> <a id="1633" class="Symbol">(</a> <a id="1635" href="Setoid.Varieties.Preservation.html#4783" class="Function">S-id2</a> <a id="1641" class="Symbol">;</a> <a id="1643" href="Setoid.Varieties.Preservation.html#3497" class="Function">PS⊆SP</a> <a id="1649" class="Symbol">)</a>

<a id="1652" class="Keyword">open</a>  <a id="1658" class="Keyword">import</a> <a id="1665" href="Setoid.Varieties.FreeAlgebras.html" class="Module">Setoid.Varieties.FreeAlgebras</a> <a id="1695" class="Symbol">{</a><a id="1696" class="Argument">𝑆</a> <a id="1698" class="Symbol">=</a> <a id="1700" href="Setoid.Varieties.HSP.html#349" class="Bound">𝑆</a><a id="1701" class="Symbol">}</a>
      <a id="1709" class="Keyword">using</a> <a id="1715" class="Symbol">(</a> <a id="1717" class="Keyword">module</a> <a id="1724" href="Setoid.Varieties.FreeAlgebras.html#2407" class="Module">FreeHom</a> <a id="1732" class="Symbol">;</a> <a id="1734" href="Setoid.Varieties.FreeAlgebras.html#7265" class="Function">𝔽-ModTh-epi-lift</a> <a id="1751" class="Symbol">)</a>

<a id="1754" class="Keyword">open</a>  <a id="1760" class="Keyword">import</a> <a id="1767" href="Setoid.Varieties.SoundAndComplete.html" class="Module">Setoid.Varieties.SoundAndComplete</a>  <a id="1802" class="Symbol">{</a><a id="1803" class="Argument">𝑆</a> <a id="1805" class="Symbol">=</a> <a id="1807" href="Setoid.Varieties.HSP.html#349" class="Bound">𝑆</a><a id="1808" class="Symbol">}</a>
      <a id="1816" class="Keyword">using</a> <a id="1822" class="Symbol">(</a> <a id="1824" class="Keyword">module</a> <a id="1831" href="Setoid.Varieties.SoundAndComplete.html#7367" class="Module">FreeAlgebra</a> <a id="1843" class="Symbol">;</a> <a id="1845" href="Setoid.Varieties.SoundAndComplete.html#2318" class="Function Operator">_⊫_</a> <a id="1849" class="Symbol">;</a> <a id="1851" href="Setoid.Varieties.SoundAndComplete.html#2035" class="InductiveConstructor Operator">_≈̇_</a> <a id="1856" class="Symbol">;</a>  <a id="1859" href="Setoid.Varieties.SoundAndComplete.html#4125" class="Datatype Operator">_⊢_▹_≈_</a> <a id="1867" class="Symbol">;</a> <a id="1869" href="Setoid.Varieties.SoundAndComplete.html#3094" class="Function">Mod</a> <a id="1873" class="Symbol">;</a> <a id="1875" href="Setoid.Varieties.SoundAndComplete.html#3253" class="Function">Th</a> <a id="1878" class="Symbol">)</a>

<a id="1881" class="Keyword">open</a> <a id="1886" href="Setoid.Varieties.HSP.html#708" class="Module">_⟶_</a>          <a id="1899" class="Keyword">using</a> <a id="1905" class="Symbol">()</a> <a id="1908" class="Keyword">renaming</a> <a id="1917" class="Symbol">(</a> <a id="1919" href="Function.Bundles.html#1919" class="Field">f</a> <a id="1921" class="Symbol">to</a> <a id="1924" class="Field">_⟨$⟩_</a> <a id="1930" class="Symbol">)</a>
<a id="1932" class="Keyword">open</a> <a id="1937" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a>       <a id="1950" class="Keyword">using</a> <a id="1956" class="Symbol">(</a> <a id="1958" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="1966" class="Symbol">)</a>
<a id="1968" class="Keyword">open</a> <a id="1973" href="Setoid.Algebras.Basic.html#2837" class="Module">Algebra</a>      <a id="1986" class="Keyword">using</a> <a id="1992" class="Symbol">(</a> <a id="1994" href="Setoid.Algebras.Basic.html#2894" class="Field">Domain</a> <a id="2001" class="Symbol">)</a>
<a id="2003" class="Keyword">open</a> <a id="2008" href="Setoid.Terms.Basic.html#3846" class="Module">Environment</a>  <a id="2021" class="Keyword">using</a> <a id="2027" class="Symbol">(</a> <a id="2029" href="Setoid.Terms.Basic.html#4046" class="Function">Env</a> <a id="2033" class="Symbol">)</a>

<a id="2036" class="Keyword">module</a> <a id="2043" href="Setoid.Varieties.HSP.html#2043" class="Module">_</a>  <a id="2046" class="Symbol">{</a><a id="2047" href="Setoid.Varieties.HSP.html#2047" class="Bound">α</a> <a id="2049" href="Setoid.Varieties.HSP.html#2049" class="Bound">ρᵃ</a> <a id="2052" href="Setoid.Varieties.HSP.html#2052" class="Bound">ℓ</a> <a id="2054" class="Symbol">:</a> <a id="2056" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="2061" class="Symbol">}</a>
          <a id="2073" class="Symbol">(</a><a id="2074" href="Setoid.Varieties.HSP.html#2074" class="Bound">𝒦</a> <a id="2076" class="Symbol">:</a> <a id="2078" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="2082" class="Symbol">(</a><a id="2083" href="Setoid.Algebras.Basic.html#2837" class="Record">Algebra</a> <a id="2091" href="Setoid.Varieties.HSP.html#2047" class="Bound">α</a> <a id="2093" href="Setoid.Varieties.HSP.html#2049" class="Bound">ρᵃ</a><a id="2095" class="Symbol">)</a> <a id="2097" class="Symbol">(</a><a id="2098" href="Setoid.Varieties.HSP.html#2047" class="Bound">α</a> <a id="2100" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="2102" href="Setoid.Varieties.HSP.html#2049" class="Bound">ρᵃ</a> <a id="2105" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="2107" href="Setoid.Algebras.Basic.html#1068" class="Function">ov</a> <a id="2110" href="Setoid.Varieties.HSP.html#2052" class="Bound">ℓ</a><a id="2111" class="Symbol">))</a>
          <a id="2124" class="Symbol">{</a><a id="2125" href="Setoid.Varieties.HSP.html#2125" class="Bound">X</a> <a id="2127" class="Symbol">:</a> <a id="2129" href="Setoid.Varieties.HSP.html#514" class="Primitive">Type</a> <a id="2134" class="Symbol">(</a><a id="2135" href="Setoid.Varieties.HSP.html#2047" class="Bound">α</a> <a id="2137" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="2139" href="Setoid.Varieties.HSP.html#2049" class="Bound">ρᵃ</a> <a id="2142" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="2144" href="Setoid.Varieties.HSP.html#2052" class="Bound">ℓ</a><a id="2145" class="Symbol">)}</a> <a id="2148" class="Keyword">where</a>

 <a id="2156" class="Keyword">private</a> <a id="2164" href="Setoid.Varieties.HSP.html#2164" class="Function">ι</a> <a id="2166" class="Symbol">=</a> <a id="2168" href="Setoid.Algebras.Basic.html#1068" class="Function">ov</a><a id="2170" class="Symbol">(</a><a id="2171" href="Setoid.Varieties.HSP.html#2047" class="Bound">α</a> <a id="2173" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="2175" href="Setoid.Varieties.HSP.html#2049" class="Bound">ρᵃ</a> <a id="2178" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="2180" href="Setoid.Varieties.HSP.html#2052" class="Bound">ℓ</a><a id="2181" class="Symbol">)</a>

 <a id="2185" class="Keyword">open</a> <a id="2190" href="Setoid.Varieties.FreeAlgebras.html#2407" class="Module">FreeHom</a> <a id="2198" class="Symbol">(</a><a id="2199" href="Setoid.Varieties.HSP.html#2047" class="Bound">α</a> <a id="2201" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="2203" href="Setoid.Varieties.HSP.html#2049" class="Bound">ρᵃ</a> <a id="2206" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="2208" href="Setoid.Varieties.HSP.html#2052" class="Bound">ℓ</a><a id="2209" class="Symbol">)</a> <a id="2211" class="Symbol">{</a><a id="2212" href="Setoid.Varieties.HSP.html#2047" class="Bound">α</a><a id="2213" class="Symbol">}{</a><a id="2215" href="Setoid.Varieties.HSP.html#2049" class="Bound">ρᵃ</a><a id="2217" class="Symbol">}{</a><a id="2219" href="Setoid.Varieties.HSP.html#2052" class="Bound">ℓ</a><a id="2220" class="Symbol">}{</a><a id="2222" href="Setoid.Varieties.HSP.html#2074" class="Bound">𝒦</a><a id="2223" class="Symbol">}</a>
 <a id="2226" class="Keyword">open</a> <a id="2231" href="Setoid.Varieties.SoundAndComplete.html#7367" class="Module">FreeAlgebra</a> <a id="2243" class="Symbol">{</a><a id="2244" class="Argument">ι</a> <a id="2246" class="Symbol">=</a> <a id="2248" href="Setoid.Varieties.HSP.html#2164" class="Function">ι</a><a id="2249" class="Symbol">}{</a><a id="2251" class="Argument">I</a> <a id="2253" class="Symbol">=</a> <a id="2255" href="Setoid.Varieties.FreeAlgebras.html#2955" class="Function">ℐ</a><a id="2256" class="Symbol">}</a> <a id="2258" href="Setoid.Varieties.FreeAlgebras.html#3016" class="Function">ℰ</a> <a id="2260" class="Keyword">using</a> <a id="2266" class="Symbol">(</a> <a id="2268" href="Setoid.Varieties.SoundAndComplete.html#7995" class="Function Operator">𝔽[_]</a> <a id="2273" class="Symbol">)</a>

</pre>

We want to pair each `(𝑨 , p)` (where p : 𝑨 ∈ S 𝒦) with an environment
`ρ : X → ∣ 𝑨 ∣` so that we can quantify over all algebras *and* all
assignments of values in the domain `∣ 𝑨 ∣` to variables in `X`.

<pre class="Agda">

 <a id="2508" href="Setoid.Varieties.HSP.html#2508" class="Function">ℑ⁺</a> <a id="2511" class="Symbol">:</a> <a id="2513" href="Setoid.Varieties.HSP.html#514" class="Primitive">Type</a> <a id="2518" href="Setoid.Varieties.HSP.html#2164" class="Function">ι</a>
 <a id="2521" href="Setoid.Varieties.HSP.html#2508" class="Function">ℑ⁺</a> <a id="2524" class="Symbol">=</a> <a id="2526" href="Data.Product.html#916" class="Function">Σ[</a> <a id="2529" href="Setoid.Varieties.HSP.html#2529" class="Bound">𝑨</a> <a id="2531" href="Data.Product.html#916" class="Function">∈</a> <a id="2533" class="Symbol">(</a><a id="2534" href="Setoid.Algebras.Basic.html#2837" class="Record">Algebra</a> <a id="2542" href="Setoid.Varieties.HSP.html#2047" class="Bound">α</a> <a id="2544" href="Setoid.Varieties.HSP.html#2049" class="Bound">ρᵃ</a><a id="2546" class="Symbol">)</a> <a id="2548" href="Data.Product.html#916" class="Function">]</a> <a id="2550" class="Symbol">(</a><a id="2551" href="Setoid.Varieties.HSP.html#2529" class="Bound">𝑨</a> <a id="2553" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="2555" href="Setoid.Varieties.Closure.html#2475" class="Function">S</a> <a id="2557" href="Setoid.Varieties.HSP.html#2052" class="Bound">ℓ</a> <a id="2559" href="Setoid.Varieties.HSP.html#2074" class="Bound">𝒦</a><a id="2560" class="Symbol">)</a> <a id="2562" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="2564" class="Symbol">(</a><a id="2565" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="2573" class="Symbol">(</a><a id="2574" href="Setoid.Terms.Basic.html#4046" class="Function">Env</a> <a id="2578" href="Setoid.Varieties.HSP.html#2529" class="Bound">𝑨</a> <a id="2580" href="Setoid.Varieties.HSP.html#2125" class="Bound">X</a><a id="2581" class="Symbol">))</a>

 <a id="2586" href="Setoid.Varieties.HSP.html#2586" class="Function">𝔄⁺</a> <a id="2589" class="Symbol">:</a> <a id="2591" href="Setoid.Varieties.HSP.html#2508" class="Function">ℑ⁺</a> <a id="2594" class="Symbol">→</a> <a id="2596" href="Setoid.Algebras.Basic.html#2837" class="Record">Algebra</a> <a id="2604" href="Setoid.Varieties.HSP.html#2047" class="Bound">α</a> <a id="2606" href="Setoid.Varieties.HSP.html#2049" class="Bound">ρᵃ</a>
 <a id="2610" href="Setoid.Varieties.HSP.html#2586" class="Function">𝔄⁺</a> <a id="2613" href="Setoid.Varieties.HSP.html#2613" class="Bound">i</a> <a id="2615" class="Symbol">=</a> <a id="2617" href="Overture.Basic.html#4326" class="Function Operator">∣</a> <a id="2619" href="Setoid.Varieties.HSP.html#2613" class="Bound">i</a> <a id="2621" href="Overture.Basic.html#4326" class="Function Operator">∣</a>

 <a id="2625" href="Setoid.Varieties.HSP.html#2625" class="Function">ℭ</a> <a id="2627" class="Symbol">:</a> <a id="2629" href="Setoid.Algebras.Basic.html#2837" class="Record">Algebra</a> <a id="2637" href="Setoid.Varieties.HSP.html#2164" class="Function">ι</a> <a id="2639" href="Setoid.Varieties.HSP.html#2164" class="Function">ι</a>
 <a id="2642" href="Setoid.Varieties.HSP.html#2625" class="Function">ℭ</a> <a id="2644" class="Symbol">=</a> <a id="2646" href="Setoid.Algebras.Products.html#1634" class="Function">⨅</a> <a id="2648" href="Setoid.Varieties.HSP.html#2586" class="Function">𝔄⁺</a>

</pre>

Next we define a useful type, `skEqual`, which we use to represent a term identity `p ≈ q` for any
given `i = (𝑨 , sA , ρ)` (where `𝑨` is an algebra, `sA : 𝑨 ∈ S 𝒦` is a proof that `𝑨` belongs
to `S 𝒦`, and `ρ` is a mapping from `X` to the domain of `𝑨`). Then we prove `AllEqual⊆ker𝔽` which
asserts that if the identity `p ≈ q` holds in all `𝑨 ∈ S 𝒦` (for all environments), then `p ≈ q`
holds in the relatively free algebra `𝔽[ X ]`; equivalently, the pair `(p , q)` belongs to the
kernel of the natural homomorphism from `𝑻 X` onto `𝔽[ X ]`. We will use this fact below to prove
that there is a monomorphism from `𝔽[ X ]` into `ℭ`, and thus `𝔽[ X ]` is a subalgebra of ℭ,
so belongs to `S (P 𝒦)`.

<pre class="Agda">

 <a id="3380" href="Setoid.Varieties.HSP.html#3380" class="Function">skEqual</a> <a id="3388" class="Symbol">:</a> <a id="3390" class="Symbol">(</a><a id="3391" href="Setoid.Varieties.HSP.html#3391" class="Bound">i</a> <a id="3393" class="Symbol">:</a> <a id="3395" href="Setoid.Varieties.HSP.html#2508" class="Function">ℑ⁺</a><a id="3397" class="Symbol">)</a> <a id="3399" class="Symbol">→</a> <a id="3401" class="Symbol">∀{</a><a id="3403" href="Setoid.Varieties.HSP.html#3403" class="Bound">p</a> <a id="3405" href="Setoid.Varieties.HSP.html#3405" class="Bound">q</a><a id="3406" class="Symbol">}</a> <a id="3408" class="Symbol">→</a> <a id="3410" href="Setoid.Varieties.HSP.html#514" class="Primitive">Type</a> <a id="3415" href="Setoid.Varieties.HSP.html#2049" class="Bound">ρᵃ</a>
 <a id="3419" href="Setoid.Varieties.HSP.html#3380" class="Function">skEqual</a> <a id="3427" href="Setoid.Varieties.HSP.html#3427" class="Bound">i</a> <a id="3429" class="Symbol">{</a><a id="3430" href="Setoid.Varieties.HSP.html#3430" class="Bound">p</a><a id="3431" class="Symbol">}{</a><a id="3433" href="Setoid.Varieties.HSP.html#3433" class="Bound">q</a><a id="3434" class="Symbol">}</a> <a id="3436" class="Symbol">=</a> <a id="3438" href="Setoid.Terms.Basic.html#4904" class="Function Operator">⟦</a> <a id="3440" href="Setoid.Varieties.HSP.html#3430" class="Bound">p</a> <a id="3442" href="Setoid.Terms.Basic.html#4904" class="Function Operator">⟧</a> <a id="3444" href="Setoid.Varieties.HSP.html#1924" class="Field Operator">⟨$⟩</a> <a id="3448" href="Setoid.Varieties.HSP.html#645" class="Field">snd</a> <a id="3452" href="Overture.Basic.html#4364" class="Function Operator">∥</a> <a id="3454" href="Setoid.Varieties.HSP.html#3427" class="Bound">i</a> <a id="3456" href="Overture.Basic.html#4364" class="Function Operator">∥</a> <a id="3458" href="Relation.Binary.Bundles.html#1098" class="Function Operator">≈</a> <a id="3460" href="Setoid.Terms.Basic.html#4904" class="Function Operator">⟦</a> <a id="3462" href="Setoid.Varieties.HSP.html#3433" class="Bound">q</a> <a id="3464" href="Setoid.Terms.Basic.html#4904" class="Function Operator">⟧</a> <a id="3466" href="Setoid.Varieties.HSP.html#1924" class="Field Operator">⟨$⟩</a> <a id="3470" href="Setoid.Varieties.HSP.html#645" class="Field">snd</a> <a id="3474" href="Overture.Basic.html#4364" class="Function Operator">∥</a> <a id="3476" href="Setoid.Varieties.HSP.html#3427" class="Bound">i</a> <a id="3478" href="Overture.Basic.html#4364" class="Function Operator">∥</a>
  <a id="3482" class="Keyword">where</a>
  <a id="3490" class="Keyword">open</a> <a id="3495" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="3502" class="Symbol">(</a><a id="3503" href="Setoid.Algebras.Basic.html#2894" class="Field">Domain</a> <a id="3510" class="Symbol">(</a><a id="3511" href="Setoid.Varieties.HSP.html#2586" class="Function">𝔄⁺</a> <a id="3514" href="Setoid.Varieties.HSP.html#3427" class="Bound">i</a><a id="3515" class="Symbol">))</a> <a id="3518" class="Keyword">using</a> <a id="3524" class="Symbol">(</a> <a id="3526" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_≈_</a> <a id="3530" class="Symbol">)</a>
  <a id="3534" class="Keyword">open</a> <a id="3539" href="Setoid.Terms.Basic.html#3846" class="Module">Environment</a> <a id="3551" class="Symbol">(</a><a id="3552" href="Setoid.Varieties.HSP.html#2586" class="Function">𝔄⁺</a> <a id="3555" href="Setoid.Varieties.HSP.html#3427" class="Bound">i</a><a id="3556" class="Symbol">)</a> <a id="3558" class="Keyword">using</a> <a id="3564" class="Symbol">(</a> <a id="3566" href="Setoid.Terms.Basic.html#4904" class="Function Operator">⟦_⟧</a> <a id="3570" class="Symbol">)</a>

 <a id="3574" href="Setoid.Varieties.HSP.html#3574" class="Function">AllEqual⊆ker𝔽</a> <a id="3588" class="Symbol">:</a>  <a id="3591" class="Symbol">∀</a> <a id="3593" class="Symbol">{</a><a id="3594" href="Setoid.Varieties.HSP.html#3594" class="Bound">p</a> <a id="3596" href="Setoid.Varieties.HSP.html#3596" class="Bound">q</a><a id="3597" class="Symbol">}</a>
  <a id="3601" class="Symbol">→</a>               <a id="3617" class="Symbol">(∀</a> <a id="3620" href="Setoid.Varieties.HSP.html#3620" class="Bound">i</a> <a id="3622" class="Symbol">→</a> <a id="3624" href="Setoid.Varieties.HSP.html#3380" class="Function">skEqual</a> <a id="3632" href="Setoid.Varieties.HSP.html#3620" class="Bound">i</a> <a id="3634" class="Symbol">{</a><a id="3635" href="Setoid.Varieties.HSP.html#3594" class="Bound">p</a><a id="3636" class="Symbol">}{</a><a id="3638" href="Setoid.Varieties.HSP.html#3596" class="Bound">q</a><a id="3639" class="Symbol">})</a> <a id="3642" class="Symbol">→</a> <a id="3644" class="Symbol">(</a><a id="3645" href="Setoid.Varieties.HSP.html#3594" class="Bound">p</a> <a id="3647" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3649" href="Setoid.Varieties.HSP.html#3596" class="Bound">q</a><a id="3650" class="Symbol">)</a> <a id="3652" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="3654" href="Setoid.Relations.Discrete.html#2433" class="Function">fkerPred</a> <a id="3663" href="Overture.Basic.html#4326" class="Function Operator">∣</a> <a id="3665" href="Setoid.Varieties.FreeAlgebras.html#4211" class="Function Operator">hom𝔽[</a> <a id="3671" href="Setoid.Varieties.HSP.html#2125" class="Bound">X</a> <a id="3673" href="Setoid.Varieties.FreeAlgebras.html#4211" class="Function Operator">]</a> <a id="3675" href="Overture.Basic.html#4326" class="Function Operator">∣</a>

 <a id="3679" href="Setoid.Varieties.HSP.html#3574" class="Function">AllEqual⊆ker𝔽</a> <a id="3693" class="Symbol">{</a><a id="3694" href="Setoid.Varieties.HSP.html#3694" class="Bound">p</a><a id="3695" class="Symbol">}</a> <a id="3697" class="Symbol">{</a><a id="3698" href="Setoid.Varieties.HSP.html#3698" class="Bound">q</a><a id="3699" class="Symbol">}</a> <a id="3701" href="Setoid.Varieties.HSP.html#3701" class="Bound">x</a> <a id="3703" class="Symbol">=</a> <a id="3705" href="Setoid.Varieties.HSP.html#3942" class="Function">Goal</a>
  <a id="3712" class="Keyword">where</a>
  <a id="3720" class="Keyword">open</a> <a id="3725" href="Setoid.Algebras.Basic.html#2837" class="Module">Algebra</a> <a id="3733" href="Setoid.Varieties.SoundAndComplete.html#7995" class="Function Operator">𝔽[</a> <a id="3736" href="Setoid.Varieties.HSP.html#2125" class="Bound">X</a> <a id="3738" href="Setoid.Varieties.SoundAndComplete.html#7995" class="Function Operator">]</a>  <a id="3741" class="Keyword">using</a> <a id="3747" class="Symbol">()</a> <a id="3750" class="Keyword">renaming</a> <a id="3759" class="Symbol">(</a> <a id="3761" href="Setoid.Algebras.Basic.html#2894" class="Field">Domain</a> <a id="3768" class="Symbol">to</a> <a id="3771" class="Field">F</a> <a id="3773" class="Symbol">;</a> <a id="3775" href="Setoid.Algebras.Basic.html#2916" class="Field">Interp</a> <a id="3782" class="Symbol">to</a> <a id="3785" class="Field">InterpF</a> <a id="3793" class="Symbol">)</a>
  <a id="3797" class="Keyword">open</a> <a id="3802" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="3809" href="Setoid.Varieties.HSP.html#3771" class="Function">F</a>        <a id="3818" class="Keyword">using</a> <a id="3824" class="Symbol">()</a> <a id="3827" class="Keyword">renaming</a> <a id="3836" class="Symbol">(</a> <a id="3838" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_≈_</a>  <a id="3843" class="Symbol">to</a> <a id="3846" class="Field Operator">_≈F≈_</a> <a id="3852" class="Symbol">;</a> <a id="3854" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="3859" class="Symbol">to</a> <a id="3862" class="Function">reflF</a> <a id="3868" class="Symbol">)</a>
  <a id="3872" href="Setoid.Varieties.HSP.html#3872" class="Function">S𝒦⊫pq</a> <a id="3878" class="Symbol">:</a> <a id="3880" href="Setoid.Varieties.Closure.html#2475" class="Function">S</a><a id="3881" class="Symbol">{</a><a id="3882" class="Argument">β</a> <a id="3884" class="Symbol">=</a> <a id="3886" href="Setoid.Varieties.HSP.html#2047" class="Bound">α</a><a id="3887" class="Symbol">}{</a><a id="3889" href="Setoid.Varieties.HSP.html#2049" class="Bound">ρᵃ</a><a id="3891" class="Symbol">}</a> <a id="3893" href="Setoid.Varieties.HSP.html#2052" class="Bound">ℓ</a> <a id="3895" href="Setoid.Varieties.HSP.html#2074" class="Bound">𝒦</a> <a id="3897" href="Setoid.Varieties.SoundAndComplete.html#2318" class="Function Operator">⊫</a> <a id="3899" class="Symbol">(</a><a id="3900" href="Setoid.Varieties.HSP.html#3694" class="Bound">p</a> <a id="3902" href="Setoid.Varieties.SoundAndComplete.html#2035" class="InductiveConstructor Operator">≈̇</a> <a id="3905" href="Setoid.Varieties.HSP.html#3698" class="Bound">q</a><a id="3906" class="Symbol">)</a>
  <a id="3910" href="Setoid.Varieties.HSP.html#3872" class="Function">S𝒦⊫pq</a> <a id="3916" href="Setoid.Varieties.HSP.html#3916" class="Bound">𝑨</a> <a id="3918" href="Setoid.Varieties.HSP.html#3918" class="Bound">sA</a> <a id="3921" href="Setoid.Varieties.HSP.html#3921" class="Bound">ρ</a> <a id="3923" class="Symbol">=</a> <a id="3925" href="Setoid.Varieties.HSP.html#3701" class="Bound">x</a> <a id="3927" class="Symbol">(</a><a id="3928" href="Setoid.Varieties.HSP.html#3916" class="Bound">𝑨</a> <a id="3930" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3932" href="Setoid.Varieties.HSP.html#3918" class="Bound">sA</a> <a id="3935" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3937" href="Setoid.Varieties.HSP.html#3921" class="Bound">ρ</a><a id="3938" class="Symbol">)</a>
  <a id="3942" href="Setoid.Varieties.HSP.html#3942" class="Function">Goal</a> <a id="3947" class="Symbol">:</a> <a id="3949" href="Setoid.Varieties.HSP.html#3694" class="Bound">p</a> <a id="3951" href="Setoid.Varieties.HSP.html#3846" class="Function Operator">≈F≈</a> <a id="3955" href="Setoid.Varieties.HSP.html#3698" class="Bound">q</a>
  <a id="3959" href="Setoid.Varieties.HSP.html#3942" class="Function">Goal</a> <a id="3964" class="Symbol">=</a> <a id="3966" href="Setoid.Varieties.FreeAlgebras.html#5005" class="Function">𝒦⊫→ℰ⊢</a> <a id="3972" class="Symbol">(</a><a id="3973" href="Setoid.Varieties.Preservation.html#4783" class="Function">S-id2</a><a id="3978" class="Symbol">{</a><a id="3979" class="Argument">ℓ</a> <a id="3981" class="Symbol">=</a> <a id="3983" href="Setoid.Varieties.HSP.html#2052" class="Bound">ℓ</a><a id="3984" class="Symbol">}{</a><a id="3986" class="Argument">p</a> <a id="3988" class="Symbol">=</a> <a id="3990" href="Setoid.Varieties.HSP.html#3694" class="Bound">p</a><a id="3991" class="Symbol">}{</a><a id="3993" href="Setoid.Varieties.HSP.html#3698" class="Bound">q</a><a id="3994" class="Symbol">}</a> <a id="3996" href="Setoid.Varieties.HSP.html#3872" class="Function">S𝒦⊫pq</a><a id="4001" class="Symbol">)</a>

 <a id="4005" href="Setoid.Varieties.HSP.html#4005" class="Function">homℭ</a> <a id="4010" class="Symbol">:</a> <a id="4012" href="Setoid.Homomorphisms.Basic.html#1918" class="Function">hom</a> <a id="4016" class="Symbol">(</a><a id="4017" href="Setoid.Terms.Basic.html#2876" class="Function">𝑻</a> <a id="4019" href="Setoid.Varieties.HSP.html#2125" class="Bound">X</a><a id="4020" class="Symbol">)</a> <a id="4022" href="Setoid.Varieties.HSP.html#2625" class="Function">ℭ</a>
 <a id="4025" href="Setoid.Varieties.HSP.html#4005" class="Function">homℭ</a> <a id="4030" class="Symbol">=</a> <a id="4032" href="Setoid.Homomorphisms.Products.html#1962" class="Function">⨅-hom-co</a> <a id="4041" href="Setoid.Varieties.HSP.html#2586" class="Function">𝔄⁺</a> <a id="4044" href="Setoid.Varieties.HSP.html#4056" class="Function">h</a>
  <a id="4048" class="Keyword">where</a>
  <a id="4056" href="Setoid.Varieties.HSP.html#4056" class="Function">h</a> <a id="4058" class="Symbol">:</a> <a id="4060" class="Symbol">∀</a> <a id="4062" href="Setoid.Varieties.HSP.html#4062" class="Bound">i</a> <a id="4064" class="Symbol">→</a> <a id="4066" href="Setoid.Homomorphisms.Basic.html#1918" class="Function">hom</a> <a id="4070" class="Symbol">(</a><a id="4071" href="Setoid.Terms.Basic.html#2876" class="Function">𝑻</a> <a id="4073" href="Setoid.Varieties.HSP.html#2125" class="Bound">X</a><a id="4074" class="Symbol">)</a> <a id="4076" class="Symbol">(</a><a id="4077" href="Setoid.Varieties.HSP.html#2586" class="Function">𝔄⁺</a> <a id="4080" href="Setoid.Varieties.HSP.html#4062" class="Bound">i</a><a id="4081" class="Symbol">)</a>
  <a id="4085" href="Setoid.Varieties.HSP.html#4056" class="Function">h</a> <a id="4087" href="Setoid.Varieties.HSP.html#4087" class="Bound">i</a> <a id="4089" class="Symbol">=</a> <a id="4091" href="Setoid.Terms.Properties.html#3767" class="Function">lift-hom</a> <a id="4100" class="Symbol">(</a><a id="4101" href="Setoid.Varieties.HSP.html#645" class="Field">snd</a> <a id="4105" href="Overture.Basic.html#4364" class="Function Operator">∥</a> <a id="4107" href="Setoid.Varieties.HSP.html#4087" class="Bound">i</a> <a id="4109" href="Overture.Basic.html#4364" class="Function Operator">∥</a><a id="4110" class="Symbol">)</a>

 <a id="4114" class="Keyword">open</a> <a id="4119" href="Setoid.Algebras.Basic.html#2837" class="Module">Algebra</a> <a id="4127" href="Setoid.Varieties.SoundAndComplete.html#7995" class="Function Operator">𝔽[</a> <a id="4130" href="Setoid.Varieties.HSP.html#2125" class="Bound">X</a> <a id="4132" href="Setoid.Varieties.SoundAndComplete.html#7995" class="Function Operator">]</a>  <a id="4135" class="Keyword">using</a> <a id="4141" class="Symbol">()</a> <a id="4144" class="Keyword">renaming</a> <a id="4153" class="Symbol">(</a> <a id="4155" href="Setoid.Algebras.Basic.html#2894" class="Field">Domain</a> <a id="4162" class="Symbol">to</a> <a id="4165" class="Field">F</a> <a id="4167" class="Symbol">;</a> <a id="4169" href="Setoid.Algebras.Basic.html#2916" class="Field">Interp</a> <a id="4176" class="Symbol">to</a> <a id="4179" class="Field">InterpF</a> <a id="4187" class="Symbol">)</a>
 <a id="4190" class="Keyword">open</a> <a id="4195" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="4202" href="Setoid.Varieties.HSP.html#4165" class="Function">F</a>        <a id="4211" class="Keyword">using</a> <a id="4217" class="Symbol">()</a> <a id="4220" class="Keyword">renaming</a> <a id="4229" class="Symbol">(</a><a id="4230" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="4235" class="Symbol">to</a> <a id="4238" class="Function">reflF</a> <a id="4244" class="Symbol">;</a> <a id="4246" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_≈_</a> <a id="4250" class="Symbol">to</a> <a id="4253" class="Field Operator">_≈F≈_</a> <a id="4259" class="Symbol">;</a> <a id="4261" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="4269" class="Symbol">to</a> <a id="4272" class="Field">∣F∣</a><a id="4275" class="Symbol">)</a>


 <a id="4280" href="Setoid.Varieties.HSP.html#4280" class="Function">ker𝔽⊆kerℭ</a> <a id="4290" class="Symbol">:</a> <a id="4292" href="Setoid.Relations.Discrete.html#2433" class="Function">fkerPred</a> <a id="4301" href="Overture.Basic.html#4326" class="Function Operator">∣</a> <a id="4303" href="Setoid.Varieties.FreeAlgebras.html#4211" class="Function Operator">hom𝔽[</a> <a id="4309" href="Setoid.Varieties.HSP.html#2125" class="Bound">X</a> <a id="4311" href="Setoid.Varieties.FreeAlgebras.html#4211" class="Function Operator">]</a> <a id="4313" href="Overture.Basic.html#4326" class="Function Operator">∣</a> <a id="4315" href="Relation.Unary.html#1742" class="Function Operator">⊆</a> <a id="4317" href="Setoid.Relations.Discrete.html#2433" class="Function">fkerPred</a> <a id="4326" href="Overture.Basic.html#4326" class="Function Operator">∣</a> <a id="4328" href="Setoid.Varieties.HSP.html#4005" class="Function">homℭ</a> <a id="4333" href="Overture.Basic.html#4326" class="Function Operator">∣</a>
 <a id="4336" href="Setoid.Varieties.HSP.html#4280" class="Function">ker𝔽⊆kerℭ</a> <a id="4346" class="Symbol">{</a><a id="4347" href="Setoid.Varieties.HSP.html#4347" class="Bound">p</a> <a id="4349" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4351" href="Setoid.Varieties.HSP.html#4351" class="Bound">q</a><a id="4352" class="Symbol">}</a> <a id="4354" href="Setoid.Varieties.HSP.html#4354" class="Bound">pKq</a> <a id="4358" class="Symbol">(</a><a id="4359" href="Setoid.Varieties.HSP.html#4359" class="Bound">𝑨</a> <a id="4361" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4363" href="Setoid.Varieties.HSP.html#4363" class="Bound">sA</a> <a id="4366" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4368" href="Setoid.Varieties.HSP.html#4368" class="Bound">ρ</a><a id="4369" class="Symbol">)</a> <a id="4371" class="Symbol">=</a> <a id="4373" href="Setoid.Varieties.HSP.html#4639" class="Function">Goal</a>
  <a id="4380" class="Keyword">where</a>
  <a id="4388" class="Keyword">open</a> <a id="4393" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="4400" class="Symbol">(</a><a id="4401" href="Setoid.Algebras.Basic.html#2894" class="Field">Domain</a> <a id="4408" href="Setoid.Varieties.HSP.html#4359" class="Bound">𝑨</a><a id="4409" class="Symbol">)</a>  <a id="4412" class="Keyword">using</a> <a id="4418" class="Symbol">(</a> <a id="4420" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_≈_</a> <a id="4424" class="Symbol">;</a> <a id="4426" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="4430" class="Symbol">;</a> <a id="4432" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="4438" class="Symbol">)</a>
  <a id="4442" class="Keyword">open</a> <a id="4447" href="Setoid.Terms.Basic.html#3846" class="Module">Environment</a> <a id="4459" href="Setoid.Varieties.HSP.html#4359" class="Bound">𝑨</a>      <a id="4466" class="Keyword">using</a> <a id="4472" class="Symbol">(</a> <a id="4474" href="Setoid.Terms.Basic.html#4904" class="Function Operator">⟦_⟧</a> <a id="4478" class="Symbol">)</a>
  <a id="4482" href="Setoid.Varieties.HSP.html#4482" class="Function">fl</a> <a id="4485" class="Symbol">:</a> <a id="4487" class="Symbol">∀</a> <a id="4489" href="Setoid.Varieties.HSP.html#4489" class="Bound">t</a> <a id="4491" class="Symbol">→</a> <a id="4493" href="Setoid.Terms.Basic.html#4904" class="Function Operator">⟦</a> <a id="4495" href="Setoid.Varieties.HSP.html#4489" class="Bound">t</a> <a id="4497" href="Setoid.Terms.Basic.html#4904" class="Function Operator">⟧</a> <a id="4499" href="Setoid.Varieties.HSP.html#1924" class="Field Operator">⟨$⟩</a> <a id="4503" href="Setoid.Varieties.HSP.html#4368" class="Bound">ρ</a> <a id="4505" href="Relation.Binary.Bundles.html#1098" class="Function Operator">≈</a> <a id="4507" href="Setoid.Terms.Properties.html#2572" class="Function">free-lift</a> <a id="4517" href="Setoid.Varieties.HSP.html#4368" class="Bound">ρ</a> <a id="4519" href="Setoid.Varieties.HSP.html#4489" class="Bound">t</a>
  <a id="4523" href="Setoid.Varieties.HSP.html#4482" class="Function">fl</a> <a id="4526" href="Setoid.Varieties.HSP.html#4526" class="Bound">t</a> <a id="4528" class="Symbol">=</a> <a id="4530" href="Setoid.Terms.Operations.html#2204" class="Function">free-lift-interp</a> <a id="4547" class="Symbol">{</a><a id="4548" class="Argument">𝑨</a> <a id="4550" class="Symbol">=</a> <a id="4552" href="Setoid.Varieties.HSP.html#4359" class="Bound">𝑨</a><a id="4553" class="Symbol">}</a> <a id="4555" href="Setoid.Varieties.HSP.html#4368" class="Bound">ρ</a> <a id="4557" href="Setoid.Varieties.HSP.html#4526" class="Bound">t</a>
  <a id="4561" href="Setoid.Varieties.HSP.html#4561" class="Function">subgoal</a> <a id="4569" class="Symbol">:</a> <a id="4571" href="Setoid.Terms.Basic.html#4904" class="Function Operator">⟦</a> <a id="4573" href="Setoid.Varieties.HSP.html#4347" class="Bound">p</a> <a id="4575" href="Setoid.Terms.Basic.html#4904" class="Function Operator">⟧</a> <a id="4577" href="Setoid.Varieties.HSP.html#1924" class="Field Operator">⟨$⟩</a> <a id="4581" href="Setoid.Varieties.HSP.html#4368" class="Bound">ρ</a> <a id="4583" href="Relation.Binary.Bundles.html#1098" class="Function Operator">≈</a> <a id="4585" href="Setoid.Terms.Basic.html#4904" class="Function Operator">⟦</a> <a id="4587" href="Setoid.Varieties.HSP.html#4351" class="Bound">q</a> <a id="4589" href="Setoid.Terms.Basic.html#4904" class="Function Operator">⟧</a> <a id="4591" href="Setoid.Varieties.HSP.html#1924" class="Field Operator">⟨$⟩</a> <a id="4595" href="Setoid.Varieties.HSP.html#4368" class="Bound">ρ</a>
  <a id="4599" href="Setoid.Varieties.HSP.html#4561" class="Function">subgoal</a> <a id="4607" class="Symbol">=</a> <a id="4609" href="Setoid.Varieties.FreeAlgebras.html#4865" class="Function">ker𝔽⊆Equal</a><a id="4619" class="Symbol">{</a><a id="4620" class="Argument">𝑨</a> <a id="4622" class="Symbol">=</a> <a id="4624" href="Setoid.Varieties.HSP.html#4359" class="Bound">𝑨</a><a id="4625" class="Symbol">}{</a><a id="4627" href="Setoid.Varieties.HSP.html#4363" class="Bound">sA</a><a id="4629" class="Symbol">}</a> <a id="4631" href="Setoid.Varieties.HSP.html#4354" class="Bound">pKq</a> <a id="4635" href="Setoid.Varieties.HSP.html#4368" class="Bound">ρ</a>
  <a id="4639" href="Setoid.Varieties.HSP.html#4639" class="Function">Goal</a> <a id="4644" class="Symbol">:</a> <a id="4646" class="Symbol">(</a><a id="4647" href="Setoid.Terms.Properties.html#2572" class="Function">free-lift</a><a id="4656" class="Symbol">{</a><a id="4657" class="Argument">𝑨</a> <a id="4659" class="Symbol">=</a> <a id="4661" href="Setoid.Varieties.HSP.html#4359" class="Bound">𝑨</a><a id="4662" class="Symbol">}</a> <a id="4664" href="Setoid.Varieties.HSP.html#4368" class="Bound">ρ</a> <a id="4666" href="Setoid.Varieties.HSP.html#4347" class="Bound">p</a><a id="4667" class="Symbol">)</a> <a id="4669" href="Relation.Binary.Bundles.html#1098" class="Function Operator">≈</a> <a id="4671" class="Symbol">(</a><a id="4672" href="Setoid.Terms.Properties.html#2572" class="Function">free-lift</a><a id="4681" class="Symbol">{</a><a id="4682" class="Argument">𝑨</a> <a id="4684" class="Symbol">=</a> <a id="4686" href="Setoid.Varieties.HSP.html#4359" class="Bound">𝑨</a><a id="4687" class="Symbol">}</a> <a id="4689" href="Setoid.Varieties.HSP.html#4368" class="Bound">ρ</a> <a id="4691" href="Setoid.Varieties.HSP.html#4351" class="Bound">q</a><a id="4692" class="Symbol">)</a>
  <a id="4696" href="Setoid.Varieties.HSP.html#4639" class="Function">Goal</a> <a id="4701" class="Symbol">=</a> <a id="4703" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="4709" class="Symbol">(</a><a id="4710" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="4714" class="Symbol">(</a><a id="4715" href="Setoid.Varieties.HSP.html#4482" class="Function">fl</a> <a id="4718" href="Setoid.Varieties.HSP.html#4347" class="Bound">p</a><a id="4719" class="Symbol">))</a> <a id="4722" class="Symbol">(</a><a id="4723" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="4729" href="Setoid.Varieties.HSP.html#4561" class="Function">subgoal</a> <a id="4737" class="Symbol">(</a><a id="4738" href="Setoid.Varieties.HSP.html#4482" class="Function">fl</a> <a id="4741" href="Setoid.Varieties.HSP.html#4351" class="Bound">q</a><a id="4742" class="Symbol">))</a>


 <a id="4748" href="Setoid.Varieties.HSP.html#4748" class="Function">hom𝔽ℭ</a> <a id="4754" class="Symbol">:</a> <a id="4756" href="Setoid.Homomorphisms.Basic.html#1918" class="Function">hom</a> <a id="4760" href="Setoid.Varieties.SoundAndComplete.html#7995" class="Function Operator">𝔽[</a> <a id="4763" href="Setoid.Varieties.HSP.html#2125" class="Bound">X</a> <a id="4765" href="Setoid.Varieties.SoundAndComplete.html#7995" class="Function Operator">]</a> <a id="4767" href="Setoid.Varieties.HSP.html#2625" class="Function">ℭ</a>
 <a id="4770" href="Setoid.Varieties.HSP.html#4748" class="Function">hom𝔽ℭ</a> <a id="4776" class="Symbol">=</a> <a id="4778" href="Overture.Basic.html#4326" class="Function Operator">∣</a> <a id="4780" href="Setoid.Homomorphisms.Factor.html#2603" class="Function">HomFactor</a> <a id="4790" href="Setoid.Varieties.HSP.html#2625" class="Function">ℭ</a> <a id="4792" href="Setoid.Varieties.HSP.html#4005" class="Function">homℭ</a> <a id="4797" href="Setoid.Varieties.FreeAlgebras.html#4211" class="Function Operator">hom𝔽[</a> <a id="4803" href="Setoid.Varieties.HSP.html#2125" class="Bound">X</a> <a id="4805" href="Setoid.Varieties.FreeAlgebras.html#4211" class="Function Operator">]</a> <a id="4807" href="Setoid.Varieties.HSP.html#4280" class="Function">ker𝔽⊆kerℭ</a> <a id="4817" href="Setoid.Varieties.FreeAlgebras.html#4299" class="Function Operator">hom𝔽[</a> <a id="4823" href="Setoid.Varieties.HSP.html#2125" class="Bound">X</a> <a id="4825" href="Setoid.Varieties.FreeAlgebras.html#4299" class="Function Operator">]-is-epic</a> <a id="4835" href="Overture.Basic.html#4326" class="Function Operator">∣</a>

 <a id="4839" class="Keyword">open</a> <a id="4844" href="Setoid.Terms.Basic.html#3846" class="Module">Environment</a> <a id="4856" href="Setoid.Varieties.HSP.html#2625" class="Function">ℭ</a>

 <a id="4860" href="Setoid.Varieties.HSP.html#4860" class="Function">kerℭ⊆ker𝔽</a> <a id="4870" class="Symbol">:</a> <a id="4872" class="Symbol">∀{</a><a id="4874" href="Setoid.Varieties.HSP.html#4874" class="Bound">p</a> <a id="4876" href="Setoid.Varieties.HSP.html#4876" class="Bound">q</a><a id="4877" class="Symbol">}</a> <a id="4879" class="Symbol">→</a> <a id="4881" class="Symbol">(</a><a id="4882" href="Setoid.Varieties.HSP.html#4874" class="Bound">p</a> <a id="4884" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4886" href="Setoid.Varieties.HSP.html#4876" class="Bound">q</a><a id="4887" class="Symbol">)</a> <a id="4889" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="4891" href="Setoid.Relations.Discrete.html#2433" class="Function">fkerPred</a> <a id="4900" href="Overture.Basic.html#4326" class="Function Operator">∣</a> <a id="4902" href="Setoid.Varieties.HSP.html#4005" class="Function">homℭ</a> <a id="4907" href="Overture.Basic.html#4326" class="Function Operator">∣</a> <a id="4909" class="Symbol">→</a> <a id="4911" class="Symbol">(</a><a id="4912" href="Setoid.Varieties.HSP.html#4874" class="Bound">p</a> <a id="4914" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4916" href="Setoid.Varieties.HSP.html#4876" class="Bound">q</a><a id="4917" class="Symbol">)</a> <a id="4919" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="4921" href="Setoid.Relations.Discrete.html#2433" class="Function">fkerPred</a> <a id="4930" href="Overture.Basic.html#4326" class="Function Operator">∣</a> <a id="4932" href="Setoid.Varieties.FreeAlgebras.html#4211" class="Function Operator">hom𝔽[</a> <a id="4938" href="Setoid.Varieties.HSP.html#2125" class="Bound">X</a> <a id="4940" href="Setoid.Varieties.FreeAlgebras.html#4211" class="Function Operator">]</a> <a id="4942" href="Overture.Basic.html#4326" class="Function Operator">∣</a>
 <a id="4945" href="Setoid.Varieties.HSP.html#4860" class="Function">kerℭ⊆ker𝔽</a> <a id="4955" class="Symbol">{</a><a id="4956" href="Setoid.Varieties.HSP.html#4956" class="Bound">p</a><a id="4957" class="Symbol">}{</a><a id="4959" href="Setoid.Varieties.HSP.html#4959" class="Bound">q</a><a id="4960" class="Symbol">}</a> <a id="4962" href="Setoid.Varieties.HSP.html#4962" class="Bound">pKq</a> <a id="4966" class="Symbol">=</a> <a id="4968" href="Setoid.Varieties.HSP.html#5368" class="Function">E⊢pq</a>
  <a id="4975" class="Keyword">where</a>
  <a id="4983" href="Setoid.Varieties.HSP.html#4983" class="Function">pqEqual</a> <a id="4991" class="Symbol">:</a> <a id="4993" class="Symbol">∀</a> <a id="4995" href="Setoid.Varieties.HSP.html#4995" class="Bound">i</a> <a id="4997" class="Symbol">→</a> <a id="4999" href="Setoid.Varieties.HSP.html#3380" class="Function">skEqual</a> <a id="5007" href="Setoid.Varieties.HSP.html#4995" class="Bound">i</a> <a id="5009" class="Symbol">{</a><a id="5010" href="Setoid.Varieties.HSP.html#4956" class="Bound">p</a><a id="5011" class="Symbol">}{</a><a id="5013" href="Setoid.Varieties.HSP.html#4959" class="Bound">q</a><a id="5014" class="Symbol">}</a>
  <a id="5018" href="Setoid.Varieties.HSP.html#4983" class="Function">pqEqual</a> <a id="5026" href="Setoid.Varieties.HSP.html#5026" class="Bound">i</a> <a id="5028" class="Symbol">=</a> <a id="5030" href="Setoid.Varieties.HSP.html#5173" class="Function">goal</a>
   <a id="5038" class="Keyword">where</a>
   <a id="5047" class="Keyword">open</a> <a id="5052" href="Setoid.Terms.Basic.html#3846" class="Module">Environment</a> <a id="5064" class="Symbol">(</a><a id="5065" href="Setoid.Varieties.HSP.html#2586" class="Function">𝔄⁺</a> <a id="5068" href="Setoid.Varieties.HSP.html#5026" class="Bound">i</a><a id="5069" class="Symbol">)</a>      <a id="5076" class="Keyword">using</a> <a id="5082" class="Symbol">()</a> <a id="5085" class="Keyword">renaming</a> <a id="5094" class="Symbol">(</a> <a id="5096" href="Setoid.Terms.Basic.html#4904" class="Function Operator">⟦_⟧</a> <a id="5100" class="Symbol">to</a> <a id="5103" class="Function Operator">⟦_⟧ᵢ</a> <a id="5108" class="Symbol">)</a>
   <a id="5113" class="Keyword">open</a> <a id="5118" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="5125" class="Symbol">(</a><a id="5126" href="Setoid.Algebras.Basic.html#2894" class="Field">Domain</a> <a id="5133" class="Symbol">(</a><a id="5134" href="Setoid.Varieties.HSP.html#2586" class="Function">𝔄⁺</a> <a id="5137" href="Setoid.Varieties.HSP.html#5026" class="Bound">i</a><a id="5138" class="Symbol">))</a>  <a id="5142" class="Keyword">using</a> <a id="5148" class="Symbol">(</a> <a id="5150" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_≈_</a> <a id="5154" class="Symbol">;</a> <a id="5156" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="5160" class="Symbol">;</a> <a id="5162" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="5168" class="Symbol">)</a>
   <a id="5173" href="Setoid.Varieties.HSP.html#5173" class="Function">goal</a> <a id="5178" class="Symbol">:</a> <a id="5180" href="Setoid.Varieties.HSP.html#5103" class="Function Operator">⟦</a> <a id="5182" href="Setoid.Varieties.HSP.html#4956" class="Bound">p</a> <a id="5184" href="Setoid.Varieties.HSP.html#5103" class="Function Operator">⟧ᵢ</a> <a id="5187" href="Setoid.Varieties.HSP.html#1924" class="Field Operator">⟨$⟩</a> <a id="5191" href="Setoid.Varieties.HSP.html#645" class="Field">snd</a> <a id="5195" href="Overture.Basic.html#4364" class="Function Operator">∥</a> <a id="5197" href="Setoid.Varieties.HSP.html#5026" class="Bound">i</a> <a id="5199" href="Overture.Basic.html#4364" class="Function Operator">∥</a> <a id="5201" href="Relation.Binary.Bundles.html#1098" class="Function Operator">≈</a> <a id="5203" href="Setoid.Varieties.HSP.html#5103" class="Function Operator">⟦</a> <a id="5205" href="Setoid.Varieties.HSP.html#4959" class="Bound">q</a> <a id="5207" href="Setoid.Varieties.HSP.html#5103" class="Function Operator">⟧ᵢ</a> <a id="5210" href="Setoid.Varieties.HSP.html#1924" class="Field Operator">⟨$⟩</a> <a id="5214" href="Setoid.Varieties.HSP.html#645" class="Field">snd</a> <a id="5218" href="Overture.Basic.html#4364" class="Function Operator">∥</a> <a id="5220" href="Setoid.Varieties.HSP.html#5026" class="Bound">i</a> <a id="5222" href="Overture.Basic.html#4364" class="Function Operator">∥</a>
   <a id="5227" href="Setoid.Varieties.HSP.html#5173" class="Function">goal</a> <a id="5232" class="Symbol">=</a> <a id="5234" href="Relation.Binary.Structures.html#1620" class="Function">trans</a>  <a id="5241" class="Symbol">(</a><a id="5242" href="Setoid.Terms.Operations.html#2204" class="Function">free-lift-interp</a><a id="5258" class="Symbol">{</a><a id="5259" class="Argument">𝑨</a> <a id="5261" class="Symbol">=</a> <a id="5263" href="Overture.Basic.html#4326" class="Function Operator">∣</a> <a id="5265" href="Setoid.Varieties.HSP.html#5026" class="Bound">i</a> <a id="5267" href="Overture.Basic.html#4326" class="Function Operator">∣</a><a id="5268" class="Symbol">}(</a><a id="5270" href="Setoid.Varieties.HSP.html#645" class="Field">snd</a> <a id="5274" href="Overture.Basic.html#4364" class="Function Operator">∥</a> <a id="5276" href="Setoid.Varieties.HSP.html#5026" class="Bound">i</a> <a id="5278" href="Overture.Basic.html#4364" class="Function Operator">∥</a><a id="5279" class="Symbol">)</a> <a id="5281" href="Setoid.Varieties.HSP.html#4956" class="Bound">p</a><a id="5282" class="Symbol">)</a>
                 <a id="5301" class="Symbol">(</a><a id="5302" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="5308" class="Symbol">(</a><a id="5309" href="Setoid.Varieties.HSP.html#4962" class="Bound">pKq</a> <a id="5313" href="Setoid.Varieties.HSP.html#5026" class="Bound">i</a><a id="5314" class="Symbol">)(</a><a id="5316" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="5320" class="Symbol">(</a><a id="5321" href="Setoid.Terms.Operations.html#2204" class="Function">free-lift-interp</a><a id="5337" class="Symbol">{</a><a id="5338" class="Argument">𝑨</a> <a id="5340" class="Symbol">=</a> <a id="5342" href="Overture.Basic.html#4326" class="Function Operator">∣</a> <a id="5344" href="Setoid.Varieties.HSP.html#5026" class="Bound">i</a> <a id="5346" href="Overture.Basic.html#4326" class="Function Operator">∣</a><a id="5347" class="Symbol">}</a> <a id="5349" class="Symbol">(</a><a id="5350" href="Setoid.Varieties.HSP.html#645" class="Field">snd</a> <a id="5354" href="Overture.Basic.html#4364" class="Function Operator">∥</a> <a id="5356" href="Setoid.Varieties.HSP.html#5026" class="Bound">i</a> <a id="5358" href="Overture.Basic.html#4364" class="Function Operator">∥</a><a id="5359" class="Symbol">)</a> <a id="5361" href="Setoid.Varieties.HSP.html#4959" class="Bound">q</a><a id="5362" class="Symbol">)))</a>
  <a id="5368" href="Setoid.Varieties.HSP.html#5368" class="Function">E⊢pq</a> <a id="5373" class="Symbol">:</a> <a id="5375" href="Setoid.Varieties.FreeAlgebras.html#3016" class="Function">ℰ</a> <a id="5377" href="Setoid.Varieties.SoundAndComplete.html#4125" class="Datatype Operator">⊢</a> <a id="5379" href="Setoid.Varieties.HSP.html#2125" class="Bound">X</a> <a id="5381" href="Setoid.Varieties.SoundAndComplete.html#4125" class="Datatype Operator">▹</a> <a id="5383" href="Setoid.Varieties.HSP.html#4956" class="Bound">p</a> <a id="5385" href="Setoid.Varieties.SoundAndComplete.html#4125" class="Datatype Operator">≈</a> <a id="5387" href="Setoid.Varieties.HSP.html#4959" class="Bound">q</a>
  <a id="5391" href="Setoid.Varieties.HSP.html#5368" class="Function">E⊢pq</a> <a id="5396" class="Symbol">=</a> <a id="5398" href="Setoid.Varieties.HSP.html#3574" class="Function">AllEqual⊆ker𝔽</a> <a id="5412" href="Setoid.Varieties.HSP.html#4983" class="Function">pqEqual</a>


 <a id="5423" href="Setoid.Varieties.HSP.html#5423" class="Function">mon𝔽ℭ</a> <a id="5429" class="Symbol">:</a> <a id="5431" href="Setoid.Homomorphisms.Basic.html#2253" class="Function">mon</a> <a id="5435" href="Setoid.Varieties.SoundAndComplete.html#7995" class="Function Operator">𝔽[</a> <a id="5438" href="Setoid.Varieties.HSP.html#2125" class="Bound">X</a> <a id="5440" href="Setoid.Varieties.SoundAndComplete.html#7995" class="Function Operator">]</a> <a id="5442" href="Setoid.Varieties.HSP.html#2625" class="Function">ℭ</a>
 <a id="5445" href="Setoid.Varieties.HSP.html#5423" class="Function">mon𝔽ℭ</a> <a id="5451" class="Symbol">=</a> <a id="5453" href="Overture.Basic.html#4326" class="Function Operator">∣</a> <a id="5455" href="Setoid.Varieties.HSP.html#4748" class="Function">hom𝔽ℭ</a> <a id="5461" href="Overture.Basic.html#4326" class="Function Operator">∣</a> <a id="5463" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5465" href="Setoid.Varieties.HSP.html#5507" class="Function">isMon</a>
  <a id="5473" class="Keyword">where</a>
  <a id="5481" class="Keyword">open</a> <a id="5486" href="Setoid.Homomorphisms.Basic.html#2093" class="Module">IsMon</a>
  <a id="5494" class="Keyword">open</a> <a id="5499" href="Setoid.Homomorphisms.Basic.html#1825" class="Module">IsHom</a>
  <a id="5507" href="Setoid.Varieties.HSP.html#5507" class="Function">isMon</a> <a id="5513" class="Symbol">:</a> <a id="5515" href="Setoid.Homomorphisms.Basic.html#2093" class="Record">IsMon</a> <a id="5521" href="Setoid.Varieties.SoundAndComplete.html#7995" class="Function Operator">𝔽[</a> <a id="5524" href="Setoid.Varieties.HSP.html#2125" class="Bound">X</a> <a id="5526" href="Setoid.Varieties.SoundAndComplete.html#7995" class="Function Operator">]</a> <a id="5528" href="Setoid.Varieties.HSP.html#2625" class="Function">ℭ</a> <a id="5530" href="Overture.Basic.html#4326" class="Function Operator">∣</a> <a id="5532" href="Setoid.Varieties.HSP.html#4748" class="Function">hom𝔽ℭ</a> <a id="5538" href="Overture.Basic.html#4326" class="Function Operator">∣</a>
  <a id="5542" href="Setoid.Homomorphisms.Basic.html#2161" class="Field">isHom</a> <a id="5548" href="Setoid.Varieties.HSP.html#5507" class="Function">isMon</a> <a id="5554" class="Symbol">=</a> <a id="5556" href="Overture.Basic.html#4364" class="Function Operator">∥</a> <a id="5558" href="Setoid.Varieties.HSP.html#4748" class="Function">hom𝔽ℭ</a> <a id="5564" href="Overture.Basic.html#4364" class="Function Operator">∥</a>
  <a id="5568" href="Setoid.Homomorphisms.Basic.html#2180" class="Field">isInjective</a> <a id="5580" href="Setoid.Varieties.HSP.html#5507" class="Function">isMon</a> <a id="5586" class="Symbol">{</a><a id="5587" href="Setoid.Varieties.HSP.html#5587" class="Bound">p</a><a id="5588" class="Symbol">}</a> <a id="5590" class="Symbol">{</a><a id="5591" href="Setoid.Varieties.HSP.html#5591" class="Bound">q</a><a id="5592" class="Symbol">}</a> <a id="5594" href="Setoid.Varieties.HSP.html#5594" class="Bound">φpq</a> <a id="5598" class="Symbol">=</a> <a id="5600" href="Setoid.Varieties.HSP.html#4860" class="Function">kerℭ⊆ker𝔽</a> <a id="5610" href="Setoid.Varieties.HSP.html#5594" class="Bound">φpq</a>

</pre>

Now that we have proved the existence of a monomorphism from `𝔽[ X ]` to `ℭ` we are in a position
to prove that `𝔽[ X ]` is a subalgebra of ℭ, so belongs to `S (P 𝒦)`.  In fact, we will show
that `𝔽[ X ]` is a subalgebra of the *lift* of `ℭ`, denoted `ℓℭ`.

<pre class="Agda">

 <a id="5900" href="Setoid.Varieties.HSP.html#5900" class="Function">𝔽≤ℭ</a> <a id="5904" class="Symbol">:</a> <a id="5906" href="Setoid.Varieties.SoundAndComplete.html#7995" class="Function Operator">𝔽[</a> <a id="5909" href="Setoid.Varieties.HSP.html#2125" class="Bound">X</a> <a id="5911" href="Setoid.Varieties.SoundAndComplete.html#7995" class="Function Operator">]</a> <a id="5913" href="Setoid.Subalgebras.Subalgebras.html#1518" class="Function Operator">≤</a> <a id="5915" href="Setoid.Varieties.HSP.html#2625" class="Function">ℭ</a>
 <a id="5918" href="Setoid.Varieties.HSP.html#5900" class="Function">𝔽≤ℭ</a> <a id="5922" class="Symbol">=</a> <a id="5924" href="Setoid.Subalgebras.Subalgebras.html#1802" class="Function">mon→≤</a> <a id="5930" href="Setoid.Varieties.HSP.html#5423" class="Function">mon𝔽ℭ</a>

 <a id="5938" href="Setoid.Varieties.HSP.html#5938" class="Function">SP𝔽</a> <a id="5942" class="Symbol">:</a> <a id="5944" href="Setoid.Varieties.SoundAndComplete.html#7995" class="Function Operator">𝔽[</a> <a id="5947" href="Setoid.Varieties.HSP.html#2125" class="Bound">X</a> <a id="5949" href="Setoid.Varieties.SoundAndComplete.html#7995" class="Function Operator">]</a> <a id="5951" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="5953" href="Setoid.Varieties.Closure.html#2475" class="Function">S</a> <a id="5955" href="Setoid.Varieties.HSP.html#2164" class="Function">ι</a> <a id="5957" class="Symbol">(</a><a id="5958" href="Setoid.Varieties.Closure.html#2601" class="Function">P</a> <a id="5960" href="Setoid.Varieties.HSP.html#2052" class="Bound">ℓ</a> <a id="5962" href="Setoid.Varieties.HSP.html#2164" class="Function">ι</a> <a id="5964" href="Setoid.Varieties.HSP.html#2074" class="Bound">𝒦</a><a id="5965" class="Symbol">)</a>
 <a id="5968" href="Setoid.Varieties.HSP.html#5938" class="Function">SP𝔽</a> <a id="5972" class="Symbol">=</a> <a id="5974" href="Setoid.Varieties.Closure.html#4603" class="Function">S-idem</a> <a id="5981" href="Setoid.Varieties.HSP.html#6136" class="Function">SSP𝔽</a>
  <a id="5988" class="Keyword">where</a>
  <a id="5996" href="Setoid.Varieties.HSP.html#5996" class="Function">PSℭ</a> <a id="6000" class="Symbol">:</a> <a id="6002" href="Setoid.Varieties.HSP.html#2625" class="Function">ℭ</a> <a id="6004" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="6006" href="Setoid.Varieties.Closure.html#2601" class="Function">P</a> <a id="6008" class="Symbol">(</a><a id="6009" href="Setoid.Varieties.HSP.html#2047" class="Bound">α</a> <a id="6011" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="6013" href="Setoid.Varieties.HSP.html#2049" class="Bound">ρᵃ</a> <a id="6016" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="6018" href="Setoid.Varieties.HSP.html#2052" class="Bound">ℓ</a><a id="6019" class="Symbol">)</a> <a id="6021" href="Setoid.Varieties.HSP.html#2164" class="Function">ι</a> <a id="6023" class="Symbol">(</a><a id="6024" href="Setoid.Varieties.Closure.html#2475" class="Function">S</a> <a id="6026" href="Setoid.Varieties.HSP.html#2052" class="Bound">ℓ</a> <a id="6028" href="Setoid.Varieties.HSP.html#2074" class="Bound">𝒦</a><a id="6029" class="Symbol">)</a>
  <a id="6033" href="Setoid.Varieties.HSP.html#5996" class="Function">PSℭ</a> <a id="6037" class="Symbol">=</a> <a id="6039" href="Setoid.Varieties.HSP.html#2508" class="Function">ℑ⁺</a> <a id="6042" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="6044" class="Symbol">(</a><a id="6045" href="Setoid.Varieties.HSP.html#2586" class="Function">𝔄⁺</a> <a id="6048" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="6050" class="Symbol">((λ</a> <a id="6054" href="Setoid.Varieties.HSP.html#6054" class="Bound">i</a> <a id="6056" class="Symbol">→</a> <a id="6058" href="Setoid.Varieties.HSP.html#630" class="Field">fst</a> <a id="6062" href="Overture.Basic.html#4364" class="Function Operator">∥</a> <a id="6064" href="Setoid.Varieties.HSP.html#6054" class="Bound">i</a> <a id="6066" href="Overture.Basic.html#4364" class="Function Operator">∥</a><a id="6067" class="Symbol">)</a> <a id="6069" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="6071" href="Setoid.Homomorphisms.Isomorphisms.html#3930" class="Function">≅-refl</a><a id="6077" class="Symbol">))</a>

  <a id="6083" href="Setoid.Varieties.HSP.html#6083" class="Function">SPℭ</a> <a id="6087" class="Symbol">:</a> <a id="6089" href="Setoid.Varieties.HSP.html#2625" class="Function">ℭ</a> <a id="6091" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="6093" href="Setoid.Varieties.Closure.html#2475" class="Function">S</a> <a id="6095" href="Setoid.Varieties.HSP.html#2164" class="Function">ι</a> <a id="6097" class="Symbol">(</a><a id="6098" href="Setoid.Varieties.Closure.html#2601" class="Function">P</a> <a id="6100" href="Setoid.Varieties.HSP.html#2052" class="Bound">ℓ</a> <a id="6102" href="Setoid.Varieties.HSP.html#2164" class="Function">ι</a> <a id="6104" href="Setoid.Varieties.HSP.html#2074" class="Bound">𝒦</a><a id="6105" class="Symbol">)</a>
  <a id="6109" href="Setoid.Varieties.HSP.html#6083" class="Function">SPℭ</a> <a id="6113" class="Symbol">=</a> <a id="6115" href="Setoid.Varieties.Preservation.html#3497" class="Function">PS⊆SP</a> <a id="6121" class="Symbol">{</a><a id="6122" class="Argument">ℓ</a> <a id="6124" class="Symbol">=</a> <a id="6126" href="Setoid.Varieties.HSP.html#2052" class="Bound">ℓ</a><a id="6127" class="Symbol">}</a> <a id="6129" href="Setoid.Varieties.HSP.html#5996" class="Function">PSℭ</a>

  <a id="6136" href="Setoid.Varieties.HSP.html#6136" class="Function">SSP𝔽</a> <a id="6141" class="Symbol">:</a> <a id="6143" href="Setoid.Varieties.SoundAndComplete.html#7995" class="Function Operator">𝔽[</a> <a id="6146" href="Setoid.Varieties.HSP.html#2125" class="Bound">X</a> <a id="6148" href="Setoid.Varieties.SoundAndComplete.html#7995" class="Function Operator">]</a> <a id="6150" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="6152" href="Setoid.Varieties.Closure.html#2475" class="Function">S</a> <a id="6154" href="Setoid.Varieties.HSP.html#2164" class="Function">ι</a> <a id="6156" class="Symbol">(</a><a id="6157" href="Setoid.Varieties.Closure.html#2475" class="Function">S</a> <a id="6159" href="Setoid.Varieties.HSP.html#2164" class="Function">ι</a> <a id="6161" class="Symbol">(</a><a id="6162" href="Setoid.Varieties.Closure.html#2601" class="Function">P</a> <a id="6164" href="Setoid.Varieties.HSP.html#2052" class="Bound">ℓ</a> <a id="6166" href="Setoid.Varieties.HSP.html#2164" class="Function">ι</a> <a id="6168" href="Setoid.Varieties.HSP.html#2074" class="Bound">𝒦</a><a id="6169" class="Symbol">))</a>
  <a id="6174" href="Setoid.Varieties.HSP.html#6136" class="Function">SSP𝔽</a> <a id="6179" class="Symbol">=</a> <a id="6181" href="Setoid.Varieties.HSP.html#2625" class="Function">ℭ</a> <a id="6183" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="6185" class="Symbol">(</a><a id="6186" href="Setoid.Varieties.HSP.html#6083" class="Function">SPℭ</a> <a id="6190" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="6192" href="Setoid.Varieties.HSP.html#5900" class="Function">𝔽≤ℭ</a><a id="6195" class="Symbol">)</a>

</pre>

#### <a id="proof-of-the-hsp-theorem">Proof of the HSP theorem</a>

Finally, we are in a position to prove Birkhoff's celebrated variety theorem.

<pre class="Agda">

<a id="6371" class="Keyword">module</a> <a id="6378" href="Setoid.Varieties.HSP.html#6378" class="Module">_</a> <a id="6380" class="Symbol">{</a><a id="6381" href="Setoid.Varieties.HSP.html#6381" class="Bound">α</a> <a id="6383" href="Setoid.Varieties.HSP.html#6383" class="Bound">ρᵃ</a> <a id="6386" href="Setoid.Varieties.HSP.html#6386" class="Bound">ℓ</a> <a id="6388" class="Symbol">:</a> <a id="6390" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="6395" class="Symbol">}{</a><a id="6397" href="Setoid.Varieties.HSP.html#6397" class="Bound">𝒦</a> <a id="6399" class="Symbol">:</a> <a id="6401" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="6405" class="Symbol">(</a><a id="6406" href="Setoid.Algebras.Basic.html#2837" class="Record">Algebra</a> <a id="6414" href="Setoid.Varieties.HSP.html#6381" class="Bound">α</a> <a id="6416" href="Setoid.Varieties.HSP.html#6383" class="Bound">ρᵃ</a><a id="6418" class="Symbol">)</a> <a id="6420" class="Symbol">(</a><a id="6421" href="Setoid.Varieties.HSP.html#6381" class="Bound">α</a> <a id="6423" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="6425" href="Setoid.Varieties.HSP.html#6383" class="Bound">ρᵃ</a> <a id="6428" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="6430" href="Setoid.Algebras.Basic.html#1068" class="Function">ov</a> <a id="6433" href="Setoid.Varieties.HSP.html#6386" class="Bound">ℓ</a><a id="6434" class="Symbol">)}</a> <a id="6437" class="Keyword">where</a>
 <a id="6444" class="Keyword">private</a> <a id="6452" href="Setoid.Varieties.HSP.html#6452" class="Function">ι</a> <a id="6454" class="Symbol">=</a> <a id="6456" href="Setoid.Algebras.Basic.html#1068" class="Function">ov</a><a id="6458" class="Symbol">(</a><a id="6459" href="Setoid.Varieties.HSP.html#6381" class="Bound">α</a> <a id="6461" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="6463" href="Setoid.Varieties.HSP.html#6383" class="Bound">ρᵃ</a> <a id="6466" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="6468" href="Setoid.Varieties.HSP.html#6386" class="Bound">ℓ</a><a id="6469" class="Symbol">)</a>

 <a id="6473" class="Keyword">open</a> <a id="6478" href="Setoid.Varieties.FreeAlgebras.html#2407" class="Module">FreeHom</a> <a id="6486" class="Symbol">(</a><a id="6487" href="Setoid.Varieties.HSP.html#6381" class="Bound">α</a> <a id="6489" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="6491" href="Setoid.Varieties.HSP.html#6383" class="Bound">ρᵃ</a> <a id="6494" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="6496" href="Setoid.Varieties.HSP.html#6386" class="Bound">ℓ</a><a id="6497" class="Symbol">)</a> <a id="6499" class="Symbol">{</a><a id="6500" href="Setoid.Varieties.HSP.html#6381" class="Bound">α</a><a id="6501" class="Symbol">}{</a><a id="6503" href="Setoid.Varieties.HSP.html#6383" class="Bound">ρᵃ</a><a id="6505" class="Symbol">}{</a><a id="6507" href="Setoid.Varieties.HSP.html#6386" class="Bound">ℓ</a><a id="6508" class="Symbol">}{</a><a id="6510" href="Setoid.Varieties.HSP.html#6397" class="Bound">𝒦</a><a id="6511" class="Symbol">}</a>
 <a id="6514" class="Keyword">open</a> <a id="6519" href="Setoid.Varieties.SoundAndComplete.html#7367" class="Module">FreeAlgebra</a> <a id="6531" class="Symbol">{</a><a id="6532" class="Argument">ι</a> <a id="6534" class="Symbol">=</a> <a id="6536" href="Setoid.Varieties.HSP.html#6452" class="Function">ι</a><a id="6537" class="Symbol">}{</a><a id="6539" class="Argument">I</a> <a id="6541" class="Symbol">=</a> <a id="6543" href="Setoid.Varieties.FreeAlgebras.html#2955" class="Function">ℐ</a><a id="6544" class="Symbol">}</a> <a id="6546" href="Setoid.Varieties.FreeAlgebras.html#3016" class="Function">ℰ</a> <a id="6548" class="Keyword">using</a> <a id="6554" class="Symbol">(</a> <a id="6556" href="Setoid.Varieties.SoundAndComplete.html#7995" class="Function Operator">𝔽[_]</a> <a id="6561" class="Symbol">)</a>

 <a id="6565" href="Setoid.Varieties.HSP.html#6565" class="Function">Birkhoff</a> <a id="6574" class="Symbol">:</a> <a id="6576" class="Symbol">∀</a> <a id="6578" href="Setoid.Varieties.HSP.html#6578" class="Bound">𝑨</a> <a id="6580" class="Symbol">→</a> <a id="6582" href="Setoid.Varieties.HSP.html#6578" class="Bound">𝑨</a> <a id="6584" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="6586" href="Setoid.Varieties.SoundAndComplete.html#3094" class="Function">Mod</a> <a id="6590" class="Symbol">(</a><a id="6591" href="Setoid.Varieties.SoundAndComplete.html#3253" class="Function">Th</a> <a id="6594" class="Symbol">(</a><a id="6595" href="Setoid.Varieties.Closure.html#3078" class="Function">V</a> <a id="6597" href="Setoid.Varieties.HSP.html#6386" class="Bound">ℓ</a> <a id="6599" href="Setoid.Varieties.HSP.html#6452" class="Function">ι</a> <a id="6601" href="Setoid.Varieties.HSP.html#6397" class="Bound">𝒦</a><a id="6602" class="Symbol">))</a> <a id="6605" class="Symbol">→</a> <a id="6607" href="Setoid.Varieties.HSP.html#6578" class="Bound">𝑨</a> <a id="6609" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="6611" href="Setoid.Varieties.Closure.html#3078" class="Function">V</a> <a id="6613" href="Setoid.Varieties.HSP.html#6386" class="Bound">ℓ</a> <a id="6615" href="Setoid.Varieties.HSP.html#6452" class="Function">ι</a> <a id="6617" href="Setoid.Varieties.HSP.html#6397" class="Bound">𝒦</a>
 <a id="6620" href="Setoid.Varieties.HSP.html#6565" class="Function">Birkhoff</a> <a id="6629" href="Setoid.Varieties.HSP.html#6629" class="Bound">𝑨</a> <a id="6631" href="Setoid.Varieties.HSP.html#6631" class="Bound">ModThA</a> <a id="6638" class="Symbol">=</a> <a id="6640" href="Setoid.Varieties.Closure.html#7438" class="Function">V-≅-lc</a><a id="6646" class="Symbol">{</a><a id="6647" href="Setoid.Varieties.HSP.html#6381" class="Bound">α</a><a id="6648" class="Symbol">}{</a><a id="6650" href="Setoid.Varieties.HSP.html#6383" class="Bound">ρᵃ</a><a id="6652" class="Symbol">}{</a><a id="6654" href="Setoid.Varieties.HSP.html#6386" class="Bound">ℓ</a><a id="6655" class="Symbol">}</a> <a id="6657" href="Setoid.Varieties.HSP.html#6397" class="Bound">𝒦</a> <a id="6659" href="Setoid.Varieties.HSP.html#6629" class="Bound">𝑨</a> <a id="6661" href="Setoid.Varieties.HSP.html#7010" class="Function">VlA</a>
  <a id="6667" class="Keyword">where</a>
  <a id="6675" class="Keyword">open</a> <a id="6680" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="6687" class="Symbol">(</a><a id="6688" href="Setoid.Algebras.Basic.html#2894" class="Field">Domain</a> <a id="6695" href="Setoid.Varieties.HSP.html#6629" class="Bound">𝑨</a><a id="6696" class="Symbol">)</a> <a id="6698" class="Keyword">using</a> <a id="6704" class="Symbol">()</a> <a id="6707" class="Keyword">renaming</a> <a id="6716" class="Symbol">(</a> <a id="6718" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="6726" class="Symbol">to</a> <a id="6729" class="Field">∣A∣</a> <a id="6733" class="Symbol">)</a>
  <a id="6737" href="Setoid.Varieties.HSP.html#6737" class="Function">sp𝔽A</a> <a id="6742" class="Symbol">:</a> <a id="6744" href="Setoid.Varieties.SoundAndComplete.html#7995" class="Function Operator">𝔽[</a> <a id="6747" href="Setoid.Varieties.HSP.html#6729" class="Function">∣A∣</a> <a id="6751" href="Setoid.Varieties.SoundAndComplete.html#7995" class="Function Operator">]</a> <a id="6753" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="6755" href="Setoid.Varieties.Closure.html#2475" class="Function">S</a><a id="6756" class="Symbol">{</a><a id="6757" href="Setoid.Varieties.HSP.html#6452" class="Function">ι</a><a id="6758" class="Symbol">}</a> <a id="6760" href="Setoid.Varieties.HSP.html#6452" class="Function">ι</a> <a id="6762" class="Symbol">(</a><a id="6763" href="Setoid.Varieties.Closure.html#2601" class="Function">P</a> <a id="6765" href="Setoid.Varieties.HSP.html#6386" class="Bound">ℓ</a> <a id="6767" href="Setoid.Varieties.HSP.html#6452" class="Function">ι</a> <a id="6769" href="Setoid.Varieties.HSP.html#6397" class="Bound">𝒦</a><a id="6770" class="Symbol">)</a>
  <a id="6774" href="Setoid.Varieties.HSP.html#6737" class="Function">sp𝔽A</a> <a id="6779" class="Symbol">=</a> <a id="6781" href="Setoid.Varieties.HSP.html#5938" class="Function">SP𝔽</a><a id="6784" class="Symbol">{</a><a id="6785" class="Argument">ℓ</a> <a id="6787" class="Symbol">=</a> <a id="6789" href="Setoid.Varieties.HSP.html#6386" class="Bound">ℓ</a><a id="6790" class="Symbol">}</a> <a id="6792" href="Setoid.Varieties.HSP.html#6397" class="Bound">𝒦</a>

  <a id="6797" href="Setoid.Varieties.HSP.html#6797" class="Function">epi𝔽lA</a> <a id="6804" class="Symbol">:</a> <a id="6806" href="Setoid.Homomorphisms.Basic.html#2541" class="Function">epi</a> <a id="6810" href="Setoid.Varieties.SoundAndComplete.html#7995" class="Function Operator">𝔽[</a> <a id="6813" href="Setoid.Varieties.HSP.html#6729" class="Function">∣A∣</a> <a id="6817" href="Setoid.Varieties.SoundAndComplete.html#7995" class="Function Operator">]</a> <a id="6819" class="Symbol">(</a><a id="6820" href="Setoid.Algebras.Basic.html#5877" class="Function">Lift-Alg</a> <a id="6829" href="Setoid.Varieties.HSP.html#6629" class="Bound">𝑨</a> <a id="6831" href="Setoid.Varieties.HSP.html#6452" class="Function">ι</a> <a id="6833" href="Setoid.Varieties.HSP.html#6452" class="Function">ι</a><a id="6834" class="Symbol">)</a>
  <a id="6838" href="Setoid.Varieties.HSP.html#6797" class="Function">epi𝔽lA</a> <a id="6845" class="Symbol">=</a> <a id="6847" href="Setoid.Varieties.FreeAlgebras.html#7265" class="Function">𝔽-ModTh-epi-lift</a><a id="6863" class="Symbol">{</a><a id="6864" class="Argument">ℓ</a> <a id="6866" class="Symbol">=</a> <a id="6868" href="Setoid.Varieties.HSP.html#6386" class="Bound">ℓ</a><a id="6869" class="Symbol">}</a> <a id="6871" class="Symbol">(λ</a> <a id="6874" class="Symbol">{</a><a id="6875" href="Setoid.Varieties.HSP.html#6875" class="Bound">p</a> <a id="6877" href="Setoid.Varieties.HSP.html#6877" class="Bound">q</a><a id="6878" class="Symbol">}</a> <a id="6880" class="Symbol">→</a> <a id="6882" href="Setoid.Varieties.HSP.html#6631" class="Bound">ModThA</a><a id="6888" class="Symbol">{</a><a id="6889" class="Argument">p</a> <a id="6891" class="Symbol">=</a> <a id="6893" href="Setoid.Varieties.HSP.html#6875" class="Bound">p</a><a id="6894" class="Symbol">}{</a><a id="6896" href="Setoid.Varieties.HSP.html#6877" class="Bound">q</a><a id="6897" class="Symbol">})</a>

  <a id="6903" href="Setoid.Varieties.HSP.html#6903" class="Function">lAimg𝔽A</a> <a id="6911" class="Symbol">:</a> <a id="6913" href="Setoid.Algebras.Basic.html#5877" class="Function">Lift-Alg</a> <a id="6922" href="Setoid.Varieties.HSP.html#6629" class="Bound">𝑨</a> <a id="6924" href="Setoid.Varieties.HSP.html#6452" class="Function">ι</a> <a id="6926" href="Setoid.Varieties.HSP.html#6452" class="Function">ι</a> <a id="6928" href="Setoid.Homomorphisms.HomomorphicImages.html#2132" class="Function Operator">IsHomImageOf</a> <a id="6941" href="Setoid.Varieties.SoundAndComplete.html#7995" class="Function Operator">𝔽[</a> <a id="6944" href="Setoid.Varieties.HSP.html#6729" class="Function">∣A∣</a> <a id="6948" href="Setoid.Varieties.SoundAndComplete.html#7995" class="Function Operator">]</a>
  <a id="6952" href="Setoid.Varieties.HSP.html#6903" class="Function">lAimg𝔽A</a> <a id="6960" class="Symbol">=</a> <a id="6962" href="Setoid.Homomorphisms.Basic.html#2859" class="Function">epi→ontohom</a> <a id="6974" href="Setoid.Varieties.SoundAndComplete.html#7995" class="Function Operator">𝔽[</a> <a id="6977" href="Setoid.Varieties.HSP.html#6729" class="Function">∣A∣</a> <a id="6981" href="Setoid.Varieties.SoundAndComplete.html#7995" class="Function Operator">]</a> <a id="6983" class="Symbol">(</a><a id="6984" href="Setoid.Algebras.Basic.html#5877" class="Function">Lift-Alg</a> <a id="6993" href="Setoid.Varieties.HSP.html#6629" class="Bound">𝑨</a> <a id="6995" href="Setoid.Varieties.HSP.html#6452" class="Function">ι</a> <a id="6997" href="Setoid.Varieties.HSP.html#6452" class="Function">ι</a><a id="6998" class="Symbol">)</a> <a id="7000" href="Setoid.Varieties.HSP.html#6797" class="Function">epi𝔽lA</a>

  <a id="7010" href="Setoid.Varieties.HSP.html#7010" class="Function">VlA</a> <a id="7014" class="Symbol">:</a> <a id="7016" href="Setoid.Algebras.Basic.html#5877" class="Function">Lift-Alg</a> <a id="7025" href="Setoid.Varieties.HSP.html#6629" class="Bound">𝑨</a> <a id="7027" href="Setoid.Varieties.HSP.html#6452" class="Function">ι</a> <a id="7029" href="Setoid.Varieties.HSP.html#6452" class="Function">ι</a> <a id="7031" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="7033" href="Setoid.Varieties.Closure.html#3078" class="Function">V</a> <a id="7035" href="Setoid.Varieties.HSP.html#6386" class="Bound">ℓ</a> <a id="7037" href="Setoid.Varieties.HSP.html#6452" class="Function">ι</a> <a id="7039" href="Setoid.Varieties.HSP.html#6397" class="Bound">𝒦</a>
  <a id="7043" href="Setoid.Varieties.HSP.html#7010" class="Function">VlA</a> <a id="7047" class="Symbol">=</a> <a id="7049" href="Setoid.Varieties.SoundAndComplete.html#7995" class="Function Operator">𝔽[</a> <a id="7052" href="Setoid.Varieties.HSP.html#6729" class="Function">∣A∣</a> <a id="7056" href="Setoid.Varieties.SoundAndComplete.html#7995" class="Function Operator">]</a> <a id="7058" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="7060" href="Setoid.Varieties.HSP.html#6737" class="Function">sp𝔽A</a> <a id="7065" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="7067" href="Setoid.Varieties.HSP.html#6903" class="Function">lAimg𝔽A</a>

</pre>

The converse inclusion, `V 𝒦 ⊆ Mod (Th (V 𝒦))`, is a simple consequence of the
fact that `Mod Th` is a closure operator. Nonetheless, completeness demands
that we formalize this inclusion as well, however trivial the proof.

<pre class="Agda">

 <a id="7328" class="Keyword">module</a> <a id="7335" href="Setoid.Varieties.HSP.html#7335" class="Module">_</a> <a id="7337" class="Symbol">{</a><a id="7338" href="Setoid.Varieties.HSP.html#7338" class="Bound">𝑨</a> <a id="7340" class="Symbol">:</a> <a id="7342" href="Setoid.Algebras.Basic.html#2837" class="Record">Algebra</a> <a id="7350" href="Setoid.Varieties.HSP.html#6381" class="Bound">α</a> <a id="7352" href="Setoid.Varieties.HSP.html#6383" class="Bound">ρᵃ</a><a id="7354" class="Symbol">}</a> <a id="7356" class="Keyword">where</a>
  <a id="7364" class="Keyword">open</a> <a id="7369" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="7376" class="Symbol">(</a><a id="7377" href="Setoid.Algebras.Basic.html#2894" class="Field">Domain</a> <a id="7384" href="Setoid.Varieties.HSP.html#7338" class="Bound">𝑨</a><a id="7385" class="Symbol">)</a> <a id="7387" class="Keyword">using</a> <a id="7393" class="Symbol">()</a> <a id="7396" class="Keyword">renaming</a> <a id="7405" class="Symbol">(</a> <a id="7407" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="7415" class="Symbol">to</a> <a id="7418" class="Field">∣A∣</a> <a id="7422" class="Symbol">)</a>

  <a id="7427" href="Setoid.Varieties.HSP.html#7427" class="Function">Birkhoff-converse</a> <a id="7445" class="Symbol">:</a> <a id="7447" href="Setoid.Varieties.HSP.html#7338" class="Bound">𝑨</a> <a id="7449" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="7451" href="Setoid.Varieties.Closure.html#3078" class="Function">V</a><a id="7452" class="Symbol">{</a><a id="7453" href="Setoid.Varieties.HSP.html#6381" class="Bound">α</a><a id="7454" class="Symbol">}{</a><a id="7456" href="Setoid.Varieties.HSP.html#6383" class="Bound">ρᵃ</a><a id="7458" class="Symbol">}{</a><a id="7460" href="Setoid.Varieties.HSP.html#6381" class="Bound">α</a><a id="7461" class="Symbol">}{</a><a id="7463" href="Setoid.Varieties.HSP.html#6383" class="Bound">ρᵃ</a><a id="7465" class="Symbol">}{</a><a id="7467" href="Setoid.Varieties.HSP.html#6381" class="Bound">α</a><a id="7468" class="Symbol">}{</a><a id="7470" href="Setoid.Varieties.HSP.html#6383" class="Bound">ρᵃ</a><a id="7472" class="Symbol">}</a> <a id="7474" href="Setoid.Varieties.HSP.html#6386" class="Bound">ℓ</a> <a id="7476" href="Setoid.Varieties.HSP.html#6452" class="Function">ι</a> <a id="7478" href="Setoid.Varieties.HSP.html#6397" class="Bound">𝒦</a> <a id="7480" class="Symbol">→</a> <a id="7482" href="Setoid.Varieties.HSP.html#7338" class="Bound">𝑨</a> <a id="7484" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="7486" href="Setoid.Varieties.SoundAndComplete.html#3094" class="Function">Mod</a><a id="7489" class="Symbol">{</a><a id="7490" class="Argument">X</a> <a id="7492" class="Symbol">=</a> <a id="7494" href="Setoid.Varieties.HSP.html#7418" class="Function">∣A∣</a><a id="7497" class="Symbol">}</a> <a id="7499" class="Symbol">(</a><a id="7500" href="Setoid.Varieties.SoundAndComplete.html#3253" class="Function">Th</a> <a id="7503" class="Symbol">(</a><a id="7504" href="Setoid.Varieties.Closure.html#3078" class="Function">V</a> <a id="7506" href="Setoid.Varieties.HSP.html#6386" class="Bound">ℓ</a> <a id="7508" href="Setoid.Varieties.HSP.html#6452" class="Function">ι</a> <a id="7510" href="Setoid.Varieties.HSP.html#6397" class="Bound">𝒦</a><a id="7511" class="Symbol">))</a>
  <a id="7516" href="Setoid.Varieties.HSP.html#7427" class="Function">Birkhoff-converse</a> <a id="7534" href="Setoid.Varieties.HSP.html#7534" class="Bound">vA</a> <a id="7537" href="Setoid.Varieties.HSP.html#7537" class="Bound">pThq</a> <a id="7542" class="Symbol">=</a> <a id="7544" href="Setoid.Varieties.HSP.html#7537" class="Bound">pThq</a> <a id="7549" href="Setoid.Varieties.HSP.html#7338" class="Bound">𝑨</a> <a id="7551" href="Setoid.Varieties.HSP.html#7534" class="Bound">vA</a>

</pre>

We have thus proved that every variety is an equational class.

Readers familiar with the classical formulation of the Birkhoff HSP theorem as an
"if and only if" assertion might worry that the proof is still incomplete. However,
recall that in the [Setoid.Varieties.Preservation][] module we proved the following
identity preservation lemma:

`V-id1 : 𝒦 ⊫ p ≈̇ q → V 𝒦 ⊫ p ≈̇ q`

Thus, if `𝒦` is an equational class---that is, if 𝒦 is the class of algebras
satisfying all identities in some set---then `V 𝒦` ⊆ 𝒦`.  On the other hand, we
proved that `V` is expansive in the [Setoid.Varieties.Closure][] module:

`V-expa : 𝒦 ⊆ V 𝒦`

so `𝒦` (= `V 𝒦` = `HSP 𝒦`) is a variety.

Taken together, `V-id1` and `V-expa` constitute formal proof that every equational
class is a variety.

This completes the formal proof of Birkhoff's variety theorem.

--------------------------------

<span style="float:left;">[← Setoid.Varieties.FreeAlgebras](Setoid.Varieties.FreeAlgebras.html)</span>
<span style="float:right;">[Top ↑](index.html)</span>

{% include UALib.Links.md %}

