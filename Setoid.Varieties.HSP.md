---
layout: default
title : "Setoid.Varieties.HSP module (Agda Universal Algebra Library)"
date : "2021-10-16"
author: "agda-algebras development team"
---

#### <a id="the-hsp-theorem">The HSP Theorem</a>

<pre class="Agda">

<a id="222" class="Symbol">{-#</a> <a id="226" class="Keyword">OPTIONS</a> <a id="234" class="Pragma">--without-K</a> <a id="246" class="Pragma">--exact-split</a> <a id="260" class="Pragma">--safe</a> <a id="267" class="Symbol">#-}</a>

<a id="272" class="Keyword">open</a> <a id="277" class="Keyword">import</a> <a id="284" href="Base.Algebras.Basic.html" class="Module">Base.Algebras.Basic</a> <a id="304" class="Keyword">using</a> <a id="310" class="Symbol">(</a> <a id="312" href="Base.Algebras.Basic.html#1162" class="Generalizable">𝓞</a> <a id="314" class="Symbol">;</a> <a id="316" href="Base.Algebras.Basic.html#1164" class="Generalizable">𝓥</a> <a id="318" class="Symbol">;</a> <a id="320" href="Base.Algebras.Basic.html#3890" class="Function">Signature</a> <a id="330" class="Symbol">)</a>

<a id="333" class="Keyword">module</a> <a id="340" href="Setoid.Varieties.HSP.html" class="Module">Setoid.Varieties.HSP</a> <a id="361" class="Symbol">{</a><a id="362" href="Setoid.Varieties.HSP.html#362" class="Bound">𝑆</a> <a id="364" class="Symbol">:</a> <a id="366" href="Base.Algebras.Basic.html#3890" class="Function">Signature</a> <a id="376" href="Base.Algebras.Basic.html#1162" class="Generalizable">𝓞</a> <a id="378" href="Base.Algebras.Basic.html#1164" class="Generalizable">𝓥</a><a id="379" class="Symbol">}</a> <a id="381" class="Keyword">where</a>

<a id="388" class="Comment">-- Imports from Agda and the Agda Standard Library ------------------------------------------------</a>
<a id="488" class="Keyword">open</a> <a id="493" class="Keyword">import</a> <a id="500" href="Agda.Primitive.html" class="Module">Agda.Primitive</a>    <a id="518" class="Keyword">using</a> <a id="524" class="Symbol">(</a> <a id="526" href="Agda.Primitive.html#780" class="Primitive">lsuc</a> <a id="531" class="Symbol">)</a>            <a id="544" class="Keyword">renaming</a> <a id="553" class="Symbol">(</a> <a id="555" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="559" class="Symbol">to</a> <a id="562" class="Primitive">Type</a> <a id="567" class="Symbol">)</a>
<a id="569" class="Keyword">open</a> <a id="574" class="Keyword">import</a> <a id="581" href="Data.Product.html" class="Module">Data.Product</a>      <a id="599" class="Keyword">using</a> <a id="605" class="Symbol">(</a> <a id="607" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">_,_</a> <a id="611" class="Symbol">;</a> <a id="613" href="Data.Product.html#916" class="Function">Σ-syntax</a> <a id="622" class="Symbol">)</a>  <a id="625" class="Keyword">renaming</a> <a id="634" class="Symbol">(</a> <a id="636" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="642" class="Symbol">to</a> <a id="645" class="Field">fst</a> <a id="649" class="Symbol">;</a> <a id="651" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="657" class="Symbol">to</a> <a id="660" class="Field">snd</a> <a id="664" class="Symbol">;</a> <a id="666" href="Data.Product.html#1167" class="Function Operator">_×_</a>  <a id="671" class="Symbol">to</a> <a id="674" class="Function Operator">_∧_</a> <a id="678" class="Symbol">)</a>
<a id="680" class="Keyword">open</a> <a id="685" class="Keyword">import</a> <a id="692" href="Function.Bundles.html" class="Module">Function.Bundles</a>  <a id="710" class="Keyword">using</a> <a id="716" class="Symbol">()</a>                  <a id="736" class="Keyword">renaming</a> <a id="745" class="Symbol">(</a> <a id="747" href="Function.Bundles.html#1868" class="Record">Func</a> <a id="752" class="Symbol">to</a> <a id="755" class="Record">_⟶_</a> <a id="759" class="Symbol">)</a>
<a id="761" class="Keyword">open</a> <a id="766" class="Keyword">import</a> <a id="773" href="Level.html" class="Module">Level</a>
<a id="779" class="Keyword">open</a> <a id="784" class="Keyword">import</a> <a id="791" href="Relation.Binary.html" class="Module">Relation.Binary</a>   <a id="809" class="Keyword">using</a> <a id="815" class="Symbol">(</a> <a id="817" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="824" class="Symbol">)</a>
<a id="826" class="Keyword">open</a> <a id="831" class="Keyword">import</a> <a id="838" href="Relation.Unary.html" class="Module">Relation.Unary</a>    <a id="856" class="Keyword">using</a> <a id="862" class="Symbol">(</a> <a id="864" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="869" class="Symbol">;</a> <a id="871" href="Relation.Unary.html#1523" class="Function Operator">_∈_</a> <a id="875" class="Symbol">;</a> <a id="877" href="Relation.Unary.html#1742" class="Function Operator">_⊆_</a> <a id="881" class="Symbol">)</a>

<a id="884" class="Comment">-- -- Imports from the Agda Universal Algebra Library ---------------------------------------------------</a>
<a id="990" class="Keyword">open</a> <a id="995" class="Keyword">import</a> <a id="1002" href="Base.Overture.Preliminaries.html" class="Module">Base.Overture.Preliminaries</a>                     <a id="1050" class="Keyword">using</a> <a id="1056" class="Symbol">(</a> <a id="1058" href="Base.Overture.Preliminaries.html#4402" class="Function Operator">∣_∣</a> <a id="1062" class="Symbol">;</a> <a id="1064" href="Base.Overture.Preliminaries.html#4440" class="Function Operator">∥_∥</a> <a id="1068" class="Symbol">)</a>
<a id="1070" class="Keyword">open</a> <a id="1075" class="Keyword">import</a> <a id="1082" href="Setoid.Relations.Discrete.html" class="Module">Setoid.Relations.Discrete</a>                       <a id="1130" class="Keyword">using</a> <a id="1136" class="Symbol">(</a> <a id="1138" href="Setoid.Relations.Discrete.html#2464" class="Function">fkerPred</a> <a id="1147" class="Symbol">)</a>
<a id="1149" class="Keyword">open</a> <a id="1154" class="Keyword">import</a> <a id="1161" href="Setoid.Algebras.Basic.html" class="Module">Setoid.Algebras.Basic</a>                   <a id="1201" class="Symbol">{</a><a id="1202" class="Argument">𝑆</a> <a id="1204" class="Symbol">=</a> <a id="1206" href="Setoid.Varieties.HSP.html#362" class="Bound">𝑆</a><a id="1207" class="Symbol">}</a> <a id="1209" class="Keyword">using</a> <a id="1215" class="Symbol">(</a> <a id="1217" href="Setoid.Algebras.Basic.html#2890" class="Record">Algebra</a> <a id="1225" class="Symbol">;</a> <a id="1227" href="Setoid.Algebras.Basic.html#1187" class="Function">ov</a> <a id="1230" class="Symbol">;</a> <a id="1232" href="Setoid.Algebras.Basic.html#5633" class="Function">Lift-Alg</a> <a id="1241" class="Symbol">)</a>
<a id="1243" class="Keyword">open</a> <a id="1248" class="Keyword">import</a> <a id="1255" href="Setoid.Algebras.Products.html" class="Module">Setoid.Algebras.Products</a>                <a id="1295" class="Symbol">{</a><a id="1296" class="Argument">𝑆</a> <a id="1298" class="Symbol">=</a> <a id="1300" href="Setoid.Varieties.HSP.html#362" class="Bound">𝑆</a><a id="1301" class="Symbol">}</a> <a id="1303" class="Keyword">using</a> <a id="1309" class="Symbol">(</a> <a id="1311" href="Setoid.Algebras.Products.html#1792" class="Function">⨅</a> <a id="1313" class="Symbol">)</a>
<a id="1315" class="Keyword">open</a> <a id="1320" class="Keyword">import</a> <a id="1327" href="Setoid.Homomorphisms.Basic.html" class="Module">Setoid.Homomorphisms.Basic</a>              <a id="1367" class="Symbol">{</a><a id="1368" class="Argument">𝑆</a> <a id="1370" class="Symbol">=</a> <a id="1372" href="Setoid.Varieties.HSP.html#362" class="Bound">𝑆</a><a id="1373" class="Symbol">}</a> <a id="1375" class="Keyword">using</a> <a id="1381" class="Symbol">(</a> <a id="1383" href="Setoid.Homomorphisms.Basic.html#1980" class="Function">hom</a> <a id="1387" class="Symbol">;</a> <a id="1389" href="Setoid.Homomorphisms.Basic.html#2316" class="Function">mon</a> <a id="1393" class="Symbol">;</a> <a id="1395" href="Setoid.Homomorphisms.Basic.html#2156" class="Record">IsMon</a> <a id="1401" class="Symbol">;</a> <a id="1403" href="Setoid.Homomorphisms.Basic.html#1884" class="Record">IsHom</a> <a id="1409" class="Symbol">)</a>
                                                            <a id="1471" class="Keyword">using</a> <a id="1477" class="Symbol">(</a> <a id="1479" href="Setoid.Homomorphisms.Basic.html#2605" class="Function">epi</a> <a id="1483" class="Symbol">;</a> <a id="1485" href="Setoid.Homomorphisms.Basic.html#2923" class="Function">epi→ontohom</a> <a id="1497" class="Symbol">)</a>
<a id="1499" class="Keyword">open</a> <a id="1504" class="Keyword">import</a> <a id="1511" href="Setoid.Homomorphisms.Products.html" class="Module">Setoid.Homomorphisms.Products</a>           <a id="1551" class="Symbol">{</a><a id="1552" class="Argument">𝑆</a> <a id="1554" class="Symbol">=</a> <a id="1556" href="Setoid.Varieties.HSP.html#362" class="Bound">𝑆</a><a id="1557" class="Symbol">}</a> <a id="1559" class="Keyword">using</a> <a id="1565" class="Symbol">(</a> <a id="1567" href="Setoid.Homomorphisms.Products.html#2190" class="Function">⨅-hom-co</a> <a id="1576" class="Symbol">)</a>
<a id="1578" class="Keyword">open</a> <a id="1583" class="Keyword">import</a> <a id="1590" href="Setoid.Homomorphisms.Factor.html" class="Module">Setoid.Homomorphisms.Factor</a>             <a id="1630" class="Symbol">{</a><a id="1631" class="Argument">𝑆</a> <a id="1633" class="Symbol">=</a> <a id="1635" href="Setoid.Varieties.HSP.html#362" class="Bound">𝑆</a><a id="1636" class="Symbol">}</a> <a id="1638" class="Keyword">using</a> <a id="1644" class="Symbol">(</a> <a id="1646" href="Setoid.Homomorphisms.Factor.html#2685" class="Function">HomFactor</a> <a id="1656" class="Symbol">)</a>
<a id="1658" class="Keyword">open</a> <a id="1663" class="Keyword">import</a> <a id="1670" href="Setoid.Homomorphisms.Isomorphisms.html" class="Module">Setoid.Homomorphisms.Isomorphisms</a>       <a id="1710" class="Symbol">{</a><a id="1711" class="Argument">𝑆</a> <a id="1713" class="Symbol">=</a> <a id="1715" href="Setoid.Varieties.HSP.html#362" class="Bound">𝑆</a><a id="1716" class="Symbol">}</a> <a id="1718" class="Keyword">using</a> <a id="1724" class="Symbol">(</a> <a id="1726" href="Setoid.Homomorphisms.Isomorphisms.html#4324" class="Function">≅-refl</a> <a id="1733" class="Symbol">)</a>
<a id="1735" class="Keyword">open</a> <a id="1740" class="Keyword">import</a> <a id="1747" href="Setoid.Homomorphisms.HomomorphicImages.html" class="Module">Setoid.Homomorphisms.HomomorphicImages</a>  <a id="1787" class="Symbol">{</a><a id="1788" class="Argument">𝑆</a> <a id="1790" class="Symbol">=</a> <a id="1792" href="Setoid.Varieties.HSP.html#362" class="Bound">𝑆</a><a id="1793" class="Symbol">}</a> <a id="1795" class="Keyword">using</a> <a id="1801" class="Symbol">(</a> <a id="1803" href="Setoid.Homomorphisms.HomomorphicImages.html#2479" class="Function Operator">_IsHomImageOf_</a> <a id="1818" class="Symbol">)</a>
<a id="1820" class="Keyword">open</a> <a id="1825" class="Keyword">import</a> <a id="1832" href="Setoid.Subalgebras.Subalgebras.html" class="Module">Setoid.Subalgebras.Subalgebras</a>          <a id="1872" class="Symbol">{</a><a id="1873" class="Argument">𝑆</a> <a id="1875" class="Symbol">=</a> <a id="1877" href="Setoid.Varieties.HSP.html#362" class="Bound">𝑆</a><a id="1878" class="Symbol">}</a> <a id="1880" class="Keyword">using</a> <a id="1886" class="Symbol">(</a> <a id="1888" href="Setoid.Subalgebras.Subalgebras.html#1646" class="Function Operator">_≤_</a> <a id="1892" class="Symbol">;</a> <a id="1894" href="Setoid.Subalgebras.Subalgebras.html#1930" class="Function">mon→≤</a> <a id="1900" class="Symbol">)</a>
<a id="1902" class="Keyword">open</a> <a id="1907" class="Keyword">import</a> <a id="1914" href="Setoid.Terms.Basic.html" class="Module">Setoid.Terms.Basic</a>                      <a id="1954" class="Symbol">{</a><a id="1955" class="Argument">𝑆</a> <a id="1957" class="Symbol">=</a> <a id="1959" href="Setoid.Varieties.HSP.html#362" class="Bound">𝑆</a><a id="1960" class="Symbol">}</a> <a id="1962" class="Keyword">using</a> <a id="1968" class="Symbol">(</a> <a id="1970" class="Keyword">module</a> <a id="1977" href="Setoid.Terms.Basic.html#3906" class="Module">Environment</a> <a id="1989" class="Symbol">;</a> <a id="1991" href="Setoid.Terms.Basic.html#2932" class="Function">𝑻</a> <a id="1993" class="Symbol">)</a>
<a id="1995" class="Keyword">open</a> <a id="2000" class="Keyword">import</a> <a id="2007" href="Setoid.Terms.Properties.html" class="Module">Setoid.Terms.Properties</a>                 <a id="2047" class="Symbol">{</a><a id="2048" class="Argument">𝑆</a> <a id="2050" class="Symbol">=</a> <a id="2052" href="Setoid.Varieties.HSP.html#362" class="Bound">𝑆</a><a id="2053" class="Symbol">}</a> <a id="2055" class="Keyword">using</a> <a id="2061" class="Symbol">(</a> <a id="2063" href="Setoid.Terms.Properties.html#3729" class="Function">lift-hom</a> <a id="2072" class="Symbol">;</a> <a id="2074" href="Setoid.Terms.Properties.html#2563" class="Function">free-lift</a> <a id="2084" class="Symbol">)</a>
<a id="2086" class="Keyword">open</a> <a id="2091" class="Keyword">import</a> <a id="2098" href="Setoid.Terms.Operations.html" class="Module">Setoid.Terms.Operations</a>                 <a id="2138" class="Symbol">{</a><a id="2139" class="Argument">𝑆</a> <a id="2141" class="Symbol">=</a> <a id="2143" href="Setoid.Varieties.HSP.html#362" class="Bound">𝑆</a><a id="2144" class="Symbol">}</a> <a id="2146" class="Keyword">using</a> <a id="2152" class="Symbol">(</a> <a id="2154" href="Setoid.Terms.Operations.html#2239" class="Function">free-lift-interp</a> <a id="2171" class="Symbol">)</a>
<a id="2173" class="Keyword">open</a> <a id="2178" class="Keyword">import</a> <a id="2185" href="Setoid.Varieties.SoundAndComplete.html" class="Module">Setoid.Varieties.SoundAndComplete</a>       <a id="2225" class="Symbol">{</a><a id="2226" class="Argument">𝑆</a> <a id="2228" class="Symbol">=</a> <a id="2230" href="Setoid.Varieties.HSP.html#362" class="Bound">𝑆</a><a id="2231" class="Symbol">}</a> <a id="2233" class="Keyword">using</a> <a id="2239" class="Symbol">(</a> <a id="2241" class="Keyword">module</a> <a id="2248" href="Setoid.Varieties.SoundAndComplete.html#7431" class="Module">FreeAlgebra</a> <a id="2260" class="Symbol">;</a> <a id="2262" href="Setoid.Varieties.SoundAndComplete.html#2373" class="Function Operator">_⊫_</a> <a id="2266" class="Symbol">;</a> <a id="2268" href="Setoid.Varieties.SoundAndComplete.html#2093" class="InductiveConstructor Operator">_≈̇_</a> <a id="2273" class="Symbol">)</a>
                                                            <a id="2335" class="Keyword">using</a> <a id="2341" class="Symbol">(</a> <a id="2343" href="Setoid.Varieties.SoundAndComplete.html#4181" class="Datatype Operator">_⊢_▹_≈_</a> <a id="2351" class="Symbol">;</a> <a id="2353" href="Setoid.Varieties.SoundAndComplete.html#3149" class="Function">Mod</a> <a id="2357" class="Symbol">;</a> <a id="2359" href="Setoid.Varieties.SoundAndComplete.html#3308" class="Function">Th</a> <a id="2362" class="Symbol">)</a>
<a id="2364" class="Keyword">open</a> <a id="2369" class="Keyword">import</a> <a id="2376" href="Setoid.Varieties.Closure.html" class="Module">Setoid.Varieties.Closure</a>                <a id="2416" class="Symbol">{</a><a id="2417" class="Argument">𝑆</a> <a id="2419" class="Symbol">=</a> <a id="2421" href="Setoid.Varieties.HSP.html#362" class="Bound">𝑆</a><a id="2422" class="Symbol">}</a> <a id="2424" class="Keyword">using</a> <a id="2430" class="Symbol">(</a> <a id="2432" href="Setoid.Varieties.Closure.html#2990" class="Function">S</a> <a id="2434" class="Symbol">;</a> <a id="2436" href="Setoid.Varieties.Closure.html#3595" class="Function">V</a> <a id="2438" class="Symbol">;</a> <a id="2440" href="Setoid.Varieties.Closure.html#3116" class="Function">P</a> <a id="2442" class="Symbol">;</a> <a id="2444" href="Setoid.Varieties.Closure.html#5121" class="Function">S-idem</a> <a id="2451" class="Symbol">;</a> <a id="2453" href="Setoid.Varieties.Closure.html#7952" class="Function">V-≅-lc</a> <a id="2460" class="Symbol">)</a>
<a id="2462" class="Keyword">open</a> <a id="2467" class="Keyword">import</a> <a id="2474" href="Setoid.Varieties.Preservation.html" class="Module">Setoid.Varieties.Preservation</a>           <a id="2514" class="Symbol">{</a><a id="2515" class="Argument">𝑆</a> <a id="2517" class="Symbol">=</a> <a id="2519" href="Setoid.Varieties.HSP.html#362" class="Bound">𝑆</a><a id="2520" class="Symbol">}</a> <a id="2522" class="Keyword">using</a> <a id="2528" class="Symbol">(</a> <a id="2530" href="Setoid.Varieties.Preservation.html#6139" class="Function">S-id2</a> <a id="2536" class="Symbol">;</a> <a id="2538" href="Setoid.Varieties.Preservation.html#4855" class="Function">PS⊆SP</a> <a id="2544" class="Symbol">)</a>
<a id="2546" class="Keyword">open</a> <a id="2551" class="Keyword">import</a> <a id="2558" href="Setoid.Varieties.FreeAlgebras.html" class="Module">Setoid.Varieties.FreeAlgebras</a>           <a id="2598" class="Symbol">{</a><a id="2599" class="Argument">𝑆</a> <a id="2601" class="Symbol">=</a> <a id="2603" href="Setoid.Varieties.HSP.html#362" class="Bound">𝑆</a><a id="2604" class="Symbol">}</a> <a id="2606" class="Keyword">using</a> <a id="2612" class="Symbol">(</a> <a id="2614" class="Keyword">module</a> <a id="2621" href="Setoid.Varieties.FreeAlgebras.html#2901" class="Module">FreeHom</a> <a id="2629" class="Symbol">;</a> <a id="2631" href="Setoid.Varieties.FreeAlgebras.html#7722" class="Function">𝔽-ModTh-epi-lift</a> <a id="2648" class="Symbol">)</a>

<a id="2651" class="Keyword">open</a> <a id="2656" href="Setoid.Varieties.HSP.html#755" class="Module">_⟶_</a>          <a id="2669" class="Keyword">using</a> <a id="2675" class="Symbol">()</a> <a id="2678" class="Keyword">renaming</a> <a id="2687" class="Symbol">(</a> <a id="2689" href="Function.Bundles.html#1919" class="Field">f</a> <a id="2691" class="Symbol">to</a> <a id="2694" class="Field">_⟨$⟩_</a> <a id="2700" class="Symbol">)</a>
<a id="2702" class="Keyword">open</a> <a id="2707" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a>       <a id="2720" class="Keyword">using</a> <a id="2726" class="Symbol">(</a> <a id="2728" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="2736" class="Symbol">)</a>
<a id="2738" class="Keyword">open</a> <a id="2743" href="Setoid.Algebras.Basic.html#2890" class="Module">Algebra</a>      <a id="2756" class="Keyword">using</a> <a id="2762" class="Symbol">(</a> <a id="2764" href="Setoid.Algebras.Basic.html#2947" class="Field">Domain</a> <a id="2771" class="Symbol">)</a>
<a id="2773" class="Keyword">open</a> <a id="2778" href="Setoid.Terms.Basic.html#3906" class="Module">Environment</a>  <a id="2791" class="Keyword">using</a> <a id="2797" class="Symbol">(</a> <a id="2799" href="Setoid.Terms.Basic.html#4088" class="Function">Env</a> <a id="2803" class="Symbol">)</a>

<a id="2806" class="Keyword">module</a> <a id="2813" href="Setoid.Varieties.HSP.html#2813" class="Module">_</a> <a id="2815" class="Symbol">{</a><a id="2816" href="Setoid.Varieties.HSP.html#2816" class="Bound">α</a> <a id="2818" href="Setoid.Varieties.HSP.html#2818" class="Bound">ρᵃ</a> <a id="2821" href="Setoid.Varieties.HSP.html#2821" class="Bound">ℓ</a> <a id="2823" class="Symbol">:</a> <a id="2825" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="2830" class="Symbol">}</a>
         <a id="2841" class="Symbol">(</a><a id="2842" href="Setoid.Varieties.HSP.html#2842" class="Bound">𝒦</a> <a id="2844" class="Symbol">:</a> <a id="2846" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="2850" class="Symbol">(</a><a id="2851" href="Setoid.Algebras.Basic.html#2890" class="Record">Algebra</a> <a id="2859" href="Setoid.Varieties.HSP.html#2816" class="Bound">α</a> <a id="2861" href="Setoid.Varieties.HSP.html#2818" class="Bound">ρᵃ</a><a id="2863" class="Symbol">)</a> <a id="2865" class="Symbol">(</a><a id="2866" href="Setoid.Varieties.HSP.html#2816" class="Bound">α</a> <a id="2868" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="2870" href="Setoid.Varieties.HSP.html#2818" class="Bound">ρᵃ</a> <a id="2873" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="2875" href="Setoid.Algebras.Basic.html#1187" class="Function">ov</a> <a id="2878" href="Setoid.Varieties.HSP.html#2821" class="Bound">ℓ</a><a id="2879" class="Symbol">))</a>
         <a id="2891" class="Symbol">{</a><a id="2892" href="Setoid.Varieties.HSP.html#2892" class="Bound">X</a> <a id="2894" class="Symbol">:</a> <a id="2896" href="Setoid.Varieties.HSP.html#562" class="Primitive">Type</a> <a id="2901" class="Symbol">(</a><a id="2902" href="Setoid.Varieties.HSP.html#2816" class="Bound">α</a> <a id="2904" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="2906" href="Setoid.Varieties.HSP.html#2818" class="Bound">ρᵃ</a> <a id="2909" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="2911" href="Setoid.Varieties.HSP.html#2821" class="Bound">ℓ</a><a id="2912" class="Symbol">)}</a> <a id="2915" class="Keyword">where</a>

 <a id="2923" class="Keyword">private</a> <a id="2931" href="Setoid.Varieties.HSP.html#2931" class="Function">ι</a> <a id="2933" class="Symbol">=</a> <a id="2935" href="Setoid.Algebras.Basic.html#1187" class="Function">ov</a><a id="2937" class="Symbol">(</a><a id="2938" href="Setoid.Varieties.HSP.html#2816" class="Bound">α</a> <a id="2940" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="2942" href="Setoid.Varieties.HSP.html#2818" class="Bound">ρᵃ</a> <a id="2945" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="2947" href="Setoid.Varieties.HSP.html#2821" class="Bound">ℓ</a><a id="2948" class="Symbol">)</a>

 <a id="2952" class="Keyword">open</a> <a id="2957" href="Setoid.Varieties.FreeAlgebras.html#2901" class="Module">FreeHom</a> <a id="2965" class="Symbol">(</a><a id="2966" href="Setoid.Varieties.HSP.html#2816" class="Bound">α</a> <a id="2968" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="2970" href="Setoid.Varieties.HSP.html#2818" class="Bound">ρᵃ</a> <a id="2973" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="2975" href="Setoid.Varieties.HSP.html#2821" class="Bound">ℓ</a><a id="2976" class="Symbol">)</a> <a id="2978" class="Symbol">{</a><a id="2979" href="Setoid.Varieties.HSP.html#2816" class="Bound">α</a><a id="2980" class="Symbol">}{</a><a id="2982" href="Setoid.Varieties.HSP.html#2818" class="Bound">ρᵃ</a><a id="2984" class="Symbol">}{</a><a id="2986" href="Setoid.Varieties.HSP.html#2821" class="Bound">ℓ</a><a id="2987" class="Symbol">}{</a><a id="2989" href="Setoid.Varieties.HSP.html#2842" class="Bound">𝒦</a><a id="2990" class="Symbol">}</a>
 <a id="2993" class="Keyword">open</a> <a id="2998" href="Setoid.Varieties.SoundAndComplete.html#7431" class="Module">FreeAlgebra</a> <a id="3010" class="Symbol">{</a><a id="3011" class="Argument">ι</a> <a id="3013" class="Symbol">=</a> <a id="3015" href="Setoid.Varieties.HSP.html#2931" class="Function">ι</a><a id="3016" class="Symbol">}{</a><a id="3018" class="Argument">I</a> <a id="3020" class="Symbol">=</a> <a id="3022" href="Setoid.Varieties.FreeAlgebras.html#3449" class="Function">ℐ</a><a id="3023" class="Symbol">}</a> <a id="3025" href="Setoid.Varieties.FreeAlgebras.html#3510" class="Function">ℰ</a> <a id="3027" class="Keyword">using</a> <a id="3033" class="Symbol">(</a> <a id="3035" href="Setoid.Varieties.SoundAndComplete.html#8057" class="Function Operator">𝔽[_]</a> <a id="3040" class="Symbol">)</a>

</pre>

We want to pair each `(𝑨 , p)` (where p : 𝑨 ∈ S 𝒦) with an environment
`ρ : X → ∣ 𝑨 ∣` so that we can quantify over all algebras *and* all
assignments of values in the domain `∣ 𝑨 ∣` to variables in `X`.

<pre class="Agda">

 <a id="3275" href="Setoid.Varieties.HSP.html#3275" class="Function">ℑ⁺</a> <a id="3278" class="Symbol">:</a> <a id="3280" href="Setoid.Varieties.HSP.html#562" class="Primitive">Type</a> <a id="3285" href="Setoid.Varieties.HSP.html#2931" class="Function">ι</a>
 <a id="3288" href="Setoid.Varieties.HSP.html#3275" class="Function">ℑ⁺</a> <a id="3291" class="Symbol">=</a> <a id="3293" href="Data.Product.html#916" class="Function">Σ[</a> <a id="3296" href="Setoid.Varieties.HSP.html#3296" class="Bound">𝑨</a> <a id="3298" href="Data.Product.html#916" class="Function">∈</a> <a id="3300" class="Symbol">(</a><a id="3301" href="Setoid.Algebras.Basic.html#2890" class="Record">Algebra</a> <a id="3309" href="Setoid.Varieties.HSP.html#2816" class="Bound">α</a> <a id="3311" href="Setoid.Varieties.HSP.html#2818" class="Bound">ρᵃ</a><a id="3313" class="Symbol">)</a> <a id="3315" href="Data.Product.html#916" class="Function">]</a> <a id="3317" class="Symbol">(</a><a id="3318" href="Setoid.Varieties.HSP.html#3296" class="Bound">𝑨</a> <a id="3320" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="3322" href="Setoid.Varieties.Closure.html#2990" class="Function">S</a> <a id="3324" href="Setoid.Varieties.HSP.html#2821" class="Bound">ℓ</a> <a id="3326" href="Setoid.Varieties.HSP.html#2842" class="Bound">𝒦</a><a id="3327" class="Symbol">)</a> <a id="3329" href="Setoid.Varieties.HSP.html#674" class="Function Operator">∧</a> <a id="3331" class="Symbol">(</a><a id="3332" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="3340" class="Symbol">(</a><a id="3341" href="Setoid.Terms.Basic.html#4088" class="Function">Env</a> <a id="3345" href="Setoid.Varieties.HSP.html#3296" class="Bound">𝑨</a> <a id="3347" href="Setoid.Varieties.HSP.html#2892" class="Bound">X</a><a id="3348" class="Symbol">))</a>

 <a id="3353" href="Setoid.Varieties.HSP.html#3353" class="Function">𝔄⁺</a> <a id="3356" class="Symbol">:</a> <a id="3358" href="Setoid.Varieties.HSP.html#3275" class="Function">ℑ⁺</a> <a id="3361" class="Symbol">→</a> <a id="3363" href="Setoid.Algebras.Basic.html#2890" class="Record">Algebra</a> <a id="3371" href="Setoid.Varieties.HSP.html#2816" class="Bound">α</a> <a id="3373" href="Setoid.Varieties.HSP.html#2818" class="Bound">ρᵃ</a>
 <a id="3377" href="Setoid.Varieties.HSP.html#3353" class="Function">𝔄⁺</a> <a id="3380" href="Setoid.Varieties.HSP.html#3380" class="Bound">i</a> <a id="3382" class="Symbol">=</a> <a id="3384" href="Base.Overture.Preliminaries.html#4402" class="Function Operator">∣</a> <a id="3386" href="Setoid.Varieties.HSP.html#3380" class="Bound">i</a> <a id="3388" href="Base.Overture.Preliminaries.html#4402" class="Function Operator">∣</a>

 <a id="3392" href="Setoid.Varieties.HSP.html#3392" class="Function">ℭ</a> <a id="3394" class="Symbol">:</a> <a id="3396" href="Setoid.Algebras.Basic.html#2890" class="Record">Algebra</a> <a id="3404" href="Setoid.Varieties.HSP.html#2931" class="Function">ι</a> <a id="3406" href="Setoid.Varieties.HSP.html#2931" class="Function">ι</a>
 <a id="3409" href="Setoid.Varieties.HSP.html#3392" class="Function">ℭ</a> <a id="3411" class="Symbol">=</a> <a id="3413" href="Setoid.Algebras.Products.html#1792" class="Function">⨅</a> <a id="3415" href="Setoid.Varieties.HSP.html#3353" class="Function">𝔄⁺</a>

</pre>

Next we define a useful type, `skEqual`, which we use to represent a term identity `p ≈ q` for any
given `i = (𝑨 , sA , ρ)` (where `𝑨` is an algebra, `sA : 𝑨 ∈ S 𝒦` is a proof that `𝑨` belongs
to `S 𝒦`, and `ρ` is a mapping from `X` to the domain of `𝑨`). Then we prove `AllEqual⊆ker𝔽` which
asserts that if the identity `p ≈ q` holds in all `𝑨 ∈ S 𝒦` (for all environments), then `p ≈ q`
holds in the relatively free algebra `𝔽[ X ]`; equivalently, the pair `(p , q)` belongs to the
kernel of the natural homomorphism from `𝑻 X` onto `𝔽[ X ]`. We will use this fact below to prove
that there is a monomorphism from `𝔽[ X ]` into `ℭ`, and thus `𝔽[ X ]` is a subalgebra of ℭ,
so belongs to `S (P 𝒦)`.

<pre class="Agda">

 <a id="4147" href="Setoid.Varieties.HSP.html#4147" class="Function">skEqual</a> <a id="4155" class="Symbol">:</a> <a id="4157" class="Symbol">(</a><a id="4158" href="Setoid.Varieties.HSP.html#4158" class="Bound">i</a> <a id="4160" class="Symbol">:</a> <a id="4162" href="Setoid.Varieties.HSP.html#3275" class="Function">ℑ⁺</a><a id="4164" class="Symbol">)</a> <a id="4166" class="Symbol">→</a> <a id="4168" class="Symbol">∀{</a><a id="4170" href="Setoid.Varieties.HSP.html#4170" class="Bound">p</a> <a id="4172" href="Setoid.Varieties.HSP.html#4172" class="Bound">q</a><a id="4173" class="Symbol">}</a> <a id="4175" class="Symbol">→</a> <a id="4177" href="Setoid.Varieties.HSP.html#562" class="Primitive">Type</a> <a id="4182" href="Setoid.Varieties.HSP.html#2818" class="Bound">ρᵃ</a>
 <a id="4186" href="Setoid.Varieties.HSP.html#4147" class="Function">skEqual</a> <a id="4194" href="Setoid.Varieties.HSP.html#4194" class="Bound">i</a> <a id="4196" class="Symbol">{</a><a id="4197" href="Setoid.Varieties.HSP.html#4197" class="Bound">p</a><a id="4198" class="Symbol">}{</a><a id="4200" href="Setoid.Varieties.HSP.html#4200" class="Bound">q</a><a id="4201" class="Symbol">}</a> <a id="4203" class="Symbol">=</a> <a id="4205" href="Setoid.Terms.Basic.html#4953" class="Function Operator">⟦</a> <a id="4207" href="Setoid.Varieties.HSP.html#4197" class="Bound">p</a> <a id="4209" href="Setoid.Terms.Basic.html#4953" class="Function Operator">⟧</a> <a id="4211" href="Setoid.Varieties.HSP.html#2694" class="Field Operator">⟨$⟩</a> <a id="4215" href="Setoid.Varieties.HSP.html#660" class="Field">snd</a> <a id="4219" href="Base.Overture.Preliminaries.html#4440" class="Function Operator">∥</a> <a id="4221" href="Setoid.Varieties.HSP.html#4194" class="Bound">i</a> <a id="4223" href="Base.Overture.Preliminaries.html#4440" class="Function Operator">∥</a> <a id="4225" href="Relation.Binary.Bundles.html#1098" class="Function Operator">≈</a> <a id="4227" href="Setoid.Terms.Basic.html#4953" class="Function Operator">⟦</a> <a id="4229" href="Setoid.Varieties.HSP.html#4200" class="Bound">q</a> <a id="4231" href="Setoid.Terms.Basic.html#4953" class="Function Operator">⟧</a> <a id="4233" href="Setoid.Varieties.HSP.html#2694" class="Field Operator">⟨$⟩</a> <a id="4237" href="Setoid.Varieties.HSP.html#660" class="Field">snd</a> <a id="4241" href="Base.Overture.Preliminaries.html#4440" class="Function Operator">∥</a> <a id="4243" href="Setoid.Varieties.HSP.html#4194" class="Bound">i</a> <a id="4245" href="Base.Overture.Preliminaries.html#4440" class="Function Operator">∥</a>
  <a id="4249" class="Keyword">where</a>
  <a id="4257" class="Keyword">open</a> <a id="4262" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="4269" class="Symbol">(</a><a id="4270" href="Setoid.Algebras.Basic.html#2947" class="Field">Domain</a> <a id="4277" class="Symbol">(</a><a id="4278" href="Setoid.Varieties.HSP.html#3353" class="Function">𝔄⁺</a> <a id="4281" href="Setoid.Varieties.HSP.html#4194" class="Bound">i</a><a id="4282" class="Symbol">))</a> <a id="4285" class="Keyword">using</a> <a id="4291" class="Symbol">(</a> <a id="4293" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_≈_</a> <a id="4297" class="Symbol">)</a>
  <a id="4301" class="Keyword">open</a> <a id="4306" href="Setoid.Terms.Basic.html#3906" class="Module">Environment</a> <a id="4318" class="Symbol">(</a><a id="4319" href="Setoid.Varieties.HSP.html#3353" class="Function">𝔄⁺</a> <a id="4322" href="Setoid.Varieties.HSP.html#4194" class="Bound">i</a><a id="4323" class="Symbol">)</a> <a id="4325" class="Keyword">using</a> <a id="4331" class="Symbol">(</a> <a id="4333" href="Setoid.Terms.Basic.html#4953" class="Function Operator">⟦_⟧</a> <a id="4337" class="Symbol">)</a>

 <a id="4341" href="Setoid.Varieties.HSP.html#4341" class="Function">AllEqual⊆ker𝔽</a> <a id="4355" class="Symbol">:</a> <a id="4357" class="Symbol">∀</a> <a id="4359" class="Symbol">{</a><a id="4360" href="Setoid.Varieties.HSP.html#4360" class="Bound">p</a> <a id="4362" href="Setoid.Varieties.HSP.html#4362" class="Bound">q</a><a id="4363" class="Symbol">}</a>
  <a id="4367" class="Symbol">→</a>              <a id="4382" class="Symbol">(∀</a> <a id="4385" href="Setoid.Varieties.HSP.html#4385" class="Bound">i</a> <a id="4387" class="Symbol">→</a> <a id="4389" href="Setoid.Varieties.HSP.html#4147" class="Function">skEqual</a> <a id="4397" href="Setoid.Varieties.HSP.html#4385" class="Bound">i</a> <a id="4399" class="Symbol">{</a><a id="4400" href="Setoid.Varieties.HSP.html#4360" class="Bound">p</a><a id="4401" class="Symbol">}{</a><a id="4403" href="Setoid.Varieties.HSP.html#4362" class="Bound">q</a><a id="4404" class="Symbol">})</a> <a id="4407" class="Symbol">→</a> <a id="4409" class="Symbol">(</a><a id="4410" href="Setoid.Varieties.HSP.html#4360" class="Bound">p</a> <a id="4412" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4414" href="Setoid.Varieties.HSP.html#4362" class="Bound">q</a><a id="4415" class="Symbol">)</a> <a id="4417" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="4419" href="Setoid.Relations.Discrete.html#2464" class="Function">fkerPred</a> <a id="4428" href="Base.Overture.Preliminaries.html#4402" class="Function Operator">∣</a> <a id="4430" href="Setoid.Varieties.FreeAlgebras.html#4692" class="Function Operator">hom𝔽[</a> <a id="4436" href="Setoid.Varieties.HSP.html#2892" class="Bound">X</a> <a id="4438" href="Setoid.Varieties.FreeAlgebras.html#4692" class="Function Operator">]</a> <a id="4440" href="Base.Overture.Preliminaries.html#4402" class="Function Operator">∣</a>
 <a id="4443" href="Setoid.Varieties.HSP.html#4341" class="Function">AllEqual⊆ker𝔽</a> <a id="4457" class="Symbol">{</a><a id="4458" href="Setoid.Varieties.HSP.html#4458" class="Bound">p</a><a id="4459" class="Symbol">}</a> <a id="4461" class="Symbol">{</a><a id="4462" href="Setoid.Varieties.HSP.html#4462" class="Bound">q</a><a id="4463" class="Symbol">}</a> <a id="4465" href="Setoid.Varieties.HSP.html#4465" class="Bound">x</a> <a id="4467" class="Symbol">=</a> <a id="4469" href="Setoid.Varieties.HSP.html#4698" class="Function">Goal</a>
  <a id="4476" class="Keyword">where</a>
  <a id="4484" class="Keyword">open</a> <a id="4489" href="Setoid.Algebras.Basic.html#2890" class="Module">Algebra</a> <a id="4497" href="Setoid.Varieties.SoundAndComplete.html#8057" class="Function Operator">𝔽[</a> <a id="4500" href="Setoid.Varieties.HSP.html#2892" class="Bound">X</a> <a id="4502" href="Setoid.Varieties.SoundAndComplete.html#8057" class="Function Operator">]</a> <a id="4504" class="Keyword">using</a> <a id="4510" class="Symbol">()</a> <a id="4513" class="Keyword">renaming</a> <a id="4522" class="Symbol">(</a> <a id="4524" href="Setoid.Algebras.Basic.html#2947" class="Field">Domain</a> <a id="4531" class="Symbol">to</a> <a id="4534" class="Field">F</a> <a id="4536" class="Symbol">;</a> <a id="4538" href="Setoid.Algebras.Basic.html#2969" class="Field">Interp</a> <a id="4545" class="Symbol">to</a> <a id="4548" class="Field">InterpF</a> <a id="4556" class="Symbol">)</a>
  <a id="4560" class="Keyword">open</a> <a id="4565" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="4572" href="Setoid.Varieties.HSP.html#4534" class="Function">F</a> <a id="4574" class="Keyword">using</a> <a id="4580" class="Symbol">()</a> <a id="4583" class="Keyword">renaming</a> <a id="4592" class="Symbol">(</a> <a id="4594" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_≈_</a>  <a id="4599" class="Symbol">to</a> <a id="4602" class="Field Operator">_≈F≈_</a> <a id="4608" class="Symbol">;</a> <a id="4610" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="4615" class="Symbol">to</a> <a id="4618" class="Function">reflF</a> <a id="4624" class="Symbol">)</a>
  <a id="4628" href="Setoid.Varieties.HSP.html#4628" class="Function">S𝒦⊫pq</a> <a id="4634" class="Symbol">:</a> <a id="4636" href="Setoid.Varieties.Closure.html#2990" class="Function">S</a><a id="4637" class="Symbol">{</a><a id="4638" class="Argument">β</a> <a id="4640" class="Symbol">=</a> <a id="4642" href="Setoid.Varieties.HSP.html#2816" class="Bound">α</a><a id="4643" class="Symbol">}{</a><a id="4645" href="Setoid.Varieties.HSP.html#2818" class="Bound">ρᵃ</a><a id="4647" class="Symbol">}</a> <a id="4649" href="Setoid.Varieties.HSP.html#2821" class="Bound">ℓ</a> <a id="4651" href="Setoid.Varieties.HSP.html#2842" class="Bound">𝒦</a> <a id="4653" href="Setoid.Varieties.SoundAndComplete.html#2373" class="Function Operator">⊫</a> <a id="4655" class="Symbol">(</a><a id="4656" href="Setoid.Varieties.HSP.html#4458" class="Bound">p</a> <a id="4658" href="Setoid.Varieties.SoundAndComplete.html#2093" class="InductiveConstructor Operator">≈̇</a> <a id="4661" href="Setoid.Varieties.HSP.html#4462" class="Bound">q</a><a id="4662" class="Symbol">)</a>
  <a id="4666" href="Setoid.Varieties.HSP.html#4628" class="Function">S𝒦⊫pq</a> <a id="4672" href="Setoid.Varieties.HSP.html#4672" class="Bound">𝑨</a> <a id="4674" href="Setoid.Varieties.HSP.html#4674" class="Bound">sA</a> <a id="4677" href="Setoid.Varieties.HSP.html#4677" class="Bound">ρ</a> <a id="4679" class="Symbol">=</a> <a id="4681" href="Setoid.Varieties.HSP.html#4465" class="Bound">x</a> <a id="4683" class="Symbol">(</a><a id="4684" href="Setoid.Varieties.HSP.html#4672" class="Bound">𝑨</a> <a id="4686" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4688" href="Setoid.Varieties.HSP.html#4674" class="Bound">sA</a> <a id="4691" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4693" href="Setoid.Varieties.HSP.html#4677" class="Bound">ρ</a><a id="4694" class="Symbol">)</a>
  <a id="4698" href="Setoid.Varieties.HSP.html#4698" class="Function">Goal</a> <a id="4703" class="Symbol">:</a> <a id="4705" href="Setoid.Varieties.HSP.html#4458" class="Bound">p</a> <a id="4707" href="Setoid.Varieties.HSP.html#4602" class="Function Operator">≈F≈</a> <a id="4711" href="Setoid.Varieties.HSP.html#4462" class="Bound">q</a>
  <a id="4715" href="Setoid.Varieties.HSP.html#4698" class="Function">Goal</a> <a id="4720" class="Symbol">=</a> <a id="4722" href="Setoid.Varieties.FreeAlgebras.html#5523" class="Function">𝒦⊫→ℰ⊢</a> <a id="4728" class="Symbol">(</a><a id="4729" href="Setoid.Varieties.Preservation.html#6139" class="Function">S-id2</a><a id="4734" class="Symbol">{</a><a id="4735" class="Argument">ℓ</a> <a id="4737" class="Symbol">=</a> <a id="4739" href="Setoid.Varieties.HSP.html#2821" class="Bound">ℓ</a><a id="4740" class="Symbol">}{</a><a id="4742" class="Argument">p</a> <a id="4744" class="Symbol">=</a> <a id="4746" href="Setoid.Varieties.HSP.html#4458" class="Bound">p</a><a id="4747" class="Symbol">}{</a><a id="4749" href="Setoid.Varieties.HSP.html#4462" class="Bound">q</a><a id="4750" class="Symbol">}</a> <a id="4752" href="Setoid.Varieties.HSP.html#4628" class="Function">S𝒦⊫pq</a><a id="4757" class="Symbol">)</a>

 <a id="4761" href="Setoid.Varieties.HSP.html#4761" class="Function">homℭ</a> <a id="4766" class="Symbol">:</a> <a id="4768" href="Setoid.Homomorphisms.Basic.html#1980" class="Function">hom</a> <a id="4772" class="Symbol">(</a><a id="4773" href="Setoid.Terms.Basic.html#2932" class="Function">𝑻</a> <a id="4775" href="Setoid.Varieties.HSP.html#2892" class="Bound">X</a><a id="4776" class="Symbol">)</a> <a id="4778" href="Setoid.Varieties.HSP.html#3392" class="Function">ℭ</a>
 <a id="4781" href="Setoid.Varieties.HSP.html#4761" class="Function">homℭ</a> <a id="4786" class="Symbol">=</a> <a id="4788" href="Setoid.Homomorphisms.Products.html#2190" class="Function">⨅-hom-co</a> <a id="4797" href="Setoid.Varieties.HSP.html#3353" class="Function">𝔄⁺</a> <a id="4800" href="Setoid.Varieties.HSP.html#4812" class="Function">h</a>
  <a id="4804" class="Keyword">where</a>
  <a id="4812" href="Setoid.Varieties.HSP.html#4812" class="Function">h</a> <a id="4814" class="Symbol">:</a> <a id="4816" class="Symbol">∀</a> <a id="4818" href="Setoid.Varieties.HSP.html#4818" class="Bound">i</a> <a id="4820" class="Symbol">→</a> <a id="4822" href="Setoid.Homomorphisms.Basic.html#1980" class="Function">hom</a> <a id="4826" class="Symbol">(</a><a id="4827" href="Setoid.Terms.Basic.html#2932" class="Function">𝑻</a> <a id="4829" href="Setoid.Varieties.HSP.html#2892" class="Bound">X</a><a id="4830" class="Symbol">)</a> <a id="4832" class="Symbol">(</a><a id="4833" href="Setoid.Varieties.HSP.html#3353" class="Function">𝔄⁺</a> <a id="4836" href="Setoid.Varieties.HSP.html#4818" class="Bound">i</a><a id="4837" class="Symbol">)</a>
  <a id="4841" href="Setoid.Varieties.HSP.html#4812" class="Function">h</a> <a id="4843" href="Setoid.Varieties.HSP.html#4843" class="Bound">i</a> <a id="4845" class="Symbol">=</a> <a id="4847" href="Setoid.Terms.Properties.html#3729" class="Function">lift-hom</a> <a id="4856" class="Symbol">(</a><a id="4857" href="Setoid.Varieties.HSP.html#660" class="Field">snd</a> <a id="4861" href="Base.Overture.Preliminaries.html#4440" class="Function Operator">∥</a> <a id="4863" href="Setoid.Varieties.HSP.html#4843" class="Bound">i</a> <a id="4865" href="Base.Overture.Preliminaries.html#4440" class="Function Operator">∥</a><a id="4866" class="Symbol">)</a>

 <a id="4870" class="Keyword">open</a> <a id="4875" href="Setoid.Algebras.Basic.html#2890" class="Module">Algebra</a> <a id="4883" href="Setoid.Varieties.SoundAndComplete.html#8057" class="Function Operator">𝔽[</a> <a id="4886" href="Setoid.Varieties.HSP.html#2892" class="Bound">X</a> <a id="4888" href="Setoid.Varieties.SoundAndComplete.html#8057" class="Function Operator">]</a> <a id="4890" class="Keyword">using</a> <a id="4896" class="Symbol">()</a> <a id="4899" class="Keyword">renaming</a> <a id="4908" class="Symbol">(</a> <a id="4910" href="Setoid.Algebras.Basic.html#2947" class="Field">Domain</a> <a id="4917" class="Symbol">to</a> <a id="4920" class="Field">F</a> <a id="4922" class="Symbol">;</a> <a id="4924" href="Setoid.Algebras.Basic.html#2969" class="Field">Interp</a> <a id="4931" class="Symbol">to</a> <a id="4934" class="Field">InterpF</a> <a id="4942" class="Symbol">)</a>
 <a id="4945" class="Keyword">open</a> <a id="4950" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="4957" href="Setoid.Varieties.HSP.html#4920" class="Function">F</a> <a id="4959" class="Keyword">using</a> <a id="4965" class="Symbol">()</a> <a id="4968" class="Keyword">renaming</a> <a id="4977" class="Symbol">(</a><a id="4978" href="Relation.Binary.Structures.html#1568" class="Function">refl</a> <a id="4983" class="Symbol">to</a> <a id="4986" class="Function">reflF</a> <a id="4992" class="Symbol">;</a> <a id="4994" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_≈_</a> <a id="4998" class="Symbol">to</a> <a id="5001" class="Field Operator">_≈F≈_</a> <a id="5007" class="Symbol">;</a> <a id="5009" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="5017" class="Symbol">to</a> <a id="5020" class="Field">∣F∣</a><a id="5023" class="Symbol">)</a>


 <a id="5028" href="Setoid.Varieties.HSP.html#5028" class="Function">ker𝔽⊆kerℭ</a> <a id="5038" class="Symbol">:</a> <a id="5040" href="Setoid.Relations.Discrete.html#2464" class="Function">fkerPred</a> <a id="5049" href="Base.Overture.Preliminaries.html#4402" class="Function Operator">∣</a> <a id="5051" href="Setoid.Varieties.FreeAlgebras.html#4692" class="Function Operator">hom𝔽[</a> <a id="5057" href="Setoid.Varieties.HSP.html#2892" class="Bound">X</a> <a id="5059" href="Setoid.Varieties.FreeAlgebras.html#4692" class="Function Operator">]</a> <a id="5061" href="Base.Overture.Preliminaries.html#4402" class="Function Operator">∣</a> <a id="5063" href="Relation.Unary.html#1742" class="Function Operator">⊆</a> <a id="5065" href="Setoid.Relations.Discrete.html#2464" class="Function">fkerPred</a> <a id="5074" href="Base.Overture.Preliminaries.html#4402" class="Function Operator">∣</a> <a id="5076" href="Setoid.Varieties.HSP.html#4761" class="Function">homℭ</a> <a id="5081" href="Base.Overture.Preliminaries.html#4402" class="Function Operator">∣</a>
 <a id="5084" href="Setoid.Varieties.HSP.html#5028" class="Function">ker𝔽⊆kerℭ</a> <a id="5094" class="Symbol">{</a><a id="5095" href="Setoid.Varieties.HSP.html#5095" class="Bound">p</a> <a id="5097" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5099" href="Setoid.Varieties.HSP.html#5099" class="Bound">q</a><a id="5100" class="Symbol">}</a> <a id="5102" href="Setoid.Varieties.HSP.html#5102" class="Bound">pKq</a> <a id="5106" class="Symbol">(</a><a id="5107" href="Setoid.Varieties.HSP.html#5107" class="Bound">𝑨</a> <a id="5109" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5111" href="Setoid.Varieties.HSP.html#5111" class="Bound">sA</a> <a id="5114" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5116" href="Setoid.Varieties.HSP.html#5116" class="Bound">ρ</a><a id="5117" class="Symbol">)</a> <a id="5119" class="Symbol">=</a> <a id="5121" href="Setoid.Varieties.HSP.html#5381" class="Function">Goal</a>
  <a id="5128" class="Keyword">where</a>
  <a id="5136" class="Keyword">open</a> <a id="5141" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="5148" class="Symbol">(</a><a id="5149" href="Setoid.Algebras.Basic.html#2947" class="Field">Domain</a> <a id="5156" href="Setoid.Varieties.HSP.html#5107" class="Bound">𝑨</a><a id="5157" class="Symbol">)</a> <a id="5159" class="Keyword">using</a> <a id="5165" class="Symbol">(</a> <a id="5167" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_≈_</a> <a id="5171" class="Symbol">;</a> <a id="5173" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="5177" class="Symbol">;</a> <a id="5179" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="5185" class="Symbol">)</a>
  <a id="5189" class="Keyword">open</a> <a id="5194" href="Setoid.Terms.Basic.html#3906" class="Module">Environment</a> <a id="5206" href="Setoid.Varieties.HSP.html#5107" class="Bound">𝑨</a> <a id="5208" class="Keyword">using</a> <a id="5214" class="Symbol">(</a> <a id="5216" href="Setoid.Terms.Basic.html#4953" class="Function Operator">⟦_⟧</a> <a id="5220" class="Symbol">)</a>
  <a id="5224" href="Setoid.Varieties.HSP.html#5224" class="Function">fl</a> <a id="5227" class="Symbol">:</a> <a id="5229" class="Symbol">∀</a> <a id="5231" href="Setoid.Varieties.HSP.html#5231" class="Bound">t</a> <a id="5233" class="Symbol">→</a> <a id="5235" href="Setoid.Terms.Basic.html#4953" class="Function Operator">⟦</a> <a id="5237" href="Setoid.Varieties.HSP.html#5231" class="Bound">t</a> <a id="5239" href="Setoid.Terms.Basic.html#4953" class="Function Operator">⟧</a> <a id="5241" href="Setoid.Varieties.HSP.html#2694" class="Field Operator">⟨$⟩</a> <a id="5245" href="Setoid.Varieties.HSP.html#5116" class="Bound">ρ</a> <a id="5247" href="Relation.Binary.Bundles.html#1098" class="Function Operator">≈</a> <a id="5249" href="Setoid.Terms.Properties.html#2563" class="Function">free-lift</a> <a id="5259" href="Setoid.Varieties.HSP.html#5116" class="Bound">ρ</a> <a id="5261" href="Setoid.Varieties.HSP.html#5231" class="Bound">t</a>
  <a id="5265" href="Setoid.Varieties.HSP.html#5224" class="Function">fl</a> <a id="5268" href="Setoid.Varieties.HSP.html#5268" class="Bound">t</a> <a id="5270" class="Symbol">=</a> <a id="5272" href="Setoid.Terms.Operations.html#2239" class="Function">free-lift-interp</a> <a id="5289" class="Symbol">{</a><a id="5290" class="Argument">𝑨</a> <a id="5292" class="Symbol">=</a> <a id="5294" href="Setoid.Varieties.HSP.html#5107" class="Bound">𝑨</a><a id="5295" class="Symbol">}</a> <a id="5297" href="Setoid.Varieties.HSP.html#5116" class="Bound">ρ</a> <a id="5299" href="Setoid.Varieties.HSP.html#5268" class="Bound">t</a>
  <a id="5303" href="Setoid.Varieties.HSP.html#5303" class="Function">subgoal</a> <a id="5311" class="Symbol">:</a> <a id="5313" href="Setoid.Terms.Basic.html#4953" class="Function Operator">⟦</a> <a id="5315" href="Setoid.Varieties.HSP.html#5095" class="Bound">p</a> <a id="5317" href="Setoid.Terms.Basic.html#4953" class="Function Operator">⟧</a> <a id="5319" href="Setoid.Varieties.HSP.html#2694" class="Field Operator">⟨$⟩</a> <a id="5323" href="Setoid.Varieties.HSP.html#5116" class="Bound">ρ</a> <a id="5325" href="Relation.Binary.Bundles.html#1098" class="Function Operator">≈</a> <a id="5327" href="Setoid.Terms.Basic.html#4953" class="Function Operator">⟦</a> <a id="5329" href="Setoid.Varieties.HSP.html#5099" class="Bound">q</a> <a id="5331" href="Setoid.Terms.Basic.html#4953" class="Function Operator">⟧</a> <a id="5333" href="Setoid.Varieties.HSP.html#2694" class="Field Operator">⟨$⟩</a> <a id="5337" href="Setoid.Varieties.HSP.html#5116" class="Bound">ρ</a>
  <a id="5341" href="Setoid.Varieties.HSP.html#5303" class="Function">subgoal</a> <a id="5349" class="Symbol">=</a> <a id="5351" href="Setoid.Varieties.FreeAlgebras.html#5382" class="Function">ker𝔽⊆Equal</a><a id="5361" class="Symbol">{</a><a id="5362" class="Argument">𝑨</a> <a id="5364" class="Symbol">=</a> <a id="5366" href="Setoid.Varieties.HSP.html#5107" class="Bound">𝑨</a><a id="5367" class="Symbol">}{</a><a id="5369" href="Setoid.Varieties.HSP.html#5111" class="Bound">sA</a><a id="5371" class="Symbol">}</a> <a id="5373" href="Setoid.Varieties.HSP.html#5102" class="Bound">pKq</a> <a id="5377" href="Setoid.Varieties.HSP.html#5116" class="Bound">ρ</a>
  <a id="5381" href="Setoid.Varieties.HSP.html#5381" class="Function">Goal</a> <a id="5386" class="Symbol">:</a> <a id="5388" class="Symbol">(</a><a id="5389" href="Setoid.Terms.Properties.html#2563" class="Function">free-lift</a><a id="5398" class="Symbol">{</a><a id="5399" class="Argument">𝑨</a> <a id="5401" class="Symbol">=</a> <a id="5403" href="Setoid.Varieties.HSP.html#5107" class="Bound">𝑨</a><a id="5404" class="Symbol">}</a> <a id="5406" href="Setoid.Varieties.HSP.html#5116" class="Bound">ρ</a> <a id="5408" href="Setoid.Varieties.HSP.html#5095" class="Bound">p</a><a id="5409" class="Symbol">)</a> <a id="5411" href="Relation.Binary.Bundles.html#1098" class="Function Operator">≈</a> <a id="5413" class="Symbol">(</a><a id="5414" href="Setoid.Terms.Properties.html#2563" class="Function">free-lift</a><a id="5423" class="Symbol">{</a><a id="5424" class="Argument">𝑨</a> <a id="5426" class="Symbol">=</a> <a id="5428" href="Setoid.Varieties.HSP.html#5107" class="Bound">𝑨</a><a id="5429" class="Symbol">}</a> <a id="5431" href="Setoid.Varieties.HSP.html#5116" class="Bound">ρ</a> <a id="5433" href="Setoid.Varieties.HSP.html#5099" class="Bound">q</a><a id="5434" class="Symbol">)</a>
  <a id="5438" href="Setoid.Varieties.HSP.html#5381" class="Function">Goal</a> <a id="5443" class="Symbol">=</a> <a id="5445" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="5451" class="Symbol">(</a><a id="5452" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="5456" class="Symbol">(</a><a id="5457" href="Setoid.Varieties.HSP.html#5224" class="Function">fl</a> <a id="5460" href="Setoid.Varieties.HSP.html#5095" class="Bound">p</a><a id="5461" class="Symbol">))</a> <a id="5464" class="Symbol">(</a><a id="5465" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="5471" href="Setoid.Varieties.HSP.html#5303" class="Function">subgoal</a> <a id="5479" class="Symbol">(</a><a id="5480" href="Setoid.Varieties.HSP.html#5224" class="Function">fl</a> <a id="5483" href="Setoid.Varieties.HSP.html#5099" class="Bound">q</a><a id="5484" class="Symbol">))</a>


 <a id="5490" href="Setoid.Varieties.HSP.html#5490" class="Function">hom𝔽ℭ</a> <a id="5496" class="Symbol">:</a> <a id="5498" href="Setoid.Homomorphisms.Basic.html#1980" class="Function">hom</a> <a id="5502" href="Setoid.Varieties.SoundAndComplete.html#8057" class="Function Operator">𝔽[</a> <a id="5505" href="Setoid.Varieties.HSP.html#2892" class="Bound">X</a> <a id="5507" href="Setoid.Varieties.SoundAndComplete.html#8057" class="Function Operator">]</a> <a id="5509" href="Setoid.Varieties.HSP.html#3392" class="Function">ℭ</a>
 <a id="5512" href="Setoid.Varieties.HSP.html#5490" class="Function">hom𝔽ℭ</a> <a id="5518" class="Symbol">=</a> <a id="5520" href="Base.Overture.Preliminaries.html#4402" class="Function Operator">∣</a> <a id="5522" href="Setoid.Homomorphisms.Factor.html#2685" class="Function">HomFactor</a> <a id="5532" href="Setoid.Varieties.HSP.html#3392" class="Function">ℭ</a> <a id="5534" href="Setoid.Varieties.HSP.html#4761" class="Function">homℭ</a> <a id="5539" href="Setoid.Varieties.FreeAlgebras.html#4692" class="Function Operator">hom𝔽[</a> <a id="5545" href="Setoid.Varieties.HSP.html#2892" class="Bound">X</a> <a id="5547" href="Setoid.Varieties.FreeAlgebras.html#4692" class="Function Operator">]</a> <a id="5549" href="Setoid.Varieties.HSP.html#5028" class="Function">ker𝔽⊆kerℭ</a> <a id="5559" href="Setoid.Varieties.FreeAlgebras.html#4780" class="Function Operator">hom𝔽[</a> <a id="5565" href="Setoid.Varieties.HSP.html#2892" class="Bound">X</a> <a id="5567" href="Setoid.Varieties.FreeAlgebras.html#4780" class="Function Operator">]-is-epic</a> <a id="5577" href="Base.Overture.Preliminaries.html#4402" class="Function Operator">∣</a>

 <a id="5581" class="Keyword">open</a> <a id="5586" href="Setoid.Terms.Basic.html#3906" class="Module">Environment</a> <a id="5598" href="Setoid.Varieties.HSP.html#3392" class="Function">ℭ</a>

 <a id="5602" href="Setoid.Varieties.HSP.html#5602" class="Function">kerℭ⊆ker𝔽</a> <a id="5612" class="Symbol">:</a> <a id="5614" class="Symbol">∀{</a><a id="5616" href="Setoid.Varieties.HSP.html#5616" class="Bound">p</a> <a id="5618" href="Setoid.Varieties.HSP.html#5618" class="Bound">q</a><a id="5619" class="Symbol">}</a> <a id="5621" class="Symbol">→</a> <a id="5623" class="Symbol">(</a><a id="5624" href="Setoid.Varieties.HSP.html#5616" class="Bound">p</a> <a id="5626" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5628" href="Setoid.Varieties.HSP.html#5618" class="Bound">q</a><a id="5629" class="Symbol">)</a> <a id="5631" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="5633" href="Setoid.Relations.Discrete.html#2464" class="Function">fkerPred</a> <a id="5642" href="Base.Overture.Preliminaries.html#4402" class="Function Operator">∣</a> <a id="5644" href="Setoid.Varieties.HSP.html#4761" class="Function">homℭ</a> <a id="5649" href="Base.Overture.Preliminaries.html#4402" class="Function Operator">∣</a> <a id="5651" class="Symbol">→</a> <a id="5653" class="Symbol">(</a><a id="5654" href="Setoid.Varieties.HSP.html#5616" class="Bound">p</a> <a id="5656" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5658" href="Setoid.Varieties.HSP.html#5618" class="Bound">q</a><a id="5659" class="Symbol">)</a> <a id="5661" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="5663" href="Setoid.Relations.Discrete.html#2464" class="Function">fkerPred</a> <a id="5672" href="Base.Overture.Preliminaries.html#4402" class="Function Operator">∣</a> <a id="5674" href="Setoid.Varieties.FreeAlgebras.html#4692" class="Function Operator">hom𝔽[</a> <a id="5680" href="Setoid.Varieties.HSP.html#2892" class="Bound">X</a> <a id="5682" href="Setoid.Varieties.FreeAlgebras.html#4692" class="Function Operator">]</a> <a id="5684" href="Base.Overture.Preliminaries.html#4402" class="Function Operator">∣</a>
 <a id="5687" href="Setoid.Varieties.HSP.html#5602" class="Function">kerℭ⊆ker𝔽</a> <a id="5697" class="Symbol">{</a><a id="5698" href="Setoid.Varieties.HSP.html#5698" class="Bound">p</a><a id="5699" class="Symbol">}{</a><a id="5701" href="Setoid.Varieties.HSP.html#5701" class="Bound">q</a><a id="5702" class="Symbol">}</a> <a id="5704" href="Setoid.Varieties.HSP.html#5704" class="Bound">pKq</a> <a id="5708" class="Symbol">=</a> <a id="5710" href="Setoid.Varieties.HSP.html#6103" class="Function">E⊢pq</a>
  <a id="5717" class="Keyword">where</a>
  <a id="5725" href="Setoid.Varieties.HSP.html#5725" class="Function">pqEqual</a> <a id="5733" class="Symbol">:</a> <a id="5735" class="Symbol">∀</a> <a id="5737" href="Setoid.Varieties.HSP.html#5737" class="Bound">i</a> <a id="5739" class="Symbol">→</a> <a id="5741" href="Setoid.Varieties.HSP.html#4147" class="Function">skEqual</a> <a id="5749" href="Setoid.Varieties.HSP.html#5737" class="Bound">i</a> <a id="5751" class="Symbol">{</a><a id="5752" href="Setoid.Varieties.HSP.html#5698" class="Bound">p</a><a id="5753" class="Symbol">}{</a><a id="5755" href="Setoid.Varieties.HSP.html#5701" class="Bound">q</a><a id="5756" class="Symbol">}</a>
  <a id="5760" href="Setoid.Varieties.HSP.html#5725" class="Function">pqEqual</a> <a id="5768" href="Setoid.Varieties.HSP.html#5768" class="Bound">i</a> <a id="5770" class="Symbol">=</a> <a id="5772" href="Setoid.Varieties.HSP.html#5909" class="Function">goal</a>
   <a id="5780" class="Keyword">where</a>
   <a id="5789" class="Keyword">open</a> <a id="5794" href="Setoid.Terms.Basic.html#3906" class="Module">Environment</a> <a id="5806" class="Symbol">(</a><a id="5807" href="Setoid.Varieties.HSP.html#3353" class="Function">𝔄⁺</a> <a id="5810" href="Setoid.Varieties.HSP.html#5768" class="Bound">i</a><a id="5811" class="Symbol">)</a> <a id="5813" class="Keyword">using</a> <a id="5819" class="Symbol">()</a> <a id="5822" class="Keyword">renaming</a> <a id="5831" class="Symbol">(</a> <a id="5833" href="Setoid.Terms.Basic.html#4953" class="Function Operator">⟦_⟧</a> <a id="5837" class="Symbol">to</a> <a id="5840" class="Function Operator">⟦_⟧ᵢ</a> <a id="5845" class="Symbol">)</a>
   <a id="5850" class="Keyword">open</a> <a id="5855" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="5862" class="Symbol">(</a><a id="5863" href="Setoid.Algebras.Basic.html#2947" class="Field">Domain</a> <a id="5870" class="Symbol">(</a><a id="5871" href="Setoid.Varieties.HSP.html#3353" class="Function">𝔄⁺</a> <a id="5874" href="Setoid.Varieties.HSP.html#5768" class="Bound">i</a><a id="5875" class="Symbol">))</a> <a id="5878" class="Keyword">using</a> <a id="5884" class="Symbol">(</a> <a id="5886" href="Relation.Binary.Bundles.html#1098" class="Field Operator">_≈_</a> <a id="5890" class="Symbol">;</a> <a id="5892" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="5896" class="Symbol">;</a> <a id="5898" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="5904" class="Symbol">)</a>
   <a id="5909" href="Setoid.Varieties.HSP.html#5909" class="Function">goal</a> <a id="5914" class="Symbol">:</a> <a id="5916" href="Setoid.Varieties.HSP.html#5840" class="Function Operator">⟦</a> <a id="5918" href="Setoid.Varieties.HSP.html#5698" class="Bound">p</a> <a id="5920" href="Setoid.Varieties.HSP.html#5840" class="Function Operator">⟧ᵢ</a> <a id="5923" href="Setoid.Varieties.HSP.html#2694" class="Field Operator">⟨$⟩</a> <a id="5927" href="Setoid.Varieties.HSP.html#660" class="Field">snd</a> <a id="5931" href="Base.Overture.Preliminaries.html#4440" class="Function Operator">∥</a> <a id="5933" href="Setoid.Varieties.HSP.html#5768" class="Bound">i</a> <a id="5935" href="Base.Overture.Preliminaries.html#4440" class="Function Operator">∥</a> <a id="5937" href="Relation.Binary.Bundles.html#1098" class="Function Operator">≈</a> <a id="5939" href="Setoid.Varieties.HSP.html#5840" class="Function Operator">⟦</a> <a id="5941" href="Setoid.Varieties.HSP.html#5701" class="Bound">q</a> <a id="5943" href="Setoid.Varieties.HSP.html#5840" class="Function Operator">⟧ᵢ</a> <a id="5946" href="Setoid.Varieties.HSP.html#2694" class="Field Operator">⟨$⟩</a> <a id="5950" href="Setoid.Varieties.HSP.html#660" class="Field">snd</a> <a id="5954" href="Base.Overture.Preliminaries.html#4440" class="Function Operator">∥</a> <a id="5956" href="Setoid.Varieties.HSP.html#5768" class="Bound">i</a> <a id="5958" href="Base.Overture.Preliminaries.html#4440" class="Function Operator">∥</a>
   <a id="5963" href="Setoid.Varieties.HSP.html#5909" class="Function">goal</a> <a id="5968" class="Symbol">=</a> <a id="5970" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="5976" class="Symbol">(</a><a id="5977" href="Setoid.Terms.Operations.html#2239" class="Function">free-lift-interp</a><a id="5993" class="Symbol">{</a><a id="5994" class="Argument">𝑨</a> <a id="5996" class="Symbol">=</a> <a id="5998" href="Base.Overture.Preliminaries.html#4402" class="Function Operator">∣</a> <a id="6000" href="Setoid.Varieties.HSP.html#5768" class="Bound">i</a> <a id="6002" href="Base.Overture.Preliminaries.html#4402" class="Function Operator">∣</a><a id="6003" class="Symbol">}(</a><a id="6005" href="Setoid.Varieties.HSP.html#660" class="Field">snd</a> <a id="6009" href="Base.Overture.Preliminaries.html#4440" class="Function Operator">∥</a> <a id="6011" href="Setoid.Varieties.HSP.html#5768" class="Bound">i</a> <a id="6013" href="Base.Overture.Preliminaries.html#4440" class="Function Operator">∥</a><a id="6014" class="Symbol">)</a> <a id="6016" href="Setoid.Varieties.HSP.html#5698" class="Bound">p</a><a id="6017" class="Symbol">)</a>
                 <a id="6036" class="Symbol">(</a><a id="6037" href="Relation.Binary.Structures.html#1620" class="Function">trans</a> <a id="6043" class="Symbol">(</a><a id="6044" href="Setoid.Varieties.HSP.html#5704" class="Bound">pKq</a> <a id="6048" href="Setoid.Varieties.HSP.html#5768" class="Bound">i</a><a id="6049" class="Symbol">)(</a><a id="6051" href="Relation.Binary.Structures.html#1594" class="Function">sym</a> <a id="6055" class="Symbol">(</a><a id="6056" href="Setoid.Terms.Operations.html#2239" class="Function">free-lift-interp</a><a id="6072" class="Symbol">{</a><a id="6073" class="Argument">𝑨</a> <a id="6075" class="Symbol">=</a> <a id="6077" href="Base.Overture.Preliminaries.html#4402" class="Function Operator">∣</a> <a id="6079" href="Setoid.Varieties.HSP.html#5768" class="Bound">i</a> <a id="6081" href="Base.Overture.Preliminaries.html#4402" class="Function Operator">∣</a><a id="6082" class="Symbol">}</a> <a id="6084" class="Symbol">(</a><a id="6085" href="Setoid.Varieties.HSP.html#660" class="Field">snd</a> <a id="6089" href="Base.Overture.Preliminaries.html#4440" class="Function Operator">∥</a> <a id="6091" href="Setoid.Varieties.HSP.html#5768" class="Bound">i</a> <a id="6093" href="Base.Overture.Preliminaries.html#4440" class="Function Operator">∥</a><a id="6094" class="Symbol">)</a> <a id="6096" href="Setoid.Varieties.HSP.html#5701" class="Bound">q</a><a id="6097" class="Symbol">)))</a>
  <a id="6103" href="Setoid.Varieties.HSP.html#6103" class="Function">E⊢pq</a> <a id="6108" class="Symbol">:</a> <a id="6110" href="Setoid.Varieties.FreeAlgebras.html#3510" class="Function">ℰ</a> <a id="6112" href="Setoid.Varieties.SoundAndComplete.html#4181" class="Datatype Operator">⊢</a> <a id="6114" href="Setoid.Varieties.HSP.html#2892" class="Bound">X</a> <a id="6116" href="Setoid.Varieties.SoundAndComplete.html#4181" class="Datatype Operator">▹</a> <a id="6118" href="Setoid.Varieties.HSP.html#5698" class="Bound">p</a> <a id="6120" href="Setoid.Varieties.SoundAndComplete.html#4181" class="Datatype Operator">≈</a> <a id="6122" href="Setoid.Varieties.HSP.html#5701" class="Bound">q</a>
  <a id="6126" href="Setoid.Varieties.HSP.html#6103" class="Function">E⊢pq</a> <a id="6131" class="Symbol">=</a> <a id="6133" href="Setoid.Varieties.HSP.html#4341" class="Function">AllEqual⊆ker𝔽</a> <a id="6147" href="Setoid.Varieties.HSP.html#5725" class="Function">pqEqual</a>


 <a id="6158" href="Setoid.Varieties.HSP.html#6158" class="Function">mon𝔽ℭ</a> <a id="6164" class="Symbol">:</a> <a id="6166" href="Setoid.Homomorphisms.Basic.html#2316" class="Function">mon</a> <a id="6170" href="Setoid.Varieties.SoundAndComplete.html#8057" class="Function Operator">𝔽[</a> <a id="6173" href="Setoid.Varieties.HSP.html#2892" class="Bound">X</a> <a id="6175" href="Setoid.Varieties.SoundAndComplete.html#8057" class="Function Operator">]</a> <a id="6177" href="Setoid.Varieties.HSP.html#3392" class="Function">ℭ</a>
 <a id="6180" href="Setoid.Varieties.HSP.html#6158" class="Function">mon𝔽ℭ</a> <a id="6186" class="Symbol">=</a> <a id="6188" href="Base.Overture.Preliminaries.html#4402" class="Function Operator">∣</a> <a id="6190" href="Setoid.Varieties.HSP.html#5490" class="Function">hom𝔽ℭ</a> <a id="6196" href="Base.Overture.Preliminaries.html#4402" class="Function Operator">∣</a> <a id="6198" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="6200" href="Setoid.Varieties.HSP.html#6242" class="Function">isMon</a>
  <a id="6208" class="Keyword">where</a>
  <a id="6216" class="Keyword">open</a> <a id="6221" href="Setoid.Homomorphisms.Basic.html#2156" class="Module">IsMon</a>
  <a id="6229" class="Keyword">open</a> <a id="6234" href="Setoid.Homomorphisms.Basic.html#1884" class="Module">IsHom</a>
  <a id="6242" href="Setoid.Varieties.HSP.html#6242" class="Function">isMon</a> <a id="6248" class="Symbol">:</a> <a id="6250" href="Setoid.Homomorphisms.Basic.html#2156" class="Record">IsMon</a> <a id="6256" href="Setoid.Varieties.SoundAndComplete.html#8057" class="Function Operator">𝔽[</a> <a id="6259" href="Setoid.Varieties.HSP.html#2892" class="Bound">X</a> <a id="6261" href="Setoid.Varieties.SoundAndComplete.html#8057" class="Function Operator">]</a> <a id="6263" href="Setoid.Varieties.HSP.html#3392" class="Function">ℭ</a> <a id="6265" href="Base.Overture.Preliminaries.html#4402" class="Function Operator">∣</a> <a id="6267" href="Setoid.Varieties.HSP.html#5490" class="Function">hom𝔽ℭ</a> <a id="6273" href="Base.Overture.Preliminaries.html#4402" class="Function Operator">∣</a>
  <a id="6277" href="Setoid.Homomorphisms.Basic.html#2224" class="Field">isHom</a> <a id="6283" href="Setoid.Varieties.HSP.html#6242" class="Function">isMon</a> <a id="6289" class="Symbol">=</a> <a id="6291" href="Base.Overture.Preliminaries.html#4440" class="Function Operator">∥</a> <a id="6293" href="Setoid.Varieties.HSP.html#5490" class="Function">hom𝔽ℭ</a> <a id="6299" href="Base.Overture.Preliminaries.html#4440" class="Function Operator">∥</a>
  <a id="6303" href="Setoid.Homomorphisms.Basic.html#2243" class="Field">isInjective</a> <a id="6315" href="Setoid.Varieties.HSP.html#6242" class="Function">isMon</a> <a id="6321" class="Symbol">{</a><a id="6322" href="Setoid.Varieties.HSP.html#6322" class="Bound">p</a><a id="6323" class="Symbol">}</a> <a id="6325" class="Symbol">{</a><a id="6326" href="Setoid.Varieties.HSP.html#6326" class="Bound">q</a><a id="6327" class="Symbol">}</a> <a id="6329" href="Setoid.Varieties.HSP.html#6329" class="Bound">φpq</a> <a id="6333" class="Symbol">=</a> <a id="6335" href="Setoid.Varieties.HSP.html#5602" class="Function">kerℭ⊆ker𝔽</a> <a id="6345" href="Setoid.Varieties.HSP.html#6329" class="Bound">φpq</a>

</pre>

Now that we have proved the existence of a monomorphism from `𝔽[ X ]` to `ℭ` we are in a position
to prove that `𝔽[ X ]` is a subalgebra of ℭ, so belongs to `S (P 𝒦)`.  In fact, we will show
that `𝔽[ X ]` is a subalgebra of the *lift* of `ℭ`, denoted `ℓℭ`.

<pre class="Agda">

 <a id="6635" href="Setoid.Varieties.HSP.html#6635" class="Function">𝔽≤ℭ</a> <a id="6639" class="Symbol">:</a> <a id="6641" href="Setoid.Varieties.SoundAndComplete.html#8057" class="Function Operator">𝔽[</a> <a id="6644" href="Setoid.Varieties.HSP.html#2892" class="Bound">X</a> <a id="6646" href="Setoid.Varieties.SoundAndComplete.html#8057" class="Function Operator">]</a> <a id="6648" href="Setoid.Subalgebras.Subalgebras.html#1646" class="Function Operator">≤</a> <a id="6650" href="Setoid.Varieties.HSP.html#3392" class="Function">ℭ</a>
 <a id="6653" href="Setoid.Varieties.HSP.html#6635" class="Function">𝔽≤ℭ</a> <a id="6657" class="Symbol">=</a> <a id="6659" href="Setoid.Subalgebras.Subalgebras.html#1930" class="Function">mon→≤</a> <a id="6665" href="Setoid.Varieties.HSP.html#6158" class="Function">mon𝔽ℭ</a>

 <a id="6673" href="Setoid.Varieties.HSP.html#6673" class="Function">SP𝔽</a> <a id="6677" class="Symbol">:</a> <a id="6679" href="Setoid.Varieties.SoundAndComplete.html#8057" class="Function Operator">𝔽[</a> <a id="6682" href="Setoid.Varieties.HSP.html#2892" class="Bound">X</a> <a id="6684" href="Setoid.Varieties.SoundAndComplete.html#8057" class="Function Operator">]</a> <a id="6686" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="6688" href="Setoid.Varieties.Closure.html#2990" class="Function">S</a> <a id="6690" href="Setoid.Varieties.HSP.html#2931" class="Function">ι</a> <a id="6692" class="Symbol">(</a><a id="6693" href="Setoid.Varieties.Closure.html#3116" class="Function">P</a> <a id="6695" href="Setoid.Varieties.HSP.html#2821" class="Bound">ℓ</a> <a id="6697" href="Setoid.Varieties.HSP.html#2931" class="Function">ι</a> <a id="6699" href="Setoid.Varieties.HSP.html#2842" class="Bound">𝒦</a><a id="6700" class="Symbol">)</a>
 <a id="6703" href="Setoid.Varieties.HSP.html#6673" class="Function">SP𝔽</a> <a id="6707" class="Symbol">=</a> <a id="6709" href="Setoid.Varieties.Closure.html#5121" class="Function">S-idem</a> <a id="6716" href="Setoid.Varieties.HSP.html#6871" class="Function">SSP𝔽</a>
  <a id="6723" class="Keyword">where</a>
  <a id="6731" href="Setoid.Varieties.HSP.html#6731" class="Function">PSℭ</a> <a id="6735" class="Symbol">:</a> <a id="6737" href="Setoid.Varieties.HSP.html#3392" class="Function">ℭ</a> <a id="6739" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="6741" href="Setoid.Varieties.Closure.html#3116" class="Function">P</a> <a id="6743" class="Symbol">(</a><a id="6744" href="Setoid.Varieties.HSP.html#2816" class="Bound">α</a> <a id="6746" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="6748" href="Setoid.Varieties.HSP.html#2818" class="Bound">ρᵃ</a> <a id="6751" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="6753" href="Setoid.Varieties.HSP.html#2821" class="Bound">ℓ</a><a id="6754" class="Symbol">)</a> <a id="6756" href="Setoid.Varieties.HSP.html#2931" class="Function">ι</a> <a id="6758" class="Symbol">(</a><a id="6759" href="Setoid.Varieties.Closure.html#2990" class="Function">S</a> <a id="6761" href="Setoid.Varieties.HSP.html#2821" class="Bound">ℓ</a> <a id="6763" href="Setoid.Varieties.HSP.html#2842" class="Bound">𝒦</a><a id="6764" class="Symbol">)</a>
  <a id="6768" href="Setoid.Varieties.HSP.html#6731" class="Function">PSℭ</a> <a id="6772" class="Symbol">=</a> <a id="6774" href="Setoid.Varieties.HSP.html#3275" class="Function">ℑ⁺</a> <a id="6777" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="6779" class="Symbol">(</a><a id="6780" href="Setoid.Varieties.HSP.html#3353" class="Function">𝔄⁺</a> <a id="6783" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="6785" class="Symbol">((λ</a> <a id="6789" href="Setoid.Varieties.HSP.html#6789" class="Bound">i</a> <a id="6791" class="Symbol">→</a> <a id="6793" href="Setoid.Varieties.HSP.html#645" class="Field">fst</a> <a id="6797" href="Base.Overture.Preliminaries.html#4440" class="Function Operator">∥</a> <a id="6799" href="Setoid.Varieties.HSP.html#6789" class="Bound">i</a> <a id="6801" href="Base.Overture.Preliminaries.html#4440" class="Function Operator">∥</a><a id="6802" class="Symbol">)</a> <a id="6804" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="6806" href="Setoid.Homomorphisms.Isomorphisms.html#4324" class="Function">≅-refl</a><a id="6812" class="Symbol">))</a>

  <a id="6818" href="Setoid.Varieties.HSP.html#6818" class="Function">SPℭ</a> <a id="6822" class="Symbol">:</a> <a id="6824" href="Setoid.Varieties.HSP.html#3392" class="Function">ℭ</a> <a id="6826" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="6828" href="Setoid.Varieties.Closure.html#2990" class="Function">S</a> <a id="6830" href="Setoid.Varieties.HSP.html#2931" class="Function">ι</a> <a id="6832" class="Symbol">(</a><a id="6833" href="Setoid.Varieties.Closure.html#3116" class="Function">P</a> <a id="6835" href="Setoid.Varieties.HSP.html#2821" class="Bound">ℓ</a> <a id="6837" href="Setoid.Varieties.HSP.html#2931" class="Function">ι</a> <a id="6839" href="Setoid.Varieties.HSP.html#2842" class="Bound">𝒦</a><a id="6840" class="Symbol">)</a>
  <a id="6844" href="Setoid.Varieties.HSP.html#6818" class="Function">SPℭ</a> <a id="6848" class="Symbol">=</a> <a id="6850" href="Setoid.Varieties.Preservation.html#4855" class="Function">PS⊆SP</a> <a id="6856" class="Symbol">{</a><a id="6857" class="Argument">ℓ</a> <a id="6859" class="Symbol">=</a> <a id="6861" href="Setoid.Varieties.HSP.html#2821" class="Bound">ℓ</a><a id="6862" class="Symbol">}</a> <a id="6864" href="Setoid.Varieties.HSP.html#6731" class="Function">PSℭ</a>

  <a id="6871" href="Setoid.Varieties.HSP.html#6871" class="Function">SSP𝔽</a> <a id="6876" class="Symbol">:</a> <a id="6878" href="Setoid.Varieties.SoundAndComplete.html#8057" class="Function Operator">𝔽[</a> <a id="6881" href="Setoid.Varieties.HSP.html#2892" class="Bound">X</a> <a id="6883" href="Setoid.Varieties.SoundAndComplete.html#8057" class="Function Operator">]</a> <a id="6885" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="6887" href="Setoid.Varieties.Closure.html#2990" class="Function">S</a> <a id="6889" href="Setoid.Varieties.HSP.html#2931" class="Function">ι</a> <a id="6891" class="Symbol">(</a><a id="6892" href="Setoid.Varieties.Closure.html#2990" class="Function">S</a> <a id="6894" href="Setoid.Varieties.HSP.html#2931" class="Function">ι</a> <a id="6896" class="Symbol">(</a><a id="6897" href="Setoid.Varieties.Closure.html#3116" class="Function">P</a> <a id="6899" href="Setoid.Varieties.HSP.html#2821" class="Bound">ℓ</a> <a id="6901" href="Setoid.Varieties.HSP.html#2931" class="Function">ι</a> <a id="6903" href="Setoid.Varieties.HSP.html#2842" class="Bound">𝒦</a><a id="6904" class="Symbol">))</a>
  <a id="6909" href="Setoid.Varieties.HSP.html#6871" class="Function">SSP𝔽</a> <a id="6914" class="Symbol">=</a> <a id="6916" href="Setoid.Varieties.HSP.html#3392" class="Function">ℭ</a> <a id="6918" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="6920" class="Symbol">(</a><a id="6921" href="Setoid.Varieties.HSP.html#6818" class="Function">SPℭ</a> <a id="6925" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="6927" href="Setoid.Varieties.HSP.html#6635" class="Function">𝔽≤ℭ</a><a id="6930" class="Symbol">)</a>

</pre>

#### <a id="proof-of-the-hsp-theorem">Proof of the HSP theorem</a>

Finally, we are in a position to prove Birkhoff's celebrated variety theorem.

<pre class="Agda">

<a id="7106" class="Keyword">module</a> <a id="7113" href="Setoid.Varieties.HSP.html#7113" class="Module">_</a> <a id="7115" class="Symbol">{</a><a id="7116" href="Setoid.Varieties.HSP.html#7116" class="Bound">α</a> <a id="7118" href="Setoid.Varieties.HSP.html#7118" class="Bound">ρᵃ</a> <a id="7121" href="Setoid.Varieties.HSP.html#7121" class="Bound">ℓ</a> <a id="7123" class="Symbol">:</a> <a id="7125" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="7130" class="Symbol">}</a>
         <a id="7141" class="Symbol">{</a><a id="7142" href="Setoid.Varieties.HSP.html#7142" class="Bound">𝒦</a> <a id="7144" class="Symbol">:</a> <a id="7146" href="Relation.Unary.html#1101" class="Function">Pred</a><a id="7150" class="Symbol">(</a><a id="7151" href="Setoid.Algebras.Basic.html#2890" class="Record">Algebra</a> <a id="7159" href="Setoid.Varieties.HSP.html#7116" class="Bound">α</a> <a id="7161" href="Setoid.Varieties.HSP.html#7118" class="Bound">ρᵃ</a><a id="7163" class="Symbol">)</a> <a id="7165" class="Symbol">(</a><a id="7166" href="Setoid.Varieties.HSP.html#7116" class="Bound">α</a> <a id="7168" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="7170" href="Setoid.Varieties.HSP.html#7118" class="Bound">ρᵃ</a> <a id="7173" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="7175" href="Setoid.Algebras.Basic.html#1187" class="Function">ov</a> <a id="7178" href="Setoid.Varieties.HSP.html#7121" class="Bound">ℓ</a><a id="7179" class="Symbol">)}</a> <a id="7182" class="Keyword">where</a>
 <a id="7189" class="Keyword">private</a>
  <a id="7199" href="Setoid.Varieties.HSP.html#7199" class="Function">ι</a> <a id="7201" class="Symbol">=</a> <a id="7203" href="Setoid.Algebras.Basic.html#1187" class="Function">ov</a><a id="7205" class="Symbol">(</a><a id="7206" href="Setoid.Varieties.HSP.html#7116" class="Bound">α</a> <a id="7208" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="7210" href="Setoid.Varieties.HSP.html#7118" class="Bound">ρᵃ</a> <a id="7213" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="7215" href="Setoid.Varieties.HSP.html#7121" class="Bound">ℓ</a><a id="7216" class="Symbol">)</a>

 <a id="7220" class="Keyword">open</a> <a id="7225" href="Setoid.Varieties.FreeAlgebras.html#2901" class="Module">FreeHom</a> <a id="7233" class="Symbol">(</a><a id="7234" href="Setoid.Varieties.HSP.html#7116" class="Bound">α</a> <a id="7236" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="7238" href="Setoid.Varieties.HSP.html#7118" class="Bound">ρᵃ</a> <a id="7241" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="7243" href="Setoid.Varieties.HSP.html#7121" class="Bound">ℓ</a><a id="7244" class="Symbol">)</a> <a id="7246" class="Symbol">{</a><a id="7247" href="Setoid.Varieties.HSP.html#7116" class="Bound">α</a><a id="7248" class="Symbol">}{</a><a id="7250" href="Setoid.Varieties.HSP.html#7118" class="Bound">ρᵃ</a><a id="7252" class="Symbol">}{</a><a id="7254" href="Setoid.Varieties.HSP.html#7121" class="Bound">ℓ</a><a id="7255" class="Symbol">}{</a><a id="7257" href="Setoid.Varieties.HSP.html#7142" class="Bound">𝒦</a><a id="7258" class="Symbol">}</a>
 <a id="7261" class="Keyword">open</a> <a id="7266" href="Setoid.Varieties.SoundAndComplete.html#7431" class="Module">FreeAlgebra</a> <a id="7278" class="Symbol">{</a><a id="7279" class="Argument">ι</a> <a id="7281" class="Symbol">=</a> <a id="7283" href="Setoid.Varieties.HSP.html#7199" class="Function">ι</a><a id="7284" class="Symbol">}{</a><a id="7286" class="Argument">I</a> <a id="7288" class="Symbol">=</a> <a id="7290" href="Setoid.Varieties.FreeAlgebras.html#3449" class="Function">ℐ</a><a id="7291" class="Symbol">}</a> <a id="7293" href="Setoid.Varieties.FreeAlgebras.html#3510" class="Function">ℰ</a> <a id="7295" class="Keyword">using</a> <a id="7301" class="Symbol">(</a> <a id="7303" href="Setoid.Varieties.SoundAndComplete.html#8057" class="Function Operator">𝔽[_]</a> <a id="7308" class="Symbol">)</a>

 <a id="7312" href="Setoid.Varieties.HSP.html#7312" class="Function">Birkhoff</a> <a id="7321" class="Symbol">:</a> <a id="7323" class="Symbol">∀</a> <a id="7325" href="Setoid.Varieties.HSP.html#7325" class="Bound">𝑨</a> <a id="7327" class="Symbol">→</a> <a id="7329" href="Setoid.Varieties.HSP.html#7325" class="Bound">𝑨</a> <a id="7331" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="7333" href="Setoid.Varieties.SoundAndComplete.html#3149" class="Function">Mod</a> <a id="7337" class="Symbol">(</a><a id="7338" href="Setoid.Varieties.SoundAndComplete.html#3308" class="Function">Th</a> <a id="7341" class="Symbol">(</a><a id="7342" href="Setoid.Varieties.Closure.html#3595" class="Function">V</a> <a id="7344" href="Setoid.Varieties.HSP.html#7121" class="Bound">ℓ</a> <a id="7346" href="Setoid.Varieties.HSP.html#7199" class="Function">ι</a> <a id="7348" href="Setoid.Varieties.HSP.html#7142" class="Bound">𝒦</a><a id="7349" class="Symbol">))</a> <a id="7352" class="Symbol">→</a> <a id="7354" href="Setoid.Varieties.HSP.html#7325" class="Bound">𝑨</a> <a id="7356" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="7358" href="Setoid.Varieties.Closure.html#3595" class="Function">V</a> <a id="7360" href="Setoid.Varieties.HSP.html#7121" class="Bound">ℓ</a> <a id="7362" href="Setoid.Varieties.HSP.html#7199" class="Function">ι</a> <a id="7364" href="Setoid.Varieties.HSP.html#7142" class="Bound">𝒦</a>
 <a id="7367" href="Setoid.Varieties.HSP.html#7312" class="Function">Birkhoff</a> <a id="7376" href="Setoid.Varieties.HSP.html#7376" class="Bound">𝑨</a> <a id="7378" href="Setoid.Varieties.HSP.html#7378" class="Bound">ModThA</a> <a id="7385" class="Symbol">=</a> <a id="7387" href="Setoid.Varieties.Closure.html#7952" class="Function">V-≅-lc</a><a id="7393" class="Symbol">{</a><a id="7394" href="Setoid.Varieties.HSP.html#7116" class="Bound">α</a><a id="7395" class="Symbol">}{</a><a id="7397" href="Setoid.Varieties.HSP.html#7118" class="Bound">ρᵃ</a><a id="7399" class="Symbol">}{</a><a id="7401" href="Setoid.Varieties.HSP.html#7121" class="Bound">ℓ</a><a id="7402" class="Symbol">}</a> <a id="7404" href="Setoid.Varieties.HSP.html#7142" class="Bound">𝒦</a> <a id="7406" href="Setoid.Varieties.HSP.html#7376" class="Bound">𝑨</a> <a id="7408" href="Setoid.Varieties.HSP.html#7757" class="Function">VlA</a>
  <a id="7414" class="Keyword">where</a>
  <a id="7422" class="Keyword">open</a> <a id="7427" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="7434" class="Symbol">(</a><a id="7435" href="Setoid.Algebras.Basic.html#2947" class="Field">Domain</a> <a id="7442" href="Setoid.Varieties.HSP.html#7376" class="Bound">𝑨</a><a id="7443" class="Symbol">)</a> <a id="7445" class="Keyword">using</a> <a id="7451" class="Symbol">()</a> <a id="7454" class="Keyword">renaming</a> <a id="7463" class="Symbol">(</a> <a id="7465" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="7473" class="Symbol">to</a> <a id="7476" class="Field">∣A∣</a> <a id="7480" class="Symbol">)</a>
  <a id="7484" href="Setoid.Varieties.HSP.html#7484" class="Function">sp𝔽A</a> <a id="7489" class="Symbol">:</a> <a id="7491" href="Setoid.Varieties.SoundAndComplete.html#8057" class="Function Operator">𝔽[</a> <a id="7494" href="Setoid.Varieties.HSP.html#7476" class="Function">∣A∣</a> <a id="7498" href="Setoid.Varieties.SoundAndComplete.html#8057" class="Function Operator">]</a> <a id="7500" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="7502" href="Setoid.Varieties.Closure.html#2990" class="Function">S</a><a id="7503" class="Symbol">{</a><a id="7504" href="Setoid.Varieties.HSP.html#7199" class="Function">ι</a><a id="7505" class="Symbol">}</a> <a id="7507" href="Setoid.Varieties.HSP.html#7199" class="Function">ι</a> <a id="7509" class="Symbol">(</a><a id="7510" href="Setoid.Varieties.Closure.html#3116" class="Function">P</a> <a id="7512" href="Setoid.Varieties.HSP.html#7121" class="Bound">ℓ</a> <a id="7514" href="Setoid.Varieties.HSP.html#7199" class="Function">ι</a> <a id="7516" href="Setoid.Varieties.HSP.html#7142" class="Bound">𝒦</a><a id="7517" class="Symbol">)</a>
  <a id="7521" href="Setoid.Varieties.HSP.html#7484" class="Function">sp𝔽A</a> <a id="7526" class="Symbol">=</a> <a id="7528" href="Setoid.Varieties.HSP.html#6673" class="Function">SP𝔽</a><a id="7531" class="Symbol">{</a><a id="7532" class="Argument">ℓ</a> <a id="7534" class="Symbol">=</a> <a id="7536" href="Setoid.Varieties.HSP.html#7121" class="Bound">ℓ</a><a id="7537" class="Symbol">}</a> <a id="7539" href="Setoid.Varieties.HSP.html#7142" class="Bound">𝒦</a>

  <a id="7544" href="Setoid.Varieties.HSP.html#7544" class="Function">epi𝔽lA</a> <a id="7551" class="Symbol">:</a> <a id="7553" href="Setoid.Homomorphisms.Basic.html#2605" class="Function">epi</a> <a id="7557" href="Setoid.Varieties.SoundAndComplete.html#8057" class="Function Operator">𝔽[</a> <a id="7560" href="Setoid.Varieties.HSP.html#7476" class="Function">∣A∣</a> <a id="7564" href="Setoid.Varieties.SoundAndComplete.html#8057" class="Function Operator">]</a> <a id="7566" class="Symbol">(</a><a id="7567" href="Setoid.Algebras.Basic.html#5633" class="Function">Lift-Alg</a> <a id="7576" href="Setoid.Varieties.HSP.html#7376" class="Bound">𝑨</a> <a id="7578" href="Setoid.Varieties.HSP.html#7199" class="Function">ι</a> <a id="7580" href="Setoid.Varieties.HSP.html#7199" class="Function">ι</a><a id="7581" class="Symbol">)</a>
  <a id="7585" href="Setoid.Varieties.HSP.html#7544" class="Function">epi𝔽lA</a> <a id="7592" class="Symbol">=</a> <a id="7594" href="Setoid.Varieties.FreeAlgebras.html#7722" class="Function">𝔽-ModTh-epi-lift</a><a id="7610" class="Symbol">{</a><a id="7611" class="Argument">ℓ</a> <a id="7613" class="Symbol">=</a> <a id="7615" href="Setoid.Varieties.HSP.html#7121" class="Bound">ℓ</a><a id="7616" class="Symbol">}</a> <a id="7618" class="Symbol">(λ</a> <a id="7621" class="Symbol">{</a><a id="7622" href="Setoid.Varieties.HSP.html#7622" class="Bound">p</a> <a id="7624" href="Setoid.Varieties.HSP.html#7624" class="Bound">q</a><a id="7625" class="Symbol">}</a> <a id="7627" class="Symbol">→</a> <a id="7629" href="Setoid.Varieties.HSP.html#7378" class="Bound">ModThA</a><a id="7635" class="Symbol">{</a><a id="7636" class="Argument">p</a> <a id="7638" class="Symbol">=</a> <a id="7640" href="Setoid.Varieties.HSP.html#7622" class="Bound">p</a><a id="7641" class="Symbol">}{</a><a id="7643" href="Setoid.Varieties.HSP.html#7624" class="Bound">q</a><a id="7644" class="Symbol">})</a>

  <a id="7650" href="Setoid.Varieties.HSP.html#7650" class="Function">lAimg𝔽A</a> <a id="7658" class="Symbol">:</a> <a id="7660" href="Setoid.Algebras.Basic.html#5633" class="Function">Lift-Alg</a> <a id="7669" href="Setoid.Varieties.HSP.html#7376" class="Bound">𝑨</a> <a id="7671" href="Setoid.Varieties.HSP.html#7199" class="Function">ι</a> <a id="7673" href="Setoid.Varieties.HSP.html#7199" class="Function">ι</a> <a id="7675" href="Setoid.Homomorphisms.HomomorphicImages.html#2479" class="Function Operator">IsHomImageOf</a> <a id="7688" href="Setoid.Varieties.SoundAndComplete.html#8057" class="Function Operator">𝔽[</a> <a id="7691" href="Setoid.Varieties.HSP.html#7476" class="Function">∣A∣</a> <a id="7695" href="Setoid.Varieties.SoundAndComplete.html#8057" class="Function Operator">]</a>
  <a id="7699" href="Setoid.Varieties.HSP.html#7650" class="Function">lAimg𝔽A</a> <a id="7707" class="Symbol">=</a> <a id="7709" href="Setoid.Homomorphisms.Basic.html#2923" class="Function">epi→ontohom</a> <a id="7721" href="Setoid.Varieties.SoundAndComplete.html#8057" class="Function Operator">𝔽[</a> <a id="7724" href="Setoid.Varieties.HSP.html#7476" class="Function">∣A∣</a> <a id="7728" href="Setoid.Varieties.SoundAndComplete.html#8057" class="Function Operator">]</a> <a id="7730" class="Symbol">(</a><a id="7731" href="Setoid.Algebras.Basic.html#5633" class="Function">Lift-Alg</a> <a id="7740" href="Setoid.Varieties.HSP.html#7376" class="Bound">𝑨</a> <a id="7742" href="Setoid.Varieties.HSP.html#7199" class="Function">ι</a> <a id="7744" href="Setoid.Varieties.HSP.html#7199" class="Function">ι</a><a id="7745" class="Symbol">)</a> <a id="7747" href="Setoid.Varieties.HSP.html#7544" class="Function">epi𝔽lA</a>

  <a id="7757" href="Setoid.Varieties.HSP.html#7757" class="Function">VlA</a> <a id="7761" class="Symbol">:</a> <a id="7763" href="Setoid.Algebras.Basic.html#5633" class="Function">Lift-Alg</a> <a id="7772" href="Setoid.Varieties.HSP.html#7376" class="Bound">𝑨</a> <a id="7774" href="Setoid.Varieties.HSP.html#7199" class="Function">ι</a> <a id="7776" href="Setoid.Varieties.HSP.html#7199" class="Function">ι</a> <a id="7778" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="7780" href="Setoid.Varieties.Closure.html#3595" class="Function">V</a> <a id="7782" href="Setoid.Varieties.HSP.html#7121" class="Bound">ℓ</a> <a id="7784" href="Setoid.Varieties.HSP.html#7199" class="Function">ι</a> <a id="7786" href="Setoid.Varieties.HSP.html#7142" class="Bound">𝒦</a>
  <a id="7790" href="Setoid.Varieties.HSP.html#7757" class="Function">VlA</a> <a id="7794" class="Symbol">=</a> <a id="7796" href="Setoid.Varieties.SoundAndComplete.html#8057" class="Function Operator">𝔽[</a> <a id="7799" href="Setoid.Varieties.HSP.html#7476" class="Function">∣A∣</a> <a id="7803" href="Setoid.Varieties.SoundAndComplete.html#8057" class="Function Operator">]</a> <a id="7805" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="7807" href="Setoid.Varieties.HSP.html#7484" class="Function">sp𝔽A</a> <a id="7812" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="7814" href="Setoid.Varieties.HSP.html#7650" class="Function">lAimg𝔽A</a>

</pre>

The converse inclusion, `V 𝒦 ⊆ Mod (Th (V 𝒦))`, is a simple consequence of the
fact that `Mod Th` is a closure operator. Nonetheless, completeness demands
that we formalize this inclusion as well, however trivial the proof.

<pre class="Agda">

 <a id="8075" class="Keyword">module</a> <a id="8082" href="Setoid.Varieties.HSP.html#8082" class="Module">_</a> <a id="8084" class="Symbol">{</a><a id="8085" href="Setoid.Varieties.HSP.html#8085" class="Bound">𝑨</a> <a id="8087" class="Symbol">:</a> <a id="8089" href="Setoid.Algebras.Basic.html#2890" class="Record">Algebra</a> <a id="8097" href="Setoid.Varieties.HSP.html#7116" class="Bound">α</a> <a id="8099" href="Setoid.Varieties.HSP.html#7118" class="Bound">ρᵃ</a><a id="8101" class="Symbol">}</a> <a id="8103" class="Keyword">where</a>
  <a id="8111" class="Keyword">open</a> <a id="8116" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="8123" class="Symbol">(</a><a id="8124" href="Setoid.Algebras.Basic.html#2947" class="Field">Domain</a> <a id="8131" href="Setoid.Varieties.HSP.html#8085" class="Bound">𝑨</a><a id="8132" class="Symbol">)</a> <a id="8134" class="Keyword">using</a> <a id="8140" class="Symbol">()</a> <a id="8143" class="Keyword">renaming</a> <a id="8152" class="Symbol">(</a> <a id="8154" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="8162" class="Symbol">to</a> <a id="8165" class="Field">∣A∣</a> <a id="8169" class="Symbol">)</a>

  <a id="8174" href="Setoid.Varieties.HSP.html#8174" class="Function">Birkhoff-converse</a> <a id="8192" class="Symbol">:</a> <a id="8194" href="Setoid.Varieties.HSP.html#8085" class="Bound">𝑨</a> <a id="8196" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="8198" href="Setoid.Varieties.Closure.html#3595" class="Function">V</a><a id="8199" class="Symbol">{</a><a id="8200" href="Setoid.Varieties.HSP.html#7116" class="Bound">α</a><a id="8201" class="Symbol">}{</a><a id="8203" href="Setoid.Varieties.HSP.html#7118" class="Bound">ρᵃ</a><a id="8205" class="Symbol">}{</a><a id="8207" href="Setoid.Varieties.HSP.html#7116" class="Bound">α</a><a id="8208" class="Symbol">}{</a><a id="8210" href="Setoid.Varieties.HSP.html#7118" class="Bound">ρᵃ</a><a id="8212" class="Symbol">}{</a><a id="8214" href="Setoid.Varieties.HSP.html#7116" class="Bound">α</a><a id="8215" class="Symbol">}{</a><a id="8217" href="Setoid.Varieties.HSP.html#7118" class="Bound">ρᵃ</a><a id="8219" class="Symbol">}</a> <a id="8221" href="Setoid.Varieties.HSP.html#7121" class="Bound">ℓ</a> <a id="8223" href="Setoid.Varieties.HSP.html#7199" class="Function">ι</a> <a id="8225" href="Setoid.Varieties.HSP.html#7142" class="Bound">𝒦</a> <a id="8227" class="Symbol">→</a> <a id="8229" href="Setoid.Varieties.HSP.html#8085" class="Bound">𝑨</a> <a id="8231" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="8233" href="Setoid.Varieties.SoundAndComplete.html#3149" class="Function">Mod</a><a id="8236" class="Symbol">{</a><a id="8237" class="Argument">X</a> <a id="8239" class="Symbol">=</a> <a id="8241" href="Setoid.Varieties.HSP.html#8165" class="Function">∣A∣</a><a id="8244" class="Symbol">}</a> <a id="8246" class="Symbol">(</a><a id="8247" href="Setoid.Varieties.SoundAndComplete.html#3308" class="Function">Th</a> <a id="8250" class="Symbol">(</a><a id="8251" href="Setoid.Varieties.Closure.html#3595" class="Function">V</a> <a id="8253" href="Setoid.Varieties.HSP.html#7121" class="Bound">ℓ</a> <a id="8255" href="Setoid.Varieties.HSP.html#7199" class="Function">ι</a> <a id="8257" href="Setoid.Varieties.HSP.html#7142" class="Bound">𝒦</a><a id="8258" class="Symbol">))</a>
  <a id="8263" href="Setoid.Varieties.HSP.html#8174" class="Function">Birkhoff-converse</a> <a id="8281" href="Setoid.Varieties.HSP.html#8281" class="Bound">vA</a> <a id="8284" href="Setoid.Varieties.HSP.html#8284" class="Bound">pThq</a> <a id="8289" class="Symbol">=</a> <a id="8291" href="Setoid.Varieties.HSP.html#8284" class="Bound">pThq</a> <a id="8296" href="Setoid.Varieties.HSP.html#8085" class="Bound">𝑨</a> <a id="8298" href="Setoid.Varieties.HSP.html#8281" class="Bound">vA</a>

</pre>

We have thus proved that every variety is an equational class.

Readers familiar with the classical formulation of the Birkhoff HSP theorem as an
"if and only if" assertion might worry that the proof is still incomplete. However,
recall that in the [Setoid.Varieties.Preservation][] module we proved the following
identity preservation lemma:

`V-id1 : 𝒦 ⊫ p ≈̇ q → V 𝒦 ⊫ p ≈̇ q`

Thus, if `𝒦` is an equational class---that is, if 𝒦 is the class of algebras
satisfying all identities in some set---then `V 𝒦` ⊆ 𝒦`.  On the other hand, we
proved that `V` is expansive in the [Setoid.Varieties.Closure][] module:

`V-expa : 𝒦 ⊆ V 𝒦`

so `𝒦` (= `V 𝒦` = `HSP 𝒦`) is a variety.

Taken together, `V-id1` and `V-expa` constitute formal proof that every equational
class is a variety.

This completes the formal proof of Birkhoff's variety theorem.

--------------------------------

<span style="float:left;">[← Setoid.Varieties.FreeAlgebras](Setoid.Varieties.FreeAlgebras.html)</span>
<span style="float:right;">[Top ↑](index.html)</span>

{% include UALib.Links.md %}

