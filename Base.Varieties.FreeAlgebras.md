---
layout: default
title : "Base.Varieties.FreeAlgebras module (Agda Universal Algebra Library)"
date : "2021-03-01"
author: "the agda-algebras development team"
---

### <a id="free-algebras-and-birkhoffs-theorem">Free Algebras and Birkhoff's Theorem</a>

This is the [Base.Varieties.FreeAlgebras][] module of the [Agda Universal Algebra Library][].

First we will define the relatively free algebra in a variety, which is the "freest" algebra among (universal for) those algebras that model all identities holding in the variety. Then we give a formal proof of Birkhoff's theorem which says that a variety is an equational class. In other terms, a class `𝒦` of algebras is closed under the operators `H`, `S`, and `P` if and only if 𝒦 is the class of algebras that satisfy some set of identities.

<pre class="Agda">

<a id="816" class="Symbol">{-#</a> <a id="820" class="Keyword">OPTIONS</a> <a id="828" class="Pragma">--without-K</a> <a id="840" class="Pragma">--exact-split</a> <a id="854" class="Pragma">--safe</a> <a id="861" class="Symbol">#-}</a>


<a id="867" class="Keyword">open</a> <a id="872" class="Keyword">import</a> <a id="879" href="Level.html" class="Module">Level</a> <a id="885" class="Keyword">renaming</a> <a id="894" class="Symbol">(</a> <a id="896" href="Agda.Primitive.html#780" class="Primitive">suc</a> <a id="900" class="Symbol">to</a> <a id="903" class="Primitive">lsuc</a> <a id="908" class="Symbol">)</a>
<a id="910" class="Keyword">open</a> <a id="915" class="Keyword">import</a> <a id="922" href="Base.Algebras.Basic.html" class="Module">Base.Algebras.Basic</a> <a id="942" class="Keyword">using</a> <a id="948" class="Symbol">(</a> <a id="950" href="Base.Algebras.Basic.html#1160" class="Generalizable">𝓞</a> <a id="952" class="Symbol">;</a> <a id="954" href="Base.Algebras.Basic.html#1162" class="Generalizable">𝓥</a> <a id="956" class="Symbol">;</a> <a id="958" href="Base.Algebras.Basic.html#3888" class="Function">Signature</a> <a id="968" class="Symbol">)</a>

<a id="971" class="Keyword">module</a> <a id="978" href="Base.Varieties.FreeAlgebras.html" class="Module">Base.Varieties.FreeAlgebras</a> <a id="1006" class="Symbol">{</a><a id="1007" href="Base.Varieties.FreeAlgebras.html#1007" class="Bound">α</a> <a id="1009" href="Base.Varieties.FreeAlgebras.html#1009" class="Bound">𝓞</a> <a id="1011" href="Base.Varieties.FreeAlgebras.html#1011" class="Bound">𝓥</a> <a id="1013" class="Symbol">:</a> <a id="1015" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="1020" class="Symbol">}</a> <a id="1022" class="Symbol">(</a><a id="1023" href="Base.Varieties.FreeAlgebras.html#1023" class="Bound">𝑆</a> <a id="1025" class="Symbol">:</a> <a id="1027" href="Base.Algebras.Basic.html#3888" class="Function">Signature</a> <a id="1037" href="Base.Varieties.FreeAlgebras.html#1009" class="Bound">𝓞</a> <a id="1039" href="Base.Varieties.FreeAlgebras.html#1011" class="Bound">𝓥</a><a id="1040" class="Symbol">)</a> <a id="1042" class="Keyword">where</a>

<a id="1049" class="Comment">-- Imports from Agda and the Agda Standard Library ---------------------</a>
<a id="1122" class="Keyword">open</a> <a id="1127" class="Keyword">import</a> <a id="1134" href="Axiom.Extensionality.Propositional.html" class="Module">Axiom.Extensionality.Propositional</a>
                            <a id="1197" class="Keyword">using</a> <a id="1203" class="Symbol">()</a> <a id="1206" class="Keyword">renaming</a> <a id="1215" class="Symbol">(</a><a id="1216" href="Axiom.Extensionality.Propositional.html#741" class="Function">Extensionality</a> <a id="1231" class="Symbol">to</a> <a id="1234" class="Function">funext</a><a id="1240" class="Symbol">)</a>
<a id="1242" class="Keyword">open</a> <a id="1247" class="Keyword">import</a> <a id="1254" href="Agda.Primitive.html" class="Module">Agda.Primitive</a>  <a id="1270" class="Keyword">using</a> <a id="1276" class="Symbol">(</a> <a id="1278" href="Agda.Primitive.html#810" class="Primitive Operator">_⊔_</a> <a id="1282" class="Symbol">)</a> <a id="1284" class="Keyword">renaming</a> <a id="1293" class="Symbol">(</a> <a id="1295" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="1299" class="Symbol">to</a> <a id="1302" class="Primitive">Type</a> <a id="1307" class="Symbol">)</a>
<a id="1309" class="Keyword">open</a> <a id="1314" class="Keyword">import</a> <a id="1321" href="Data.Product.html" class="Module">Data.Product</a>    <a id="1337" class="Keyword">using</a> <a id="1343" class="Symbol">(</a> <a id="1345" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">_,_</a> <a id="1349" class="Symbol">;</a> <a id="1351" href="Data.Product.html#916" class="Function">Σ-syntax</a> <a id="1360" class="Symbol">;</a> <a id="1362" href="Data.Product.html#1167" class="Function Operator">_×_</a> <a id="1366" class="Symbol">)</a> <a id="1368" class="Keyword">renaming</a> <a id="1377" class="Symbol">(</a> <a id="1379" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="1385" class="Symbol">to</a> <a id="1388" class="Field">fst</a> <a id="1392" class="Symbol">;</a> <a id="1394" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="1400" class="Symbol">to</a> <a id="1403" class="Field">snd</a> <a id="1407" class="Symbol">)</a>
<a id="1409" class="Keyword">open</a> <a id="1414" class="Keyword">import</a> <a id="1421" href="Function.Base.html" class="Module">Function.Base</a>   <a id="1437" class="Keyword">using</a> <a id="1443" class="Symbol">(</a> <a id="1445" href="Function.Base.html#1031" class="Function Operator">_∘_</a> <a id="1449" class="Symbol">)</a>
<a id="1451" class="Keyword">open</a> <a id="1456" class="Keyword">import</a> <a id="1463" href="Relation.Binary.html" class="Module">Relation.Binary</a> <a id="1479" class="Keyword">using</a> <a id="1485" class="Symbol">(</a> <a id="1487" href="Relation.Binary.Structures.html#1522" class="Record">IsEquivalence</a> <a id="1501" class="Symbol">)</a> <a id="1503" class="Keyword">renaming</a> <a id="1512" class="Symbol">(</a> <a id="1514" href="Relation.Binary.Core.html#882" class="Function">Rel</a> <a id="1518" class="Symbol">to</a> <a id="1521" class="Function">BinRel</a> <a id="1528" class="Symbol">)</a>
<a id="1530" class="Keyword">open</a> <a id="1535" class="Keyword">import</a> <a id="1542" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a>
                            <a id="1608" class="Keyword">using</a> <a id="1614" class="Symbol">(</a> <a id="1616" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">_≡_</a> <a id="1620" class="Symbol">;</a> <a id="1622" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="1627" class="Symbol">;</a> <a id="1629" href="Relation.Binary.PropositionalEquality.Core.html#1130" class="Function">cong</a> <a id="1634" class="Symbol">;</a> <a id="1636" href="Relation.Binary.PropositionalEquality.Core.html#1461" class="Function">cong-app</a> <a id="1645" class="Symbol">;</a> <a id="1647" class="Keyword">module</a> <a id="1654" href="Relation.Binary.PropositionalEquality.Core.html#2708" class="Module">≡-Reasoning</a> <a id="1666" class="Symbol">)</a>
<a id="1668" class="Keyword">open</a> <a id="1673" class="Keyword">import</a> <a id="1680" href="Relation.Unary.html" class="Module">Relation.Unary</a>  <a id="1696" class="Keyword">using</a>    <a id="1705" class="Symbol">(</a> <a id="1707" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="1712" class="Symbol">;</a> <a id="1714" href="Relation.Unary.html#1523" class="Function Operator">_∈_</a> <a id="1718" class="Symbol">;</a> <a id="1720" href="Relation.Unary.html#1742" class="Function Operator">_⊆_</a> <a id="1724" class="Symbol">;</a> <a id="1726" href="Relation.Unary.html#1335" class="Function Operator">｛_｝</a> <a id="1730" class="Symbol">;</a> <a id="1732" href="Relation.Unary.html#4417" class="Function Operator">_∪_</a> <a id="1736" class="Symbol">)</a>

<a id="1739" class="Comment">-- Imports from the Agda Universal Algebra Library -------------------------------------------</a>
<a id="1834" class="Keyword">open</a> <a id="1839" class="Keyword">import</a> <a id="1846" href="Base.Overture.Preliminaries.html" class="Module">Base.Overture.Preliminaries</a>             <a id="1886" class="Keyword">using</a> <a id="1892" class="Symbol">(</a> <a id="1894" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣_∣</a> <a id="1898" class="Symbol">;</a> <a id="1900" href="Base.Overture.Preliminaries.html#4435" class="Function Operator">∥_∥</a> <a id="1904" class="Symbol">;</a> <a id="1906" href="Base.Overture.Preliminaries.html#5316" class="Function Operator">_∙_</a> <a id="1910" class="Symbol">;</a> <a id="1912" href="Base.Overture.Preliminaries.html#4990" class="Function Operator">_⁻¹</a> <a id="1916" class="Symbol">)</a>
<a id="1918" class="Keyword">open</a> <a id="1923" class="Keyword">import</a> <a id="1930" href="Base.Overture.Surjective.html" class="Module">Base.Overture.Surjective</a>                <a id="1970" class="Keyword">using</a> <a id="1976" class="Symbol">(</a> <a id="1978" href="Base.Overture.Surjective.html#1692" class="Function">IsSurjective</a> <a id="1991" class="Symbol">)</a>
<a id="1993" class="Keyword">open</a> <a id="1998" class="Keyword">import</a> <a id="2005" href="Base.Relations.Discrete.html" class="Module">Base.Relations.Discrete</a>                 <a id="2045" class="Keyword">using</a> <a id="2051" class="Symbol">(</a> <a id="2053" href="Base.Relations.Discrete.html#4539" class="Function">kernel</a> <a id="2060" class="Symbol">)</a>
<a id="2062" class="Keyword">open</a> <a id="2067" class="Keyword">import</a> <a id="2074" href="Base.Relations.Quotients.html" class="Module">Base.Relations.Quotients</a>                <a id="2114" class="Keyword">using</a> <a id="2120" class="Symbol">(</a> <a id="2122" href="Base.Relations.Quotients.html#5406" class="Function Operator">⟪_⟫</a> <a id="2126" class="Symbol">)</a>
<a id="2128" class="Keyword">open</a> <a id="2133" class="Keyword">import</a> <a id="2140" href="Base.Equality.Welldefined.html" class="Module">Base.Equality.Welldefined</a>               <a id="2180" class="Keyword">using</a> <a id="2186" class="Symbol">(</a> <a id="2188" href="Base.Equality.Welldefined.html#2969" class="Function">SwellDef</a> <a id="2197" class="Symbol">;</a> <a id="2199" href="Base.Equality.Welldefined.html#2671" class="Function">swelldef</a> <a id="2208" class="Symbol">)</a>
<a id="2210" class="Keyword">open</a> <a id="2215" class="Keyword">import</a> <a id="2222" href="Base.Equality.Truncation.html" class="Module">Base.Equality.Truncation</a>                <a id="2262" class="Keyword">using</a> <a id="2268" class="Symbol">(</a> <a id="2270" href="Base.Equality.Truncation.html#6541" class="Function">is-set</a> <a id="2277" class="Symbol">;</a> <a id="2279" href="Base.Equality.Truncation.html#10799" class="Function">blk-uip</a> <a id="2287" class="Symbol">;</a> <a id="2289" href="Base.Equality.Truncation.html#3890" class="Function">hfunext</a> <a id="2297" class="Symbol">)</a>
<a id="2299" class="Keyword">open</a> <a id="2304" class="Keyword">import</a> <a id="2311" href="Base.Equality.Extensionality.html" class="Module">Base.Equality.Extensionality</a>            <a id="2351" class="Keyword">using</a> <a id="2357" class="Symbol">(</a> <a id="2359" href="Base.Equality.Extensionality.html#2294" class="Function">DFunExt</a><a id="2366" class="Symbol">;</a> <a id="2368" href="Base.Equality.Extensionality.html#3111" class="Function">pred-ext</a> <a id="2377" class="Symbol">)</a>
<a id="2379" class="Keyword">open</a> <a id="2384" class="Keyword">import</a> <a id="2391" href="Base.Algebras.Basic.html" class="Module">Base.Algebras.Basic</a>                     <a id="2431" class="Keyword">using</a> <a id="2437" class="Symbol">(</a> <a id="2439" href="Base.Algebras.Basic.html#6252" class="Function">Algebra</a> <a id="2447" class="Symbol">;</a> <a id="2449" href="Base.Algebras.Basic.html#10888" class="Function">Lift-Alg</a> <a id="2458" class="Symbol">;</a> <a id="2460" href="Base.Algebras.Basic.html#12438" class="Function">compatible</a> <a id="2471" class="Symbol">;</a> <a id="2473" href="Base.Algebras.Basic.html#9427" class="Function Operator">_̂_</a> <a id="2477" class="Symbol">)</a>
<a id="2479" class="Keyword">open</a> <a id="2484" class="Keyword">import</a> <a id="2491" href="Base.Algebras.Products.html" class="Module">Base.Algebras.Products</a>          <a id="2523" class="Symbol">{</a><a id="2524" class="Argument">𝑆</a> <a id="2526" class="Symbol">=</a> <a id="2528" href="Base.Varieties.FreeAlgebras.html#1023" class="Bound">𝑆</a><a id="2529" class="Symbol">}</a> <a id="2531" class="Keyword">using</a> <a id="2537" class="Symbol">(</a> <a id="2539" href="Base.Algebras.Products.html#3165" class="Function">ov</a> <a id="2542" class="Symbol">;</a> <a id="2544" href="Base.Algebras.Products.html#1899" class="Function">⨅</a> <a id="2546" class="Symbol">)</a>
<a id="2548" class="Keyword">open</a> <a id="2553" class="Keyword">import</a> <a id="2560" href="Base.Algebras.Congruences.html" class="Module">Base.Algebras.Congruences</a>       <a id="2592" class="Symbol">{</a><a id="2593" class="Argument">𝑆</a> <a id="2595" class="Symbol">=</a> <a id="2597" href="Base.Varieties.FreeAlgebras.html#1023" class="Bound">𝑆</a><a id="2598" class="Symbol">}</a> <a id="2600" class="Keyword">using</a> <a id="2606" class="Symbol">(</a> <a id="2608" href="Base.Algebras.Congruences.html#2039" class="Function">Con</a><a id="2611" class="Symbol">;</a> <a id="2613" href="Base.Algebras.Congruences.html#1941" class="InductiveConstructor">mkcon</a> <a id="2619" class="Symbol">;</a> <a id="2621" href="Base.Algebras.Congruences.html#1853" class="Record">IsCongruence</a> <a id="2634" class="Symbol">)</a>
<a id="2636" class="Keyword">open</a> <a id="2641" class="Keyword">import</a> <a id="2648" href="Base.Homomorphisms.Basic.html" class="Module">Base.Homomorphisms.Basic</a>        <a id="2680" class="Symbol">{</a><a id="2681" class="Argument">𝑆</a> <a id="2683" class="Symbol">=</a> <a id="2685" href="Base.Varieties.FreeAlgebras.html#1023" class="Bound">𝑆</a><a id="2686" class="Symbol">}</a> <a id="2688" class="Keyword">using</a> <a id="2694" class="Symbol">(</a> <a id="2696" href="Base.Homomorphisms.Basic.html#2682" class="Function">hom</a> <a id="2700" class="Symbol">;</a> <a id="2702" href="Base.Homomorphisms.Basic.html#4326" class="Function">epi</a> <a id="2706" class="Symbol">;</a> <a id="2708" href="Base.Homomorphisms.Basic.html#4787" class="Function">epi→hom</a> <a id="2716" class="Symbol">)</a>
<a id="2718" class="Keyword">open</a> <a id="2723" class="Keyword">import</a> <a id="2730" href="Base.Homomorphisms.Kernels.html" class="Module">Base.Homomorphisms.Kernels</a>      <a id="2762" class="Symbol">{</a><a id="2763" class="Argument">𝑆</a> <a id="2765" class="Symbol">=</a> <a id="2767" href="Base.Varieties.FreeAlgebras.html#1023" class="Bound">𝑆</a><a id="2768" class="Symbol">}</a> <a id="2770" class="Keyword">using</a> <a id="2776" class="Symbol">(</a> <a id="2778" href="Base.Homomorphisms.Kernels.html#2677" class="Function">kercon</a> <a id="2785" class="Symbol">;</a> <a id="2787" href="Base.Homomorphisms.Kernels.html#5083" class="Function">ker-in-con</a> <a id="2798" class="Symbol">;</a> <a id="2800" href="Base.Homomorphisms.Kernels.html#4574" class="Function">πker</a> <a id="2805" class="Symbol">;</a> <a id="2807" href="Base.Homomorphisms.Kernels.html#3085" class="Function Operator">ker[_⇒_]_↾_</a> <a id="2819" class="Symbol">)</a>
<a id="2821" class="Keyword">open</a> <a id="2826" class="Keyword">import</a> <a id="2833" href="Base.Homomorphisms.Products.html" class="Module">Base.Homomorphisms.Products</a>     <a id="2865" class="Symbol">{</a><a id="2866" class="Argument">𝑆</a> <a id="2868" class="Symbol">=</a> <a id="2870" href="Base.Varieties.FreeAlgebras.html#1023" class="Bound">𝑆</a><a id="2871" class="Symbol">}</a> <a id="2873" class="Keyword">using</a> <a id="2879" class="Symbol">(</a> <a id="2881" href="Base.Homomorphisms.Products.html#1651" class="Function">⨅-hom-co</a> <a id="2890" class="Symbol">)</a>
<a id="2892" class="Keyword">open</a> <a id="2897" class="Keyword">import</a> <a id="2904" href="Base.Homomorphisms.Properties.html" class="Module">Base.Homomorphisms.Properties</a>   <a id="2936" class="Symbol">{</a><a id="2937" class="Argument">𝑆</a> <a id="2939" class="Symbol">=</a> <a id="2941" href="Base.Varieties.FreeAlgebras.html#1023" class="Bound">𝑆</a><a id="2942" class="Symbol">}</a> <a id="2944" class="Keyword">using</a> <a id="2950" class="Symbol">(</a> <a id="2952" href="Base.Homomorphisms.Properties.html#1396" class="Function">∘-hom</a> <a id="2958" class="Symbol">)</a>
<a id="2960" class="Keyword">open</a> <a id="2965" class="Keyword">import</a> <a id="2972" href="Base.Homomorphisms.Factor.html" class="Module">Base.Homomorphisms.Factor</a>       <a id="3004" class="Symbol">{</a><a id="3005" class="Argument">𝑆</a> <a id="3007" class="Symbol">=</a> <a id="3009" href="Base.Varieties.FreeAlgebras.html#1023" class="Bound">𝑆</a><a id="3010" class="Symbol">}</a> <a id="3012" class="Keyword">using</a> <a id="3018" class="Symbol">(</a> <a id="3020" href="Base.Homomorphisms.Factor.html#1852" class="Function">HomFactor</a> <a id="3030" class="Symbol">;</a> <a id="3032" href="Base.Homomorphisms.Factor.html#3126" class="Function">HomFactorEpi</a> <a id="3045" class="Symbol">)</a>
<a id="3047" class="Keyword">open</a> <a id="3052" class="Keyword">import</a> <a id="3059" href="Base.Homomorphisms.Isomorphisms.html" class="Module">Base.Homomorphisms.Isomorphisms</a> <a id="3091" class="Symbol">{</a><a id="3092" class="Argument">𝑆</a> <a id="3094" class="Symbol">=</a> <a id="3096" href="Base.Varieties.FreeAlgebras.html#1023" class="Bound">𝑆</a><a id="3097" class="Symbol">}</a> <a id="3099" class="Keyword">using</a> <a id="3105" class="Symbol">(</a> <a id="3107" href="Base.Homomorphisms.Isomorphisms.html#2378" class="Record Operator">_≅_</a> <a id="3111" class="Symbol">;</a> <a id="3113" href="Base.Homomorphisms.Isomorphisms.html#2919" class="Function">≅-refl</a> <a id="3120" class="Symbol">;</a> <a id="3122" href="Base.Homomorphisms.Isomorphisms.html#3009" class="Function">≅-sym</a> <a id="3128" class="Symbol">;</a> <a id="3130" href="Base.Homomorphisms.Isomorphisms.html#4453" class="Function">Lift-≅</a> <a id="3137" class="Symbol">)</a>
<a id="3139" class="Keyword">open</a> <a id="3144" class="Keyword">import</a> <a id="3151" href="Base.Terms.Basic.html" class="Module">Base.Terms.Basic</a>                <a id="3183" class="Symbol">{</a><a id="3184" class="Argument">𝑆</a> <a id="3186" class="Symbol">=</a> <a id="3188" href="Base.Varieties.FreeAlgebras.html#1023" class="Bound">𝑆</a><a id="3189" class="Symbol">}</a> <a id="3191" class="Keyword">using</a> <a id="3197" class="Symbol">(</a> <a id="3199" href="Base.Terms.Basic.html#2021" class="Datatype">Term</a> <a id="3204" class="Symbol">;</a> <a id="3206" href="Base.Terms.Basic.html#3304" class="Function">𝑻</a> <a id="3208" class="Symbol">)</a>
<a id="3210" class="Keyword">open</a> <a id="3215" class="Keyword">import</a> <a id="3222" href="Base.Terms.Properties.html" class="Module">Base.Terms.Properties</a>           <a id="3254" class="Symbol">{</a><a id="3255" class="Argument">𝑆</a> <a id="3257" class="Symbol">=</a> <a id="3259" href="Base.Varieties.FreeAlgebras.html#1023" class="Bound">𝑆</a><a id="3260" class="Symbol">}</a> <a id="3262" class="Keyword">using</a> <a id="3268" class="Symbol">(</a> <a id="3270" href="Base.Terms.Properties.html#2589" class="Function">free-lift</a> <a id="3280" class="Symbol">;</a> <a id="3282" href="Base.Terms.Properties.html#3296" class="Function">lift-hom</a> <a id="3291" class="Symbol">)</a>
                                                    <a id="3345" class="Keyword">using</a> <a id="3351" class="Symbol">(</a> <a id="3353" href="Base.Terms.Properties.html#3695" class="Function">free-unique</a> <a id="3365" class="Symbol">;</a> <a id="3367" href="Base.Terms.Properties.html#4901" class="Function">lift-of-epi-is-epi</a> <a id="3386" class="Symbol">)</a>
<a id="3388" class="Keyword">open</a> <a id="3393" class="Keyword">import</a> <a id="3400" href="Base.Terms.Operations.html" class="Module">Base.Terms.Operations</a>           <a id="3432" class="Symbol">{</a><a id="3433" class="Argument">𝑆</a> <a id="3435" class="Symbol">=</a> <a id="3437" href="Base.Varieties.FreeAlgebras.html#1023" class="Bound">𝑆</a><a id="3438" class="Symbol">}</a> <a id="3440" class="Keyword">using</a> <a id="3446" class="Symbol">(</a> <a id="3448" href="Base.Terms.Operations.html#2637" class="Function Operator">_⟦_⟧</a><a id="3452" class="Symbol">;</a> <a id="3454" href="Base.Terms.Operations.html#6644" class="Function">comm-hom-term</a><a id="3467" class="Symbol">;</a> <a id="3469" href="Base.Terms.Operations.html#2948" class="Function">free-lift-interp</a> <a id="3486" class="Symbol">)</a>
<a id="3488" class="Keyword">open</a> <a id="3493" class="Keyword">import</a> <a id="3500" href="Base.Subalgebras.Subalgebras.html" class="Module">Base.Subalgebras.Subalgebras</a>    <a id="3532" class="Symbol">{</a><a id="3533" class="Argument">𝑆</a> <a id="3535" class="Symbol">=</a> <a id="3537" href="Base.Varieties.FreeAlgebras.html#1023" class="Bound">𝑆</a><a id="3538" class="Symbol">}</a> <a id="3540" class="Keyword">using</a> <a id="3546" class="Symbol">(</a> <a id="3548" href="Base.Subalgebras.Subalgebras.html#2266" class="Function Operator">_≤_</a> <a id="3552" class="Symbol">;</a> <a id="3554" href="Base.Subalgebras.Subalgebras.html#4092" class="Function">FirstHomCorollary|Set</a> <a id="3576" class="Symbol">)</a>
<a id="3578" class="Keyword">open</a> <a id="3583" class="Keyword">import</a> <a id="3590" href="Base.Varieties.EquationalLogic.html" class="Module">Base.Varieties.EquationalLogic</a>  <a id="3622" class="Symbol">{</a><a id="3623" class="Argument">𝑆</a> <a id="3625" class="Symbol">=</a> <a id="3627" href="Base.Varieties.FreeAlgebras.html#1023" class="Bound">𝑆</a><a id="3628" class="Symbol">}</a> <a id="3630" class="Keyword">using</a> <a id="3636" class="Symbol">(</a> <a id="3638" href="Base.Varieties.EquationalLogic.html#2766" class="Function Operator">_⊫_≈_</a><a id="3643" class="Symbol">;</a> <a id="3645" href="Base.Varieties.EquationalLogic.html#2688" class="Function Operator">_⊧_≈_</a><a id="3650" class="Symbol">;</a> <a id="3652" href="Base.Varieties.EquationalLogic.html#3560" class="Function">Th</a><a id="3654" class="Symbol">;</a> <a id="3656" href="Base.Varieties.EquationalLogic.html#4134" class="Function">Mod</a> <a id="3660" class="Symbol">)</a>
<a id="3662" class="Keyword">open</a> <a id="3667" class="Keyword">import</a> <a id="3674" href="Base.Varieties.Closure.html" class="Module">Base.Varieties.Closure</a>          <a id="3706" class="Symbol">{</a><a id="3707" class="Argument">𝑆</a> <a id="3709" class="Symbol">=</a> <a id="3711" href="Base.Varieties.FreeAlgebras.html#1023" class="Bound">𝑆</a><a id="3712" class="Symbol">}</a> <a id="3714" class="Keyword">using</a> <a id="3720" class="Symbol">(</a> <a id="3722" href="Base.Varieties.Closure.html#4058" class="Datatype">S</a> <a id="3724" class="Symbol">;</a> <a id="3726" href="Base.Varieties.Closure.html#4634" class="Datatype">P</a> <a id="3728" class="Symbol">;</a> <a id="3730" href="Base.Varieties.Closure.html#5587" class="Datatype">V</a> <a id="3732" class="Symbol">)</a>
<a id="3734" class="Keyword">open</a> <a id="3739" class="Keyword">import</a> <a id="3746" href="Base.Varieties.Preservation.html" class="Module">Base.Varieties.Preservation</a>     <a id="3778" class="Symbol">{</a><a id="3779" class="Argument">𝑆</a> <a id="3781" class="Symbol">=</a> <a id="3783" href="Base.Varieties.FreeAlgebras.html#1023" class="Bound">𝑆</a><a id="3784" class="Symbol">}</a> <a id="3786" class="Keyword">using</a> <a id="3792" class="Symbol">(</a> <a id="3794" class="Keyword">module</a> <a id="3801" href="Base.Varieties.Preservation.html#10687" class="Module">class-products-with-maps</a> <a id="3826" class="Symbol">)</a>
                                                    <a id="3880" class="Keyword">using</a> <a id="3886" class="Symbol">(</a> <a id="3888" href="Base.Varieties.Preservation.html#20608" class="Function">class-ids-⇒</a> <a id="3900" class="Symbol">;</a> <a id="3902" href="Base.Varieties.Preservation.html#20721" class="Function">class-ids</a> <a id="3912" class="Symbol">;</a> <a id="3914" href="Base.Varieties.Preservation.html#9502" class="Function">SP⊆V&#39;</a><a id="3919" class="Symbol">)</a>
<a id="3921" class="Keyword">open</a> <a id="3926" href="Base.Terms.Basic.html#2021" class="Module">Term</a>
<a id="3931" class="Keyword">open</a> <a id="3936" href="Base.Varieties.Closure.html#4058" class="Module">S</a>
<a id="3938" class="Keyword">open</a> <a id="3943" href="Base.Varieties.Closure.html#5587" class="Module">V</a>

<a id="𝓕"></a><a id="3946" href="Base.Varieties.FreeAlgebras.html#3946" class="Function">𝓕</a> <a id="𝓕⁺"></a><a id="3948" href="Base.Varieties.FreeAlgebras.html#3948" class="Function">𝓕⁺</a> <a id="3951" class="Symbol">:</a> <a id="3953" href="Agda.Primitive.html#597" class="Postulate">Level</a>
<a id="3959" href="Base.Varieties.FreeAlgebras.html#3946" class="Function">𝓕</a> <a id="3961" class="Symbol">=</a> <a id="3963" href="Base.Algebras.Products.html#3165" class="Function">ov</a> <a id="3966" href="Base.Varieties.FreeAlgebras.html#1007" class="Bound">α</a>
<a id="3968" href="Base.Varieties.FreeAlgebras.html#3948" class="Function">𝓕⁺</a> <a id="3971" class="Symbol">=</a> <a id="3973" href="Base.Varieties.FreeAlgebras.html#903" class="Primitive">lsuc</a> <a id="3978" class="Symbol">(</a><a id="3979" href="Base.Algebras.Products.html#3165" class="Function">ov</a> <a id="3982" href="Base.Varieties.FreeAlgebras.html#1007" class="Bound">α</a><a id="3983" class="Symbol">)</a>    <a id="3988" class="Comment">-- (this will be the level of the relatively free algebra)</a>

</pre>


#### <a id="the-free-algebra-in-theory">The free algebra in theory</a>

Recall, we proved in the [Terms.Basic][] module that the term algebra `𝑻 X` is absolutely free in the class of all `𝑆`-structures.
In this section, we formalize, for a given class `𝒦` of `𝑆`-algebras, the (relatively) free algebra in `S(P 𝒦)` over `X`.

We use the next definition to take a free algebra *for* a class `𝒦` and produce the free algebra *in* `𝒦`.
Let `Θ(𝒦, 𝑨) := {θ ∈ Con 𝑨 : 𝑨 / θ ∈ (S 𝒦)}`, and let `ψ(𝒦, 𝑨) := ⋂ Θ(𝒦, 𝑨)`.
(Notice that `Θ(𝒦, 𝑨)` may be empty, in which case `ψ(𝒦, 𝑨) = 1` and then `𝑨 / ψ(𝒦, 𝑨)` is trivial.)
The free algebra is constructed by applying the definitions of `θ` and `ψ` to the special case in which `𝑨` is the algebra `𝑻 X` of `𝑆`-terms over `X`.

Since `𝑻 X` is free for (and in) the class of all `𝑆`-algebras, it follows that `𝑻 X` is free for every class `𝒦` of `𝑆`-algebras. Of course, `𝑻 X` is not necessarily a member of `𝒦`, but if we form the quotient of `𝑻 X` modulo the congruence `ψ(𝒦, 𝑻 X)`, which we denote by `𝔽[ X ] := (𝑻 X) / ψ(𝒦, 𝑻 X)`, then it's not hard to see that `𝔽[ X ]` is a subdirect product of the algebras in `{(𝑻 𝑋) / θ}`, where `θ` ranges over `Θ(𝒦, 𝑻 X)`, so `𝔽[ X ]` belongs to `SP(𝒦)`, and must therefore satisfy all identities modeled by all members of `𝒦`.  Indeed, for each pair `p q : 𝑻 X`, if `𝒦 ⊧ p ≈ q`, then `p` and `q` belong to the same `ψ(𝒦, 𝑻 X)`-class, so `p` and `q` are identified in the quotient `𝔽[ X ]`.

The `𝔽[ X ]` that we have just defined is called the *free algebra over* `𝒦` *generated by* `X` and (because of what we just observed) we may say that `𝔽[ X ]` is free *in* `SP(𝒦)`.

**Remarks**. Since `X` is not a subset of `𝔽[ X ]`, technically it doesn't make sense to say "`X` generates `𝔽[ X ]`." But as long as 𝒦 contains a nontrivial algebra, we will have `ψ(𝒦, 𝑻 𝑋) ∩ X² ≠ ∅`, and we can identify `X` with `X / ψ(𝒦, 𝑻 X)` which *is* a subset of `𝔽[ X ]`.



#### <a id="the-free-algebra-in-agda">The free algebra in Agda</a>

Before we attempt to represent the free algebra in Agda we construct the congruence `ψ(𝒦, 𝑻 𝑋)` described above.
First, we represent the congruence relation `ψCon`, modulo which `𝑻 X` yields the relatively free algebra, `𝔽[ X ] := 𝑻 X ╱ ψCon`.  We let `ψ` be the collection of identities `(p, q)` satisfied by all subalgebras of algebras in `𝒦`.

<pre class="Agda">

<a id="6428" class="Keyword">module</a> <a id="6435" href="Base.Varieties.FreeAlgebras.html#6435" class="Module">_</a> <a id="6437" class="Symbol">{</a><a id="6438" href="Base.Varieties.FreeAlgebras.html#6438" class="Bound">X</a> <a id="6440" class="Symbol">:</a> <a id="6442" href="Base.Varieties.FreeAlgebras.html#1302" class="Primitive">Type</a> <a id="6447" href="Base.Varieties.FreeAlgebras.html#1007" class="Bound">α</a><a id="6448" class="Symbol">}(</a><a id="6450" href="Base.Varieties.FreeAlgebras.html#6450" class="Bound">𝒦</a> <a id="6452" class="Symbol">:</a> <a id="6454" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="6459" class="Symbol">(</a><a id="6460" href="Base.Algebras.Basic.html#6252" class="Function">Algebra</a> <a id="6468" href="Base.Varieties.FreeAlgebras.html#1007" class="Bound">α</a> <a id="6470" href="Base.Varieties.FreeAlgebras.html#1023" class="Bound">𝑆</a><a id="6471" class="Symbol">)</a> <a id="6473" href="Base.Varieties.FreeAlgebras.html#3946" class="Function">𝓕</a><a id="6474" class="Symbol">)</a> <a id="6476" class="Keyword">where</a>

 <a id="6484" href="Base.Varieties.FreeAlgebras.html#6484" class="Function">ψ</a> <a id="6486" class="Symbol">:</a> <a id="6488" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="6493" class="Symbol">(</a><a id="6494" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="6496" href="Base.Terms.Basic.html#3304" class="Function">𝑻</a> <a id="6498" href="Base.Varieties.FreeAlgebras.html#6438" class="Bound">X</a> <a id="6500" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="6502" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="6504" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="6506" href="Base.Terms.Basic.html#3304" class="Function">𝑻</a> <a id="6508" href="Base.Varieties.FreeAlgebras.html#6438" class="Bound">X</a> <a id="6510" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a><a id="6511" class="Symbol">)</a> <a id="6513" href="Base.Varieties.FreeAlgebras.html#3946" class="Function">𝓕</a>
 <a id="6516" href="Base.Varieties.FreeAlgebras.html#6484" class="Function">ψ</a> <a id="6518" class="Symbol">(</a><a id="6519" href="Base.Varieties.FreeAlgebras.html#6519" class="Bound">p</a> <a id="6521" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="6523" href="Base.Varieties.FreeAlgebras.html#6523" class="Bound">q</a><a id="6524" class="Symbol">)</a> <a id="6526" class="Symbol">=</a> <a id="6528" class="Symbol">∀(</a><a id="6530" href="Base.Varieties.FreeAlgebras.html#6530" class="Bound">𝑨</a> <a id="6532" class="Symbol">:</a> <a id="6534" href="Base.Algebras.Basic.html#6252" class="Function">Algebra</a> <a id="6542" href="Base.Varieties.FreeAlgebras.html#1007" class="Bound">α</a> <a id="6544" href="Base.Varieties.FreeAlgebras.html#1023" class="Bound">𝑆</a><a id="6545" class="Symbol">)(</a><a id="6547" href="Base.Varieties.FreeAlgebras.html#6547" class="Bound">sA</a> <a id="6550" class="Symbol">:</a> <a id="6552" href="Base.Varieties.FreeAlgebras.html#6530" class="Bound">𝑨</a> <a id="6554" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="6556" href="Base.Varieties.Closure.html#4058" class="Datatype">S</a><a id="6557" class="Symbol">{</a><a id="6558" href="Base.Varieties.FreeAlgebras.html#1007" class="Bound">α</a><a id="6559" class="Symbol">}{</a><a id="6561" href="Base.Varieties.FreeAlgebras.html#1007" class="Bound">α</a><a id="6562" class="Symbol">}</a> <a id="6564" href="Base.Varieties.FreeAlgebras.html#6450" class="Bound">𝒦</a><a id="6565" class="Symbol">)(</a><a id="6567" href="Base.Varieties.FreeAlgebras.html#6567" class="Bound">h</a> <a id="6569" class="Symbol">:</a> <a id="6571" href="Base.Varieties.FreeAlgebras.html#6438" class="Bound">X</a> <a id="6573" class="Symbol">→</a> <a id="6575" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="6577" href="Base.Varieties.FreeAlgebras.html#6530" class="Bound">𝑨</a> <a id="6579" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="6581" class="Symbol">)</a>
                 <a id="6600" class="Symbol">→</a>  <a id="6603" class="Symbol">(</a><a id="6604" href="Base.Terms.Properties.html#2589" class="Function">free-lift</a> <a id="6614" href="Base.Varieties.FreeAlgebras.html#6530" class="Bound">𝑨</a> <a id="6616" href="Base.Varieties.FreeAlgebras.html#6567" class="Bound">h</a><a id="6617" class="Symbol">)</a> <a id="6619" href="Base.Varieties.FreeAlgebras.html#6519" class="Bound">p</a> <a id="6621" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="6623" class="Symbol">(</a><a id="6624" href="Base.Terms.Properties.html#2589" class="Function">free-lift</a> <a id="6634" href="Base.Varieties.FreeAlgebras.html#6530" class="Bound">𝑨</a> <a id="6636" href="Base.Varieties.FreeAlgebras.html#6567" class="Bound">h</a><a id="6637" class="Symbol">)</a> <a id="6639" href="Base.Varieties.FreeAlgebras.html#6523" class="Bound">q</a>

</pre>

We convert the predicate ψ into a relation by [currying](https://en.wikipedia.org/wiki/Currying).

<pre class="Agda">

 <a id="6768" href="Base.Varieties.FreeAlgebras.html#6768" class="Function">ψRel</a> <a id="6773" class="Symbol">:</a> <a id="6775" href="Base.Varieties.FreeAlgebras.html#1521" class="Function">BinRel</a> <a id="6782" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="6784" href="Base.Terms.Basic.html#3304" class="Function">𝑻</a> <a id="6786" href="Base.Varieties.FreeAlgebras.html#6438" class="Bound">X</a> <a id="6788" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="6790" href="Base.Varieties.FreeAlgebras.html#3946" class="Function">𝓕</a>
 <a id="6793" href="Base.Varieties.FreeAlgebras.html#6768" class="Function">ψRel</a> <a id="6798" href="Base.Varieties.FreeAlgebras.html#6798" class="Bound">p</a> <a id="6800" href="Base.Varieties.FreeAlgebras.html#6800" class="Bound">q</a> <a id="6802" class="Symbol">=</a> <a id="6804" href="Base.Varieties.FreeAlgebras.html#6484" class="Function">ψ</a> <a id="6806" class="Symbol">(</a><a id="6807" href="Base.Varieties.FreeAlgebras.html#6798" class="Bound">p</a> <a id="6809" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="6811" href="Base.Varieties.FreeAlgebras.html#6800" class="Bound">q</a><a id="6812" class="Symbol">)</a>

</pre>

To express `ψRel` as a congruence of the term algebra `𝑻 X`, we must prove that

1. `ψRel` is compatible with the operations of `𝑻 X` (which are jsut the terms themselves) and
2. `ψRel` it is an equivalence relation.

<pre class="Agda">

 <a id="7060" class="Keyword">open</a> <a id="7065" href="Relation.Binary.PropositionalEquality.Core.html#2708" class="Module">≡-Reasoning</a>

 <a id="7079" href="Base.Varieties.FreeAlgebras.html#7079" class="Function">ψcompatible</a> <a id="7091" class="Symbol">:</a> <a id="7093" href="Base.Equality.Welldefined.html#2671" class="Function">swelldef</a> <a id="7102" href="Base.Varieties.FreeAlgebras.html#1011" class="Bound">𝓥</a> <a id="7104" href="Base.Varieties.FreeAlgebras.html#1007" class="Bound">α</a> <a id="7106" class="Symbol">→</a> <a id="7108" href="Base.Algebras.Basic.html#12438" class="Function">compatible</a> <a id="7119" class="Symbol">(</a><a id="7120" href="Base.Terms.Basic.html#3304" class="Function">𝑻</a> <a id="7122" href="Base.Varieties.FreeAlgebras.html#6438" class="Bound">X</a><a id="7123" class="Symbol">)</a> <a id="7125" href="Base.Varieties.FreeAlgebras.html#6768" class="Function">ψRel</a>
 <a id="7131" href="Base.Varieties.FreeAlgebras.html#7079" class="Function">ψcompatible</a> <a id="7143" href="Base.Varieties.FreeAlgebras.html#7143" class="Bound">wd</a> <a id="7146" href="Base.Varieties.FreeAlgebras.html#7146" class="Bound">𝑓</a> <a id="7148" class="Symbol">{</a><a id="7149" href="Base.Varieties.FreeAlgebras.html#7149" class="Bound">p</a><a id="7150" class="Symbol">}</a> <a id="7152" class="Symbol">{</a><a id="7153" href="Base.Varieties.FreeAlgebras.html#7153" class="Bound">q</a><a id="7154" class="Symbol">}</a> <a id="7156" href="Base.Varieties.FreeAlgebras.html#7156" class="Bound">ψpq</a> <a id="7160" href="Base.Varieties.FreeAlgebras.html#7160" class="Bound">𝑨</a> <a id="7162" href="Base.Varieties.FreeAlgebras.html#7162" class="Bound">sA</a> <a id="7165" href="Base.Varieties.FreeAlgebras.html#7165" class="Bound">h</a> <a id="7167" class="Symbol">=</a> <a id="7169" href="Base.Varieties.FreeAlgebras.html#7219" class="Function">γ</a>
  <a id="7173" class="Keyword">where</a>
  <a id="7181" href="Base.Varieties.FreeAlgebras.html#7181" class="Function">φ</a> <a id="7183" class="Symbol">:</a> <a id="7185" href="Base.Homomorphisms.Basic.html#2682" class="Function">hom</a> <a id="7189" class="Symbol">(</a><a id="7190" href="Base.Terms.Basic.html#3304" class="Function">𝑻</a> <a id="7192" href="Base.Varieties.FreeAlgebras.html#6438" class="Bound">X</a><a id="7193" class="Symbol">)</a> <a id="7195" href="Base.Varieties.FreeAlgebras.html#7160" class="Bound">𝑨</a>
  <a id="7199" href="Base.Varieties.FreeAlgebras.html#7181" class="Function">φ</a> <a id="7201" class="Symbol">=</a> <a id="7203" href="Base.Terms.Properties.html#3296" class="Function">lift-hom</a> <a id="7212" href="Base.Varieties.FreeAlgebras.html#7160" class="Bound">𝑨</a> <a id="7214" href="Base.Varieties.FreeAlgebras.html#7165" class="Bound">h</a>

  <a id="7219" href="Base.Varieties.FreeAlgebras.html#7219" class="Function">γ</a> <a id="7221" class="Symbol">:</a> <a id="7223" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="7225" href="Base.Varieties.FreeAlgebras.html#7181" class="Function">φ</a> <a id="7227" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="7229" class="Symbol">((</a><a id="7231" href="Base.Varieties.FreeAlgebras.html#7146" class="Bound">𝑓</a> <a id="7233" href="Base.Algebras.Basic.html#9427" class="Function Operator">̂</a> <a id="7235" href="Base.Terms.Basic.html#3304" class="Function">𝑻</a> <a id="7237" href="Base.Varieties.FreeAlgebras.html#6438" class="Bound">X</a><a id="7238" class="Symbol">)</a> <a id="7240" href="Base.Varieties.FreeAlgebras.html#7149" class="Bound">p</a><a id="7241" class="Symbol">)</a> <a id="7243" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="7245" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="7247" href="Base.Varieties.FreeAlgebras.html#7181" class="Function">φ</a> <a id="7249" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="7251" class="Symbol">((</a><a id="7253" href="Base.Varieties.FreeAlgebras.html#7146" class="Bound">𝑓</a> <a id="7255" href="Base.Algebras.Basic.html#9427" class="Function Operator">̂</a> <a id="7257" href="Base.Terms.Basic.html#3304" class="Function">𝑻</a> <a id="7259" href="Base.Varieties.FreeAlgebras.html#6438" class="Bound">X</a><a id="7260" class="Symbol">)</a> <a id="7262" href="Base.Varieties.FreeAlgebras.html#7153" class="Bound">q</a><a id="7263" class="Symbol">)</a>

  <a id="7268" href="Base.Varieties.FreeAlgebras.html#7219" class="Function">γ</a> <a id="7270" class="Symbol">=</a> <a id="7272" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="7274" href="Base.Varieties.FreeAlgebras.html#7181" class="Function">φ</a> <a id="7276" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="7278" class="Symbol">((</a><a id="7280" href="Base.Varieties.FreeAlgebras.html#7146" class="Bound">𝑓</a> <a id="7282" href="Base.Algebras.Basic.html#9427" class="Function Operator">̂</a> <a id="7284" href="Base.Terms.Basic.html#3304" class="Function">𝑻</a> <a id="7286" href="Base.Varieties.FreeAlgebras.html#6438" class="Bound">X</a><a id="7287" class="Symbol">)</a> <a id="7289" href="Base.Varieties.FreeAlgebras.html#7149" class="Bound">p</a><a id="7290" class="Symbol">)</a>  <a id="7293" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">≡⟨</a> <a id="7296" href="Base.Overture.Preliminaries.html#4435" class="Function Operator">∥</a> <a id="7298" href="Base.Varieties.FreeAlgebras.html#7181" class="Function">φ</a> <a id="7300" href="Base.Overture.Preliminaries.html#4435" class="Function Operator">∥</a> <a id="7302" href="Base.Varieties.FreeAlgebras.html#7146" class="Bound">𝑓</a> <a id="7304" href="Base.Varieties.FreeAlgebras.html#7149" class="Bound">p</a> <a id="7306" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">⟩</a>
      <a id="7314" class="Symbol">(</a><a id="7315" href="Base.Varieties.FreeAlgebras.html#7146" class="Bound">𝑓</a> <a id="7317" href="Base.Algebras.Basic.html#9427" class="Function Operator">̂</a> <a id="7319" href="Base.Varieties.FreeAlgebras.html#7160" class="Bound">𝑨</a><a id="7320" class="Symbol">)</a> <a id="7322" class="Symbol">(</a><a id="7323" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="7325" href="Base.Varieties.FreeAlgebras.html#7181" class="Function">φ</a> <a id="7327" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="7329" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="7331" href="Base.Varieties.FreeAlgebras.html#7149" class="Bound">p</a><a id="7332" class="Symbol">)</a>  <a id="7335" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">≡⟨</a> <a id="7338" href="Base.Varieties.FreeAlgebras.html#7143" class="Bound">wd</a> <a id="7341" class="Symbol">(</a><a id="7342" href="Base.Varieties.FreeAlgebras.html#7146" class="Bound">𝑓</a> <a id="7344" href="Base.Algebras.Basic.html#9427" class="Function Operator">̂</a> <a id="7346" href="Base.Varieties.FreeAlgebras.html#7160" class="Bound">𝑨</a><a id="7347" class="Symbol">)(</a><a id="7349" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="7351" href="Base.Varieties.FreeAlgebras.html#7181" class="Function">φ</a> <a id="7353" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="7355" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="7357" href="Base.Varieties.FreeAlgebras.html#7149" class="Bound">p</a><a id="7358" class="Symbol">)(</a><a id="7360" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="7362" href="Base.Varieties.FreeAlgebras.html#7181" class="Function">φ</a> <a id="7364" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="7366" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="7368" href="Base.Varieties.FreeAlgebras.html#7153" class="Bound">q</a><a id="7369" class="Symbol">)(λ</a> <a id="7373" href="Base.Varieties.FreeAlgebras.html#7373" class="Bound">x</a> <a id="7375" class="Symbol">→</a> <a id="7377" href="Base.Varieties.FreeAlgebras.html#7156" class="Bound">ψpq</a> <a id="7381" href="Base.Varieties.FreeAlgebras.html#7373" class="Bound">x</a> <a id="7383" href="Base.Varieties.FreeAlgebras.html#7160" class="Bound">𝑨</a> <a id="7385" href="Base.Varieties.FreeAlgebras.html#7162" class="Bound">sA</a> <a id="7388" href="Base.Varieties.FreeAlgebras.html#7165" class="Bound">h</a><a id="7389" class="Symbol">)</a> <a id="7391" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">⟩</a>
      <a id="7399" class="Symbol">(</a><a id="7400" href="Base.Varieties.FreeAlgebras.html#7146" class="Bound">𝑓</a> <a id="7402" href="Base.Algebras.Basic.html#9427" class="Function Operator">̂</a> <a id="7404" href="Base.Varieties.FreeAlgebras.html#7160" class="Bound">𝑨</a><a id="7405" class="Symbol">)</a> <a id="7407" class="Symbol">(</a><a id="7408" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="7410" href="Base.Varieties.FreeAlgebras.html#7181" class="Function">φ</a> <a id="7412" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="7414" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="7416" href="Base.Varieties.FreeAlgebras.html#7153" class="Bound">q</a><a id="7417" class="Symbol">)</a>  <a id="7420" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">≡⟨</a> <a id="7423" class="Symbol">(</a><a id="7424" href="Base.Overture.Preliminaries.html#4435" class="Function Operator">∥</a> <a id="7426" href="Base.Varieties.FreeAlgebras.html#7181" class="Function">φ</a> <a id="7428" href="Base.Overture.Preliminaries.html#4435" class="Function Operator">∥</a> <a id="7430" href="Base.Varieties.FreeAlgebras.html#7146" class="Bound">𝑓</a> <a id="7432" href="Base.Varieties.FreeAlgebras.html#7153" class="Bound">q</a><a id="7433" class="Symbol">)</a><a id="7434" href="Base.Overture.Preliminaries.html#4990" class="Function Operator">⁻¹</a> <a id="7437" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">⟩</a>
      <a id="7445" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="7447" href="Base.Varieties.FreeAlgebras.html#7181" class="Function">φ</a> <a id="7449" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="7451" class="Symbol">((</a><a id="7453" href="Base.Varieties.FreeAlgebras.html#7146" class="Bound">𝑓</a> <a id="7455" href="Base.Algebras.Basic.html#9427" class="Function Operator">̂</a> <a id="7457" href="Base.Terms.Basic.html#3304" class="Function">𝑻</a> <a id="7459" href="Base.Varieties.FreeAlgebras.html#6438" class="Bound">X</a><a id="7460" class="Symbol">)</a> <a id="7462" href="Base.Varieties.FreeAlgebras.html#7153" class="Bound">q</a><a id="7463" class="Symbol">)</a>  <a id="7466" href="Relation.Binary.PropositionalEquality.Core.html#3105" class="Function Operator">∎</a>

 <a id="7470" href="Base.Varieties.FreeAlgebras.html#7470" class="Function">ψIsEquivalence</a> <a id="7485" class="Symbol">:</a> <a id="7487" href="Relation.Binary.Structures.html#1522" class="Record">IsEquivalence</a> <a id="7501" href="Base.Varieties.FreeAlgebras.html#6768" class="Function">ψRel</a>
 <a id="7507" href="Base.Varieties.FreeAlgebras.html#7470" class="Function">ψIsEquivalence</a> <a id="7522" class="Symbol">=</a> <a id="7524" class="Keyword">record</a> <a id="7531" class="Symbol">{</a> <a id="7533" href="Relation.Binary.Structures.html#1568" class="Field">refl</a> <a id="7538" class="Symbol">=</a> <a id="7540" class="Symbol">λ</a> <a id="7542" href="Base.Varieties.FreeAlgebras.html#7542" class="Bound">𝑨</a> <a id="7544" href="Base.Varieties.FreeAlgebras.html#7544" class="Bound">sA</a> <a id="7547" href="Base.Varieties.FreeAlgebras.html#7547" class="Bound">h</a> <a id="7549" class="Symbol">→</a> <a id="7551" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
                         <a id="7581" class="Symbol">;</a> <a id="7583" href="Relation.Binary.Structures.html#1594" class="Field">sym</a> <a id="7587" class="Symbol">=</a> <a id="7589" class="Symbol">λ</a> <a id="7591" href="Base.Varieties.FreeAlgebras.html#7591" class="Bound">x</a> <a id="7593" href="Base.Varieties.FreeAlgebras.html#7593" class="Bound">𝑨</a> <a id="7595" href="Base.Varieties.FreeAlgebras.html#7595" class="Bound">sA</a> <a id="7598" href="Base.Varieties.FreeAlgebras.html#7598" class="Bound">h</a> <a id="7600" class="Symbol">→</a> <a id="7602" class="Symbol">(</a><a id="7603" href="Base.Varieties.FreeAlgebras.html#7591" class="Bound">x</a> <a id="7605" href="Base.Varieties.FreeAlgebras.html#7593" class="Bound">𝑨</a> <a id="7607" href="Base.Varieties.FreeAlgebras.html#7595" class="Bound">sA</a> <a id="7610" href="Base.Varieties.FreeAlgebras.html#7598" class="Bound">h</a><a id="7611" class="Symbol">)</a><a id="7612" href="Base.Overture.Preliminaries.html#4990" class="Function Operator">⁻¹</a>
                         <a id="7640" class="Symbol">;</a> <a id="7642" href="Relation.Binary.Structures.html#1620" class="Field">trans</a> <a id="7648" class="Symbol">=</a> <a id="7650" class="Symbol">λ</a> <a id="7652" href="Base.Varieties.FreeAlgebras.html#7652" class="Bound">pψq</a> <a id="7656" href="Base.Varieties.FreeAlgebras.html#7656" class="Bound">qψr</a> <a id="7660" href="Base.Varieties.FreeAlgebras.html#7660" class="Bound">𝑨</a> <a id="7662" href="Base.Varieties.FreeAlgebras.html#7662" class="Bound">sA</a> <a id="7665" href="Base.Varieties.FreeAlgebras.html#7665" class="Bound">h</a> <a id="7667" class="Symbol">→</a> <a id="7669" class="Symbol">(</a><a id="7670" href="Base.Varieties.FreeAlgebras.html#7652" class="Bound">pψq</a> <a id="7674" href="Base.Varieties.FreeAlgebras.html#7660" class="Bound">𝑨</a> <a id="7676" href="Base.Varieties.FreeAlgebras.html#7662" class="Bound">sA</a> <a id="7679" href="Base.Varieties.FreeAlgebras.html#7665" class="Bound">h</a><a id="7680" class="Symbol">)</a> <a id="7682" href="Base.Overture.Preliminaries.html#5316" class="Function Operator">∙</a> <a id="7684" class="Symbol">(</a><a id="7685" href="Base.Varieties.FreeAlgebras.html#7656" class="Bound">qψr</a> <a id="7689" href="Base.Varieties.FreeAlgebras.html#7660" class="Bound">𝑨</a> <a id="7691" href="Base.Varieties.FreeAlgebras.html#7662" class="Bound">sA</a> <a id="7694" href="Base.Varieties.FreeAlgebras.html#7665" class="Bound">h</a><a id="7695" class="Symbol">)</a> <a id="7697" class="Symbol">}</a>
</pre>

We have collected all the pieces necessary to express the collection of identities satisfied by all subalgebras of algebras in the class as a congruence relation of the term algebra. We call this congruence `ψCon` and define it using the Congruence constructor `mkcon`.

<pre class="Agda">

 <a id="7997" href="Base.Varieties.FreeAlgebras.html#7997" class="Function">ψCon</a> <a id="8002" class="Symbol">:</a> <a id="8004" href="Base.Equality.Welldefined.html#2671" class="Function">swelldef</a> <a id="8013" href="Base.Varieties.FreeAlgebras.html#1011" class="Bound">𝓥</a> <a id="8015" href="Base.Varieties.FreeAlgebras.html#1007" class="Bound">α</a> <a id="8017" class="Symbol">→</a> <a id="8019" href="Base.Algebras.Congruences.html#2039" class="Function">Con</a> <a id="8023" class="Symbol">(</a><a id="8024" href="Base.Terms.Basic.html#3304" class="Function">𝑻</a> <a id="8026" href="Base.Varieties.FreeAlgebras.html#6438" class="Bound">X</a><a id="8027" class="Symbol">)</a>
 <a id="8030" href="Base.Varieties.FreeAlgebras.html#7997" class="Function">ψCon</a> <a id="8035" href="Base.Varieties.FreeAlgebras.html#8035" class="Bound">wd</a> <a id="8038" class="Symbol">=</a> <a id="8040" href="Base.Varieties.FreeAlgebras.html#6768" class="Function">ψRel</a> <a id="8045" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="8047" href="Base.Algebras.Congruences.html#1941" class="InductiveConstructor">mkcon</a> <a id="8053" href="Base.Varieties.FreeAlgebras.html#7470" class="Function">ψIsEquivalence</a> <a id="8068" class="Symbol">(</a><a id="8069" href="Base.Varieties.FreeAlgebras.html#7079" class="Function">ψcompatible</a> <a id="8081" href="Base.Varieties.FreeAlgebras.html#8035" class="Bound">wd</a><a id="8083" class="Symbol">)</a>

</pre>



#### <a id="hsp-theorem">HSP Theorem</a>

This section presents a formal proof of the Birkhoff HSP theorem.

To complete the proof of Birkhoff's HSP theorem, it remains to show that `Mod X (Th (V 𝒦))` is contained in `V 𝒦`; that is, every algebra that models the equations in `Th (V 𝒦)` belongs to `V 𝒦`.  This will prove that `V 𝒦` is an equational class.  (The converse, that every equational class is a variety was already proved; see the remarks at the end of this module.)

We accomplish this goal by constructing an algebra `𝔽` with the following properties:

1. `𝔽 ∈ V 𝒦` and

2. Every `𝑨 ∈ Mod X (Th (V 𝒦))` is a homomorphic image of `𝔽`.

We denote by `ℭ` the product of all subalgebras of algebras in `𝒦`, and by `homℭ` the homomorphism from `𝑻 X` to `ℭ` defined as follows: `homℭ := ⨅-hom-co (𝑻 X) 𝔄 hom𝔄`. Here, `⨅-hom-co` (defined in the [Homomorphisms.Properties][] module) takes the term algebra `𝑻 X`, a family `{𝔄 : I → Algebra α 𝑆}` of `𝑆`-algebras, and a family `hom𝔄 : ∀ i → hom (𝑻 X) (𝔄 i)` of homomorphisms and constructs the natural homomorphism `homℭ` from `𝑻 X` to the product `ℭ := ⨅ 𝔄`.  The homomorphism `homℭ : hom (𝑻 X) (⨅ ℭ)` is "natural" in the sense that the `i`-th component of the image of `𝑡 : Term X` under `homℭ` is the image `∣ hom𝔄 i ∣ 𝑡` of 𝑡 under the i-th homomorphism `hom𝔄 i`.


#### <a id="F-in-classproduct">𝔽 ≤  ⨅ S(𝒦)</a>
Now we come to a step in the Agda formalization of Birkhoff's theorem that is presents the greatest technical challenge.  We must prove that the free algebra embeds in the product ℭ of all subalgebras of algebras in the class `𝒦`.  This is really the only stage in the proof of Birkhoff's theorem that requires the truncation assumption that `ℭ` be a *set* (that is, `ℭ` has the [UIP][] property).  We will also need to assume several local function extensionality postulates and, as a result, the next submodule will take as given the parameter `fe : (∀ a b → funext a b)`.  This allows us to postulate local function extensionality when and where we need it in the proof. For example, if we want to assume function extensionality at universe levels 𝓥 and α, we simply apply `fe` to those universes: `fe 𝓥 α`. (Earlier versions of the library used just a single *global* function extensionality postulate at the start of most modules, but we have since decided to exchange that elegant but crude option for greater precision and transparency.)

<pre class="Agda">

<a id="10531" class="Keyword">module</a> <a id="10538" href="Base.Varieties.FreeAlgebras.html#10538" class="Module">_</a> <a id="10540" class="Symbol">{</a><a id="10541" href="Base.Varieties.FreeAlgebras.html#10541" class="Bound">fe</a> <a id="10544" class="Symbol">:</a> <a id="10546" href="Base.Equality.Extensionality.html#2294" class="Function">DFunExt</a><a id="10553" class="Symbol">}{</a><a id="10555" href="Base.Varieties.FreeAlgebras.html#10555" class="Bound">wd</a> <a id="10558" class="Symbol">:</a> <a id="10560" href="Base.Equality.Welldefined.html#2969" class="Function">SwellDef</a><a id="10568" class="Symbol">}{</a><a id="10570" href="Base.Varieties.FreeAlgebras.html#10570" class="Bound">X</a> <a id="10572" class="Symbol">:</a> <a id="10574" href="Base.Varieties.FreeAlgebras.html#1302" class="Primitive">Type</a> <a id="10579" href="Base.Varieties.FreeAlgebras.html#1007" class="Bound">α</a><a id="10580" class="Symbol">}</a> <a id="10582" class="Symbol">{</a><a id="10583" href="Base.Varieties.FreeAlgebras.html#10583" class="Bound">𝒦</a> <a id="10585" class="Symbol">:</a> <a id="10587" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="10592" class="Symbol">(</a><a id="10593" href="Base.Algebras.Basic.html#6252" class="Function">Algebra</a> <a id="10601" href="Base.Varieties.FreeAlgebras.html#1007" class="Bound">α</a> <a id="10603" href="Base.Varieties.FreeAlgebras.html#1023" class="Bound">𝑆</a><a id="10604" class="Symbol">)</a> <a id="10606" href="Base.Varieties.FreeAlgebras.html#3946" class="Function">𝓕</a><a id="10607" class="Symbol">}</a> <a id="10609" class="Keyword">where</a>

 <a id="10617" class="Keyword">open</a> <a id="10622" href="Base.Varieties.Preservation.html#10687" class="Module">class-products-with-maps</a> <a id="10647" class="Symbol">{</a><a id="10648" class="Argument">X</a> <a id="10650" class="Symbol">=</a> <a id="10652" href="Base.Varieties.FreeAlgebras.html#10570" class="Bound">X</a><a id="10653" class="Symbol">}{</a><a id="10655" href="Base.Varieties.FreeAlgebras.html#10541" class="Bound">fe</a> <a id="10658" href="Base.Varieties.FreeAlgebras.html#3946" class="Function">𝓕</a> <a id="10660" href="Base.Varieties.FreeAlgebras.html#1007" class="Bound">α</a><a id="10661" class="Symbol">}{</a><a id="10663" href="Base.Varieties.FreeAlgebras.html#10541" class="Bound">fe</a> <a id="10666" href="Base.Varieties.FreeAlgebras.html#3948" class="Function">𝓕⁺</a> <a id="10669" href="Base.Varieties.FreeAlgebras.html#3948" class="Function">𝓕⁺</a><a id="10671" class="Symbol">}{</a><a id="10673" href="Base.Varieties.FreeAlgebras.html#10541" class="Bound">fe</a> <a id="10676" href="Base.Varieties.FreeAlgebras.html#3946" class="Function">𝓕</a> <a id="10678" href="Base.Varieties.FreeAlgebras.html#3946" class="Function">𝓕</a><a id="10679" class="Symbol">}</a> <a id="10681" href="Base.Varieties.FreeAlgebras.html#10583" class="Bound">𝒦</a>

</pre>

We begin by constructing `ℭ`, using the techniques described in the section on <a href="https://ualib.gitlab.io/Base.Varieties.Base.Varieties.html#products-of-classes">products of classes</a>.

<pre class="Agda">

  <a id="10906" class="Comment">-- ℭ is the product of all subalgebras of algebras in 𝒦.</a>
 <a id="10964" href="Base.Varieties.FreeAlgebras.html#10964" class="Function">ℭ</a> <a id="10966" class="Symbol">:</a> <a id="10968" href="Base.Algebras.Basic.html#6252" class="Function">Algebra</a> <a id="10976" href="Base.Varieties.FreeAlgebras.html#3946" class="Function">𝓕</a> <a id="10978" href="Base.Varieties.FreeAlgebras.html#1023" class="Bound">𝑆</a>
 <a id="10981" href="Base.Varieties.FreeAlgebras.html#10964" class="Function">ℭ</a> <a id="10983" class="Symbol">=</a> <a id="10985" href="Base.Algebras.Products.html#1899" class="Function">⨅</a> <a id="10987" href="Base.Varieties.Preservation.html#12104" class="Function">𝔄&#39;</a>

</pre>

Observe that the inhabitants of `ℭ` are maps from `ℑ` to `{𝔄 i : i ∈ ℑ}`.  A homomorphism from `𝑻 X` to `ℭ` is obtained as follows.

<pre class="Agda">

 <a id="11151" href="Base.Varieties.FreeAlgebras.html#11151" class="Function">homℭ</a> <a id="11156" class="Symbol">:</a> <a id="11158" href="Base.Homomorphisms.Basic.html#2682" class="Function">hom</a> <a id="11162" class="Symbol">(</a><a id="11163" href="Base.Terms.Basic.html#3304" class="Function">𝑻</a> <a id="11165" href="Base.Varieties.FreeAlgebras.html#10570" class="Bound">X</a><a id="11166" class="Symbol">)</a> <a id="11168" href="Base.Varieties.FreeAlgebras.html#10964" class="Function">ℭ</a>
 <a id="11171" href="Base.Varieties.FreeAlgebras.html#11151" class="Function">homℭ</a> <a id="11176" class="Symbol">=</a> <a id="11178" href="Base.Homomorphisms.Products.html#1651" class="Function">⨅-hom-co</a> <a id="11187" href="Base.Varieties.Preservation.html#12104" class="Function">𝔄&#39;</a> <a id="11190" class="Symbol">(</a><a id="11191" href="Base.Varieties.FreeAlgebras.html#10541" class="Bound">fe</a> <a id="11194" href="Base.Varieties.FreeAlgebras.html#3946" class="Function">𝓕</a> <a id="11196" href="Base.Varieties.FreeAlgebras.html#1007" class="Bound">α</a><a id="11197" class="Symbol">){</a><a id="11199" href="Base.Varieties.FreeAlgebras.html#3946" class="Function">𝓕</a><a id="11200" class="Symbol">}(</a><a id="11202" href="Base.Terms.Basic.html#3304" class="Function">𝑻</a> <a id="11204" href="Base.Varieties.FreeAlgebras.html#10570" class="Bound">X</a><a id="11205" class="Symbol">)</a> <a id="11207" class="Symbol">λ</a> <a id="11209" href="Base.Varieties.FreeAlgebras.html#11209" class="Bound">i</a> <a id="11211" class="Symbol">→</a> <a id="11213" href="Base.Terms.Properties.html#3296" class="Function">lift-hom</a> <a id="11222" class="Symbol">(</a><a id="11223" href="Base.Varieties.Preservation.html#12104" class="Function">𝔄&#39;</a> <a id="11226" href="Base.Varieties.FreeAlgebras.html#11209" class="Bound">i</a><a id="11227" class="Symbol">)(</a><a id="11229" href="Base.Varieties.FreeAlgebras.html#1403" class="Field">snd</a> <a id="11233" href="Base.Overture.Preliminaries.html#4435" class="Function Operator">∥</a> <a id="11235" href="Base.Varieties.FreeAlgebras.html#11209" class="Bound">i</a> <a id="11237" href="Base.Overture.Preliminaries.html#4435" class="Function Operator">∥</a><a id="11238" class="Symbol">)</a>

</pre>


#### <a id="the-free-algebra">The free algebra</a>

 As mentioned, the initial version of the [agda-algebras](https://github.com/ualib/agda-algebras) library used the free algebra `𝔉` developed above.  However, our new, more direct proof uses the algebra `𝔽`, which we now define, along with the natural epimorphism `epi𝔽 : epi (𝑻 X) 𝔽` from `𝑻 X` to `𝔽`.

 We now define the algebra `𝔽`, which plays the role of the free algebra, along with the natural epimorphism `epi𝔽 : epi (𝑻 X) 𝔽` from `𝑻 X` to `𝔽`.

<pre class="Agda">

 <a id="11776" href="Base.Varieties.FreeAlgebras.html#11776" class="Function">𝔽</a> <a id="11778" class="Symbol">:</a> <a id="11780" href="Base.Algebras.Basic.html#6252" class="Function">Algebra</a> <a id="11788" href="Base.Varieties.FreeAlgebras.html#3948" class="Function">𝓕⁺</a> <a id="11791" href="Base.Varieties.FreeAlgebras.html#1023" class="Bound">𝑆</a>
 <a id="11794" href="Base.Varieties.FreeAlgebras.html#11776" class="Function">𝔽</a> <a id="11796" class="Symbol">=</a> <a id="11798" href="Base.Homomorphisms.Kernels.html#3085" class="Function Operator">ker[</a> <a id="11803" href="Base.Terms.Basic.html#3304" class="Function">𝑻</a> <a id="11805" href="Base.Varieties.FreeAlgebras.html#10570" class="Bound">X</a> <a id="11807" href="Base.Homomorphisms.Kernels.html#3085" class="Function Operator">⇒</a> <a id="11809" href="Base.Varieties.FreeAlgebras.html#10964" class="Function">ℭ</a> <a id="11811" href="Base.Homomorphisms.Kernels.html#3085" class="Function Operator">]</a> <a id="11813" href="Base.Varieties.FreeAlgebras.html#11151" class="Function">homℭ</a> <a id="11818" href="Base.Homomorphisms.Kernels.html#3085" class="Function Operator">↾</a> <a id="11820" class="Symbol">(</a><a id="11821" href="Base.Varieties.FreeAlgebras.html#10555" class="Bound">wd</a> <a id="11824" href="Base.Varieties.FreeAlgebras.html#1011" class="Bound">𝓥</a> <a id="11826" class="Symbol">(</a><a id="11827" href="Base.Algebras.Products.html#3165" class="Function">ov</a> <a id="11830" href="Base.Varieties.FreeAlgebras.html#1007" class="Bound">α</a><a id="11831" class="Symbol">))</a>

 <a id="11836" href="Base.Varieties.FreeAlgebras.html#11836" class="Function">epi𝔽</a> <a id="11841" class="Symbol">:</a> <a id="11843" href="Base.Homomorphisms.Basic.html#4326" class="Function">epi</a> <a id="11847" class="Symbol">(</a><a id="11848" href="Base.Terms.Basic.html#3304" class="Function">𝑻</a> <a id="11850" href="Base.Varieties.FreeAlgebras.html#10570" class="Bound">X</a><a id="11851" class="Symbol">)</a> <a id="11853" href="Base.Varieties.FreeAlgebras.html#11776" class="Function">𝔽</a>
 <a id="11856" href="Base.Varieties.FreeAlgebras.html#11836" class="Function">epi𝔽</a> <a id="11861" class="Symbol">=</a> <a id="11863" href="Base.Homomorphisms.Kernels.html#4574" class="Function">πker</a> <a id="11868" class="Symbol">(</a><a id="11869" href="Base.Varieties.FreeAlgebras.html#10555" class="Bound">wd</a> <a id="11872" href="Base.Varieties.FreeAlgebras.html#1011" class="Bound">𝓥</a> <a id="11874" class="Symbol">(</a><a id="11875" href="Base.Algebras.Products.html#3165" class="Function">ov</a> <a id="11878" href="Base.Varieties.FreeAlgebras.html#1007" class="Bound">α</a><a id="11879" class="Symbol">))</a> <a id="11882" class="Symbol">{</a><a id="11883" href="Base.Varieties.FreeAlgebras.html#10964" class="Function">ℭ</a><a id="11884" class="Symbol">}</a> <a id="11886" href="Base.Varieties.FreeAlgebras.html#11151" class="Function">homℭ</a>

 <a id="11893" href="Base.Varieties.FreeAlgebras.html#11893" class="Function">hom𝔽</a> <a id="11898" class="Symbol">:</a> <a id="11900" href="Base.Homomorphisms.Basic.html#2682" class="Function">hom</a> <a id="11904" class="Symbol">(</a><a id="11905" href="Base.Terms.Basic.html#3304" class="Function">𝑻</a> <a id="11907" href="Base.Varieties.FreeAlgebras.html#10570" class="Bound">X</a><a id="11908" class="Symbol">)</a> <a id="11910" href="Base.Varieties.FreeAlgebras.html#11776" class="Function">𝔽</a>
 <a id="11913" href="Base.Varieties.FreeAlgebras.html#11893" class="Function">hom𝔽</a> <a id="11918" class="Symbol">=</a> <a id="11920" href="Base.Homomorphisms.Basic.html#4787" class="Function">epi→hom</a> <a id="11928" href="Base.Varieties.FreeAlgebras.html#11776" class="Function">𝔽</a> <a id="11930" href="Base.Varieties.FreeAlgebras.html#11836" class="Function">epi𝔽</a>

 <a id="11937" href="Base.Varieties.FreeAlgebras.html#11937" class="Function">hom𝔽-is-epic</a> <a id="11950" class="Symbol">:</a> <a id="11952" href="Base.Overture.Surjective.html#1692" class="Function">IsSurjective</a> <a id="11965" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="11967" href="Base.Varieties.FreeAlgebras.html#11893" class="Function">hom𝔽</a> <a id="11972" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a>
 <a id="11975" href="Base.Varieties.FreeAlgebras.html#11937" class="Function">hom𝔽-is-epic</a> <a id="11988" class="Symbol">=</a> <a id="11990" href="Base.Varieties.FreeAlgebras.html#1403" class="Field">snd</a> <a id="11994" href="Base.Overture.Preliminaries.html#4435" class="Function Operator">∥</a> <a id="11996" href="Base.Varieties.FreeAlgebras.html#11836" class="Function">epi𝔽</a> <a id="12001" href="Base.Overture.Preliminaries.html#4435" class="Function Operator">∥</a>

</pre>

We will need the following facts relating `homℭ`, `hom𝔽`, `and ψ`.

<pre class="Agda">

 <a id="12099" href="Base.Varieties.FreeAlgebras.html#12099" class="Function">ψlemma0</a> <a id="12107" class="Symbol">:</a> <a id="12109" class="Symbol">∀</a> <a id="12111" href="Base.Varieties.FreeAlgebras.html#12111" class="Bound">p</a> <a id="12113" href="Base.Varieties.FreeAlgebras.html#12113" class="Bound">q</a> <a id="12115" class="Symbol">→</a>  <a id="12118" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="12120" href="Base.Varieties.FreeAlgebras.html#11151" class="Function">homℭ</a> <a id="12125" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="12127" href="Base.Varieties.FreeAlgebras.html#12111" class="Bound">p</a> <a id="12129" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="12131" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="12133" href="Base.Varieties.FreeAlgebras.html#11151" class="Function">homℭ</a> <a id="12138" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="12140" href="Base.Varieties.FreeAlgebras.html#12113" class="Bound">q</a>  <a id="12143" class="Symbol">→</a> <a id="12145" class="Symbol">(</a><a id="12146" href="Base.Varieties.FreeAlgebras.html#12111" class="Bound">p</a> <a id="12148" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="12150" href="Base.Varieties.FreeAlgebras.html#12113" class="Bound">q</a><a id="12151" class="Symbol">)</a> <a id="12153" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="12155" href="Base.Varieties.FreeAlgebras.html#6484" class="Function">ψ</a> <a id="12157" href="Base.Varieties.FreeAlgebras.html#10583" class="Bound">𝒦</a>
 <a id="12160" href="Base.Varieties.FreeAlgebras.html#12099" class="Function">ψlemma0</a> <a id="12168" href="Base.Varieties.FreeAlgebras.html#12168" class="Bound">p</a> <a id="12170" href="Base.Varieties.FreeAlgebras.html#12170" class="Bound">q</a> <a id="12172" href="Base.Varieties.FreeAlgebras.html#12172" class="Bound">phomℭq</a> <a id="12179" href="Base.Varieties.FreeAlgebras.html#12179" class="Bound">𝑨</a> <a id="12181" href="Base.Varieties.FreeAlgebras.html#12181" class="Bound">sA</a> <a id="12184" href="Base.Varieties.FreeAlgebras.html#12184" class="Bound">h</a> <a id="12186" class="Symbol">=</a> <a id="12188" href="Relation.Binary.PropositionalEquality.Core.html#1461" class="Function">cong-app</a> <a id="12197" href="Base.Varieties.FreeAlgebras.html#12172" class="Bound">phomℭq</a> <a id="12204" class="Symbol">(</a><a id="12205" href="Base.Varieties.FreeAlgebras.html#12179" class="Bound">𝑨</a> <a id="12207" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="12209" href="Base.Varieties.FreeAlgebras.html#12181" class="Bound">sA</a> <a id="12212" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="12214" href="Base.Varieties.FreeAlgebras.html#12184" class="Bound">h</a><a id="12215" class="Symbol">)</a>

 <a id="12219" href="Base.Varieties.FreeAlgebras.html#12219" class="Function">ψlemma0-ap</a> <a id="12230" class="Symbol">:</a> <a id="12232" class="Symbol">{</a><a id="12233" href="Base.Varieties.FreeAlgebras.html#12233" class="Bound">𝑨</a> <a id="12235" class="Symbol">:</a> <a id="12237" href="Base.Algebras.Basic.html#6252" class="Function">Algebra</a> <a id="12245" href="Base.Varieties.FreeAlgebras.html#1007" class="Bound">α</a> <a id="12247" href="Base.Varieties.FreeAlgebras.html#1023" class="Bound">𝑆</a><a id="12248" class="Symbol">}{</a><a id="12250" href="Base.Varieties.FreeAlgebras.html#12250" class="Bound">h</a> <a id="12252" class="Symbol">:</a> <a id="12254" href="Base.Varieties.FreeAlgebras.html#10570" class="Bound">X</a> <a id="12256" class="Symbol">→</a> <a id="12258" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="12260" href="Base.Varieties.FreeAlgebras.html#12233" class="Bound">𝑨</a> <a id="12262" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a><a id="12263" class="Symbol">}</a> <a id="12265" class="Symbol">→</a> <a id="12267" href="Base.Varieties.FreeAlgebras.html#12233" class="Bound">𝑨</a> <a id="12269" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="12271" href="Base.Varieties.Closure.html#4058" class="Datatype">S</a><a id="12272" class="Symbol">{</a><a id="12273" href="Base.Varieties.FreeAlgebras.html#1007" class="Bound">α</a><a id="12274" class="Symbol">}{</a><a id="12276" href="Base.Varieties.FreeAlgebras.html#1007" class="Bound">α</a><a id="12277" class="Symbol">}</a> <a id="12279" href="Base.Varieties.FreeAlgebras.html#10583" class="Bound">𝒦</a>
  <a id="12283" class="Symbol">→</a>           <a id="12295" href="Base.Relations.Discrete.html#4539" class="Function">kernel</a> <a id="12302" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="12304" href="Base.Varieties.FreeAlgebras.html#11893" class="Function">hom𝔽</a> <a id="12309" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="12311" href="Relation.Unary.html#1742" class="Function Operator">⊆</a> <a id="12313" href="Base.Relations.Discrete.html#4539" class="Function">kernel</a> <a id="12320" class="Symbol">(</a><a id="12321" href="Base.Terms.Properties.html#2589" class="Function">free-lift</a> <a id="12331" href="Base.Varieties.FreeAlgebras.html#12233" class="Bound">𝑨</a> <a id="12333" href="Base.Varieties.FreeAlgebras.html#12250" class="Bound">h</a><a id="12334" class="Symbol">)</a>

 <a id="12338" href="Base.Varieties.FreeAlgebras.html#12219" class="Function">ψlemma0-ap</a> <a id="12349" class="Symbol">{</a><a id="12350" href="Base.Varieties.FreeAlgebras.html#12350" class="Bound">𝑨</a><a id="12351" class="Symbol">}{</a><a id="12353" href="Base.Varieties.FreeAlgebras.html#12353" class="Bound">h</a><a id="12354" class="Symbol">}</a> <a id="12356" href="Base.Varieties.FreeAlgebras.html#12356" class="Bound">skA</a> <a id="12360" class="Symbol">{</a><a id="12361" href="Base.Varieties.FreeAlgebras.html#12361" class="Bound">p</a> <a id="12363" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="12365" href="Base.Varieties.FreeAlgebras.html#12365" class="Bound">q</a><a id="12366" class="Symbol">}</a> <a id="12368" href="Base.Varieties.FreeAlgebras.html#12368" class="Bound">x</a> <a id="12370" class="Symbol">=</a> <a id="12372" href="Base.Varieties.FreeAlgebras.html#12515" class="Function">γ</a> <a id="12374" class="Keyword">where</a>

  <a id="12383" href="Base.Varieties.FreeAlgebras.html#12383" class="Function">ν</a> <a id="12385" class="Symbol">:</a> <a id="12387" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="12389" href="Base.Varieties.FreeAlgebras.html#11151" class="Function">homℭ</a> <a id="12394" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="12396" href="Base.Varieties.FreeAlgebras.html#12361" class="Bound">p</a> <a id="12398" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="12400" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="12402" href="Base.Varieties.FreeAlgebras.html#11151" class="Function">homℭ</a> <a id="12407" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="12409" href="Base.Varieties.FreeAlgebras.html#12365" class="Bound">q</a>
  <a id="12413" href="Base.Varieties.FreeAlgebras.html#12383" class="Function">ν</a> <a id="12415" class="Symbol">=</a> <a id="12417" href="Base.Homomorphisms.Kernels.html#5083" class="Function">ker-in-con</a> <a id="12428" class="Symbol">{</a><a id="12429" class="Argument">α</a> <a id="12431" class="Symbol">=</a> <a id="12433" class="Symbol">(</a><a id="12434" href="Base.Algebras.Products.html#3165" class="Function">ov</a> <a id="12437" href="Base.Varieties.FreeAlgebras.html#1007" class="Bound">α</a><a id="12438" class="Symbol">)}{</a><a id="12441" href="Base.Algebras.Products.html#3165" class="Function">ov</a> <a id="12444" href="Base.Varieties.FreeAlgebras.html#1007" class="Bound">α</a><a id="12445" class="Symbol">}{</a><a id="12447" href="Base.Terms.Basic.html#3304" class="Function">𝑻</a> <a id="12449" href="Base.Varieties.FreeAlgebras.html#10570" class="Bound">X</a><a id="12450" class="Symbol">}{</a><a id="12452" href="Base.Varieties.FreeAlgebras.html#10555" class="Bound">wd</a> <a id="12455" href="Base.Varieties.FreeAlgebras.html#1011" class="Bound">𝓥</a> <a id="12457" class="Symbol">(</a><a id="12458" href="Base.Varieties.FreeAlgebras.html#903" class="Primitive">lsuc</a> <a id="12463" class="Symbol">(</a><a id="12464" href="Base.Algebras.Products.html#3165" class="Function">ov</a> <a id="12467" href="Base.Varieties.FreeAlgebras.html#1007" class="Bound">α</a><a id="12468" class="Symbol">))}(</a><a id="12472" href="Base.Homomorphisms.Kernels.html#2677" class="Function">kercon</a> <a id="12479" class="Symbol">(</a><a id="12480" href="Base.Varieties.FreeAlgebras.html#10555" class="Bound">wd</a> <a id="12483" href="Base.Varieties.FreeAlgebras.html#1011" class="Bound">𝓥</a> <a id="12485" class="Symbol">(</a><a id="12486" href="Base.Algebras.Products.html#3165" class="Function">ov</a> <a id="12489" href="Base.Varieties.FreeAlgebras.html#1007" class="Bound">α</a><a id="12490" class="Symbol">))</a> <a id="12493" class="Symbol">{</a><a id="12494" href="Base.Varieties.FreeAlgebras.html#10964" class="Function">ℭ</a><a id="12495" class="Symbol">}</a> <a id="12497" href="Base.Varieties.FreeAlgebras.html#11151" class="Function">homℭ</a><a id="12501" class="Symbol">)</a> <a id="12503" class="Symbol">{</a><a id="12504" href="Base.Varieties.FreeAlgebras.html#12361" class="Bound">p</a><a id="12505" class="Symbol">}{</a><a id="12507" href="Base.Varieties.FreeAlgebras.html#12365" class="Bound">q</a><a id="12508" class="Symbol">}</a> <a id="12510" href="Base.Varieties.FreeAlgebras.html#12368" class="Bound">x</a>

  <a id="12515" href="Base.Varieties.FreeAlgebras.html#12515" class="Function">γ</a> <a id="12517" class="Symbol">:</a> <a id="12519" class="Symbol">(</a><a id="12520" href="Base.Terms.Properties.html#2589" class="Function">free-lift</a> <a id="12530" href="Base.Varieties.FreeAlgebras.html#12350" class="Bound">𝑨</a> <a id="12532" href="Base.Varieties.FreeAlgebras.html#12353" class="Bound">h</a><a id="12533" class="Symbol">)</a> <a id="12535" href="Base.Varieties.FreeAlgebras.html#12361" class="Bound">p</a> <a id="12537" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="12539" class="Symbol">(</a><a id="12540" href="Base.Terms.Properties.html#2589" class="Function">free-lift</a> <a id="12550" href="Base.Varieties.FreeAlgebras.html#12350" class="Bound">𝑨</a> <a id="12552" href="Base.Varieties.FreeAlgebras.html#12353" class="Bound">h</a><a id="12553" class="Symbol">)</a> <a id="12555" href="Base.Varieties.FreeAlgebras.html#12365" class="Bound">q</a>
  <a id="12559" href="Base.Varieties.FreeAlgebras.html#12515" class="Function">γ</a> <a id="12561" class="Symbol">=</a> <a id="12563" class="Symbol">((</a><a id="12565" href="Base.Varieties.FreeAlgebras.html#12099" class="Function">ψlemma0</a> <a id="12573" href="Base.Varieties.FreeAlgebras.html#12361" class="Bound">p</a> <a id="12575" href="Base.Varieties.FreeAlgebras.html#12365" class="Bound">q</a><a id="12576" class="Symbol">)</a> <a id="12578" href="Base.Varieties.FreeAlgebras.html#12383" class="Function">ν</a><a id="12579" class="Symbol">)</a> <a id="12581" href="Base.Varieties.FreeAlgebras.html#12350" class="Bound">𝑨</a> <a id="12583" href="Base.Varieties.FreeAlgebras.html#12356" class="Bound">skA</a> <a id="12587" href="Base.Varieties.FreeAlgebras.html#12353" class="Bound">h</a>


</pre>

We now use `ψlemma0-ap` to prove that every map `h : X → ∣ 𝑨 ∣`, from `X` to a subalgebra `𝑨 ∈ S 𝒦` of `𝒦`, lifts to a homomorphism from `𝔽` to `𝑨`.

<pre class="Agda">

 <a id="12768" href="Base.Varieties.FreeAlgebras.html#12768" class="Function">𝔽-lift-hom</a> <a id="12779" class="Symbol">:</a> <a id="12781" class="Symbol">(</a><a id="12782" href="Base.Varieties.FreeAlgebras.html#12782" class="Bound">𝑨</a> <a id="12784" class="Symbol">:</a> <a id="12786" href="Base.Algebras.Basic.html#6252" class="Function">Algebra</a> <a id="12794" href="Base.Varieties.FreeAlgebras.html#1007" class="Bound">α</a> <a id="12796" href="Base.Varieties.FreeAlgebras.html#1023" class="Bound">𝑆</a><a id="12797" class="Symbol">)</a> <a id="12799" class="Symbol">→</a> <a id="12801" href="Base.Varieties.FreeAlgebras.html#12782" class="Bound">𝑨</a> <a id="12803" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="12805" href="Base.Varieties.Closure.html#4058" class="Datatype">S</a><a id="12806" class="Symbol">{</a><a id="12807" href="Base.Varieties.FreeAlgebras.html#1007" class="Bound">α</a><a id="12808" class="Symbol">}{</a><a id="12810" href="Base.Varieties.FreeAlgebras.html#1007" class="Bound">α</a><a id="12811" class="Symbol">}</a> <a id="12813" href="Base.Varieties.FreeAlgebras.html#10583" class="Bound">𝒦</a> <a id="12815" class="Symbol">→</a> <a id="12817" class="Symbol">(</a><a id="12818" href="Base.Varieties.FreeAlgebras.html#10570" class="Bound">X</a> <a id="12820" class="Symbol">→</a> <a id="12822" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="12824" href="Base.Varieties.FreeAlgebras.html#12782" class="Bound">𝑨</a> <a id="12826" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a><a id="12827" class="Symbol">)</a> <a id="12829" class="Symbol">→</a> <a id="12831" href="Base.Homomorphisms.Basic.html#2682" class="Function">hom</a> <a id="12835" href="Base.Varieties.FreeAlgebras.html#11776" class="Function">𝔽</a> <a id="12837" href="Base.Varieties.FreeAlgebras.html#12782" class="Bound">𝑨</a>
 <a id="12840" href="Base.Varieties.FreeAlgebras.html#12768" class="Function">𝔽-lift-hom</a> <a id="12851" href="Base.Varieties.FreeAlgebras.html#12851" class="Bound">𝑨</a> <a id="12853" href="Base.Varieties.FreeAlgebras.html#12853" class="Bound">skA</a> <a id="12857" href="Base.Varieties.FreeAlgebras.html#12857" class="Bound">h</a> <a id="12859" class="Symbol">=</a> <a id="12861" href="Base.Varieties.FreeAlgebras.html#1388" class="Field">fst</a><a id="12864" class="Symbol">(</a><a id="12865" href="Base.Homomorphisms.Factor.html#1852" class="Function">HomFactor</a> <a id="12875" class="Symbol">(</a><a id="12876" href="Base.Varieties.FreeAlgebras.html#10555" class="Bound">wd</a> <a id="12879" href="Base.Varieties.FreeAlgebras.html#1011" class="Bound">𝓥</a> <a id="12881" class="Symbol">(</a><a id="12882" href="Base.Varieties.FreeAlgebras.html#903" class="Primitive">lsuc</a> <a id="12887" class="Symbol">(</a><a id="12888" href="Base.Algebras.Products.html#3165" class="Function">ov</a> <a id="12891" href="Base.Varieties.FreeAlgebras.html#1007" class="Bound">α</a><a id="12892" class="Symbol">)))</a>  <a id="12897" href="Base.Varieties.FreeAlgebras.html#12851" class="Bound">𝑨</a> <a id="12899" class="Symbol">(</a><a id="12900" href="Base.Terms.Properties.html#3296" class="Function">lift-hom</a> <a id="12909" href="Base.Varieties.FreeAlgebras.html#12851" class="Bound">𝑨</a> <a id="12911" href="Base.Varieties.FreeAlgebras.html#12857" class="Bound">h</a><a id="12912" class="Symbol">)</a> <a id="12914" href="Base.Varieties.FreeAlgebras.html#11893" class="Function">hom𝔽</a> <a id="12919" class="Symbol">(</a><a id="12920" href="Base.Varieties.FreeAlgebras.html#12219" class="Function">ψlemma0-ap</a> <a id="12931" href="Base.Varieties.FreeAlgebras.html#12853" class="Bound">skA</a><a id="12934" class="Symbol">)</a> <a id="12936" href="Base.Varieties.FreeAlgebras.html#11937" class="Function">hom𝔽-is-epic</a><a id="12948" class="Symbol">)</a>

</pre>


#### <a id="k-models-psi">𝒦 models ψ</a>

The goal of this subsection is to prove that `𝒦` models `ψ 𝒦`. In other terms, for all pairs `(p , q) ∈ Term X × Term X` of terms, if `(p , q) ∈ ψ 𝒦`, then `𝒦 ⊫ p ≈ q`.

Next we define the lift of the natural embedding from `X` into 𝔽. We denote this homomorphism by `𝔑 : hom (𝑻 X) 𝔽` and define it as follows.

<pre class="Agda">

 <a id="13333" class="Keyword">open</a> <a id="13338" href="Base.Algebras.Congruences.html#1853" class="Module">IsCongruence</a>

 <a id="13353" href="Base.Varieties.FreeAlgebras.html#13353" class="Function">X↪𝔽</a> <a id="13357" class="Symbol">:</a> <a id="13359" href="Base.Varieties.FreeAlgebras.html#10570" class="Bound">X</a> <a id="13361" class="Symbol">→</a> <a id="13363" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="13365" href="Base.Varieties.FreeAlgebras.html#11776" class="Function">𝔽</a> <a id="13367" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a>
 <a id="13370" href="Base.Varieties.FreeAlgebras.html#13353" class="Function">X↪𝔽</a> <a id="13374" href="Base.Varieties.FreeAlgebras.html#13374" class="Bound">x</a> <a id="13376" class="Symbol">=</a> <a id="13378" href="Base.Relations.Quotients.html#5406" class="Function Operator">⟪</a> <a id="13380" href="Base.Terms.Basic.html#2062" class="InductiveConstructor">ℊ</a> <a id="13382" href="Base.Varieties.FreeAlgebras.html#13374" class="Bound">x</a> <a id="13384" href="Base.Relations.Quotients.html#5406" class="Function Operator">⟫</a> <a id="13386" class="Comment">-- (the implicit relation here is  ⟨ kercon (fe 𝓥 𝓕) ℭ homℭ ⟩ )</a>

 <a id="13452" href="Base.Varieties.FreeAlgebras.html#13452" class="Function">𝔑</a> <a id="13454" class="Symbol">:</a> <a id="13456" href="Base.Homomorphisms.Basic.html#2682" class="Function">hom</a> <a id="13460" class="Symbol">(</a><a id="13461" href="Base.Terms.Basic.html#3304" class="Function">𝑻</a> <a id="13463" href="Base.Varieties.FreeAlgebras.html#10570" class="Bound">X</a><a id="13464" class="Symbol">)</a> <a id="13466" href="Base.Varieties.FreeAlgebras.html#11776" class="Function">𝔽</a>
 <a id="13469" href="Base.Varieties.FreeAlgebras.html#13452" class="Function">𝔑</a> <a id="13471" class="Symbol">=</a> <a id="13473" href="Base.Terms.Properties.html#3296" class="Function">lift-hom</a> <a id="13482" href="Base.Varieties.FreeAlgebras.html#11776" class="Function">𝔽</a> <a id="13484" href="Base.Varieties.FreeAlgebras.html#13353" class="Function">X↪𝔽</a>

</pre>

It turns out that the homomorphism so defined is equivalent to `hom𝔽`.

<pre class="Agda">
 <a id="13587" class="Keyword">open</a> <a id="13592" href="Relation.Binary.PropositionalEquality.Core.html#2708" class="Module">≡-Reasoning</a>

 <a id="13606" href="Base.Varieties.FreeAlgebras.html#13606" class="Function">hom𝔽-is-lift-hom</a> <a id="13623" class="Symbol">:</a> <a id="13625" class="Symbol">∀</a> <a id="13627" href="Base.Varieties.FreeAlgebras.html#13627" class="Bound">p</a> <a id="13629" class="Symbol">→</a> <a id="13631" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="13633" href="Base.Varieties.FreeAlgebras.html#13452" class="Function">𝔑</a> <a id="13635" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="13637" href="Base.Varieties.FreeAlgebras.html#13627" class="Bound">p</a> <a id="13639" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="13641" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="13643" href="Base.Varieties.FreeAlgebras.html#11893" class="Function">hom𝔽</a> <a id="13648" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="13650" href="Base.Varieties.FreeAlgebras.html#13627" class="Bound">p</a>
 <a id="13653" href="Base.Varieties.FreeAlgebras.html#13606" class="Function">hom𝔽-is-lift-hom</a> <a id="13670" class="Symbol">(</a><a id="13671" href="Base.Terms.Basic.html#2062" class="InductiveConstructor">ℊ</a> <a id="13673" href="Base.Varieties.FreeAlgebras.html#13673" class="Bound">x</a><a id="13674" class="Symbol">)</a> <a id="13676" class="Symbol">=</a> <a id="13678" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
 <a id="13684" href="Base.Varieties.FreeAlgebras.html#13606" class="Function">hom𝔽-is-lift-hom</a> <a id="13701" class="Symbol">(</a><a id="13702" href="Base.Terms.Basic.html#2104" class="InductiveConstructor">node</a> <a id="13707" href="Base.Varieties.FreeAlgebras.html#13707" class="Bound">𝑓</a> <a id="13709" href="Base.Varieties.FreeAlgebras.html#13709" class="Bound">𝒕</a><a id="13710" class="Symbol">)</a> <a id="13712" class="Symbol">=</a>
  <a id="13716" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="13718" href="Base.Varieties.FreeAlgebras.html#13452" class="Function">𝔑</a> <a id="13720" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="13722" class="Symbol">(</a><a id="13723" href="Base.Terms.Basic.html#2104" class="InductiveConstructor">node</a> <a id="13728" href="Base.Varieties.FreeAlgebras.html#13707" class="Bound">𝑓</a> <a id="13730" href="Base.Varieties.FreeAlgebras.html#13709" class="Bound">𝒕</a><a id="13731" class="Symbol">)</a>              <a id="13746" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">≡⟨</a> <a id="13749" href="Base.Overture.Preliminaries.html#4435" class="Function Operator">∥</a> <a id="13751" href="Base.Varieties.FreeAlgebras.html#13452" class="Function">𝔑</a> <a id="13753" href="Base.Overture.Preliminaries.html#4435" class="Function Operator">∥</a> <a id="13755" href="Base.Varieties.FreeAlgebras.html#13707" class="Bound">𝑓</a> <a id="13757" href="Base.Varieties.FreeAlgebras.html#13709" class="Bound">𝒕</a> <a id="13759" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">⟩</a>
  <a id="13763" class="Symbol">(</a><a id="13764" href="Base.Varieties.FreeAlgebras.html#13707" class="Bound">𝑓</a> <a id="13766" href="Base.Algebras.Basic.html#9427" class="Function Operator">̂</a> <a id="13768" href="Base.Varieties.FreeAlgebras.html#11776" class="Function">𝔽</a><a id="13769" class="Symbol">)(λ</a> <a id="13773" href="Base.Varieties.FreeAlgebras.html#13773" class="Bound">i</a> <a id="13775" class="Symbol">→</a> <a id="13777" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="13779" href="Base.Varieties.FreeAlgebras.html#13452" class="Function">𝔑</a> <a id="13781" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a><a id="13782" class="Symbol">(</a><a id="13783" href="Base.Varieties.FreeAlgebras.html#13709" class="Bound">𝒕</a> <a id="13785" href="Base.Varieties.FreeAlgebras.html#13773" class="Bound">i</a><a id="13786" class="Symbol">))</a>     <a id="13793" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">≡⟨</a> <a id="13796" href="Base.Varieties.FreeAlgebras.html#13904" class="Function">wd-proof</a> <a id="13805" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">⟩</a>
  <a id="13809" class="Symbol">(</a><a id="13810" href="Base.Varieties.FreeAlgebras.html#13707" class="Bound">𝑓</a> <a id="13812" href="Base.Algebras.Basic.html#9427" class="Function Operator">̂</a> <a id="13814" href="Base.Varieties.FreeAlgebras.html#11776" class="Function">𝔽</a><a id="13815" class="Symbol">)(λ</a> <a id="13819" href="Base.Varieties.FreeAlgebras.html#13819" class="Bound">i</a> <a id="13821" class="Symbol">→</a> <a id="13823" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="13825" href="Base.Varieties.FreeAlgebras.html#11893" class="Function">hom𝔽</a> <a id="13830" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="13832" class="Symbol">(</a><a id="13833" href="Base.Varieties.FreeAlgebras.html#13709" class="Bound">𝒕</a> <a id="13835" href="Base.Varieties.FreeAlgebras.html#13819" class="Bound">i</a><a id="13836" class="Symbol">))</a> <a id="13839" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">≡⟨</a> <a id="13842" class="Symbol">(</a><a id="13843" href="Base.Overture.Preliminaries.html#4435" class="Function Operator">∥</a> <a id="13845" href="Base.Varieties.FreeAlgebras.html#11893" class="Function">hom𝔽</a> <a id="13850" href="Base.Overture.Preliminaries.html#4435" class="Function Operator">∥</a> <a id="13852" href="Base.Varieties.FreeAlgebras.html#13707" class="Bound">𝑓</a> <a id="13854" href="Base.Varieties.FreeAlgebras.html#13709" class="Bound">𝒕</a><a id="13855" class="Symbol">)</a><a id="13856" href="Base.Overture.Preliminaries.html#4990" class="Function Operator">⁻¹</a> <a id="13859" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">⟩</a>
  <a id="13863" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="13865" href="Base.Varieties.FreeAlgebras.html#11893" class="Function">hom𝔽</a> <a id="13870" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="13872" class="Symbol">(</a><a id="13873" href="Base.Terms.Basic.html#2104" class="InductiveConstructor">node</a> <a id="13878" href="Base.Varieties.FreeAlgebras.html#13707" class="Bound">𝑓</a> <a id="13880" href="Base.Varieties.FreeAlgebras.html#13709" class="Bound">𝒕</a><a id="13881" class="Symbol">)</a>           <a id="13893" href="Relation.Binary.PropositionalEquality.Core.html#3105" class="Function Operator">∎</a>
   <a id="13898" class="Keyword">where</a> <a id="13904" href="Base.Varieties.FreeAlgebras.html#13904" class="Function">wd-proof</a> <a id="13913" class="Symbol">=</a> <a id="13915" href="Base.Varieties.FreeAlgebras.html#10555" class="Bound">wd</a> <a id="13918" href="Base.Varieties.FreeAlgebras.html#1011" class="Bound">𝓥</a> <a id="13920" class="Symbol">(</a><a id="13921" href="Base.Varieties.FreeAlgebras.html#903" class="Primitive">lsuc</a> <a id="13926" class="Symbol">(</a><a id="13927" href="Base.Algebras.Products.html#3165" class="Function">ov</a> <a id="13930" href="Base.Varieties.FreeAlgebras.html#1007" class="Bound">α</a><a id="13931" class="Symbol">))</a>
                    <a id="13954" class="Symbol">(</a><a id="13955" href="Base.Varieties.FreeAlgebras.html#13707" class="Bound">𝑓</a> <a id="13957" href="Base.Algebras.Basic.html#9427" class="Function Operator">̂</a> <a id="13959" href="Base.Varieties.FreeAlgebras.html#11776" class="Function">𝔽</a><a id="13960" class="Symbol">)</a> <a id="13962" class="Symbol">(λ</a> <a id="13965" href="Base.Varieties.FreeAlgebras.html#13965" class="Bound">i</a> <a id="13967" class="Symbol">→</a> <a id="13969" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="13971" href="Base.Varieties.FreeAlgebras.html#13452" class="Function">𝔑</a> <a id="13973" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a><a id="13974" class="Symbol">(</a><a id="13975" href="Base.Varieties.FreeAlgebras.html#13709" class="Bound">𝒕</a> <a id="13977" href="Base.Varieties.FreeAlgebras.html#13965" class="Bound">i</a><a id="13978" class="Symbol">))</a> <a id="13981" class="Symbol">(λ</a> <a id="13984" href="Base.Varieties.FreeAlgebras.html#13984" class="Bound">i</a> <a id="13986" class="Symbol">→</a> <a id="13988" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="13990" href="Base.Varieties.FreeAlgebras.html#11893" class="Function">hom𝔽</a> <a id="13995" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="13997" class="Symbol">(</a><a id="13998" href="Base.Varieties.FreeAlgebras.html#13709" class="Bound">𝒕</a> <a id="14000" href="Base.Varieties.FreeAlgebras.html#13984" class="Bound">i</a><a id="14001" class="Symbol">))</a>
                    <a id="14024" class="Symbol">(λ</a> <a id="14027" href="Base.Varieties.FreeAlgebras.html#14027" class="Bound">x</a> <a id="14029" class="Symbol">→</a> <a id="14031" href="Base.Varieties.FreeAlgebras.html#13606" class="Function">hom𝔽-is-lift-hom</a><a id="14047" class="Symbol">(</a><a id="14048" href="Base.Varieties.FreeAlgebras.html#13709" class="Bound">𝒕</a> <a id="14050" href="Base.Varieties.FreeAlgebras.html#14027" class="Bound">x</a><a id="14051" class="Symbol">))</a>
</pre>

We need a three more lemmas before we are ready to tackle our main goal.

<pre class="Agda">

 <a id="14155" href="Base.Varieties.FreeAlgebras.html#14155" class="Function">ψlemma1</a> <a id="14163" class="Symbol">:</a> <a id="14165" href="Base.Relations.Discrete.html#4539" class="Function">kernel</a> <a id="14172" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="14174" href="Base.Varieties.FreeAlgebras.html#13452" class="Function">𝔑</a> <a id="14176" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="14178" href="Relation.Unary.html#1742" class="Function Operator">⊆</a> <a id="14180" href="Base.Varieties.FreeAlgebras.html#6484" class="Function">ψ</a> <a id="14182" href="Base.Varieties.FreeAlgebras.html#10583" class="Bound">𝒦</a>
 <a id="14185" href="Base.Varieties.FreeAlgebras.html#14155" class="Function">ψlemma1</a> <a id="14193" class="Symbol">{</a><a id="14194" href="Base.Varieties.FreeAlgebras.html#14194" class="Bound">p</a> <a id="14196" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="14198" href="Base.Varieties.FreeAlgebras.html#14198" class="Bound">q</a><a id="14199" class="Symbol">}</a> <a id="14201" href="Base.Varieties.FreeAlgebras.html#14201" class="Bound">𝔑pq</a> <a id="14205" href="Base.Varieties.FreeAlgebras.html#14205" class="Bound">𝑨</a> <a id="14207" href="Base.Varieties.FreeAlgebras.html#14207" class="Bound">sA</a> <a id="14210" href="Base.Varieties.FreeAlgebras.html#14210" class="Bound">h</a> <a id="14212" class="Symbol">=</a> <a id="14214" href="Base.Varieties.FreeAlgebras.html#14435" class="Function">γ</a>
  <a id="14218" class="Keyword">where</a>
   <a id="14227" href="Base.Varieties.FreeAlgebras.html#14227" class="Function">f</a> <a id="14229" class="Symbol">:</a> <a id="14231" href="Base.Homomorphisms.Basic.html#2682" class="Function">hom</a> <a id="14235" href="Base.Varieties.FreeAlgebras.html#11776" class="Function">𝔽</a> <a id="14237" href="Base.Varieties.FreeAlgebras.html#14205" class="Bound">𝑨</a>
   <a id="14242" href="Base.Varieties.FreeAlgebras.html#14227" class="Function">f</a> <a id="14244" class="Symbol">=</a> <a id="14246" href="Base.Varieties.FreeAlgebras.html#12768" class="Function">𝔽-lift-hom</a> <a id="14257" href="Base.Varieties.FreeAlgebras.html#14205" class="Bound">𝑨</a> <a id="14259" href="Base.Varieties.FreeAlgebras.html#14207" class="Bound">sA</a> <a id="14262" href="Base.Varieties.FreeAlgebras.html#14210" class="Bound">h</a>

   <a id="14268" href="Base.Varieties.FreeAlgebras.html#14268" class="Function">h&#39;</a> <a id="14271" href="Base.Varieties.FreeAlgebras.html#14271" class="Function">φ</a> <a id="14273" class="Symbol">:</a> <a id="14275" href="Base.Homomorphisms.Basic.html#2682" class="Function">hom</a> <a id="14279" class="Symbol">(</a><a id="14280" href="Base.Terms.Basic.html#3304" class="Function">𝑻</a> <a id="14282" href="Base.Varieties.FreeAlgebras.html#10570" class="Bound">X</a><a id="14283" class="Symbol">)</a> <a id="14285" href="Base.Varieties.FreeAlgebras.html#14205" class="Bound">𝑨</a>
   <a id="14290" href="Base.Varieties.FreeAlgebras.html#14268" class="Function">h&#39;</a> <a id="14293" class="Symbol">=</a> <a id="14295" href="Base.Homomorphisms.Properties.html#1396" class="Function">∘-hom</a> <a id="14301" class="Symbol">(</a><a id="14302" href="Base.Terms.Basic.html#3304" class="Function">𝑻</a> <a id="14304" href="Base.Varieties.FreeAlgebras.html#10570" class="Bound">X</a><a id="14305" class="Symbol">)</a> <a id="14307" href="Base.Varieties.FreeAlgebras.html#14205" class="Bound">𝑨</a> <a id="14309" href="Base.Varieties.FreeAlgebras.html#13452" class="Function">𝔑</a> <a id="14311" href="Base.Varieties.FreeAlgebras.html#14227" class="Function">f</a>
   <a id="14316" href="Base.Varieties.FreeAlgebras.html#14271" class="Function">φ</a> <a id="14318" class="Symbol">=</a> <a id="14320" href="Base.Terms.Properties.html#3296" class="Function">lift-hom</a> <a id="14329" href="Base.Varieties.FreeAlgebras.html#14205" class="Bound">𝑨</a> <a id="14331" href="Base.Varieties.FreeAlgebras.html#14210" class="Bound">h</a>

   <a id="14337" href="Base.Varieties.FreeAlgebras.html#14337" class="Function">h≡φ</a> <a id="14341" class="Symbol">:</a> <a id="14343" class="Symbol">∀</a> <a id="14345" href="Base.Varieties.FreeAlgebras.html#14345" class="Bound">t</a> <a id="14347" class="Symbol">→</a> <a id="14349" class="Symbol">(</a><a id="14350" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="14352" href="Base.Varieties.FreeAlgebras.html#14227" class="Function">f</a> <a id="14354" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="14356" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="14358" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="14360" href="Base.Varieties.FreeAlgebras.html#13452" class="Function">𝔑</a> <a id="14362" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a><a id="14363" class="Symbol">)</a> <a id="14365" href="Base.Varieties.FreeAlgebras.html#14345" class="Bound">t</a> <a id="14367" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="14369" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="14371" href="Base.Varieties.FreeAlgebras.html#14271" class="Function">φ</a> <a id="14373" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="14375" href="Base.Varieties.FreeAlgebras.html#14345" class="Bound">t</a>
   <a id="14380" href="Base.Varieties.FreeAlgebras.html#14337" class="Function">h≡φ</a> <a id="14384" href="Base.Varieties.FreeAlgebras.html#14384" class="Bound">t</a> <a id="14386" class="Symbol">=</a> <a id="14388" href="Base.Terms.Properties.html#3695" class="Function">free-unique</a> <a id="14400" class="Symbol">(</a><a id="14401" href="Base.Varieties.FreeAlgebras.html#10555" class="Bound">wd</a> <a id="14404" href="Base.Varieties.FreeAlgebras.html#1011" class="Bound">𝓥</a> <a id="14406" href="Base.Varieties.FreeAlgebras.html#1007" class="Bound">α</a><a id="14407" class="Symbol">)</a> <a id="14409" href="Base.Varieties.FreeAlgebras.html#14205" class="Bound">𝑨</a> <a id="14411" href="Base.Varieties.FreeAlgebras.html#14268" class="Function">h&#39;</a> <a id="14414" href="Base.Varieties.FreeAlgebras.html#14271" class="Function">φ</a> <a id="14416" class="Symbol">(λ</a> <a id="14419" href="Base.Varieties.FreeAlgebras.html#14419" class="Bound">x</a> <a id="14421" class="Symbol">→</a> <a id="14423" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="14427" class="Symbol">)</a> <a id="14429" href="Base.Varieties.FreeAlgebras.html#14384" class="Bound">t</a>

   <a id="14435" href="Base.Varieties.FreeAlgebras.html#14435" class="Function">γ</a> <a id="14437" class="Symbol">:</a> <a id="14439" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="14441" href="Base.Varieties.FreeAlgebras.html#14271" class="Function">φ</a> <a id="14443" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="14445" href="Base.Varieties.FreeAlgebras.html#14194" class="Bound">p</a> <a id="14447" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="14449" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="14451" href="Base.Varieties.FreeAlgebras.html#14271" class="Function">φ</a> <a id="14453" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="14455" href="Base.Varieties.FreeAlgebras.html#14198" class="Bound">q</a>
   <a id="14460" href="Base.Varieties.FreeAlgebras.html#14435" class="Function">γ</a> <a id="14462" class="Symbol">=</a> <a id="14464" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="14466" href="Base.Varieties.FreeAlgebras.html#14271" class="Function">φ</a> <a id="14468" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="14470" href="Base.Varieties.FreeAlgebras.html#14194" class="Bound">p</a>             <a id="14484" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">≡⟨</a> <a id="14487" class="Symbol">(</a><a id="14488" href="Base.Varieties.FreeAlgebras.html#14337" class="Function">h≡φ</a> <a id="14492" href="Base.Varieties.FreeAlgebras.html#14194" class="Bound">p</a><a id="14493" class="Symbol">)</a><a id="14494" href="Base.Overture.Preliminaries.html#4990" class="Function Operator">⁻¹</a> <a id="14497" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">⟩</a>
       <a id="14506" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="14508" href="Base.Varieties.FreeAlgebras.html#14227" class="Function">f</a> <a id="14510" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="14512" class="Symbol">(</a> <a id="14514" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="14516" href="Base.Varieties.FreeAlgebras.html#13452" class="Function">𝔑</a> <a id="14518" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="14520" href="Base.Varieties.FreeAlgebras.html#14194" class="Bound">p</a> <a id="14522" class="Symbol">)</a>   <a id="14526" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">≡⟨</a> <a id="14529" href="Relation.Binary.PropositionalEquality.Core.html#1130" class="Function">cong</a> <a id="14534" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="14536" href="Base.Varieties.FreeAlgebras.html#14227" class="Function">f</a> <a id="14538" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="14540" href="Base.Varieties.FreeAlgebras.html#14201" class="Bound">𝔑pq</a> <a id="14544" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">⟩</a>
       <a id="14553" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="14555" href="Base.Varieties.FreeAlgebras.html#14227" class="Function">f</a> <a id="14557" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="14559" class="Symbol">(</a> <a id="14561" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="14563" href="Base.Varieties.FreeAlgebras.html#13452" class="Function">𝔑</a> <a id="14565" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="14567" href="Base.Varieties.FreeAlgebras.html#14198" class="Bound">q</a> <a id="14569" class="Symbol">)</a>   <a id="14573" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">≡⟨</a> <a id="14576" href="Base.Varieties.FreeAlgebras.html#14337" class="Function">h≡φ</a> <a id="14580" href="Base.Varieties.FreeAlgebras.html#14198" class="Bound">q</a> <a id="14582" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">⟩</a>
       <a id="14591" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="14593" href="Base.Varieties.FreeAlgebras.html#14271" class="Function">φ</a> <a id="14595" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="14597" href="Base.Varieties.FreeAlgebras.html#14198" class="Bound">q</a>             <a id="14611" href="Relation.Binary.PropositionalEquality.Core.html#3105" class="Function Operator">∎</a>


 <a id="14616" href="Base.Varieties.FreeAlgebras.html#14616" class="Function">ψlemma2</a> <a id="14624" class="Symbol">:</a> <a id="14626" href="Base.Relations.Discrete.html#4539" class="Function">kernel</a> <a id="14633" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="14635" href="Base.Varieties.FreeAlgebras.html#11893" class="Function">hom𝔽</a> <a id="14640" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="14642" href="Relation.Unary.html#1742" class="Function Operator">⊆</a> <a id="14644" href="Base.Varieties.FreeAlgebras.html#6484" class="Function">ψ</a> <a id="14646" href="Base.Varieties.FreeAlgebras.html#10583" class="Bound">𝒦</a>
 <a id="14649" href="Base.Varieties.FreeAlgebras.html#14616" class="Function">ψlemma2</a> <a id="14657" class="Symbol">{</a><a id="14658" href="Base.Varieties.FreeAlgebras.html#14658" class="Bound">p</a> <a id="14660" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="14662" href="Base.Varieties.FreeAlgebras.html#14662" class="Bound">q</a><a id="14663" class="Symbol">}</a> <a id="14665" href="Base.Varieties.FreeAlgebras.html#14665" class="Bound">x</a> <a id="14667" class="Symbol">=</a> <a id="14669" href="Base.Varieties.FreeAlgebras.html#14155" class="Function">ψlemma1</a> <a id="14677" class="Symbol">{</a><a id="14678" href="Base.Varieties.FreeAlgebras.html#14658" class="Bound">p</a> <a id="14680" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="14682" href="Base.Varieties.FreeAlgebras.html#14662" class="Bound">q</a><a id="14683" class="Symbol">}</a> <a id="14685" href="Base.Varieties.FreeAlgebras.html#14700" class="Function">γ</a>
   <a id="14690" class="Keyword">where</a>
    <a id="14700" href="Base.Varieties.FreeAlgebras.html#14700" class="Function">γ</a> <a id="14702" class="Symbol">:</a> <a id="14704" class="Symbol">(</a><a id="14705" href="Base.Terms.Properties.html#2589" class="Function">free-lift</a> <a id="14715" href="Base.Varieties.FreeAlgebras.html#11776" class="Function">𝔽</a> <a id="14717" href="Base.Varieties.FreeAlgebras.html#13353" class="Function">X↪𝔽</a><a id="14720" class="Symbol">)</a> <a id="14722" href="Base.Varieties.FreeAlgebras.html#14658" class="Bound">p</a> <a id="14724" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="14726" class="Symbol">(</a><a id="14727" href="Base.Terms.Properties.html#2589" class="Function">free-lift</a> <a id="14737" href="Base.Varieties.FreeAlgebras.html#11776" class="Function">𝔽</a> <a id="14739" href="Base.Varieties.FreeAlgebras.html#13353" class="Function">X↪𝔽</a><a id="14742" class="Symbol">)</a> <a id="14744" href="Base.Varieties.FreeAlgebras.html#14662" class="Bound">q</a>
    <a id="14750" href="Base.Varieties.FreeAlgebras.html#14700" class="Function">γ</a> <a id="14752" class="Symbol">=</a> <a id="14754" class="Symbol">(</a><a id="14755" href="Base.Varieties.FreeAlgebras.html#13606" class="Function">hom𝔽-is-lift-hom</a> <a id="14772" href="Base.Varieties.FreeAlgebras.html#14658" class="Bound">p</a><a id="14773" class="Symbol">)</a> <a id="14775" href="Base.Overture.Preliminaries.html#5316" class="Function Operator">∙</a> <a id="14777" href="Base.Varieties.FreeAlgebras.html#14665" class="Bound">x</a> <a id="14779" href="Base.Overture.Preliminaries.html#5316" class="Function Operator">∙</a> <a id="14781" class="Symbol">(</a><a id="14782" href="Base.Varieties.FreeAlgebras.html#13606" class="Function">hom𝔽-is-lift-hom</a> <a id="14799" href="Base.Varieties.FreeAlgebras.html#14662" class="Bound">q</a><a id="14800" class="Symbol">)</a><a id="14801" href="Base.Overture.Preliminaries.html#4990" class="Function Operator">⁻¹</a>


 <a id="14807" href="Base.Varieties.FreeAlgebras.html#14807" class="Function">ψlemma3</a> <a id="14815" class="Symbol">:</a> <a id="14817" class="Symbol">∀</a> <a id="14819" href="Base.Varieties.FreeAlgebras.html#14819" class="Bound">p</a> <a id="14821" href="Base.Varieties.FreeAlgebras.html#14821" class="Bound">q</a> <a id="14823" class="Symbol">→</a> <a id="14825" class="Symbol">(</a><a id="14826" href="Base.Varieties.FreeAlgebras.html#14819" class="Bound">p</a> <a id="14828" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="14830" href="Base.Varieties.FreeAlgebras.html#14821" class="Bound">q</a><a id="14831" class="Symbol">)</a> <a id="14833" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="14835" href="Base.Varieties.FreeAlgebras.html#6484" class="Function">ψ</a><a id="14836" class="Symbol">{</a><a id="14837" class="Argument">X</a> <a id="14839" class="Symbol">=</a> <a id="14841" href="Base.Varieties.FreeAlgebras.html#10570" class="Bound">X</a><a id="14842" class="Symbol">}</a> <a id="14844" href="Base.Varieties.FreeAlgebras.html#10583" class="Bound">𝒦</a> <a id="14846" class="Symbol">→</a> <a id="14848" href="Base.Varieties.FreeAlgebras.html#10583" class="Bound">𝒦</a> <a id="14850" href="Base.Varieties.EquationalLogic.html#2766" class="Function Operator">⊫</a> <a id="14852" href="Base.Varieties.FreeAlgebras.html#14819" class="Bound">p</a> <a id="14854" href="Base.Varieties.EquationalLogic.html#2766" class="Function Operator">≈</a> <a id="14856" href="Base.Varieties.FreeAlgebras.html#14821" class="Bound">q</a>
 <a id="14859" href="Base.Varieties.FreeAlgebras.html#14807" class="Function">ψlemma3</a> <a id="14867" href="Base.Varieties.FreeAlgebras.html#14867" class="Bound">p</a> <a id="14869" href="Base.Varieties.FreeAlgebras.html#14869" class="Bound">q</a> <a id="14871" href="Base.Varieties.FreeAlgebras.html#14871" class="Bound">pψq</a> <a id="14875" class="Symbol">{</a><a id="14876" href="Base.Varieties.FreeAlgebras.html#14876" class="Bound">𝑨</a><a id="14877" class="Symbol">}</a> <a id="14879" href="Base.Varieties.FreeAlgebras.html#14879" class="Bound">kA</a> <a id="14882" href="Base.Varieties.FreeAlgebras.html#14882" class="Bound">h</a> <a id="14884" class="Symbol">=</a> <a id="14886" href="Base.Varieties.FreeAlgebras.html#14903" class="Function">goal</a>
   <a id="14894" class="Keyword">where</a>
   <a id="14903" href="Base.Varieties.FreeAlgebras.html#14903" class="Function">goal</a> <a id="14908" class="Symbol">:</a> <a id="14910" class="Symbol">(</a><a id="14911" href="Base.Varieties.FreeAlgebras.html#14876" class="Bound">𝑨</a> <a id="14913" href="Base.Terms.Operations.html#2637" class="Function Operator">⟦</a> <a id="14915" href="Base.Varieties.FreeAlgebras.html#14867" class="Bound">p</a> <a id="14917" href="Base.Terms.Operations.html#2637" class="Function Operator">⟧</a><a id="14918" class="Symbol">)</a> <a id="14920" href="Base.Varieties.FreeAlgebras.html#14882" class="Bound">h</a> <a id="14922" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="14924" class="Symbol">(</a><a id="14925" href="Base.Varieties.FreeAlgebras.html#14876" class="Bound">𝑨</a> <a id="14927" href="Base.Terms.Operations.html#2637" class="Function Operator">⟦</a> <a id="14929" href="Base.Varieties.FreeAlgebras.html#14869" class="Bound">q</a> <a id="14931" href="Base.Terms.Operations.html#2637" class="Function Operator">⟧</a><a id="14932" class="Symbol">)</a> <a id="14934" href="Base.Varieties.FreeAlgebras.html#14882" class="Bound">h</a>
   <a id="14939" href="Base.Varieties.FreeAlgebras.html#14903" class="Function">goal</a> <a id="14944" class="Symbol">=</a> <a id="14946" class="Symbol">(</a><a id="14947" href="Base.Varieties.FreeAlgebras.html#14876" class="Bound">𝑨</a> <a id="14949" href="Base.Terms.Operations.html#2637" class="Function Operator">⟦</a> <a id="14951" href="Base.Varieties.FreeAlgebras.html#14867" class="Bound">p</a> <a id="14953" href="Base.Terms.Operations.html#2637" class="Function Operator">⟧</a><a id="14954" class="Symbol">)</a> <a id="14956" href="Base.Varieties.FreeAlgebras.html#14882" class="Bound">h</a>       <a id="14964" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">≡⟨</a> <a id="14967" href="Base.Terms.Operations.html#2948" class="Function">free-lift-interp</a> <a id="14984" class="Symbol">(</a><a id="14985" href="Base.Varieties.FreeAlgebras.html#10555" class="Bound">wd</a> <a id="14988" href="Base.Varieties.FreeAlgebras.html#1011" class="Bound">𝓥</a> <a id="14990" href="Base.Varieties.FreeAlgebras.html#1007" class="Bound">α</a><a id="14991" class="Symbol">)</a> <a id="14993" href="Base.Varieties.FreeAlgebras.html#14876" class="Bound">𝑨</a> <a id="14995" href="Base.Varieties.FreeAlgebras.html#14882" class="Bound">h</a> <a id="14997" href="Base.Varieties.FreeAlgebras.html#14867" class="Bound">p</a> <a id="14999" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">⟩</a>
          <a id="15011" class="Symbol">(</a><a id="15012" href="Base.Terms.Properties.html#2589" class="Function">free-lift</a> <a id="15022" href="Base.Varieties.FreeAlgebras.html#14876" class="Bound">𝑨</a> <a id="15024" href="Base.Varieties.FreeAlgebras.html#14882" class="Bound">h</a><a id="15025" class="Symbol">)</a> <a id="15027" href="Base.Varieties.FreeAlgebras.html#14867" class="Bound">p</a> <a id="15029" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">≡⟨</a> <a id="15032" href="Base.Varieties.FreeAlgebras.html#14871" class="Bound">pψq</a> <a id="15036" href="Base.Varieties.FreeAlgebras.html#14876" class="Bound">𝑨</a> <a id="15038" class="Symbol">(</a><a id="15039" href="Base.Varieties.Closure.html#4344" class="InductiveConstructor">siso</a> <a id="15044" class="Symbol">(</a><a id="15045" href="Base.Varieties.Closure.html#4146" class="InductiveConstructor">sbase</a> <a id="15051" href="Base.Varieties.FreeAlgebras.html#14879" class="Bound">kA</a><a id="15053" class="Symbol">)</a> <a id="15055" class="Symbol">(</a><a id="15056" href="Base.Homomorphisms.Isomorphisms.html#3009" class="Function">≅-sym</a> <a id="15062" href="Base.Homomorphisms.Isomorphisms.html#4453" class="Function">Lift-≅</a><a id="15068" class="Symbol">))</a> <a id="15071" href="Base.Varieties.FreeAlgebras.html#14882" class="Bound">h</a> <a id="15073" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">⟩</a>
          <a id="15085" class="Symbol">(</a><a id="15086" href="Base.Terms.Properties.html#2589" class="Function">free-lift</a> <a id="15096" href="Base.Varieties.FreeAlgebras.html#14876" class="Bound">𝑨</a> <a id="15098" href="Base.Varieties.FreeAlgebras.html#14882" class="Bound">h</a><a id="15099" class="Symbol">)</a> <a id="15101" href="Base.Varieties.FreeAlgebras.html#14869" class="Bound">q</a> <a id="15103" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">≡⟨</a> <a id="15106" class="Symbol">(</a><a id="15107" href="Base.Terms.Operations.html#2948" class="Function">free-lift-interp</a> <a id="15124" class="Symbol">(</a><a id="15125" href="Base.Varieties.FreeAlgebras.html#10555" class="Bound">wd</a> <a id="15128" href="Base.Varieties.FreeAlgebras.html#1011" class="Bound">𝓥</a> <a id="15130" href="Base.Varieties.FreeAlgebras.html#1007" class="Bound">α</a><a id="15131" class="Symbol">)</a> <a id="15133" href="Base.Varieties.FreeAlgebras.html#14876" class="Bound">𝑨</a> <a id="15135" href="Base.Varieties.FreeAlgebras.html#14882" class="Bound">h</a> <a id="15137" href="Base.Varieties.FreeAlgebras.html#14869" class="Bound">q</a><a id="15138" class="Symbol">)</a><a id="15139" href="Base.Overture.Preliminaries.html#4990" class="Function Operator">⁻¹</a>  <a id="15143" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">⟩</a>
          <a id="15155" class="Symbol">(</a><a id="15156" href="Base.Varieties.FreeAlgebras.html#14876" class="Bound">𝑨</a> <a id="15158" href="Base.Terms.Operations.html#2637" class="Function Operator">⟦</a> <a id="15160" href="Base.Varieties.FreeAlgebras.html#14869" class="Bound">q</a> <a id="15162" href="Base.Terms.Operations.html#2637" class="Function Operator">⟧</a><a id="15163" class="Symbol">)</a> <a id="15165" href="Base.Varieties.FreeAlgebras.html#14882" class="Bound">h</a>       <a id="15173" href="Relation.Binary.PropositionalEquality.Core.html#3105" class="Function Operator">∎</a>

</pre>

With these results in hand, it is now trivial to prove the main theorem of this subsection.

<pre class="Agda">

 <a id="15296" href="Base.Varieties.FreeAlgebras.html#15296" class="Function">class-models-kernel</a> <a id="15316" class="Symbol">:</a> <a id="15318" class="Symbol">∀</a> <a id="15320" href="Base.Varieties.FreeAlgebras.html#15320" class="Bound">p</a> <a id="15322" href="Base.Varieties.FreeAlgebras.html#15322" class="Bound">q</a> <a id="15324" class="Symbol">→</a> <a id="15326" class="Symbol">(</a><a id="15327" href="Base.Varieties.FreeAlgebras.html#15320" class="Bound">p</a> <a id="15329" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="15331" href="Base.Varieties.FreeAlgebras.html#15322" class="Bound">q</a><a id="15332" class="Symbol">)</a> <a id="15334" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="15336" href="Base.Relations.Discrete.html#4539" class="Function">kernel</a> <a id="15343" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="15345" href="Base.Varieties.FreeAlgebras.html#11893" class="Function">hom𝔽</a> <a id="15350" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="15352" class="Symbol">→</a> <a id="15354" href="Base.Varieties.FreeAlgebras.html#10583" class="Bound">𝒦</a> <a id="15356" href="Base.Varieties.EquationalLogic.html#2766" class="Function Operator">⊫</a> <a id="15358" href="Base.Varieties.FreeAlgebras.html#15320" class="Bound">p</a> <a id="15360" href="Base.Varieties.EquationalLogic.html#2766" class="Function Operator">≈</a> <a id="15362" href="Base.Varieties.FreeAlgebras.html#15322" class="Bound">q</a>
 <a id="15365" href="Base.Varieties.FreeAlgebras.html#15296" class="Function">class-models-kernel</a> <a id="15385" href="Base.Varieties.FreeAlgebras.html#15385" class="Bound">p</a> <a id="15387" href="Base.Varieties.FreeAlgebras.html#15387" class="Bound">q</a> <a id="15389" href="Base.Varieties.FreeAlgebras.html#15389" class="Bound">x</a> <a id="15391" class="Symbol">=</a> <a id="15393" href="Base.Varieties.FreeAlgebras.html#14807" class="Function">ψlemma3</a> <a id="15401" href="Base.Varieties.FreeAlgebras.html#15385" class="Bound">p</a> <a id="15403" href="Base.Varieties.FreeAlgebras.html#15387" class="Bound">q</a> <a id="15405" class="Symbol">(</a><a id="15406" href="Base.Varieties.FreeAlgebras.html#14616" class="Function">ψlemma2</a> <a id="15414" href="Base.Varieties.FreeAlgebras.html#15389" class="Bound">x</a><a id="15415" class="Symbol">)</a>

 <a id="15419" href="Base.Varieties.FreeAlgebras.html#15419" class="Function">𝕍𝒦</a> <a id="15422" class="Symbol">:</a> <a id="15424" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="15429" class="Symbol">(</a><a id="15430" href="Base.Algebras.Basic.html#6252" class="Function">Algebra</a> <a id="15438" href="Base.Varieties.FreeAlgebras.html#3948" class="Function">𝓕⁺</a> <a id="15441" href="Base.Varieties.FreeAlgebras.html#1023" class="Bound">𝑆</a><a id="15442" class="Symbol">)</a> <a id="15444" class="Symbol">(</a><a id="15445" href="Base.Varieties.FreeAlgebras.html#903" class="Primitive">lsuc</a> <a id="15450" href="Base.Varieties.FreeAlgebras.html#3948" class="Function">𝓕⁺</a><a id="15452" class="Symbol">)</a>
 <a id="15455" href="Base.Varieties.FreeAlgebras.html#15419" class="Function">𝕍𝒦</a> <a id="15458" class="Symbol">=</a> <a id="15460" href="Base.Varieties.Closure.html#5587" class="Datatype">V</a><a id="15461" class="Symbol">{</a><a id="15462" class="Argument">α</a> <a id="15464" class="Symbol">=</a> <a id="15466" href="Base.Varieties.FreeAlgebras.html#1007" class="Bound">α</a><a id="15467" class="Symbol">}{</a><a id="15469" class="Argument">β</a> <a id="15471" class="Symbol">=</a> <a id="15473" href="Base.Varieties.FreeAlgebras.html#3948" class="Function">𝓕⁺</a><a id="15475" class="Symbol">}</a> <a id="15477" href="Base.Varieties.FreeAlgebras.html#10583" class="Bound">𝒦</a>

 <a id="15481" href="Base.Varieties.FreeAlgebras.html#15481" class="Function">kernel-in-theory&#39;</a> <a id="15499" class="Symbol">:</a> <a id="15501" href="Base.Relations.Discrete.html#4539" class="Function">kernel</a> <a id="15508" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="15510" href="Base.Varieties.FreeAlgebras.html#11893" class="Function">hom𝔽</a> <a id="15515" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="15517" href="Relation.Unary.html#1742" class="Function Operator">⊆</a> <a id="15519" href="Base.Varieties.EquationalLogic.html#3560" class="Function">Th</a> <a id="15522" class="Symbol">(</a><a id="15523" href="Base.Varieties.Closure.html#5587" class="Datatype">V</a> <a id="15525" href="Base.Varieties.FreeAlgebras.html#10583" class="Bound">𝒦</a><a id="15526" class="Symbol">)</a>
 <a id="15529" href="Base.Varieties.FreeAlgebras.html#15481" class="Function">kernel-in-theory&#39;</a> <a id="15547" class="Symbol">{</a><a id="15548" href="Base.Varieties.FreeAlgebras.html#15548" class="Bound">p</a> <a id="15550" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="15552" href="Base.Varieties.FreeAlgebras.html#15552" class="Bound">q</a><a id="15553" class="Symbol">}</a> <a id="15555" href="Base.Varieties.FreeAlgebras.html#15555" class="Bound">pKq</a> <a id="15559" class="Symbol">=</a> <a id="15561" class="Symbol">(</a><a id="15562" href="Base.Varieties.Preservation.html#20608" class="Function">class-ids-⇒</a> <a id="15574" href="Base.Varieties.FreeAlgebras.html#10541" class="Bound">fe</a> <a id="15577" href="Base.Varieties.FreeAlgebras.html#10555" class="Bound">wd</a> <a id="15580" href="Base.Varieties.FreeAlgebras.html#15548" class="Bound">p</a> <a id="15582" href="Base.Varieties.FreeAlgebras.html#15552" class="Bound">q</a> <a id="15584" class="Symbol">(</a><a id="15585" href="Base.Varieties.FreeAlgebras.html#15296" class="Function">class-models-kernel</a> <a id="15605" href="Base.Varieties.FreeAlgebras.html#15548" class="Bound">p</a> <a id="15607" href="Base.Varieties.FreeAlgebras.html#15552" class="Bound">q</a> <a id="15609" href="Base.Varieties.FreeAlgebras.html#15555" class="Bound">pKq</a><a id="15612" class="Symbol">))</a>

 <a id="15617" href="Base.Varieties.FreeAlgebras.html#15617" class="Function">kernel-in-theory</a> <a id="15634" class="Symbol">:</a> <a id="15636" href="Base.Relations.Discrete.html#4539" class="Function">kernel</a> <a id="15643" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="15645" href="Base.Varieties.FreeAlgebras.html#11893" class="Function">hom𝔽</a> <a id="15650" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="15652" href="Relation.Unary.html#1742" class="Function Operator">⊆</a> <a id="15654" href="Base.Varieties.EquationalLogic.html#3560" class="Function">Th</a> <a id="15657" href="Base.Varieties.FreeAlgebras.html#15419" class="Function">𝕍𝒦</a>
 <a id="15661" href="Base.Varieties.FreeAlgebras.html#15617" class="Function">kernel-in-theory</a> <a id="15678" class="Symbol">{</a><a id="15679" href="Base.Varieties.FreeAlgebras.html#15679" class="Bound">p</a> <a id="15681" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="15683" href="Base.Varieties.FreeAlgebras.html#15683" class="Bound">q</a><a id="15684" class="Symbol">}</a> <a id="15686" href="Base.Varieties.FreeAlgebras.html#15686" class="Bound">pKq</a> <a id="15690" href="Base.Varieties.FreeAlgebras.html#15690" class="Bound">vkA</a> <a id="15694" href="Base.Varieties.FreeAlgebras.html#15694" class="Bound">x</a> <a id="15696" class="Symbol">=</a> <a id="15698" href="Base.Varieties.Preservation.html#20721" class="Function">class-ids</a> <a id="15708" href="Base.Varieties.FreeAlgebras.html#10541" class="Bound">fe</a> <a id="15711" href="Base.Varieties.FreeAlgebras.html#10555" class="Bound">wd</a> <a id="15714" href="Base.Varieties.FreeAlgebras.html#15679" class="Bound">p</a> <a id="15716" href="Base.Varieties.FreeAlgebras.html#15683" class="Bound">q</a> <a id="15718" class="Symbol">(</a><a id="15719" href="Base.Varieties.FreeAlgebras.html#15296" class="Function">class-models-kernel</a> <a id="15739" href="Base.Varieties.FreeAlgebras.html#15679" class="Bound">p</a> <a id="15741" href="Base.Varieties.FreeAlgebras.html#15683" class="Bound">q</a> <a id="15743" href="Base.Varieties.FreeAlgebras.html#15686" class="Bound">pKq</a><a id="15746" class="Symbol">)</a> <a id="15748" href="Base.Varieties.FreeAlgebras.html#15690" class="Bound">vkA</a> <a id="15752" href="Base.Varieties.FreeAlgebras.html#15694" class="Bound">x</a>

 <a id="15756" href="Base.Varieties.FreeAlgebras.html#15756" class="Function Operator">_↠_</a> <a id="15760" class="Symbol">:</a> <a id="15762" href="Base.Varieties.FreeAlgebras.html#1302" class="Primitive">Type</a> <a id="15767" href="Base.Varieties.FreeAlgebras.html#1007" class="Bound">α</a> <a id="15769" class="Symbol">→</a> <a id="15771" href="Base.Algebras.Basic.html#6252" class="Function">Algebra</a> <a id="15779" href="Base.Varieties.FreeAlgebras.html#3948" class="Function">𝓕⁺</a> <a id="15782" href="Base.Varieties.FreeAlgebras.html#1023" class="Bound">𝑆</a> <a id="15784" class="Symbol">→</a> <a id="15786" href="Base.Varieties.FreeAlgebras.html#1302" class="Primitive">Type</a> <a id="15791" href="Base.Varieties.FreeAlgebras.html#3948" class="Function">𝓕⁺</a>
 <a id="15795" href="Base.Varieties.FreeAlgebras.html#15795" class="Bound">X</a> <a id="15797" href="Base.Varieties.FreeAlgebras.html#15756" class="Function Operator">↠</a> <a id="15799" href="Base.Varieties.FreeAlgebras.html#15799" class="Bound">𝑨</a> <a id="15801" class="Symbol">=</a> <a id="15803" href="Data.Product.html#916" class="Function">Σ[</a> <a id="15806" href="Base.Varieties.FreeAlgebras.html#15806" class="Bound">h</a> <a id="15808" href="Data.Product.html#916" class="Function">∈</a> <a id="15810" class="Symbol">(</a><a id="15811" href="Base.Varieties.FreeAlgebras.html#15795" class="Bound">X</a> <a id="15813" class="Symbol">→</a> <a id="15815" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="15817" href="Base.Varieties.FreeAlgebras.html#15799" class="Bound">𝑨</a> <a id="15819" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a><a id="15820" class="Symbol">)</a> <a id="15822" href="Data.Product.html#916" class="Function">]</a> <a id="15824" href="Base.Overture.Surjective.html#1692" class="Function">IsSurjective</a> <a id="15837" href="Base.Varieties.FreeAlgebras.html#15806" class="Bound">h</a>

 <a id="15841" href="Base.Varieties.FreeAlgebras.html#15841" class="Function">𝔽-ModTh-epi</a> <a id="15853" class="Symbol">:</a> <a id="15855" class="Symbol">(</a><a id="15856" href="Base.Varieties.FreeAlgebras.html#15856" class="Bound">𝑨</a> <a id="15858" class="Symbol">:</a> <a id="15860" href="Base.Algebras.Basic.html#6252" class="Function">Algebra</a> <a id="15868" href="Base.Varieties.FreeAlgebras.html#3948" class="Function">𝓕⁺</a> <a id="15871" href="Base.Varieties.FreeAlgebras.html#1023" class="Bound">𝑆</a><a id="15872" class="Symbol">)</a> <a id="15874" class="Symbol">→</a> <a id="15876" class="Symbol">(</a><a id="15877" href="Base.Varieties.FreeAlgebras.html#10570" class="Bound">X</a> <a id="15879" href="Base.Varieties.FreeAlgebras.html#15756" class="Function Operator">↠</a> <a id="15881" href="Base.Varieties.FreeAlgebras.html#15856" class="Bound">𝑨</a><a id="15882" class="Symbol">)</a> <a id="15884" class="Symbol">→</a> <a id="15886" href="Base.Varieties.FreeAlgebras.html#15856" class="Bound">𝑨</a> <a id="15888" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="15890" href="Base.Varieties.EquationalLogic.html#4134" class="Function">Mod</a> <a id="15894" class="Symbol">(</a><a id="15895" href="Base.Varieties.EquationalLogic.html#3560" class="Function">Th</a> <a id="15898" href="Base.Varieties.FreeAlgebras.html#15419" class="Function">𝕍𝒦</a><a id="15900" class="Symbol">)</a> <a id="15902" class="Symbol">→</a> <a id="15904" href="Base.Homomorphisms.Basic.html#4326" class="Function">epi</a> <a id="15908" href="Base.Varieties.FreeAlgebras.html#11776" class="Function">𝔽</a> <a id="15910" href="Base.Varieties.FreeAlgebras.html#15856" class="Bound">𝑨</a>
 <a id="15913" href="Base.Varieties.FreeAlgebras.html#15841" class="Function">𝔽-ModTh-epi</a> <a id="15925" href="Base.Varieties.FreeAlgebras.html#15925" class="Bound">𝑨</a> <a id="15927" class="Symbol">(</a><a id="15928" href="Base.Varieties.FreeAlgebras.html#15928" class="Bound">η</a> <a id="15930" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="15932" href="Base.Varieties.FreeAlgebras.html#15932" class="Bound">ηE</a><a id="15934" class="Symbol">)</a> <a id="15936" href="Base.Varieties.FreeAlgebras.html#15936" class="Bound">AinMTV</a> <a id="15943" class="Symbol">=</a> <a id="15945" href="Base.Varieties.FreeAlgebras.html#16457" class="Function">goal</a>
  <a id="15952" class="Keyword">where</a>
  <a id="15960" href="Base.Varieties.FreeAlgebras.html#15960" class="Function">φ</a> <a id="15962" class="Symbol">:</a> <a id="15964" href="Base.Homomorphisms.Basic.html#2682" class="Function">hom</a> <a id="15968" class="Symbol">(</a><a id="15969" href="Base.Terms.Basic.html#3304" class="Function">𝑻</a> <a id="15971" href="Base.Varieties.FreeAlgebras.html#10570" class="Bound">X</a><a id="15972" class="Symbol">)</a> <a id="15974" href="Base.Varieties.FreeAlgebras.html#15925" class="Bound">𝑨</a>
  <a id="15978" href="Base.Varieties.FreeAlgebras.html#15960" class="Function">φ</a> <a id="15980" class="Symbol">=</a> <a id="15982" href="Base.Terms.Properties.html#3296" class="Function">lift-hom</a> <a id="15991" href="Base.Varieties.FreeAlgebras.html#15925" class="Bound">𝑨</a> <a id="15993" href="Base.Varieties.FreeAlgebras.html#15928" class="Bound">η</a>

  <a id="15998" href="Base.Varieties.FreeAlgebras.html#15998" class="Function">φE</a> <a id="16001" class="Symbol">:</a> <a id="16003" href="Base.Overture.Surjective.html#1692" class="Function">IsSurjective</a> <a id="16016" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="16018" href="Base.Varieties.FreeAlgebras.html#15960" class="Function">φ</a> <a id="16020" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a>
  <a id="16024" href="Base.Varieties.FreeAlgebras.html#15998" class="Function">φE</a> <a id="16027" class="Symbol">=</a> <a id="16029" href="Base.Terms.Properties.html#4901" class="Function">lift-of-epi-is-epi</a> <a id="16048" href="Base.Varieties.FreeAlgebras.html#15925" class="Bound">𝑨</a> <a id="16050" href="Base.Varieties.FreeAlgebras.html#15932" class="Bound">ηE</a>

  <a id="16056" href="Base.Varieties.FreeAlgebras.html#16056" class="Function">pqlem2</a> <a id="16063" class="Symbol">:</a> <a id="16065" class="Symbol">∀</a> <a id="16067" href="Base.Varieties.FreeAlgebras.html#16067" class="Bound">p</a> <a id="16069" href="Base.Varieties.FreeAlgebras.html#16069" class="Bound">q</a> <a id="16071" class="Symbol">→</a> <a id="16073" class="Symbol">(</a><a id="16074" href="Base.Varieties.FreeAlgebras.html#16067" class="Bound">p</a> <a id="16076" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="16078" href="Base.Varieties.FreeAlgebras.html#16069" class="Bound">q</a><a id="16079" class="Symbol">)</a> <a id="16081" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="16083" href="Base.Relations.Discrete.html#4539" class="Function">kernel</a> <a id="16090" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="16092" href="Base.Varieties.FreeAlgebras.html#11893" class="Function">hom𝔽</a> <a id="16097" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="16099" class="Symbol">→</a> <a id="16101" href="Base.Varieties.FreeAlgebras.html#15925" class="Bound">𝑨</a> <a id="16103" href="Base.Varieties.EquationalLogic.html#2688" class="Function Operator">⊧</a> <a id="16105" href="Base.Varieties.FreeAlgebras.html#16067" class="Bound">p</a> <a id="16107" href="Base.Varieties.EquationalLogic.html#2688" class="Function Operator">≈</a> <a id="16109" href="Base.Varieties.FreeAlgebras.html#16069" class="Bound">q</a>
  <a id="16113" href="Base.Varieties.FreeAlgebras.html#16056" class="Function">pqlem2</a> <a id="16120" href="Base.Varieties.FreeAlgebras.html#16120" class="Bound">p</a> <a id="16122" href="Base.Varieties.FreeAlgebras.html#16122" class="Bound">q</a> <a id="16124" href="Base.Varieties.FreeAlgebras.html#16124" class="Bound">z</a> <a id="16126" class="Symbol">=</a> <a id="16128" class="Symbol">λ</a> <a id="16130" href="Base.Varieties.FreeAlgebras.html#16130" class="Bound">x</a> <a id="16132" class="Symbol">→</a> <a id="16134" href="Base.Varieties.FreeAlgebras.html#15936" class="Bound">AinMTV</a> <a id="16141" href="Base.Varieties.FreeAlgebras.html#16120" class="Bound">p</a> <a id="16143" href="Base.Varieties.FreeAlgebras.html#16122" class="Bound">q</a> <a id="16145" class="Symbol">(</a><a id="16146" href="Base.Varieties.FreeAlgebras.html#15617" class="Function">kernel-in-theory</a> <a id="16163" href="Base.Varieties.FreeAlgebras.html#16124" class="Bound">z</a><a id="16164" class="Symbol">)</a> <a id="16166" href="Base.Varieties.FreeAlgebras.html#16130" class="Bound">x</a>

  <a id="16171" href="Base.Varieties.FreeAlgebras.html#16171" class="Function">kerincl</a> <a id="16179" class="Symbol">:</a> <a id="16181" href="Base.Relations.Discrete.html#4539" class="Function">kernel</a> <a id="16188" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="16190" href="Base.Varieties.FreeAlgebras.html#11893" class="Function">hom𝔽</a> <a id="16195" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="16197" href="Relation.Unary.html#1742" class="Function Operator">⊆</a> <a id="16199" href="Base.Relations.Discrete.html#4539" class="Function">kernel</a> <a id="16206" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="16208" href="Base.Varieties.FreeAlgebras.html#15960" class="Function">φ</a> <a id="16210" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a>
  <a id="16214" href="Base.Varieties.FreeAlgebras.html#16171" class="Function">kerincl</a> <a id="16222" class="Symbol">{</a><a id="16223" href="Base.Varieties.FreeAlgebras.html#16223" class="Bound">p</a> <a id="16225" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="16227" href="Base.Varieties.FreeAlgebras.html#16227" class="Bound">q</a><a id="16228" class="Symbol">}</a> <a id="16230" href="Base.Varieties.FreeAlgebras.html#16230" class="Bound">x</a> <a id="16232" class="Symbol">=</a> <a id="16234" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="16236" href="Base.Varieties.FreeAlgebras.html#15960" class="Function">φ</a> <a id="16238" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="16240" href="Base.Varieties.FreeAlgebras.html#16223" class="Bound">p</a>      <a id="16247" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">≡⟨</a> <a id="16250" class="Symbol">(</a><a id="16251" href="Base.Terms.Operations.html#2948" class="Function">free-lift-interp</a> <a id="16268" class="Symbol">(</a><a id="16269" href="Base.Varieties.FreeAlgebras.html#10555" class="Bound">wd</a> <a id="16272" href="Base.Varieties.FreeAlgebras.html#1011" class="Bound">𝓥</a> <a id="16274" href="Base.Varieties.FreeAlgebras.html#3948" class="Function">𝓕⁺</a><a id="16276" class="Symbol">)</a> <a id="16278" href="Base.Varieties.FreeAlgebras.html#15925" class="Bound">𝑨</a> <a id="16280" href="Base.Varieties.FreeAlgebras.html#15928" class="Bound">η</a> <a id="16282" href="Base.Varieties.FreeAlgebras.html#16223" class="Bound">p</a><a id="16283" class="Symbol">)</a><a id="16284" href="Base.Overture.Preliminaries.html#4990" class="Function Operator">⁻¹</a> <a id="16287" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">⟩</a>
                      <a id="16311" class="Symbol">(</a><a id="16312" href="Base.Varieties.FreeAlgebras.html#15925" class="Bound">𝑨</a> <a id="16314" href="Base.Terms.Operations.html#2637" class="Function Operator">⟦</a> <a id="16316" href="Base.Varieties.FreeAlgebras.html#16223" class="Bound">p</a> <a id="16318" href="Base.Terms.Operations.html#2637" class="Function Operator">⟧</a><a id="16319" class="Symbol">)</a> <a id="16321" href="Base.Varieties.FreeAlgebras.html#15928" class="Bound">η</a>  <a id="16324" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">≡⟨</a> <a id="16327" href="Base.Varieties.FreeAlgebras.html#16056" class="Function">pqlem2</a> <a id="16334" href="Base.Varieties.FreeAlgebras.html#16223" class="Bound">p</a> <a id="16336" href="Base.Varieties.FreeAlgebras.html#16227" class="Bound">q</a> <a id="16338" href="Base.Varieties.FreeAlgebras.html#16230" class="Bound">x</a> <a id="16340" href="Base.Varieties.FreeAlgebras.html#15928" class="Bound">η</a> <a id="16342" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">⟩</a>
                      <a id="16366" class="Symbol">(</a><a id="16367" href="Base.Varieties.FreeAlgebras.html#15925" class="Bound">𝑨</a> <a id="16369" href="Base.Terms.Operations.html#2637" class="Function Operator">⟦</a> <a id="16371" href="Base.Varieties.FreeAlgebras.html#16227" class="Bound">q</a> <a id="16373" href="Base.Terms.Operations.html#2637" class="Function Operator">⟧</a><a id="16374" class="Symbol">)</a> <a id="16376" href="Base.Varieties.FreeAlgebras.html#15928" class="Bound">η</a>  <a id="16379" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">≡⟨</a> <a id="16382" href="Base.Terms.Operations.html#2948" class="Function">free-lift-interp</a> <a id="16399" class="Symbol">(</a><a id="16400" href="Base.Varieties.FreeAlgebras.html#10555" class="Bound">wd</a> <a id="16403" href="Base.Varieties.FreeAlgebras.html#1011" class="Bound">𝓥</a> <a id="16405" href="Base.Varieties.FreeAlgebras.html#3948" class="Function">𝓕⁺</a><a id="16407" class="Symbol">)</a> <a id="16409" href="Base.Varieties.FreeAlgebras.html#15925" class="Bound">𝑨</a> <a id="16411" href="Base.Varieties.FreeAlgebras.html#15928" class="Bound">η</a> <a id="16413" href="Base.Varieties.FreeAlgebras.html#16227" class="Bound">q</a> <a id="16415" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">⟩</a>
                      <a id="16439" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="16441" href="Base.Varieties.FreeAlgebras.html#15960" class="Function">φ</a> <a id="16443" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="16445" href="Base.Varieties.FreeAlgebras.html#16227" class="Bound">q</a>      <a id="16452" href="Relation.Binary.PropositionalEquality.Core.html#3105" class="Function Operator">∎</a>

  <a id="16457" href="Base.Varieties.FreeAlgebras.html#16457" class="Function">goal</a> <a id="16462" class="Symbol">:</a> <a id="16464" href="Base.Homomorphisms.Basic.html#4326" class="Function">epi</a> <a id="16468" href="Base.Varieties.FreeAlgebras.html#11776" class="Function">𝔽</a> <a id="16470" href="Base.Varieties.FreeAlgebras.html#15925" class="Bound">𝑨</a>
  <a id="16474" href="Base.Varieties.FreeAlgebras.html#16457" class="Function">goal</a> <a id="16479" class="Symbol">=</a> <a id="16481" href="Base.Varieties.FreeAlgebras.html#1388" class="Field">fst</a> <a id="16485" class="Symbol">(</a><a id="16486" href="Base.Homomorphisms.Factor.html#3126" class="Function">HomFactorEpi</a> <a id="16499" class="Symbol">(</a><a id="16500" href="Base.Varieties.FreeAlgebras.html#10555" class="Bound">wd</a> <a id="16503" href="Base.Varieties.FreeAlgebras.html#1011" class="Bound">𝓥</a> <a id="16505" class="Symbol">(</a><a id="16506" href="Base.Varieties.FreeAlgebras.html#903" class="Primitive">lsuc</a> <a id="16511" class="Symbol">(</a><a id="16512" href="Base.Algebras.Products.html#3165" class="Function">ov</a> <a id="16515" href="Base.Varieties.FreeAlgebras.html#1007" class="Bound">α</a><a id="16516" class="Symbol">)))</a> <a id="16520" href="Base.Varieties.FreeAlgebras.html#15925" class="Bound">𝑨</a> <a id="16522" href="Base.Varieties.FreeAlgebras.html#15960" class="Function">φ</a> <a id="16524" href="Base.Varieties.FreeAlgebras.html#11893" class="Function">hom𝔽</a> <a id="16529" href="Base.Varieties.FreeAlgebras.html#16171" class="Function">kerincl</a> <a id="16537" href="Base.Varieties.FreeAlgebras.html#11937" class="Function">hom𝔽-is-epic</a> <a id="16550" href="Base.Varieties.FreeAlgebras.html#15998" class="Function">φE</a><a id="16552" class="Symbol">)</a>

</pre>



#### <a id="the-homomorphic-images-of-F">The homomorphic images of 𝔽</a>

Finally we come to one of the main theorems of this module; it asserts that every algebra in `Mod X (Th 𝕍𝒦)` is a homomorphic image of 𝔽.  We prove this below as the function (or proof object) `𝔽-ModTh-epi`.  Before that, we prove two auxiliary lemmas.

<pre class="Agda">

 <a id="16912" class="Keyword">module</a> <a id="16919" href="Base.Varieties.FreeAlgebras.html#16919" class="Module">_</a> <a id="16921" class="Symbol">(</a><a id="16922" href="Base.Varieties.FreeAlgebras.html#16922" class="Bound">pe</a> <a id="16925" class="Symbol">:</a> <a id="16927" href="Base.Equality.Extensionality.html#3111" class="Function">pred-ext</a> <a id="16936" class="Symbol">(</a><a id="16937" href="Base.Algebras.Products.html#3165" class="Function">ov</a> <a id="16940" href="Base.Varieties.FreeAlgebras.html#1007" class="Bound">α</a><a id="16941" class="Symbol">)(</a><a id="16943" href="Base.Algebras.Products.html#3165" class="Function">ov</a> <a id="16946" href="Base.Varieties.FreeAlgebras.html#1007" class="Bound">α</a><a id="16947" class="Symbol">))(</a><a id="16950" href="Base.Varieties.FreeAlgebras.html#16950" class="Bound">wd</a> <a id="16953" class="Symbol">:</a> <a id="16955" href="Base.Equality.Welldefined.html#2969" class="Function">SwellDef</a><a id="16963" class="Symbol">)</a> <a id="16965" class="Comment">-- extensionality assumptions</a>
          <a id="17005" class="Symbol">(</a><a id="17006" href="Base.Varieties.FreeAlgebras.html#17006" class="Bound">Cset</a> <a id="17011" class="Symbol">:</a> <a id="17013" href="Base.Equality.Truncation.html#6541" class="Function">is-set</a> <a id="17020" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="17022" href="Base.Varieties.FreeAlgebras.html#10964" class="Function">ℭ</a> <a id="17024" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a><a id="17025" class="Symbol">)</a>                       <a id="17049" class="Comment">-- truncation assumptions</a>
          <a id="17085" class="Symbol">(</a><a id="17086" href="Base.Varieties.FreeAlgebras.html#17086" class="Bound">kuip</a> <a id="17091" class="Symbol">:</a> <a id="17093" href="Base.Equality.Truncation.html#10799" class="Function">blk-uip</a><a id="17100" class="Symbol">(</a><a id="17101" href="Base.Terms.Basic.html#2021" class="Datatype">Term</a> <a id="17106" href="Base.Varieties.FreeAlgebras.html#10570" class="Bound">X</a><a id="17107" class="Symbol">)</a><a id="17108" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a> <a id="17110" href="Base.Homomorphisms.Kernels.html#2677" class="Function">kercon</a> <a id="17117" class="Symbol">(</a><a id="17118" href="Base.Varieties.FreeAlgebras.html#16950" class="Bound">wd</a> <a id="17121" href="Base.Varieties.FreeAlgebras.html#1011" class="Bound">𝓥</a> <a id="17123" class="Symbol">(</a><a id="17124" href="Base.Algebras.Products.html#3165" class="Function">ov</a> <a id="17127" href="Base.Varieties.FreeAlgebras.html#1007" class="Bound">α</a><a id="17128" class="Symbol">)){</a><a id="17131" href="Base.Varieties.FreeAlgebras.html#10964" class="Function">ℭ</a><a id="17132" class="Symbol">}</a><a id="17133" href="Base.Varieties.FreeAlgebras.html#11151" class="Function">homℭ</a> <a id="17138" href="Base.Overture.Preliminaries.html#4397" class="Function Operator">∣</a><a id="17139" class="Symbol">)</a>
  <a id="17143" class="Keyword">where</a>

  <a id="17152" href="Base.Varieties.FreeAlgebras.html#17152" class="Function">𝔽≤ℭ</a> <a id="17156" class="Symbol">:</a> <a id="17158" class="Symbol">(</a><a id="17159" href="Base.Homomorphisms.Kernels.html#3085" class="Function Operator">ker[</a> <a id="17164" href="Base.Terms.Basic.html#3304" class="Function">𝑻</a> <a id="17166" href="Base.Varieties.FreeAlgebras.html#10570" class="Bound">X</a> <a id="17168" href="Base.Homomorphisms.Kernels.html#3085" class="Function Operator">⇒</a> <a id="17170" href="Base.Varieties.FreeAlgebras.html#10964" class="Function">ℭ</a> <a id="17172" href="Base.Homomorphisms.Kernels.html#3085" class="Function Operator">]</a> <a id="17174" href="Base.Varieties.FreeAlgebras.html#11151" class="Function">homℭ</a> <a id="17179" href="Base.Homomorphisms.Kernels.html#3085" class="Function Operator">↾</a> <a id="17181" class="Symbol">(</a><a id="17182" href="Base.Varieties.FreeAlgebras.html#16950" class="Bound">wd</a> <a id="17185" href="Base.Varieties.FreeAlgebras.html#1011" class="Bound">𝓥</a> <a id="17187" class="Symbol">(</a><a id="17188" href="Base.Algebras.Products.html#3165" class="Function">ov</a> <a id="17191" href="Base.Varieties.FreeAlgebras.html#1007" class="Bound">α</a><a id="17192" class="Symbol">)))</a> <a id="17196" href="Base.Subalgebras.Subalgebras.html#2266" class="Function Operator">≤</a> <a id="17198" href="Base.Varieties.FreeAlgebras.html#10964" class="Function">ℭ</a>
  <a id="17202" href="Base.Varieties.FreeAlgebras.html#17152" class="Function">𝔽≤ℭ</a> <a id="17206" class="Symbol">=</a> <a id="17208" href="Base.Subalgebras.Subalgebras.html#4092" class="Function">FirstHomCorollary|Set</a> <a id="17230" class="Symbol">(</a><a id="17231" href="Base.Terms.Basic.html#3304" class="Function">𝑻</a> <a id="17233" href="Base.Varieties.FreeAlgebras.html#10570" class="Bound">X</a><a id="17234" class="Symbol">)</a> <a id="17236" href="Base.Varieties.FreeAlgebras.html#10964" class="Function">ℭ</a> <a id="17238" href="Base.Varieties.FreeAlgebras.html#11151" class="Function">homℭ</a> <a id="17243" href="Base.Varieties.FreeAlgebras.html#16922" class="Bound">pe</a> <a id="17246" class="Symbol">(</a><a id="17247" href="Base.Varieties.FreeAlgebras.html#16950" class="Bound">wd</a> <a id="17250" href="Base.Varieties.FreeAlgebras.html#1011" class="Bound">𝓥</a> <a id="17252" class="Symbol">(</a><a id="17253" href="Base.Algebras.Products.html#3165" class="Function">ov</a> <a id="17256" href="Base.Varieties.FreeAlgebras.html#1007" class="Bound">α</a><a id="17257" class="Symbol">))</a> <a id="17260" href="Base.Varieties.FreeAlgebras.html#17006" class="Bound">Cset</a> <a id="17265" href="Base.Varieties.FreeAlgebras.html#17086" class="Bound">kuip</a>

</pre>

The last piece we need to prove that every model of `Th 𝕍𝒦` is a homomorphic image of `𝔽` is a crucial assumption that is taken for granted throughout informal universal algebra---namely, that our collection `X` of variable symbols is arbitrarily large and that we have an *environment* which interprets the variable symbols in every algebra under consideration. In other terms, an environment provides, for every algebra `𝑨`, a surjective mapping `η : X → ∣ 𝑨 ∣` from `X` onto the domain of `𝑨`.

We do *not* assert that for an arbitrary type `X` such surjective maps exist.  Indeed, our `X` must is quite special to have this property.  Later, we will construct such an `X`, but for now we simply postulate its existence. Note that this assumption that an environment exists is only required in the proof of the theorem `𝔽-ModTh-epi`.



#### <a id="F-in-VK">𝔽 ∈ V(𝒦)</a>

With this result in hand, along with what we proved earlier---namely, `PS(𝒦) ⊆ SP(𝒦) ⊆ HSP(𝒦) ≡ V 𝒦`---it is not hard to show that `𝔽` belongs to `V 𝒦`.

<pre class="Agda">

  <a id="18328" href="Base.Varieties.FreeAlgebras.html#18328" class="Function">𝔽∈SP</a> <a id="18333" class="Symbol">:</a> <a id="18335" href="Base.Equality.Truncation.html#3890" class="Function">hfunext</a> <a id="18343" class="Symbol">(</a><a id="18344" href="Base.Algebras.Products.html#3165" class="Function">ov</a> <a id="18347" href="Base.Varieties.FreeAlgebras.html#1007" class="Bound">α</a><a id="18348" class="Symbol">)(</a><a id="18350" href="Base.Algebras.Products.html#3165" class="Function">ov</a> <a id="18353" href="Base.Varieties.FreeAlgebras.html#1007" class="Bound">α</a><a id="18354" class="Symbol">)</a> <a id="18356" class="Symbol">→</a> <a id="18358" href="Base.Varieties.FreeAlgebras.html#11776" class="Function">𝔽</a> <a id="18360" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="18362" class="Symbol">(</a><a id="18363" href="Base.Varieties.Closure.html#4058" class="Datatype">S</a><a id="18364" class="Symbol">{</a><a id="18365" href="Base.Varieties.FreeAlgebras.html#3946" class="Function">𝓕</a><a id="18366" class="Symbol">}{</a><a id="18368" href="Base.Varieties.FreeAlgebras.html#3948" class="Function">𝓕⁺</a><a id="18370" class="Symbol">}</a> <a id="18372" class="Symbol">(</a><a id="18373" href="Base.Varieties.Closure.html#4634" class="Datatype">P</a><a id="18374" class="Symbol">{</a><a id="18375" href="Base.Varieties.FreeAlgebras.html#1007" class="Bound">α</a><a id="18376" class="Symbol">}{</a><a id="18378" href="Base.Varieties.FreeAlgebras.html#3946" class="Function">𝓕</a><a id="18379" class="Symbol">}</a> <a id="18381" href="Base.Varieties.FreeAlgebras.html#10583" class="Bound">𝒦</a><a id="18382" class="Symbol">))</a>
  <a id="18387" href="Base.Varieties.FreeAlgebras.html#18328" class="Function">𝔽∈SP</a> <a id="18392" href="Base.Varieties.FreeAlgebras.html#18392" class="Bound">hfe</a> <a id="18396" class="Symbol">=</a> <a id="18398" href="Base.Varieties.Closure.html#4266" class="InductiveConstructor">ssub</a> <a id="18403" class="Symbol">(</a><a id="18404" href="Base.Varieties.Preservation.html#13209" class="Function">class-prod-s-∈-sp</a> <a id="18422" href="Base.Varieties.FreeAlgebras.html#18392" class="Bound">hfe</a><a id="18425" class="Symbol">)</a> <a id="18427" href="Base.Varieties.FreeAlgebras.html#17152" class="Function">𝔽≤ℭ</a>

  <a id="18434" href="Base.Varieties.FreeAlgebras.html#18434" class="Function">𝔽∈𝕍</a> <a id="18438" class="Symbol">:</a> <a id="18440" href="Base.Equality.Truncation.html#3890" class="Function">hfunext</a> <a id="18448" class="Symbol">(</a><a id="18449" href="Base.Algebras.Products.html#3165" class="Function">ov</a> <a id="18452" href="Base.Varieties.FreeAlgebras.html#1007" class="Bound">α</a><a id="18453" class="Symbol">)(</a><a id="18455" href="Base.Algebras.Products.html#3165" class="Function">ov</a> <a id="18458" href="Base.Varieties.FreeAlgebras.html#1007" class="Bound">α</a><a id="18459" class="Symbol">)</a> <a id="18461" class="Symbol">→</a> <a id="18463" href="Base.Varieties.FreeAlgebras.html#11776" class="Function">𝔽</a> <a id="18465" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="18467" href="Base.Varieties.Closure.html#5587" class="Datatype">V</a> <a id="18469" href="Base.Varieties.FreeAlgebras.html#10583" class="Bound">𝒦</a>
  <a id="18473" href="Base.Varieties.FreeAlgebras.html#18434" class="Function">𝔽∈𝕍</a> <a id="18477" href="Base.Varieties.FreeAlgebras.html#18477" class="Bound">hfe</a> <a id="18481" class="Symbol">=</a> <a id="18483" href="Base.Varieties.Preservation.html#9502" class="Function">SP⊆V&#39;</a> <a id="18489" class="Symbol">{</a><a id="18490" href="Base.Varieties.FreeAlgebras.html#1007" class="Bound">α</a><a id="18491" class="Symbol">}{</a><a id="18493" href="Base.Varieties.FreeAlgebras.html#10541" class="Bound">fe</a> <a id="18496" href="Base.Varieties.FreeAlgebras.html#3946" class="Function">𝓕</a> <a id="18498" href="Base.Varieties.FreeAlgebras.html#1007" class="Bound">α</a><a id="18499" class="Symbol">}{</a><a id="18501" href="Base.Varieties.FreeAlgebras.html#10541" class="Bound">fe</a> <a id="18504" href="Base.Varieties.FreeAlgebras.html#3948" class="Function">𝓕⁺</a> <a id="18507" href="Base.Varieties.FreeAlgebras.html#3948" class="Function">𝓕⁺</a><a id="18509" class="Symbol">}{</a><a id="18511" href="Base.Varieties.FreeAlgebras.html#10541" class="Bound">fe</a> <a id="18514" href="Base.Varieties.FreeAlgebras.html#3946" class="Function">𝓕</a> <a id="18516" href="Base.Varieties.FreeAlgebras.html#3946" class="Function">𝓕</a><a id="18517" class="Symbol">}{</a><a id="18519" href="Base.Varieties.FreeAlgebras.html#10583" class="Bound">𝒦</a><a id="18520" class="Symbol">}</a> <a id="18522" class="Symbol">(</a><a id="18523" href="Base.Varieties.FreeAlgebras.html#18328" class="Function">𝔽∈SP</a> <a id="18528" href="Base.Varieties.FreeAlgebras.html#18477" class="Bound">hfe</a><a id="18531" class="Symbol">)</a>

</pre>

#### The HSP Theorem

Now that we have all of the necessary ingredients, it is all but trivial to
combine them to prove Birkhoff's HSP theorem. (Note that since the proof enlists
the help of the `𝔽-ModTh-epi` theorem, we must assume an environment exists,
which is manifested in the premise `∀ 𝑨 → X ↠ 𝑨`.

<pre class="Agda">

  <a id="18869" href="Base.Varieties.FreeAlgebras.html#18869" class="Function">Birkhoff</a> <a id="18878" class="Symbol">:</a> <a id="18880" href="Base.Equality.Truncation.html#3890" class="Function">hfunext</a> <a id="18888" class="Symbol">(</a><a id="18889" href="Base.Algebras.Products.html#3165" class="Function">ov</a> <a id="18892" href="Base.Varieties.FreeAlgebras.html#1007" class="Bound">α</a><a id="18893" class="Symbol">)(</a><a id="18895" href="Base.Algebras.Products.html#3165" class="Function">ov</a> <a id="18898" href="Base.Varieties.FreeAlgebras.html#1007" class="Bound">α</a><a id="18899" class="Symbol">)</a> <a id="18901" class="Symbol">→</a> <a id="18903" class="Symbol">(∀</a> <a id="18906" href="Base.Varieties.FreeAlgebras.html#18906" class="Bound">𝑨</a> <a id="18908" class="Symbol">→</a> <a id="18910" href="Base.Varieties.FreeAlgebras.html#10570" class="Bound">X</a> <a id="18912" href="Base.Varieties.FreeAlgebras.html#15756" class="Function Operator">↠</a> <a id="18914" href="Base.Varieties.FreeAlgebras.html#18906" class="Bound">𝑨</a><a id="18915" class="Symbol">)</a> <a id="18917" class="Symbol">→</a> <a id="18919" href="Base.Varieties.EquationalLogic.html#4134" class="Function">Mod</a> <a id="18923" class="Symbol">(</a><a id="18924" href="Base.Varieties.EquationalLogic.html#3560" class="Function">Th</a> <a id="18927" class="Symbol">(</a><a id="18928" href="Base.Varieties.Closure.html#5587" class="Datatype">V</a> <a id="18930" href="Base.Varieties.FreeAlgebras.html#10583" class="Bound">𝒦</a><a id="18931" class="Symbol">))</a> <a id="18934" href="Relation.Unary.html#1742" class="Function Operator">⊆</a> <a id="18936" href="Base.Varieties.Closure.html#5587" class="Datatype">V</a> <a id="18938" href="Base.Varieties.FreeAlgebras.html#10583" class="Bound">𝒦</a>
  <a id="18942" href="Base.Varieties.FreeAlgebras.html#18869" class="Function">Birkhoff</a> <a id="18951" href="Base.Varieties.FreeAlgebras.html#18951" class="Bound">hfe</a> <a id="18955" href="Base.Varieties.FreeAlgebras.html#18955" class="Bound">𝕏</a> <a id="18957" class="Symbol">{</a><a id="18958" href="Base.Varieties.FreeAlgebras.html#18958" class="Bound">𝑨</a><a id="18959" class="Symbol">}</a> <a id="18961" href="Base.Varieties.FreeAlgebras.html#18961" class="Bound">α</a> <a id="18963" class="Symbol">=</a> <a id="18965" href="Base.Varieties.Closure.html#5868" class="InductiveConstructor">vhimg</a><a id="18970" class="Symbol">{</a><a id="18971" class="Argument">𝑩</a> <a id="18973" class="Symbol">=</a> <a id="18975" href="Base.Varieties.FreeAlgebras.html#18958" class="Bound">𝑨</a><a id="18976" class="Symbol">}</a> <a id="18978" class="Symbol">(</a><a id="18979" href="Base.Varieties.FreeAlgebras.html#18434" class="Function">𝔽∈𝕍</a> <a id="18983" href="Base.Varieties.FreeAlgebras.html#18951" class="Bound">hfe</a><a id="18986" class="Symbol">)</a> <a id="18988" class="Symbol">(</a><a id="18989" href="Base.Varieties.FreeAlgebras.html#18958" class="Bound">𝑨</a> <a id="18991" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="18993" href="Base.Homomorphisms.Basic.html#4787" class="Function">epi→hom</a> <a id="19001" href="Base.Varieties.FreeAlgebras.html#18958" class="Bound">𝑨</a> <a id="19003" href="Base.Varieties.FreeAlgebras.html#19032" class="Function">φE</a> <a id="19006" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="19008" href="Base.Varieties.FreeAlgebras.html#1403" class="Field">snd</a> <a id="19012" href="Base.Overture.Preliminaries.html#4435" class="Function Operator">∥</a> <a id="19014" href="Base.Varieties.FreeAlgebras.html#19032" class="Function">φE</a> <a id="19017" href="Base.Overture.Preliminaries.html#4435" class="Function Operator">∥</a><a id="19018" class="Symbol">)</a>
   <a id="19023" class="Keyword">where</a>
   <a id="19032" href="Base.Varieties.FreeAlgebras.html#19032" class="Function">φE</a> <a id="19035" class="Symbol">:</a> <a id="19037" href="Base.Homomorphisms.Basic.html#4326" class="Function">epi</a> <a id="19041" href="Base.Varieties.FreeAlgebras.html#11776" class="Function">𝔽</a> <a id="19043" href="Base.Varieties.FreeAlgebras.html#18958" class="Bound">𝑨</a>
   <a id="19048" href="Base.Varieties.FreeAlgebras.html#19032" class="Function">φE</a> <a id="19051" class="Symbol">=</a> <a id="19053" href="Base.Varieties.FreeAlgebras.html#15841" class="Function">𝔽-ModTh-epi</a> <a id="19065" href="Base.Varieties.FreeAlgebras.html#18958" class="Bound">𝑨</a> <a id="19067" class="Symbol">(</a><a id="19068" href="Base.Varieties.FreeAlgebras.html#18955" class="Bound">𝕏</a> <a id="19070" href="Base.Varieties.FreeAlgebras.html#18958" class="Bound">𝑨</a><a id="19071" class="Symbol">)</a> <a id="19073" href="Base.Varieties.FreeAlgebras.html#18961" class="Bound">α</a>

</pre>

The converse inclusion, `V 𝒦 ⊆ Mod X (Th (V 𝒦))`, is a simple consequence of the
fact that `Mod Th` is a closure operator. Nonetheless, completeness demands
that we formalize this inclusion as well, however trivial the proof.

<pre class="Agda">

  <a id="19331" href="Base.Varieties.FreeAlgebras.html#19331" class="Function">Birkhoff-converse</a> <a id="19349" class="Symbol">:</a> <a id="19351" href="Base.Varieties.Closure.html#5587" class="Datatype">V</a><a id="19352" class="Symbol">{</a><a id="19353" href="Base.Varieties.FreeAlgebras.html#1007" class="Bound">α</a><a id="19354" class="Symbol">}{</a><a id="19356" href="Base.Varieties.FreeAlgebras.html#3946" class="Function">𝓕</a><a id="19357" class="Symbol">}</a> <a id="19359" href="Base.Varieties.FreeAlgebras.html#10583" class="Bound">𝒦</a> <a id="19361" href="Relation.Unary.html#1742" class="Function Operator">⊆</a> <a id="19363" href="Base.Varieties.EquationalLogic.html#4134" class="Function">Mod</a><a id="19366" class="Symbol">{</a><a id="19367" class="Argument">X</a> <a id="19369" class="Symbol">=</a> <a id="19371" href="Base.Varieties.FreeAlgebras.html#10570" class="Bound">X</a><a id="19372" class="Symbol">}</a> <a id="19374" class="Symbol">(</a><a id="19375" href="Base.Varieties.EquationalLogic.html#3560" class="Function">Th</a> <a id="19378" class="Symbol">(</a><a id="19379" href="Base.Varieties.Closure.html#5587" class="Datatype">V</a> <a id="19381" href="Base.Varieties.FreeAlgebras.html#10583" class="Bound">𝒦</a><a id="19382" class="Symbol">))</a>
  <a id="19387" href="Base.Varieties.FreeAlgebras.html#19331" class="Function">Birkhoff-converse</a> <a id="19405" href="Base.Varieties.FreeAlgebras.html#19405" class="Bound">α</a> <a id="19407" href="Base.Varieties.FreeAlgebras.html#19407" class="Bound">p</a> <a id="19409" href="Base.Varieties.FreeAlgebras.html#19409" class="Bound">q</a> <a id="19411" href="Base.Varieties.FreeAlgebras.html#19411" class="Bound">pThq</a> <a id="19416" class="Symbol">=</a> <a id="19418" href="Base.Varieties.FreeAlgebras.html#19411" class="Bound">pThq</a> <a id="19423" href="Base.Varieties.FreeAlgebras.html#19405" class="Bound">α</a>

</pre>

We have thus proved that every variety is an equational class.  Readers familiar
with the classical formulation of the Birkhoff HSP theorem, as an "if and only
if" result, might worry that we haven't completed the proof.  But recall that
in the [Base.Varieties.Preservation][] module we proved the following identity
preservation lemmas:

* `𝒦 ⊫ p ≈ q → H 𝒦 ⊫ p ≈ q`
* `𝒦 ⊫ p ≈ q → S 𝒦 ⊫ p ≈ q`
* `𝒦 ⊫ p ≈ q → P 𝒦 ⊫ p ≈ q`

From these it follows that every equational class is a variety. Thus, our formal
proof of Birkhoff's theorem is complete.

--------------------------------

<span style="float:left;">[← Base.Varieties.Preservation](Base.Varieties.Preservation.html)</span>
<span style="float:right;">[Base.Structures →](Base.Structures.html)</span>

{% include UALib.Links.md %}
